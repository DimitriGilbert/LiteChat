var kW=Object.defineProperty;var AW=(e,t,n)=>t in e?kW(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var wa=(e,t,n)=>AW(e,typeof t!="symbol"?t+"":t,n);function NW(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var q2={exports:{}},Cg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n4;function RW(){if(n4)return Cg;n4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var s=null;if(i!==void 0&&(s=""+i),a.key!==void 0&&(s=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:s,ref:a!==void 0?a:null,props:i}}return Cg.Fragment=t,Cg.jsx=n,Cg.jsxs=n,Cg}var r4;function IW(){return r4||(r4=1,q2.exports=RW()),q2.exports}var p=IW(),G2={exports:{}};function jW(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var h8={exports:{}},ma=h8.exports={},cl,ul;function wT(){throw new Error("setTimeout has not been defined")}function xT(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cl=setTimeout:cl=wT}catch{cl=wT}try{typeof clearTimeout=="function"?ul=clearTimeout:ul=xT}catch{ul=xT}})();function p8(e){if(cl===setTimeout)return setTimeout(e,0);if((cl===wT||!cl)&&setTimeout)return cl=setTimeout,setTimeout(e,0);try{return cl(e,0)}catch{try{return cl.call(null,e,0)}catch{return cl.call(this,e,0)}}}function DW(e){if(ul===clearTimeout)return clearTimeout(e);if((ul===xT||!ul)&&clearTimeout)return ul=clearTimeout,clearTimeout(e);try{return ul(e)}catch{try{return ul.call(null,e)}catch{return ul.call(this,e)}}}var fc=[],ap=!1,ef,Mw=-1;function MW(){!ap||!ef||(ap=!1,ef.length?fc=ef.concat(fc):Mw=-1,fc.length&&m8())}function m8(){if(!ap){var e=p8(MW);ap=!0;for(var t=fc.length;t;){for(ef=fc,fc=[];++Mw<t;)ef&&ef[Mw].run();Mw=-1,t=fc.length}ef=null,ap=!1,DW(e)}}ma.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];fc.push(new g8(e,t)),fc.length===1&&!ap&&p8(m8)};function g8(e,t){this.fun=e,this.array=t}g8.prototype.run=function(){this.fun.apply(null,this.array)};ma.title="browser";ma.browser=!0;ma.env={};ma.argv=[];ma.version="";ma.versions={};function Pc(){}ma.on=Pc;ma.addListener=Pc;ma.once=Pc;ma.off=Pc;ma.removeListener=Pc;ma.removeAllListeners=Pc;ma.emit=Pc;ma.prependListener=Pc;ma.prependOnceListener=Pc;ma.listeners=function(e){return[]};ma.binding=function(e){throw new Error("process.binding is not supported")};ma.cwd=function(){return"/"};ma.chdir=function(e){throw new Error("process.chdir is not supported")};ma.umask=function(){return 0};var OW=h8.exports;const da=jW(OW);var Bn={},a4;function PW(){if(a4)return Bn;a4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function m(G){return G===null||typeof G!="object"?null:(G=h&&G[h]||G["@@iterator"],typeof G=="function"?G:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function w(G,J,Q){this.props=G,this.context=J,this.refs=b,this.updater=Q||g}w.prototype.isReactComponent={},w.prototype.setState=function(G,J){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,J,"setState")},w.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function x(){}x.prototype=w.prototype;function _(G,J,Q){this.props=G,this.context=J,this.refs=b,this.updater=Q||g}var E=_.prototype=new x;E.constructor=_,v(E,w.prototype),E.isPureReactComponent=!0;var T=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function j(G,J,Q,se,fe,ve){return Q=ve.ref,{$$typeof:e,type:G,key:J,ref:Q!==void 0?Q:null,props:ve}}function I(G,J){return j(G.type,J,void 0,void 0,void 0,G.props)}function P(G){return typeof G=="object"&&G!==null&&G.$$typeof===e}function O(G){var J={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(Q){return J[Q]})}var U=/\/+/g;function M(G,J){return typeof G=="object"&&G!==null&&G.key!=null?O(""+G.key):J.toString(36)}function W(){}function V(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(W,W):(G.status="pending",G.then(function(J){G.status==="pending"&&(G.status="fulfilled",G.value=J)},function(J){G.status==="pending"&&(G.status="rejected",G.reason=J)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function ie(G,J,Q,se,fe){var ve=typeof G;(ve==="undefined"||ve==="boolean")&&(G=null);var je=!1;if(G===null)je=!0;else switch(ve){case"bigint":case"string":case"number":je=!0;break;case"object":switch(G.$$typeof){case e:case t:je=!0;break;case d:return je=G._init,ie(je(G._payload),J,Q,se,fe)}}if(je)return fe=fe(G),je=se===""?"."+M(G,0):se,T(fe)?(Q="",je!=null&&(Q=je.replace(U,"$&/")+"/"),ie(fe,J,Q,"",function(ye){return ye})):fe!=null&&(P(fe)&&(fe=I(fe,Q+(fe.key==null||G&&G.key===fe.key?"":(""+fe.key).replace(U,"$&/")+"/")+je)),J.push(fe)),1;je=0;var Ne=se===""?".":se+":";if(T(G))for(var Se=0;Se<G.length;Se++)se=G[Se],ve=Ne+M(se,Se),je+=ie(se,J,Q,ve,fe);else if(Se=m(G),typeof Se=="function")for(G=Se.call(G),Se=0;!(se=G.next()).done;)se=se.value,ve=Ne+M(se,Se++),je+=ie(se,J,Q,ve,fe);else if(ve==="object"){if(typeof G.then=="function")return ie(V(G),J,Q,se,fe);throw J=String(G),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return je}function ae(G,J,Q){if(G==null)return G;var se=[],fe=0;return ie(G,se,"","",function(ve){return J.call(Q,ve,fe++)}),se}function ne(G){if(G._status===-1){var J=G._result;J=J(),J.then(function(Q){(G._status===0||G._status===-1)&&(G._status=1,G._result=Q)},function(Q){(G._status===0||G._status===-1)&&(G._status=2,G._result=Q)}),G._status===-1&&(G._status=0,G._result=J)}if(G._status===1)return G._result.default;throw G._result}var q=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(J))return}else if(typeof da=="object"&&typeof da.emit=="function"){da.emit("uncaughtException",G);return}console.error(G)};function te(){}return Bn.Children={map:ae,forEach:function(G,J,Q){ae(G,function(){J.apply(this,arguments)},Q)},count:function(G){var J=0;return ae(G,function(){J++}),J},toArray:function(G){return ae(G,function(J){return J})||[]},only:function(G){if(!P(G))throw Error("React.Children.only expected to receive a single React element child.");return G}},Bn.Component=w,Bn.Fragment=n,Bn.Profiler=a,Bn.PureComponent=_,Bn.StrictMode=r,Bn.Suspense=l,Bn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Bn.__COMPILER_RUNTIME={__proto__:null,c:function(G){return k.H.useMemoCache(G)}},Bn.cache=function(G){return function(){return G.apply(null,arguments)}},Bn.cloneElement=function(G,J,Q){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var se=v({},G.props),fe=G.key,ve=void 0;if(J!=null)for(je in J.ref!==void 0&&(ve=void 0),J.key!==void 0&&(fe=""+J.key),J)!R.call(J,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&J.ref===void 0||(se[je]=J[je]);var je=arguments.length-2;if(je===1)se.children=Q;else if(1<je){for(var Ne=Array(je),Se=0;Se<je;Se++)Ne[Se]=arguments[Se+2];se.children=Ne}return j(G.type,fe,void 0,void 0,ve,se)},Bn.createContext=function(G){return G={$$typeof:s,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:i,_context:G},G},Bn.createElement=function(G,J,Q){var se,fe={},ve=null;if(J!=null)for(se in J.key!==void 0&&(ve=""+J.key),J)R.call(J,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(fe[se]=J[se]);var je=arguments.length-2;if(je===1)fe.children=Q;else if(1<je){for(var Ne=Array(je),Se=0;Se<je;Se++)Ne[Se]=arguments[Se+2];fe.children=Ne}if(G&&G.defaultProps)for(se in je=G.defaultProps,je)fe[se]===void 0&&(fe[se]=je[se]);return j(G,ve,void 0,void 0,null,fe)},Bn.createRef=function(){return{current:null}},Bn.forwardRef=function(G){return{$$typeof:o,render:G}},Bn.isValidElement=P,Bn.lazy=function(G){return{$$typeof:d,_payload:{_status:-1,_result:G},_init:ne}},Bn.memo=function(G,J){return{$$typeof:u,type:G,compare:J===void 0?null:J}},Bn.startTransition=function(G){var J=k.T,Q={};k.T=Q;try{var se=G(),fe=k.S;fe!==null&&fe(Q,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(te,q)}catch(ve){q(ve)}finally{k.T=J}},Bn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Bn.use=function(G){return k.H.use(G)},Bn.useActionState=function(G,J,Q){return k.H.useActionState(G,J,Q)},Bn.useCallback=function(G,J){return k.H.useCallback(G,J)},Bn.useContext=function(G){return k.H.useContext(G)},Bn.useDebugValue=function(){},Bn.useDeferredValue=function(G,J){return k.H.useDeferredValue(G,J)},Bn.useEffect=function(G,J,Q){var se=k.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return se.useEffect(G,J)},Bn.useId=function(){return k.H.useId()},Bn.useImperativeHandle=function(G,J,Q){return k.H.useImperativeHandle(G,J,Q)},Bn.useInsertionEffect=function(G,J){return k.H.useInsertionEffect(G,J)},Bn.useLayoutEffect=function(G,J){return k.H.useLayoutEffect(G,J)},Bn.useMemo=function(G,J){return k.H.useMemo(G,J)},Bn.useOptimistic=function(G,J){return k.H.useOptimistic(G,J)},Bn.useReducer=function(G,J,Q){return k.H.useReducer(G,J,Q)},Bn.useRef=function(G){return k.H.useRef(G)},Bn.useState=function(G){return k.H.useState(G)},Bn.useSyncExternalStore=function(G,J,Q){return k.H.useSyncExternalStore(G,J,Q)},Bn.useTransition=function(){return k.H.useTransition()},Bn.version="19.1.0",Bn}var i4;function lA(){return i4||(i4=1,G2.exports=PW()),G2.exports}var C=lA();const gt=xi(C),y8=NW({__proto__:null,default:gt},[C]);var W2={exports:{}},Tg={},K2={exports:{}},Z2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s4;function FW(){return s4||(s4=1,function(e){function t(ae,ne){var q=ae.length;ae.push(ne);e:for(;0<q;){var te=q-1>>>1,G=ae[te];if(0<a(G,ne))ae[te]=ne,ae[q]=G,q=te;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var ne=ae[0],q=ae.pop();if(q!==ne){ae[0]=q;e:for(var te=0,G=ae.length,J=G>>>1;te<J;){var Q=2*(te+1)-1,se=ae[Q],fe=Q+1,ve=ae[fe];if(0>a(se,q))fe<G&&0>a(ve,se)?(ae[te]=ve,ae[fe]=q,te=fe):(ae[te]=se,ae[Q]=q,te=Q);else if(fe<G&&0>a(ve,q))ae[te]=ve,ae[fe]=q,te=fe;else break e}}return ne}function a(ae,ne){var q=ae.sortIndex-ne.sortIndex;return q!==0?q:ae.id-ne.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],d=1,h=null,m=3,g=!1,v=!1,b=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function T(ae){for(var ne=n(u);ne!==null;){if(ne.callback===null)r(u);else if(ne.startTime<=ae)r(u),ne.sortIndex=ne.expirationTime,t(l,ne);else break;ne=n(u)}}function k(ae){if(b=!1,T(ae),!v)if(n(l)!==null)v=!0,R||(R=!0,M());else{var ne=n(u);ne!==null&&ie(k,ne.startTime-ae)}}var R=!1,j=-1,I=5,P=-1;function O(){return w?!0:!(e.unstable_now()-P<I)}function U(){if(w=!1,R){var ae=e.unstable_now();P=ae;var ne=!0;try{e:{v=!1,b&&(b=!1,_(j),j=-1),g=!0;var q=m;try{t:{for(T(ae),h=n(l);h!==null&&!(h.expirationTime>ae&&O());){var te=h.callback;if(typeof te=="function"){h.callback=null,m=h.priorityLevel;var G=te(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof G=="function"){h.callback=G,T(ae),ne=!0;break t}h===n(l)&&r(l),T(ae)}else r(l);h=n(l)}if(h!==null)ne=!0;else{var J=n(u);J!==null&&ie(k,J.startTime-ae),ne=!1}}break e}finally{h=null,m=q,g=!1}ne=void 0}}finally{ne?M():R=!1}}}var M;if(typeof E=="function")M=function(){E(U)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,V=W.port2;W.port1.onmessage=U,M=function(){V.postMessage(null)}}else M=function(){x(U,0)};function ie(ae,ne){j=x(function(){ae(e.unstable_now())},ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(ae){switch(m){case 1:case 2:case 3:var ne=3;break;default:ne=m}var q=m;m=ne;try{return ae()}finally{m=q}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(ae,ne){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var q=m;m=ae;try{return ne()}finally{m=q}},e.unstable_scheduleCallback=function(ae,ne,q){var te=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?te+q:te):q=te,ae){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=q+G,ae={id:d++,callback:ne,priorityLevel:ae,startTime:q,expirationTime:G,sortIndex:-1},q>te?(ae.sortIndex=q,t(u,ae),n(l)===null&&ae===n(u)&&(b?(_(j),j=-1):b=!0,ie(k,q-te))):(ae.sortIndex=G,t(l,ae),v||g||(v=!0,R||(R=!0,M()))),ae},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(ae){var ne=m;return function(){var q=m;m=ne;try{return ae.apply(this,arguments)}finally{m=q}}}}(Z2)),Z2}var o4;function LW(){return o4||(o4=1,K2.exports=FW()),K2.exports}var Y2={exports:{}},di={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l4;function BW(){if(l4)return di;l4=1;var e=lA();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return di.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,di.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},di.flushSync=function(l){var u=s.T,d=r.p;try{if(s.T=null,r.p=2,l)return l()}finally{s.T=u,r.p=d,r.d.f()}},di.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},di.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},di.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin),m=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:m,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},di.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},di.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=o(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},di.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},di.requestFormReset=function(l){r.d.r(l)},di.unstable_batchedUpdates=function(l,u){return l(u)},di.useFormState=function(l,u,d){return s.H.useFormState(l,u,d)},di.useFormStatus=function(){return s.H.useHostTransitionStatus()},di.version="19.1.0",di}var c4;function b8(){if(c4)return Y2.exports;c4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Y2.exports=BW(),Y2.exports}var u4;function $W(){if(u4)return Tg;u4=1;var e=LW(),t=lA(),n=b8();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function s(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function o(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var y=c,S=f;;){var N=y.return;if(N===null)break;var $=N.alternate;if($===null){if(S=N.return,S!==null){y=S;continue}break}if(N.child===$.child){for($=N.child;$;){if($===y)return o(N),c;if($===S)return o(N),f;$=$.sibling}throw Error(r(188))}if(y.return!==S.return)y=N,S=$;else{for(var le=!1,Te=N.child;Te;){if(Te===y){le=!0,y=N,S=$;break}if(Te===S){le=!0,S=N,y=$;break}Te=Te.sibling}if(!le){for(Te=$.child;Te;){if(Te===y){le=!0,y=$,S=N;break}if(Te===S){le=!0,S=$,y=N;break}Te=Te.sibling}if(!le)throw Error(r(189))}}if(y.alternate!==S)throw Error(r(190))}if(y.tag!==3)throw Error(r(188));return y.stateNode.current===y?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),E=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function M(c){return c===null||typeof c!="object"?null:(c=U&&c[U]||c["@@iterator"],typeof c=="function"?c:null)}var W=Symbol.for("react.client.reference");function V(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===W?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case w:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList";case P:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case E:return(c.displayName||"Context")+".Provider";case _:return(c._context.displayName||"Context")+".Consumer";case T:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case j:return f=c.displayName||null,f!==null?f:V(c.type)||"Memo";case I:f=c._payload,c=c._init;try{return V(c(f))}catch{}}return null}var ie=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},te=[],G=-1;function J(c){return{current:c}}function Q(c){0>G||(c.current=te[G],te[G]=null,G--)}function se(c,f){G++,te[G]=c.current,c.current=f}var fe=J(null),ve=J(null),je=J(null),Ne=J(null);function Se(c,f){switch(se(je,f),se(ve,c),se(fe,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?Rj(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=Rj(f),c=Ij(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Q(fe),se(fe,c)}function ye(){Q(fe),Q(ve),Q(je)}function Fe(c){c.memoizedState!==null&&se(Ne,c);var f=fe.current,y=Ij(f,c.type);f!==y&&(se(ve,c),se(fe,y))}function Xe(c){ve.current===c&&(Q(fe),Q(ve)),Ne.current===c&&(Q(Ne),wg._currentValue=q)}var Le=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,B=e.unstable_cancelCallback,Ce=e.unstable_shouldYield,Ee=e.unstable_requestPaint,ce=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,ee=e.unstable_ImmediatePriority,_e=e.unstable_UserBlockingPriority,Pe=e.unstable_NormalPriority,ke=e.unstable_LowPriority,We=e.unstable_IdlePriority,Nt=e.log,it=e.unstable_setDisableYieldValue,Ct=null,Ft=null;function Mt(c){if(typeof Nt=="function"&&it(c),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Ct,c)}catch{}}var Zt=Math.clz32?Math.clz32:Z,be=Math.log,D=Math.LN2;function Z(c){return c>>>=0,c===0?32:31-(be(c)/D|0)|0}var he=256,De=4194304;function we(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function Ae(c,f,y){var S=c.pendingLanes;if(S===0)return 0;var N=0,$=c.suspendedLanes,le=c.pingedLanes;c=c.warmLanes;var Te=S&134217727;return Te!==0?(S=Te&~$,S!==0?N=we(S):(le&=Te,le!==0?N=we(le):y||(y=Te&~c,y!==0&&(N=we(y))))):(Te=S&~$,Te!==0?N=we(Te):le!==0?N=we(le):y||(y=S&~c,y!==0&&(N=we(y)))),N===0?0:f!==0&&f!==N&&(f&$)===0&&($=N&-N,y=f&-f,$>=y||$===32&&(y&4194048)!==0)?f:N}function ue(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wt(){var c=he;return he<<=1,(he&4194048)===0&&(he=256),c}function L(){var c=De;return De<<=1,(De&62914560)===0&&(De=4194304),c}function $e(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function nt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ge(c,f,y,S,N,$){var le=c.pendingLanes;c.pendingLanes=y,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=y,c.entangledLanes&=y,c.errorRecoveryDisabledLanes&=y,c.shellSuspendCounter=0;var Te=c.entanglements,ze=c.expirationTimes,dt=c.hiddenUpdates;for(y=le&~y;0<y;){var At=31-Zt(y),Ot=1<<At;Te[At]=0,ze[At]=-1;var mt=dt[At];if(mt!==null)for(dt[At]=null,At=0;At<mt.length;At++){var yt=mt[At];yt!==null&&(yt.lane&=-536870913)}y&=~Ot}S!==0&&Me(c,S,0),$!==0&&N===0&&c.tag!==0&&(c.suspendedLanes|=$&~(le&~f))}function Me(c,f,y){c.pendingLanes|=f,c.suspendedLanes&=~f;var S=31-Zt(f);c.entangledLanes|=f,c.entanglements[S]=c.entanglements[S]|1073741824|y&4194090}function Ke(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var S=31-Zt(y),N=1<<S;N&f|c[S]&f&&(c[S]|=f),y&=~N}}function Dt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function me(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function K(){var c=ne.p;return c!==0?c:(c=window.event,c===void 0?32:Yj(c.type))}function H(c,f){var y=ne.p;try{return ne.p=c,f()}finally{ne.p=y}}var Y=Math.random().toString(36).slice(2),pe="__reactFiber$"+Y,Re="__reactProps$"+Y,Ve="__reactContainer$"+Y,pt="__reactEvents$"+Y,Kt="__reactListeners$"+Y,ut="__reactHandles$"+Y,It="__reactResources$"+Y,Lt="__reactMarker$"+Y;function en(c){delete c[pe],delete c[Re],delete c[pt],delete c[Kt],delete c[ut]}function In(c){var f=c[pe];if(f)return f;for(var y=c.parentNode;y;){if(f=y[Ve]||y[pe]){if(y=f.alternate,f.child!==null||y!==null&&y.child!==null)for(c=Oj(c);c!==null;){if(y=c[pe])return y;c=Oj(c)}return f}c=y,y=c.parentNode}return null}function Jn(c){if(c=c[pe]||c[Ve]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function Er(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function Cr(c){var f=c[It];return f||(f=c[It]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function zn(c){c[Lt]=!0}var Ei=new Set,Uo={};function Vo(c,f){Ho(c,f),Ho(c+"Capture",f)}function Ho(c,f){for(Uo[c]=f,c=0;c<f.length;c++)Ei.add(f[c])}var Zr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qo={},Cs={};function gb(c){return Le.call(Cs,c)?!0:Le.call(qo,c)?!1:Zr.test(c)?Cs[c]=!0:(qo[c]=!0,!1)}function ao(c,f,y){if(gb(f))if(y===null)c.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var S=f.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+y)}}function Dl(c,f,y){if(y===null)c.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+y)}}function ss(c,f,y,S){if(S===null)c.removeAttribute(y);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(y);return}c.setAttributeNS(f,y,""+S)}}var bd,Go;function Ml(c){if(bd===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);bd=f&&f[1]||"",Go=-1<y.stack.indexOf(`
    at`)?" (<anonymous>)":-1<y.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bd+c+Go}var zc=!1;function Gf(c,f){if(!c||zc)return"";zc=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(f){var Ot=function(){throw Error()};if(Object.defineProperty(Ot.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ot,[])}catch(yt){var mt=yt}Reflect.construct(c,[],Ot)}else{try{Ot.call()}catch(yt){mt=yt}c.call(Ot.prototype)}}else{try{throw Error()}catch(yt){mt=yt}(Ot=c())&&typeof Ot.catch=="function"&&Ot.catch(function(){})}}catch(yt){if(yt&&mt&&typeof yt.stack=="string")return[yt.stack,mt.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var N=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");N&&N.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var $=S.DetermineComponentFrameRoot(),le=$[0],Te=$[1];if(le&&Te){var ze=le.split(`
`),dt=Te.split(`
`);for(N=S=0;S<ze.length&&!ze[S].includes("DetermineComponentFrameRoot");)S++;for(;N<dt.length&&!dt[N].includes("DetermineComponentFrameRoot");)N++;if(S===ze.length||N===dt.length)for(S=ze.length-1,N=dt.length-1;1<=S&&0<=N&&ze[S]!==dt[N];)N--;for(;1<=S&&0<=N;S--,N--)if(ze[S]!==dt[N]){if(S!==1||N!==1)do if(S--,N--,0>N||ze[S]!==dt[N]){var At=`
`+ze[S].replace(" at new "," at ");return c.displayName&&At.includes("<anonymous>")&&(At=At.replace("<anonymous>",c.displayName)),At}while(1<=S&&0<=N);break}}}finally{zc=!1,Error.prepareStackTrace=y}return(y=c?c.displayName||c.name:"")?Ml(y):""}function Qn(c){switch(c.tag){case 26:case 27:case 5:return Ml(c.type);case 16:return Ml("Lazy");case 13:return Ml("Suspense");case 19:return Ml("SuspenseList");case 0:case 15:return Gf(c.type,!1);case 11:return Gf(c.type.render,!1);case 1:return Gf(c.type,!0);case 31:return Ml("Activity");default:return""}}function _m(c){try{var f="";do f+=Qn(c),c=c.return;while(c);return f}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}function Ci(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function Sm(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function jr(c){var f=Sm(c)?"checked":"value",y=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),S=""+c[f];if(!c.hasOwnProperty(f)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var N=y.get,$=y.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return N.call(this)},set:function(le){S=""+le,$.call(this,le)}}),Object.defineProperty(c,f,{enumerable:y.enumerable}),{getValue:function(){return S},setValue:function(le){S=""+le},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function Wo(c){c._valueTracker||(c._valueTracker=jr(c))}function Uc(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var y=f.getValue(),S="";return c&&(S=Sm(c)?c.checked?"true":"false":c.value),c=S,c!==y?(f.setValue(c),!0):!1}function io(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Em=/[\n"\\]/g;function oi(c){return c.replace(Em,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function Vc(c,f,y,S,N,$,le,Te){c.name="",le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?c.type=le:c.removeAttribute("type"),f!=null?le==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+Ci(f)):c.value!==""+Ci(f)&&(c.value=""+Ci(f)):le!=="submit"&&le!=="reset"||c.removeAttribute("value"),f!=null?Hc(c,le,Ci(f)):y!=null?Hc(c,le,Ci(y)):S!=null&&c.removeAttribute("value"),N==null&&$!=null&&(c.defaultChecked=!!$),N!=null&&(c.checked=N&&typeof N!="function"&&typeof N!="symbol"),Te!=null&&typeof Te!="function"&&typeof Te!="symbol"&&typeof Te!="boolean"?c.name=""+Ci(Te):c.removeAttribute("name")}function Cm(c,f,y,S,N,$,le,Te){if($!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(c.type=$),f!=null||y!=null){if(!($!=="submit"&&$!=="reset"||f!=null))return;y=y!=null?""+Ci(y):"",f=f!=null?""+Ci(f):y,Te||f===c.value||(c.value=f),c.defaultValue=f}S=S??N,S=typeof S!="function"&&typeof S!="symbol"&&!!S,c.checked=Te?c.checked:!!S,c.defaultChecked=!!S,le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"&&(c.name=le)}function Hc(c,f,y){f==="number"&&io(c.ownerDocument)===c||c.defaultValue===""+y||(c.defaultValue=""+y)}function Ol(c,f,y,S){if(c=c.options,f){f={};for(var N=0;N<y.length;N++)f["$"+y[N]]=!0;for(y=0;y<c.length;y++)N=f.hasOwnProperty("$"+c[y].value),c[y].selected!==N&&(c[y].selected=N),N&&S&&(c[y].defaultSelected=!0)}else{for(y=""+Ci(y),f=null,N=0;N<c.length;N++){if(c[N].value===y){c[N].selected=!0,S&&(c[N].defaultSelected=!0);return}f!==null||c[N].disabled||(f=c[N])}f!==null&&(f.selected=!0)}}function qc(c,f,y){if(f!=null&&(f=""+Ci(f),f!==c.value&&(c.value=f),y==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=y!=null?""+Ci(y):""}function Tm(c,f,y,S){if(f==null){if(S!=null){if(y!=null)throw Error(r(92));if(ie(S)){if(1<S.length)throw Error(r(93));S=S[0]}y=S}y==null&&(y=""),f=y}y=Ci(f),c.defaultValue=y,S=c.textContent,S===y&&S!==""&&S!==null&&(c.value=S)}function Gc(c,f){if(f){var y=c.firstChild;if(y&&y===c.lastChild&&y.nodeType===3){y.nodeValue=f;return}}c.textContent=f}var ir=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wf(c,f,y){var S=f.indexOf("--")===0;y==null||typeof y=="boolean"||y===""?S?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":S?c.setProperty(f,y):typeof y!="number"||y===0||ir.has(f)?f==="float"?c.cssFloat=y:c[f]=(""+y).trim():c[f]=y+"px"}function yb(c,f,y){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,y!=null){for(var S in y)!y.hasOwnProperty(S)||f!=null&&f.hasOwnProperty(S)||(S.indexOf("--")===0?c.setProperty(S,""):S==="float"?c.cssFloat="":c[S]="");for(var N in f)S=f[N],f.hasOwnProperty(N)&&y[N]!==S&&Wf(c,N,S)}else for(var $ in f)f.hasOwnProperty($)&&Wf(c,$,f[$])}function km(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ti=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Wc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pl(c){return Wc.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var Ts=null;function Kf(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Fl=null,$r=null;function os(c){var f=Jn(c);if(f&&(c=f.stateNode)){var y=c[Re]||null;e:switch(c=f.stateNode,f.type){case"input":if(Vc(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name),f=y.name,y.type==="radio"&&f!=null){for(y=c;y.parentNode;)y=y.parentNode;for(y=y.querySelectorAll('input[name="'+oi(""+f)+'"][type="radio"]'),f=0;f<y.length;f++){var S=y[f];if(S!==c&&S.form===c.form){var N=S[Re]||null;if(!N)throw Error(r(90));Vc(S,N.value,N.defaultValue,N.defaultValue,N.checked,N.defaultChecked,N.type,N.name)}}for(f=0;f<y.length;f++)S=y[f],S.form===c.form&&Uc(S)}break e;case"textarea":qc(c,y.value,y.defaultValue);break e;case"select":f=y.value,f!=null&&Ol(c,!!y.multiple,f,!1)}}}var Ll=!1;function Kc(c,f,y){if(Ll)return c(f,y);Ll=!0;try{var S=c(f);return S}finally{if(Ll=!1,(Fl!==null||$r!==null)&&(iv(),Fl&&(f=Fl,c=$r,$r=Fl=null,os(f),c)))for(f=0;f<c.length;f++)os(c[f])}}function Bl(c,f){var y=c.stateNode;if(y===null)return null;var S=y[Re]||null;if(S===null)return null;y=S[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(c=c.type,S=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!S;break e;default:c=!1}if(c)return null;if(y&&typeof y!="function")throw Error(r(231,f,typeof y));return y}var ja=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Am=!1;if(ja)try{var li={};Object.defineProperty(li,"passive",{get:function(){Am=!0}}),window.addEventListener("test",li,li),window.removeEventListener("test",li,li)}catch{Am=!1}var ks=null,Zf=null,Zc=null;function Yc(){if(Zc)return Zc;var c,f=Zf,y=f.length,S,N="value"in ks?ks.value:ks.textContent,$=N.length;for(c=0;c<y&&f[c]===N[c];c++);var le=y-c;for(S=1;S<=le&&f[y-S]===N[$-S];S++);return Zc=N.slice(c,1<S?1-S:void 0)}function Xc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function vd(){return!0}function bb(){return!1}function ga(c){function f(y,S,N,$,le){this._reactName=y,this._targetInst=N,this.type=S,this.nativeEvent=$,this.target=le,this.currentTarget=null;for(var Te in c)c.hasOwnProperty(Te)&&(y=c[Te],this[Te]=y?y($):$[Te]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?vd:bb,this.isPropagationStopped=bb,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var y=this.nativeEvent;y&&(y.preventDefault?y.preventDefault():typeof y.returnValue!="unknown"&&(y.returnValue=!1),this.isDefaultPrevented=vd)},stopPropagation:function(){var y=this.nativeEvent;y&&(y.stopPropagation?y.stopPropagation():typeof y.cancelBubble!="unknown"&&(y.cancelBubble=!0),this.isPropagationStopped=vd)},persist:function(){},isPersistent:vd}),f}var $l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yf=ga($l),Ko=d({},$l,{view:0,detail:0}),Xf=ga(Ko),wd,Nm,xd,Jf=d({},Ko,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==xd&&(xd&&c.type==="mousemove"?(wd=c.screenX-xd.screenX,Nm=c.screenY-xd.screenY):Nm=wd=0,xd=c),wd)},movementY:function(c){return"movementY"in c?c.movementY:Nm}}),Qf=ga(Jf),Rm=d({},Jf,{dataTransfer:0}),vb=ga(Rm),eh=d({},Ko,{relatedTarget:0}),Jc=ga(eh),th=d({},$l,{animationName:0,elapsedTime:0,pseudoElement:0}),wb=ga(th),iS=d({},$l,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),nh=ga(iS),Im=d({},$l,{data:0}),rh=ga(Im),jm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Da={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _d(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Da[c])?!!f[c]:!1}function zl(){return _d}var xb=d({},Ko,{key:function(c){if(c.key){var f=jm[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=Xc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?Dm[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(c){return c.type==="keypress"?Xc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Xc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ah=ga(xb),_b=d({},Jf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mm=ga(_b),ih=d({},Ko,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),Om=ga(ih),Ul=d({},$l,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pm=ga(Ul),Fm=d({},Jf,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),sh=ga(Fm),Lm=d({},$l,{newState:0,oldState:0}),Sb=ga(Lm),sS=[9,13,27,32],Sd=ja&&"CompositionEvent"in window,Zo=null;ja&&"documentMode"in document&&(Zo=document.documentMode);var oS=ja&&"TextEvent"in window&&!Zo,oh=ja&&(!Sd||Zo&&8<Zo&&11>=Zo),lh=" ",Eb=!1;function Bm(c,f){switch(c){case"keyup":return sS.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cb(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Vl=!1;function Tb(c,f){switch(c){case"compositionend":return Cb(f);case"keypress":return f.which!==32?null:(Eb=!0,lh);case"textInput":return c=f.data,c===lh&&Eb?null:c;default:return null}}function lS(c,f){if(Vl)return c==="compositionend"||!Sd&&Bm(c,f)?(c=Yc(),Zc=Zf=ks=null,Vl=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return oh&&f.locale!=="ko"?null:f.data;default:return null}}var kb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!kb[c.type]:f==="textarea"}function $m(c,f,y,S){Fl?$r?$r.push(S):$r=[S]:Fl=S,f=dv(f,"onChange"),0<f.length&&(y=new Yf("onChange","change",null,y,S),c.push({event:y,listeners:f}))}var Qc=null,Ed=null;function cS(c){Cj(c,0)}function uh(c){var f=Er(c);if(Uc(f))return c}function Cd(c,f){if(c==="change")return f}var As=!1;if(ja){var zr;if(ja){var eu="oninput"in document;if(!eu){var ki=document.createElement("div");ki.setAttribute("oninput","return;"),eu=typeof ki.oninput=="function"}zr=eu}else zr=!1;As=zr&&(!document.documentMode||9<document.documentMode)}function Ab(){Qc&&(Qc.detachEvent("onpropertychange",dh),Ed=Qc=null)}function dh(c){if(c.propertyName==="value"&&uh(Ed)){var f=[];$m(f,Ed,c,Kf(c)),Kc(cS,f)}}function Nb(c,f,y){c==="focusin"?(Ab(),Qc=f,Ed=y,Qc.attachEvent("onpropertychange",dh)):c==="focusout"&&Ab()}function Hl(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return uh(Ed)}function zm(c,f){if(c==="click")return uh(f)}function tu(c,f){if(c==="input"||c==="change")return uh(f)}function Yo(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var ci=typeof Object.is=="function"?Object.is:Yo;function A(c,f){if(ci(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),S=Object.keys(f);if(y.length!==S.length)return!1;for(S=0;S<y.length;S++){var N=y[S];if(!Le.call(f,N)||!ci(c[N],f[N]))return!1}return!0}function F(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function X(c,f){var y=F(c);c=0;for(var S;y;){if(y.nodeType===3){if(S=c+y.textContent.length,c<=f&&S>=f)return{node:y,offset:f-c};c=S}e:{for(;y;){if(y.nextSibling){y=y.nextSibling;break e}y=y.parentNode}y=void 0}y=F(y)}}function re(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?re(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function de(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=io(c.document);f instanceof c.HTMLIFrameElement;){try{var y=typeof f.contentWindow.location.href=="string"}catch{y=!1}if(y)c=f.contentWindow;else break;f=io(c.document)}return f}function xe(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var Oe=ja&&"documentMode"in document&&11>=document.documentMode,Be=null,Ze=null,Je=null,rt=!1;function He(c,f,y){var S=y.window===y?y.document:y.nodeType===9?y:y.ownerDocument;rt||Be==null||Be!==io(S)||(S=Be,"selectionStart"in S&&xe(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),Je&&A(Je,S)||(Je=S,S=dv(Ze,"onSelect"),0<S.length&&(f=new Yf("onSelect","select",null,f,y),c.push({event:f,listeners:S}),f.target=Be)))}function st(c,f){var y={};return y[c.toLowerCase()]=f.toLowerCase(),y["Webkit"+c]="webkit"+f,y["Moz"+c]="moz"+f,y}var Ge={animationend:st("Animation","AnimationEnd"),animationiteration:st("Animation","AnimationIteration"),animationstart:st("Animation","AnimationStart"),transitionrun:st("Transition","TransitionRun"),transitionstart:st("Transition","TransitionStart"),transitioncancel:st("Transition","TransitionCancel"),transitionend:st("Transition","TransitionEnd")},tt={},ot={};ja&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ge.animationend.animation,delete Ge.animationiteration.animation,delete Ge.animationstart.animation),"TransitionEvent"in window||delete Ge.transitionend.transition);function Qe(c){if(tt[c])return tt[c];if(!Ge[c])return c;var f=Ge[c],y;for(y in f)if(f.hasOwnProperty(y)&&y in ot)return tt[c]=f[y];return c}var ht=Qe("animationend"),bt=Qe("animationiteration"),xt=Qe("animationstart"),kt=Qe("transitionrun"),Ht=Qe("transitionstart"),Xt=Qe("transitioncancel"),zt=Qe("transitionend"),Wt=new Map,Jt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jt.push("scrollEnd");function Ut(c,f){Wt.set(c,f),Vo(f,[c])}var nn=new WeakMap;function mn(c,f){if(typeof c=="object"&&c!==null){var y=nn.get(c);return y!==void 0?y:(f={value:c,source:f,stack:_m(f)},nn.set(c,f),f)}return{value:c,source:f,stack:_m(f)}}var gn=[],jn=0,Xa=0;function En(){for(var c=jn,f=Xa=jn=0;f<c;){var y=gn[f];gn[f++]=null;var S=gn[f];gn[f++]=null;var N=gn[f];gn[f++]=null;var $=gn[f];if(gn[f++]=null,S!==null&&N!==null){var le=S.pending;le===null?N.next=N:(N.next=le.next,le.next=N),S.pending=N}$!==0&&Ma(y,N,$)}}function sa(c,f,y,S){gn[jn++]=c,gn[jn++]=f,gn[jn++]=y,gn[jn++]=S,Xa|=S,c.lanes|=S,c=c.alternate,c!==null&&(c.lanes|=S)}function ya(c,f,y,S){return sa(c,f,y,S),Ns(c)}function so(c,f){return sa(c,null,null,f),Ns(c)}function Ma(c,f,y){c.lanes|=y;var S=c.alternate;S!==null&&(S.lanes|=y);for(var N=!1,$=c.return;$!==null;)$.childLanes|=y,S=$.alternate,S!==null&&(S.childLanes|=y),$.tag===22&&(c=$.stateNode,c===null||c._visibility&1||(N=!0)),c=$,$=$.return;return c.tag===3?($=c.stateNode,N&&f!==null&&(N=31-Zt(y),c=$.hiddenUpdates,S=c[N],S===null?c[N]=[f]:S.push(f),f.lane=y|536870912),$):null}function Ns(c){if(50<fg)throw fg=0,m2=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var Xo={};function fG(c,f,y,S){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ls(c,f,y,S){return new fG(c,f,y,S)}function uS(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ql(c,f){var y=c.alternate;return y===null?(y=ls(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&65011712,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y.refCleanup=c.refCleanup,y}function u3(c,f){c.flags&=65011714;var y=c.alternate;return y===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=y.childLanes,c.lanes=y.lanes,c.child=y.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=y.memoizedProps,c.memoizedState=y.memoizedState,c.updateQueue=y.updateQueue,c.type=y.type,f=y.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function Rb(c,f,y,S,N,$){var le=0;if(S=c,typeof c=="function")uS(c)&&(le=1);else if(typeof c=="string")le=pW(c,y,fe.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case P:return c=ls(31,y,f,N),c.elementType=P,c.lanes=$,c;case v:return Td(y.children,N,$,f);case b:le=8,N|=24;break;case w:return c=ls(12,y,f,N|2),c.elementType=w,c.lanes=$,c;case k:return c=ls(13,y,f,N),c.elementType=k,c.lanes=$,c;case R:return c=ls(19,y,f,N),c.elementType=R,c.lanes=$,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:case E:le=10;break e;case _:le=9;break e;case T:le=11;break e;case j:le=14;break e;case I:le=16,S=null;break e}le=29,y=Error(r(130,c===null?"null":typeof c,"")),S=null}return f=ls(le,y,f,N),f.elementType=c,f.type=S,f.lanes=$,f}function Td(c,f,y,S){return c=ls(7,c,S,f),c.lanes=y,c}function dS(c,f,y){return c=ls(6,c,null,f),c.lanes=y,c}function fS(c,f,y){return f=ls(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var fh=[],hh=0,Ib=null,jb=0,Rs=[],Is=0,kd=null,Gl=1,Wl="";function Ad(c,f){fh[hh++]=jb,fh[hh++]=Ib,Ib=c,jb=f}function d3(c,f,y){Rs[Is++]=Gl,Rs[Is++]=Wl,Rs[Is++]=kd,kd=c;var S=Gl;c=Wl;var N=32-Zt(S)-1;S&=~(1<<N),y+=1;var $=32-Zt(f)+N;if(30<$){var le=N-N%5;$=(S&(1<<le)-1).toString(32),S>>=le,N-=le,Gl=1<<32-Zt(f)+N|y<<N|S,Wl=$+c}else Gl=1<<$|y<<N|S,Wl=c}function hS(c){c.return!==null&&(Ad(c,1),d3(c,1,0))}function pS(c){for(;c===Ib;)Ib=fh[--hh],fh[hh]=null,jb=fh[--hh],fh[hh]=null;for(;c===kd;)kd=Rs[--Is],Rs[Is]=null,Wl=Rs[--Is],Rs[Is]=null,Gl=Rs[--Is],Rs[Is]=null}var Ai=null,ta=null,fr=!1,Nd=null,Jo=!1,mS=Error(r(519));function Rd(c){var f=Error(r(418,""));throw Hm(mn(f,c)),mS}function f3(c){var f=c.stateNode,y=c.type,S=c.memoizedProps;switch(f[pe]=c,f[Re]=S,y){case"dialog":tr("cancel",f),tr("close",f);break;case"iframe":case"object":case"embed":tr("load",f);break;case"video":case"audio":for(y=0;y<pg.length;y++)tr(pg[y],f);break;case"source":tr("error",f);break;case"img":case"image":case"link":tr("error",f),tr("load",f);break;case"details":tr("toggle",f);break;case"input":tr("invalid",f),Cm(f,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Wo(f);break;case"select":tr("invalid",f);break;case"textarea":tr("invalid",f),Tm(f,S.value,S.defaultValue,S.children),Wo(f)}y=S.children,typeof y!="string"&&typeof y!="number"&&typeof y!="bigint"||f.textContent===""+y||S.suppressHydrationWarning===!0||Nj(f.textContent,y)?(S.popover!=null&&(tr("beforetoggle",f),tr("toggle",f)),S.onScroll!=null&&tr("scroll",f),S.onScrollEnd!=null&&tr("scrollend",f),S.onClick!=null&&(f.onclick=fv),f=!0):f=!1,f||Rd(c)}function h3(c){for(Ai=c.return;Ai;)switch(Ai.tag){case 5:case 13:Jo=!1;return;case 27:case 3:Jo=!0;return;default:Ai=Ai.return}}function Um(c){if(c!==Ai)return!1;if(!fr)return h3(c),fr=!0,!1;var f=c.tag,y;if((y=f!==3&&f!==27)&&((y=f===5)&&(y=c.type,y=!(y!=="form"&&y!=="button")||I2(c.type,c.memoizedProps)),y=!y),y&&ta&&Rd(c),h3(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(y=c.data,y==="/$"){if(f===0){ta=lo(c.nextSibling);break e}f--}else y!=="$"&&y!=="$!"&&y!=="$?"||f++;c=c.nextSibling}ta=null}}else f===27?(f=ta,yu(c.type)?(c=O2,O2=null,ta=c):ta=f):ta=Ai?lo(c.stateNode.nextSibling):null;return!0}function Vm(){ta=Ai=null,fr=!1}function p3(){var c=Nd;return c!==null&&(Ui===null?Ui=c:Ui.push.apply(Ui,c),Nd=null),c}function Hm(c){Nd===null?Nd=[c]:Nd.push(c)}var gS=J(null),Id=null,Kl=null;function nu(c,f,y){se(gS,f._currentValue),f._currentValue=y}function Zl(c){c._currentValue=gS.current,Q(gS)}function yS(c,f,y){for(;c!==null;){var S=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,S!==null&&(S.childLanes|=f)):S!==null&&(S.childLanes&f)!==f&&(S.childLanes|=f),c===y)break;c=c.return}}function bS(c,f,y,S){var N=c.child;for(N!==null&&(N.return=c);N!==null;){var $=N.dependencies;if($!==null){var le=N.child;$=$.firstContext;e:for(;$!==null;){var Te=$;$=N;for(var ze=0;ze<f.length;ze++)if(Te.context===f[ze]){$.lanes|=y,Te=$.alternate,Te!==null&&(Te.lanes|=y),yS($.return,y,c),S||(le=null);break e}$=Te.next}}else if(N.tag===18){if(le=N.return,le===null)throw Error(r(341));le.lanes|=y,$=le.alternate,$!==null&&($.lanes|=y),yS(le,y,c),le=null}else le=N.child;if(le!==null)le.return=N;else for(le=N;le!==null;){if(le===c){le=null;break}if(N=le.sibling,N!==null){N.return=le.return,le=N;break}le=le.return}N=le}}function qm(c,f,y,S){c=null;for(var N=f,$=!1;N!==null;){if(!$){if((N.flags&524288)!==0)$=!0;else if((N.flags&262144)!==0)break}if(N.tag===10){var le=N.alternate;if(le===null)throw Error(r(387));if(le=le.memoizedProps,le!==null){var Te=N.type;ci(N.pendingProps.value,le.value)||(c!==null?c.push(Te):c=[Te])}}else if(N===Ne.current){if(le=N.alternate,le===null)throw Error(r(387));le.memoizedState.memoizedState!==N.memoizedState.memoizedState&&(c!==null?c.push(wg):c=[wg])}N=N.return}c!==null&&bS(f,c,y,S),f.flags|=262144}function Db(c){for(c=c.firstContext;c!==null;){if(!ci(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function jd(c){Id=c,Kl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function ui(c){return m3(Id,c)}function Mb(c,f){return Id===null&&jd(c),m3(c,f)}function m3(c,f){var y=f._currentValue;if(f={context:f,memoizedValue:y,next:null},Kl===null){if(c===null)throw Error(r(308));Kl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else Kl=Kl.next=f;return y}var hG=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(y,S){c.push(S)}};this.abort=function(){f.aborted=!0,c.forEach(function(y){return y()})}},pG=e.unstable_scheduleCallback,mG=e.unstable_NormalPriority,Ca={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vS(){return{controller:new hG,data:new Map,refCount:0}}function Gm(c){c.refCount--,c.refCount===0&&pG(mG,function(){c.controller.abort()})}var Wm=null,wS=0,ph=0,mh=null;function gG(c,f){if(Wm===null){var y=Wm=[];wS=0,ph=_2(),mh={status:"pending",value:void 0,then:function(S){y.push(S)}}}return wS++,f.then(g3,g3),f}function g3(){if(--wS===0&&Wm!==null){mh!==null&&(mh.status="fulfilled");var c=Wm;Wm=null,ph=0,mh=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function yG(c,f){var y=[],S={status:"pending",value:null,reason:null,then:function(N){y.push(N)}};return c.then(function(){S.status="fulfilled",S.value=f;for(var N=0;N<y.length;N++)(0,y[N])(f)},function(N){for(S.status="rejected",S.reason=N,N=0;N<y.length;N++)(0,y[N])(void 0)}),S}var y3=ae.S;ae.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&gG(c,f),y3!==null&&y3(c,f)};var Dd=J(null);function xS(){var c=Dd.current;return c!==null?c:Fr.pooledCache}function Ob(c,f){f===null?se(Dd,Dd.current):se(Dd,f.pool)}function b3(){var c=xS();return c===null?null:{parent:Ca._currentValue,pool:c}}var Km=Error(r(460)),v3=Error(r(474)),Pb=Error(r(542)),_S={then:function(){}};function w3(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Fb(){}function x3(c,f,y){switch(y=c[y],y===void 0?c.push(f):y!==f&&(f.then(Fb,Fb),f=y),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,S3(c),c;default:if(typeof f.status=="string")f.then(Fb,Fb);else{if(c=Fr,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(S){if(f.status==="pending"){var N=f;N.status="fulfilled",N.value=S}},function(S){if(f.status==="pending"){var N=f;N.status="rejected",N.reason=S}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,S3(c),c}throw Zm=f,Km}}var Zm=null;function _3(){if(Zm===null)throw Error(r(459));var c=Zm;return Zm=null,c}function S3(c){if(c===Km||c===Pb)throw Error(r(483))}var ru=!1;function SS(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ES(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function au(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function iu(c,f,y){var S=c.updateQueue;if(S===null)return null;if(S=S.shared,(br&2)!==0){var N=S.pending;return N===null?f.next=f:(f.next=N.next,N.next=f),S.pending=f,f=Ns(c),Ma(c,null,y),f}return sa(c,S,f,y),Ns(c)}function Ym(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194048)!==0)){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,Ke(c,y)}}function CS(c,f){var y=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,y===S)){var N=null,$=null;if(y=y.firstBaseUpdate,y!==null){do{var le={lane:y.lane,tag:y.tag,payload:y.payload,callback:null,next:null};$===null?N=$=le:$=$.next=le,y=y.next}while(y!==null);$===null?N=$=f:$=$.next=f}else N=$=f;y={baseState:S.baseState,firstBaseUpdate:N,lastBaseUpdate:$,shared:S.shared,callbacks:S.callbacks},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}var TS=!1;function Xm(){if(TS){var c=mh;if(c!==null)throw c}}function Jm(c,f,y,S){TS=!1;var N=c.updateQueue;ru=!1;var $=N.firstBaseUpdate,le=N.lastBaseUpdate,Te=N.shared.pending;if(Te!==null){N.shared.pending=null;var ze=Te,dt=ze.next;ze.next=null,le===null?$=dt:le.next=dt,le=ze;var At=c.alternate;At!==null&&(At=At.updateQueue,Te=At.lastBaseUpdate,Te!==le&&(Te===null?At.firstBaseUpdate=dt:Te.next=dt,At.lastBaseUpdate=ze))}if($!==null){var Ot=N.baseState;le=0,At=dt=ze=null,Te=$;do{var mt=Te.lane&-536870913,yt=mt!==Te.lane;if(yt?(sr&mt)===mt:(S&mt)===mt){mt!==0&&mt===ph&&(TS=!0),At!==null&&(At=At.next={lane:0,tag:Te.tag,payload:Te.payload,callback:null,next:null});e:{var Cn=c,yn=Te;mt=f;var Ar=y;switch(yn.tag){case 1:if(Cn=yn.payload,typeof Cn=="function"){Ot=Cn.call(Ar,Ot,mt);break e}Ot=Cn;break e;case 3:Cn.flags=Cn.flags&-65537|128;case 0:if(Cn=yn.payload,mt=typeof Cn=="function"?Cn.call(Ar,Ot,mt):Cn,mt==null)break e;Ot=d({},Ot,mt);break e;case 2:ru=!0}}mt=Te.callback,mt!==null&&(c.flags|=64,yt&&(c.flags|=8192),yt=N.callbacks,yt===null?N.callbacks=[mt]:yt.push(mt))}else yt={lane:mt,tag:Te.tag,payload:Te.payload,callback:Te.callback,next:null},At===null?(dt=At=yt,ze=Ot):At=At.next=yt,le|=mt;if(Te=Te.next,Te===null){if(Te=N.shared.pending,Te===null)break;yt=Te,Te=yt.next,yt.next=null,N.lastBaseUpdate=yt,N.shared.pending=null}}while(!0);At===null&&(ze=Ot),N.baseState=ze,N.firstBaseUpdate=dt,N.lastBaseUpdate=At,$===null&&(N.shared.lanes=0),hu|=le,c.lanes=le,c.memoizedState=Ot}}function E3(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function C3(c,f){var y=c.callbacks;if(y!==null)for(c.callbacks=null,c=0;c<y.length;c++)E3(y[c],f)}var gh=J(null),Lb=J(0);function T3(c,f){c=nc,se(Lb,c),se(gh,f),nc=c|f.baseLanes}function kS(){se(Lb,nc),se(gh,gh.current)}function AS(){nc=Lb.current,Q(gh),Q(Lb)}var su=0,Gn=null,Tr=null,ba=null,Bb=!1,yh=!1,Md=!1,$b=0,Qm=0,bh=null,bG=0;function oa(){throw Error(r(321))}function NS(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!ci(c[y],f[y]))return!1;return!0}function RS(c,f,y,S,N,$){return su=$,Gn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ae.H=c===null||c.memoizedState===null?cI:uI,Md=!1,$=y(S,N),Md=!1,yh&&($=A3(f,y,S,N)),k3(c),$}function k3(c){ae.H=Gb;var f=Tr!==null&&Tr.next!==null;if(su=0,ba=Tr=Gn=null,Bb=!1,Qm=0,bh=null,f)throw Error(r(300));c===null||Oa||(c=c.dependencies,c!==null&&Db(c)&&(Oa=!0))}function A3(c,f,y,S){Gn=c;var N=0;do{if(yh&&(bh=null),Qm=0,yh=!1,25<=N)throw Error(r(301));if(N+=1,ba=Tr=null,c.updateQueue!=null){var $=c.updateQueue;$.lastEffect=null,$.events=null,$.stores=null,$.memoCache!=null&&($.memoCache.index=0)}ae.H=CG,$=f(y,S)}while(yh);return $}function vG(){var c=ae.H,f=c.useState()[0];return f=typeof f.then=="function"?eg(f):f,c=c.useState()[0],(Tr!==null?Tr.memoizedState:null)!==c&&(Gn.flags|=1024),f}function IS(){var c=$b!==0;return $b=0,c}function jS(c,f,y){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~y}function DS(c){if(Bb){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Bb=!1}su=0,ba=Tr=Gn=null,yh=!1,Qm=$b=0,bh=null}function $i(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ba===null?Gn.memoizedState=ba=c:ba=ba.next=c,ba}function va(){if(Tr===null){var c=Gn.alternate;c=c!==null?c.memoizedState:null}else c=Tr.next;var f=ba===null?Gn.memoizedState:ba.next;if(f!==null)ba=f,Tr=c;else{if(c===null)throw Gn.alternate===null?Error(r(467)):Error(r(310));Tr=c,c={memoizedState:Tr.memoizedState,baseState:Tr.baseState,baseQueue:Tr.baseQueue,queue:Tr.queue,next:null},ba===null?Gn.memoizedState=ba=c:ba=ba.next=c}return ba}function MS(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eg(c){var f=Qm;return Qm+=1,bh===null&&(bh=[]),c=x3(bh,c,f),f=Gn,(ba===null?f.memoizedState:ba.next)===null&&(f=f.alternate,ae.H=f===null||f.memoizedState===null?cI:uI),c}function zb(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return eg(c);if(c.$$typeof===E)return ui(c)}throw Error(r(438,String(c)))}function OS(c){var f=null,y=Gn.updateQueue;if(y!==null&&(f=y.memoCache),f==null){var S=Gn.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(f={data:S.data.map(function(N){return N.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),y===null&&(y=MS(),Gn.updateQueue=y),y.memoCache=f,y=f.data[f.index],y===void 0)for(y=f.data[f.index]=Array(c),S=0;S<c;S++)y[S]=O;return f.index++,y}function Yl(c,f){return typeof f=="function"?f(c):f}function Ub(c){var f=va();return PS(f,Tr,c)}function PS(c,f,y){var S=c.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=y;var N=c.baseQueue,$=S.pending;if($!==null){if(N!==null){var le=N.next;N.next=$.next,$.next=le}f.baseQueue=N=$,S.pending=null}if($=c.baseState,N===null)c.memoizedState=$;else{f=N.next;var Te=le=null,ze=null,dt=f,At=!1;do{var Ot=dt.lane&-536870913;if(Ot!==dt.lane?(sr&Ot)===Ot:(su&Ot)===Ot){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),Ot===ph&&(At=!0);else if((su&mt)===mt){dt=dt.next,mt===ph&&(At=!0);continue}else Ot={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(Te=ze=Ot,le=$):ze=ze.next=Ot,Gn.lanes|=mt,hu|=mt;Ot=dt.action,Md&&y($,Ot),$=dt.hasEagerState?dt.eagerState:y($,Ot)}else mt={lane:Ot,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(Te=ze=mt,le=$):ze=ze.next=mt,Gn.lanes|=Ot,hu|=Ot;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?le=$:ze.next=Te,!ci($,c.memoizedState)&&(Oa=!0,At&&(y=mh,y!==null)))throw y;c.memoizedState=$,c.baseState=le,c.baseQueue=ze,S.lastRenderedState=$}return N===null&&(S.lanes=0),[c.memoizedState,S.dispatch]}function FS(c){var f=va(),y=f.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=c;var S=y.dispatch,N=y.pending,$=f.memoizedState;if(N!==null){y.pending=null;var le=N=N.next;do $=c($,le.action),le=le.next;while(le!==N);ci($,f.memoizedState)||(Oa=!0),f.memoizedState=$,f.baseQueue===null&&(f.baseState=$),y.lastRenderedState=$}return[$,S]}function N3(c,f,y){var S=Gn,N=va(),$=fr;if($){if(y===void 0)throw Error(r(407));y=y()}else y=f();var le=!ci((Tr||N).memoizedState,y);le&&(N.memoizedState=y,Oa=!0),N=N.queue;var Te=j3.bind(null,S,N,c);if(tg(2048,8,Te,[c]),N.getSnapshot!==f||le||ba!==null&&ba.memoizedState.tag&1){if(S.flags|=2048,vh(9,Vb(),I3.bind(null,S,N,y,f),null),Fr===null)throw Error(r(349));$||(su&124)!==0||R3(S,f,y)}return y}function R3(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=Gn.updateQueue,f===null?(f=MS(),Gn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function I3(c,f,y,S){f.value=y,f.getSnapshot=S,D3(f)&&M3(c)}function j3(c,f,y){return y(function(){D3(f)&&M3(c)})}function D3(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!ci(c,y)}catch{return!0}}function M3(c){var f=so(c,2);f!==null&&hs(f,c,2)}function LS(c){var f=$i();if(typeof c=="function"){var y=c;if(c=y(),Md){Mt(!0);try{y()}finally{Mt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:c},f}function O3(c,f,y,S){return c.baseState=y,PS(c,Tr,typeof S=="function"?S:Yl)}function wG(c,f,y,S,N){if(qb(c))throw Error(r(485));if(c=f.action,c!==null){var $={payload:N,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(le){$.listeners.push(le)}};ae.T!==null?y(!0):$.isTransition=!1,S($),y=f.pending,y===null?($.next=f.pending=$,P3(f,$)):($.next=y.next,f.pending=y.next=$)}}function P3(c,f){var y=f.action,S=f.payload,N=c.state;if(f.isTransition){var $=ae.T,le={};ae.T=le;try{var Te=y(N,S),ze=ae.S;ze!==null&&ze(le,Te),F3(c,f,Te)}catch(dt){BS(c,f,dt)}finally{ae.T=$}}else try{$=y(N,S),F3(c,f,$)}catch(dt){BS(c,f,dt)}}function F3(c,f,y){y!==null&&typeof y=="object"&&typeof y.then=="function"?y.then(function(S){L3(c,f,S)},function(S){return BS(c,f,S)}):L3(c,f,y)}function L3(c,f,y){f.status="fulfilled",f.value=y,B3(f),c.state=y,f=c.pending,f!==null&&(y=f.next,y===f?c.pending=null:(y=y.next,f.next=y,P3(c,y)))}function BS(c,f,y){var S=c.pending;if(c.pending=null,S!==null){S=S.next;do f.status="rejected",f.reason=y,B3(f),f=f.next;while(f!==S)}c.action=null}function B3(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function $3(c,f){return f}function z3(c,f){if(fr){var y=Fr.formState;if(y!==null){e:{var S=Gn;if(fr){if(ta){t:{for(var N=ta,$=Jo;N.nodeType!==8;){if(!$){N=null;break t}if(N=lo(N.nextSibling),N===null){N=null;break t}}$=N.data,N=$==="F!"||$==="F"?N:null}if(N){ta=lo(N.nextSibling),S=N.data==="F!";break e}}Rd(S)}S=!1}S&&(f=y[0])}}return y=$i(),y.memoizedState=y.baseState=f,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$3,lastRenderedState:f},y.queue=S,y=sI.bind(null,Gn,S),S.dispatch=y,S=LS(!1),$=HS.bind(null,Gn,!1,S.queue),S=$i(),N={state:f,dispatch:null,action:c,pending:null},S.queue=N,y=wG.bind(null,Gn,N,$,y),N.dispatch=y,S.memoizedState=c,[f,y,!1]}function U3(c){var f=va();return V3(f,Tr,c)}function V3(c,f,y){if(f=PS(c,f,$3)[0],c=Ub(Yl)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var S=eg(f)}catch(le){throw le===Km?Pb:le}else S=f;f=va();var N=f.queue,$=N.dispatch;return y!==f.memoizedState&&(Gn.flags|=2048,vh(9,Vb(),xG.bind(null,N,y),null)),[S,$,c]}function xG(c,f){c.action=f}function H3(c){var f=va(),y=Tr;if(y!==null)return V3(f,y,c);va(),f=f.memoizedState,y=va();var S=y.queue.dispatch;return y.memoizedState=c,[f,S,!1]}function vh(c,f,y,S){return c={tag:c,create:y,deps:S,inst:f,next:null},f=Gn.updateQueue,f===null&&(f=MS(),Gn.updateQueue=f),y=f.lastEffect,y===null?f.lastEffect=c.next=c:(S=y.next,y.next=c,c.next=S,f.lastEffect=c),c}function Vb(){return{destroy:void 0,resource:void 0}}function q3(){return va().memoizedState}function Hb(c,f,y,S){var N=$i();S=S===void 0?null:S,Gn.flags|=c,N.memoizedState=vh(1|f,Vb(),y,S)}function tg(c,f,y,S){var N=va();S=S===void 0?null:S;var $=N.memoizedState.inst;Tr!==null&&S!==null&&NS(S,Tr.memoizedState.deps)?N.memoizedState=vh(f,$,y,S):(Gn.flags|=c,N.memoizedState=vh(1|f,$,y,S))}function G3(c,f){Hb(8390656,8,c,f)}function W3(c,f){tg(2048,8,c,f)}function K3(c,f){return tg(4,2,c,f)}function Z3(c,f){return tg(4,4,c,f)}function Y3(c,f){if(typeof f=="function"){c=c();var y=f(c);return function(){typeof y=="function"?y():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function X3(c,f,y){y=y!=null?y.concat([c]):null,tg(4,4,Y3.bind(null,f,c),y)}function $S(){}function J3(c,f){var y=va();f=f===void 0?null:f;var S=y.memoizedState;return f!==null&&NS(f,S[1])?S[0]:(y.memoizedState=[c,f],c)}function Q3(c,f){var y=va();f=f===void 0?null:f;var S=y.memoizedState;if(f!==null&&NS(f,S[1]))return S[0];if(S=c(),Md){Mt(!0);try{c()}finally{Mt(!1)}}return y.memoizedState=[S,f],S}function zS(c,f,y){return y===void 0||(su&1073741824)!==0?c.memoizedState=f:(c.memoizedState=y,c=nj(),Gn.lanes|=c,hu|=c,y)}function eI(c,f,y,S){return ci(y,f)?y:gh.current!==null?(c=zS(c,y,S),ci(c,f)||(Oa=!0),c):(su&42)===0?(Oa=!0,c.memoizedState=y):(c=nj(),Gn.lanes|=c,hu|=c,f)}function tI(c,f,y,S,N){var $=ne.p;ne.p=$!==0&&8>$?$:8;var le=ae.T,Te={};ae.T=Te,HS(c,!1,f,y);try{var ze=N(),dt=ae.S;if(dt!==null&&dt(Te,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var At=yG(ze,S);ng(c,f,At,fs(c))}else ng(c,f,S,fs(c))}catch(Ot){ng(c,f,{then:function(){},status:"rejected",reason:Ot},fs())}finally{ne.p=$,ae.T=le}}function _G(){}function US(c,f,y,S){if(c.tag!==5)throw Error(r(476));var N=nI(c).queue;tI(c,N,f,q,y===null?_G:function(){return rI(c),y(S)})}function nI(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:q},next:null};var y={};return f.next={memoizedState:y,baseState:y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Yl,lastRenderedState:y},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function rI(c){var f=nI(c).next.queue;ng(c,f,{},fs())}function VS(){return ui(wg)}function aI(){return va().memoizedState}function iI(){return va().memoizedState}function SG(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var y=fs();c=au(y);var S=iu(f,c,y);S!==null&&(hs(S,f,y),Ym(S,f,y)),f={cache:vS()},c.payload=f;return}f=f.return}}function EG(c,f,y){var S=fs();y={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null},qb(c)?oI(f,y):(y=ya(c,f,y,S),y!==null&&(hs(y,c,S),lI(y,f,S)))}function sI(c,f,y){var S=fs();ng(c,f,y,S)}function ng(c,f,y,S){var N={lane:S,revertLane:0,action:y,hasEagerState:!1,eagerState:null,next:null};if(qb(c))oI(f,N);else{var $=c.alternate;if(c.lanes===0&&($===null||$.lanes===0)&&($=f.lastRenderedReducer,$!==null))try{var le=f.lastRenderedState,Te=$(le,y);if(N.hasEagerState=!0,N.eagerState=Te,ci(Te,le))return sa(c,f,N,0),Fr===null&&En(),!1}catch{}finally{}if(y=ya(c,f,N,S),y!==null)return hs(y,c,S),lI(y,f,S),!0}return!1}function HS(c,f,y,S){if(S={lane:2,revertLane:_2(),action:S,hasEagerState:!1,eagerState:null,next:null},qb(c)){if(f)throw Error(r(479))}else f=ya(c,y,S,2),f!==null&&hs(f,c,2)}function qb(c){var f=c.alternate;return c===Gn||f!==null&&f===Gn}function oI(c,f){yh=Bb=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function lI(c,f,y){if((y&4194048)!==0){var S=f.lanes;S&=c.pendingLanes,y|=S,f.lanes=y,Ke(c,y)}}var Gb={readContext:ui,use:zb,useCallback:oa,useContext:oa,useEffect:oa,useImperativeHandle:oa,useLayoutEffect:oa,useInsertionEffect:oa,useMemo:oa,useReducer:oa,useRef:oa,useState:oa,useDebugValue:oa,useDeferredValue:oa,useTransition:oa,useSyncExternalStore:oa,useId:oa,useHostTransitionStatus:oa,useFormState:oa,useActionState:oa,useOptimistic:oa,useMemoCache:oa,useCacheRefresh:oa},cI={readContext:ui,use:zb,useCallback:function(c,f){return $i().memoizedState=[c,f===void 0?null:f],c},useContext:ui,useEffect:G3,useImperativeHandle:function(c,f,y){y=y!=null?y.concat([c]):null,Hb(4194308,4,Y3.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Hb(4194308,4,c,f)},useInsertionEffect:function(c,f){Hb(4,2,c,f)},useMemo:function(c,f){var y=$i();f=f===void 0?null:f;var S=c();if(Md){Mt(!0);try{c()}finally{Mt(!1)}}return y.memoizedState=[S,f],S},useReducer:function(c,f,y){var S=$i();if(y!==void 0){var N=y(f);if(Md){Mt(!0);try{y(f)}finally{Mt(!1)}}}else N=f;return S.memoizedState=S.baseState=N,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:N},S.queue=c,c=c.dispatch=EG.bind(null,Gn,c),[S.memoizedState,c]},useRef:function(c){var f=$i();return c={current:c},f.memoizedState=c},useState:function(c){c=LS(c);var f=c.queue,y=sI.bind(null,Gn,f);return f.dispatch=y,[c.memoizedState,y]},useDebugValue:$S,useDeferredValue:function(c,f){var y=$i();return zS(y,c,f)},useTransition:function(){var c=LS(!1);return c=tI.bind(null,Gn,c.queue,!0,!1),$i().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,y){var S=Gn,N=$i();if(fr){if(y===void 0)throw Error(r(407));y=y()}else{if(y=f(),Fr===null)throw Error(r(349));(sr&124)!==0||R3(S,f,y)}N.memoizedState=y;var $={value:y,getSnapshot:f};return N.queue=$,G3(j3.bind(null,S,$,c),[c]),S.flags|=2048,vh(9,Vb(),I3.bind(null,S,$,y,f),null),y},useId:function(){var c=$i(),f=Fr.identifierPrefix;if(fr){var y=Wl,S=Gl;y=(S&~(1<<32-Zt(S)-1)).toString(32)+y,f=""+f+"R"+y,y=$b++,0<y&&(f+="H"+y.toString(32)),f+=""}else y=bG++,f=""+f+"r"+y.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:VS,useFormState:z3,useActionState:z3,useOptimistic:function(c){var f=$i();f.memoizedState=f.baseState=c;var y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=y,f=HS.bind(null,Gn,!0,y),y.dispatch=f,[c,f]},useMemoCache:OS,useCacheRefresh:function(){return $i().memoizedState=SG.bind(null,Gn)}},uI={readContext:ui,use:zb,useCallback:J3,useContext:ui,useEffect:W3,useImperativeHandle:X3,useInsertionEffect:K3,useLayoutEffect:Z3,useMemo:Q3,useReducer:Ub,useRef:q3,useState:function(){return Ub(Yl)},useDebugValue:$S,useDeferredValue:function(c,f){var y=va();return eI(y,Tr.memoizedState,c,f)},useTransition:function(){var c=Ub(Yl)[0],f=va().memoizedState;return[typeof c=="boolean"?c:eg(c),f]},useSyncExternalStore:N3,useId:aI,useHostTransitionStatus:VS,useFormState:U3,useActionState:U3,useOptimistic:function(c,f){var y=va();return O3(y,Tr,c,f)},useMemoCache:OS,useCacheRefresh:iI},CG={readContext:ui,use:zb,useCallback:J3,useContext:ui,useEffect:W3,useImperativeHandle:X3,useInsertionEffect:K3,useLayoutEffect:Z3,useMemo:Q3,useReducer:FS,useRef:q3,useState:function(){return FS(Yl)},useDebugValue:$S,useDeferredValue:function(c,f){var y=va();return Tr===null?zS(y,c,f):eI(y,Tr.memoizedState,c,f)},useTransition:function(){var c=FS(Yl)[0],f=va().memoizedState;return[typeof c=="boolean"?c:eg(c),f]},useSyncExternalStore:N3,useId:aI,useHostTransitionStatus:VS,useFormState:H3,useActionState:H3,useOptimistic:function(c,f){var y=va();return Tr!==null?O3(y,Tr,c,f):(y.baseState=c,[c,y.queue.dispatch])},useMemoCache:OS,useCacheRefresh:iI},wh=null,rg=0;function Wb(c){var f=rg;return rg+=1,wh===null&&(wh=[]),x3(wh,c,f)}function ag(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Kb(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function dI(c){var f=c._init;return f(c._payload)}function fI(c){function f(at,Ye){if(c){var ct=at.deletions;ct===null?(at.deletions=[Ye],at.flags|=16):ct.push(Ye)}}function y(at,Ye){if(!c)return null;for(;Ye!==null;)f(at,Ye),Ye=Ye.sibling;return null}function S(at){for(var Ye=new Map;at!==null;)at.key!==null?Ye.set(at.key,at):Ye.set(at.index,at),at=at.sibling;return Ye}function N(at,Ye){return at=ql(at,Ye),at.index=0,at.sibling=null,at}function $(at,Ye,ct){return at.index=ct,c?(ct=at.alternate,ct!==null?(ct=ct.index,ct<Ye?(at.flags|=67108866,Ye):ct):(at.flags|=67108866,Ye)):(at.flags|=1048576,Ye)}function le(at){return c&&at.alternate===null&&(at.flags|=67108866),at}function Te(at,Ye,ct,jt){return Ye===null||Ye.tag!==6?(Ye=dS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=N(Ye,ct),Ye.return=at,Ye)}function ze(at,Ye,ct,jt){var sn=ct.type;return sn===v?At(at,Ye,ct.props.children,jt,ct.key):Ye!==null&&(Ye.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===I&&dI(sn)===Ye.type)?(Ye=N(Ye,ct.props),ag(Ye,ct),Ye.return=at,Ye):(Ye=Rb(ct.type,ct.key,ct.props,null,at.mode,jt),ag(Ye,ct),Ye.return=at,Ye)}function dt(at,Ye,ct,jt){return Ye===null||Ye.tag!==4||Ye.stateNode.containerInfo!==ct.containerInfo||Ye.stateNode.implementation!==ct.implementation?(Ye=fS(ct,at.mode,jt),Ye.return=at,Ye):(Ye=N(Ye,ct.children||[]),Ye.return=at,Ye)}function At(at,Ye,ct,jt,sn){return Ye===null||Ye.tag!==7?(Ye=Td(ct,at.mode,jt,sn),Ye.return=at,Ye):(Ye=N(Ye,ct),Ye.return=at,Ye)}function Ot(at,Ye,ct){if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number"||typeof Ye=="bigint")return Ye=dS(""+Ye,at.mode,ct),Ye.return=at,Ye;if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case m:return ct=Rb(Ye.type,Ye.key,Ye.props,null,at.mode,ct),ag(ct,Ye),ct.return=at,ct;case g:return Ye=fS(Ye,at.mode,ct),Ye.return=at,Ye;case I:var jt=Ye._init;return Ye=jt(Ye._payload),Ot(at,Ye,ct)}if(ie(Ye)||M(Ye))return Ye=Td(Ye,at.mode,ct,null),Ye.return=at,Ye;if(typeof Ye.then=="function")return Ot(at,Wb(Ye),ct);if(Ye.$$typeof===E)return Ot(at,Mb(at,Ye),ct);Kb(at,Ye)}return null}function mt(at,Ye,ct,jt){var sn=Ye!==null?Ye.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return sn!==null?null:Te(at,Ye,""+ct,jt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return ct.key===sn?ze(at,Ye,ct,jt):null;case g:return ct.key===sn?dt(at,Ye,ct,jt):null;case I:return sn=ct._init,ct=sn(ct._payload),mt(at,Ye,ct,jt)}if(ie(ct)||M(ct))return sn!==null?null:At(at,Ye,ct,jt,null);if(typeof ct.then=="function")return mt(at,Ye,Wb(ct),jt);if(ct.$$typeof===E)return mt(at,Ye,Mb(at,ct),jt);Kb(at,ct)}return null}function yt(at,Ye,ct,jt,sn){if(typeof jt=="string"&&jt!==""||typeof jt=="number"||typeof jt=="bigint")return at=at.get(ct)||null,Te(Ye,at,""+jt,sn);if(typeof jt=="object"&&jt!==null){switch(jt.$$typeof){case m:return at=at.get(jt.key===null?ct:jt.key)||null,ze(Ye,at,jt,sn);case g:return at=at.get(jt.key===null?ct:jt.key)||null,dt(Ye,at,jt,sn);case I:var Xn=jt._init;return jt=Xn(jt._payload),yt(at,Ye,ct,jt,sn)}if(ie(jt)||M(jt))return at=at.get(ct)||null,At(Ye,at,jt,sn,null);if(typeof jt.then=="function")return yt(at,Ye,ct,Wb(jt),sn);if(jt.$$typeof===E)return yt(at,Ye,ct,Mb(Ye,jt),sn);Kb(Ye,jt)}return null}function Cn(at,Ye,ct,jt){for(var sn=null,Xn=null,fn=Ye,wn=Ye=0,Fa=null;fn!==null&&wn<ct.length;wn++){fn.index>wn?(Fa=fn,fn=null):Fa=fn.sibling;var ur=mt(at,fn,ct[wn],jt);if(ur===null){fn===null&&(fn=Fa);break}c&&fn&&ur.alternate===null&&f(at,fn),Ye=$(ur,Ye,wn),Xn===null?sn=ur:Xn.sibling=ur,Xn=ur,fn=Fa}if(wn===ct.length)return y(at,fn),fr&&Ad(at,wn),sn;if(fn===null){for(;wn<ct.length;wn++)fn=Ot(at,ct[wn],jt),fn!==null&&(Ye=$(fn,Ye,wn),Xn===null?sn=fn:Xn.sibling=fn,Xn=fn);return fr&&Ad(at,wn),sn}for(fn=S(fn);wn<ct.length;wn++)Fa=yt(fn,at,wn,ct[wn],jt),Fa!==null&&(c&&Fa.alternate!==null&&fn.delete(Fa.key===null?wn:Fa.key),Ye=$(Fa,Ye,wn),Xn===null?sn=Fa:Xn.sibling=Fa,Xn=Fa);return c&&fn.forEach(function(_u){return f(at,_u)}),fr&&Ad(at,wn),sn}function yn(at,Ye,ct,jt){if(ct==null)throw Error(r(151));for(var sn=null,Xn=null,fn=Ye,wn=Ye=0,Fa=null,ur=ct.next();fn!==null&&!ur.done;wn++,ur=ct.next()){fn.index>wn?(Fa=fn,fn=null):Fa=fn.sibling;var _u=mt(at,fn,ur.value,jt);if(_u===null){fn===null&&(fn=Fa);break}c&&fn&&_u.alternate===null&&f(at,fn),Ye=$(_u,Ye,wn),Xn===null?sn=_u:Xn.sibling=_u,Xn=_u,fn=Fa}if(ur.done)return y(at,fn),fr&&Ad(at,wn),sn;if(fn===null){for(;!ur.done;wn++,ur=ct.next())ur=Ot(at,ur.value,jt),ur!==null&&(Ye=$(ur,Ye,wn),Xn===null?sn=ur:Xn.sibling=ur,Xn=ur);return fr&&Ad(at,wn),sn}for(fn=S(fn);!ur.done;wn++,ur=ct.next())ur=yt(fn,at,wn,ur.value,jt),ur!==null&&(c&&ur.alternate!==null&&fn.delete(ur.key===null?wn:ur.key),Ye=$(ur,Ye,wn),Xn===null?sn=ur:Xn.sibling=ur,Xn=ur);return c&&fn.forEach(function(TW){return f(at,TW)}),fr&&Ad(at,wn),sn}function Ar(at,Ye,ct,jt){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:e:{for(var sn=ct.key;Ye!==null;){if(Ye.key===sn){if(sn=ct.type,sn===v){if(Ye.tag===7){y(at,Ye.sibling),jt=N(Ye,ct.props.children),jt.return=at,at=jt;break e}}else if(Ye.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===I&&dI(sn)===Ye.type){y(at,Ye.sibling),jt=N(Ye,ct.props),ag(jt,ct),jt.return=at,at=jt;break e}y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}ct.type===v?(jt=Td(ct.props.children,at.mode,jt,ct.key),jt.return=at,at=jt):(jt=Rb(ct.type,ct.key,ct.props,null,at.mode,jt),ag(jt,ct),jt.return=at,at=jt)}return le(at);case g:e:{for(sn=ct.key;Ye!==null;){if(Ye.key===sn)if(Ye.tag===4&&Ye.stateNode.containerInfo===ct.containerInfo&&Ye.stateNode.implementation===ct.implementation){y(at,Ye.sibling),jt=N(Ye,ct.children||[]),jt.return=at,at=jt;break e}else{y(at,Ye);break}else f(at,Ye);Ye=Ye.sibling}jt=fS(ct,at.mode,jt),jt.return=at,at=jt}return le(at);case I:return sn=ct._init,ct=sn(ct._payload),Ar(at,Ye,ct,jt)}if(ie(ct))return Cn(at,Ye,ct,jt);if(M(ct)){if(sn=M(ct),typeof sn!="function")throw Error(r(150));return ct=sn.call(ct),yn(at,Ye,ct,jt)}if(typeof ct.then=="function")return Ar(at,Ye,Wb(ct),jt);if(ct.$$typeof===E)return Ar(at,Ye,Mb(at,ct),jt);Kb(at,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ye!==null&&Ye.tag===6?(y(at,Ye.sibling),jt=N(Ye,ct),jt.return=at,at=jt):(y(at,Ye),jt=dS(ct,at.mode,jt),jt.return=at,at=jt),le(at)):y(at,Ye)}return function(at,Ye,ct,jt){try{rg=0;var sn=Ar(at,Ye,ct,jt);return wh=null,sn}catch(fn){if(fn===Km||fn===Pb)throw fn;var Xn=ls(29,fn,null,at.mode);return Xn.lanes=jt,Xn.return=at,Xn}finally{}}}var xh=fI(!0),hI=fI(!1),js=J(null),Qo=null;function ou(c){var f=c.alternate;se(Ta,Ta.current&1),se(js,c),Qo===null&&(f===null||gh.current!==null||f.memoizedState!==null)&&(Qo=c)}function pI(c){if(c.tag===22){if(se(Ta,Ta.current),se(js,c),Qo===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(Qo=c)}}else lu()}function lu(){se(Ta,Ta.current),se(js,js.current)}function Xl(c){Q(js),Qo===c&&(Qo=null),Q(Ta)}var Ta=J(0);function Zb(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||y.data==="$?"||M2(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function qS(c,f,y,S){f=c.memoizedState,y=y(S,f),y=y==null?f:d({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var GS={enqueueSetState:function(c,f,y){c=c._reactInternals;var S=fs(),N=au(S);N.payload=f,y!=null&&(N.callback=y),f=iu(c,N,S),f!==null&&(hs(f,c,S),Ym(f,c,S))},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var S=fs(),N=au(S);N.tag=1,N.payload=f,y!=null&&(N.callback=y),f=iu(c,N,S),f!==null&&(hs(f,c,S),Ym(f,c,S))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=fs(),S=au(y);S.tag=2,f!=null&&(S.callback=f),f=iu(c,S,y),f!==null&&(hs(f,c,y),Ym(f,c,y))}};function mI(c,f,y,S,N,$,le){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,$,le):f.prototype&&f.prototype.isPureReactComponent?!A(y,S)||!A(N,$):!0}function gI(c,f,y,S){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,S),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,S),f.state!==c&&GS.enqueueReplaceState(f,f.state,null)}function Od(c,f){var y=f;if("ref"in f){y={};for(var S in f)S!=="ref"&&(y[S]=f[S])}if(c=c.defaultProps){y===f&&(y=d({},y));for(var N in c)y[N]===void 0&&(y[N]=c[N])}return y}var Yb=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof da=="object"&&typeof da.emit=="function"){da.emit("uncaughtException",c);return}console.error(c)};function yI(c){Yb(c)}function bI(c){console.error(c)}function vI(c){Yb(c)}function Xb(c,f){try{var y=c.onUncaughtError;y(f.value,{componentStack:f.stack})}catch(S){setTimeout(function(){throw S})}}function wI(c,f,y){try{var S=c.onCaughtError;S(y.value,{componentStack:y.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(N){setTimeout(function(){throw N})}}function WS(c,f,y){return y=au(y),y.tag=3,y.payload={element:null},y.callback=function(){Xb(c,f)},y}function xI(c){return c=au(c),c.tag=3,c}function _I(c,f,y,S){var N=y.type.getDerivedStateFromError;if(typeof N=="function"){var $=S.value;c.payload=function(){return N($)},c.callback=function(){wI(f,y,S)}}var le=y.stateNode;le!==null&&typeof le.componentDidCatch=="function"&&(c.callback=function(){wI(f,y,S),typeof N!="function"&&(pu===null?pu=new Set([this]):pu.add(this));var Te=S.stack;this.componentDidCatch(S.value,{componentStack:Te!==null?Te:""})})}function TG(c,f,y,S,N){if(y.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(f=y.alternate,f!==null&&qm(f,y,N,!0),y=js.current,y!==null){switch(y.tag){case 13:return Qo===null?y2():y.alternate===null&&na===0&&(na=3),y.flags&=-257,y.flags|=65536,y.lanes=N,S===_S?y.flags|=16384:(f=y.updateQueue,f===null?y.updateQueue=new Set([S]):f.add(S),v2(c,S,N)),!1;case 22:return y.flags|=65536,S===_S?y.flags|=16384:(f=y.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([S])},y.updateQueue=f):(y=f.retryQueue,y===null?f.retryQueue=new Set([S]):y.add(S)),v2(c,S,N)),!1}throw Error(r(435,y.tag))}return v2(c,S,N),y2(),!1}if(fr)return f=js.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=N,S!==mS&&(c=Error(r(422),{cause:S}),Hm(mn(c,y)))):(S!==mS&&(f=Error(r(423),{cause:S}),Hm(mn(f,y))),c=c.current.alternate,c.flags|=65536,N&=-N,c.lanes|=N,S=mn(S,y),N=WS(c.stateNode,S,N),CS(c,N),na!==4&&(na=2)),!1;var $=Error(r(520),{cause:S});if($=mn($,y),dg===null?dg=[$]:dg.push($),na!==4&&(na=2),f===null)return!0;S=mn(S,y),y=f;do{switch(y.tag){case 3:return y.flags|=65536,c=N&-N,y.lanes|=c,c=WS(y.stateNode,S,c),CS(y,c),!1;case 1:if(f=y.type,$=y.stateNode,(y.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(pu===null||!pu.has($))))return y.flags|=65536,N&=-N,y.lanes|=N,N=xI(N),_I(N,c,y,S),CS(y,N),!1}y=y.return}while(y!==null);return!1}var SI=Error(r(461)),Oa=!1;function Ja(c,f,y,S){f.child=c===null?hI(f,null,y,S):xh(f,c.child,y,S)}function EI(c,f,y,S,N){y=y.render;var $=f.ref;if("ref"in S){var le={};for(var Te in S)Te!=="ref"&&(le[Te]=S[Te])}else le=S;return jd(f),S=RS(c,f,y,le,$,N),Te=IS(),c!==null&&!Oa?(jS(c,f,N),Jl(c,f,N)):(fr&&Te&&hS(f),f.flags|=1,Ja(c,f,S,N),f.child)}function CI(c,f,y,S,N){if(c===null){var $=y.type;return typeof $=="function"&&!uS($)&&$.defaultProps===void 0&&y.compare===null?(f.tag=15,f.type=$,TI(c,f,$,S,N)):(c=Rb(y.type,null,S,f,f.mode,N),c.ref=f.ref,c.return=f,f.child=c)}if($=c.child,!t2(c,N)){var le=$.memoizedProps;if(y=y.compare,y=y!==null?y:A,y(le,S)&&c.ref===f.ref)return Jl(c,f,N)}return f.flags|=1,c=ql($,S),c.ref=f.ref,c.return=f,f.child=c}function TI(c,f,y,S,N){if(c!==null){var $=c.memoizedProps;if(A($,S)&&c.ref===f.ref)if(Oa=!1,f.pendingProps=S=$,t2(c,N))(c.flags&131072)!==0&&(Oa=!0);else return f.lanes=c.lanes,Jl(c,f,N)}return KS(c,f,y,S,N)}function kI(c,f,y){var S=f.pendingProps,N=S.children,$=c!==null?c.memoizedState:null;if(S.mode==="hidden"){if((f.flags&128)!==0){if(S=$!==null?$.baseLanes|y:y,c!==null){for(N=f.child=c.child,$=0;N!==null;)$=$|N.lanes|N.childLanes,N=N.sibling;f.childLanes=$&~S}else f.childLanes=0,f.child=null;return AI(c,f,S,y)}if((y&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&Ob(f,$!==null?$.cachePool:null),$!==null?T3(f,$):kS(),pI(f);else return f.lanes=f.childLanes=536870912,AI(c,f,$!==null?$.baseLanes|y:y,y)}else $!==null?(Ob(f,$.cachePool),T3(f,$),lu(),f.memoizedState=null):(c!==null&&Ob(f,null),kS(),lu());return Ja(c,f,N,y),f.child}function AI(c,f,y,S){var N=xS();return N=N===null?null:{parent:Ca._currentValue,pool:N},f.memoizedState={baseLanes:y,cachePool:N},c!==null&&Ob(f,null),kS(),pI(f),c!==null&&qm(c,f,S,!0),null}function Jb(c,f){var y=f.ref;if(y===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof y!="function"&&typeof y!="object")throw Error(r(284));(c===null||c.ref!==y)&&(f.flags|=4194816)}}function KS(c,f,y,S,N){return jd(f),y=RS(c,f,y,S,void 0,N),S=IS(),c!==null&&!Oa?(jS(c,f,N),Jl(c,f,N)):(fr&&S&&hS(f),f.flags|=1,Ja(c,f,y,N),f.child)}function NI(c,f,y,S,N,$){return jd(f),f.updateQueue=null,y=A3(f,S,y,N),k3(c),S=IS(),c!==null&&!Oa?(jS(c,f,$),Jl(c,f,$)):(fr&&S&&hS(f),f.flags|=1,Ja(c,f,y,$),f.child)}function RI(c,f,y,S,N){if(jd(f),f.stateNode===null){var $=Xo,le=y.contextType;typeof le=="object"&&le!==null&&($=ui(le)),$=new y(S,$),f.memoizedState=$.state!==null&&$.state!==void 0?$.state:null,$.updater=GS,f.stateNode=$,$._reactInternals=f,$=f.stateNode,$.props=S,$.state=f.memoizedState,$.refs={},SS(f),le=y.contextType,$.context=typeof le=="object"&&le!==null?ui(le):Xo,$.state=f.memoizedState,le=y.getDerivedStateFromProps,typeof le=="function"&&(qS(f,y,le,S),$.state=f.memoizedState),typeof y.getDerivedStateFromProps=="function"||typeof $.getSnapshotBeforeUpdate=="function"||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(le=$.state,typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount(),le!==$.state&&GS.enqueueReplaceState($,$.state,null),Jm(f,S,$,N),Xm(),$.state=f.memoizedState),typeof $.componentDidMount=="function"&&(f.flags|=4194308),S=!0}else if(c===null){$=f.stateNode;var Te=f.memoizedProps,ze=Od(y,Te);$.props=ze;var dt=$.context,At=y.contextType;le=Xo,typeof At=="object"&&At!==null&&(le=ui(At));var Ot=y.getDerivedStateFromProps;At=typeof Ot=="function"||typeof $.getSnapshotBeforeUpdate=="function",Te=f.pendingProps!==Te,At||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(Te||dt!==le)&&gI(f,$,S,le),ru=!1;var mt=f.memoizedState;$.state=mt,Jm(f,S,$,N),Xm(),dt=f.memoizedState,Te||mt!==dt||ru?(typeof Ot=="function"&&(qS(f,y,Ot,S),dt=f.memoizedState),(ze=ru||mI(f,y,ze,S,mt,dt,le))?(At||typeof $.UNSAFE_componentWillMount!="function"&&typeof $.componentWillMount!="function"||(typeof $.componentWillMount=="function"&&$.componentWillMount(),typeof $.UNSAFE_componentWillMount=="function"&&$.UNSAFE_componentWillMount()),typeof $.componentDidMount=="function"&&(f.flags|=4194308)):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=S,f.memoizedState=dt),$.props=S,$.state=dt,$.context=le,S=ze):(typeof $.componentDidMount=="function"&&(f.flags|=4194308),S=!1)}else{$=f.stateNode,ES(c,f),le=f.memoizedProps,At=Od(y,le),$.props=At,Ot=f.pendingProps,mt=$.context,dt=y.contextType,ze=Xo,typeof dt=="object"&&dt!==null&&(ze=ui(dt)),Te=y.getDerivedStateFromProps,(dt=typeof Te=="function"||typeof $.getSnapshotBeforeUpdate=="function")||typeof $.UNSAFE_componentWillReceiveProps!="function"&&typeof $.componentWillReceiveProps!="function"||(le!==Ot||mt!==ze)&&gI(f,$,S,ze),ru=!1,mt=f.memoizedState,$.state=mt,Jm(f,S,$,N),Xm();var yt=f.memoizedState;le!==Ot||mt!==yt||ru||c!==null&&c.dependencies!==null&&Db(c.dependencies)?(typeof Te=="function"&&(qS(f,y,Te,S),yt=f.memoizedState),(At=ru||mI(f,y,At,S,mt,yt,ze)||c!==null&&c.dependencies!==null&&Db(c.dependencies))?(dt||typeof $.UNSAFE_componentWillUpdate!="function"&&typeof $.componentWillUpdate!="function"||(typeof $.componentWillUpdate=="function"&&$.componentWillUpdate(S,yt,ze),typeof $.UNSAFE_componentWillUpdate=="function"&&$.UNSAFE_componentWillUpdate(S,yt,ze)),typeof $.componentDidUpdate=="function"&&(f.flags|=4),typeof $.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof $.componentDidUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=S,f.memoizedState=yt),$.props=S,$.state=yt,$.context=ze,S=At):(typeof $.componentDidUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof $.getSnapshotBeforeUpdate!="function"||le===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),S=!1)}return $=S,Jb(c,f),S=(f.flags&128)!==0,$||S?($=f.stateNode,y=S&&typeof y.getDerivedStateFromError!="function"?null:$.render(),f.flags|=1,c!==null&&S?(f.child=xh(f,c.child,null,N),f.child=xh(f,null,y,N)):Ja(c,f,y,N),f.memoizedState=$.state,c=f.child):c=Jl(c,f,N),c}function II(c,f,y,S){return Vm(),f.flags|=256,Ja(c,f,y,S),f.child}var ZS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function YS(c){return{baseLanes:c,cachePool:b3()}}function XS(c,f,y){return c=c!==null?c.childLanes&~y:0,f&&(c|=Ds),c}function jI(c,f,y){var S=f.pendingProps,N=!1,$=(f.flags&128)!==0,le;if((le=$)||(le=c!==null&&c.memoizedState===null?!1:(Ta.current&2)!==0),le&&(N=!0,f.flags&=-129),le=(f.flags&32)!==0,f.flags&=-33,c===null){if(fr){if(N?ou(f):lu(),fr){var Te=ta,ze;if(ze=Te){e:{for(ze=Te,Te=Jo;ze.nodeType!==8;){if(!Te){Te=null;break e}if(ze=lo(ze.nextSibling),ze===null){Te=null;break e}}Te=ze}Te!==null?(f.memoizedState={dehydrated:Te,treeContext:kd!==null?{id:Gl,overflow:Wl}:null,retryLane:536870912,hydrationErrors:null},ze=ls(18,null,null,0),ze.stateNode=Te,ze.return=f,f.child=ze,Ai=f,ta=null,ze=!0):ze=!1}ze||Rd(f)}if(Te=f.memoizedState,Te!==null&&(Te=Te.dehydrated,Te!==null))return M2(Te)?f.lanes=32:f.lanes=536870912,null;Xl(f)}return Te=S.children,S=S.fallback,N?(lu(),N=f.mode,Te=Qb({mode:"hidden",children:Te},N),S=Td(S,N,y,null),Te.return=f,S.return=f,Te.sibling=S,f.child=Te,N=f.child,N.memoizedState=YS(y),N.childLanes=XS(c,le,y),f.memoizedState=ZS,S):(ou(f),JS(f,Te))}if(ze=c.memoizedState,ze!==null&&(Te=ze.dehydrated,Te!==null)){if($)f.flags&256?(ou(f),f.flags&=-257,f=QS(c,f,y)):f.memoizedState!==null?(lu(),f.child=c.child,f.flags|=128,f=null):(lu(),N=S.fallback,Te=f.mode,S=Qb({mode:"visible",children:S.children},Te),N=Td(N,Te,y,null),N.flags|=2,S.return=f,N.return=f,S.sibling=N,f.child=S,xh(f,c.child,null,y),S=f.child,S.memoizedState=YS(y),S.childLanes=XS(c,le,y),f.memoizedState=ZS,f=N);else if(ou(f),M2(Te)){if(le=Te.nextSibling&&Te.nextSibling.dataset,le)var dt=le.dgst;le=dt,S=Error(r(419)),S.stack="",S.digest=le,Hm({value:S,source:null,stack:null}),f=QS(c,f,y)}else if(Oa||qm(c,f,y,!1),le=(y&c.childLanes)!==0,Oa||le){if(le=Fr,le!==null&&(S=y&-y,S=(S&42)!==0?1:Dt(S),S=(S&(le.suspendedLanes|y))!==0?0:S,S!==0&&S!==ze.retryLane))throw ze.retryLane=S,so(c,S),hs(le,c,S),SI;Te.data==="$?"||y2(),f=QS(c,f,y)}else Te.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=ze.treeContext,ta=lo(Te.nextSibling),Ai=f,fr=!0,Nd=null,Jo=!1,c!==null&&(Rs[Is++]=Gl,Rs[Is++]=Wl,Rs[Is++]=kd,Gl=c.id,Wl=c.overflow,kd=f),f=JS(f,S.children),f.flags|=4096);return f}return N?(lu(),N=S.fallback,Te=f.mode,ze=c.child,dt=ze.sibling,S=ql(ze,{mode:"hidden",children:S.children}),S.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?N=ql(dt,N):(N=Td(N,Te,y,null),N.flags|=2),N.return=f,S.return=f,S.sibling=N,f.child=S,S=N,N=f.child,Te=c.child.memoizedState,Te===null?Te=YS(y):(ze=Te.cachePool,ze!==null?(dt=Ca._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=b3(),Te={baseLanes:Te.baseLanes|y,cachePool:ze}),N.memoizedState=Te,N.childLanes=XS(c,le,y),f.memoizedState=ZS,S):(ou(f),y=c.child,c=y.sibling,y=ql(y,{mode:"visible",children:S.children}),y.return=f,y.sibling=null,c!==null&&(le=f.deletions,le===null?(f.deletions=[c],f.flags|=16):le.push(c)),f.child=y,f.memoizedState=null,y)}function JS(c,f){return f=Qb({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Qb(c,f){return c=ls(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function QS(c,f,y){return xh(f,c.child,null,y),c=JS(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function DI(c,f,y){c.lanes|=f;var S=c.alternate;S!==null&&(S.lanes|=f),yS(c.return,f,y)}function e2(c,f,y,S,N){var $=c.memoizedState;$===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:S,tail:y,tailMode:N}:($.isBackwards=f,$.rendering=null,$.renderingStartTime=0,$.last=S,$.tail=y,$.tailMode=N)}function MI(c,f,y){var S=f.pendingProps,N=S.revealOrder,$=S.tail;if(Ja(c,f,S.children,y),S=Ta.current,(S&2)!==0)S=S&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&DI(c,y,f);else if(c.tag===19)DI(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}switch(se(Ta,S),N){case"forwards":for(y=f.child,N=null;y!==null;)c=y.alternate,c!==null&&Zb(c)===null&&(N=y),y=y.sibling;y=N,y===null?(N=f.child,f.child=null):(N=y.sibling,y.sibling=null),e2(f,!1,N,y,$);break;case"backwards":for(y=null,N=f.child,f.child=null;N!==null;){if(c=N.alternate,c!==null&&Zb(c)===null){f.child=N;break}c=N.sibling,N.sibling=y,y=N,N=c}e2(f,!0,y,null,$);break;case"together":e2(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Jl(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),hu|=f.lanes,(y&f.childLanes)===0)if(c!==null){if(qm(c,f,y,!1),(y&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,y=ql(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=ql(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function t2(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&Db(c)))}function kG(c,f,y){switch(f.tag){case 3:Se(f,f.stateNode.containerInfo),nu(f,Ca,c.memoizedState.cache),Vm();break;case 27:case 5:Fe(f);break;case 4:Se(f,f.stateNode.containerInfo);break;case 10:nu(f,f.type,f.memoizedProps.value);break;case 13:var S=f.memoizedState;if(S!==null)return S.dehydrated!==null?(ou(f),f.flags|=128,null):(y&f.child.childLanes)!==0?jI(c,f,y):(ou(f),c=Jl(c,f,y),c!==null?c.sibling:null);ou(f);break;case 19:var N=(c.flags&128)!==0;if(S=(y&f.childLanes)!==0,S||(qm(c,f,y,!1),S=(y&f.childLanes)!==0),N){if(S)return MI(c,f,y);f.flags|=128}if(N=f.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),se(Ta,Ta.current),S)break;return null;case 22:case 23:return f.lanes=0,kI(c,f,y);case 24:nu(f,Ca,c.memoizedState.cache)}return Jl(c,f,y)}function OI(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps)Oa=!0;else{if(!t2(c,y)&&(f.flags&128)===0)return Oa=!1,kG(c,f,y);Oa=(c.flags&131072)!==0}else Oa=!1,fr&&(f.flags&1048576)!==0&&d3(f,jb,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var S=f.elementType,N=S._init;if(S=N(S._payload),f.type=S,typeof S=="function")uS(S)?(c=Od(S,c),f.tag=1,f=RI(null,f,S,c,y)):(f.tag=0,f=KS(null,f,S,c,y));else{if(S!=null){if(N=S.$$typeof,N===T){f.tag=11,f=EI(null,f,S,c,y);break e}else if(N===j){f.tag=14,f=CI(null,f,S,c,y);break e}}throw f=V(S)||S,Error(r(306,f,""))}}return f;case 0:return KS(c,f,f.type,f.pendingProps,y);case 1:return S=f.type,N=Od(S,f.pendingProps),RI(c,f,S,N,y);case 3:e:{if(Se(f,f.stateNode.containerInfo),c===null)throw Error(r(387));S=f.pendingProps;var $=f.memoizedState;N=$.element,ES(c,f),Jm(f,S,null,y);var le=f.memoizedState;if(S=le.cache,nu(f,Ca,S),S!==$.cache&&bS(f,[Ca],y,!0),Xm(),S=le.element,$.isDehydrated)if($={element:S,isDehydrated:!1,cache:le.cache},f.updateQueue.baseState=$,f.memoizedState=$,f.flags&256){f=II(c,f,S,y);break e}else if(S!==N){N=mn(Error(r(424)),f),Hm(N),f=II(c,f,S,y);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(ta=lo(c.firstChild),Ai=f,fr=!0,Nd=null,Jo=!0,y=hI(f,null,S,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling}else{if(Vm(),S===N){f=Jl(c,f,y);break e}Ja(c,f,S,y)}f=f.child}return f;case 26:return Jb(c,f),c===null?(y=Bj(f.type,null,f.pendingProps,null))?f.memoizedState=y:fr||(y=f.type,c=f.pendingProps,S=hv(je.current).createElement(y),S[pe]=f,S[Re]=c,ei(S,y,c),zn(S),f.stateNode=S):f.memoizedState=Bj(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Fe(f),c===null&&fr&&(S=f.stateNode=Pj(f.type,f.pendingProps,je.current),Ai=f,Jo=!0,N=ta,yu(f.type)?(O2=N,ta=lo(S.firstChild)):ta=N),Ja(c,f,f.pendingProps.children,y),Jb(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&fr&&((N=S=ta)&&(S=tW(S,f.type,f.pendingProps,Jo),S!==null?(f.stateNode=S,Ai=f,ta=lo(S.firstChild),Jo=!1,N=!0):N=!1),N||Rd(f)),Fe(f),N=f.type,$=f.pendingProps,le=c!==null?c.memoizedProps:null,S=$.children,I2(N,$)?S=null:le!==null&&I2(N,le)&&(f.flags|=32),f.memoizedState!==null&&(N=RS(c,f,vG,null,null,y),wg._currentValue=N),Jb(c,f),Ja(c,f,S,y),f.child;case 6:return c===null&&fr&&((c=y=ta)&&(y=nW(y,f.pendingProps,Jo),y!==null?(f.stateNode=y,Ai=f,ta=null,c=!0):c=!1),c||Rd(f)),null;case 13:return jI(c,f,y);case 4:return Se(f,f.stateNode.containerInfo),S=f.pendingProps,c===null?f.child=xh(f,null,S,y):Ja(c,f,S,y),f.child;case 11:return EI(c,f,f.type,f.pendingProps,y);case 7:return Ja(c,f,f.pendingProps,y),f.child;case 8:return Ja(c,f,f.pendingProps.children,y),f.child;case 12:return Ja(c,f,f.pendingProps.children,y),f.child;case 10:return S=f.pendingProps,nu(f,f.type,S.value),Ja(c,f,S.children,y),f.child;case 9:return N=f.type._context,S=f.pendingProps.children,jd(f),N=ui(N),S=S(N),f.flags|=1,Ja(c,f,S,y),f.child;case 14:return CI(c,f,f.type,f.pendingProps,y);case 15:return TI(c,f,f.type,f.pendingProps,y);case 19:return MI(c,f,y);case 31:return S=f.pendingProps,y=f.mode,S={mode:S.mode,children:S.children},c===null?(y=Qb(S,y),y.ref=f.ref,f.child=y,y.return=f,f=y):(y=ql(c.child,S),y.ref=f.ref,f.child=y,y.return=f,f=y),f;case 22:return kI(c,f,y);case 24:return jd(f),S=ui(Ca),c===null?(N=xS(),N===null&&(N=Fr,$=vS(),N.pooledCache=$,$.refCount++,$!==null&&(N.pooledCacheLanes|=y),N=$),f.memoizedState={parent:S,cache:N},SS(f),nu(f,Ca,N)):((c.lanes&y)!==0&&(ES(c,f),Jm(f,null,null,y),Xm()),N=c.memoizedState,$=f.memoizedState,N.parent!==S?(N={parent:S,cache:S},f.memoizedState=N,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=N),nu(f,Ca,S)):(S=$.cache,nu(f,Ca,S),S!==N.cache&&bS(f,[Ca],y,!0))),Ja(c,f,f.pendingProps.children,y),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function Ql(c){c.flags|=4}function PI(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!Hj(f)){if(f=js.current,f!==null&&((sr&4194048)===sr?Qo!==null:(sr&62914560)!==sr&&(sr&536870912)===0||f!==Qo))throw Zm=_S,v3;c.flags|=8192}}function ev(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?L():536870912,c.lanes|=f,Ch|=f)}function ig(c,f){if(!fr)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var S=null;y!==null;)y.alternate!==null&&(S=y),y=y.sibling;S===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function Yr(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,S=0;if(f)for(var N=c.child;N!==null;)y|=N.lanes|N.childLanes,S|=N.subtreeFlags&65011712,S|=N.flags&65011712,N.return=c,N=N.sibling;else for(N=c.child;N!==null;)y|=N.lanes|N.childLanes,S|=N.subtreeFlags,S|=N.flags,N.return=c,N=N.sibling;return c.subtreeFlags|=S,c.childLanes=y,f}function AG(c,f,y){var S=f.pendingProps;switch(pS(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yr(f),null;case 1:return Yr(f),null;case 3:return y=f.stateNode,S=null,c!==null&&(S=c.memoizedState.cache),f.memoizedState.cache!==S&&(f.flags|=2048),Zl(Ca),ye(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(c===null||c.child===null)&&(Um(f)?Ql(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,p3())),Yr(f),null;case 26:return y=f.memoizedState,c===null?(Ql(f),y!==null?(Yr(f),PI(f,y)):(Yr(f),f.flags&=-16777217)):y?y!==c.memoizedState?(Ql(f),Yr(f),PI(f,y)):(Yr(f),f.flags&=-16777217):(c.memoizedProps!==S&&Ql(f),Yr(f),f.flags&=-16777217),null;case 27:Xe(f),y=je.current;var N=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==S&&Ql(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return Yr(f),null}c=fe.current,Um(f)?f3(f):(c=Pj(N,S,y),f.stateNode=c,Ql(f))}return Yr(f),null;case 5:if(Xe(f),y=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==S&&Ql(f);else{if(!S){if(f.stateNode===null)throw Error(r(166));return Yr(f),null}if(c=fe.current,Um(f))f3(f);else{switch(N=hv(je.current),c){case 1:c=N.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:c=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":c=N.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":c=N.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":c=N.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof S.is=="string"?N.createElement("select",{is:S.is}):N.createElement("select"),S.multiple?c.multiple=!0:S.size&&(c.size=S.size);break;default:c=typeof S.is=="string"?N.createElement(y,{is:S.is}):N.createElement(y)}}c[pe]=f,c[Re]=S;e:for(N=f.child;N!==null;){if(N.tag===5||N.tag===6)c.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===f)break e;for(;N.sibling===null;){if(N.return===null||N.return===f)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}f.stateNode=c;e:switch(ei(c,y,S),y){case"button":case"input":case"select":case"textarea":c=!!S.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ql(f)}}return Yr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==S&&Ql(f);else{if(typeof S!="string"&&f.stateNode===null)throw Error(r(166));if(c=je.current,Um(f)){if(c=f.stateNode,y=f.memoizedProps,S=null,N=Ai,N!==null)switch(N.tag){case 27:case 5:S=N.memoizedProps}c[pe]=f,c=!!(c.nodeValue===y||S!==null&&S.suppressHydrationWarning===!0||Nj(c.nodeValue,y)),c||Rd(f)}else c=hv(c).createTextNode(S),c[pe]=f,f.stateNode=c}return Yr(f),null;case 13:if(S=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(N=Um(f),S!==null&&S.dehydrated!==null){if(c===null){if(!N)throw Error(r(318));if(N=f.memoizedState,N=N!==null?N.dehydrated:null,!N)throw Error(r(317));N[pe]=f}else Vm(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Yr(f),N=!1}else N=p3(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=N),N=!0;if(!N)return f.flags&256?(Xl(f),f):(Xl(f),null)}if(Xl(f),(f.flags&128)!==0)return f.lanes=y,f;if(y=S!==null,c=c!==null&&c.memoizedState!==null,y){S=f.child,N=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(N=S.alternate.memoizedState.cachePool.pool);var $=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&($=S.memoizedState.cachePool.pool),$!==N&&(S.flags|=2048)}return y!==c&&y&&(f.child.flags|=8192),ev(f,f.updateQueue),Yr(f),null;case 4:return ye(),c===null&&T2(f.stateNode.containerInfo),Yr(f),null;case 10:return Zl(f.type),Yr(f),null;case 19:if(Q(Ta),N=f.memoizedState,N===null)return Yr(f),null;if(S=(f.flags&128)!==0,$=N.rendering,$===null)if(S)ig(N,!1);else{if(na!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if($=Zb(c),$!==null){for(f.flags|=128,ig(N,!1),c=$.updateQueue,f.updateQueue=c,ev(f,c),f.subtreeFlags=0,c=y,y=f.child;y!==null;)u3(y,c),y=y.sibling;return se(Ta,Ta.current&1|2),f.child}c=c.sibling}N.tail!==null&&ce()>rv&&(f.flags|=128,S=!0,ig(N,!1),f.lanes=4194304)}else{if(!S)if(c=Zb($),c!==null){if(f.flags|=128,S=!0,c=c.updateQueue,f.updateQueue=c,ev(f,c),ig(N,!0),N.tail===null&&N.tailMode==="hidden"&&!$.alternate&&!fr)return Yr(f),null}else 2*ce()-N.renderingStartTime>rv&&y!==536870912&&(f.flags|=128,S=!0,ig(N,!1),f.lanes=4194304);N.isBackwards?($.sibling=f.child,f.child=$):(c=N.last,c!==null?c.sibling=$:f.child=$,N.last=$)}return N.tail!==null?(f=N.tail,N.rendering=f,N.tail=f.sibling,N.renderingStartTime=ce(),f.sibling=null,c=Ta.current,se(Ta,S?c&1|2:c&1),f):(Yr(f),null);case 22:case 23:return Xl(f),AS(),S=f.memoizedState!==null,c!==null?c.memoizedState!==null!==S&&(f.flags|=8192):S&&(f.flags|=8192),S?(y&536870912)!==0&&(f.flags&128)===0&&(Yr(f),f.subtreeFlags&6&&(f.flags|=8192)):Yr(f),y=f.updateQueue,y!==null&&ev(f,y.retryQueue),y=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),S=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(S=f.memoizedState.cachePool.pool),S!==y&&(f.flags|=2048),c!==null&&Q(Dd),null;case 24:return y=null,c!==null&&(y=c.memoizedState.cache),f.memoizedState.cache!==y&&(f.flags|=2048),Zl(Ca),Yr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function NG(c,f){switch(pS(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Zl(Ca),ye(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Xe(f),null;case 13:if(Xl(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Vm()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return Q(Ta),null;case 4:return ye(),null;case 10:return Zl(f.type),null;case 22:case 23:return Xl(f),AS(),c!==null&&Q(Dd),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return Zl(Ca),null;case 25:return null;default:return null}}function FI(c,f){switch(pS(f),f.tag){case 3:Zl(Ca),ye();break;case 26:case 27:case 5:Xe(f);break;case 4:ye();break;case 13:Xl(f);break;case 19:Q(Ta);break;case 10:Zl(f.type);break;case 22:case 23:Xl(f),AS(),c!==null&&Q(Dd);break;case 24:Zl(Ca)}}function sg(c,f){try{var y=f.updateQueue,S=y!==null?y.lastEffect:null;if(S!==null){var N=S.next;y=N;do{if((y.tag&c)===c){S=void 0;var $=y.create,le=y.inst;S=$(),le.destroy=S}y=y.next}while(y!==N)}}catch(Te){Dr(f,f.return,Te)}}function cu(c,f,y){try{var S=f.updateQueue,N=S!==null?S.lastEffect:null;if(N!==null){var $=N.next;S=$;do{if((S.tag&c)===c){var le=S.inst,Te=le.destroy;if(Te!==void 0){le.destroy=void 0,N=f;var ze=y,dt=Te;try{dt()}catch(At){Dr(N,ze,At)}}}S=S.next}while(S!==$)}}catch(At){Dr(f,f.return,At)}}function LI(c){var f=c.updateQueue;if(f!==null){var y=c.stateNode;try{C3(f,y)}catch(S){Dr(c,c.return,S)}}}function BI(c,f,y){y.props=Od(c.type,c.memoizedProps),y.state=c.memoizedState;try{y.componentWillUnmount()}catch(S){Dr(c,f,S)}}function og(c,f){try{var y=c.ref;if(y!==null){switch(c.tag){case 26:case 27:case 5:var S=c.stateNode;break;case 30:S=c.stateNode;break;default:S=c.stateNode}typeof y=="function"?c.refCleanup=y(S):y.current=S}}catch(N){Dr(c,f,N)}}function el(c,f){var y=c.ref,S=c.refCleanup;if(y!==null)if(typeof S=="function")try{S()}catch(N){Dr(c,f,N)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof y=="function")try{y(null)}catch(N){Dr(c,f,N)}else y.current=null}function $I(c){var f=c.type,y=c.memoizedProps,S=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":y.autoFocus&&S.focus();break e;case"img":y.src?S.src=y.src:y.srcSet&&(S.srcset=y.srcSet)}}catch(N){Dr(c,c.return,N)}}function n2(c,f,y){try{var S=c.stateNode;YG(S,c.type,y,f),S[Re]=f}catch(N){Dr(c,c.return,N)}}function zI(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&yu(c.type)||c.tag===4}function r2(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||zI(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&yu(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function a2(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y).insertBefore(c,f):(f=y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,f.appendChild(c),y=y._reactRootContainer,y!=null||f.onclick!==null||(f.onclick=fv));else if(S!==4&&(S===27&&yu(c.type)&&(y=c.stateNode,f=null),c=c.child,c!==null))for(a2(c,f,y),c=c.sibling;c!==null;)a2(c,f,y),c=c.sibling}function tv(c,f,y){var S=c.tag;if(S===5||S===6)c=c.stateNode,f?y.insertBefore(c,f):y.appendChild(c);else if(S!==4&&(S===27&&yu(c.type)&&(y=c.stateNode),c=c.child,c!==null))for(tv(c,f,y),c=c.sibling;c!==null;)tv(c,f,y),c=c.sibling}function UI(c){var f=c.stateNode,y=c.memoizedProps;try{for(var S=c.type,N=f.attributes;N.length;)f.removeAttributeNode(N[0]);ei(f,S,y),f[pe]=c,f[Re]=y}catch($){Dr(c,c.return,$)}}var ec=!1,la=!1,i2=!1,VI=typeof WeakSet=="function"?WeakSet:Set,Pa=null;function RG(c,f){if(c=c.containerInfo,N2=vv,c=de(c),xe(c)){if("selectionStart"in c)var y={start:c.selectionStart,end:c.selectionEnd};else e:{y=(y=c.ownerDocument)&&y.defaultView||window;var S=y.getSelection&&y.getSelection();if(S&&S.rangeCount!==0){y=S.anchorNode;var N=S.anchorOffset,$=S.focusNode;S=S.focusOffset;try{y.nodeType,$.nodeType}catch{y=null;break e}var le=0,Te=-1,ze=-1,dt=0,At=0,Ot=c,mt=null;t:for(;;){for(var yt;Ot!==y||N!==0&&Ot.nodeType!==3||(Te=le+N),Ot!==$||S!==0&&Ot.nodeType!==3||(ze=le+S),Ot.nodeType===3&&(le+=Ot.nodeValue.length),(yt=Ot.firstChild)!==null;)mt=Ot,Ot=yt;for(;;){if(Ot===c)break t;if(mt===y&&++dt===N&&(Te=le),mt===$&&++At===S&&(ze=le),(yt=Ot.nextSibling)!==null)break;Ot=mt,mt=Ot.parentNode}Ot=yt}y=Te===-1||ze===-1?null:{start:Te,end:ze}}else y=null}y=y||{start:0,end:0}}else y=null;for(R2={focusedElem:c,selectionRange:y},vv=!1,Pa=f;Pa!==null;)if(f=Pa,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Pa=c;else for(;Pa!==null;){switch(f=Pa,$=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&$!==null){c=void 0,y=f,N=$.memoizedProps,$=$.memoizedState,S=y.stateNode;try{var Cn=Od(y.type,N,y.elementType===y.type);c=S.getSnapshotBeforeUpdate(Cn,$),S.__reactInternalSnapshotBeforeUpdate=c}catch(yn){Dr(y,y.return,yn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,y=c.nodeType,y===9)D2(c);else if(y===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":D2(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Pa=c;break}Pa=f.return}}function HI(c,f,y){var S=y.flags;switch(y.tag){case 0:case 11:case 15:uu(c,y),S&4&&sg(5,y);break;case 1:if(uu(c,y),S&4)if(c=y.stateNode,f===null)try{c.componentDidMount()}catch(le){Dr(y,y.return,le)}else{var N=Od(y.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(N,f,c.__reactInternalSnapshotBeforeUpdate)}catch(le){Dr(y,y.return,le)}}S&64&&LI(y),S&512&&og(y,y.return);break;case 3:if(uu(c,y),S&64&&(c=y.updateQueue,c!==null)){if(f=null,y.child!==null)switch(y.child.tag){case 27:case 5:f=y.child.stateNode;break;case 1:f=y.child.stateNode}try{C3(c,f)}catch(le){Dr(y,y.return,le)}}break;case 27:f===null&&S&4&&UI(y);case 26:case 5:uu(c,y),f===null&&S&4&&$I(y),S&512&&og(y,y.return);break;case 12:uu(c,y);break;case 13:uu(c,y),S&4&&WI(c,y),S&64&&(c=y.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(y=BG.bind(null,y),rW(c,y))));break;case 22:if(S=y.memoizedState!==null||ec,!S){f=f!==null&&f.memoizedState!==null||la,N=ec;var $=la;ec=S,(la=f)&&!$?du(c,y,(y.subtreeFlags&8772)!==0):uu(c,y),ec=N,la=$}break;case 30:break;default:uu(c,y)}}function qI(c){var f=c.alternate;f!==null&&(c.alternate=null,qI(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&en(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var qr=null,zi=!1;function tc(c,f,y){for(y=y.child;y!==null;)GI(c,f,y),y=y.sibling}function GI(c,f,y){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Ct,y)}catch{}switch(y.tag){case 26:la||el(y,f),tc(c,f,y),y.memoizedState?y.memoizedState.count--:y.stateNode&&(y=y.stateNode,y.parentNode.removeChild(y));break;case 27:la||el(y,f);var S=qr,N=zi;yu(y.type)&&(qr=y.stateNode,zi=!1),tc(c,f,y),gg(y.stateNode),qr=S,zi=N;break;case 5:la||el(y,f);case 6:if(S=qr,N=zi,qr=null,tc(c,f,y),qr=S,zi=N,qr!==null)if(zi)try{(qr.nodeType===9?qr.body:qr.nodeName==="HTML"?qr.ownerDocument.body:qr).removeChild(y.stateNode)}catch($){Dr(y,f,$)}else try{qr.removeChild(y.stateNode)}catch($){Dr(y,f,$)}break;case 18:qr!==null&&(zi?(c=qr,Mj(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,y.stateNode),Eg(c)):Mj(qr,y.stateNode));break;case 4:S=qr,N=zi,qr=y.stateNode.containerInfo,zi=!0,tc(c,f,y),qr=S,zi=N;break;case 0:case 11:case 14:case 15:la||cu(2,y,f),la||cu(4,y,f),tc(c,f,y);break;case 1:la||(el(y,f),S=y.stateNode,typeof S.componentWillUnmount=="function"&&BI(y,f,S)),tc(c,f,y);break;case 21:tc(c,f,y);break;case 22:la=(S=la)||y.memoizedState!==null,tc(c,f,y),la=S;break;default:tc(c,f,y)}}function WI(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{Eg(c)}catch(y){Dr(f,f.return,y)}}function IG(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new VI),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new VI),f;default:throw Error(r(435,c.tag))}}function s2(c,f){var y=IG(c);f.forEach(function(S){var N=$G.bind(null,c,S);y.has(S)||(y.add(S),S.then(N,N))})}function cs(c,f){var y=f.deletions;if(y!==null)for(var S=0;S<y.length;S++){var N=y[S],$=c,le=f,Te=le;e:for(;Te!==null;){switch(Te.tag){case 27:if(yu(Te.type)){qr=Te.stateNode,zi=!1;break e}break;case 5:qr=Te.stateNode,zi=!1;break e;case 3:case 4:qr=Te.stateNode.containerInfo,zi=!0;break e}Te=Te.return}if(qr===null)throw Error(r(160));GI($,le,N),qr=null,zi=!1,$=N.alternate,$!==null&&($.return=null),N.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)KI(f,c),f=f.sibling}var oo=null;function KI(c,f){var y=c.alternate,S=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:cs(f,c),us(c),S&4&&(cu(3,c,c.return),sg(3,c),cu(5,c,c.return));break;case 1:cs(f,c),us(c),S&512&&(la||y===null||el(y,y.return)),S&64&&ec&&(c=c.updateQueue,c!==null&&(S=c.callbacks,S!==null&&(y=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=y===null?S:y.concat(S))));break;case 26:var N=oo;if(cs(f,c),us(c),S&512&&(la||y===null||el(y,y.return)),S&4){var $=y!==null?y.memoizedState:null;if(S=c.memoizedState,y===null)if(S===null)if(c.stateNode===null){e:{S=c.type,y=c.memoizedProps,N=N.ownerDocument||N;t:switch(S){case"title":$=N.getElementsByTagName("title")[0],(!$||$[Lt]||$[pe]||$.namespaceURI==="http://www.w3.org/2000/svg"||$.hasAttribute("itemprop"))&&($=N.createElement(S),N.head.insertBefore($,N.querySelector("head > title"))),ei($,S,y),$[pe]=c,zn($),S=$;break e;case"link":var le=Uj("link","href",N).get(S+(y.href||""));if(le){for(var Te=0;Te<le.length;Te++)if($=le[Te],$.getAttribute("href")===(y.href==null||y.href===""?null:y.href)&&$.getAttribute("rel")===(y.rel==null?null:y.rel)&&$.getAttribute("title")===(y.title==null?null:y.title)&&$.getAttribute("crossorigin")===(y.crossOrigin==null?null:y.crossOrigin)){le.splice(Te,1);break t}}$=N.createElement(S),ei($,S,y),N.head.appendChild($);break;case"meta":if(le=Uj("meta","content",N).get(S+(y.content||""))){for(Te=0;Te<le.length;Te++)if($=le[Te],$.getAttribute("content")===(y.content==null?null:""+y.content)&&$.getAttribute("name")===(y.name==null?null:y.name)&&$.getAttribute("property")===(y.property==null?null:y.property)&&$.getAttribute("http-equiv")===(y.httpEquiv==null?null:y.httpEquiv)&&$.getAttribute("charset")===(y.charSet==null?null:y.charSet)){le.splice(Te,1);break t}}$=N.createElement(S),ei($,S,y),N.head.appendChild($);break;default:throw Error(r(468,S))}$[pe]=c,zn($),S=$}c.stateNode=S}else Vj(N,c.type,c.stateNode);else c.stateNode=zj(N,S,c.memoizedProps);else $!==S?($===null?y.stateNode!==null&&(y=y.stateNode,y.parentNode.removeChild(y)):$.count--,S===null?Vj(N,c.type,c.stateNode):zj(N,S,c.memoizedProps)):S===null&&c.stateNode!==null&&n2(c,c.memoizedProps,y.memoizedProps)}break;case 27:cs(f,c),us(c),S&512&&(la||y===null||el(y,y.return)),y!==null&&S&4&&n2(c,c.memoizedProps,y.memoizedProps);break;case 5:if(cs(f,c),us(c),S&512&&(la||y===null||el(y,y.return)),c.flags&32){N=c.stateNode;try{Gc(N,"")}catch(yt){Dr(c,c.return,yt)}}S&4&&c.stateNode!=null&&(N=c.memoizedProps,n2(c,N,y!==null?y.memoizedProps:N)),S&1024&&(i2=!0);break;case 6:if(cs(f,c),us(c),S&4){if(c.stateNode===null)throw Error(r(162));S=c.memoizedProps,y=c.stateNode;try{y.nodeValue=S}catch(yt){Dr(c,c.return,yt)}}break;case 3:if(gv=null,N=oo,oo=pv(f.containerInfo),cs(f,c),oo=N,us(c),S&4&&y!==null&&y.memoizedState.isDehydrated)try{Eg(f.containerInfo)}catch(yt){Dr(c,c.return,yt)}i2&&(i2=!1,ZI(c));break;case 4:S=oo,oo=pv(c.stateNode.containerInfo),cs(f,c),us(c),oo=S;break;case 12:cs(f,c),us(c);break;case 13:cs(f,c),us(c),c.child.flags&8192&&c.memoizedState!==null!=(y!==null&&y.memoizedState!==null)&&(f2=ce()),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,s2(c,S)));break;case 22:N=c.memoizedState!==null;var ze=y!==null&&y.memoizedState!==null,dt=ec,At=la;if(ec=dt||N,la=At||ze,cs(f,c),la=At,ec=dt,us(c),S&8192)e:for(f=c.stateNode,f._visibility=N?f._visibility&-2:f._visibility|1,N&&(y===null||ze||ec||la||Pd(c)),y=null,f=c;;){if(f.tag===5||f.tag===26){if(y===null){ze=y=f;try{if($=ze.stateNode,N)le=$.style,typeof le.setProperty=="function"?le.setProperty("display","none","important"):le.display="none";else{Te=ze.stateNode;var Ot=ze.memoizedProps.style,mt=Ot!=null&&Ot.hasOwnProperty("display")?Ot.display:null;Te.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(yt){Dr(ze,ze.return,yt)}}}else if(f.tag===6){if(y===null){ze=f;try{ze.stateNode.nodeValue=N?"":ze.memoizedProps}catch(yt){Dr(ze,ze.return,yt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;y===f&&(y=null),f=f.return}y===f&&(y=null),f.sibling.return=f.return,f=f.sibling}S&4&&(S=c.updateQueue,S!==null&&(y=S.retryQueue,y!==null&&(S.retryQueue=null,s2(c,y))));break;case 19:cs(f,c),us(c),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,s2(c,S)));break;case 30:break;case 21:break;default:cs(f,c),us(c)}}function us(c){var f=c.flags;if(f&2){try{for(var y,S=c.return;S!==null;){if(zI(S)){y=S;break}S=S.return}if(y==null)throw Error(r(160));switch(y.tag){case 27:var N=y.stateNode,$=r2(c);tv(c,$,N);break;case 5:var le=y.stateNode;y.flags&32&&(Gc(le,""),y.flags&=-33);var Te=r2(c);tv(c,Te,le);break;case 3:case 4:var ze=y.stateNode.containerInfo,dt=r2(c);a2(c,dt,ze);break;default:throw Error(r(161))}}catch(At){Dr(c,c.return,At)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function ZI(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;ZI(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function uu(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)HI(c,f.alternate,f),f=f.sibling}function Pd(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:cu(4,f,f.return),Pd(f);break;case 1:el(f,f.return);var y=f.stateNode;typeof y.componentWillUnmount=="function"&&BI(f,f.return,y),Pd(f);break;case 27:gg(f.stateNode);case 26:case 5:el(f,f.return),Pd(f);break;case 22:f.memoizedState===null&&Pd(f);break;case 30:Pd(f);break;default:Pd(f)}c=c.sibling}}function du(c,f,y){for(y=y&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var S=f.alternate,N=c,$=f,le=$.flags;switch($.tag){case 0:case 11:case 15:du(N,$,y),sg(4,$);break;case 1:if(du(N,$,y),S=$,N=S.stateNode,typeof N.componentDidMount=="function")try{N.componentDidMount()}catch(dt){Dr(S,S.return,dt)}if(S=$,N=S.updateQueue,N!==null){var Te=S.stateNode;try{var ze=N.shared.hiddenCallbacks;if(ze!==null)for(N.shared.hiddenCallbacks=null,N=0;N<ze.length;N++)E3(ze[N],Te)}catch(dt){Dr(S,S.return,dt)}}y&&le&64&&LI($),og($,$.return);break;case 27:UI($);case 26:case 5:du(N,$,y),y&&S===null&&le&4&&$I($),og($,$.return);break;case 12:du(N,$,y);break;case 13:du(N,$,y),y&&le&4&&WI(N,$);break;case 22:$.memoizedState===null&&du(N,$,y),og($,$.return);break;case 30:break;default:du(N,$,y)}f=f.sibling}}function o2(c,f){var y=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==y&&(c!=null&&c.refCount++,y!=null&&Gm(y))}function l2(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Gm(c))}function tl(c,f,y,S){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)YI(c,f,y,S),f=f.sibling}function YI(c,f,y,S){var N=f.flags;switch(f.tag){case 0:case 11:case 15:tl(c,f,y,S),N&2048&&sg(9,f);break;case 1:tl(c,f,y,S);break;case 3:tl(c,f,y,S),N&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&Gm(c)));break;case 12:if(N&2048){tl(c,f,y,S),c=f.stateNode;try{var $=f.memoizedProps,le=$.id,Te=$.onPostCommit;typeof Te=="function"&&Te(le,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ze){Dr(f,f.return,ze)}}else tl(c,f,y,S);break;case 13:tl(c,f,y,S);break;case 23:break;case 22:$=f.stateNode,le=f.alternate,f.memoizedState!==null?$._visibility&2?tl(c,f,y,S):lg(c,f):$._visibility&2?tl(c,f,y,S):($._visibility|=2,_h(c,f,y,S,(f.subtreeFlags&10256)!==0)),N&2048&&o2(le,f);break;case 24:tl(c,f,y,S),N&2048&&l2(f.alternate,f);break;default:tl(c,f,y,S)}}function _h(c,f,y,S,N){for(N=N&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var $=c,le=f,Te=y,ze=S,dt=le.flags;switch(le.tag){case 0:case 11:case 15:_h($,le,Te,ze,N),sg(8,le);break;case 23:break;case 22:var At=le.stateNode;le.memoizedState!==null?At._visibility&2?_h($,le,Te,ze,N):lg($,le):(At._visibility|=2,_h($,le,Te,ze,N)),N&&dt&2048&&o2(le.alternate,le);break;case 24:_h($,le,Te,ze,N),N&&dt&2048&&l2(le.alternate,le);break;default:_h($,le,Te,ze,N)}f=f.sibling}}function lg(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var y=c,S=f,N=S.flags;switch(S.tag){case 22:lg(y,S),N&2048&&o2(S.alternate,S);break;case 24:lg(y,S),N&2048&&l2(S.alternate,S);break;default:lg(y,S)}f=f.sibling}}var cg=8192;function Sh(c){if(c.subtreeFlags&cg)for(c=c.child;c!==null;)XI(c),c=c.sibling}function XI(c){switch(c.tag){case 26:Sh(c),c.flags&cg&&c.memoizedState!==null&&gW(oo,c.memoizedState,c.memoizedProps);break;case 5:Sh(c);break;case 3:case 4:var f=oo;oo=pv(c.stateNode.containerInfo),Sh(c),oo=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=cg,cg=16777216,Sh(c),cg=f):Sh(c));break;default:Sh(c)}}function JI(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function ug(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Pa=S,ej(S,c)}JI(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)QI(c),c=c.sibling}function QI(c){switch(c.tag){case 0:case 11:case 15:ug(c),c.flags&2048&&cu(9,c,c.return);break;case 3:ug(c);break;case 12:ug(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,nv(c)):ug(c);break;default:ug(c)}}function nv(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var y=0;y<f.length;y++){var S=f[y];Pa=S,ej(S,c)}JI(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:cu(8,f,f.return),nv(f);break;case 22:y=f.stateNode,y._visibility&2&&(y._visibility&=-3,nv(f));break;default:nv(f)}c=c.sibling}}function ej(c,f){for(;Pa!==null;){var y=Pa;switch(y.tag){case 0:case 11:case 15:cu(8,y,f);break;case 23:case 22:if(y.memoizedState!==null&&y.memoizedState.cachePool!==null){var S=y.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Gm(y.memoizedState.cache)}if(S=y.child,S!==null)S.return=y,Pa=S;else e:for(y=c;Pa!==null;){S=Pa;var N=S.sibling,$=S.return;if(qI(S),S===y){Pa=null;break e}if(N!==null){N.return=$,Pa=N;break e}Pa=$}}}var jG={getCacheForType:function(c){var f=ui(Ca),y=f.data.get(c);return y===void 0&&(y=c(),f.data.set(c,y)),y}},DG=typeof WeakMap=="function"?WeakMap:Map,br=0,Fr=null,er=null,sr=0,vr=0,ds=null,fu=!1,Eh=!1,c2=!1,nc=0,na=0,hu=0,Fd=0,u2=0,Ds=0,Ch=0,dg=null,Ui=null,d2=!1,f2=0,rv=1/0,av=null,pu=null,Qa=0,mu=null,Th=null,kh=0,h2=0,p2=null,tj=null,fg=0,m2=null;function fs(){if((br&2)!==0&&sr!==0)return sr&-sr;if(ae.T!==null){var c=ph;return c!==0?c:_2()}return K()}function nj(){Ds===0&&(Ds=(sr&536870912)===0||fr?wt():536870912);var c=js.current;return c!==null&&(c.flags|=32),Ds}function hs(c,f,y){(c===Fr&&(vr===2||vr===9)||c.cancelPendingCommit!==null)&&(Ah(c,0),gu(c,sr,Ds,!1)),nt(c,y),((br&2)===0||c!==Fr)&&(c===Fr&&((br&2)===0&&(Fd|=y),na===4&&gu(c,sr,Ds,!1)),nl(c))}function rj(c,f,y){if((br&6)!==0)throw Error(r(327));var S=!y&&(f&124)===0&&(f&c.expiredLanes)===0||ue(c,f),N=S?PG(c,f):b2(c,f,!0),$=S;do{if(N===0){Eh&&!S&&gu(c,f,0,!1);break}else{if(y=c.current.alternate,$&&!MG(y)){N=b2(c,f,!1),$=!1;continue}if(N===2){if($=f,c.errorRecoveryDisabledLanes&$)var le=0;else le=c.pendingLanes&-536870913,le=le!==0?le:le&536870912?536870912:0;if(le!==0){f=le;e:{var Te=c;N=dg;var ze=Te.current.memoizedState.isDehydrated;if(ze&&(Ah(Te,le).flags|=256),le=b2(Te,le,!1),le!==2){if(c2&&!ze){Te.errorRecoveryDisabledLanes|=$,Fd|=$,N=4;break e}$=Ui,Ui=N,$!==null&&(Ui===null?Ui=$:Ui.push.apply(Ui,$))}N=le}if($=!1,N!==2)continue}}if(N===1){Ah(c,0),gu(c,f,0,!0);break}e:{switch(S=c,$=N,$){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:gu(S,f,Ds,!fu);break e;case 2:Ui=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(N=f2+300-ce(),10<N)){if(gu(S,f,Ds,!fu),Ae(S,0,!0)!==0)break e;S.timeoutHandle=jj(aj.bind(null,S,y,Ui,av,d2,f,Ds,Fd,Ch,fu,$,2,-0,0),N);break e}aj(S,y,Ui,av,d2,f,Ds,Fd,Ch,fu,$,0,-0,0)}}break}while(!0);nl(c)}function aj(c,f,y,S,N,$,le,Te,ze,dt,At,Ot,mt,yt){if(c.timeoutHandle=-1,Ot=f.subtreeFlags,(Ot&8192||(Ot&16785408)===16785408)&&(vg={stylesheets:null,count:0,unsuspend:mW},XI(f),Ot=yW(),Ot!==null)){c.cancelPendingCommit=Ot(dj.bind(null,c,f,$,y,S,N,le,Te,ze,At,1,mt,yt)),gu(c,$,le,!dt);return}dj(c,f,$,y,S,N,le,Te,ze)}function MG(c){for(var f=c;;){var y=f.tag;if((y===0||y===11||y===15)&&f.flags&16384&&(y=f.updateQueue,y!==null&&(y=y.stores,y!==null)))for(var S=0;S<y.length;S++){var N=y[S],$=N.getSnapshot;N=N.value;try{if(!ci($(),N))return!1}catch{return!1}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function gu(c,f,y,S){f&=~u2,f&=~Fd,c.suspendedLanes|=f,c.pingedLanes&=~f,S&&(c.warmLanes|=f),S=c.expirationTimes;for(var N=f;0<N;){var $=31-Zt(N),le=1<<$;S[$]=-1,N&=~le}y!==0&&Me(c,y,f)}function iv(){return(br&6)===0?(hg(0),!1):!0}function g2(){if(er!==null){if(vr===0)var c=er.return;else c=er,Kl=Id=null,DS(c),wh=null,rg=0,c=er;for(;c!==null;)FI(c.alternate,c),c=c.return;er=null}}function Ah(c,f){var y=c.timeoutHandle;y!==-1&&(c.timeoutHandle=-1,JG(y)),y=c.cancelPendingCommit,y!==null&&(c.cancelPendingCommit=null,y()),g2(),Fr=c,er=y=ql(c.current,null),sr=f,vr=0,ds=null,fu=!1,Eh=ue(c,f),c2=!1,Ch=Ds=u2=Fd=hu=na=0,Ui=dg=null,d2=!1,(f&8)!==0&&(f|=f&32);var S=c.entangledLanes;if(S!==0)for(c=c.entanglements,S&=f;0<S;){var N=31-Zt(S),$=1<<N;f|=c[N],S&=~$}return nc=f,En(),y}function ij(c,f){Gn=null,ae.H=Gb,f===Km||f===Pb?(f=_3(),vr=3):f===v3?(f=_3(),vr=4):vr=f===SI?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,ds=f,er===null&&(na=1,Xb(c,mn(f,c.current)))}function sj(){var c=ae.H;return ae.H=Gb,c===null?Gb:c}function oj(){var c=ae.A;return ae.A=jG,c}function y2(){na=4,fu||(sr&4194048)!==sr&&js.current!==null||(Eh=!0),(hu&134217727)===0&&(Fd&134217727)===0||Fr===null||gu(Fr,sr,Ds,!1)}function b2(c,f,y){var S=br;br|=2;var N=sj(),$=oj();(Fr!==c||sr!==f)&&(av=null,Ah(c,f)),f=!1;var le=na;e:do try{if(vr!==0&&er!==null){var Te=er,ze=ds;switch(vr){case 8:g2(),le=6;break e;case 3:case 2:case 9:case 6:js.current===null&&(f=!0);var dt=vr;if(vr=0,ds=null,Nh(c,Te,ze,dt),y&&Eh){le=0;break e}break;default:dt=vr,vr=0,ds=null,Nh(c,Te,ze,dt)}}OG(),le=na;break}catch(At){ij(c,At)}while(!0);return f&&c.shellSuspendCounter++,Kl=Id=null,br=S,ae.H=N,ae.A=$,er===null&&(Fr=null,sr=0,En()),le}function OG(){for(;er!==null;)lj(er)}function PG(c,f){var y=br;br|=2;var S=sj(),N=oj();Fr!==c||sr!==f?(av=null,rv=ce()+500,Ah(c,f)):Eh=ue(c,f);e:do try{if(vr!==0&&er!==null){f=er;var $=ds;t:switch(vr){case 1:vr=0,ds=null,Nh(c,f,$,1);break;case 2:case 9:if(w3($)){vr=0,ds=null,cj(f);break}f=function(){vr!==2&&vr!==9||Fr!==c||(vr=7),nl(c)},$.then(f,f);break e;case 3:vr=7;break e;case 4:vr=5;break e;case 7:w3($)?(vr=0,ds=null,cj(f)):(vr=0,ds=null,Nh(c,f,$,7));break;case 5:var le=null;switch(er.tag){case 26:le=er.memoizedState;case 5:case 27:var Te=er;if(!le||Hj(le)){vr=0,ds=null;var ze=Te.sibling;if(ze!==null)er=ze;else{var dt=Te.return;dt!==null?(er=dt,sv(dt)):er=null}break t}}vr=0,ds=null,Nh(c,f,$,5);break;case 6:vr=0,ds=null,Nh(c,f,$,6);break;case 8:g2(),na=6;break e;default:throw Error(r(462))}}FG();break}catch(At){ij(c,At)}while(!0);return Kl=Id=null,ae.H=S,ae.A=N,br=y,er!==null?0:(Fr=null,sr=0,En(),na)}function FG(){for(;er!==null&&!Ce();)lj(er)}function lj(c){var f=OI(c.alternate,c,nc);c.memoizedProps=c.pendingProps,f===null?sv(c):er=f}function cj(c){var f=c,y=f.alternate;switch(f.tag){case 15:case 0:f=NI(y,f,f.pendingProps,f.type,void 0,sr);break;case 11:f=NI(y,f,f.pendingProps,f.type.render,f.ref,sr);break;case 5:DS(f);default:FI(y,f),f=er=u3(f,nc),f=OI(y,f,nc)}c.memoizedProps=c.pendingProps,f===null?sv(c):er=f}function Nh(c,f,y,S){Kl=Id=null,DS(f),wh=null,rg=0;var N=f.return;try{if(TG(c,N,f,y,sr)){na=1,Xb(c,mn(y,c.current)),er=null;return}}catch($){if(N!==null)throw er=N,$;na=1,Xb(c,mn(y,c.current)),er=null;return}f.flags&32768?(fr||S===1?c=!0:Eh||(sr&536870912)!==0?c=!1:(fu=c=!0,(S===2||S===9||S===3||S===6)&&(S=js.current,S!==null&&S.tag===13&&(S.flags|=16384))),uj(f,c)):sv(f)}function sv(c){var f=c;do{if((f.flags&32768)!==0){uj(f,fu);return}c=f.return;var y=AG(f.alternate,f,nc);if(y!==null){er=y;return}if(f=f.sibling,f!==null){er=f;return}er=f=c}while(f!==null);na===0&&(na=5)}function uj(c,f){do{var y=NG(c.alternate,c);if(y!==null){y.flags&=32767,er=y;return}if(y=c.return,y!==null&&(y.flags|=32768,y.subtreeFlags=0,y.deletions=null),!f&&(c=c.sibling,c!==null)){er=c;return}er=c=y}while(c!==null);na=6,er=null}function dj(c,f,y,S,N,$,le,Te,ze){c.cancelPendingCommit=null;do ov();while(Qa!==0);if((br&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if($=f.lanes|f.childLanes,$|=Xa,ge(c,y,$,le,Te,ze),c===Fr&&(er=Fr=null,sr=0),Th=f,mu=c,kh=y,h2=$,p2=N,tj=S,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,zG(Pe,function(){return gj(),null})):(c.callbackNode=null,c.callbackPriority=0),S=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||S){S=ae.T,ae.T=null,N=ne.p,ne.p=2,le=br,br|=4;try{RG(c,f,y)}finally{br=le,ne.p=N,ae.T=S}}Qa=1,fj(),hj(),pj()}}function fj(){if(Qa===1){Qa=0;var c=mu,f=Th,y=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||y){y=ae.T,ae.T=null;var S=ne.p;ne.p=2;var N=br;br|=4;try{KI(f,c);var $=R2,le=de(c.containerInfo),Te=$.focusedElem,ze=$.selectionRange;if(le!==Te&&Te&&Te.ownerDocument&&re(Te.ownerDocument.documentElement,Te)){if(ze!==null&&xe(Te)){var dt=ze.start,At=ze.end;if(At===void 0&&(At=dt),"selectionStart"in Te)Te.selectionStart=dt,Te.selectionEnd=Math.min(At,Te.value.length);else{var Ot=Te.ownerDocument||document,mt=Ot&&Ot.defaultView||window;if(mt.getSelection){var yt=mt.getSelection(),Cn=Te.textContent.length,yn=Math.min(ze.start,Cn),Ar=ze.end===void 0?yn:Math.min(ze.end,Cn);!yt.extend&&yn>Ar&&(le=Ar,Ar=yn,yn=le);var at=X(Te,yn),Ye=X(Te,Ar);if(at&&Ye&&(yt.rangeCount!==1||yt.anchorNode!==at.node||yt.anchorOffset!==at.offset||yt.focusNode!==Ye.node||yt.focusOffset!==Ye.offset)){var ct=Ot.createRange();ct.setStart(at.node,at.offset),yt.removeAllRanges(),yn>Ar?(yt.addRange(ct),yt.extend(Ye.node,Ye.offset)):(ct.setEnd(Ye.node,Ye.offset),yt.addRange(ct))}}}}for(Ot=[],yt=Te;yt=yt.parentNode;)yt.nodeType===1&&Ot.push({element:yt,left:yt.scrollLeft,top:yt.scrollTop});for(typeof Te.focus=="function"&&Te.focus(),Te=0;Te<Ot.length;Te++){var jt=Ot[Te];jt.element.scrollLeft=jt.left,jt.element.scrollTop=jt.top}}vv=!!N2,R2=N2=null}finally{br=N,ne.p=S,ae.T=y}}c.current=f,Qa=2}}function hj(){if(Qa===2){Qa=0;var c=mu,f=Th,y=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||y){y=ae.T,ae.T=null;var S=ne.p;ne.p=2;var N=br;br|=4;try{HI(c,f.alternate,f)}finally{br=N,ne.p=S,ae.T=y}}Qa=3}}function pj(){if(Qa===4||Qa===3){Qa=0,Ee();var c=mu,f=Th,y=kh,S=tj;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Qa=5:(Qa=0,Th=mu=null,mj(c,c.pendingLanes));var N=c.pendingLanes;if(N===0&&(pu=null),me(y),f=f.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Ct,f,void 0,(f.current.flags&128)===128)}catch{}if(S!==null){f=ae.T,N=ne.p,ne.p=2,ae.T=null;try{for(var $=c.onRecoverableError,le=0;le<S.length;le++){var Te=S[le];$(Te.value,{componentStack:Te.stack})}}finally{ae.T=f,ne.p=N}}(kh&3)!==0&&ov(),nl(c),N=c.pendingLanes,(y&4194090)!==0&&(N&42)!==0?c===m2?fg++:(fg=0,m2=c):fg=0,hg(0)}}function mj(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,Gm(f)))}function ov(c){return fj(),hj(),pj(),gj()}function gj(){if(Qa!==5)return!1;var c=mu,f=h2;h2=0;var y=me(kh),S=ae.T,N=ne.p;try{ne.p=32>y?32:y,ae.T=null,y=p2,p2=null;var $=mu,le=kh;if(Qa=0,Th=mu=null,kh=0,(br&6)!==0)throw Error(r(331));var Te=br;if(br|=4,QI($.current),YI($,$.current,le,y),br=Te,hg(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Ct,$)}catch{}return!0}finally{ne.p=N,ae.T=S,mj(c,f)}}function yj(c,f,y){f=mn(y,f),f=WS(c.stateNode,f,2),c=iu(c,f,2),c!==null&&(nt(c,2),nl(c))}function Dr(c,f,y){if(c.tag===3)yj(c,c,y);else for(;f!==null;){if(f.tag===3){yj(f,c,y);break}else if(f.tag===1){var S=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(pu===null||!pu.has(S))){c=mn(y,c),y=xI(2),S=iu(f,y,2),S!==null&&(_I(y,S,f,c),nt(S,2),nl(S));break}}f=f.return}}function v2(c,f,y){var S=c.pingCache;if(S===null){S=c.pingCache=new DG;var N=new Set;S.set(f,N)}else N=S.get(f),N===void 0&&(N=new Set,S.set(f,N));N.has(y)||(c2=!0,N.add(y),c=LG.bind(null,c,f,y),f.then(c,c))}function LG(c,f,y){var S=c.pingCache;S!==null&&S.delete(f),c.pingedLanes|=c.suspendedLanes&y,c.warmLanes&=~y,Fr===c&&(sr&y)===y&&(na===4||na===3&&(sr&62914560)===sr&&300>ce()-f2?(br&2)===0&&Ah(c,0):u2|=y,Ch===sr&&(Ch=0)),nl(c)}function bj(c,f){f===0&&(f=L()),c=so(c,f),c!==null&&(nt(c,f),nl(c))}function BG(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),bj(c,y)}function $G(c,f){var y=0;switch(c.tag){case 13:var S=c.stateNode,N=c.memoizedState;N!==null&&(y=N.retryLane);break;case 19:S=c.stateNode;break;case 22:S=c.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(f),bj(c,y)}function zG(c,f){return Ie(c,f)}var lv=null,Rh=null,w2=!1,cv=!1,x2=!1,Ld=0;function nl(c){c!==Rh&&c.next===null&&(Rh===null?lv=Rh=c:Rh=Rh.next=c),cv=!0,w2||(w2=!0,VG())}function hg(c,f){if(!x2&&cv){x2=!0;do for(var y=!1,S=lv;S!==null;){if(c!==0){var N=S.pendingLanes;if(N===0)var $=0;else{var le=S.suspendedLanes,Te=S.pingedLanes;$=(1<<31-Zt(42|c)+1)-1,$&=N&~(le&~Te),$=$&201326741?$&201326741|1:$?$|2:0}$!==0&&(y=!0,_j(S,$))}else $=sr,$=Ae(S,S===Fr?$:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),($&3)===0||ue(S,$)||(y=!0,_j(S,$));S=S.next}while(y);x2=!1}}function UG(){vj()}function vj(){cv=w2=!1;var c=0;Ld!==0&&(XG()&&(c=Ld),Ld=0);for(var f=ce(),y=null,S=lv;S!==null;){var N=S.next,$=wj(S,f);$===0?(S.next=null,y===null?lv=N:y.next=N,N===null&&(Rh=y)):(y=S,(c!==0||($&3)!==0)&&(cv=!0)),S=N}hg(c)}function wj(c,f){for(var y=c.suspendedLanes,S=c.pingedLanes,N=c.expirationTimes,$=c.pendingLanes&-62914561;0<$;){var le=31-Zt($),Te=1<<le,ze=N[le];ze===-1?((Te&y)===0||(Te&S)!==0)&&(N[le]=ft(Te,f)):ze<=f&&(c.expiredLanes|=Te),$&=~Te}if(f=Fr,y=sr,y=Ae(c,c===f?y:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S=c.callbackNode,y===0||c===f&&(vr===2||vr===9)||c.cancelPendingCommit!==null)return S!==null&&S!==null&&B(S),c.callbackNode=null,c.callbackPriority=0;if((y&3)===0||ue(c,y)){if(f=y&-y,f===c.callbackPriority)return f;switch(S!==null&&B(S),me(y)){case 2:case 8:y=_e;break;case 32:y=Pe;break;case 268435456:y=We;break;default:y=Pe}return S=xj.bind(null,c),y=Ie(y,S),c.callbackPriority=f,c.callbackNode=y,f}return S!==null&&S!==null&&B(S),c.callbackPriority=2,c.callbackNode=null,2}function xj(c,f){if(Qa!==0&&Qa!==5)return c.callbackNode=null,c.callbackPriority=0,null;var y=c.callbackNode;if(ov()&&c.callbackNode!==y)return null;var S=sr;return S=Ae(c,c===Fr?S:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S===0?null:(rj(c,S,f),wj(c,ce()),c.callbackNode!=null&&c.callbackNode===y?xj.bind(null,c):null)}function _j(c,f){if(ov())return null;rj(c,f,!0)}function VG(){QG(function(){(br&6)!==0?Ie(ee,UG):vj()})}function _2(){return Ld===0&&(Ld=wt()),Ld}function Sj(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Pl(""+c)}function Ej(c,f){var y=f.ownerDocument.createElement("input");return y.name=f.name,y.value=f.value,c.id&&y.setAttribute("form",c.id),f.parentNode.insertBefore(y,f),c=new FormData(c),y.parentNode.removeChild(y),c}function HG(c,f,y,S,N){if(f==="submit"&&y&&y.stateNode===N){var $=Sj((N[Re]||null).action),le=S.submitter;le&&(f=(f=le[Re]||null)?Sj(f.formAction):le.getAttribute("formAction"),f!==null&&($=f,le=null));var Te=new Yf("action","action",null,S,N);c.push({event:Te,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(Ld!==0){var ze=le?Ej(N,le):new FormData(N);US(y,{pending:!0,data:ze,method:N.method,action:$},null,ze)}}else typeof $=="function"&&(Te.preventDefault(),ze=le?Ej(N,le):new FormData(N),US(y,{pending:!0,data:ze,method:N.method,action:$},$,ze))},currentTarget:N}]})}}for(var S2=0;S2<Jt.length;S2++){var E2=Jt[S2],qG=E2.toLowerCase(),GG=E2[0].toUpperCase()+E2.slice(1);Ut(qG,"on"+GG)}Ut(ht,"onAnimationEnd"),Ut(bt,"onAnimationIteration"),Ut(xt,"onAnimationStart"),Ut("dblclick","onDoubleClick"),Ut("focusin","onFocus"),Ut("focusout","onBlur"),Ut(kt,"onTransitionRun"),Ut(Ht,"onTransitionStart"),Ut(Xt,"onTransitionCancel"),Ut(zt,"onTransitionEnd"),Ho("onMouseEnter",["mouseout","mouseover"]),Ho("onMouseLeave",["mouseout","mouseover"]),Ho("onPointerEnter",["pointerout","pointerover"]),Ho("onPointerLeave",["pointerout","pointerover"]),Vo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vo("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),WG=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(pg));function Cj(c,f){f=(f&4)!==0;for(var y=0;y<c.length;y++){var S=c[y],N=S.event;S=S.listeners;e:{var $=void 0;if(f)for(var le=S.length-1;0<=le;le--){var Te=S[le],ze=Te.instance,dt=Te.currentTarget;if(Te=Te.listener,ze!==$&&N.isPropagationStopped())break e;$=Te,N.currentTarget=dt;try{$(N)}catch(At){Yb(At)}N.currentTarget=null,$=ze}else for(le=0;le<S.length;le++){if(Te=S[le],ze=Te.instance,dt=Te.currentTarget,Te=Te.listener,ze!==$&&N.isPropagationStopped())break e;$=Te,N.currentTarget=dt;try{$(N)}catch(At){Yb(At)}N.currentTarget=null,$=ze}}}}function tr(c,f){var y=f[pt];y===void 0&&(y=f[pt]=new Set);var S=c+"__bubble";y.has(S)||(Tj(f,c,2,!1),y.add(S))}function C2(c,f,y){var S=0;f&&(S|=4),Tj(y,c,S,f)}var uv="_reactListening"+Math.random().toString(36).slice(2);function T2(c){if(!c[uv]){c[uv]=!0,Ei.forEach(function(y){y!=="selectionchange"&&(WG.has(y)||C2(y,!1,c),C2(y,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[uv]||(f[uv]=!0,C2("selectionchange",!1,f))}}function Tj(c,f,y,S){switch(Yj(f)){case 2:var N=wW;break;case 8:N=xW;break;default:N=$2}y=N.bind(null,f,y,c),N=void 0,!Am||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(N=!0),S?N!==void 0?c.addEventListener(f,y,{capture:!0,passive:N}):c.addEventListener(f,y,!0):N!==void 0?c.addEventListener(f,y,{passive:N}):c.addEventListener(f,y,!1)}function k2(c,f,y,S,N){var $=S;if((f&1)===0&&(f&2)===0&&S!==null)e:for(;;){if(S===null)return;var le=S.tag;if(le===3||le===4){var Te=S.stateNode.containerInfo;if(Te===N)break;if(le===4)for(le=S.return;le!==null;){var ze=le.tag;if((ze===3||ze===4)&&le.stateNode.containerInfo===N)return;le=le.return}for(;Te!==null;){if(le=In(Te),le===null)return;if(ze=le.tag,ze===5||ze===6||ze===26||ze===27){S=$=le;continue e}Te=Te.parentNode}}S=S.return}Kc(function(){var dt=$,At=Kf(y),Ot=[];e:{var mt=Wt.get(c);if(mt!==void 0){var yt=Yf,Cn=c;switch(c){case"keypress":if(Xc(y)===0)break e;case"keydown":case"keyup":yt=ah;break;case"focusin":Cn="focus",yt=Jc;break;case"focusout":Cn="blur",yt=Jc;break;case"beforeblur":case"afterblur":yt=Jc;break;case"click":if(y.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yt=Qf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yt=vb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yt=Om;break;case ht:case bt:case xt:yt=wb;break;case zt:yt=Pm;break;case"scroll":case"scrollend":yt=Xf;break;case"wheel":yt=sh;break;case"copy":case"cut":case"paste":yt=nh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yt=Mm;break;case"toggle":case"beforetoggle":yt=Sb}var yn=(f&4)!==0,Ar=!yn&&(c==="scroll"||c==="scrollend"),at=yn?mt!==null?mt+"Capture":null:mt;yn=[];for(var Ye=dt,ct;Ye!==null;){var jt=Ye;if(ct=jt.stateNode,jt=jt.tag,jt!==5&&jt!==26&&jt!==27||ct===null||at===null||(jt=Bl(Ye,at),jt!=null&&yn.push(mg(Ye,jt,ct))),Ar)break;Ye=Ye.return}0<yn.length&&(mt=new yt(mt,Cn,null,y,At),Ot.push({event:mt,listeners:yn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",yt=c==="mouseout"||c==="pointerout",mt&&y!==Ts&&(Cn=y.relatedTarget||y.fromElement)&&(In(Cn)||Cn[Ve]))break e;if((yt||mt)&&(mt=At.window===At?At:(mt=At.ownerDocument)?mt.defaultView||mt.parentWindow:window,yt?(Cn=y.relatedTarget||y.toElement,yt=dt,Cn=Cn?In(Cn):null,Cn!==null&&(Ar=i(Cn),yn=Cn.tag,Cn!==Ar||yn!==5&&yn!==27&&yn!==6)&&(Cn=null)):(yt=null,Cn=dt),yt!==Cn)){if(yn=Qf,jt="onMouseLeave",at="onMouseEnter",Ye="mouse",(c==="pointerout"||c==="pointerover")&&(yn=Mm,jt="onPointerLeave",at="onPointerEnter",Ye="pointer"),Ar=yt==null?mt:Er(yt),ct=Cn==null?mt:Er(Cn),mt=new yn(jt,Ye+"leave",yt,y,At),mt.target=Ar,mt.relatedTarget=ct,jt=null,In(At)===dt&&(yn=new yn(at,Ye+"enter",Cn,y,At),yn.target=ct,yn.relatedTarget=Ar,jt=yn),Ar=jt,yt&&Cn)t:{for(yn=yt,at=Cn,Ye=0,ct=yn;ct;ct=Ih(ct))Ye++;for(ct=0,jt=at;jt;jt=Ih(jt))ct++;for(;0<Ye-ct;)yn=Ih(yn),Ye--;for(;0<ct-Ye;)at=Ih(at),ct--;for(;Ye--;){if(yn===at||at!==null&&yn===at.alternate)break t;yn=Ih(yn),at=Ih(at)}yn=null}else yn=null;yt!==null&&kj(Ot,mt,yt,yn,!1),Cn!==null&&Ar!==null&&kj(Ot,Ar,Cn,yn,!0)}}e:{if(mt=dt?Er(dt):window,yt=mt.nodeName&&mt.nodeName.toLowerCase(),yt==="select"||yt==="input"&&mt.type==="file")var sn=Cd;else if(ch(mt))if(As)sn=tu;else{sn=Hl;var Xn=Nb}else yt=mt.nodeName,!yt||yt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&km(dt.elementType)&&(sn=Cd):sn=zm;if(sn&&(sn=sn(c,dt))){$m(Ot,sn,y,At);break e}Xn&&Xn(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&Hc(mt,"number",mt.value)}switch(Xn=dt?Er(dt):window,c){case"focusin":(ch(Xn)||Xn.contentEditable==="true")&&(Be=Xn,Ze=dt,Je=null);break;case"focusout":Je=Ze=Be=null;break;case"mousedown":rt=!0;break;case"contextmenu":case"mouseup":case"dragend":rt=!1,He(Ot,y,At);break;case"selectionchange":if(Oe)break;case"keydown":case"keyup":He(Ot,y,At)}var fn;if(Sd)e:{switch(c){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else Vl?Bm(c,y)&&(wn="onCompositionEnd"):c==="keydown"&&y.keyCode===229&&(wn="onCompositionStart");wn&&(oh&&y.locale!=="ko"&&(Vl||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&Vl&&(fn=Yc()):(ks=At,Zf="value"in ks?ks.value:ks.textContent,Vl=!0)),Xn=dv(dt,wn),0<Xn.length&&(wn=new rh(wn,c,null,y,At),Ot.push({event:wn,listeners:Xn}),fn?wn.data=fn:(fn=Cb(y),fn!==null&&(wn.data=fn)))),(fn=oS?Tb(c,y):lS(c,y))&&(wn=dv(dt,"onBeforeInput"),0<wn.length&&(Xn=new rh("onBeforeInput","beforeinput",null,y,At),Ot.push({event:Xn,listeners:wn}),Xn.data=fn)),HG(Ot,c,dt,y,At)}Cj(Ot,f)})}function mg(c,f,y){return{instance:c,listener:f,currentTarget:y}}function dv(c,f){for(var y=f+"Capture",S=[];c!==null;){var N=c,$=N.stateNode;if(N=N.tag,N!==5&&N!==26&&N!==27||$===null||(N=Bl(c,y),N!=null&&S.unshift(mg(c,N,$)),N=Bl(c,f),N!=null&&S.push(mg(c,N,$))),c.tag===3)return S;c=c.return}return[]}function Ih(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function kj(c,f,y,S,N){for(var $=f._reactName,le=[];y!==null&&y!==S;){var Te=y,ze=Te.alternate,dt=Te.stateNode;if(Te=Te.tag,ze!==null&&ze===S)break;Te!==5&&Te!==26&&Te!==27||dt===null||(ze=dt,N?(dt=Bl(y,$),dt!=null&&le.unshift(mg(y,dt,ze))):N||(dt=Bl(y,$),dt!=null&&le.push(mg(y,dt,ze)))),y=y.return}le.length!==0&&c.push({event:f,listeners:le})}var KG=/\r\n?/g,ZG=/\u0000|\uFFFD/g;function Aj(c){return(typeof c=="string"?c:""+c).replace(KG,`
`).replace(ZG,"")}function Nj(c,f){return f=Aj(f),Aj(c)===f}function fv(){}function kr(c,f,y,S,N,$){switch(y){case"children":typeof S=="string"?f==="body"||f==="textarea"&&S===""||Gc(c,S):(typeof S=="number"||typeof S=="bigint")&&f!=="body"&&Gc(c,""+S);break;case"className":Dl(c,"class",S);break;case"tabIndex":Dl(c,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Dl(c,y,S);break;case"style":yb(c,S,$);break;case"data":if(f!=="object"){Dl(c,"data",S);break}case"src":case"href":if(S===""&&(f!=="a"||y!=="href")){c.removeAttribute(y);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(y);break}S=Pl(""+S),c.setAttribute(y,S);break;case"action":case"formAction":if(typeof S=="function"){c.setAttribute(y,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof $=="function"&&(y==="formAction"?(f!=="input"&&kr(c,f,"name",N.name,N,null),kr(c,f,"formEncType",N.formEncType,N,null),kr(c,f,"formMethod",N.formMethod,N,null),kr(c,f,"formTarget",N.formTarget,N,null)):(kr(c,f,"encType",N.encType,N,null),kr(c,f,"method",N.method,N,null),kr(c,f,"target",N.target,N,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(y);break}S=Pl(""+S),c.setAttribute(y,S);break;case"onClick":S!=null&&(c.onclick=fv);break;case"onScroll":S!=null&&tr("scroll",c);break;case"onScrollEnd":S!=null&&tr("scrollend",c);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"multiple":c.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":c.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){c.removeAttribute("xlink:href");break}y=Pl(""+S),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",y);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,""+S):c.removeAttribute(y);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,""):c.removeAttribute(y);break;case"capture":case"download":S===!0?c.setAttribute(y,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(y,S):c.removeAttribute(y);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?c.setAttribute(y,S):c.removeAttribute(y);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?c.removeAttribute(y):c.setAttribute(y,S);break;case"popover":tr("beforetoggle",c),tr("toggle",c),ao(c,"popover",S);break;case"xlinkActuate":ss(c,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":ss(c,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":ss(c,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":ss(c,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":ss(c,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":ss(c,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":ss(c,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":ss(c,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":ss(c,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":ao(c,"is",S);break;case"innerText":case"textContent":break;default:(!(2<y.length)||y[0]!=="o"&&y[0]!=="O"||y[1]!=="n"&&y[1]!=="N")&&(y=Ti.get(y)||y,ao(c,y,S))}}function A2(c,f,y,S,N,$){switch(y){case"style":yb(c,S,$);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(y=S.__html,y!=null){if(N.children!=null)throw Error(r(60));c.innerHTML=y}}break;case"children":typeof S=="string"?Gc(c,S):(typeof S=="number"||typeof S=="bigint")&&Gc(c,""+S);break;case"onScroll":S!=null&&tr("scroll",c);break;case"onScrollEnd":S!=null&&tr("scrollend",c);break;case"onClick":S!=null&&(c.onclick=fv);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Uo.hasOwnProperty(y))e:{if(y[0]==="o"&&y[1]==="n"&&(N=y.endsWith("Capture"),f=y.slice(2,N?y.length-7:void 0),$=c[Re]||null,$=$!=null?$[y]:null,typeof $=="function"&&c.removeEventListener(f,$,N),typeof S=="function")){typeof $!="function"&&$!==null&&(y in c?c[y]=null:c.hasAttribute(y)&&c.removeAttribute(y)),c.addEventListener(f,S,N);break e}y in c?c[y]=S:S===!0?c.setAttribute(y,""):ao(c,y,S)}}}function ei(c,f,y){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tr("error",c),tr("load",c);var S=!1,N=!1,$;for($ in y)if(y.hasOwnProperty($)){var le=y[$];if(le!=null)switch($){case"src":S=!0;break;case"srcSet":N=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:kr(c,f,$,le,y,null)}}N&&kr(c,f,"srcSet",y.srcSet,y,null),S&&kr(c,f,"src",y.src,y,null);return;case"input":tr("invalid",c);var Te=$=le=N=null,ze=null,dt=null;for(S in y)if(y.hasOwnProperty(S)){var At=y[S];if(At!=null)switch(S){case"name":N=At;break;case"type":le=At;break;case"checked":ze=At;break;case"defaultChecked":dt=At;break;case"value":$=At;break;case"defaultValue":Te=At;break;case"children":case"dangerouslySetInnerHTML":if(At!=null)throw Error(r(137,f));break;default:kr(c,f,S,At,y,null)}}Cm(c,$,Te,ze,dt,le,N,!1),Wo(c);return;case"select":tr("invalid",c),S=le=$=null;for(N in y)if(y.hasOwnProperty(N)&&(Te=y[N],Te!=null))switch(N){case"value":$=Te;break;case"defaultValue":le=Te;break;case"multiple":S=Te;default:kr(c,f,N,Te,y,null)}f=$,y=le,c.multiple=!!S,f!=null?Ol(c,!!S,f,!1):y!=null&&Ol(c,!!S,y,!0);return;case"textarea":tr("invalid",c),$=N=S=null;for(le in y)if(y.hasOwnProperty(le)&&(Te=y[le],Te!=null))switch(le){case"value":S=Te;break;case"defaultValue":N=Te;break;case"children":$=Te;break;case"dangerouslySetInnerHTML":if(Te!=null)throw Error(r(91));break;default:kr(c,f,le,Te,y,null)}Tm(c,S,N,$),Wo(c);return;case"option":for(ze in y)if(y.hasOwnProperty(ze)&&(S=y[ze],S!=null))switch(ze){case"selected":c.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:kr(c,f,ze,S,y,null)}return;case"dialog":tr("beforetoggle",c),tr("toggle",c),tr("cancel",c),tr("close",c);break;case"iframe":case"object":tr("load",c);break;case"video":case"audio":for(S=0;S<pg.length;S++)tr(pg[S],c);break;case"image":tr("error",c),tr("load",c);break;case"details":tr("toggle",c);break;case"embed":case"source":case"link":tr("error",c),tr("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in y)if(y.hasOwnProperty(dt)&&(S=y[dt],S!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:kr(c,f,dt,S,y,null)}return;default:if(km(f)){for(At in y)y.hasOwnProperty(At)&&(S=y[At],S!==void 0&&A2(c,f,At,S,y,void 0));return}}for(Te in y)y.hasOwnProperty(Te)&&(S=y[Te],S!=null&&kr(c,f,Te,S,y,null))}function YG(c,f,y,S){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var N=null,$=null,le=null,Te=null,ze=null,dt=null,At=null;for(yt in y){var Ot=y[yt];if(y.hasOwnProperty(yt)&&Ot!=null)switch(yt){case"checked":break;case"value":break;case"defaultValue":ze=Ot;default:S.hasOwnProperty(yt)||kr(c,f,yt,null,S,Ot)}}for(var mt in S){var yt=S[mt];if(Ot=y[mt],S.hasOwnProperty(mt)&&(yt!=null||Ot!=null))switch(mt){case"type":$=yt;break;case"name":N=yt;break;case"checked":dt=yt;break;case"defaultChecked":At=yt;break;case"value":le=yt;break;case"defaultValue":Te=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(r(137,f));break;default:yt!==Ot&&kr(c,f,mt,yt,S,Ot)}}Vc(c,le,Te,ze,dt,At,$,N);return;case"select":yt=le=Te=mt=null;for($ in y)if(ze=y[$],y.hasOwnProperty($)&&ze!=null)switch($){case"value":break;case"multiple":yt=ze;default:S.hasOwnProperty($)||kr(c,f,$,null,S,ze)}for(N in S)if($=S[N],ze=y[N],S.hasOwnProperty(N)&&($!=null||ze!=null))switch(N){case"value":mt=$;break;case"defaultValue":Te=$;break;case"multiple":le=$;default:$!==ze&&kr(c,f,N,$,S,ze)}f=Te,y=le,S=yt,mt!=null?Ol(c,!!y,mt,!1):!!S!=!!y&&(f!=null?Ol(c,!!y,f,!0):Ol(c,!!y,y?[]:"",!1));return;case"textarea":yt=mt=null;for(Te in y)if(N=y[Te],y.hasOwnProperty(Te)&&N!=null&&!S.hasOwnProperty(Te))switch(Te){case"value":break;case"children":break;default:kr(c,f,Te,null,S,N)}for(le in S)if(N=S[le],$=y[le],S.hasOwnProperty(le)&&(N!=null||$!=null))switch(le){case"value":mt=N;break;case"defaultValue":yt=N;break;case"children":break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(r(91));break;default:N!==$&&kr(c,f,le,N,S,$)}qc(c,mt,yt);return;case"option":for(var Cn in y)if(mt=y[Cn],y.hasOwnProperty(Cn)&&mt!=null&&!S.hasOwnProperty(Cn))switch(Cn){case"selected":c.selected=!1;break;default:kr(c,f,Cn,null,S,mt)}for(ze in S)if(mt=S[ze],yt=y[ze],S.hasOwnProperty(ze)&&mt!==yt&&(mt!=null||yt!=null))switch(ze){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:kr(c,f,ze,mt,S,yt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yn in y)mt=y[yn],y.hasOwnProperty(yn)&&mt!=null&&!S.hasOwnProperty(yn)&&kr(c,f,yn,null,S,mt);for(dt in S)if(mt=S[dt],yt=y[dt],S.hasOwnProperty(dt)&&mt!==yt&&(mt!=null||yt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:kr(c,f,dt,mt,S,yt)}return;default:if(km(f)){for(var Ar in y)mt=y[Ar],y.hasOwnProperty(Ar)&&mt!==void 0&&!S.hasOwnProperty(Ar)&&A2(c,f,Ar,void 0,S,mt);for(At in S)mt=S[At],yt=y[At],!S.hasOwnProperty(At)||mt===yt||mt===void 0&&yt===void 0||A2(c,f,At,mt,S,yt);return}}for(var at in y)mt=y[at],y.hasOwnProperty(at)&&mt!=null&&!S.hasOwnProperty(at)&&kr(c,f,at,null,S,mt);for(Ot in S)mt=S[Ot],yt=y[Ot],!S.hasOwnProperty(Ot)||mt===yt||mt==null&&yt==null||kr(c,f,Ot,mt,S,yt)}var N2=null,R2=null;function hv(c){return c.nodeType===9?c:c.ownerDocument}function Rj(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ij(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function I2(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var j2=null;function XG(){var c=window.event;return c&&c.type==="popstate"?c===j2?!1:(j2=c,!0):(j2=null,!1)}var jj=typeof setTimeout=="function"?setTimeout:void 0,JG=typeof clearTimeout=="function"?clearTimeout:void 0,Dj=typeof Promise=="function"?Promise:void 0,QG=typeof queueMicrotask=="function"?queueMicrotask:typeof Dj<"u"?function(c){return Dj.resolve(null).then(c).catch(eW)}:jj;function eW(c){setTimeout(function(){throw c})}function yu(c){return c==="head"}function Mj(c,f){var y=f,S=0,N=0;do{var $=y.nextSibling;if(c.removeChild(y),$&&$.nodeType===8)if(y=$.data,y==="/$"){if(0<S&&8>S){y=S;var le=c.ownerDocument;if(y&1&&gg(le.documentElement),y&2&&gg(le.body),y&4)for(y=le.head,gg(y),le=y.firstChild;le;){var Te=le.nextSibling,ze=le.nodeName;le[Lt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&le.rel.toLowerCase()==="stylesheet"||y.removeChild(le),le=Te}}if(N===0){c.removeChild($),Eg(f);return}N--}else y==="$"||y==="$?"||y==="$!"?N++:S=y.charCodeAt(0)-48;else S=0;y=$}while(y);Eg(f)}function D2(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var y=f;switch(f=f.nextSibling,y.nodeName){case"HTML":case"HEAD":case"BODY":D2(y),en(y);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(y.rel.toLowerCase()==="stylesheet")continue}c.removeChild(y)}}function tW(c,f,y,S){for(;c.nodeType===1;){var N=y;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!S&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(S){if(!c[Lt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if($=c.getAttribute("rel"),$==="stylesheet"&&c.hasAttribute("data-precedence"))break;if($!==N.rel||c.getAttribute("href")!==(N.href==null||N.href===""?null:N.href)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin)||c.getAttribute("title")!==(N.title==null?null:N.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if($=c.getAttribute("src"),($!==(N.src==null?null:N.src)||c.getAttribute("type")!==(N.type==null?null:N.type)||c.getAttribute("crossorigin")!==(N.crossOrigin==null?null:N.crossOrigin))&&$&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var $=N.name==null?null:""+N.name;if(N.type==="hidden"&&c.getAttribute("name")===$)return c}else return c;if(c=lo(c.nextSibling),c===null)break}return null}function nW(c,f,y){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!y||(c=lo(c.nextSibling),c===null))return null;return c}function M2(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function rW(c,f){var y=c.ownerDocument;if(c.data!=="$?"||y.readyState==="complete")f();else{var S=function(){f(),y.removeEventListener("DOMContentLoaded",S)};y.addEventListener("DOMContentLoaded",S),c._reactRetry=S}}function lo(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var O2=null;function Oj(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var y=c.data;if(y==="$"||y==="$!"||y==="$?"){if(f===0)return c;f--}else y==="/$"&&f++}c=c.previousSibling}return null}function Pj(c,f,y){switch(f=hv(y),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function gg(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);en(c)}var Ms=new Map,Fj=new Set;function pv(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var rc=ne.d;ne.d={f:aW,r:iW,D:sW,C:oW,L:lW,m:cW,X:dW,S:uW,M:fW};function aW(){var c=rc.f(),f=iv();return c||f}function iW(c){var f=Jn(c);f!==null&&f.tag===5&&f.type==="form"?rI(f):rc.r(c)}var jh=typeof document>"u"?null:document;function Lj(c,f,y){var S=jh;if(S&&typeof f=="string"&&f){var N=oi(f);N='link[rel="'+c+'"][href="'+N+'"]',typeof y=="string"&&(N+='[crossorigin="'+y+'"]'),Fj.has(N)||(Fj.add(N),c={rel:c,crossOrigin:y,href:f},S.querySelector(N)===null&&(f=S.createElement("link"),ei(f,"link",c),zn(f),S.head.appendChild(f)))}}function sW(c){rc.D(c),Lj("dns-prefetch",c,null)}function oW(c,f){rc.C(c,f),Lj("preconnect",c,f)}function lW(c,f,y){rc.L(c,f,y);var S=jh;if(S&&c&&f){var N='link[rel="preload"][as="'+oi(f)+'"]';f==="image"&&y&&y.imageSrcSet?(N+='[imagesrcset="'+oi(y.imageSrcSet)+'"]',typeof y.imageSizes=="string"&&(N+='[imagesizes="'+oi(y.imageSizes)+'"]')):N+='[href="'+oi(c)+'"]';var $=N;switch(f){case"style":$=Dh(c);break;case"script":$=Mh(c)}Ms.has($)||(c=d({rel:"preload",href:f==="image"&&y&&y.imageSrcSet?void 0:c,as:f},y),Ms.set($,c),S.querySelector(N)!==null||f==="style"&&S.querySelector(yg($))||f==="script"&&S.querySelector(bg($))||(f=S.createElement("link"),ei(f,"link",c),zn(f),S.head.appendChild(f)))}}function cW(c,f){rc.m(c,f);var y=jh;if(y&&c){var S=f&&typeof f.as=="string"?f.as:"script",N='link[rel="modulepreload"][as="'+oi(S)+'"][href="'+oi(c)+'"]',$=N;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":$=Mh(c)}if(!Ms.has($)&&(c=d({rel:"modulepreload",href:c},f),Ms.set($,c),y.querySelector(N)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(y.querySelector(bg($)))return}S=y.createElement("link"),ei(S,"link",c),zn(S),y.head.appendChild(S)}}}function uW(c,f,y){rc.S(c,f,y);var S=jh;if(S&&c){var N=Cr(S).hoistableStyles,$=Dh(c);f=f||"default";var le=N.get($);if(!le){var Te={loading:0,preload:null};if(le=S.querySelector(yg($)))Te.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},y),(y=Ms.get($))&&P2(c,y);var ze=le=S.createElement("link");zn(ze),ei(ze,"link",c),ze._p=new Promise(function(dt,At){ze.onload=dt,ze.onerror=At}),ze.addEventListener("load",function(){Te.loading|=1}),ze.addEventListener("error",function(){Te.loading|=2}),Te.loading|=4,mv(le,f,S)}le={type:"stylesheet",instance:le,count:1,state:Te},N.set($,le)}}}function dW(c,f){rc.X(c,f);var y=jh;if(y&&c){var S=Cr(y).hoistableScripts,N=Mh(c),$=S.get(N);$||($=y.querySelector(bg(N)),$||(c=d({src:c,async:!0},f),(f=Ms.get(N))&&F2(c,f),$=y.createElement("script"),zn($),ei($,"link",c),y.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},S.set(N,$))}}function fW(c,f){rc.M(c,f);var y=jh;if(y&&c){var S=Cr(y).hoistableScripts,N=Mh(c),$=S.get(N);$||($=y.querySelector(bg(N)),$||(c=d({src:c,async:!0,type:"module"},f),(f=Ms.get(N))&&F2(c,f),$=y.createElement("script"),zn($),ei($,"link",c),y.head.appendChild($)),$={type:"script",instance:$,count:1,state:null},S.set(N,$))}}function Bj(c,f,y,S){var N=(N=je.current)?pv(N):null;if(!N)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof y.precedence=="string"&&typeof y.href=="string"?(f=Dh(y.href),y=Cr(N).hoistableStyles,S=y.get(f),S||(S={type:"style",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(y.rel==="stylesheet"&&typeof y.href=="string"&&typeof y.precedence=="string"){c=Dh(y.href);var $=Cr(N).hoistableStyles,le=$.get(c);if(le||(N=N.ownerDocument||N,le={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},$.set(c,le),($=N.querySelector(yg(c)))&&!$._p&&(le.instance=$,le.state.loading=5),Ms.has(c)||(y={rel:"preload",as:"style",href:y.href,crossOrigin:y.crossOrigin,integrity:y.integrity,media:y.media,hrefLang:y.hrefLang,referrerPolicy:y.referrerPolicy},Ms.set(c,y),$||hW(N,c,y,le.state))),f&&S===null)throw Error(r(528,""));return le}if(f&&S!==null)throw Error(r(529,""));return null;case"script":return f=y.async,y=y.src,typeof y=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Mh(y),y=Cr(N).hoistableScripts,S=y.get(f),S||(S={type:"script",instance:null,count:0,state:null},y.set(f,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Dh(c){return'href="'+oi(c)+'"'}function yg(c){return'link[rel="stylesheet"]['+c+"]"}function $j(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function hW(c,f,y,S){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?S.loading=1:(f=c.createElement("link"),S.preload=f,f.addEventListener("load",function(){return S.loading|=1}),f.addEventListener("error",function(){return S.loading|=2}),ei(f,"link",y),zn(f),c.head.appendChild(f))}function Mh(c){return'[src="'+oi(c)+'"]'}function bg(c){return"script[async]"+c}function zj(c,f,y){if(f.count++,f.instance===null)switch(f.type){case"style":var S=c.querySelector('style[data-href~="'+oi(y.href)+'"]');if(S)return f.instance=S,zn(S),S;var N=d({},y,{"data-href":y.href,"data-precedence":y.precedence,href:null,precedence:null});return S=(c.ownerDocument||c).createElement("style"),zn(S),ei(S,"style",N),mv(S,y.precedence,c),f.instance=S;case"stylesheet":N=Dh(y.href);var $=c.querySelector(yg(N));if($)return f.state.loading|=4,f.instance=$,zn($),$;S=$j(y),(N=Ms.get(N))&&P2(S,N),$=(c.ownerDocument||c).createElement("link"),zn($);var le=$;return le._p=new Promise(function(Te,ze){le.onload=Te,le.onerror=ze}),ei($,"link",S),f.state.loading|=4,mv($,y.precedence,c),f.instance=$;case"script":return $=Mh(y.src),(N=c.querySelector(bg($)))?(f.instance=N,zn(N),N):(S=y,(N=Ms.get($))&&(S=d({},y),F2(S,N)),c=c.ownerDocument||c,N=c.createElement("script"),zn(N),ei(N,"link",S),c.head.appendChild(N),f.instance=N);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(S=f.instance,f.state.loading|=4,mv(S,y.precedence,c));return f.instance}function mv(c,f,y){for(var S=y.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),N=S.length?S[S.length-1]:null,$=N,le=0;le<S.length;le++){var Te=S[le];if(Te.dataset.precedence===f)$=Te;else if($!==N)break}$?$.parentNode.insertBefore(c,$.nextSibling):(f=y.nodeType===9?y.head:y,f.insertBefore(c,f.firstChild))}function P2(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function F2(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var gv=null;function Uj(c,f,y){if(gv===null){var S=new Map,N=gv=new Map;N.set(y,S)}else N=gv,S=N.get(y),S||(S=new Map,N.set(y,S));if(S.has(c))return S;for(S.set(c,null),y=y.getElementsByTagName(c),N=0;N<y.length;N++){var $=y[N];if(!($[Lt]||$[pe]||c==="link"&&$.getAttribute("rel")==="stylesheet")&&$.namespaceURI!=="http://www.w3.org/2000/svg"){var le=$.getAttribute(f)||"";le=c+le;var Te=S.get(le);Te?Te.push($):S.set(le,[$])}}return S}function Vj(c,f,y){c=c.ownerDocument||c,c.head.insertBefore(y,f==="title"?c.querySelector("head > title"):null)}function pW(c,f,y){if(y===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function Hj(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var vg=null;function mW(){}function gW(c,f,y){if(vg===null)throw Error(r(475));var S=vg;if(f.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var N=Dh(y.href),$=c.querySelector(yg(N));if($){c=$._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(S.count++,S=yv.bind(S),c.then(S,S)),f.state.loading|=4,f.instance=$,zn($);return}$=c.ownerDocument||c,y=$j(y),(N=Ms.get(N))&&P2(y,N),$=$.createElement("link"),zn($);var le=$;le._p=new Promise(function(Te,ze){le.onload=Te,le.onerror=ze}),ei($,"link",y),f.instance=$}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(S.count++,f=yv.bind(S),c.addEventListener("load",f),c.addEventListener("error",f))}}function yW(){if(vg===null)throw Error(r(475));var c=vg;return c.stylesheets&&c.count===0&&L2(c,c.stylesheets),0<c.count?function(f){var y=setTimeout(function(){if(c.stylesheets&&L2(c,c.stylesheets),c.unsuspend){var S=c.unsuspend;c.unsuspend=null,S()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(y)}}:null}function yv(){if(this.count--,this.count===0){if(this.stylesheets)L2(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var bv=null;function L2(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,bv=new Map,f.forEach(bW,c),bv=null,yv.call(c))}function bW(c,f){if(!(f.state.loading&4)){var y=bv.get(c);if(y)var S=y.get(null);else{y=new Map,bv.set(c,y);for(var N=c.querySelectorAll("link[data-precedence],style[data-precedence]"),$=0;$<N.length;$++){var le=N[$];(le.nodeName==="LINK"||le.getAttribute("media")!=="not all")&&(y.set(le.dataset.precedence,le),S=le)}S&&y.set(null,S)}N=f.instance,le=N.getAttribute("data-precedence"),$=y.get(le)||S,$===S&&y.set(null,N),y.set(le,N),this.count++,S=yv.bind(this),N.addEventListener("load",S),N.addEventListener("error",S),$?$.parentNode.insertBefore(N,$.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(N,c.firstChild)),f.state.loading|=4}}var wg={$$typeof:E,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function vW(c,f,y,S,N,$,le,Te){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$e(0),this.hiddenUpdates=$e(null),this.identifierPrefix=S,this.onUncaughtError=N,this.onCaughtError=$,this.onRecoverableError=le,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Te,this.incompleteTransitions=new Map}function qj(c,f,y,S,N,$,le,Te,ze,dt,At,Ot){return c=new vW(c,f,y,le,Te,ze,dt,Ot),f=1,$===!0&&(f|=24),$=ls(3,null,null,f),c.current=$,$.stateNode=c,f=vS(),f.refCount++,c.pooledCache=f,f.refCount++,$.memoizedState={element:S,isDehydrated:y,cache:f},SS($),c}function Gj(c){return c?(c=Xo,c):Xo}function Wj(c,f,y,S,N,$){N=Gj(N),S.context===null?S.context=N:S.pendingContext=N,S=au(f),S.payload={element:y},$=$===void 0?null:$,$!==null&&(S.callback=$),y=iu(c,S,f),y!==null&&(hs(y,c,f),Ym(y,c,f))}function Kj(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function B2(c,f){Kj(c,f),(c=c.alternate)&&Kj(c,f)}function Zj(c){if(c.tag===13){var f=so(c,67108864);f!==null&&hs(f,c,67108864),B2(c,67108864)}}var vv=!0;function wW(c,f,y,S){var N=ae.T;ae.T=null;var $=ne.p;try{ne.p=2,$2(c,f,y,S)}finally{ne.p=$,ae.T=N}}function xW(c,f,y,S){var N=ae.T;ae.T=null;var $=ne.p;try{ne.p=8,$2(c,f,y,S)}finally{ne.p=$,ae.T=N}}function $2(c,f,y,S){if(vv){var N=z2(S);if(N===null)k2(c,f,S,wv,y),Xj(c,S);else if(SW(N,c,f,y,S))S.stopPropagation();else if(Xj(c,S),f&4&&-1<_W.indexOf(c)){for(;N!==null;){var $=Jn(N);if($!==null)switch($.tag){case 3:if($=$.stateNode,$.current.memoizedState.isDehydrated){var le=we($.pendingLanes);if(le!==0){var Te=$;for(Te.pendingLanes|=2,Te.entangledLanes|=2;le;){var ze=1<<31-Zt(le);Te.entanglements[1]|=ze,le&=~ze}nl($),(br&6)===0&&(rv=ce()+500,hg(0))}}break;case 13:Te=so($,2),Te!==null&&hs(Te,$,2),iv(),B2($,2)}if($=z2(S),$===null&&k2(c,f,S,wv,y),$===N)break;N=$}N!==null&&S.stopPropagation()}else k2(c,f,S,null,y)}}function z2(c){return c=Kf(c),U2(c)}var wv=null;function U2(c){if(wv=null,c=In(c),c!==null){var f=i(c);if(f===null)c=null;else{var y=f.tag;if(y===13){if(c=s(f),c!==null)return c;c=null}else if(y===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return wv=c,null}function Yj(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case ee:return 2;case _e:return 8;case Pe:case ke:return 32;case We:return 268435456;default:return 32}default:return 32}}var V2=!1,bu=null,vu=null,wu=null,xg=new Map,_g=new Map,xu=[],_W="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xj(c,f){switch(c){case"focusin":case"focusout":bu=null;break;case"dragenter":case"dragleave":vu=null;break;case"mouseover":case"mouseout":wu=null;break;case"pointerover":case"pointerout":xg.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":_g.delete(f.pointerId)}}function Sg(c,f,y,S,N,$){return c===null||c.nativeEvent!==$?(c={blockedOn:f,domEventName:y,eventSystemFlags:S,nativeEvent:$,targetContainers:[N]},f!==null&&(f=Jn(f),f!==null&&Zj(f)),c):(c.eventSystemFlags|=S,f=c.targetContainers,N!==null&&f.indexOf(N)===-1&&f.push(N),c)}function SW(c,f,y,S,N){switch(f){case"focusin":return bu=Sg(bu,c,f,y,S,N),!0;case"dragenter":return vu=Sg(vu,c,f,y,S,N),!0;case"mouseover":return wu=Sg(wu,c,f,y,S,N),!0;case"pointerover":var $=N.pointerId;return xg.set($,Sg(xg.get($)||null,c,f,y,S,N)),!0;case"gotpointercapture":return $=N.pointerId,_g.set($,Sg(_g.get($)||null,c,f,y,S,N)),!0}return!1}function Jj(c){var f=In(c.target);if(f!==null){var y=i(f);if(y!==null){if(f=y.tag,f===13){if(f=s(y),f!==null){c.blockedOn=f,H(c.priority,function(){if(y.tag===13){var S=fs();S=Dt(S);var N=so(y,S);N!==null&&hs(N,y,S),B2(y,S)}});return}}else if(f===3&&y.stateNode.current.memoizedState.isDehydrated){c.blockedOn=y.tag===3?y.stateNode.containerInfo:null;return}}}c.blockedOn=null}function xv(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var y=z2(c.nativeEvent);if(y===null){y=c.nativeEvent;var S=new y.constructor(y.type,y);Ts=S,y.target.dispatchEvent(S),Ts=null}else return f=Jn(y),f!==null&&Zj(f),c.blockedOn=y,!1;f.shift()}return!0}function Qj(c,f,y){xv(c)&&y.delete(f)}function EW(){V2=!1,bu!==null&&xv(bu)&&(bu=null),vu!==null&&xv(vu)&&(vu=null),wu!==null&&xv(wu)&&(wu=null),xg.forEach(Qj),_g.forEach(Qj)}function _v(c,f){c.blockedOn===f&&(c.blockedOn=null,V2||(V2=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,EW)))}var Sv=null;function e4(c){Sv!==c&&(Sv=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Sv===c&&(Sv=null);for(var f=0;f<c.length;f+=3){var y=c[f],S=c[f+1],N=c[f+2];if(typeof S!="function"){if(U2(S||y)===null)continue;break}var $=Jn(y);$!==null&&(c.splice(f,3),f-=3,US($,{pending:!0,data:N,method:y.method,action:S},S,N))}}))}function Eg(c){function f(ze){return _v(ze,c)}bu!==null&&_v(bu,c),vu!==null&&_v(vu,c),wu!==null&&_v(wu,c),xg.forEach(f),_g.forEach(f);for(var y=0;y<xu.length;y++){var S=xu[y];S.blockedOn===c&&(S.blockedOn=null)}for(;0<xu.length&&(y=xu[0],y.blockedOn===null);)Jj(y),y.blockedOn===null&&xu.shift();if(y=(c.ownerDocument||c).$$reactFormReplay,y!=null)for(S=0;S<y.length;S+=3){var N=y[S],$=y[S+1],le=N[Re]||null;if(typeof $=="function")le||e4(y);else if(le){var Te=null;if($&&$.hasAttribute("formAction")){if(N=$,le=$[Re]||null)Te=le.formAction;else if(U2(N)!==null)continue}else Te=le.action;typeof Te=="function"?y[S+1]=Te:(y.splice(S,3),S-=3),e4(y)}}}function H2(c){this._internalRoot=c}Ev.prototype.render=H2.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var y=f.current,S=fs();Wj(y,S,c,f,null,null)},Ev.prototype.unmount=H2.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;Wj(c.current,2,null,c,null,null),iv(),f[Ve]=null}};function Ev(c){this._internalRoot=c}Ev.prototype.unstable_scheduleHydration=function(c){if(c){var f=K();c={blockedOn:null,target:c,priority:f};for(var y=0;y<xu.length&&f!==0&&f<xu[y].priority;y++);xu.splice(y,0,c),y===0&&Jj(c)}};var t4=t.version;if(t4!=="19.1.0")throw Error(r(527,t4,"19.1.0"));ne.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var CW={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cv.isDisabled&&Cv.supportsFiber)try{Ct=Cv.inject(CW),Ft=Cv}catch{}}return Tg.createRoot=function(c,f){if(!a(c))throw Error(r(299));var y=!1,S="",N=yI,$=bI,le=vI,Te=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(S=f.identifierPrefix),f.onUncaughtError!==void 0&&(N=f.onUncaughtError),f.onCaughtError!==void 0&&($=f.onCaughtError),f.onRecoverableError!==void 0&&(le=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Te=f.unstable_transitionCallbacks)),f=qj(c,1,!1,null,null,y,S,N,$,le,Te,null),c[Ve]=f.current,T2(c),new H2(f)},Tg.hydrateRoot=function(c,f,y){if(!a(c))throw Error(r(299));var S=!1,N="",$=yI,le=bI,Te=vI,ze=null,dt=null;return y!=null&&(y.unstable_strictMode===!0&&(S=!0),y.identifierPrefix!==void 0&&(N=y.identifierPrefix),y.onUncaughtError!==void 0&&($=y.onUncaughtError),y.onCaughtError!==void 0&&(le=y.onCaughtError),y.onRecoverableError!==void 0&&(Te=y.onRecoverableError),y.unstable_transitionCallbacks!==void 0&&(ze=y.unstable_transitionCallbacks),y.formState!==void 0&&(dt=y.formState)),f=qj(c,1,!0,f,y??null,S,N,$,le,Te,ze,dt),f.context=Gj(null),y=f.current,S=fs(),S=Dt(S),N=au(S),N.callback=null,iu(y,N,S),y=S,f.current.lanes=y,nt(f,y),nl(f),c[Ve]=f.current,T2(c),new Ev(f)},Tg.version="19.1.0",Tg}var d4;function zW(){if(d4)return W2.exports;d4=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),W2.exports=$W(),W2.exports}var UW=zW();const VW=xi(UW);function f4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _c(...e){return t=>{let n=!1;const r=e.map(a=>{const i=f4(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():f4(e[a],null)}}}}function Nn(...e){return C.useCallback(_c(...e),e)}function Pu(e){const t=HW(e),n=C.forwardRef((r,a)=>{const{children:i,...s}=r,o=C.Children.toArray(i),l=o.find(GW);if(l){const u=l.props.children,d=o.map(h=>h===l?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:h);return p.jsx(t,{...s,ref:a,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return p.jsx(t,{...s,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var v8=Pu("Slot");function HW(e){const t=C.forwardRef((n,r)=>{const{children:a,...i}=n;if(C.isValidElement(a)){const s=KW(a),o=WW(i,a.props);return a.type!==C.Fragment&&(o.ref=r?_c(r,s):s),C.cloneElement(a,o)}return C.Children.count(a)>1?C.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var w8=Symbol("radix.slottable");function qW(e){const t=({children:n})=>p.jsx(p.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=w8,t}function GW(e){return C.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===w8}function WW(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...o)=>{i(...o),a(...o)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function KW(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function x8(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=x8(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function _8(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=x8(e))&&(r&&(r+=" "),r+=t);return r}const h4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,p4=_8,cA=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return p4(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,s=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const m=h4(d)||h4(h);return a[u][m]}),o=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(v=>{let[b,w]=v;return Array.isArray(w)?w.includes({...i,...o}[b]):{...i,...o}[b]===w})?[...u,h,m]:u},[]);return p4(e,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},uA="-",ZW=e=>{const t=XW(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:s=>{const o=s.split(uA);return o[0]===""&&o.length!==1&&o.shift(),S8(o,t)||YW(s)},getConflictingClassGroupIds:(s,o)=>{const l=n[s]||[];return o&&r[s]?[...l,...r[s]]:l}}},S8=(e,t)=>{var s;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?S8(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(uA);return(s=t.validators.find(({validator:o})=>o(i)))==null?void 0:s.classGroupId},m4=/^\[(.+)\]$/,YW=e=>{if(m4.test(e)){const t=m4.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},XW=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)_T(n[a],r,a,t);return r},_T=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:g4(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(JW(a)){_T(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,s])=>{_T(s,g4(t,i),n,r)})})},g4=(e,t)=>{let n=e;return t.split(uA).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},JW=e=>e.isThemeGetter,QW=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,s)=>{n.set(i,s),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return a(i,s),s},set(i,s){n.has(i)?n.set(i,s):a(i,s)}}},ST="!",ET=":",eK=ET.length,tK=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let s=0,o=0,l=0,u;for(let v=0;v<a.length;v++){let b=a[v];if(s===0&&o===0){if(b===ET){i.push(a.slice(l,v)),l=v+eK;continue}if(b==="/"){u=v;continue}}b==="["?s++:b==="]"?s--:b==="("?o++:b===")"&&o--}const d=i.length===0?a:a.substring(l),h=nK(d),m=h!==d,g=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:m,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+ET,i=r;r=s=>s.startsWith(a)?i(s.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:s,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},nK=e=>e.endsWith(ST)?e.substring(0,e.length-1):e.startsWith(ST)?e.substring(1):e,rK=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(s=>{s[0]==="["||t[s]?(a.push(...i.sort(),s),i=[]):i.push(s)}),a.push(...i.sort()),a}},aK=e=>({cache:QW(e.cacheSize),parseClassName:tK(e),sortModifiers:rK(e),...ZW(e)}),iK=/\s+/,sK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,s=[],o=e.trim().split(iK);let l="";for(let u=o.length-1;u>=0;u-=1){const d=o[u],{isExternal:h,modifiers:m,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let w=!!b,x=r(w?v.substring(0,b):v);if(!x){if(!w){l=d+(l.length>0?" "+l:l);continue}if(x=r(v),!x){l=d+(l.length>0?" "+l:l);continue}w=!1}const _=i(m).join(":"),E=g?_+ST:_,T=E+x;if(s.includes(T))continue;s.push(T);const k=a(x,w);for(let R=0;R<k.length;++R){const j=k[R];s.push(E+j)}l=d+(l.length>0?" "+l:l)}return l};function oK(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=E8(t))&&(r&&(r+=" "),r+=n);return r}const E8=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=E8(e[r]))&&(n&&(n+=" "),n+=t);return n};function lK(e,...t){let n,r,a,i=s;function s(l){const u=t.reduce((d,h)=>h(d),e());return n=aK(u),r=n.cache.get,a=n.cache.set,i=o,o(l)}function o(l){const u=r(l);if(u)return u;const d=sK(l,n);return a(l,d),d}return function(){return i(oK.apply(null,arguments))}}const ka=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},C8=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,T8=/^\((?:(\w[\w-]*):)?(.+)\)$/i,cK=/^\d+\/\d+$/,uK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,dK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,fK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,pK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Oh=e=>cK.test(e),Wn=e=>!!e&&!Number.isNaN(Number(e)),Su=e=>!!e&&Number.isInteger(Number(e)),X2=e=>e.endsWith("%")&&Wn(e.slice(0,-1)),ac=e=>uK.test(e),mK=()=>!0,gK=e=>dK.test(e)&&!fK.test(e),k8=()=>!1,yK=e=>hK.test(e),bK=e=>pK.test(e),vK=e=>!on(e)&&!ln(e),wK=e=>Bp(e,R8,k8),on=e=>C8.test(e),Bd=e=>Bp(e,I8,gK),J2=e=>Bp(e,CK,Wn),y4=e=>Bp(e,A8,k8),xK=e=>Bp(e,N8,bK),Tv=e=>Bp(e,j8,yK),ln=e=>T8.test(e),kg=e=>$p(e,I8),_K=e=>$p(e,TK),b4=e=>$p(e,A8),SK=e=>$p(e,R8),EK=e=>$p(e,N8),kv=e=>$p(e,j8,!0),Bp=(e,t,n)=>{const r=C8.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},$p=(e,t,n=!1)=>{const r=T8.exec(e);return r?r[1]?t(r[1]):n:!1},A8=e=>e==="position"||e==="percentage",N8=e=>e==="image"||e==="url",R8=e=>e==="length"||e==="size"||e==="bg-size",I8=e=>e==="length",CK=e=>e==="number",TK=e=>e==="family-name",j8=e=>e==="shadow",kK=()=>{const e=ka("color"),t=ka("font"),n=ka("text"),r=ka("font-weight"),a=ka("tracking"),i=ka("leading"),s=ka("breakpoint"),o=ka("container"),l=ka("spacing"),u=ka("radius"),d=ka("shadow"),h=ka("inset-shadow"),m=ka("text-shadow"),g=ka("drop-shadow"),v=ka("blur"),b=ka("perspective"),w=ka("aspect"),x=ka("ease"),_=ka("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...T(),ln,on],R=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto","contain","none"],I=()=>[ln,on,l],P=()=>[Oh,"full","auto",...I()],O=()=>[Su,"none","subgrid",ln,on],U=()=>["auto",{span:["full",Su,ln,on]},Su,ln,on],M=()=>[Su,"auto",ln,on],W=()=>["auto","min","max","fr",ln,on],V=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ie=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...I()],ne=()=>[Oh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...I()],q=()=>[e,ln,on],te=()=>[...T(),b4,y4,{position:[ln,on]}],G=()=>["no-repeat",{repeat:["","x","y","space","round"]}],J=()=>["auto","cover","contain",SK,wK,{size:[ln,on]}],Q=()=>[X2,kg,Bd],se=()=>["","none","full",u,ln,on],fe=()=>["",Wn,kg,Bd],ve=()=>["solid","dashed","dotted","double"],je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[Wn,X2,b4,y4],Se=()=>["","none",v,ln,on],ye=()=>["none",Wn,ln,on],Fe=()=>["none",Wn,ln,on],Xe=()=>[Wn,ln,on],Le=()=>[Oh,"full",...I()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ac],breakpoint:[ac],color:[mK],container:[ac],"drop-shadow":[ac],ease:["in","out","in-out"],font:[vK],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ac],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ac],shadow:[ac],spacing:["px",Wn],text:[ac],"text-shadow":[ac],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Oh,on,ln,w]}],container:["container"],columns:[{columns:[Wn,on,ln,o]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:j()}],"overscroll-x":[{"overscroll-x":j()}],"overscroll-y":[{"overscroll-y":j()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:P()}],"inset-x":[{"inset-x":P()}],"inset-y":[{"inset-y":P()}],start:[{start:P()}],end:[{end:P()}],top:[{top:P()}],right:[{right:P()}],bottom:[{bottom:P()}],left:[{left:P()}],visibility:["visible","invisible","collapse"],z:[{z:[Su,"auto",ln,on]}],basis:[{basis:[Oh,"full","auto",o,...I()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Wn,Oh,"auto","initial","none",on]}],grow:[{grow:["",Wn,ln,on]}],shrink:[{shrink:["",Wn,ln,on]}],order:[{order:[Su,"first","last","none",ln,on]}],"grid-cols":[{"grid-cols":O()}],"col-start-end":[{col:U()}],"col-start":[{"col-start":M()}],"col-end":[{"col-end":M()}],"grid-rows":[{"grid-rows":O()}],"row-start-end":[{row:U()}],"row-start":[{"row-start":M()}],"row-end":[{"row-end":M()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":W()}],"auto-rows":[{"auto-rows":W()}],gap:[{gap:I()}],"gap-x":[{"gap-x":I()}],"gap-y":[{"gap-y":I()}],"justify-content":[{justify:[...V(),"normal"]}],"justify-items":[{"justify-items":[...ie(),"normal"]}],"justify-self":[{"justify-self":["auto",...ie()]}],"align-content":[{content:["normal",...V()]}],"align-items":[{items:[...ie(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ie(),{baseline:["","last"]}]}],"place-content":[{"place-content":V()}],"place-items":[{"place-items":[...ie(),"baseline"]}],"place-self":[{"place-self":["auto",...ie()]}],p:[{p:I()}],px:[{px:I()}],py:[{py:I()}],ps:[{ps:I()}],pe:[{pe:I()}],pt:[{pt:I()}],pr:[{pr:I()}],pb:[{pb:I()}],pl:[{pl:I()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":I()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":I()}],"space-y-reverse":["space-y-reverse"],size:[{size:ne()}],w:[{w:[o,"screen",...ne()]}],"min-w":[{"min-w":[o,"screen","none",...ne()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[s]},...ne()]}],h:[{h:["screen",...ne()]}],"min-h":[{"min-h":["screen","none",...ne()]}],"max-h":[{"max-h":["screen",...ne()]}],"font-size":[{text:["base",n,kg,Bd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,ln,J2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",X2,on]}],"font-family":[{font:[_K,on,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,ln,on]}],"line-clamp":[{"line-clamp":[Wn,"none",ln,J2]}],leading:[{leading:[i,...I()]}],"list-image":[{"list-image":["none",ln,on]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ln,on]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:q()}],"text-color":[{text:q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ve(),"wavy"]}],"text-decoration-thickness":[{decoration:[Wn,"from-font","auto",ln,Bd]}],"text-decoration-color":[{decoration:q()}],"underline-offset":[{"underline-offset":[Wn,"auto",ln,on]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:I()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ln,on]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ln,on]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:te()}],"bg-repeat":[{bg:G()}],"bg-size":[{bg:J()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Su,ln,on],radial:["",ln,on],conic:[Su,ln,on]},EK,xK]}],"bg-color":[{bg:q()}],"gradient-from-pos":[{from:Q()}],"gradient-via-pos":[{via:Q()}],"gradient-to-pos":[{to:Q()}],"gradient-from":[{from:q()}],"gradient-via":[{via:q()}],"gradient-to":[{to:q()}],rounded:[{rounded:se()}],"rounded-s":[{"rounded-s":se()}],"rounded-e":[{"rounded-e":se()}],"rounded-t":[{"rounded-t":se()}],"rounded-r":[{"rounded-r":se()}],"rounded-b":[{"rounded-b":se()}],"rounded-l":[{"rounded-l":se()}],"rounded-ss":[{"rounded-ss":se()}],"rounded-se":[{"rounded-se":se()}],"rounded-ee":[{"rounded-ee":se()}],"rounded-es":[{"rounded-es":se()}],"rounded-tl":[{"rounded-tl":se()}],"rounded-tr":[{"rounded-tr":se()}],"rounded-br":[{"rounded-br":se()}],"rounded-bl":[{"rounded-bl":se()}],"border-w":[{border:fe()}],"border-w-x":[{"border-x":fe()}],"border-w-y":[{"border-y":fe()}],"border-w-s":[{"border-s":fe()}],"border-w-e":[{"border-e":fe()}],"border-w-t":[{"border-t":fe()}],"border-w-r":[{"border-r":fe()}],"border-w-b":[{"border-b":fe()}],"border-w-l":[{"border-l":fe()}],"divide-x":[{"divide-x":fe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":fe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ve(),"hidden","none"]}],"divide-style":[{divide:[...ve(),"hidden","none"]}],"border-color":[{border:q()}],"border-color-x":[{"border-x":q()}],"border-color-y":[{"border-y":q()}],"border-color-s":[{"border-s":q()}],"border-color-e":[{"border-e":q()}],"border-color-t":[{"border-t":q()}],"border-color-r":[{"border-r":q()}],"border-color-b":[{"border-b":q()}],"border-color-l":[{"border-l":q()}],"divide-color":[{divide:q()}],"outline-style":[{outline:[...ve(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Wn,ln,on]}],"outline-w":[{outline:["",Wn,kg,Bd]}],"outline-color":[{outline:q()}],shadow:[{shadow:["","none",d,kv,Tv]}],"shadow-color":[{shadow:q()}],"inset-shadow":[{"inset-shadow":["none",h,kv,Tv]}],"inset-shadow-color":[{"inset-shadow":q()}],"ring-w":[{ring:fe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:q()}],"ring-offset-w":[{"ring-offset":[Wn,Bd]}],"ring-offset-color":[{"ring-offset":q()}],"inset-ring-w":[{"inset-ring":fe()}],"inset-ring-color":[{"inset-ring":q()}],"text-shadow":[{"text-shadow":["none",m,kv,Tv]}],"text-shadow-color":[{"text-shadow":q()}],opacity:[{opacity:[Wn,ln,on]}],"mix-blend":[{"mix-blend":[...je(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":je()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Wn]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":q()}],"mask-image-linear-to-color":[{"mask-linear-to":q()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":q()}],"mask-image-t-to-color":[{"mask-t-to":q()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":q()}],"mask-image-r-to-color":[{"mask-r-to":q()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":q()}],"mask-image-b-to-color":[{"mask-b-to":q()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":q()}],"mask-image-l-to-color":[{"mask-l-to":q()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":q()}],"mask-image-x-to-color":[{"mask-x-to":q()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":q()}],"mask-image-y-to-color":[{"mask-y-to":q()}],"mask-image-radial":[{"mask-radial":[ln,on]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":q()}],"mask-image-radial-to-color":[{"mask-radial-to":q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":T()}],"mask-image-conic-pos":[{"mask-conic":[Wn]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":q()}],"mask-image-conic-to-color":[{"mask-conic-to":q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:te()}],"mask-repeat":[{mask:G()}],"mask-size":[{mask:J()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ln,on]}],filter:[{filter:["","none",ln,on]}],blur:[{blur:Se()}],brightness:[{brightness:[Wn,ln,on]}],contrast:[{contrast:[Wn,ln,on]}],"drop-shadow":[{"drop-shadow":["","none",g,kv,Tv]}],"drop-shadow-color":[{"drop-shadow":q()}],grayscale:[{grayscale:["",Wn,ln,on]}],"hue-rotate":[{"hue-rotate":[Wn,ln,on]}],invert:[{invert:["",Wn,ln,on]}],saturate:[{saturate:[Wn,ln,on]}],sepia:[{sepia:["",Wn,ln,on]}],"backdrop-filter":[{"backdrop-filter":["","none",ln,on]}],"backdrop-blur":[{"backdrop-blur":Se()}],"backdrop-brightness":[{"backdrop-brightness":[Wn,ln,on]}],"backdrop-contrast":[{"backdrop-contrast":[Wn,ln,on]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Wn,ln,on]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Wn,ln,on]}],"backdrop-invert":[{"backdrop-invert":["",Wn,ln,on]}],"backdrop-opacity":[{"backdrop-opacity":[Wn,ln,on]}],"backdrop-saturate":[{"backdrop-saturate":[Wn,ln,on]}],"backdrop-sepia":[{"backdrop-sepia":["",Wn,ln,on]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":I()}],"border-spacing-x":[{"border-spacing-x":I()}],"border-spacing-y":[{"border-spacing-y":I()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ln,on]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Wn,"initial",ln,on]}],ease:[{ease:["linear","initial",x,ln,on]}],delay:[{delay:[Wn,ln,on]}],animate:[{animate:["none",_,ln,on]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ln,on]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:ye()}],"rotate-x":[{"rotate-x":ye()}],"rotate-y":[{"rotate-y":ye()}],"rotate-z":[{"rotate-z":ye()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:Xe()}],"skew-x":[{"skew-x":Xe()}],"skew-y":[{"skew-y":Xe()}],transform:[{transform:[ln,on,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ln,on]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":I()}],"scroll-mx":[{"scroll-mx":I()}],"scroll-my":[{"scroll-my":I()}],"scroll-ms":[{"scroll-ms":I()}],"scroll-me":[{"scroll-me":I()}],"scroll-mt":[{"scroll-mt":I()}],"scroll-mr":[{"scroll-mr":I()}],"scroll-mb":[{"scroll-mb":I()}],"scroll-ml":[{"scroll-ml":I()}],"scroll-p":[{"scroll-p":I()}],"scroll-px":[{"scroll-px":I()}],"scroll-py":[{"scroll-py":I()}],"scroll-ps":[{"scroll-ps":I()}],"scroll-pe":[{"scroll-pe":I()}],"scroll-pt":[{"scroll-pt":I()}],"scroll-pr":[{"scroll-pr":I()}],"scroll-pb":[{"scroll-pb":I()}],"scroll-pl":[{"scroll-pl":I()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ln,on]}],fill:[{fill:["none",...q()]}],"stroke-w":[{stroke:[Wn,kg,Bd,J2]}],stroke:[{stroke:["none",...q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},AK=lK(kK);function vt(...e){return AK(_8(e))}const NK=cA("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Rt({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?v8:"button";return p.jsx(i,{"data-slot":"button",className:vt(NK({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RK=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IK=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),v4=e=>{const t=IK(e);return t.charAt(0).toUpperCase()+t.slice(1)},D8=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jK={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DK=C.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:s,...o},l)=>C.createElement("svg",{ref:l,...jK,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:D8("lucide",a),...o},[...s.map(([u,d])=>C.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=(e,t)=>{const n=C.forwardRef(({className:r,...a},i)=>C.createElement(DK,{ref:i,iconNode:t,className:D8(`lucide-${RK(v4(e))}`,`lucide-${e}`,r),...a}));return n.displayName=v4(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MK=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],OK=Yt("archive",MK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PK=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],FK=Yt("arrow-down",PK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LK=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],BK=Yt("arrow-right",LK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $K=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],zK=Yt("ban",$K);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UK=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],M8=Yt("bot",UK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VK=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],zp=Yt("brain-circuit",VK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HK=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ga=Yt("check",HK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qK=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],To=Yt("chevron-down",qK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GK=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],O8=Yt("chevron-right",GK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WK=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Sc=Yt("chevron-up",WK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KK=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],y1=Yt("chevrons-up-down",KK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ec=Yt("circle-alert",ZK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],b1=Yt("circle-check",YK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XK=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],JK=Yt("circle",XK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QK=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],hp=Yt("clipboard",QK);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],tZ=Yt("clock",eZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],P8=Yt("cloud-upload",nZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],F8=Yt("code",rZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],iZ=Yt("cog",aZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],oZ=Yt("coins",sZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lZ=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],cZ=Yt("copy",lZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],dZ=Yt("dollar-sign",uZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],cf=Yt("download",fZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],pZ=Yt("ellipsis-vertical",hZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],gZ=Yt("file-archive",mZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],bZ=Yt("file-down",yZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],wZ=Yt("file-json",vZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],_Z=Yt("file-question",xZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],EZ=Yt("file-text",SZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],TZ=Yt("file-up",CZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],L8=Yt("file",kZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AZ=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],B8=Yt("folder-git",AZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],dA=Yt("folder-plus",NZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],w4=Yt("folder-tree",RZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],jZ=Yt("folder-up",IZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],hf=Yt("folder",DZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],fA=Yt("funnel",MZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Fu=Yt("git-branch",OZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],$8=Yt("git-commit-horizontal",PZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FZ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],z8=Yt("git-merge",FZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],hA=Yt("git-pull-request",LZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$Z=Yt("grip-vertical",BZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],pA=Yt("hard-drive",zZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],VZ=Yt("house",UZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],mA=Yt("image",HZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],U8=Yt("info",qZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],i0=Yt("key",GZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Fn=Yt("loader-circle",WZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],ZZ=Yt("menu",KZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}],["path",{d:"M12 7v6",key:"lw1j43"}],["path",{d:"M9 10h6",key:"9gxzsh"}]],XZ=Yt("message-square-plus",YZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JZ=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],CT=Yt("message-square",JZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QZ=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],eY=Yt("music",QZ);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],nY=Yt("palette",tY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],aY=Yt("panel-left-close",rY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],sY=Yt("panel-right-close",iY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],gA=Yt("paperclip",oY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lY=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],wy=Yt("pen",lY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tf=Yt("plus",cY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],x4=Yt("puzzle",uY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],v1=Yt("refresh-cw",dY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fY=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],hY=Yt("rocket",fY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],yA=Yt("rotate-ccw",pY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],kf=Yt("save",mY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gY=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],es=Yt("search",gY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],bY=Yt("send-horizontal",yY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vY=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],Zw=Yt("server",vY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wY=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],TT=Yt("settings",wY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],_Y=Yt("shield-alert",xY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],EY=Yt("sliders-horizontal",SY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CY=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],V8=Yt("sparkles",CY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TY=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Kg=Yt("square-pen",TY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],AY=Yt("square",kY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],RY=Yt("star",NY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]],kT=Yt("tags",IY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],DY=Yt("text",jY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Yi=Yt("trash-2",MY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],bA=Yt("triangle-alert",OY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PY=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],FY=Yt("upload",PY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],BY=Yt("user",LY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],_4=Yt("users",$Y);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],UY=Yt("video",zY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],vA=Yt("wrench",VY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HY=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Di=Yt("x",HY);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],GY=Yt("zap",qY),S4=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:p.jsx("div",{className:vt(n),children:r.map(a=>{var s,o;const i=t==="trigger"?(s=a.triggerRenderer)==null?void 0:s.call(a):(o=a.renderer)==null?void 0:o.call(a);return i?p.jsx(gt.Fragment,{children:i},a.id):null})})},E4=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const m=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,m))}},a=()=>t,o={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,o);return o},WY=e=>e?E4(e):E4,KY=e=>e;function ZY(e,t=KY){const n=gt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return gt.useDebugValue(n),n}const C4=e=>{const t=WY(e),n=r=>ZY(t,r);return Object.assign(n,t),n},Js=e=>e?C4(e):C4;var H8=Symbol.for("immer-nothing"),T4=Symbol.for("immer-draftable"),mr=Symbol.for("immer-state");function qs(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pp=Object.getPrototypeOf;function mp(e){return!!e&&!!e[mr]}function Cc(e){var t;return e?q8(e)||Array.isArray(e)||!!e[T4]||!!((t=e.constructor)!=null&&t[T4])||x1(e)||_1(e):!1}var YY=Object.prototype.constructor.toString();function q8(e){if(!e||typeof e!="object")return!1;const t=pp(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===YY}function s0(e,t){w1(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function w1(e){const t=e[mr];return t?t.type_:Array.isArray(e)?1:x1(e)?2:_1(e)?3:0}function AT(e,t){return w1(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function G8(e,t,n){const r=w1(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function XY(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function x1(e){return e instanceof Map}function _1(e){return e instanceof Set}function $a(e){return e.copy_||e.base_}function NT(e,t){if(x1(e))return new Map(e);if(_1(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=q8(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[mr];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const s=a[i],o=r[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[s]})}return Object.create(pp(e),r)}else{const r=pp(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function wA(e,t=!1){return S1(e)||mp(e)||!Cc(e)||(w1(e)>1&&(e.set=e.add=e.clear=e.delete=JY),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>wA(r,!0))),e}function JY(){qs(2)}function S1(e){return Object.isFrozen(e)}var RT={};function pf(e){const t=RT[e];return t||qs(0,e),t}function QY(e,t){RT[e]||(RT[e]=t)}var o0;function Yw(){return o0}function eX(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function k4(e,t){t&&(pf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function IT(e){jT(e),e.drafts_.forEach(tX),e.drafts_=null}function jT(e){e===o0&&(o0=e.parent_)}function A4(e){return o0=eX(o0,e)}function tX(e){const t=e[mr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function N4(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[mr].modified_&&(IT(t),qs(4)),Cc(e)&&(e=Xw(t,e),t.parent_||Jw(t,e)),t.patches_&&pf("Patches").generateReplacementPatches_(n[mr].base_,e,t.patches_,t.inversePatches_)):e=Xw(t,n,[]),IT(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==H8?e:void 0}function Xw(e,t,n){if(S1(t))return t;const r=t[mr];if(!r)return s0(t,(a,i)=>R4(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Jw(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,s=!1;r.type_===3&&(i=new Set(a),a.clear(),s=!0),s0(i,(o,l)=>R4(e,r,a,o,l,n,s)),Jw(e,a,!1),n&&e.patches_&&pf("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function R4(e,t,n,r,a,i,s){if(mp(a)){const o=i&&t&&t.type_!==3&&!AT(t.assigned_,r)?i.concat(r):void 0,l=Xw(e,a,o);if(G8(n,r,l),mp(l))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(Cc(a)&&!S1(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Xw(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Jw(e,a)}}function Jw(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&wA(t,n)}function nX(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Yw(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=xA;n&&(a=[r],i=l0);const{revoke:s,proxy:o}=Proxy.revocable(a,i);return r.draft_=o,r.revoke_=s,o}var xA={get(e,t){if(t===mr)return e;const n=$a(e);if(!AT(n,t))return rX(e,n,t);const r=n[t];return e.finalized_||!Cc(r)?r:r===Q2(e.base_,t)?(eE(e),e.copy_[t]=c0(r,e)):r},has(e,t){return t in $a(e)},ownKeys(e){return Reflect.ownKeys($a(e))},set(e,t,n){const r=W8($a(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=Q2($a(e),t),i=a==null?void 0:a[mr];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(XY(n,a)&&(n!==void 0||AT(e.base_,t)))return!0;eE(e),oc(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Q2(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,eE(e),oc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=$a(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){qs(11)},getPrototypeOf(e){return pp(e.base_)},setPrototypeOf(){qs(12)}},l0={};s0(xA,(e,t)=>{l0[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});l0.deleteProperty=function(e,t){return l0.set.call(this,e,t,void 0)};l0.set=function(e,t,n){return xA.set.call(this,e[0],t,n,e[0])};function Q2(e,t){const n=e[mr];return(n?$a(n):e)[t]}function rX(e,t,n){var a;const r=W8(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function W8(e,t){if(!(t in e))return;let n=pp(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=pp(n)}}function oc(e){e.modified_||(e.modified_=!0,e.parent_&&oc(e.parent_))}function eE(e){e.copy_||(e.copy_=NT(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var aX=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const s=this;return function(l=i,...u){return s.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&qs(6),r!==void 0&&typeof r!="function"&&qs(7);let a;if(Cc(t)){const i=A4(this),s=c0(t,void 0);let o=!0;try{a=n(s),o=!1}finally{o?IT(i):jT(i)}return k4(i,r),N4(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===H8&&(a=void 0),this.autoFreeze_&&wA(a,!0),r){const i=[],s=[];pf("Patches").generateReplacementPatches_(t,a,i,s),r(i,s)}return a}else qs(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...o)=>this.produceWithPatches(s,l=>t(l,...o));let r,a;return[this.produce(t,n,(s,o)=>{r=s,a=o}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Cc(e)||qs(8),mp(e)&&(e=iX(e));const t=A4(this),n=c0(e,void 0);return n[mr].isManual_=!0,jT(t),n}finishDraft(e,t){const n=e&&e[mr];(!n||!n.isManual_)&&qs(9);const{scope_:r}=n;return k4(r,t),N4(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=pf("Patches").applyPatches_;return mp(e)?r(e,t):this.produce(e,a=>r(a,t))}};function c0(e,t){const n=x1(e)?pf("MapSet").proxyMap_(e,t):_1(e)?pf("MapSet").proxySet_(e,t):nX(e,t);return(t?t.scope_:Yw()).drafts_.push(n),n}function iX(e){return mp(e)||qs(10,e),K8(e)}function K8(e){if(!Cc(e)||S1(e))return e;const t=e[mr];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=NT(e,t.scope_.immer_.useStrictShallowCopy_)}else n=NT(e,!0);return s0(n,(r,a)=>{G8(n,r,K8(a))}),t&&(t.finalized_=!1),n}function sX(){class e extends Map{constructor(l,u){super(),this[mr]={type_:2,parent_:u,scope_:u?u.scope_:Yw(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return $a(this[mr]).size}has(l){return $a(this[mr]).has(l)}set(l,u){const d=this[mr];return s(d),(!$a(d).has(l)||$a(d).get(l)!==u)&&(n(d),oc(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[mr];return s(u),n(u),oc(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[mr];s(l),$a(l).size&&(n(l),oc(l),l.assigned_=new Map,s0(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[mr];$a(d).forEach((h,m,g)=>{l.call(u,this.get(m),m,this)})}get(l){const u=this[mr];s(u);const d=$a(u).get(l);if(u.finalized_||!Cc(d)||d!==u.base_.get(l))return d;const h=c0(d,u);return n(u),u.copy_.set(l,h),h}keys(){return $a(this[mr]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(o,l){return new e(o,l)}function n(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}class r extends Set{constructor(l,u){super(),this[mr]={type_:3,parent_:u,scope_:u?u.scope_:Yw(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return $a(this[mr]).size}has(l){const u=this[mr];return s(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[mr];return s(u),this.has(l)||(i(u),oc(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[mr];return s(u),i(u),oc(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[mr];s(l),$a(l).size&&(i(l),oc(l),l.copy_.clear())}values(){const l=this[mr];return s(l),i(l),l.copy_.values()}entries(){const l=this[mr];return s(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(o,l){return new r(o,l)}function i(o){o.copy_||(o.copy_=new Set,o.base_.forEach(l=>{if(Cc(l)){const u=c0(l,o);o.drafts_.set(l,u),o.copy_.add(u)}else o.copy_.add(l)}))}function s(o){o.revoked_&&qs(3,JSON.stringify($a(o)))}QY("MapSet",{proxyMap_:t,proxySet_:a})}var _s=new aX,oX=_s.produce;_s.produceWithPatches.bind(_s);_s.setAutoFreeze.bind(_s);_s.setUseStrictShallowCopy.bind(_s);_s.applyPatches.bind(_s);_s.createDraft.bind(_s);_s.finishDraft.bind(_s);const lX=e=>(t,n,r)=>(r.setState=(a,i,...s)=>{const o=typeof a=="function"?oX(a):a;return t(o,i,...s)},e(r.setState,n,r)),Qs=lX,Sr=Js(Qs((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const s={modId:r,callback:a,order:i};return e(o=>{o.middlewareRegistry[n]||(o.middlewareRegistry[n]=[]),o.middlewareRegistry[n].push(s),o.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var s;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(o=>!(o.modId===r&&o.callback===a)),((s=i.middlewareRegistry[n])==null?void 0:s.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(s=>{s.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${s.tools[r].modId}". Overwriting with registration from mod "${n}".`),s.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var Ow={exports:{}},cX=Ow.exports,I4;function uX(){return I4||(I4=1,function(e,t){(function(n,r){e.exports=r()})(cX,function(){var n=function(A,F){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,re){X.__proto__=re}||function(X,re){for(var de in re)Object.prototype.hasOwnProperty.call(re,de)&&(X[de]=re[de])})(A,F)},r=function(){return(r=Object.assign||function(A){for(var F,X=1,re=arguments.length;X<re;X++)for(var de in F=arguments[X])Object.prototype.hasOwnProperty.call(F,de)&&(A[de]=F[de]);return A}).apply(this,arguments)};function a(A,F,X){for(var re,de=0,xe=F.length;de<xe;de++)!re&&de in F||((re=re||Array.prototype.slice.call(F,0,de))[de]=F[de]);return A.concat(re||Array.prototype.slice.call(F))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Qd,s=Object.keys,o=Array.isArray;function l(A,F){return typeof F!="object"||s(F).forEach(function(X){A[X]=F[X]}),A}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(A,F){return d.call(A,F)}function m(A,F){typeof F=="function"&&(F=F(u(A))),(typeof Reflect>"u"?s:Reflect.ownKeys)(F).forEach(function(X){v(A,X,F[X])})}var g=Object.defineProperty;function v(A,F,X,re){g(A,F,l(X&&h(X,"get")&&typeof X.get=="function"?{get:X.get,set:X.set,configurable:!0}:{value:X,configurable:!0,writable:!0},re))}function b(A){return{from:function(F){return A.prototype=Object.create(F.prototype),v(A.prototype,"constructor",A),{extend:m.bind(null,A.prototype)}}}}var w=Object.getOwnPropertyDescriptor,x=[].slice;function _(A,F,X){return x.call(A,F,X)}function E(A,F){return F(A)}function T(A){if(!A)throw new Error("Assertion Failed")}function k(A){i.setImmediate?setImmediate(A):setTimeout(A,0)}function R(A,F){if(typeof F=="string"&&h(A,F))return A[F];if(!F)return A;if(typeof F!="string"){for(var X=[],re=0,de=F.length;re<de;++re){var xe=R(A,F[re]);X.push(xe)}return X}var Oe=F.indexOf(".");if(Oe!==-1){var Be=A[F.substr(0,Oe)];return Be==null?void 0:R(Be,F.substr(Oe+1))}}function j(A,F,X){if(A&&F!==void 0&&!("isFrozen"in Object&&Object.isFrozen(A)))if(typeof F!="string"&&"length"in F){T(typeof X!="string"&&"length"in X);for(var re=0,de=F.length;re<de;++re)j(A,F[re],X[re])}else{var xe,Oe,Be=F.indexOf(".");Be!==-1?(xe=F.substr(0,Be),(Oe=F.substr(Be+1))===""?X===void 0?o(A)&&!isNaN(parseInt(xe))?A.splice(xe,1):delete A[xe]:A[xe]=X:j(Be=!(Be=A[xe])||!h(A,xe)?A[xe]={}:Be,Oe,X)):X===void 0?o(A)&&!isNaN(parseInt(F))?A.splice(F,1):delete A[F]:A[F]=X}}function I(A){var F,X={};for(F in A)h(A,F)&&(X[F]=A[F]);return X}var P=[].concat;function O(A){return P.apply([],A)}var Ct="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(O([8,16,32,64].map(function(A){return["Int","Uint","Float"].map(function(F){return F+A+"Array"})}))).filter(function(A){return i[A]}),U=new Set(Ct.map(function(A){return i[A]})),M=null;function W(A){return M=new WeakMap,A=function F(X){if(!X||typeof X!="object")return X;var re=M.get(X);if(re)return re;if(o(X)){re=[],M.set(X,re);for(var de=0,xe=X.length;de<xe;++de)re.push(F(X[de]))}else if(U.has(X.constructor))re=X;else{var Oe,Be=u(X);for(Oe in re=Be===Object.prototype?{}:Object.create(Be),M.set(X,re),X)h(X,Oe)&&(re[Oe]=F(X[Oe]))}return re}(A),M=null,A}var V={}.toString;function ie(A){return V.call(A).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ne=typeof ae=="symbol"?function(A){var F;return A!=null&&(F=A[ae])&&F.apply(A)}:function(){return null};function q(A,F){return F=A.indexOf(F),0<=F&&A.splice(F,1),0<=F}var te={};function G(A){var F,X,re,de;if(arguments.length===1){if(o(A))return A.slice();if(this===te&&typeof A=="string")return[A];if(de=ne(A)){for(X=[];!(re=de.next()).done;)X.push(re.value);return X}if(A==null)return[A];if(typeof(F=A.length)!="number")return[A];for(X=new Array(F);F--;)X[F]=A[F];return X}for(F=arguments.length,X=new Array(F);F--;)X[F]=arguments[F];return X}var J=typeof Symbol<"u"?function(A){return A[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},it=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],ki=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(it),Q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function se(A,F){this.name=A,this.message=F}function fe(A,F){return A+". Errors: "+Object.keys(F).map(function(X){return F[X].toString()}).filter(function(X,re,de){return de.indexOf(X)===re}).join(`
`)}function ve(A,F,X,re){this.failures=F,this.failedKeys=re,this.successCount=X,this.message=fe(A,F)}function je(A,F){this.name="BulkError",this.failures=Object.keys(F).map(function(X){return F[X]}),this.failuresByPos=F,this.message=fe(A,this.failures)}b(se).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(ve).from(se),b(je).from(se);var Ne=ki.reduce(function(A,F){return A[F]=F+"Error",A},{}),Se=se,ye=ki.reduce(function(A,F){var X=F+"Error";function re(de,xe){this.name=X,de?typeof de=="string"?(this.message="".concat(de).concat(xe?`
 `+xe:""),this.inner=xe||null):typeof de=="object"&&(this.message="".concat(de.name," ").concat(de.message),this.inner=de):(this.message=Q[F]||X,this.inner=null)}return b(re).from(Se),A[F]=re,A},{});ye.Syntax=SyntaxError,ye.Type=TypeError,ye.Range=RangeError;var Fe=it.reduce(function(A,F){return A[F+"Error"]=ye[F],A},{}),Xe=ki.reduce(function(A,F){return["Syntax","Type","Range"].indexOf(F)===-1&&(A[F+"Error"]=ye[F]),A},{});function Le(){}function Ie(A){return A}function B(A,F){return A==null||A===Ie?F:function(X){return F(A(X))}}function Ce(A,F){return function(){A.apply(this,arguments),F.apply(this,arguments)}}function Ee(A,F){return A===Le?F:function(){var X=A.apply(this,arguments);X!==void 0&&(arguments[0]=X);var re=this.onsuccess,de=this.onerror;this.onsuccess=null,this.onerror=null;var xe=F.apply(this,arguments);return re&&(this.onsuccess=this.onsuccess?Ce(re,this.onsuccess):re),de&&(this.onerror=this.onerror?Ce(de,this.onerror):de),xe!==void 0?xe:X}}function ce(A,F){return A===Le?F:function(){A.apply(this,arguments);var X=this.onsuccess,re=this.onerror;this.onsuccess=this.onerror=null,F.apply(this,arguments),X&&(this.onsuccess=this.onsuccess?Ce(X,this.onsuccess):X),re&&(this.onerror=this.onerror?Ce(re,this.onerror):re)}}function oe(A,F){return A===Le?F:function(X){var re=A.apply(this,arguments);l(X,re);var de=this.onsuccess,xe=this.onerror;return this.onsuccess=null,this.onerror=null,X=F.apply(this,arguments),de&&(this.onsuccess=this.onsuccess?Ce(de,this.onsuccess):de),xe&&(this.onerror=this.onerror?Ce(xe,this.onerror):xe),re===void 0?X===void 0?void 0:X:l(re,X)}}function ee(A,F){return A===Le?F:function(){return F.apply(this,arguments)!==!1&&A.apply(this,arguments)}}function _e(A,F){return A===Le?F:function(){var X=A.apply(this,arguments);if(X&&typeof X.then=="function"){for(var re=this,de=arguments.length,xe=new Array(de);de--;)xe[de]=arguments[de];return X.then(function(){return F.apply(re,xe)})}return F.apply(this,arguments)}}Xe.ModifyError=ve,Xe.DexieError=se,Xe.BulkError=je;var Pe=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ke(A){Pe=A}var We={},Nt=100,Ct=typeof Promise>"u"?[]:function(){var A=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[A,u(A),A];var F=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[F,u(F),A]}(),it=Ct[0],ki=Ct[1],Ct=Ct[2],ki=ki&&ki.then,Ft=it&&it.constructor,Mt=!!Ct,Zt=function(A,F){ue.push([A,F]),D&&(queueMicrotask(me),D=!1)},be=!0,D=!0,Z=[],he=[],De=Ie,we={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},Ae=we,ue=[],ft=0,wt=[];function L(A){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var F=this._PSD=Ae;if(typeof A!="function"){if(A!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++F.ref,function X(re,de){try{de(function(xe){if(re._state===null){if(xe===re)throw new TypeError("A promise cannot be resolved with itself.");var Oe=re._lib&&K();xe&&typeof xe.then=="function"?X(re,function(Be,Ze){xe instanceof L?xe._then(Be,Ze):xe.then(Be,Ze)}):(re._state=!0,re._value=xe,Me(re)),Oe&&H()}},ge.bind(null,re))}catch(xe){ge(re,xe)}}(this,A)}var $e={get:function(){var A=Ae,F=It;function X(re,de){var xe=this,Oe=!A.global&&(A!==Ae||F!==It),Be=Oe&&!Jn(),Ze=new L(function(Je,rt){Ke(xe,new nt(Vo(re,A,Oe,Be),Vo(de,A,Oe,Be),Je,rt,A))});return this._consoleTask&&(Ze._consoleTask=this._consoleTask),Ze}return X.prototype=We,X},set:function(A){v(this,"then",A&&A.prototype===We?$e:{get:function(){return A},set:$e.set})}};function nt(A,F,X,re,de){this.onFulfilled=typeof A=="function"?A:null,this.onRejected=typeof F=="function"?F:null,this.resolve=X,this.reject=re,this.psd=de}function ge(A,F){var X,re;he.push(F),A._state===null&&(X=A._lib&&K(),F=De(F),A._state=!1,A._value=F,re=A,Z.some(function(de){return de._value===re._value})||Z.push(re),Me(A),X&&H())}function Me(A){var F=A._listeners;A._listeners=[];for(var X=0,re=F.length;X<re;++X)Ke(A,F[X]);var de=A._PSD;--de.ref||de.finalize(),ft===0&&(++ft,Zt(function(){--ft==0&&Y()},[]))}function Ke(A,F){if(A._state!==null){var X=A._state?F.onFulfilled:F.onRejected;if(X===null)return(A._state?F.resolve:F.reject)(A._value);++F.psd.ref,++ft,Zt(Dt,[X,A,F])}else A._listeners.push(F)}function Dt(A,F,X){try{var re,de=F._value;!F._state&&he.length&&(he=[]),re=Pe&&F._consoleTask?F._consoleTask.run(function(){return A(de)}):A(de),F._state||he.indexOf(de)!==-1||function(xe){for(var Oe=Z.length;Oe;)if(Z[--Oe]._value===xe._value)return Z.splice(Oe,1)}(F),X.resolve(re)}catch(xe){X.reject(xe)}finally{--ft==0&&Y(),--X.psd.ref||X.psd.finalize()}}function me(){Uo(we,function(){K()&&H()})}function K(){var A=be;return D=be=!1,A}function H(){var A,F,X;do for(;0<ue.length;)for(A=ue,ue=[],X=A.length,F=0;F<X;++F){var re=A[F];re[0].apply(null,re[1])}while(0<ue.length);D=be=!0}function Y(){var A=Z;Z=[],A.forEach(function(re){re._PSD.onunhandled.call(null,re._value,re)});for(var F=wt.slice(0),X=F.length;X;)F[--X]()}function pe(A){return new L(We,!1,A)}function Re(A,F){var X=Ae;return function(){var re=K(),de=Ae;try{return zn(X,!0),A.apply(this,arguments)}catch(xe){F&&F(xe)}finally{zn(de,!1),re&&H()}}}m(L.prototype,{then:$e,_then:function(A,F){Ke(this,new nt(null,null,A,F,Ae))},catch:function(A){if(arguments.length===1)return this.then(null,A);var F=A,X=arguments[1];return typeof F=="function"?this.then(null,function(re){return(re instanceof F?X:pe)(re)}):this.then(null,function(re){return(re&&re.name===F?X:pe)(re)})},finally:function(A){return this.then(function(F){return L.resolve(A()).then(function(){return F})},function(F){return L.resolve(A()).then(function(){return pe(F)})})},timeout:function(A,F){var X=this;return A<1/0?new L(function(re,de){var xe=setTimeout(function(){return de(new ye.Timeout(F))},A);X.then(re,de).finally(clearTimeout.bind(null,xe))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(L.prototype,Symbol.toStringTag,"Dexie.Promise"),we.env=Ei(),m(L,{all:function(){var A=G.apply(null,arguments).map(Er);return new L(function(F,X){A.length===0&&F([]);var re=A.length;A.forEach(function(de,xe){return L.resolve(de).then(function(Oe){A[xe]=Oe,--re||F(A)},X)})})},resolve:function(A){return A instanceof L?A:A&&typeof A.then=="function"?new L(function(F,X){A.then(F,X)}):new L(We,!0,A)},reject:pe,race:function(){var A=G.apply(null,arguments).map(Er);return new L(function(F,X){A.map(function(re){return L.resolve(re).then(F,X)})})},PSD:{get:function(){return Ae},set:function(A){return Ae=A}},totalEchoes:{get:function(){return It}},newPSD:en,usePSD:Uo,scheduler:{get:function(){return Zt},set:function(A){Zt=A}},rejectionMapper:{get:function(){return De},set:function(A){De=A}},follow:function(A,F){return new L(function(X,re){return en(function(de,xe){var Oe=Ae;Oe.unhandleds=[],Oe.onunhandled=xe,Oe.finalize=Ce(function(){var Be,Ze=this;Be=function(){Ze.unhandleds.length===0?de():xe(Ze.unhandleds[0])},wt.push(function Je(){Be(),wt.splice(wt.indexOf(Je),1)}),++ft,Zt(function(){--ft==0&&Y()},[])},Oe.finalize),A()},F,X,re)})}}),Ft&&(Ft.allSettled&&v(L,"allSettled",function(){var A=G.apply(null,arguments).map(Er);return new L(function(F){A.length===0&&F([]);var X=A.length,re=new Array(X);A.forEach(function(de,xe){return L.resolve(de).then(function(Oe){return re[xe]={status:"fulfilled",value:Oe}},function(Oe){return re[xe]={status:"rejected",reason:Oe}}).then(function(){return--X||F(re)})})})}),Ft.any&&typeof AggregateError<"u"&&v(L,"any",function(){var A=G.apply(null,arguments).map(Er);return new L(function(F,X){A.length===0&&X(new AggregateError([]));var re=A.length,de=new Array(re);A.forEach(function(xe,Oe){return L.resolve(xe).then(function(Be){return F(Be)},function(Be){de[Oe]=Be,--re||X(new AggregateError(de))})})})}),Ft.withResolvers&&(L.withResolvers=Ft.withResolvers));var Ve={awaits:0,echoes:0,id:0},pt=0,Kt=[],ut=0,It=0,Lt=0;function en(A,F,X,re){var de=Ae,xe=Object.create(de);return xe.parent=de,xe.ref=0,xe.global=!1,xe.id=++Lt,we.env,xe.env=Mt?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject}:{},F&&l(xe,F),++de.ref,xe.finalize=function(){--this.parent.ref||this.parent.finalize()},re=Uo(xe,A,X,re),xe.ref===0&&xe.finalize(),re}function In(){return Ve.id||(Ve.id=++pt),++Ve.awaits,Ve.echoes+=Nt,Ve.id}function Jn(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=Ve.awaits*Nt,!0)}function Er(A){return Ve.echoes&&A&&A.constructor===Ft?(In(),A.then(function(F){return Jn(),F},function(F){return Jn(),Zr(F)})):A}function Cr(){var A=Kt[Kt.length-1];Kt.pop(),zn(A,!1)}function zn(A,F){var X,re=Ae;(F?!Ve.echoes||ut++&&A===Ae:!ut||--ut&&A===Ae)||queueMicrotask(F?(function(de){++It,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.awaits=Ve.id=0),Kt.push(Ae),zn(de,!0)}).bind(null,A):Cr),A!==Ae&&(Ae=A,re===we&&(we.env=Ei()),Mt&&(X=we.env.Promise,F=A.env,(re.global||A.global)&&(Object.defineProperty(i,"Promise",F.PromiseProp),X.all=F.all,X.race=F.race,X.resolve=F.resolve,X.reject=F.reject,F.allSettled&&(X.allSettled=F.allSettled),F.any&&(X.any=F.any))))}function Ei(){var A=i.Promise;return Mt?{Promise:A,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:A.all,race:A.race,allSettled:A.allSettled,any:A.any,resolve:A.resolve,reject:A.reject}:{}}function Uo(A,F,X,re,de){var xe=Ae;try{return zn(A,!0),F(X,re,de)}finally{zn(xe,!1)}}function Vo(A,F,X,re){return typeof A!="function"?A:function(){var de=Ae;X&&In(),zn(F,!0);try{return A.apply(this,arguments)}finally{zn(de,!1),re&&queueMicrotask(Jn)}}}function Ho(A){Promise===Ft&&Ve.echoes===0?ut===0?A():enqueueNativeMicroTask(A):setTimeout(A,0)}(""+ki).indexOf("[native code]")===-1&&(In=Jn=Le);var Zr=L.reject,qo="",Cs="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",gb="String expected.",ao=[],Dl="__dbnames",ss="readonly",bd="readwrite";function Go(A,F){return A?F?function(){return A.apply(this,arguments)&&F.apply(this,arguments)}:A:F}var Ml={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function zc(A){return typeof A!="string"||/\./.test(A)?function(F){return F}:function(F){return F[A]===void 0&&A in F&&delete(F=W(F))[A],F}}function Gf(){throw ye.Type()}function Qn(A,F){try{var X=_m(A),re=_m(F);if(X!==re)return X==="Array"?1:re==="Array"?-1:X==="binary"?1:re==="binary"?-1:X==="string"?1:re==="string"?-1:X==="Date"?1:re!=="Date"?NaN:-1;switch(X){case"number":case"Date":case"string":return F<A?1:A<F?-1:0;case"binary":return function(de,xe){for(var Oe=de.length,Be=xe.length,Ze=Oe<Be?Oe:Be,Je=0;Je<Ze;++Je)if(de[Je]!==xe[Je])return de[Je]<xe[Je]?-1:1;return Oe===Be?0:Oe<Be?-1:1}(Ci(A),Ci(F));case"Array":return function(de,xe){for(var Oe=de.length,Be=xe.length,Ze=Oe<Be?Oe:Be,Je=0;Je<Ze;++Je){var rt=Qn(de[Je],xe[Je]);if(rt!==0)return rt}return Oe===Be?0:Oe<Be?-1:1}(A,F)}}catch{}return NaN}function _m(A){var F=typeof A;return F!="object"?F:ArrayBuffer.isView(A)?"binary":(A=ie(A),A==="ArrayBuffer"?"binary":A)}function Ci(A){return A instanceof Uint8Array?A:ArrayBuffer.isView(A)?new Uint8Array(A.buffer,A.byteOffset,A.byteLength):new Uint8Array(A)}var Sm=(jr.prototype._trans=function(A,F,X){var re=this._tx||Ae.trans,de=this.name,xe=Pe&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(A==="readonly"?"read":"write"," ").concat(this.name));function Oe(Je,rt,He){if(!He.schema[de])throw new ye.NotFound("Table "+de+" not part of transaction");return F(He.idbtrans,He)}var Be=K();try{var Ze=re&&re.db._novip===this.db._novip?re===Ae.trans?re._promise(A,Oe,X):en(function(){return re._promise(A,Oe,X)},{trans:re,transless:Ae.transless||Ae}):function Je(rt,He,st,Ge){if(rt.idbdb&&(rt._state.openComplete||Ae.letThrough||rt._vip)){var tt=rt._createTransaction(He,st,rt._dbSchema);try{tt.create(),rt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Ne.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Je(rt,He,st,Ge)})):Zr(ot)}return tt._promise(He,function(ot,Qe){return en(function(){return Ae.trans=tt,Ge(ot,Qe,tt)})}).then(function(ot){if(He==="readwrite")try{tt.idbtrans.commit()}catch{}return He==="readonly"?ot:tt._completion.then(function(){return ot})})}if(rt._state.openComplete)return Zr(new ye.DatabaseClosed(rt._state.dbOpenError));if(!rt._state.isBeingOpened){if(!rt._state.autoOpen)return Zr(new ye.DatabaseClosed);rt.open().catch(Le)}return rt._state.dbReadyPromise.then(function(){return Je(rt,He,st,Ge)})}(this.db,A,[this.name],Oe);return xe&&(Ze._consoleTask=xe,Ze=Ze.catch(function(Je){return console.trace(Je),Zr(Je)})),Ze}finally{Be&&H()}},jr.prototype.get=function(A,F){var X=this;return A&&A.constructor===Object?this.where(A).first(F):A==null?Zr(new ye.Type("Invalid argument to Table.get()")):this._trans("readonly",function(re){return X.core.get({trans:re,key:A}).then(function(de){return X.hook.reading.fire(de)})}).then(F)},jr.prototype.where=function(A){if(typeof A=="string")return new this.db.WhereClause(this,A);if(o(A))return new this.db.WhereClause(this,"[".concat(A.join("+"),"]"));var F=s(A);if(F.length===1)return this.where(F[0]).equals(A[F[0]]);var X=this.schema.indexes.concat(this.schema.primKey).filter(function(Be){if(Be.compound&&F.every(function(Je){return 0<=Be.keyPath.indexOf(Je)})){for(var Ze=0;Ze<F.length;++Ze)if(F.indexOf(Be.keyPath[Ze])===-1)return!1;return!0}return!1}).sort(function(Be,Ze){return Be.keyPath.length-Ze.keyPath.length})[0];if(X&&this.db._maxKey!==qo){var xe=X.keyPath.slice(0,F.length);return this.where(xe).equals(xe.map(function(Ze){return A[Ze]}))}!X&&Pe&&console.warn("The query ".concat(JSON.stringify(A)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(F.join("+"),"]"));var re=this.schema.idxByName;function de(Be,Ze){return Qn(Be,Ze)===0}var Oe=F.reduce(function(He,Ze){var Je=He[0],rt=He[1],He=re[Ze],st=A[Ze];return[Je||He,Je||!He?Go(rt,He&&He.multi?function(Ge){return Ge=R(Ge,Ze),o(Ge)&&Ge.some(function(tt){return de(st,tt)})}:function(Ge){return de(st,R(Ge,Ze))}):rt]},[null,null]),xe=Oe[0],Oe=Oe[1];return xe?this.where(xe.name).equals(A[xe.keyPath]).filter(Oe):X?this.filter(Oe):this.where(F).equals("")},jr.prototype.filter=function(A){return this.toCollection().and(A)},jr.prototype.count=function(A){return this.toCollection().count(A)},jr.prototype.offset=function(A){return this.toCollection().offset(A)},jr.prototype.limit=function(A){return this.toCollection().limit(A)},jr.prototype.each=function(A){return this.toCollection().each(A)},jr.prototype.toArray=function(A){return this.toCollection().toArray(A)},jr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},jr.prototype.orderBy=function(A){return new this.db.Collection(new this.db.WhereClause(this,o(A)?"[".concat(A.join("+"),"]"):A))},jr.prototype.reverse=function(){return this.toCollection().reverse()},jr.prototype.mapToClass=function(A){var F,X=this.db,re=this.name;function de(){return F!==null&&F.apply(this,arguments)||this}(this.schema.mappedClass=A).prototype instanceof Gf&&(function(Ze,Je){if(typeof Je!="function"&&Je!==null)throw new TypeError("Class extends value "+String(Je)+" is not a constructor or null");function rt(){this.constructor=Ze}n(Ze,Je),Ze.prototype=Je===null?Object.create(Je):(rt.prototype=Je.prototype,new rt)}(de,F=A),Object.defineProperty(de.prototype,"db",{get:function(){return X},enumerable:!1,configurable:!0}),de.prototype.table=function(){return re},A=de);for(var xe=new Set,Oe=A.prototype;Oe;Oe=u(Oe))Object.getOwnPropertyNames(Oe).forEach(function(Ze){return xe.add(Ze)});function Be(Ze){if(!Ze)return Ze;var Je,rt=Object.create(A.prototype);for(Je in Ze)if(!xe.has(Je))try{rt[Je]=Ze[Je]}catch{}return rt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=Be,this.hook("reading",Be),A},jr.prototype.defineClass=function(){return this.mapToClass(function(A){l(this,A)})},jr.prototype.add=function(A,F){var X=this,re=this.schema.primKey,de=re.auto,xe=re.keyPath,Oe=A;return xe&&de&&(Oe=zc(xe)(A)),this._trans("readwrite",function(Be){return X.core.mutate({trans:Be,type:"add",keys:F!=null?[F]:null,values:[Oe]})}).then(function(Be){return Be.numFailures?L.reject(Be.failures[0]):Be.lastResult}).then(function(Be){if(xe)try{j(A,xe,Be)}catch{}return Be})},jr.prototype.update=function(A,F){return typeof A!="object"||o(A)?this.where(":id").equals(A).modify(F):(A=R(A,this.schema.primKey.keyPath),A===void 0?Zr(new ye.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(A).modify(F))},jr.prototype.put=function(A,F){var X=this,re=this.schema.primKey,de=re.auto,xe=re.keyPath,Oe=A;return xe&&de&&(Oe=zc(xe)(A)),this._trans("readwrite",function(Be){return X.core.mutate({trans:Be,type:"put",values:[Oe],keys:F!=null?[F]:null})}).then(function(Be){return Be.numFailures?L.reject(Be.failures[0]):Be.lastResult}).then(function(Be){if(xe)try{j(A,xe,Be)}catch{}return Be})},jr.prototype.delete=function(A){var F=this;return this._trans("readwrite",function(X){return F.core.mutate({trans:X,type:"delete",keys:[A]})}).then(function(X){return X.numFailures?L.reject(X.failures[0]):void 0})},jr.prototype.clear=function(){var A=this;return this._trans("readwrite",function(F){return A.core.mutate({trans:F,type:"deleteRange",range:Ml})}).then(function(F){return F.numFailures?L.reject(F.failures[0]):void 0})},jr.prototype.bulkGet=function(A){var F=this;return this._trans("readonly",function(X){return F.core.getMany({keys:A,trans:X}).then(function(re){return re.map(function(de){return F.hook.reading.fire(de)})})})},jr.prototype.bulkAdd=function(A,F,X){var re=this,de=Array.isArray(F)?F:void 0,xe=(X=X||(de?void 0:F))?X.allKeys:void 0;return this._trans("readwrite",function(Oe){var Je=re.schema.primKey,Be=Je.auto,Je=Je.keyPath;if(Je&&de)throw new ye.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(de&&de.length!==A.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Je=Je&&Be?A.map(zc(Je)):A;return re.core.mutate({trans:Oe,type:"add",keys:de,values:Je,wantResults:xe}).then(function(tt){var He=tt.numFailures,st=tt.results,Ge=tt.lastResult,tt=tt.failures;if(He===0)return xe?st:Ge;throw new je("".concat(re.name,".bulkAdd(): ").concat(He," of ").concat(Ze," operations failed"),tt)})})},jr.prototype.bulkPut=function(A,F,X){var re=this,de=Array.isArray(F)?F:void 0,xe=(X=X||(de?void 0:F))?X.allKeys:void 0;return this._trans("readwrite",function(Oe){var Je=re.schema.primKey,Be=Je.auto,Je=Je.keyPath;if(Je&&de)throw new ye.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(de&&de.length!==A.length)throw new ye.InvalidArgument("Arguments objects and keys must have the same length");var Ze=A.length,Je=Je&&Be?A.map(zc(Je)):A;return re.core.mutate({trans:Oe,type:"put",keys:de,values:Je,wantResults:xe}).then(function(tt){var He=tt.numFailures,st=tt.results,Ge=tt.lastResult,tt=tt.failures;if(He===0)return xe?st:Ge;throw new je("".concat(re.name,".bulkPut(): ").concat(He," of ").concat(Ze," operations failed"),tt)})})},jr.prototype.bulkUpdate=function(A){var F=this,X=this.core,re=A.map(function(Oe){return Oe.key}),de=A.map(function(Oe){return Oe.changes}),xe=[];return this._trans("readwrite",function(Oe){return X.getMany({trans:Oe,keys:re,cache:"clone"}).then(function(Be){var Ze=[],Je=[];A.forEach(function(He,st){var Ge=He.key,tt=He.changes,ot=Be[st];if(ot){for(var Qe=0,ht=Object.keys(tt);Qe<ht.length;Qe++){var bt=ht[Qe],xt=tt[bt];if(bt===F.schema.primKey.keyPath){if(Qn(xt,Ge)!==0)throw new ye.Constraint("Cannot update primary key in bulkUpdate()")}else j(ot,bt,xt)}xe.push(st),Ze.push(Ge),Je.push(ot)}});var rt=Ze.length;return X.mutate({trans:Oe,type:"put",keys:Ze,values:Je,updates:{keys:re,changeSpecs:de}}).then(function(He){var st=He.numFailures,Ge=He.failures;if(st===0)return rt;for(var tt=0,ot=Object.keys(Ge);tt<ot.length;tt++){var Qe,ht=ot[tt],bt=xe[Number(ht)];bt!=null&&(Qe=Ge[ht],delete Ge[ht],Ge[bt]=Qe)}throw new je("".concat(F.name,".bulkUpdate(): ").concat(st," of ").concat(rt," operations failed"),Ge)})})})},jr.prototype.bulkDelete=function(A){var F=this,X=A.length;return this._trans("readwrite",function(re){return F.core.mutate({trans:re,type:"delete",keys:A})}).then(function(Oe){var de=Oe.numFailures,xe=Oe.lastResult,Oe=Oe.failures;if(de===0)return xe;throw new je("".concat(F.name,".bulkDelete(): ").concat(de," of ").concat(X," operations failed"),Oe)})},jr);function jr(){}function Wo(A){function F(Oe,Be){if(Be){for(var Ze=arguments.length,Je=new Array(Ze-1);--Ze;)Je[Ze-1]=arguments[Ze];return X[Oe].subscribe.apply(null,Je),A}if(typeof Oe=="string")return X[Oe]}var X={};F.addEventType=xe;for(var re=1,de=arguments.length;re<de;++re)xe(arguments[re]);return F;function xe(Oe,Be,Ze){if(typeof Oe!="object"){var Je;Be=Be||ee;var rt={subscribers:[],fire:Ze=Ze||Le,subscribe:function(He){rt.subscribers.indexOf(He)===-1&&(rt.subscribers.push(He),rt.fire=Be(rt.fire,He))},unsubscribe:function(He){rt.subscribers=rt.subscribers.filter(function(st){return st!==He}),rt.fire=rt.subscribers.reduce(Be,Ze)}};return X[Oe]=F[Oe]=rt}s(Je=Oe).forEach(function(He){var st=Je[He];if(o(st))xe(He,Je[He][0],Je[He][1]);else{if(st!=="asap")throw new ye.InvalidArgument("Invalid event config");var Ge=xe(He,Ie,function(){for(var tt=arguments.length,ot=new Array(tt);tt--;)ot[tt]=arguments[tt];Ge.subscribers.forEach(function(Qe){k(function(){Qe.apply(null,ot)})})})}})}}function Uc(A,F){return b(F).from({prototype:A}),F}function io(A,F){return!(A.filter||A.algorithm||A.or)&&(F?A.justLimit:!A.replayFilter)}function Em(A,F){A.filter=Go(A.filter,F)}function oi(A,F,X){var re=A.replayFilter;A.replayFilter=re?function(){return Go(re(),F())}:F,A.justLimit=X&&!re}function Vc(A,F){if(A.isPrimKey)return F.primaryKey;var X=F.getIndexByKeyPath(A.index);if(!X)throw new ye.Schema("KeyPath "+A.index+" on object store "+F.name+" is not indexed");return X}function Cm(A,F,X){var re=Vc(A,F.schema);return F.openCursor({trans:X,values:!A.keysOnly,reverse:A.dir==="prev",unique:!!A.unique,query:{index:re,range:A.range}})}function Hc(A,F,X,re){var de=A.replayFilter?Go(A.filter,A.replayFilter()):A.filter;if(A.or){var xe={},Oe=function(Be,Ze,Je){var rt,He;de&&!de(Ze,Je,function(st){return Ze.stop(st)},function(st){return Ze.fail(st)})||((He=""+(rt=Ze.primaryKey))=="[object ArrayBuffer]"&&(He=""+new Uint8Array(rt)),h(xe,He)||(xe[He]=!0,F(Be,Ze,Je)))};return Promise.all([A.or._iterate(Oe,X),Ol(Cm(A,re,X),A.algorithm,Oe,!A.keysOnly&&A.valueMapper)])}return Ol(Cm(A,re,X),Go(A.algorithm,de),F,!A.keysOnly&&A.valueMapper)}function Ol(A,F,X,re){var de=Re(re?function(xe,Oe,Be){return X(re(xe),Oe,Be)}:X);return A.then(function(xe){if(xe)return xe.start(function(){var Oe=function(){return xe.continue()};F&&!F(xe,function(Be){return Oe=Be},function(Be){xe.stop(Be),Oe=Le},function(Be){xe.fail(Be),Oe=Le})||de(xe.value,xe,function(Be){return Oe=Be}),Oe()})})}var qc=(Tm.prototype.execute=function(A){var F=this["@@propmod"];if(F.add!==void 0){var X=F.add;if(o(X))return a(a([],o(A)?A:[],!0),X).sort();if(typeof X=="number")return(Number(A)||0)+X;if(typeof X=="bigint")try{return BigInt(A)+X}catch{return BigInt(0)+X}throw new TypeError("Invalid term ".concat(X))}if(F.remove!==void 0){var re=F.remove;if(o(re))return o(A)?A.filter(function(de){return!re.includes(de)}).sort():[];if(typeof re=="number")return Number(A)-re;if(typeof re=="bigint")try{return BigInt(A)-re}catch{return BigInt(0)-re}throw new TypeError("Invalid subtrahend ".concat(re))}return X=(X=F.replacePrefix)===null||X===void 0?void 0:X[0],X&&typeof A=="string"&&A.startsWith(X)?F.replacePrefix[1]+A.substring(X.length):A},Tm);function Tm(A){this["@@propmod"]=A}var Gc=(ir.prototype._read=function(A,F){var X=this._ctx;return X.error?X.table._trans(null,Zr.bind(null,X.error)):X.table._trans("readonly",A).then(F)},ir.prototype._write=function(A){var F=this._ctx;return F.error?F.table._trans(null,Zr.bind(null,F.error)):F.table._trans("readwrite",A,"locked")},ir.prototype._addAlgorithm=function(A){var F=this._ctx;F.algorithm=Go(F.algorithm,A)},ir.prototype._iterate=function(A,F){return Hc(this._ctx,A,F,this._ctx.table.core)},ir.prototype.clone=function(A){var F=Object.create(this.constructor.prototype),X=Object.create(this._ctx);return A&&l(X,A),F._ctx=X,F},ir.prototype.raw=function(){return this._ctx.valueMapper=null,this},ir.prototype.each=function(A){var F=this._ctx;return this._read(function(X){return Hc(F,A,X,F.table.core)})},ir.prototype.count=function(A){var F=this;return this._read(function(X){var re=F._ctx,de=re.table.core;if(io(re,!0))return de.count({trans:X,query:{index:Vc(re,de.schema),range:re.range}}).then(function(Oe){return Math.min(Oe,re.limit)});var xe=0;return Hc(re,function(){return++xe,!1},X,de).then(function(){return xe})}).then(A)},ir.prototype.sortBy=function(A,F){var X=A.split(".").reverse(),re=X[0],de=X.length-1;function xe(Ze,Je){return Je?xe(Ze[X[Je]],Je-1):Ze[re]}var Oe=this._ctx.dir==="next"?1:-1;function Be(Ze,Je){return Qn(xe(Ze,de),xe(Je,de))*Oe}return this.toArray(function(Ze){return Ze.sort(Be)}).then(F)},ir.prototype.toArray=function(A){var F=this;return this._read(function(X){var re=F._ctx;if(re.dir==="next"&&io(re,!0)&&0<re.limit){var de=re.valueMapper,xe=Vc(re,re.table.core.schema);return re.table.core.query({trans:X,limit:re.limit,values:!0,query:{index:xe,range:re.range}}).then(function(Be){return Be=Be.result,de?Be.map(de):Be})}var Oe=[];return Hc(re,function(Be){return Oe.push(Be)},X,re.table.core).then(function(){return Oe})},A)},ir.prototype.offset=function(A){var F=this._ctx;return A<=0||(F.offset+=A,io(F)?oi(F,function(){var X=A;return function(re,de){return X===0||(X===1?--X:de(function(){re.advance(X),X=0}),!1)}}):oi(F,function(){var X=A;return function(){return--X<0}})),this},ir.prototype.limit=function(A){return this._ctx.limit=Math.min(this._ctx.limit,A),oi(this._ctx,function(){var F=A;return function(X,re,de){return--F<=0&&re(de),0<=F}},!0),this},ir.prototype.until=function(A,F){return Em(this._ctx,function(X,re,de){return!A(X.value)||(re(de),F)}),this},ir.prototype.first=function(A){return this.limit(1).toArray(function(F){return F[0]}).then(A)},ir.prototype.last=function(A){return this.reverse().first(A)},ir.prototype.filter=function(A){var F;return Em(this._ctx,function(X){return A(X.value)}),(F=this._ctx).isMatch=Go(F.isMatch,A),this},ir.prototype.and=function(A){return this.filter(A)},ir.prototype.or=function(A){return new this.db.WhereClause(this._ctx.table,A,this)},ir.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ir.prototype.desc=function(){return this.reverse()},ir.prototype.eachKey=function(A){var F=this._ctx;return F.keysOnly=!F.isMatch,this.each(function(X,re){A(re.key,re)})},ir.prototype.eachUniqueKey=function(A){return this._ctx.unique="unique",this.eachKey(A)},ir.prototype.eachPrimaryKey=function(A){var F=this._ctx;return F.keysOnly=!F.isMatch,this.each(function(X,re){A(re.primaryKey,re)})},ir.prototype.keys=function(A){var F=this._ctx;F.keysOnly=!F.isMatch;var X=[];return this.each(function(re,de){X.push(de.key)}).then(function(){return X}).then(A)},ir.prototype.primaryKeys=function(A){var F=this._ctx;if(F.dir==="next"&&io(F,!0)&&0<F.limit)return this._read(function(re){var de=Vc(F,F.table.core.schema);return F.table.core.query({trans:re,values:!1,limit:F.limit,query:{index:de,range:F.range}})}).then(function(re){return re.result}).then(A);F.keysOnly=!F.isMatch;var X=[];return this.each(function(re,de){X.push(de.primaryKey)}).then(function(){return X}).then(A)},ir.prototype.uniqueKeys=function(A){return this._ctx.unique="unique",this.keys(A)},ir.prototype.firstKey=function(A){return this.limit(1).keys(function(F){return F[0]}).then(A)},ir.prototype.lastKey=function(A){return this.reverse().firstKey(A)},ir.prototype.distinct=function(){var A=this._ctx,A=A.index&&A.table.schema.idxByName[A.index];if(!A||!A.multi)return this;var F={};return Em(this._ctx,function(de){var re=de.primaryKey.toString(),de=h(F,re);return F[re]=!0,!de}),this},ir.prototype.modify=function(A){var F=this,X=this._ctx;return this._write(function(re){var de,xe,Oe;Oe=typeof A=="function"?A:(de=s(A),xe=de.length,function(Qe){for(var ht=!1,bt=0;bt<xe;++bt){var xt=de[bt],kt=A[xt],Ht=R(Qe,xt);kt instanceof qc?(j(Qe,xt,kt.execute(Ht)),ht=!0):Ht!==kt&&(j(Qe,xt,kt),ht=!0)}return ht});var Be=X.table.core,He=Be.schema.primaryKey,Ze=He.outbound,Je=He.extractKey,rt=200,He=F.db._options.modifyChunkSize;He&&(rt=typeof He=="object"?He[Be.name]||He["*"]||200:He);function st(Qe,xt){var bt=xt.failures,xt=xt.numFailures;tt+=Qe-xt;for(var kt=0,Ht=s(bt);kt<Ht.length;kt++){var Xt=Ht[kt];Ge.push(bt[Xt])}}var Ge=[],tt=0,ot=[];return F.clone().primaryKeys().then(function(Qe){function ht(xt){var kt=Math.min(rt,Qe.length-xt);return Be.getMany({trans:re,keys:Qe.slice(xt,xt+kt),cache:"immutable"}).then(function(Ht){for(var Xt=[],zt=[],Wt=Ze?[]:null,Jt=[],Ut=0;Ut<kt;++Ut){var nn=Ht[Ut],mn={value:W(nn),primKey:Qe[xt+Ut]};Oe.call(mn,mn.value,mn)!==!1&&(mn.value==null?Jt.push(Qe[xt+Ut]):Ze||Qn(Je(nn),Je(mn.value))===0?(zt.push(mn.value),Ze&&Wt.push(Qe[xt+Ut])):(Jt.push(Qe[xt+Ut]),Xt.push(mn.value)))}return Promise.resolve(0<Xt.length&&Be.mutate({trans:re,type:"add",values:Xt}).then(function(gn){for(var jn in gn.failures)Jt.splice(parseInt(jn),1);st(Xt.length,gn)})).then(function(){return(0<zt.length||bt&&typeof A=="object")&&Be.mutate({trans:re,type:"put",keys:Wt,values:zt,criteria:bt,changeSpec:typeof A!="function"&&A,isAdditionalChunk:0<xt}).then(function(gn){return st(zt.length,gn)})}).then(function(){return(0<Jt.length||bt&&A===Wf)&&Be.mutate({trans:re,type:"delete",keys:Jt,criteria:bt,isAdditionalChunk:0<xt}).then(function(gn){return st(Jt.length,gn)})}).then(function(){return Qe.length>xt+kt&&ht(xt+rt)})})}var bt=io(X)&&X.limit===1/0&&(typeof A!="function"||A===Wf)&&{index:X.index,range:X.range};return ht(0).then(function(){if(0<Ge.length)throw new ve("Error modifying one or more objects",Ge,tt,ot);return Qe.length})})})},ir.prototype.delete=function(){var A=this._ctx,F=A.range;return io(A)&&(A.isPrimKey||F.type===3)?this._write(function(X){var re=A.table.core.schema.primaryKey,de=F;return A.table.core.count({trans:X,query:{index:re,range:de}}).then(function(xe){return A.table.core.mutate({trans:X,type:"deleteRange",range:de}).then(function(Oe){var Be=Oe.failures;if(Oe.lastResult,Oe.results,Oe=Oe.numFailures,Oe)throw new ve("Could not delete some values",Object.keys(Be).map(function(Ze){return Be[Ze]}),xe-Oe);return xe-Oe})})}):this.modify(Wf)},ir);function ir(){}var Wf=function(A,F){return F.value=null};function yb(A,F){return A<F?-1:A===F?0:1}function km(A,F){return F<A?-1:A===F?0:1}function Ti(A,F,X){return A=A instanceof Fl?new A.Collection(A):A,A._ctx.error=new(X||TypeError)(F),A}function Wc(A){return new A.Collection(A,function(){return Kf("")}).limit(0)}function Pl(A,F,X,re){var de,xe,Oe,Be,Ze,Je,rt,He=X.length;if(!X.every(function(tt){return typeof tt=="string"}))return Ti(A,gb);function st(tt){de=tt==="next"?function(Qe){return Qe.toUpperCase()}:function(Qe){return Qe.toLowerCase()},xe=tt==="next"?function(Qe){return Qe.toLowerCase()}:function(Qe){return Qe.toUpperCase()},Oe=tt==="next"?yb:km;var ot=X.map(function(Qe){return{lower:xe(Qe),upper:de(Qe)}}).sort(function(Qe,ht){return Oe(Qe.lower,ht.lower)});Be=ot.map(function(Qe){return Qe.upper}),Ze=ot.map(function(Qe){return Qe.lower}),rt=(Je=tt)==="next"?"":re}st("next"),A=new A.Collection(A,function(){return Ts(Be[0],Ze[He-1]+re)}),A._ondirectionchange=function(tt){st(tt)};var Ge=0;return A._addAlgorithm(function(tt,ot,Qe){var ht=tt.key;if(typeof ht!="string")return!1;var bt=xe(ht);if(F(bt,Ze,Ge))return!0;for(var xt=null,kt=Ge;kt<He;++kt){var Ht=function(Xt,zt,Wt,Jt,Ut,nn){for(var mn=Math.min(Xt.length,Jt.length),gn=-1,jn=0;jn<mn;++jn){var Xa=zt[jn];if(Xa!==Jt[jn])return Ut(Xt[jn],Wt[jn])<0?Xt.substr(0,jn)+Wt[jn]+Wt.substr(jn+1):Ut(Xt[jn],Jt[jn])<0?Xt.substr(0,jn)+Jt[jn]+Wt.substr(jn+1):0<=gn?Xt.substr(0,gn)+zt[gn]+Wt.substr(gn+1):null;Ut(Xt[jn],Xa)<0&&(gn=jn)}return mn<Jt.length&&nn==="next"?Xt+Wt.substr(Xt.length):mn<Xt.length&&nn==="prev"?Xt.substr(0,Wt.length):gn<0?null:Xt.substr(0,gn)+Jt[gn]+Wt.substr(gn+1)}(ht,bt,Be[kt],Ze[kt],Oe,Je);Ht===null&&xt===null?Ge=kt+1:(xt===null||0<Oe(xt,Ht))&&(xt=Ht)}return ot(xt!==null?function(){tt.continue(xt+rt)}:Qe),!1}),A}function Ts(A,F,X,re){return{type:2,lower:A,upper:F,lowerOpen:X,upperOpen:re}}function Kf(A){return{type:1,lower:A,upper:A}}var Fl=(Object.defineProperty($r.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),$r.prototype.between=function(A,F,X,re){X=X!==!1,re=re===!0;try{return 0<this._cmp(A,F)||this._cmp(A,F)===0&&(X||re)&&(!X||!re)?Wc(this):new this.Collection(this,function(){return Ts(A,F,!X,!re)})}catch{return Ti(this,Cs)}},$r.prototype.equals=function(A){return A==null?Ti(this,Cs):new this.Collection(this,function(){return Kf(A)})},$r.prototype.above=function(A){return A==null?Ti(this,Cs):new this.Collection(this,function(){return Ts(A,void 0,!0)})},$r.prototype.aboveOrEqual=function(A){return A==null?Ti(this,Cs):new this.Collection(this,function(){return Ts(A,void 0,!1)})},$r.prototype.below=function(A){return A==null?Ti(this,Cs):new this.Collection(this,function(){return Ts(void 0,A,!1,!0)})},$r.prototype.belowOrEqual=function(A){return A==null?Ti(this,Cs):new this.Collection(this,function(){return Ts(void 0,A)})},$r.prototype.startsWith=function(A){return typeof A!="string"?Ti(this,gb):this.between(A,A+qo,!0,!0)},$r.prototype.startsWithIgnoreCase=function(A){return A===""?this.startsWith(A):Pl(this,function(F,X){return F.indexOf(X[0])===0},[A],qo)},$r.prototype.equalsIgnoreCase=function(A){return Pl(this,function(F,X){return F===X[0]},[A],"")},$r.prototype.anyOfIgnoreCase=function(){var A=G.apply(te,arguments);return A.length===0?Wc(this):Pl(this,function(F,X){return X.indexOf(F)!==-1},A,"")},$r.prototype.startsWithAnyOfIgnoreCase=function(){var A=G.apply(te,arguments);return A.length===0?Wc(this):Pl(this,function(F,X){return X.some(function(re){return F.indexOf(re)===0})},A,qo)},$r.prototype.anyOf=function(){var A=this,F=G.apply(te,arguments),X=this._cmp;try{F.sort(X)}catch{return Ti(this,Cs)}if(F.length===0)return Wc(this);var re=new this.Collection(this,function(){return Ts(F[0],F[F.length-1])});re._ondirectionchange=function(xe){X=xe==="next"?A._ascending:A._descending,F.sort(X)};var de=0;return re._addAlgorithm(function(xe,Oe,Be){for(var Ze=xe.key;0<X(Ze,F[de]);)if(++de===F.length)return Oe(Be),!1;return X(Ze,F[de])===0||(Oe(function(){xe.continue(F[de])}),!1)}),re},$r.prototype.notEqual=function(A){return this.inAnyRange([[-1/0,A],[A,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},$r.prototype.noneOf=function(){var A=G.apply(te,arguments);if(A.length===0)return new this.Collection(this);try{A.sort(this._ascending)}catch{return Ti(this,Cs)}var F=A.reduce(function(X,re){return X?X.concat([[X[X.length-1][1],re]]):[[-1/0,re]]},null);return F.push([A[A.length-1],this.db._maxKey]),this.inAnyRange(F,{includeLowers:!1,includeUppers:!1})},$r.prototype.inAnyRange=function(ht,F){var X=this,re=this._cmp,de=this._ascending,xe=this._descending,Oe=this._min,Be=this._max;if(ht.length===0)return Wc(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&de(bt[0],bt[1])<=0}))return Ti(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ye.InvalidArgument);var Ze=!F||F.includeLowers!==!1,Je=F&&F.includeUppers===!0,rt,He=de;function st(bt,xt){return He(bt[0],xt[0])}try{(rt=ht.reduce(function(bt,xt){for(var kt=0,Ht=bt.length;kt<Ht;++kt){var Xt=bt[kt];if(re(xt[0],Xt[1])<0&&0<re(xt[1],Xt[0])){Xt[0]=Oe(Xt[0],xt[0]),Xt[1]=Be(Xt[1],xt[1]);break}}return kt===Ht&&bt.push(xt),bt},[])).sort(st)}catch{return Ti(this,Cs)}var Ge=0,tt=Je?function(bt){return 0<de(bt,rt[Ge][1])}:function(bt){return 0<=de(bt,rt[Ge][1])},ot=Ze?function(bt){return 0<xe(bt,rt[Ge][0])}:function(bt){return 0<=xe(bt,rt[Ge][0])},Qe=tt,ht=new this.Collection(this,function(){return Ts(rt[0][0],rt[rt.length-1][1],!Ze,!Je)});return ht._ondirectionchange=function(bt){He=bt==="next"?(Qe=tt,de):(Qe=ot,xe),rt.sort(st)},ht._addAlgorithm(function(bt,xt,kt){for(var Ht,Xt=bt.key;Qe(Xt);)if(++Ge===rt.length)return xt(kt),!1;return!tt(Ht=Xt)&&!ot(Ht)||(X._cmp(Xt,rt[Ge][1])===0||X._cmp(Xt,rt[Ge][0])===0||xt(function(){He===de?bt.continue(rt[Ge][0]):bt.continue(rt[Ge][1])}),!1)}),ht},$r.prototype.startsWithAnyOf=function(){var A=G.apply(te,arguments);return A.every(function(F){return typeof F=="string"})?A.length===0?Wc(this):this.inAnyRange(A.map(function(F){return[F,F+qo]})):Ti(this,"startsWithAnyOf() only works with strings")},$r);function $r(){}function os(A){return Re(function(F){return Ll(F),A(F.target.error),!1})}function Ll(A){A.stopPropagation&&A.stopPropagation(),A.preventDefault&&A.preventDefault()}var Kc="storagemutated",Bl="x-storagemutated-1",ja=Wo(null,Kc),Am=(li.prototype._lock=function(){return T(!Ae.global),++this._reculock,this._reculock!==1||Ae.global||(Ae.lockOwnerFor=this),this},li.prototype._unlock=function(){if(T(!Ae.global),--this._reculock==0)for(Ae.global||(Ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var A=this._blockedFuncs.shift();try{Uo(A[1],A[0])}catch{}}return this},li.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},li.prototype.create=function(A){var F=this;if(!this.mode)return this;var X=this.db.idbdb,re=this.db._state.dbOpenError;if(T(!this.idbtrans),!A&&!X)switch(re&&re.name){case"DatabaseClosedError":throw new ye.DatabaseClosed(re);case"MissingAPIError":throw new ye.MissingAPI(re.message,re);default:throw new ye.OpenFailed(re)}if(!this.active)throw new ye.TransactionInactive;return T(this._completion._state===null),(A=this.idbtrans=A||(this.db.core||X).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Re(function(de){Ll(de),F._reject(A.error)}),A.onabort=Re(function(de){Ll(de),F.active&&F._reject(new ye.Abort(A.error)),F.active=!1,F.on("abort").fire(de)}),A.oncomplete=Re(function(){F.active=!1,F._resolve(),"mutatedParts"in A&&ja.storagemutated.fire(A.mutatedParts)}),this},li.prototype._promise=function(A,F,X){var re=this;if(A==="readwrite"&&this.mode!=="readwrite")return Zr(new ye.ReadOnly("Transaction is readonly"));if(!this.active)return Zr(new ye.TransactionInactive);if(this._locked())return new L(function(xe,Oe){re._blockedFuncs.push([function(){re._promise(A,F,X).then(xe,Oe)},Ae])});if(X)return en(function(){var xe=new L(function(Oe,Be){re._lock();var Ze=F(Oe,Be,re);Ze&&Ze.then&&Ze.then(Oe,Be)});return xe.finally(function(){return re._unlock()}),xe._lib=!0,xe});var de=new L(function(xe,Oe){var Be=F(xe,Oe,re);Be&&Be.then&&Be.then(xe,Oe)});return de._lib=!0,de},li.prototype._root=function(){return this.parent?this.parent._root():this},li.prototype.waitFor=function(A){var F,X=this._root(),re=L.resolve(A);X._waitingFor?X._waitingFor=X._waitingFor.then(function(){return re}):(X._waitingFor=re,X._waitingQueue=[],F=X.idbtrans.objectStore(X.storeNames[0]),function xe(){for(++X._spinCount;X._waitingQueue.length;)X._waitingQueue.shift()();X._waitingFor&&(F.get(-1/0).onsuccess=xe)}());var de=X._waitingFor;return new L(function(xe,Oe){re.then(function(Be){return X._waitingQueue.push(Re(xe.bind(null,Be)))},function(Be){return X._waitingQueue.push(Re(Oe.bind(null,Be)))}).finally(function(){X._waitingFor===de&&(X._waitingFor=null)})})},li.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ye.Abort))},li.prototype.table=function(A){var F=this._memoizedTables||(this._memoizedTables={});if(h(F,A))return F[A];var X=this.schema[A];if(!X)throw new ye.NotFound("Table "+A+" not part of transaction");return X=new this.db.Table(A,X,this),X.core=this.db.core.table(A),F[A]=X},li);function li(){}function ks(A,F,X,re,de,xe,Oe){return{name:A,keyPath:F,unique:X,multi:re,auto:de,compound:xe,src:(X&&!Oe?"&":"")+(re?"*":"")+(de?"++":"")+Zf(F)}}function Zf(A){return typeof A=="string"?A:A?"["+[].join.call(A,"+")+"]":""}function Zc(A,F,X){return{name:A,primKey:F,indexes:X,mappedClass:null,idxByName:(re=function(de){return[de.name,de]},X.reduce(function(de,xe,Oe){return Oe=re(xe,Oe),Oe&&(de[Oe[0]]=Oe[1]),de},{}))};var re}var Yc=function(A){try{return A.only([[]]),Yc=function(){return[[]]},[[]]}catch{return Yc=function(){return qo},qo}};function Xc(A){return A==null?function(){}:typeof A=="string"?(F=A).split(".").length===1?function(X){return X[F]}:function(X){return R(X,F)}:function(X){return R(X,A)};var F}function vd(A){return[].slice.call(A)}var bb=0;function ga(A){return A==null?":id":typeof A=="string"?A:"[".concat(A.join("+"),"]")}function $l(A,F,Ze){function re(Qe){if(Qe.type===3)return null;if(Qe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ge=Qe.lower,tt=Qe.upper,ot=Qe.lowerOpen,Qe=Qe.upperOpen;return Ge===void 0?tt===void 0?null:F.upperBound(tt,!!Qe):tt===void 0?F.lowerBound(Ge,!!ot):F.bound(Ge,tt,!!ot,!!Qe)}function de(st){var Ge,tt=st.name;return{name:tt,schema:st,mutate:function(ot){var Qe=ot.trans,ht=ot.type,bt=ot.keys,xt=ot.values,kt=ot.range;return new Promise(function(Ht,Xt){Ht=Re(Ht);var zt=Qe.objectStore(tt),Wt=zt.keyPath==null,Jt=ht==="put"||ht==="add";if(!Jt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var Ut,nn=(bt||xt||{length:1}).length;if(bt&&xt&&bt.length!==xt.length)throw new Error("Given keys array must have same length as given values array.");if(nn===0)return Ht({numFailures:0,failures:{},results:[],lastResult:void 0});function mn(Ma){++Xa,Ll(Ma)}var gn=[],jn=[],Xa=0;if(ht==="deleteRange"){if(kt.type===4)return Ht({numFailures:Xa,failures:jn,results:[],lastResult:void 0});kt.type===3?gn.push(Ut=zt.clear()):gn.push(Ut=zt.delete(re(kt)))}else{var Wt=Jt?Wt?[xt,bt]:[xt,null]:[bt,null],En=Wt[0],sa=Wt[1];if(Jt)for(var ya=0;ya<nn;++ya)gn.push(Ut=sa&&sa[ya]!==void 0?zt[ht](En[ya],sa[ya]):zt[ht](En[ya])),Ut.onerror=mn;else for(ya=0;ya<nn;++ya)gn.push(Ut=zt[ht](En[ya])),Ut.onerror=mn}function so(Ma){Ma=Ma.target.result,gn.forEach(function(Ns,Xo){return Ns.error!=null&&(jn[Xo]=Ns.error)}),Ht({numFailures:Xa,failures:jn,results:ht==="delete"?bt:gn.map(function(Ns){return Ns.result}),lastResult:Ma})}Ut.onerror=function(Ma){mn(Ma),so(Ma)},Ut.onsuccess=so})},getMany:function(ot){var Qe=ot.trans,ht=ot.keys;return new Promise(function(bt,xt){bt=Re(bt);for(var kt,Ht=Qe.objectStore(tt),Xt=ht.length,zt=new Array(Xt),Wt=0,Jt=0,Ut=function(gn){gn=gn.target,zt[gn._pos]=gn.result,++Jt===Wt&&bt(zt)},nn=os(xt),mn=0;mn<Xt;++mn)ht[mn]!=null&&((kt=Ht.get(ht[mn]))._pos=mn,kt.onsuccess=Ut,kt.onerror=nn,++Wt);Wt===0&&bt(zt)})},get:function(ot){var Qe=ot.trans,ht=ot.key;return new Promise(function(bt,xt){bt=Re(bt);var kt=Qe.objectStore(tt).get(ht);kt.onsuccess=function(Ht){return bt(Ht.target.result)},kt.onerror=os(xt)})},query:(Ge=Je,function(ot){return new Promise(function(Qe,ht){Qe=Re(Qe);var bt,xt,kt,Wt=ot.trans,Ht=ot.values,Xt=ot.limit,Ut=ot.query,zt=Xt===1/0?void 0:Xt,Jt=Ut.index,Ut=Ut.range,Wt=Wt.objectStore(tt),Jt=Jt.isPrimaryKey?Wt:Wt.index(Jt.name),Ut=re(Ut);if(Xt===0)return Qe({result:[]});Ge?((zt=Ht?Jt.getAll(Ut,zt):Jt.getAllKeys(Ut,zt)).onsuccess=function(nn){return Qe({result:nn.target.result})},zt.onerror=os(ht)):(bt=0,xt=!Ht&&"openKeyCursor"in Jt?Jt.openKeyCursor(Ut):Jt.openCursor(Ut),kt=[],xt.onsuccess=function(nn){var mn=xt.result;return mn?(kt.push(Ht?mn.value:mn.primaryKey),++bt===Xt?Qe({result:kt}):void mn.continue()):Qe({result:kt})},xt.onerror=os(ht))})}),openCursor:function(ot){var Qe=ot.trans,ht=ot.values,bt=ot.query,xt=ot.reverse,kt=ot.unique;return new Promise(function(Ht,Xt){Ht=Re(Ht);var Jt=bt.index,zt=bt.range,Wt=Qe.objectStore(tt),Wt=Jt.isPrimaryKey?Wt:Wt.index(Jt.name),Jt=xt?kt?"prevunique":"prev":kt?"nextunique":"next",Ut=!ht&&"openKeyCursor"in Wt?Wt.openKeyCursor(re(zt),Jt):Wt.openCursor(re(zt),Jt);Ut.onerror=os(Xt),Ut.onsuccess=Re(function(nn){var mn,gn,jn,Xa,En=Ut.result;En?(En.___id=++bb,En.done=!1,mn=En.continue.bind(En),gn=(gn=En.continuePrimaryKey)&&gn.bind(En),jn=En.advance.bind(En),Xa=function(){throw new Error("Cursor not stopped")},En.trans=Qe,En.stop=En.continue=En.continuePrimaryKey=En.advance=function(){throw new Error("Cursor not started")},En.fail=Re(Xt),En.next=function(){var sa=this,ya=1;return this.start(function(){return ya--?sa.continue():sa.stop()}).then(function(){return sa})},En.start=function(sa){function ya(){if(Ut.result)try{sa()}catch(Ma){En.fail(Ma)}else En.done=!0,En.start=function(){throw new Error("Cursor behind last entry")},En.stop()}var so=new Promise(function(Ma,Ns){Ma=Re(Ma),Ut.onerror=os(Ns),En.fail=Ns,En.stop=function(Xo){En.stop=En.continue=En.continuePrimaryKey=En.advance=Xa,Ma(Xo)}});return Ut.onsuccess=Re(function(Ma){Ut.onsuccess=ya,ya()}),En.continue=mn,En.continuePrimaryKey=gn,En.advance=jn,ya(),so},Ht(En)):Ht(null)},Xt)})},count:function(ot){var Qe=ot.query,ht=ot.trans,bt=Qe.index,xt=Qe.range;return new Promise(function(kt,Ht){var Xt=ht.objectStore(tt),zt=bt.isPrimaryKey?Xt:Xt.index(bt.name),Xt=re(xt),zt=Xt?zt.count(Xt):zt.count();zt.onsuccess=Re(function(Wt){return kt(Wt.target.result)}),zt.onerror=os(Ht)})}}}var xe,Oe,Be,rt=(Oe=Ze,Be=vd((xe=A).objectStoreNames),{schema:{name:xe.name,tables:Be.map(function(st){return Oe.objectStore(st)}).map(function(st){var Ge=st.keyPath,Qe=st.autoIncrement,tt=o(Ge),ot={},Qe={name:st.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ge==null,compound:tt,keyPath:Ge,autoIncrement:Qe,unique:!0,extractKey:Xc(Ge)},indexes:vd(st.indexNames).map(function(ht){return st.index(ht)}).map(function(kt){var bt=kt.name,xt=kt.unique,Ht=kt.multiEntry,kt=kt.keyPath,Ht={name:bt,compound:o(kt),keyPath:kt,unique:xt,multiEntry:Ht,extractKey:Xc(kt)};return ot[ga(kt)]=Ht}),getIndexByKeyPath:function(ht){return ot[ga(ht)]}};return ot[":id"]=Qe.primaryKey,Ge!=null&&(ot[ga(Ge)]=Qe.primaryKey),Qe})},hasGetAll:0<Be.length&&"getAll"in Oe.objectStore(Be[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ze=rt.schema,Je=rt.hasGetAll,rt=Ze.tables.map(de),He={};return rt.forEach(function(st){return He[st.name]=st}),{stack:"dbcore",transaction:A.transaction.bind(A),table:function(st){if(!He[st])throw new Error("Table '".concat(st,"' not found"));return He[st]},MIN_KEY:-1/0,MAX_KEY:Yc(F),schema:Ze}}function Yf(A,F,X,re){var de=X.IDBKeyRange;return X.indexedDB,{dbcore:(re=$l(F,de,re),A.dbcore.reduce(function(xe,Oe){return Oe=Oe.create,r(r({},xe),Oe(xe))},re))}}function Ko(A,re){var X=re.db,re=Yf(A._middlewares,X,A._deps,re);A.core=re.dbcore,A.tables.forEach(function(de){var xe=de.name;A.core.schema.tables.some(function(Oe){return Oe.name===xe})&&(de.core=A.core.table(xe),A[xe]instanceof A.Table&&(A[xe].core=de.core))})}function Xf(A,F,X,re){X.forEach(function(de){var xe=re[de];F.forEach(function(Oe){var Be=function Ze(Je,rt){return w(Je,rt)||(Je=u(Je))&&Ze(Je,rt)}(Oe,de);(!Be||"value"in Be&&Be.value===void 0)&&(Oe===A.Transaction.prototype||Oe instanceof A.Transaction?v(Oe,de,{get:function(){return this.table(de)},set:function(Ze){g(this,de,{value:Ze,writable:!0,configurable:!0,enumerable:!0})}}):Oe[de]=new A.Table(de,xe))})})}function wd(A,F){F.forEach(function(X){for(var re in X)X[re]instanceof A.Table&&delete X[re]})}function Nm(A,F){return A._cfg.version-F._cfg.version}function xd(A,F,X,re){var de=A._dbSchema;X.objectStoreNames.contains("$meta")&&!de.$meta&&(de.$meta=Zc("$meta",wb("")[0],[]),A._storeNames.push("$meta"));var xe=A._createTransaction("readwrite",A._storeNames,de);xe.create(X),xe._completion.catch(re);var Oe=xe._reject.bind(xe),Be=Ae.transless||Ae;en(function(){return Ae.trans=xe,Ae.transless=Be,F!==0?(Ko(A,X),Je=F,((Ze=xe).storeNames.includes("$meta")?Ze.table("$meta").get("version").then(function(rt){return rt??Je}):L.resolve(Je)).then(function(rt){return st=rt,Ge=xe,tt=X,ot=[],rt=(He=A)._versions,Qe=He._dbSchema=Jc(0,He.idbdb,tt),(rt=rt.filter(function(ht){return ht._cfg.version>=st})).length!==0?(rt.forEach(function(ht){ot.push(function(){var bt=Qe,xt=ht._cfg.dbschema;th(He,bt,tt),th(He,xt,tt),Qe=He._dbSchema=xt;var kt=Qf(bt,xt);kt.add.forEach(function(Jt){Rm(tt,Jt[0],Jt[1].primKey,Jt[1].indexes)}),kt.change.forEach(function(Jt){if(Jt.recreate)throw new ye.Upgrade("Not yet support for changing primary key");var Ut=tt.objectStore(Jt.name);Jt.add.forEach(function(nn){return eh(Ut,nn)}),Jt.change.forEach(function(nn){Ut.deleteIndex(nn.name),eh(Ut,nn)}),Jt.del.forEach(function(nn){return Ut.deleteIndex(nn)})});var Ht=ht._cfg.contentUpgrade;if(Ht&&ht._cfg.version>st){Ko(He,tt),Ge._memoizedTables={};var Xt=I(xt);kt.del.forEach(function(Jt){Xt[Jt]=bt[Jt]}),wd(He,[He.Transaction.prototype]),Xf(He,[He.Transaction.prototype],s(Xt),Xt),Ge.schema=Xt;var zt,Wt=J(Ht);return Wt&&In(),kt=L.follow(function(){var Jt;(zt=Ht(Ge))&&Wt&&(Jt=Jn.bind(null,null),zt.then(Jt,Jt))}),zt&&typeof zt.then=="function"?L.resolve(zt):kt.then(function(){return zt})}}),ot.push(function(bt){var xt,kt,Ht=ht._cfg.dbschema;xt=Ht,kt=bt,[].slice.call(kt.db.objectStoreNames).forEach(function(Xt){return xt[Xt]==null&&kt.db.deleteObjectStore(Xt)}),wd(He,[He.Transaction.prototype]),Xf(He,[He.Transaction.prototype],He._storeNames,He._dbSchema),Ge.schema=He._dbSchema}),ot.push(function(bt){He.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(He.idbdb.version/10)===ht._cfg.version?(He.idbdb.deleteObjectStore("$meta"),delete He._dbSchema.$meta,He._storeNames=He._storeNames.filter(function(xt){return xt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?L.resolve(ot.shift()(Ge.idbtrans)).then(ht):L.resolve()}().then(function(){vb(Qe,tt)})):L.resolve();var He,st,Ge,tt,ot,Qe}).catch(Oe)):(s(de).forEach(function(rt){Rm(X,rt,de[rt].primKey,de[rt].indexes)}),Ko(A,X),void L.follow(function(){return A.on.populate.fire(xe)}).catch(Oe));var Ze,Je})}function Jf(A,F){vb(A._dbSchema,F),F.db.version%10!=0||F.objectStoreNames.contains("$meta")||F.db.createObjectStore("$meta").add(Math.ceil(F.db.version/10-1),"version");var X=Jc(0,A.idbdb,F);th(A,A._dbSchema,F);for(var re=0,de=Qf(X,A._dbSchema).change;re<de.length;re++){var xe=function(Oe){if(Oe.change.length||Oe.recreate)return console.warn("Unable to patch indexes of table ".concat(Oe.name," because it has changes on the type of index or primary key.")),{value:void 0};var Be=F.objectStore(Oe.name);Oe.add.forEach(function(Ze){Pe&&console.debug("Dexie upgrade patch: Creating missing index ".concat(Oe.name,".").concat(Ze.src)),eh(Be,Ze)})}(de[re]);if(typeof xe=="object")return xe.value}}function Qf(A,F){var X,re={del:[],add:[],change:[]};for(X in A)F[X]||re.del.push(X);for(X in F){var de=A[X],xe=F[X];if(de){var Oe={name:X,def:xe,recreate:!1,del:[],add:[],change:[]};if(""+(de.primKey.keyPath||"")!=""+(xe.primKey.keyPath||"")||de.primKey.auto!==xe.primKey.auto)Oe.recreate=!0,re.change.push(Oe);else{var Be=de.idxByName,Ze=xe.idxByName,Je=void 0;for(Je in Be)Ze[Je]||Oe.del.push(Je);for(Je in Ze){var rt=Be[Je],He=Ze[Je];rt?rt.src!==He.src&&Oe.change.push(He):Oe.add.push(He)}(0<Oe.del.length||0<Oe.add.length||0<Oe.change.length)&&re.change.push(Oe)}}else re.add.push([X,xe])}return re}function Rm(A,F,X,re){var de=A.db.createObjectStore(F,X.keyPath?{keyPath:X.keyPath,autoIncrement:X.auto}:{autoIncrement:X.auto});return re.forEach(function(xe){return eh(de,xe)}),de}function vb(A,F){s(A).forEach(function(X){F.db.objectStoreNames.contains(X)||(Pe&&console.debug("Dexie: Creating missing table",X),Rm(F,X,A[X].primKey,A[X].indexes))})}function eh(A,F){A.createIndex(F.name,F.keyPath,{unique:F.unique,multiEntry:F.multi})}function Jc(A,F,X){var re={};return _(F.objectStoreNames,0).forEach(function(de){for(var xe=X.objectStore(de),Oe=ks(Zf(Je=xe.keyPath),Je||"",!0,!1,!!xe.autoIncrement,Je&&typeof Je!="string",!0),Be=[],Ze=0;Ze<xe.indexNames.length;++Ze){var rt=xe.index(xe.indexNames[Ze]),Je=rt.keyPath,rt=ks(rt.name,Je,!!rt.unique,!!rt.multiEntry,!1,Je&&typeof Je!="string",!1);Be.push(rt)}re[de]=Zc(de,Oe,Be)}),re}function th(A,F,X){for(var re=X.db.objectStoreNames,de=0;de<re.length;++de){var xe=re[de],Oe=X.objectStore(xe);A._hasGetAll="getAll"in Oe;for(var Be=0;Be<Oe.indexNames.length;++Be){var Ze=Oe.indexNames[Be],Je=Oe.index(Ze).keyPath,rt=typeof Je=="string"?Je:"["+_(Je).join("+")+"]";!F[xe]||(Je=F[xe].idxByName[rt])&&(Je.name=Ze,delete F[xe].idxByName[rt],F[xe].idxByName[Ze]=Je)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(A._hasGetAll=!1)}function wb(A){return A.split(",").map(function(F,X){var re=(F=F.trim()).replace(/([&*]|\+\+)/g,""),de=/^\[/.test(re)?re.match(/^\[(.*)\]$/)[1].split("+"):re;return ks(re,de||null,/\&/.test(F),/\*/.test(F),/\+\+/.test(F),o(de),X===0)})}var iS=(nh.prototype._parseStoresSpec=function(A,F){s(A).forEach(function(X){if(A[X]!==null){var re=wb(A[X]),de=re.shift();if(de.unique=!0,de.multi)throw new ye.Schema("Primary key cannot be multi-valued");re.forEach(function(xe){if(xe.auto)throw new ye.Schema("Only primary key can be marked as autoIncrement (++)");if(!xe.keyPath)throw new ye.Schema("Index must have a name and cannot be an empty string")}),F[X]=Zc(X,de,re)}})},nh.prototype.stores=function(X){var F=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,X):X;var X=F._versions,re={},de={};return X.forEach(function(xe){l(re,xe._cfg.storesSource),de=xe._cfg.dbschema={},xe._parseStoresSpec(re,de)}),F._dbSchema=de,wd(F,[F._allTables,F,F.Transaction.prototype]),Xf(F,[F._allTables,F,F.Transaction.prototype,this._cfg.tables],s(de),de),F._storeNames=s(de),this},nh.prototype.upgrade=function(A){return this._cfg.contentUpgrade=_e(this._cfg.contentUpgrade||Le,A),this},nh);function nh(){}function Im(A,F){var X=A._dbNamesDB;return X||(X=A._dbNamesDB=new As(Dl,{addons:[],indexedDB:A,IDBKeyRange:F})).version(1).stores({dbnames:"name"}),X.table("dbnames")}function rh(A){return A&&typeof A.databases=="function"}function jm(A){return en(function(){return Ae.letThrough=!0,A()})}function Dm(A){return!("from"in A)}var Da=function(A,F){if(!this){var X=new Da;return A&&"d"in A&&l(X,A),X}l(this,arguments.length?{d:1,from:A,to:1<arguments.length?F:A}:{d:0})};function _d(A,F,X){var re=Qn(F,X);if(!isNaN(re)){if(0<re)throw RangeError();if(Dm(A))return l(A,{from:F,to:X,d:1});var de=A.l,re=A.r;if(Qn(X,A.from)<0)return de?_d(de,F,X):A.l={from:F,to:X,d:1,l:null,r:null},_b(A);if(0<Qn(F,A.to))return re?_d(re,F,X):A.r={from:F,to:X,d:1,l:null,r:null},_b(A);Qn(F,A.from)<0&&(A.from=F,A.l=null,A.d=re?re.d+1:1),0<Qn(X,A.to)&&(A.to=X,A.r=null,A.d=A.l?A.l.d+1:1),X=!A.r,de&&!A.l&&zl(A,de),re&&X&&zl(A,re)}}function zl(A,F){Dm(F)||function X(re,Ze){var xe=Ze.from,Oe=Ze.to,Be=Ze.l,Ze=Ze.r;_d(re,xe,Oe),Be&&X(re,Be),Ze&&X(re,Ze)}(A,F)}function xb(A,F){var X=ah(F),re=X.next();if(re.done)return!1;for(var de=re.value,xe=ah(A),Oe=xe.next(de.from),Be=Oe.value;!re.done&&!Oe.done;){if(Qn(Be.from,de.to)<=0&&0<=Qn(Be.to,de.from))return!0;Qn(de.from,Be.from)<0?de=(re=X.next(Be.from)).value:Be=(Oe=xe.next(de.from)).value}return!1}function ah(A){var F=Dm(A)?null:{s:0,n:A};return{next:function(X){for(var re=0<arguments.length;F;)switch(F.s){case 0:if(F.s=1,re)for(;F.n.l&&Qn(X,F.n.from)<0;)F={up:F,n:F.n.l,s:1};else for(;F.n.l;)F={up:F,n:F.n.l,s:1};case 1:if(F.s=2,!re||Qn(X,F.n.to)<=0)return{value:F.n,done:!1};case 2:if(F.n.r){F.s=3,F={up:F,n:F.n.r,s:0};continue}case 3:F=F.up}return{done:!0}}}}function _b(A){var F,X,re=(((F=A.r)===null||F===void 0?void 0:F.d)||0)-(((X=A.l)===null||X===void 0?void 0:X.d)||0),de=1<re?"r":re<-1?"l":"";de&&(F=de=="r"?"l":"r",X=r({},A),re=A[de],A.from=re.from,A.to=re.to,A[de]=re[de],X[de]=re[F],(A[F]=X).d=Mm(X)),A.d=Mm(A)}function Mm(X){var F=X.r,X=X.l;return(F?X?Math.max(F.d,X.d):F.d:X?X.d:0)+1}function ih(A,F){return s(F).forEach(function(X){A[X]?zl(A[X],F[X]):A[X]=function re(de){var xe,Oe,Be={};for(xe in de)h(de,xe)&&(Oe=de[xe],Be[xe]=!Oe||typeof Oe!="object"||U.has(Oe.constructor)?Oe:re(Oe));return Be}(F[X])}),A}function Om(A,F){return A.all||F.all||Object.keys(A).some(function(X){return F[X]&&xb(F[X],A[X])})}m(Da.prototype,((ki={add:function(A){return zl(this,A),this},addKey:function(A){return _d(this,A,A),this},addKeys:function(A){var F=this;return A.forEach(function(X){return _d(F,X,X)}),this},hasKey:function(A){var F=ah(this).next(A).value;return F&&Qn(F.from,A)<=0&&0<=Qn(F.to,A)}})[ae]=function(){return ah(this)},ki));var Ul={},Pm={},Fm=!1;function sh(A){ih(Pm,A),Fm||(Fm=!0,setTimeout(function(){Fm=!1,Lm(Pm,!(Pm={}))},0))}function Lm(A,F){F===void 0&&(F=!1);var X=new Set;if(A.all)for(var re=0,de=Object.values(Ul);re<de.length;re++)Sb(Oe=de[re],A,X,F);else for(var xe in A){var Oe,Be=/^idb\:\/\/(.*)\/(.*)\//.exec(xe);Be&&(xe=Be[1],Be=Be[2],(Oe=Ul["idb://".concat(xe,"/").concat(Be)])&&Sb(Oe,A,X,F))}X.forEach(function(Ze){return Ze()})}function Sb(A,F,X,re){for(var de=[],xe=0,Oe=Object.entries(A.queries.query);xe<Oe.length;xe++){for(var Be=Oe[xe],Ze=Be[0],Je=[],rt=0,He=Be[1];rt<He.length;rt++){var st=He[rt];Om(F,st.obsSet)?st.subscribers.forEach(function(Qe){return X.add(Qe)}):re&&Je.push(st)}re&&de.push([Ze,Je])}if(re)for(var Ge=0,tt=de;Ge<tt.length;Ge++){var ot=tt[Ge],Ze=ot[0],Je=ot[1];A.queries.query[Ze]=Je}}function sS(A){var F=A._state,X=A._deps.indexedDB;if(F.isBeingOpened||A.idbdb)return F.dbReadyPromise.then(function(){return F.dbOpenError?Zr(F.dbOpenError):A});F.isBeingOpened=!0,F.dbOpenError=null,F.openComplete=!1;var re=F.openCanceller,de=Math.round(10*A.verno),xe=!1;function Oe(){if(F.openCanceller!==re)throw new ye.DatabaseClosed("db.open() was cancelled")}function Be(){return new L(function(st,Ge){if(Oe(),!X)throw new ye.MissingAPI;var tt=A.name,ot=F.autoSchema||!de?X.open(tt):X.open(tt,de);if(!ot)throw new ye.MissingAPI;ot.onerror=os(Ge),ot.onblocked=Re(A._fireOnBlocked),ot.onupgradeneeded=Re(function(Qe){var ht;rt=ot.transaction,F.autoSchema&&!A._options.allowEmptyDB?(ot.onerror=Ll,rt.abort(),ot.result.close(),(ht=X.deleteDatabase(tt)).onsuccess=ht.onerror=Re(function(){Ge(new ye.NoSuchDatabase("Database ".concat(tt," doesnt exist")))})):(rt.onerror=os(Ge),Qe=Qe.oldVersion>Math.pow(2,62)?0:Qe.oldVersion,He=Qe<1,A.idbdb=ot.result,xe&&Jf(A,rt),xd(A,Qe/10,rt,Ge))},Ge),ot.onsuccess=Re(function(){rt=null;var Qe,ht,bt,xt,kt,Ht=A.idbdb=ot.result,Xt=_(Ht.objectStoreNames);if(0<Xt.length)try{var zt=Ht.transaction((xt=Xt).length===1?xt[0]:xt,"readonly");if(F.autoSchema)ht=Ht,bt=zt,(Qe=A).verno=ht.version/10,bt=Qe._dbSchema=Jc(0,ht,bt),Qe._storeNames=_(ht.objectStoreNames,0),Xf(Qe,[Qe._allTables],s(bt),bt);else if(th(A,A._dbSchema,zt),((kt=Qf(Jc(0,(kt=A).idbdb,zt),kt._dbSchema)).add.length||kt.change.some(function(Wt){return Wt.add.length||Wt.change.length}))&&!xe)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Ht.close(),de=Ht.version+1,xe=!0,st(Be());Ko(A,zt)}catch{}ao.push(A),Ht.onversionchange=Re(function(Wt){F.vcFired=!0,A.on("versionchange").fire(Wt)}),Ht.onclose=Re(function(Wt){A.on("close").fire(Wt)}),He&&(kt=A._deps,zt=tt,Ht=kt.indexedDB,kt=kt.IDBKeyRange,rh(Ht)||zt===Dl||Im(Ht,kt).put({name:zt}).catch(Le)),st()},Ge)}).catch(function(st){switch(st==null?void 0:st.name){case"UnknownError":if(0<F.PR1398_maxLoop)return F.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),Be();break;case"VersionError":if(0<de)return de=0,Be()}return L.reject(st)})}var Ze,Je=F.dbReadyResolve,rt=null,He=!1;return L.race([re,(typeof navigator>"u"?L.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(st){function Ge(){return indexedDB.databases().finally(st)}Ze=setInterval(Ge,100),Ge()}).finally(function(){return clearInterval(Ze)}):Promise.resolve()).then(Be)]).then(function(){return Oe(),F.onReadyBeingFired=[],L.resolve(jm(function(){return A.on.ready.fire(A.vip)})).then(function st(){if(0<F.onReadyBeingFired.length){var Ge=F.onReadyBeingFired.reduce(_e,Le);return F.onReadyBeingFired=[],L.resolve(jm(function(){return Ge(A.vip)})).then(st)}})}).finally(function(){F.openCanceller===re&&(F.onReadyBeingFired=null,F.isBeingOpened=!1)}).catch(function(st){F.dbOpenError=st;try{rt&&rt.abort()}catch{}return re===F.openCanceller&&A._close(),Zr(st)}).finally(function(){F.openComplete=!0,Je()}).then(function(){var st;return He&&(st={},A.tables.forEach(function(Ge){Ge.schema.indexes.forEach(function(tt){tt.name&&(st["idb://".concat(A.name,"/").concat(Ge.name,"/").concat(tt.name)]=new Da(-1/0,[[[]]]))}),st["idb://".concat(A.name,"/").concat(Ge.name,"/")]=st["idb://".concat(A.name,"/").concat(Ge.name,"/:dels")]=new Da(-1/0,[[[]]])}),ja(Kc).fire(st),Lm(st,!0)),A})}function Sd(A){function F(xe){return A.next(xe)}var X=de(F),re=de(function(xe){return A.throw(xe)});function de(xe){return function(Ze){var Be=xe(Ze),Ze=Be.value;return Be.done?Ze:Ze&&typeof Ze.then=="function"?Ze.then(X,re):o(Ze)?Promise.all(Ze).then(X,re):X(Ze)}}return de(F)()}function Zo(A,F,X){for(var re=o(A)?A.slice():[A],de=0;de<X;++de)re.push(F);return re}var oS={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(A){return r(r({},A),{table:function(F){var X=A.table(F),re=X.schema,de={},xe=[];function Oe(He,st,Ge){var tt=ga(He),ot=de[tt]=de[tt]||[],Qe=He==null?0:typeof He=="string"?1:He.length,ht=0<st,ht=r(r({},Ge),{name:ht?"".concat(tt,"(virtual-from:").concat(Ge.name,")"):Ge.name,lowLevelIndex:Ge,isVirtual:ht,keyTail:st,keyLength:Qe,extractKey:Xc(He),unique:!ht&&Ge.unique});return ot.push(ht),ht.isPrimaryKey||xe.push(ht),1<Qe&&Oe(Qe===2?He[0]:He.slice(0,Qe-1),st+1,Ge),ot.sort(function(bt,xt){return bt.keyTail-xt.keyTail}),ht}F=Oe(re.primaryKey.keyPath,0,re.primaryKey),de[":id"]=[F];for(var Be=0,Ze=re.indexes;Be<Ze.length;Be++){var Je=Ze[Be];Oe(Je.keyPath,0,Je)}function rt(He){var st,Ge=He.query.index;return Ge.isVirtual?r(r({},He),{query:{index:Ge.lowLevelIndex,range:(st=He.query.range,Ge=Ge.keyTail,{type:st.type===1?2:st.type,lower:Zo(st.lower,st.lowerOpen?A.MAX_KEY:A.MIN_KEY,Ge),lowerOpen:!0,upper:Zo(st.upper,st.upperOpen?A.MIN_KEY:A.MAX_KEY,Ge),upperOpen:!0})}}):He}return r(r({},X),{schema:r(r({},re),{primaryKey:F,indexes:xe,getIndexByKeyPath:function(He){return(He=de[ga(He)])&&He[0]}}),count:function(He){return X.count(rt(He))},query:function(He){return X.query(rt(He))},openCursor:function(He){var st=He.query.index,Ge=st.keyTail,tt=st.isVirtual,ot=st.keyLength;return tt?X.openCursor(rt(He)).then(function(ht){return ht&&Qe(ht)}):X.openCursor(He);function Qe(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue(Zo(bt,He.reverse?A.MAX_KEY:A.MIN_KEY,Ge)):He.unique?ht.continue(ht.key.slice(0,ot).concat(He.reverse?A.MIN_KEY:A.MAX_KEY,Ge)):ht.continue()}},continuePrimaryKey:{value:function(bt,xt){ht.continuePrimaryKey(Zo(bt,A.MAX_KEY,Ge),xt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function oh(A,F,X,re){return X=X||{},re=re||"",s(A).forEach(function(de){var xe,Oe,Be;h(F,de)?(xe=A[de],Oe=F[de],typeof xe=="object"&&typeof Oe=="object"&&xe&&Oe?(Be=ie(xe))!==ie(Oe)?X[re+de]=F[de]:Be==="Object"?oh(xe,Oe,X,re+de+"."):xe!==Oe&&(X[re+de]=F[de]):xe!==Oe&&(X[re+de]=F[de])):X[re+de]=void 0}),s(F).forEach(function(de){h(A,de)||(X[re+de]=F[de])}),X}function lh(A,F){return F.type==="delete"?F.keys:F.keys||F.values.map(A.extractKey)}var Eb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(A){return r(r({},A),{table:function(F){var X=A.table(F),re=X.schema.primaryKey;return r(r({},X),{mutate:function(de){var xe=Ae.trans,Oe=xe.table(F).hook,Be=Oe.deleting,Ze=Oe.creating,Je=Oe.updating;switch(de.type){case"add":if(Ze.fire===Le)break;return xe._promise("readwrite",function(){return rt(de)},!0);case"put":if(Ze.fire===Le&&Je.fire===Le)break;return xe._promise("readwrite",function(){return rt(de)},!0);case"delete":if(Be.fire===Le)break;return xe._promise("readwrite",function(){return rt(de)},!0);case"deleteRange":if(Be.fire===Le)break;return xe._promise("readwrite",function(){return function He(st,Ge,tt){return X.query({trans:st,values:!1,query:{index:re,range:Ge},limit:tt}).then(function(ot){var Qe=ot.result;return rt({type:"delete",keys:Qe,trans:st}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Qe.length<tt?{failures:[],numFailures:0,lastResult:void 0}:He(st,r(r({},Ge),{lower:Qe[Qe.length-1],lowerOpen:!0}),tt)})})}(de.trans,de.range,1e4)},!0)}return X.mutate(de);function rt(He){var st,Ge,tt,ot=Ae.trans,Qe=He.keys||lh(re,He);if(!Qe)throw new Error("Keys missing");return(He=He.type==="add"||He.type==="put"?r(r({},He),{keys:Qe}):r({},He)).type!=="delete"&&(He.values=a([],He.values)),He.keys&&(He.keys=a([],He.keys)),st=X,tt=Qe,((Ge=He).type==="add"?Promise.resolve([]):st.getMany({trans:Ge.trans,keys:tt,cache:"immutable"})).then(function(ht){var bt=Qe.map(function(xt,kt){var Ht,Xt,zt,Wt=ht[kt],Jt={onerror:null,onsuccess:null};return He.type==="delete"?Be.fire.call(Jt,xt,Wt,ot):He.type==="add"||Wt===void 0?(Ht=Ze.fire.call(Jt,xt,He.values[kt],ot),xt==null&&Ht!=null&&(He.keys[kt]=xt=Ht,re.outbound||j(He.values[kt],re.keyPath,xt))):(Ht=oh(Wt,He.values[kt]),(Xt=Je.fire.call(Jt,Ht,xt,Wt,ot))&&(zt=He.values[kt],Object.keys(Xt).forEach(function(Ut){h(zt,Ut)?zt[Ut]=Xt[Ut]:j(zt,Ut,Xt[Ut])}))),Jt});return X.mutate(He).then(function(xt){for(var kt=xt.failures,Ht=xt.results,Xt=xt.numFailures,xt=xt.lastResult,zt=0;zt<Qe.length;++zt){var Wt=(Ht||Qe)[zt],Jt=bt[zt];Wt==null?Jt.onerror&&Jt.onerror(kt[zt]):Jt.onsuccess&&Jt.onsuccess(He.type==="put"&&ht[zt]?He.values[zt]:Wt)}return{failures:kt,results:Ht,numFailures:Xt,lastResult:xt}}).catch(function(xt){return bt.forEach(function(kt){return kt.onerror&&kt.onerror(xt)}),Promise.reject(xt)})})}}})}})}};function Bm(A,F,X){try{if(!F||F.keys.length<A.length)return null;for(var re=[],de=0,xe=0;de<F.keys.length&&xe<A.length;++de)Qn(F.keys[de],A[xe])===0&&(re.push(X?W(F.values[de]):F.values[de]),++xe);return re.length===A.length?re:null}catch{return null}}var Cb={stack:"dbcore",level:-1,create:function(A){return{table:function(F){var X=A.table(F);return r(r({},X),{getMany:function(re){if(!re.cache)return X.getMany(re);var de=Bm(re.keys,re.trans._cache,re.cache==="clone");return de?L.resolve(de):X.getMany(re).then(function(xe){return re.trans._cache={keys:re.keys,values:re.cache==="clone"?W(xe):xe},xe})},mutate:function(re){return re.type!=="add"&&(re.trans._cache=null),X.mutate(re)}})}}}};function Vl(A,F){return A.trans.mode==="readonly"&&!!A.subscr&&!A.trans.explicit&&A.trans.db._options.cache!=="disabled"&&!F.schema.primaryKey.outbound}function Tb(A,F){switch(A){case"query":return F.values&&!F.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var lS={stack:"dbcore",level:0,name:"Observability",create:function(A){var F=A.schema.name,X=new Da(A.MIN_KEY,A.MAX_KEY);return r(r({},A),{transaction:function(re,de,xe){if(Ae.subscr&&de!=="readonly")throw new ye.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ae.querier));return A.transaction(re,de,xe)},table:function(re){var de=A.table(re),xe=de.schema,Oe=xe.primaryKey,He=xe.indexes,Be=Oe.extractKey,Ze=Oe.outbound,Je=Oe.autoIncrement&&He.filter(function(Ge){return Ge.compound&&Ge.keyPath.includes(Oe.keyPath)}),rt=r(r({},de),{mutate:function(Ge){function tt(Ut){return Ut="idb://".concat(F,"/").concat(re,"/").concat(Ut),xt[Ut]||(xt[Ut]=new Da)}var ot,Qe,ht,bt=Ge.trans,xt=Ge.mutatedParts||(Ge.mutatedParts={}),kt=tt(""),Ht=tt(":dels"),Xt=Ge.type,Jt=Ge.type==="deleteRange"?[Ge.range]:Ge.type==="delete"?[Ge.keys]:Ge.values.length<50?[lh(Oe,Ge).filter(function(Ut){return Ut}),Ge.values]:[],zt=Jt[0],Wt=Jt[1],Jt=Ge.trans._cache;return o(zt)?(kt.addKeys(zt),(Jt=Xt==="delete"||zt.length===Wt.length?Bm(zt,Jt):null)||Ht.addKeys(zt),(Jt||Wt)&&(ot=tt,Qe=Jt,ht=Wt,xe.indexes.forEach(function(Ut){var nn=ot(Ut.name||"");function mn(jn){return jn!=null?Ut.extractKey(jn):null}function gn(jn){return Ut.multiEntry&&o(jn)?jn.forEach(function(Xa){return nn.addKey(Xa)}):nn.addKey(jn)}(Qe||ht).forEach(function(jn,sa){var En=Qe&&mn(Qe[sa]),sa=ht&&mn(ht[sa]);Qn(En,sa)!==0&&(En!=null&&gn(En),sa!=null&&gn(sa))})}))):zt?(Wt={from:(Wt=zt.lower)!==null&&Wt!==void 0?Wt:A.MIN_KEY,to:(Wt=zt.upper)!==null&&Wt!==void 0?Wt:A.MAX_KEY},Ht.add(Wt),kt.add(Wt)):(kt.add(X),Ht.add(X),xe.indexes.forEach(function(Ut){return tt(Ut.name).add(X)})),de.mutate(Ge).then(function(Ut){return!zt||Ge.type!=="add"&&Ge.type!=="put"||(kt.addKeys(Ut.results),Je&&Je.forEach(function(nn){for(var mn=Ge.values.map(function(En){return nn.extractKey(En)}),gn=nn.keyPath.findIndex(function(En){return En===Oe.keyPath}),jn=0,Xa=Ut.results.length;jn<Xa;++jn)mn[jn][gn]=Ut.results[jn];tt(nn.name).addKeys(mn)})),bt.mutatedParts=ih(bt.mutatedParts||{},xt),Ut})}}),He=function(tt){var ot=tt.query,tt=ot.index,ot=ot.range;return[tt,new Da((tt=ot.lower)!==null&&tt!==void 0?tt:A.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:A.MAX_KEY)]},st={get:function(Ge){return[Oe,new Da(Ge.key)]},getMany:function(Ge){return[Oe,new Da().addKeys(Ge.keys)]},count:He,query:He,openCursor:He};return s(st).forEach(function(Ge){rt[Ge]=function(tt){var ot=Ae.subscr,Qe=!!ot,ht=Vl(Ae,de)&&Tb(Ge,tt)?tt.obsSet={}:ot;if(Qe){var bt=function(Wt){return Wt="idb://".concat(F,"/").concat(re,"/").concat(Wt),ht[Wt]||(ht[Wt]=new Da)},xt=bt(""),kt=bt(":dels"),ot=st[Ge](tt),Qe=ot[0],ot=ot[1];if((Ge==="query"&&Qe.isPrimaryKey&&!tt.values?kt:bt(Qe.name||"")).add(ot),!Qe.isPrimaryKey){if(Ge!=="count"){var Ht=Ge==="query"&&Ze&&tt.values&&de.query(r(r({},tt),{values:!1}));return de[Ge].apply(this,arguments).then(function(Wt){if(Ge==="query"){if(Ze&&tt.values)return Ht.then(function(mn){return mn=mn.result,xt.addKeys(mn),Wt});var Jt=tt.values?Wt.result.map(Be):Wt.result;(tt.values?xt:kt).addKeys(Jt)}else if(Ge==="openCursor"){var Ut=Wt,nn=tt.values;return Ut&&Object.create(Ut,{key:{get:function(){return kt.addKey(Ut.primaryKey),Ut.key}},primaryKey:{get:function(){var mn=Ut.primaryKey;return kt.addKey(mn),mn}},value:{get:function(){return nn&&xt.addKey(Ut.primaryKey),Ut.value}}})}return Wt})}kt.add(X)}}return de[Ge].apply(this,arguments)}}),rt}})}};function kb(A,F,X){if(X.numFailures===0)return F;if(F.type==="deleteRange")return null;var re=F.keys?F.keys.length:"values"in F&&F.values?F.values.length:1;return X.numFailures===re?null:(F=r({},F),o(F.keys)&&(F.keys=F.keys.filter(function(de,xe){return!(xe in X.failures)})),"values"in F&&o(F.values)&&(F.values=F.values.filter(function(de,xe){return!(xe in X.failures)})),F)}function ch(A,F){return X=A,((re=F).lower===void 0||(re.lowerOpen?0<Qn(X,re.lower):0<=Qn(X,re.lower)))&&(A=A,(F=F).upper===void 0||(F.upperOpen?Qn(A,F.upper)<0:Qn(A,F.upper)<=0));var X,re}function $m(A,F,st,re,de,xe){if(!st||st.length===0)return A;var Oe=F.query.index,Be=Oe.multiEntry,Ze=F.query.range,Je=re.schema.primaryKey.extractKey,rt=Oe.extractKey,He=(Oe.lowLevelIndex||Oe).extractKey,st=st.reduce(function(Ge,tt){var ot=Ge,Qe=[];if(tt.type==="add"||tt.type==="put")for(var ht=new Da,bt=tt.values.length-1;0<=bt;--bt){var xt,kt=tt.values[bt],Ht=Je(kt);ht.hasKey(Ht)||(xt=rt(kt),(Be&&o(xt)?xt.some(function(Ut){return ch(Ut,Ze)}):ch(xt,Ze))&&(ht.addKey(Ht),Qe.push(kt)))}switch(tt.type){case"add":var Xt=new Da().addKeys(F.values?Ge.map(function(nn){return Je(nn)}):Ge),ot=Ge.concat(F.values?Qe.filter(function(nn){return nn=Je(nn),!Xt.hasKey(nn)&&(Xt.addKey(nn),!0)}):Qe.map(function(nn){return Je(nn)}).filter(function(nn){return!Xt.hasKey(nn)&&(Xt.addKey(nn),!0)}));break;case"put":var zt=new Da().addKeys(tt.values.map(function(nn){return Je(nn)}));ot=Ge.filter(function(nn){return!zt.hasKey(F.values?Je(nn):nn)}).concat(F.values?Qe:Qe.map(function(nn){return Je(nn)}));break;case"delete":var Wt=new Da().addKeys(tt.keys);ot=Ge.filter(function(nn){return!Wt.hasKey(F.values?Je(nn):nn)});break;case"deleteRange":var Jt=tt.range;ot=Ge.filter(function(nn){return!ch(Je(nn),Jt)})}return ot},A);return st===A?A:(st.sort(function(Ge,tt){return Qn(He(Ge),He(tt))||Qn(Je(Ge),Je(tt))}),F.limit&&F.limit<1/0&&(st.length>F.limit?st.length=F.limit:A.length===F.limit&&st.length<F.limit&&(de.dirty=!0)),xe?Object.freeze(st):st)}function Qc(A,F){return Qn(A.lower,F.lower)===0&&Qn(A.upper,F.upper)===0&&!!A.lowerOpen==!!F.lowerOpen&&!!A.upperOpen==!!F.upperOpen}function Ed(A,F){return function(X,re,de,xe){if(X===void 0)return re!==void 0?-1:0;if(re===void 0)return 1;if((re=Qn(X,re))===0){if(de&&xe)return 0;if(de)return 1;if(xe)return-1}return re}(A.lower,F.lower,A.lowerOpen,F.lowerOpen)<=0&&0<=function(X,re,de,xe){if(X===void 0)return re!==void 0?1:0;if(re===void 0)return-1;if((re=Qn(X,re))===0){if(de&&xe)return 0;if(de)return-1;if(xe)return 1}return re}(A.upper,F.upper,A.upperOpen,F.upperOpen)}function cS(A,F,X,re){A.subscribers.add(X),re.addEventListener("abort",function(){var de,xe;A.subscribers.delete(X),A.subscribers.size===0&&(de=A,xe=F,setTimeout(function(){de.subscribers.size===0&&q(xe,de)},3e3))})}var uh={stack:"dbcore",level:0,name:"Cache",create:function(A){var F=A.schema.name;return r(r({},A),{transaction:function(X,re,de){var xe,Oe,Be=A.transaction(X,re,de);return re==="readwrite"&&(Oe=(xe=new AbortController).signal,de=function(Ze){return function(){if(xe.abort(),re==="readwrite"){for(var Je=new Set,rt=0,He=X;rt<He.length;rt++){var st=He[rt],Ge=Ul["idb://".concat(F,"/").concat(st)];if(Ge){var tt=A.table(st),ot=Ge.optimisticOps.filter(function(nn){return nn.trans===Be});if(Be._explicit&&Ze&&Be.mutatedParts)for(var Qe=0,ht=Object.values(Ge.queries.query);Qe<ht.length;Qe++)for(var bt=0,xt=(Xt=ht[Qe]).slice();bt<xt.length;bt++)Om((zt=xt[bt]).obsSet,Be.mutatedParts)&&(q(Xt,zt),zt.subscribers.forEach(function(nn){return Je.add(nn)}));else if(0<ot.length){Ge.optimisticOps=Ge.optimisticOps.filter(function(nn){return nn.trans!==Be});for(var kt=0,Ht=Object.values(Ge.queries.query);kt<Ht.length;kt++)for(var Xt,zt,Wt,Jt=0,Ut=(Xt=Ht[kt]).slice();Jt<Ut.length;Jt++)(zt=Ut[Jt]).res!=null&&Be.mutatedParts&&(Ze&&!zt.dirty?(Wt=Object.isFrozen(zt.res),Wt=$m(zt.res,zt.req,ot,tt,zt,Wt),zt.dirty?(q(Xt,zt),zt.subscribers.forEach(function(nn){return Je.add(nn)})):Wt!==zt.res&&(zt.res=Wt,zt.promise=L.resolve({result:Wt}))):(zt.dirty&&q(Xt,zt),zt.subscribers.forEach(function(nn){return Je.add(nn)})))}}}Je.forEach(function(nn){return nn()})}}},Be.addEventListener("abort",de(!1),{signal:Oe}),Be.addEventListener("error",de(!1),{signal:Oe}),Be.addEventListener("complete",de(!0),{signal:Oe})),Be},table:function(X){var re=A.table(X),de=re.schema.primaryKey;return r(r({},re),{mutate:function(xe){var Oe=Ae.trans;if(de.outbound||Oe.db._options.cache==="disabled"||Oe.explicit||Oe.idbtrans.mode!=="readwrite")return re.mutate(xe);var Be=Ul["idb://".concat(F,"/").concat(X)];return Be?(Oe=re.mutate(xe),xe.type!=="add"&&xe.type!=="put"||!(50<=xe.values.length||lh(de,xe).some(function(Ze){return Ze==null}))?(Be.optimisticOps.push(xe),xe.mutatedParts&&sh(xe.mutatedParts),Oe.then(function(Ze){0<Ze.numFailures&&(q(Be.optimisticOps,xe),(Ze=kb(0,xe,Ze))&&Be.optimisticOps.push(Ze),xe.mutatedParts&&sh(xe.mutatedParts))}),Oe.catch(function(){q(Be.optimisticOps,xe),xe.mutatedParts&&sh(xe.mutatedParts)})):Oe.then(function(Ze){var Je=kb(0,r(r({},xe),{values:xe.values.map(function(rt,He){var st;return Ze.failures[He]?rt:(rt=(st=de.keyPath)!==null&&st!==void 0&&st.includes(".")?W(rt):r({},rt),j(rt,de.keyPath,Ze.results[He]),rt)})}),Ze);Be.optimisticOps.push(Je),queueMicrotask(function(){return xe.mutatedParts&&sh(xe.mutatedParts)})}),Oe):re.mutate(xe)},query:function(xe){if(!Vl(Ae,re)||!Tb("query",xe))return re.query(xe);var Oe=((Je=Ae.trans)===null||Je===void 0?void 0:Je.db._options.cache)==="immutable",He=Ae,Be=He.requery,Ze=He.signal,Je=function(tt,ot,Qe,ht){var bt=Ul["idb://".concat(tt,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Qe]))return[null,!1,bt,null];var xt=ot[(ht.query?ht.query.index.name:null)||""];if(!xt)return[null,!1,bt,null];switch(Qe){case"query":var kt=xt.find(function(Ht){return Ht.req.limit===ht.limit&&Ht.req.values===ht.values&&Qc(Ht.req.query.range,ht.query.range)});return kt?[kt,!0,bt,xt]:[xt.find(function(Ht){return("limit"in Ht.req?Ht.req.limit:1/0)>=ht.limit&&(!ht.values||Ht.req.values)&&Ed(Ht.req.query.range,ht.query.range)}),!1,bt,xt];case"count":return kt=xt.find(function(Ht){return Qc(Ht.req.query.range,ht.query.range)}),[kt,!!kt,bt,xt]}}(F,X,"query",xe),rt=Je[0],He=Je[1],st=Je[2],Ge=Je[3];return rt&&He?rt.obsSet=xe.obsSet:(He=re.query(xe).then(function(tt){var ot=tt.result;if(rt&&(rt.res=ot),Oe){for(var Qe=0,ht=ot.length;Qe<ht;++Qe)Object.freeze(ot[Qe]);Object.freeze(ot)}else tt.result=W(ot);return tt}).catch(function(tt){return Ge&&rt&&q(Ge,rt),Promise.reject(tt)}),rt={obsSet:xe.obsSet,promise:He,subscribers:new Set,type:"query",req:xe,dirty:!1},Ge?Ge.push(rt):(Ge=[rt],(st=st||(Ul["idb://".concat(F,"/").concat(X)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[xe.query.index.name||""]=Ge)),cS(rt,Ge,Be,Ze),rt.promise.then(function(tt){return{result:$m(tt.result,xe,st==null?void 0:st.optimisticOps,re,rt,Oe)}})}})}})}};function Cd(A,F){return new Proxy(A,{get:function(X,re,de){return re==="db"?F:Reflect.get(X,re,de)}})}var As=(zr.prototype.version=function(A){if(isNaN(A)||A<.1)throw new ye.Type("Given version is not a positive number");if(A=Math.round(10*A)/10,this.idbdb||this._state.isBeingOpened)throw new ye.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,A);var F=this._versions,X=F.filter(function(re){return re._cfg.version===A})[0];return X||(X=new this.Version(A),F.push(X),F.sort(Nm),X.stores({}),this._state.autoSchema=!1,X)},zr.prototype._whenReady=function(A){var F=this;return this.idbdb&&(this._state.openComplete||Ae.letThrough||this._vip)?A():new L(function(X,re){if(F._state.openComplete)return re(new ye.DatabaseClosed(F._state.dbOpenError));if(!F._state.isBeingOpened){if(!F._state.autoOpen)return void re(new ye.DatabaseClosed);F.open().catch(Le)}F._state.dbReadyPromise.then(X,re)}).then(A)},zr.prototype.use=function(A){var F=A.stack,X=A.create,re=A.level,de=A.name;return de&&this.unuse({stack:F,name:de}),A=this._middlewares[F]||(this._middlewares[F]=[]),A.push({stack:F,create:X,level:re??10,name:de}),A.sort(function(xe,Oe){return xe.level-Oe.level}),this},zr.prototype.unuse=function(A){var F=A.stack,X=A.name,re=A.create;return F&&this._middlewares[F]&&(this._middlewares[F]=this._middlewares[F].filter(function(de){return re?de.create!==re:!!X&&de.name!==X})),this},zr.prototype.open=function(){var A=this;return Uo(we,function(){return sS(A)})},zr.prototype._close=function(){var A=this._state,F=ao.indexOf(this);if(0<=F&&ao.splice(F,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}A.isBeingOpened||(A.dbReadyPromise=new L(function(X){A.dbReadyResolve=X}),A.openCanceller=new L(function(X,re){A.cancelOpen=re}))},zr.prototype.close=function(X){var F=(X===void 0?{disableAutoOpen:!0}:X).disableAutoOpen,X=this._state;F?(X.isBeingOpened&&X.cancelOpen(new ye.DatabaseClosed),this._close(),X.autoOpen=!1,X.dbOpenError=new ye.DatabaseClosed):(this._close(),X.autoOpen=this._options.autoOpen||X.isBeingOpened,X.openComplete=!1,X.dbOpenError=null)},zr.prototype.delete=function(A){var F=this;A===void 0&&(A={disableAutoOpen:!0});var X=0<arguments.length&&typeof arguments[0]!="object",re=this._state;return new L(function(de,xe){function Oe(){F.close(A);var Be=F._deps.indexedDB.deleteDatabase(F.name);Be.onsuccess=Re(function(){var Ze,Je,rt;Ze=F._deps,Je=F.name,rt=Ze.indexedDB,Ze=Ze.IDBKeyRange,rh(rt)||Je===Dl||Im(rt,Ze).delete(Je).catch(Le),de()}),Be.onerror=os(xe),Be.onblocked=F._fireOnBlocked}if(X)throw new ye.InvalidArgument("Invalid closeOptions argument to db.delete()");re.isBeingOpened?re.dbReadyPromise.then(Oe):Oe()})},zr.prototype.backendDB=function(){return this.idbdb},zr.prototype.isOpen=function(){return this.idbdb!==null},zr.prototype.hasBeenClosed=function(){var A=this._state.dbOpenError;return A&&A.name==="DatabaseClosed"},zr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},zr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(zr.prototype,"tables",{get:function(){var A=this;return s(this._allTables).map(function(F){return A._allTables[F]})},enumerable:!1,configurable:!0}),zr.prototype.transaction=function(){var A=(function(F,X,re){var de=arguments.length;if(de<2)throw new ye.InvalidArgument("Too few arguments");for(var xe=new Array(de-1);--de;)xe[de-1]=arguments[de];return re=xe.pop(),[F,O(xe),re]}).apply(this,arguments);return this._transaction.apply(this,A)},zr.prototype._transaction=function(A,F,X){var re=this,de=Ae.trans;de&&de.db===this&&A.indexOf("!")===-1||(de=null);var xe,Oe,Be=A.indexOf("?")!==-1;A=A.replace("!","").replace("?","");try{if(Oe=F.map(function(Je){if(Je=Je instanceof re.Table?Je.name:Je,typeof Je!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Je}),A=="r"||A===ss)xe=ss;else{if(A!="rw"&&A!=bd)throw new ye.InvalidArgument("Invalid transaction mode: "+A);xe=bd}if(de){if(de.mode===ss&&xe===bd){if(!Be)throw new ye.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");de=null}de&&Oe.forEach(function(Je){if(de&&de.storeNames.indexOf(Je)===-1){if(!Be)throw new ye.SubTransaction("Table "+Je+" not included in parent transaction.");de=null}}),Be&&de&&!de.active&&(de=null)}}catch(Je){return de?de._promise(null,function(rt,He){He(Je)}):Zr(Je)}var Ze=(function Je(rt,He,st,Ge,tt){return L.resolve().then(function(){var ot=Ae.transless||Ae,Qe=rt._createTransaction(He,st,rt._dbSchema,Ge);if(Qe.explicit=!0,ot={trans:Qe,transless:ot},Ge)Qe.idbtrans=Ge.idbtrans;else try{Qe.create(),Qe.idbtrans._explicit=!0,rt._state.PR1398_maxLoop=3}catch(xt){return xt.name===Ne.InvalidState&&rt.isOpen()&&0<--rt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),rt.close({disableAutoOpen:!1}),rt.open().then(function(){return Je(rt,He,st,null,tt)})):Zr(xt)}var ht,bt=J(tt);return bt&&In(),ot=L.follow(function(){var xt;(ht=tt.call(Qe,Qe))&&(bt?(xt=Jn.bind(null,null),ht.then(xt,xt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=Sd(ht)))},ot),(ht&&typeof ht.then=="function"?L.resolve(ht).then(function(xt){return Qe.active?xt:Zr(new ye.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(xt){return Ge&&Qe._resolve(),Qe._completion.then(function(){return xt})}).catch(function(xt){return Qe._reject(xt),Zr(xt)})})}).bind(null,this,xe,Oe,de,X);return de?de._promise(xe,Ze,"lock"):Ae.trans?Uo(Ae.transless,function(){return re._whenReady(Ze)}):this._whenReady(Ze)},zr.prototype.table=function(A){if(!h(this._allTables,A))throw new ye.InvalidTable("Table ".concat(A," does not exist"));return this._allTables[A]},zr);function zr(A,F){var X=this;this._middlewares={},this.verno=0;var re=zr.dependencies;this._options=F=r({addons:zr.addons,autoOpen:!0,indexedDB:re.indexedDB,IDBKeyRange:re.IDBKeyRange,cache:"cloned"},F),this._deps={indexedDB:F.indexedDB,IDBKeyRange:F.IDBKeyRange},re=F.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var de,xe,Oe,Be,Ze,Je={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:F.autoOpen};Je.dbReadyPromise=new L(function(He){Je.dbReadyResolve=He}),Je.openCanceller=new L(function(He,st){Je.cancelOpen=st}),this._state=Je,this.name=A,this.on=Wo(this,"populate","blocked","versionchange","close",{ready:[_e,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(He){return function(st,Ge){zr.vip(function(){var tt,ot=X._state;ot.openComplete?(ot.dbOpenError||L.resolve().then(st),Ge&&He(st)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(st),Ge&&He(st)):(He(st),tt=X,Ge||He(function Qe(){tt.on.ready.unsubscribe(st),tt.on.ready.unsubscribe(Qe)}))})}}),this.Collection=(de=this,Uc(Gc.prototype,function(ht,Qe){this.db=de;var Ge=Ml,tt=null;if(Qe)try{Ge=Qe()}catch(bt){tt=bt}var ot=ht._ctx,Qe=ot.table,ht=Qe.hook.reading.fire;this._ctx={table:Qe,index:ot.index,isPrimKey:!ot.index||Qe.schema.primKey.keyPath&&ot.index===Qe.schema.primKey.name,range:Ge,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:tt,or:ot.or,valueMapper:ht!==Ie?ht:null}})),this.Table=(xe=this,Uc(Sm.prototype,function(He,st,Ge){this.db=xe,this._tx=Ge,this.name=He,this.schema=st,this.hook=xe._allTables[He]?xe._allTables[He].hook:Wo(null,{creating:[Ee,Le],reading:[B,Ie],updating:[oe,Le],deleting:[ce,Le]})})),this.Transaction=(Oe=this,Uc(Am.prototype,function(He,st,Ge,tt,ot){var Qe=this;this.db=Oe,this.mode=He,this.storeNames=st,this.schema=Ge,this.chromeTransactionDurability=tt,this.idbtrans=null,this.on=Wo(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(ht,bt){Qe._resolve=ht,Qe._reject=bt}),this._completion.then(function(){Qe.active=!1,Qe.on.complete.fire()},function(ht){var bt=Qe.active;return Qe.active=!1,Qe.on.error.fire(ht),Qe.parent?Qe.parent._reject(ht):bt&&Qe.idbtrans&&Qe.idbtrans.abort(),Zr(ht)})})),this.Version=(Be=this,Uc(iS.prototype,function(He){this.db=Be,this._cfg={version:He,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ze=this,Uc(Fl.prototype,function(He,st,Ge){if(this.db=Ze,this._ctx={table:He,index:st===":id"?null:st,or:Ge},this._cmp=this._ascending=Qn,this._descending=function(tt,ot){return Qn(ot,tt)},this._max=function(tt,ot){return 0<Qn(tt,ot)?tt:ot},this._min=function(tt,ot){return Qn(tt,ot)<0?tt:ot},this._IDBKeyRange=Ze._deps.IDBKeyRange,!this._IDBKeyRange)throw new ye.MissingAPI})),this.on("versionchange",function(He){0<He.newVersion?console.warn("Another connection wants to upgrade database '".concat(X.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(X.name,"'. Closing db now to resume the delete request.")),X.close({disableAutoOpen:!1})}),this.on("blocked",function(He){!He.newVersion||He.newVersion<He.oldVersion?console.warn("Dexie.delete('".concat(X.name,"') was blocked")):console.warn("Upgrade '".concat(X.name,"' blocked by other connection holding version ").concat(He.oldVersion/10))}),this._maxKey=Yc(F.IDBKeyRange),this._createTransaction=function(He,st,Ge,tt){return new X.Transaction(He,st,Ge,X._options.chromeTransactionDurability,tt)},this._fireOnBlocked=function(He){X.on("blocked").fire(He),ao.filter(function(st){return st.name===X.name&&st!==X&&!st._state.vcFired}).map(function(st){return st.on("versionchange").fire(He)})},this.use(Cb),this.use(uh),this.use(lS),this.use(oS),this.use(Eb);var rt=new Proxy(this,{get:function(He,st,Ge){if(st==="_vip")return!0;if(st==="table")return function(ot){return Cd(X.table(ot),rt)};var tt=Reflect.get(He,st,Ge);return tt instanceof Sm?Cd(tt,rt):st==="tables"?tt.map(function(ot){return Cd(ot,rt)}):st==="_createTransaction"?function(){return Cd(tt.apply(this,arguments),rt)}:tt}});this.vip=rt,re.forEach(function(He){return He(X)})}var eu,ki=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ab=(dh.prototype.subscribe=function(A,F,X){return this._subscribe(A&&typeof A!="function"?A:{next:A,error:F,complete:X})},dh.prototype[ki]=function(){return this},dh);function dh(A){this._subscribe=A}try{eu={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{eu={indexedDB:null,IDBKeyRange:null}}function Nb(A){var F,X=!1,re=new Ab(function(de){var xe=J(A),Oe,Be=!1,Ze={},Je={},rt={get closed(){return Be},unsubscribe:function(){Be||(Be=!0,Oe&&Oe.abort(),He&&ja.storagemutated.unsubscribe(Ge))}};de.start&&de.start(rt);var He=!1,st=function(){return Ho(tt)},Ge=function(ot){ih(Ze,ot),Om(Je,Ze)&&st()},tt=function(){var ot,Qe,ht;!Be&&eu.indexedDB&&(Ze={},ot={},Oe&&Oe.abort(),Oe=new AbortController,ht=function(bt){var xt=K();try{xe&&In();var kt=en(A,bt);return kt=xe?kt.finally(Jn):kt}finally{xt&&H()}}(Qe={subscr:ot,signal:Oe.signal,requery:st,querier:A,trans:null}),Promise.resolve(ht).then(function(bt){X=!0,F=bt,Be||Qe.signal.aborted||(Ze={},function(xt){for(var kt in xt)if(h(xt,kt))return;return 1}(Je=ot)||He||(ja(Kc,Ge),He=!0),Ho(function(){return!Be&&de.next&&de.next(bt)}))},function(bt){X=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||Be||Ho(function(){Be||de.error&&de.error(bt)})}))};return setTimeout(st,0),rt});return re.hasValue=function(){return X},re.getValue=function(){return F},re}var Hl=As;function zm(A){var F=Yo;try{Yo=!0,ja.storagemutated.fire(A),Lm(A,!0)}finally{Yo=F}}m(Hl,r(r({},Xe),{delete:function(A){return new Hl(A,{addons:[]}).delete()},exists:function(A){return new Hl(A,{addons:[]}).open().then(function(F){return F.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(A){try{return F=Hl.dependencies,X=F.indexedDB,F=F.IDBKeyRange,(rh(X)?Promise.resolve(X.databases()).then(function(re){return re.map(function(de){return de.name}).filter(function(de){return de!==Dl})}):Im(X,F).toCollection().primaryKeys()).then(A)}catch{return Zr(new ye.MissingAPI)}var F,X},defineClass:function(){return function(A){l(this,A)}},ignoreTransaction:function(A){return Ae.trans?Uo(Ae.transless,A):A()},vip:jm,async:function(A){return function(){try{var F=Sd(A.apply(this,arguments));return F&&typeof F.then=="function"?F:L.resolve(F)}catch(X){return Zr(X)}}},spawn:function(A,F,X){try{var re=Sd(A.apply(X,F||[]));return re&&typeof re.then=="function"?re:L.resolve(re)}catch(de){return Zr(de)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(A,F){return F=L.resolve(typeof A=="function"?Hl.ignoreTransaction(A):A).timeout(F||6e4),Ae.trans?Ae.trans.waitFor(F):F},Promise:L,debug:{get:function(){return Pe},set:function(A){ke(A)}},derive:b,extend:l,props:m,override:E,Events:Wo,on:ja,liveQuery:Nb,extendObservabilitySet:ih,getByKeyPath:R,setByKeyPath:j,delByKeyPath:function(A,F){typeof F=="string"?j(A,F,void 0):"length"in F&&[].map.call(F,function(X){j(A,X,void 0)})},shallowClone:I,deepClone:W,getObjectDiff:oh,cmp:Qn,asap:k,minKey:-1/0,addons:[],connections:ao,errnames:Ne,dependencies:eu,cache:Ul,semVer:"4.0.11",version:"4.0.11".split(".").map(function(A){return parseInt(A)}).reduce(function(A,F,X){return A+F/Math.pow(10,2*X)})})),Hl.maxKey=Yc(Hl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(ja(Kc,function(A){Yo||(A=new CustomEvent(Bl,{detail:A}),Yo=!0,dispatchEvent(A),Yo=!1)}),addEventListener(Bl,function(A){A=A.detail,Yo||zm(A)}));var tu,Yo=!1,ci=function(){};return typeof BroadcastChannel<"u"&&((ci=function(){(tu=new BroadcastChannel(Bl)).onmessage=function(A){return A.data&&zm(A.data)}})(),typeof tu.unref=="function"&&tu.unref(),ja(Kc,function(A){Yo||tu.postMessage(A)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(A){if(!As.disableBfCache&&A.persisted){Pe&&console.debug("Dexie: handling persisted pagehide"),tu!=null&&tu.close();for(var F=0,X=ao;F<X.length;F++)X[F].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(A){!As.disableBfCache&&A.persisted&&(Pe&&console.debug("Dexie: handling persisted pageshow"),ci(),zm({all:new Da(-1/0,[[]])}))})),L.rejectionMapper=function(A,F){return!A||A instanceof se||A instanceof TypeError||A instanceof SyntaxError||!A.name||!Fe[A.name]?A:(F=new Fe[A.name](F||A.message,A),"stack"in A&&v(F,"stack",{get:function(){return this.inner.stack}}),F)},ke(Pe),r(As,Object.freeze({__proto__:null,Dexie:As,liveQuery:Nb,Entity:Gf,cmp:Qn,PropModification:qc,replacePrefix:function(A,F){return new qc({replacePrefix:[A,F]})},add:function(A){return new qc({add:A})},remove:function(A){return new qc({remove:A})},default:As,RangeSet:Da,mergeRanges:zl,rangesOverlap:xb}),{default:As}),As})}(Ow)),Ow.exports}var dX=uX();const DT=xi(dX),j4=Symbol.for("Dexie"),Qw=globalThis[j4]||(globalThis[j4]=DT);if(DT.semVer!==Qw.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${DT.semVer} and ${Qw.semVer}`);const{liveQuery:S3e,mergeRanges:E3e,rangesOverlap:C3e,RangeSet:T3e,cmp:k3e,Entity:A3e,PropModification:N3e,replacePrefix:R3e,add:I3e,remove:j3e}=Qw;class fX extends Qw{constructor(){super("LiteChatDatabase_Rewrite_v1");wa(this,"conversations");wa(this,"interactions");wa(this,"mods");wa(this,"appState");wa(this,"providerConfigs");wa(this,"apiKeys");wa(this,"syncRepos");wa(this,"projects");wa(this,"rules");wa(this,"tags");wa(this,"tagRuleLinks");this.version(8).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId, rating",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(7).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name",rules:"++id, &name, type, createdAt, updatedAt",tags:"++id, &name, createdAt, updatedAt",tagRuleLinks:"++id, tagId, ruleId, &[tagId+ruleId]"}),this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const Tt=new fX,La=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class _t{static async loadConversations(){try{return(await Tt.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>La(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await Tt.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await Tt.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await Tt.interactions.where({conversationId:t}).sortBy("index")).map(r=>La(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await Tt.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await Tt.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await Tt.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await Tt.mods.orderBy("loadOrder").toArray()).map(n=>La(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await Tt.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await Tt.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await Tt.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await Tt.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=Tt.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>La(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await Tt.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await Tt.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=Tt.apiKeys)==null?void 0:t.toArray())??[]).map(r=>La(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await Tt.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await Tt.transaction("rw",[Tt.apiKeys,Tt.providerConfigs],async()=>{const n=await Tt.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Tt.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await Tt.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await Tt.syncRepos.toArray()).map(n=>La(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await Tt.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await Tt.transaction("rw",[Tt.syncRepos,Tt.conversations],async()=>{const n=await Tt.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>Tt.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await Tt.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await Tt.projects.orderBy("updatedAt").reverse().toArray()).map(n=>La(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,maxTokens:t.maxTokens??null,topP:t.topP??null,topK:t.topK??null,presencePenalty:t.presencePenalty??null,frequencyPenalty:t.frequencyPenalty??null,metadata:t.metadata?{...t.metadata}:{}};return await Tt.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await Tt.projects.where("parentId").equals(r).toArray();for(const s of a)await n(s.id);const i=await Tt.conversations.where("projectId").equals(r).toArray();if(i.length>0){const s=i.map(o=>Tt.conversations.update(o.id,{projectId:null}));await Promise.all(s),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await Tt.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await Tt.transaction("rw",[Tt.projects,Tt.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async loadRules(){try{return(await Tt.rules.orderBy("name").toArray()).map(n=>La(n))}catch(t){throw console.error("PersistenceService: Error loading rules:",t),t}}static async saveRule(t){try{return await Tt.rules.put(t)}catch(n){throw console.error("PersistenceService: Error saving rule:",n),n}}static async deleteRule(t){try{await Tt.transaction("rw",[Tt.rules,Tt.tagRuleLinks],async()=>{await Tt.tagRuleLinks.where("ruleId").equals(t).delete(),await Tt.rules.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting rule:",n),n}}static async loadTags(){try{return(await Tt.tags.orderBy("name").toArray()).map(n=>La(n))}catch(t){throw console.error("PersistenceService: Error loading tags:",t),t}}static async saveTag(t){try{return await Tt.tags.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag:",n),n}}static async deleteTag(t){try{await Tt.transaction("rw",[Tt.tags,Tt.tagRuleLinks],async()=>{await Tt.tagRuleLinks.where("tagId").equals(t).delete(),await Tt.tags.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting tag:",n),n}}static async loadTagRuleLinks(){try{return await Tt.tagRuleLinks.toArray()}catch(t){throw console.error("PersistenceService: Error loading tag-rule links:",t),t}}static async saveTagRuleLink(t){try{return await Tt.tagRuleLinks.put(t)}catch(n){throw console.error("PersistenceService: Error saving tag-rule link:",n),n}}static async deleteTagRuleLink(t){try{await Tt.tagRuleLinks.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting tag-rule link:",n),n}}static async getAllDataForExport(t){const n={version:1,exportedAt:new Date().toISOString()};if(t.importSettings){const r=await Tt.appState.toArray();n.settings={},r.forEach(a=>{a.key.startsWith("settings:")&&(n.settings[a.key.substring(9)]=a.value)})}return t.importApiKeys&&(n.apiKeys=await Tt.apiKeys.toArray()),t.importProviderConfigs&&(n.providerConfigs=await Tt.providerConfigs.toArray()),t.importProjects&&(n.projects=await Tt.projects.toArray()),t.importConversations&&(n.conversations=await Tt.conversations.toArray(),n.interactions=await Tt.interactions.toArray()),t.importRulesAndTags&&(n.rules=await Tt.rules.toArray(),n.tags=await Tt.tags.toArray(),n.tagRuleLinks=await Tt.tagRuleLinks.toArray()),t.importMods&&(n.mods=await Tt.mods.toArray()),t.importSyncRepos&&(n.syncRepos=await Tt.syncRepos.toArray()),n}static async importAllData(t,n){if(t.version!==1)throw new Error(`Unsupported export version: ${t.version}. Expected version 1.`);await Tt.transaction("rw",[Tt.appState,Tt.apiKeys,Tt.providerConfigs,Tt.projects,Tt.conversations,Tt.interactions,Tt.rules,Tt.tags,Tt.tagRuleLinks,Tt.mods,Tt.syncRepos],async()=>{if(n.importSettings&&await Tt.appState.clear(),n.importApiKeys&&await Tt.apiKeys.clear(),n.importProviderConfigs&&await Tt.providerConfigs.clear(),n.importProjects&&await Tt.projects.clear(),n.importConversations&&(await Tt.conversations.clear(),await Tt.interactions.clear()),n.importRulesAndTags&&(await Tt.rules.clear(),await Tt.tags.clear(),await Tt.tagRuleLinks.clear()),n.importMods&&await Tt.mods.clear(),n.importSyncRepos&&await Tt.syncRepos.clear(),n.importSettings&&t.settings){const r=Object.entries(t.settings).map(([a,i])=>({key:`settings:${a}`,value:i}));await Tt.appState.bulkPut(r)}n.importApiKeys&&t.apiKeys&&await Tt.apiKeys.bulkPut(t.apiKeys.map(r=>La(r))),n.importProviderConfigs&&t.providerConfigs&&await Tt.providerConfigs.bulkPut(t.providerConfigs.map(r=>La(r,["modelsLastFetchedAt"]))),n.importProjects&&t.projects&&await Tt.projects.bulkPut(t.projects.map(r=>La(r))),n.importConversations&&t.conversations&&(await Tt.conversations.bulkPut(t.conversations.map(r=>La(r,["lastSyncedAt"]))),t.interactions&&await Tt.interactions.bulkPut(t.interactions.map(r=>La(r,["startedAt","endedAt"])))),n.importRulesAndTags&&(t.rules&&await Tt.rules.bulkPut(t.rules.map(r=>La(r))),t.tags&&await Tt.tags.bulkPut(t.tags.map(r=>La(r))),t.tagRuleLinks&&await Tt.tagRuleLinks.bulkPut(t.tagRuleLinks)),n.importMods&&t.mods&&await Tt.mods.bulkPut(t.mods.map(r=>La(r))),n.importSyncRepos&&t.syncRepos&&await Tt.syncRepos.bulkPut(t.syncRepos.map(r=>La(r,["lastPulledAt","lastPushedAt"])))})}static async clearAllData(){try{await Tt.transaction("rw",[Tt.conversations,Tt.interactions,Tt.mods,Tt.appState,Tt.providerConfigs,Tt.apiKeys,Tt.syncRepos,Tt.projects,Tt.rules,Tt.tags,Tt.tagRuleLinks],async()=>{await Tt.interactions.clear(),await Tt.conversations.clear(),await Tt.projects.clear(),await Tt.mods.clear(),await Tt.appState.clear(),await Tt.providerConfigs.clear(),await Tt.apiKeys.clear(),await Tt.syncRepos.clear(),await Tt.rules.clear(),await Tt.tags.clear(),await Tt.tagRuleLinks.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function hX(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Et=hX();var St=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(St||{}),u0=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(u0||{}),ml=b8();const Z8=xi(ml);function pX(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const mX=e=>{switch(e){case"success":return bX;case"info":return wX;case"warning":return vX;case"error":return xX;default:return null}},gX=Array(12).fill(0),yX=({visible:e,className:t})=>gt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},gt.createElement("div",{className:"sonner-spinner"},gX.map((n,r)=>gt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),bX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),vX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),wX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),xX=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},gt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_X=gt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},gt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),gt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),SX=()=>{const[e,t]=gt.useState(document.hidden);return gt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let MT=1;class EX{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:MT++,s=this.toasts.find(l=>l.id===i),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),s?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:o,title:r}):l):this.addToast({title:r,...a,dismissible:o,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,s;const o=a.then(async u=>{if(s=["resolve",u],gt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(TX(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,m=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:m,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,m=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!gt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:m,...v})}}).catch(async u=>{if(s=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof d=="object"&&!gt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>o.then(()=>s[0]==="reject"?d(s[1]):u(s[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||MT++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Hi=new EX,CX=(e,t)=>{const n=(t==null?void 0:t.id)||MT++;return Hi.addToast({title:e,...t,id:n}),n},TX=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",kX=CX,AX=()=>Hi.toasts,NX=()=>Hi.getActiveToasts(),qe=Object.assign(kX,{success:Hi.success,info:Hi.info,warning:Hi.warning,error:Hi.error,custom:Hi.custom,message:Hi.message,promise:Hi.promise,dismiss:Hi.dismiss,loading:Hi.loading},{getHistory:AX,getToasts:NX});pX("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Av(e){return e.label!==void 0}const RX=3,IX="24px",jX="16px",D4=4e3,DX=356,MX=14,OX=45,PX=200;function rl(...e){return e.filter(Boolean).join(" ")}function FX(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const LX=e=>{var t,n,r,a,i,s,o,l,u;const{invert:d,toast:h,unstyled:m,interacting:g,setHeights:v,visibleToasts:b,heights:w,index:x,toasts:_,expanded:E,removeToast:T,defaultRichColors:k,closeButton:R,style:j,cancelButtonStyle:I,actionButtonStyle:P,className:O="",descriptionClassName:U="",duration:M,position:W,gap:V,expandByDefault:ie,classNames:ae,icons:ne,closeButtonAriaLabel:q="Close toast"}=e,[te,G]=gt.useState(null),[J,Q]=gt.useState(null),[se,fe]=gt.useState(!1),[ve,je]=gt.useState(!1),[Ne,Se]=gt.useState(!1),[ye,Fe]=gt.useState(!1),[Xe,Le]=gt.useState(!1),[Ie,B]=gt.useState(0),[Ce,Ee]=gt.useState(0),ce=gt.useRef(h.duration||M||D4),oe=gt.useRef(null),ee=gt.useRef(null),_e=x===0,Pe=x+1<=b,ke=h.type,We=h.dismissible!==!1,Nt=h.className||"",it=h.descriptionClassName||"",Ct=gt.useMemo(()=>w.findIndex(Me=>Me.toastId===h.id)||0,[w,h.id]),Ft=gt.useMemo(()=>{var Me;return(Me=h.closeButton)!=null?Me:R},[h.closeButton,R]),Mt=gt.useMemo(()=>h.duration||M||D4,[h.duration,M]),Zt=gt.useRef(0),be=gt.useRef(0),D=gt.useRef(0),Z=gt.useRef(null),[he,De]=W.split("-"),we=gt.useMemo(()=>w.reduce((Me,Ke,Dt)=>Dt>=Ct?Me:Me+Ke.height,0),[w,Ct]),Ae=SX(),ue=h.invert||d,ft=ke==="loading";be.current=gt.useMemo(()=>Ct*V+we,[Ct,we]),gt.useEffect(()=>{ce.current=Mt},[Mt]),gt.useEffect(()=>{fe(!0)},[]),gt.useEffect(()=>{const Me=ee.current;if(Me){const Ke=Me.getBoundingClientRect().height;return Ee(Ke),v(Dt=>[{toastId:h.id,height:Ke,position:h.position},...Dt]),()=>v(Dt=>Dt.filter(me=>me.toastId!==h.id))}},[v,h.id]),gt.useLayoutEffect(()=>{if(!se)return;const Me=ee.current,Ke=Me.style.height;Me.style.height="auto";const Dt=Me.getBoundingClientRect().height;Me.style.height=Ke,Ee(Dt),v(me=>me.find(H=>H.toastId===h.id)?me.map(H=>H.toastId===h.id?{...H,height:Dt}:H):[{toastId:h.id,height:Dt,position:h.position},...me])},[se,h.title,h.description,v,h.id]);const wt=gt.useCallback(()=>{je(!0),B(be.current),v(Me=>Me.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{T(h)},PX)},[h,T,v,be]);gt.useEffect(()=>{if(h.promise&&ke==="loading"||h.duration===1/0||h.type==="loading")return;let Me;return E||g||Ae?(()=>{if(D.current<Zt.current){const me=new Date().getTime()-Zt.current;ce.current=ce.current-me}D.current=new Date().getTime()})():(()=>{ce.current!==1/0&&(Zt.current=new Date().getTime(),Me=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),wt()},ce.current))})(),()=>clearTimeout(Me)},[E,g,h,ke,Ae,wt]),gt.useEffect(()=>{h.delete&&wt()},[wt,h.delete]);function L(){var Me;if(ne!=null&&ne.loading){var Ke;return gt.createElement("div",{className:rl(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":ke==="loading"},ne.loading)}return gt.createElement(yX,{className:rl(ae==null?void 0:ae.loader,h==null||(Me=h.classNames)==null?void 0:Me.loader),visible:ke==="loading"})}const $e=h.icon||(ne==null?void 0:ne[ke])||mX(ke);var nt,ge;return gt.createElement("li",{tabIndex:0,ref:ee,className:rl(O,Nt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[ke],h==null||(n=h.classNames)==null?void 0:n[ke]),"data-sonner-toast":"","data-rich-colors":(nt=h.richColors)!=null?nt:k,"data-styled":!(h.jsx||h.unstyled||m),"data-mounted":se,"data-promise":!!h.promise,"data-swiped":Xe,"data-removed":ve,"data-visible":Pe,"data-y-position":he,"data-x-position":De,"data-index":x,"data-front":_e,"data-swiping":Ne,"data-dismissible":We,"data-type":ke,"data-invert":ue,"data-swipe-out":ye,"data-swipe-direction":J,"data-expanded":!!(E||ie&&se),style:{"--index":x,"--toasts-before":x,"--z-index":_.length-x,"--offset":`${ve?Ie:be.current}px`,"--initial-height":ie?"auto":`${Ce}px`,...j,...h.style},onDragEnd:()=>{Se(!1),G(null),Z.current=null},onPointerDown:Me=>{ft||!We||(oe.current=new Date,B(be.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(Se(!0),Z.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,Ke,Dt;if(ye||!We)return;Z.current=null;const me=Number(((Me=ee.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),K=Number(((Ke=ee.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),H=new Date().getTime()-((Dt=oe.current)==null?void 0:Dt.getTime()),Y=te==="x"?me:K,pe=Math.abs(Y)/H;if(Math.abs(Y)>=OX||pe>.11){B(be.current),h.onDismiss==null||h.onDismiss.call(h,h),Q(te==="x"?me>0?"right":"left":K>0?"down":"up"),wt(),Fe(!0);return}else{var Re,Ve;(Re=ee.current)==null||Re.style.setProperty("--swipe-amount-x","0px"),(Ve=ee.current)==null||Ve.style.setProperty("--swipe-amount-y","0px")}Le(!1),Se(!1),G(null)},onPointerMove:Me=>{var Ke,Dt,me;if(!Z.current||!We||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const H=Me.clientY-Z.current.y,Y=Me.clientX-Z.current.x;var pe;const Re=(pe=e.swipeDirections)!=null?pe:FX(W);!te&&(Math.abs(Y)>1||Math.abs(H)>1)&&G(Math.abs(Y)>Math.abs(H)?"x":"y");let Ve={x:0,y:0};const pt=Kt=>1/(1.5+Math.abs(Kt)/20);if(te==="y"){if(Re.includes("top")||Re.includes("bottom"))if(Re.includes("top")&&H<0||Re.includes("bottom")&&H>0)Ve.y=H;else{const Kt=H*pt(H);Ve.y=Math.abs(Kt)<Math.abs(H)?Kt:H}}else if(te==="x"&&(Re.includes("left")||Re.includes("right")))if(Re.includes("left")&&Y<0||Re.includes("right")&&Y>0)Ve.x=Y;else{const Kt=Y*pt(Y);Ve.x=Math.abs(Kt)<Math.abs(Y)?Kt:Y}(Math.abs(Ve.x)>0||Math.abs(Ve.y)>0)&&Le(!0),(Dt=ee.current)==null||Dt.style.setProperty("--swipe-amount-x",`${Ve.x}px`),(me=ee.current)==null||me.style.setProperty("--swipe-amount-y",`${Ve.y}px`)}},Ft&&!h.jsx&&ke!=="loading"?gt.createElement("button",{"aria-label":q,"data-disabled":ft,"data-close-button":!0,onClick:ft||!We?()=>{}:()=>{wt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:rl(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=ne==null?void 0:ne.close)!=null?ge:_X):null,(ke||h.icon||h.promise)&&h.icon!==null&&((ne==null?void 0:ne[ke])!==null||h.icon)?gt.createElement("div",{"data-icon":"",className:rl(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||L():null,h.type!=="loading"?$e:null):null,gt.createElement("div",{"data-content":"",className:rl(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},gt.createElement("div",{"data-title":"",className:rl(ae==null?void 0:ae.title,h==null||(s=h.classNames)==null?void 0:s.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?gt.createElement("div",{"data-description":"",className:rl(U,it,ae==null?void 0:ae.description,h==null||(o=h.classNames)==null?void 0:o.description)},typeof h.description=="function"?h.description():h.description):null),gt.isValidElement(h.cancel)?h.cancel:h.cancel&&Av(h.cancel)?gt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||I,onClick:Me=>{Av(h.cancel)&&We&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,Me),wt())},className:rl(ae==null?void 0:ae.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,gt.isValidElement(h.action)?h.action:h.action&&Av(h.action)?gt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||P,onClick:Me=>{Av(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,Me),!Me.defaultPrevented&&wt())},className:rl(ae==null?void 0:ae.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function M4(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function BX(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,s=i?"--mobile-offset":"--offset",o=i?jX:IX;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${s}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${s}-${u}`]=o:n[`${s}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(o)}),n}const $X=gt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:s,closeButton:o,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:m,duration:g,style:v,visibleToasts:b=RX,toastOptions:w,dir:x=M4(),gap:_=MX,icons:E,containerAriaLabel:T="Notifications"}=t,[k,R]=gt.useState([]),j=gt.useMemo(()=>Array.from(new Set([a].concat(k.filter(J=>J.position).map(J=>J.position)))),[k,a]),[I,P]=gt.useState([]),[O,U]=gt.useState(!1),[M,W]=gt.useState(!1),[V,ie]=gt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=gt.useRef(null),ne=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),q=gt.useRef(null),te=gt.useRef(!1),G=gt.useCallback(J=>{R(Q=>{var se;return(se=Q.find(fe=>fe.id===J.id))!=null&&se.delete||Hi.dismiss(J.id),Q.filter(({id:fe})=>fe!==J.id)})},[]);return gt.useEffect(()=>Hi.subscribe(J=>{if(J.dismiss){requestAnimationFrame(()=>{R(Q=>Q.map(se=>se.id===J.id?{...se,delete:!0}:se))});return}setTimeout(()=>{Z8.flushSync(()=>{R(Q=>{const se=Q.findIndex(fe=>fe.id===J.id);return se!==-1?[...Q.slice(0,se),{...Q[se],...J},...Q.slice(se+1)]:[J,...Q]})})})}),[k]),gt.useEffect(()=>{if(h!=="system"){ie(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;const J=window.matchMedia("(prefers-color-scheme: dark)");try{J.addEventListener("change",({matches:Q})=>{ie(Q?"dark":"light")})}catch{J.addListener(({matches:se})=>{try{ie(se?"dark":"light")}catch(fe){console.error(fe)}})}},[h]),gt.useEffect(()=>{k.length<=1&&U(!1)},[k]),gt.useEffect(()=>{const J=Q=>{var se;if(i.every(je=>Q[je]||Q.code===je)){var ve;U(!0),(ve=ae.current)==null||ve.focus()}Q.code==="Escape"&&(document.activeElement===ae.current||(se=ae.current)!=null&&se.contains(document.activeElement))&&U(!1)};return document.addEventListener("keydown",J),()=>document.removeEventListener("keydown",J)},[i]),gt.useEffect(()=>{if(ae.current)return()=>{q.current&&(q.current.focus({preventScroll:!0}),q.current=null,te.current=!1)}},[ae.current]),gt.createElement("section",{ref:n,"aria-label":`${T} ${ne}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},j.map((J,Q)=>{var se;const[fe,ve]=J.split("-");return k.length?gt.createElement("ol",{key:J,dir:x==="auto"?M4():x,tabIndex:-1,ref:ae,className:l,"data-sonner-toaster":!0,"data-sonner-theme":V,"data-y-position":fe,"data-lifted":O&&k.length>1&&!s,"data-x-position":ve,style:{"--front-toast-height":`${((se=I[0])==null?void 0:se.height)||0}px`,"--width":`${DX}px`,"--gap":`${_}px`,...v,...BX(u,d)},onBlur:je=>{te.current&&!je.currentTarget.contains(je.relatedTarget)&&(te.current=!1,q.current&&(q.current.focus({preventScroll:!0}),q.current=null))},onFocus:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||te.current||(te.current=!0,q.current=je.relatedTarget)},onMouseEnter:()=>U(!0),onMouseMove:()=>U(!0),onMouseLeave:()=>{M||U(!1)},onDragEnd:()=>U(!1),onPointerDown:je=>{je.target instanceof HTMLElement&&je.target.dataset.dismissible==="false"||W(!0)},onPointerUp:()=>W(!1)},k.filter(je=>!je.position&&Q===0||je.position===J).map((je,Ne)=>{var Se,ye;return gt.createElement(LX,{key:je.id,icons:E,index:Ne,toast:je,defaultRichColors:m,duration:(Se=w==null?void 0:w.duration)!=null?Se:g,className:w==null?void 0:w.className,descriptionClassName:w==null?void 0:w.descriptionClassName,invert:r,visibleToasts:b,closeButton:(ye=w==null?void 0:w.closeButton)!=null?ye:o,interacting:M,position:J,style:w==null?void 0:w.style,unstyled:w==null?void 0:w.unstyled,classNames:w==null?void 0:w.classNames,cancelButtonStyle:w==null?void 0:w.cancelButtonStyle,actionButtonStyle:w==null?void 0:w.actionButtonStyle,closeButtonAriaLabel:w==null?void 0:w.closeButtonAriaLabel,removeToast:G,toasts:k.filter(Fe=>Fe.position==je.position),heights:I.filter(Fe=>Fe.position==je.position),setHeights:P,expandByDefault:s,gap:_,expanded:O,swipeDirections:t.swipeDirections})})):null}))}),On=Js(Qs((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},currentConversationId:n}),r!=="loading"&&Et.emit(St.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await _t.loadInteractionsForConversation(n);a.sort((i,s)=>i.index-s.index),e({interactions:a,status:"idle"}),Et.emit(St.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),Et.emit(St.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(s=>s.id===n);if(i!==-1){const s=a.interactions[i];let o={...s.metadata||{}};r.metadata&&(o={...o,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(o.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(o.toolResults=[...r.metadata.toolResults]),r.metadata.reasoning!==void 0&&(o.reasoning=r.metadata.reasoning));const l={...s,...r,metadata:o};"response"in r&&(l.response=r.response),"rating"in r&&(l.rating=r.rating),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},appendReasoningChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeReasoningBuffers[n]=(a.activeReasoningBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},rateInteraction:async(n,r)=>{const a=t().interactions.find(i=>i.id===n);if(!a){console.error(`InteractionStore: Interaction ${n} not found for rating.`);return}t()._updateInteractionInState(n,{rating:r});try{await _t.saveInteraction({...a,rating:r})}catch(i){console.error(`InteractionStore: Failed to persist rating for ${n}`,i),t()._updateInteractionInState(n,{rating:a.rating}),qe.error("Failed to save rating.")}},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},activeReasoningBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Et.emit(St.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&Et.emit(St.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),Et.emit(St.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.activeReasoningBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&Et.emit(St.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],delete a.activeReasoningBuffers[n],console.log(`InteractionStore: Cleaned up buffers for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&Et.emit(St.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),zX="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let yi=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=zX[n[e]&63];return t};const ko=Js(Qs((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(s=>s.source==="direct"&&n.source==="direct"?s.name===n.name&&s.size===n.size:s.source==="vfs"&&n.source==="vfs"?s.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const s={id:yi(),...n};a.attachedFilesMetadata.push(s),r=!0}}),r&&Et.emit(St.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(s=>s.id!==n),r=a.attachedFilesMetadata.length<i}),r&&Et.emit(St.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Et.emit(St.ATTACHED_FILES_CHANGED,{files:[]})}}))),Y8=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(Y8);const E1=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return Y8.has(r)};var X8="vercel.ai.error",UX=Symbol.for(X8),J8,VX=class Q8 extends Error{constructor({name:t,message:n,cause:r}){super(n),this[J8]=!0,this.name=t,this.cause=r}static isInstance(t){return Q8.hasMarker(t,X8)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};J8=UX;var Rn=VX,e5="AI_APICallError",t5=`vercel.ai.error.${e5}`,HX=Symbol.for(t5),n5,Gs=class extends Rn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:s,cause:o,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:e5,message:t,cause:o}),this[n5]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=s,this.isRetryable=l,this.data=u}static isInstance(t){return Rn.hasMarker(t,t5)}};n5=HX;var r5="AI_EmptyResponseBodyError",a5=`vercel.ai.error.${r5}`,qX=Symbol.for(a5),i5,s5=class extends Rn{constructor({message:t="Empty response body"}={}){super({name:r5,message:t}),this[i5]=!0}static isInstance(t){return Rn.hasMarker(t,a5)}};i5=qX;function xy(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var o5="AI_InvalidArgumentError",l5=`vercel.ai.error.${o5}`,GX=Symbol.for(l5),c5,u5=class extends Rn{constructor({message:t,cause:n,argument:r}){super({name:o5,message:t,cause:n}),this[c5]=!0,this.argument=r}static isInstance(t){return Rn.hasMarker(t,l5)}};c5=GX;var d5="AI_InvalidPromptError",f5=`vercel.ai.error.${d5}`,WX=Symbol.for(f5),h5,sc=class extends Rn{constructor({prompt:t,message:n,cause:r}){super({name:d5,message:`Invalid prompt: ${n}`,cause:r}),this[h5]=!0,this.prompt=t}static isInstance(t){return Rn.hasMarker(t,f5)}};h5=WX;var p5="AI_InvalidResponseDataError",m5=`vercel.ai.error.${p5}`,KX=Symbol.for(m5),g5,ip=class extends Rn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:p5,message:n}),this[g5]=!0,this.data=t}static isInstance(t){return Rn.hasMarker(t,m5)}};g5=KX;var y5="AI_JSONParseError",b5=`vercel.ai.error.${y5}`,ZX=Symbol.for(b5),v5,ex=class extends Rn{constructor({text:t,cause:n}){super({name:y5,message:`JSON parsing failed: Text: ${t}.
Error message: ${xy(n)}`,cause:n}),this[v5]=!0,this.text=t}static isInstance(t){return Rn.hasMarker(t,b5)}};v5=ZX;var w5="AI_LoadAPIKeyError",x5=`vercel.ai.error.${w5}`,YX=Symbol.for(x5),_5,Nv=class extends Rn{constructor({message:t}){super({name:w5,message:t}),this[_5]=!0}static isInstance(t){return Rn.hasMarker(t,x5)}};_5=YX;var S5="AI_TooManyEmbeddingValuesForCallError",E5=`vercel.ai.error.${S5}`,XX=Symbol.for(E5),C5,C1=class extends Rn{constructor(e){super({name:S5,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[C5]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return Rn.hasMarker(e,E5)}};C5=XX;var T5="AI_TypeValidationError",k5=`vercel.ai.error.${T5}`,JX=Symbol.for(k5),A5,QX=class OT extends Rn{constructor({value:t,cause:n}){super({name:T5,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${xy(n)}`,cause:n}),this[A5]=!0,this.value=t}static isInstance(t){return Rn.hasMarker(t,k5)}static wrap({value:t,cause:n}){return OT.isInstance(n)&&n.value===t?n:new OT({value:t,cause:n})}};A5=JX;var tx=QX,N5="AI_UnsupportedFunctionalityError",R5=`vercel.ai.error.${N5}`,eJ=Symbol.for(R5),I5,dr=class extends Rn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:N5,message:n}),this[I5]=!0,this.functionality=t}static isInstance(t){return Rn.hasMarker(t,R5)}};I5=eJ;let tJ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var _A={},T1={};T1.byteLength=aJ;T1.toByteArray=sJ;T1.fromByteArray=cJ;var fl=[],zs=[],nJ=typeof Uint8Array<"u"?Uint8Array:Array,tE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Ph=0,rJ=tE.length;Ph<rJ;++Ph)fl[Ph]=tE[Ph],zs[tE.charCodeAt(Ph)]=Ph;zs[45]=62;zs[95]=63;function j5(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function aJ(e){var t=j5(e),n=t[0],r=t[1];return(n+r)*3/4-r}function iJ(e,t,n){return(t+n)*3/4-n}function sJ(e){var t,n=j5(e),r=n[0],a=n[1],i=new nJ(iJ(e,r,a)),s=0,o=a>0?r-4:r,l;for(l=0;l<o;l+=4)t=zs[e.charCodeAt(l)]<<18|zs[e.charCodeAt(l+1)]<<12|zs[e.charCodeAt(l+2)]<<6|zs[e.charCodeAt(l+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return a===2&&(t=zs[e.charCodeAt(l)]<<2|zs[e.charCodeAt(l+1)]>>4,i[s++]=t&255),a===1&&(t=zs[e.charCodeAt(l)]<<10|zs[e.charCodeAt(l+1)]<<4|zs[e.charCodeAt(l+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function oJ(e){return fl[e>>18&63]+fl[e>>12&63]+fl[e>>6&63]+fl[e&63]}function lJ(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(oJ(r));return a.join("")}function cJ(e){for(var t,n=e.length,r=n%3,a=[],i=16383,s=0,o=n-r;s<o;s+=i)a.push(lJ(e,s,s+i>o?o:s+i));return r===1?(t=e[n-1],a.push(fl[t>>2]+fl[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(fl[t>>10]+fl[t>>4&63]+fl[t<<2&63]+"=")),a.join("")}var SA={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */SA.read=function(e,t,n,r,a){var i,s,o=a*8-r-1,l=(1<<o)-1,u=l>>1,d=-7,h=n?a-1:0,m=n?-1:1,g=e[t+h];for(h+=m,i=g&(1<<-d)-1,g>>=-d,d+=o;d>0;i=i*256+e[t+h],h+=m,d-=8);for(s=i&(1<<-d)-1,i>>=-d,d+=r;d>0;s=s*256+e[t+h],h+=m,d-=8);if(i===0)i=1-u;else{if(i===l)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-u}return(g?-1:1)*s*Math.pow(2,i-r)};SA.write=function(e,t,n,r,a,i){var s,o,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,m=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+h>=1?t+=m/l:t+=m*Math.pow(2,1-h),t*l>=2&&(s++,l/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*l-1)*Math.pow(2,a),s=s+h):(o=t*Math.pow(2,h-1)*Math.pow(2,a),s=0));a>=8;e[n+g]=o&255,g+=v,o/=256,a-=8);for(s=s<<a|o,u+=a;u>0;e[n+g]=s&255,g+=v,s/=256,u-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=T1,n=SA,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:o}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const be=new i(1),D={foo:function(){return 42}};return Object.setPrototypeOf(D,i.prototype),Object.setPrototypeOf(be,D),be.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(be){if(be>a)throw new RangeError('The value "'+be+'" is invalid for option "size"');const D=new i(be);return Object.setPrototypeOf(D,d.prototype),D}function d(be,D,Z){if(typeof be=="number"){if(typeof D=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(be)}return h(be,D,Z)}d.poolSize=8192;function h(be,D,Z){if(typeof be=="string")return b(be,D);if(s.isView(be))return x(be);if(be==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be);if(it(be,s)||be&&it(be.buffer,s)||typeof o<"u"&&(it(be,o)||be&&it(be.buffer,o)))return _(be,D,Z);if(typeof be=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=be.valueOf&&be.valueOf();if(he!=null&&he!==be)return d.from(he,D,Z);const De=E(be);if(De)return De;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof be[Symbol.toPrimitive]=="function")return d.from(be[Symbol.toPrimitive]("string"),D,Z);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof be)}d.from=function(be,D,Z){return h(be,D,Z)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function m(be){if(typeof be!="number")throw new TypeError('"size" argument must be of type number');if(be<0)throw new RangeError('The value "'+be+'" is invalid for option "size"')}function g(be,D,Z){return m(be),be<=0?u(be):D!==void 0?typeof Z=="string"?u(be).fill(D,Z):u(be).fill(D):u(be)}d.alloc=function(be,D,Z){return g(be,D,Z)};function v(be){return m(be),u(be<0?0:T(be)|0)}d.allocUnsafe=function(be){return v(be)},d.allocUnsafeSlow=function(be){return v(be)};function b(be,D){if((typeof D!="string"||D==="")&&(D="utf8"),!d.isEncoding(D))throw new TypeError("Unknown encoding: "+D);const Z=R(be,D)|0;let he=u(Z);const De=he.write(be,D);return De!==Z&&(he=he.slice(0,De)),he}function w(be){const D=be.length<0?0:T(be.length)|0,Z=u(D);for(let he=0;he<D;he+=1)Z[he]=be[he]&255;return Z}function x(be){if(it(be,i)){const D=new i(be);return _(D.buffer,D.byteOffset,D.byteLength)}return w(be)}function _(be,D,Z){if(D<0||be.byteLength<D)throw new RangeError('"offset" is outside of buffer bounds');if(be.byteLength<D+(Z||0))throw new RangeError('"length" is outside of buffer bounds');let he;return D===void 0&&Z===void 0?he=new i(be):Z===void 0?he=new i(be,D):he=new i(be,D,Z),Object.setPrototypeOf(he,d.prototype),he}function E(be){if(d.isBuffer(be)){const D=T(be.length)|0,Z=u(D);return Z.length===0||be.copy(Z,0,0,D),Z}if(be.length!==void 0)return typeof be.length!="number"||Ct(be.length)?u(0):w(be);if(be.type==="Buffer"&&Array.isArray(be.data))return w(be.data)}function T(be){if(be>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return be|0}function k(be){return+be!=be&&(be=0),d.alloc(+be)}d.isBuffer=function(D){return D!=null&&D._isBuffer===!0&&D!==d.prototype},d.compare=function(D,Z){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),it(Z,i)&&(Z=d.from(Z,Z.offset,Z.byteLength)),!d.isBuffer(D)||!d.isBuffer(Z))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(D===Z)return 0;let he=D.length,De=Z.length;for(let we=0,Ae=Math.min(he,De);we<Ae;++we)if(D[we]!==Z[we]){he=D[we],De=Z[we];break}return he<De?-1:De<he?1:0},d.isEncoding=function(D){switch(String(D).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(D,Z){if(!Array.isArray(D))throw new TypeError('"list" argument must be an Array of Buffers');if(D.length===0)return d.alloc(0);let he;if(Z===void 0)for(Z=0,he=0;he<D.length;++he)Z+=D[he].length;const De=d.allocUnsafe(Z);let we=0;for(he=0;he<D.length;++he){let Ae=D[he];if(it(Ae,i))we+Ae.length>De.length?(d.isBuffer(Ae)||(Ae=d.from(Ae)),Ae.copy(De,we)):i.prototype.set.call(De,Ae,we);else if(d.isBuffer(Ae))Ae.copy(De,we);else throw new TypeError('"list" argument must be an Array of Buffers');we+=Ae.length}return De};function R(be,D){if(d.isBuffer(be))return be.length;if(s.isView(be)||it(be,s))return be.byteLength;if(typeof be!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof be);const Z=be.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&Z===0)return 0;let De=!1;for(;;)switch(D){case"ascii":case"latin1":case"binary":return Z;case"utf8":case"utf-8":return _e(be).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z*2;case"hex":return Z>>>1;case"base64":return We(be).length;default:if(De)return he?-1:_e(be).length;D=(""+D).toLowerCase(),De=!0}}d.byteLength=R;function j(be,D,Z){let he=!1;if((D===void 0||D<0)&&(D=0),D>this.length||((Z===void 0||Z>this.length)&&(Z=this.length),Z<=0)||(Z>>>=0,D>>>=0,Z<=D))return"";for(be||(be="utf8");;)switch(be){case"hex":return Q(this,D,Z);case"utf8":case"utf-8":return ne(this,D,Z);case"ascii":return G(this,D,Z);case"latin1":case"binary":return J(this,D,Z);case"base64":return ae(this,D,Z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,D,Z);default:if(he)throw new TypeError("Unknown encoding: "+be);be=(be+"").toLowerCase(),he=!0}}d.prototype._isBuffer=!0;function I(be,D,Z){const he=be[D];be[D]=be[Z],be[Z]=he}d.prototype.swap16=function(){const D=this.length;if(D%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Z=0;Z<D;Z+=2)I(this,Z,Z+1);return this},d.prototype.swap32=function(){const D=this.length;if(D%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Z=0;Z<D;Z+=4)I(this,Z,Z+3),I(this,Z+1,Z+2);return this},d.prototype.swap64=function(){const D=this.length;if(D%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Z=0;Z<D;Z+=8)I(this,Z,Z+7),I(this,Z+1,Z+6),I(this,Z+2,Z+5),I(this,Z+3,Z+4);return this},d.prototype.toString=function(){const D=this.length;return D===0?"":arguments.length===0?ne(this,0,D):j.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(D){if(!d.isBuffer(D))throw new TypeError("Argument must be a Buffer");return this===D?!0:d.compare(this,D)===0},d.prototype.inspect=function(){let D="";const Z=e.INSPECT_MAX_BYTES;return D=this.toString("hex",0,Z).replace(/(.{2})/g,"$1 ").trim(),this.length>Z&&(D+=" ... "),"<Buffer "+D+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(D,Z,he,De,we){if(it(D,i)&&(D=d.from(D,D.offset,D.byteLength)),!d.isBuffer(D))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof D);if(Z===void 0&&(Z=0),he===void 0&&(he=D?D.length:0),De===void 0&&(De=0),we===void 0&&(we=this.length),Z<0||he>D.length||De<0||we>this.length)throw new RangeError("out of range index");if(De>=we&&Z>=he)return 0;if(De>=we)return-1;if(Z>=he)return 1;if(Z>>>=0,he>>>=0,De>>>=0,we>>>=0,this===D)return 0;let Ae=we-De,ue=he-Z;const ft=Math.min(Ae,ue),wt=this.slice(De,we),L=D.slice(Z,he);for(let $e=0;$e<ft;++$e)if(wt[$e]!==L[$e]){Ae=wt[$e],ue=L[$e];break}return Ae<ue?-1:ue<Ae?1:0};function P(be,D,Z,he,De){if(be.length===0)return-1;if(typeof Z=="string"?(he=Z,Z=0):Z>2147483647?Z=2147483647:Z<-2147483648&&(Z=-2147483648),Z=+Z,Ct(Z)&&(Z=De?0:be.length-1),Z<0&&(Z=be.length+Z),Z>=be.length){if(De)return-1;Z=be.length-1}else if(Z<0)if(De)Z=0;else return-1;if(typeof D=="string"&&(D=d.from(D,he)),d.isBuffer(D))return D.length===0?-1:O(be,D,Z,he,De);if(typeof D=="number")return D=D&255,typeof i.prototype.indexOf=="function"?De?i.prototype.indexOf.call(be,D,Z):i.prototype.lastIndexOf.call(be,D,Z):O(be,[D],Z,he,De);throw new TypeError("val must be string, number or Buffer")}function O(be,D,Z,he,De){let we=1,Ae=be.length,ue=D.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(be.length<2||D.length<2)return-1;we=2,Ae/=2,ue/=2,Z/=2}function ft(L,$e){return we===1?L[$e]:L.readUInt16BE($e*we)}let wt;if(De){let L=-1;for(wt=Z;wt<Ae;wt++)if(ft(be,wt)===ft(D,L===-1?0:wt-L)){if(L===-1&&(L=wt),wt-L+1===ue)return L*we}else L!==-1&&(wt-=wt-L),L=-1}else for(Z+ue>Ae&&(Z=Ae-ue),wt=Z;wt>=0;wt--){let L=!0;for(let $e=0;$e<ue;$e++)if(ft(be,wt+$e)!==ft(D,$e)){L=!1;break}if(L)return wt}return-1}d.prototype.includes=function(D,Z,he){return this.indexOf(D,Z,he)!==-1},d.prototype.indexOf=function(D,Z,he){return P(this,D,Z,he,!0)},d.prototype.lastIndexOf=function(D,Z,he){return P(this,D,Z,he,!1)};function U(be,D,Z,he){Z=Number(Z)||0;const De=be.length-Z;he?(he=Number(he),he>De&&(he=De)):he=De;const we=D.length;he>we/2&&(he=we/2);let Ae;for(Ae=0;Ae<he;++Ae){const ue=parseInt(D.substr(Ae*2,2),16);if(Ct(ue))return Ae;be[Z+Ae]=ue}return Ae}function M(be,D,Z,he){return Nt(_e(D,be.length-Z),be,Z,he)}function W(be,D,Z,he){return Nt(Pe(D),be,Z,he)}function V(be,D,Z,he){return Nt(We(D),be,Z,he)}function ie(be,D,Z,he){return Nt(ke(D,be.length-Z),be,Z,he)}d.prototype.write=function(D,Z,he,De){if(Z===void 0)De="utf8",he=this.length,Z=0;else if(he===void 0&&typeof Z=="string")De=Z,he=this.length,Z=0;else if(isFinite(Z))Z=Z>>>0,isFinite(he)?(he=he>>>0,De===void 0&&(De="utf8")):(De=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const we=this.length-Z;if((he===void 0||he>we)&&(he=we),D.length>0&&(he<0||Z<0)||Z>this.length)throw new RangeError("Attempt to write outside buffer bounds");De||(De="utf8");let Ae=!1;for(;;)switch(De){case"hex":return U(this,D,Z,he);case"utf8":case"utf-8":return M(this,D,Z,he);case"ascii":case"latin1":case"binary":return W(this,D,Z,he);case"base64":return V(this,D,Z,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,D,Z,he);default:if(Ae)throw new TypeError("Unknown encoding: "+De);De=(""+De).toLowerCase(),Ae=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(be,D,Z){return D===0&&Z===be.length?t.fromByteArray(be):t.fromByteArray(be.slice(D,Z))}function ne(be,D,Z){Z=Math.min(be.length,Z);const he=[];let De=D;for(;De<Z;){const we=be[De];let Ae=null,ue=we>239?4:we>223?3:we>191?2:1;if(De+ue<=Z){let ft,wt,L,$e;switch(ue){case 1:we<128&&(Ae=we);break;case 2:ft=be[De+1],(ft&192)===128&&($e=(we&31)<<6|ft&63,$e>127&&(Ae=$e));break;case 3:ft=be[De+1],wt=be[De+2],(ft&192)===128&&(wt&192)===128&&($e=(we&15)<<12|(ft&63)<<6|wt&63,$e>2047&&($e<55296||$e>57343)&&(Ae=$e));break;case 4:ft=be[De+1],wt=be[De+2],L=be[De+3],(ft&192)===128&&(wt&192)===128&&(L&192)===128&&($e=(we&15)<<18|(ft&63)<<12|(wt&63)<<6|L&63,$e>65535&&$e<1114112&&(Ae=$e))}}Ae===null?(Ae=65533,ue=1):Ae>65535&&(Ae-=65536,he.push(Ae>>>10&1023|55296),Ae=56320|Ae&1023),he.push(Ae),De+=ue}return te(he)}const q=4096;function te(be){const D=be.length;if(D<=q)return String.fromCharCode.apply(String,be);let Z="",he=0;for(;he<D;)Z+=String.fromCharCode.apply(String,be.slice(he,he+=q));return Z}function G(be,D,Z){let he="";Z=Math.min(be.length,Z);for(let De=D;De<Z;++De)he+=String.fromCharCode(be[De]&127);return he}function J(be,D,Z){let he="";Z=Math.min(be.length,Z);for(let De=D;De<Z;++De)he+=String.fromCharCode(be[De]);return he}function Q(be,D,Z){const he=be.length;(!D||D<0)&&(D=0),(!Z||Z<0||Z>he)&&(Z=he);let De="";for(let we=D;we<Z;++we)De+=Ft[be[we]];return De}function se(be,D,Z){const he=be.slice(D,Z);let De="";for(let we=0;we<he.length-1;we+=2)De+=String.fromCharCode(he[we]+he[we+1]*256);return De}d.prototype.slice=function(D,Z){const he=this.length;D=~~D,Z=Z===void 0?he:~~Z,D<0?(D+=he,D<0&&(D=0)):D>he&&(D=he),Z<0?(Z+=he,Z<0&&(Z=0)):Z>he&&(Z=he),Z<D&&(Z=D);const De=this.subarray(D,Z);return Object.setPrototypeOf(De,d.prototype),De};function fe(be,D,Z){if(be%1!==0||be<0)throw new RangeError("offset is not uint");if(be+D>Z)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(D,Z,he){D=D>>>0,Z=Z>>>0,he||fe(D,Z,this.length);let De=this[D],we=1,Ae=0;for(;++Ae<Z&&(we*=256);)De+=this[D+Ae]*we;return De},d.prototype.readUintBE=d.prototype.readUIntBE=function(D,Z,he){D=D>>>0,Z=Z>>>0,he||fe(D,Z,this.length);let De=this[D+--Z],we=1;for(;Z>0&&(we*=256);)De+=this[D+--Z]*we;return De},d.prototype.readUint8=d.prototype.readUInt8=function(D,Z){return D=D>>>0,Z||fe(D,1,this.length),this[D]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(D,Z){return D=D>>>0,Z||fe(D,2,this.length),this[D]|this[D+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(D,Z){return D=D>>>0,Z||fe(D,2,this.length),this[D]<<8|this[D+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(D,Z){return D=D>>>0,Z||fe(D,4,this.length),(this[D]|this[D+1]<<8|this[D+2]<<16)+this[D+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(D,Z){return D=D>>>0,Z||fe(D,4,this.length),this[D]*16777216+(this[D+1]<<16|this[D+2]<<8|this[D+3])},d.prototype.readBigUInt64LE=Mt(function(D){D=D>>>0,Ee(D,"offset");const Z=this[D],he=this[D+7];(Z===void 0||he===void 0)&&ce(D,this.length-8);const De=Z+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24,we=this[++D]+this[++D]*2**8+this[++D]*2**16+he*2**24;return BigInt(De)+(BigInt(we)<<BigInt(32))}),d.prototype.readBigUInt64BE=Mt(function(D){D=D>>>0,Ee(D,"offset");const Z=this[D],he=this[D+7];(Z===void 0||he===void 0)&&ce(D,this.length-8);const De=Z*2**24+this[++D]*2**16+this[++D]*2**8+this[++D],we=this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+he;return(BigInt(De)<<BigInt(32))+BigInt(we)}),d.prototype.readIntLE=function(D,Z,he){D=D>>>0,Z=Z>>>0,he||fe(D,Z,this.length);let De=this[D],we=1,Ae=0;for(;++Ae<Z&&(we*=256);)De+=this[D+Ae]*we;return we*=128,De>=we&&(De-=Math.pow(2,8*Z)),De},d.prototype.readIntBE=function(D,Z,he){D=D>>>0,Z=Z>>>0,he||fe(D,Z,this.length);let De=Z,we=1,Ae=this[D+--De];for(;De>0&&(we*=256);)Ae+=this[D+--De]*we;return we*=128,Ae>=we&&(Ae-=Math.pow(2,8*Z)),Ae},d.prototype.readInt8=function(D,Z){return D=D>>>0,Z||fe(D,1,this.length),this[D]&128?(255-this[D]+1)*-1:this[D]},d.prototype.readInt16LE=function(D,Z){D=D>>>0,Z||fe(D,2,this.length);const he=this[D]|this[D+1]<<8;return he&32768?he|4294901760:he},d.prototype.readInt16BE=function(D,Z){D=D>>>0,Z||fe(D,2,this.length);const he=this[D+1]|this[D]<<8;return he&32768?he|4294901760:he},d.prototype.readInt32LE=function(D,Z){return D=D>>>0,Z||fe(D,4,this.length),this[D]|this[D+1]<<8|this[D+2]<<16|this[D+3]<<24},d.prototype.readInt32BE=function(D,Z){return D=D>>>0,Z||fe(D,4,this.length),this[D]<<24|this[D+1]<<16|this[D+2]<<8|this[D+3]},d.prototype.readBigInt64LE=Mt(function(D){D=D>>>0,Ee(D,"offset");const Z=this[D],he=this[D+7];(Z===void 0||he===void 0)&&ce(D,this.length-8);const De=this[D+4]+this[D+5]*2**8+this[D+6]*2**16+(he<<24);return(BigInt(De)<<BigInt(32))+BigInt(Z+this[++D]*2**8+this[++D]*2**16+this[++D]*2**24)}),d.prototype.readBigInt64BE=Mt(function(D){D=D>>>0,Ee(D,"offset");const Z=this[D],he=this[D+7];(Z===void 0||he===void 0)&&ce(D,this.length-8);const De=(Z<<24)+this[++D]*2**16+this[++D]*2**8+this[++D];return(BigInt(De)<<BigInt(32))+BigInt(this[++D]*2**24+this[++D]*2**16+this[++D]*2**8+he)}),d.prototype.readFloatLE=function(D,Z){return D=D>>>0,Z||fe(D,4,this.length),n.read(this,D,!0,23,4)},d.prototype.readFloatBE=function(D,Z){return D=D>>>0,Z||fe(D,4,this.length),n.read(this,D,!1,23,4)},d.prototype.readDoubleLE=function(D,Z){return D=D>>>0,Z||fe(D,8,this.length),n.read(this,D,!0,52,8)},d.prototype.readDoubleBE=function(D,Z){return D=D>>>0,Z||fe(D,8,this.length),n.read(this,D,!1,52,8)};function ve(be,D,Z,he,De,we){if(!d.isBuffer(be))throw new TypeError('"buffer" argument must be a Buffer instance');if(D>De||D<we)throw new RangeError('"value" argument is out of bounds');if(Z+he>be.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(D,Z,he,De){if(D=+D,Z=Z>>>0,he=he>>>0,!De){const ue=Math.pow(2,8*he)-1;ve(this,D,Z,he,ue,0)}let we=1,Ae=0;for(this[Z]=D&255;++Ae<he&&(we*=256);)this[Z+Ae]=D/we&255;return Z+he},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(D,Z,he,De){if(D=+D,Z=Z>>>0,he=he>>>0,!De){const ue=Math.pow(2,8*he)-1;ve(this,D,Z,he,ue,0)}let we=he-1,Ae=1;for(this[Z+we]=D&255;--we>=0&&(Ae*=256);)this[Z+we]=D/Ae&255;return Z+he},d.prototype.writeUint8=d.prototype.writeUInt8=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,1,255,0),this[Z]=D&255,Z+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,2,65535,0),this[Z]=D&255,this[Z+1]=D>>>8,Z+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,2,65535,0),this[Z]=D>>>8,this[Z+1]=D&255,Z+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,4,4294967295,0),this[Z+3]=D>>>24,this[Z+2]=D>>>16,this[Z+1]=D>>>8,this[Z]=D&255,Z+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,4,4294967295,0),this[Z]=D>>>24,this[Z+1]=D>>>16,this[Z+2]=D>>>8,this[Z+3]=D&255,Z+4};function je(be,D,Z,he,De){Ce(D,he,De,be,Z,7);let we=Number(D&BigInt(4294967295));be[Z++]=we,we=we>>8,be[Z++]=we,we=we>>8,be[Z++]=we,we=we>>8,be[Z++]=we;let Ae=Number(D>>BigInt(32)&BigInt(4294967295));return be[Z++]=Ae,Ae=Ae>>8,be[Z++]=Ae,Ae=Ae>>8,be[Z++]=Ae,Ae=Ae>>8,be[Z++]=Ae,Z}function Ne(be,D,Z,he,De){Ce(D,he,De,be,Z,7);let we=Number(D&BigInt(4294967295));be[Z+7]=we,we=we>>8,be[Z+6]=we,we=we>>8,be[Z+5]=we,we=we>>8,be[Z+4]=we;let Ae=Number(D>>BigInt(32)&BigInt(4294967295));return be[Z+3]=Ae,Ae=Ae>>8,be[Z+2]=Ae,Ae=Ae>>8,be[Z+1]=Ae,Ae=Ae>>8,be[Z]=Ae,Z+8}d.prototype.writeBigUInt64LE=Mt(function(D,Z=0){return je(this,D,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Mt(function(D,Z=0){return Ne(this,D,Z,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(D,Z,he,De){if(D=+D,Z=Z>>>0,!De){const ft=Math.pow(2,8*he-1);ve(this,D,Z,he,ft-1,-ft)}let we=0,Ae=1,ue=0;for(this[Z]=D&255;++we<he&&(Ae*=256);)D<0&&ue===0&&this[Z+we-1]!==0&&(ue=1),this[Z+we]=(D/Ae>>0)-ue&255;return Z+he},d.prototype.writeIntBE=function(D,Z,he,De){if(D=+D,Z=Z>>>0,!De){const ft=Math.pow(2,8*he-1);ve(this,D,Z,he,ft-1,-ft)}let we=he-1,Ae=1,ue=0;for(this[Z+we]=D&255;--we>=0&&(Ae*=256);)D<0&&ue===0&&this[Z+we+1]!==0&&(ue=1),this[Z+we]=(D/Ae>>0)-ue&255;return Z+he},d.prototype.writeInt8=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,1,127,-128),D<0&&(D=255+D+1),this[Z]=D&255,Z+1},d.prototype.writeInt16LE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,2,32767,-32768),this[Z]=D&255,this[Z+1]=D>>>8,Z+2},d.prototype.writeInt16BE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,2,32767,-32768),this[Z]=D>>>8,this[Z+1]=D&255,Z+2},d.prototype.writeInt32LE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,4,2147483647,-2147483648),this[Z]=D&255,this[Z+1]=D>>>8,this[Z+2]=D>>>16,this[Z+3]=D>>>24,Z+4},d.prototype.writeInt32BE=function(D,Z,he){return D=+D,Z=Z>>>0,he||ve(this,D,Z,4,2147483647,-2147483648),D<0&&(D=4294967295+D+1),this[Z]=D>>>24,this[Z+1]=D>>>16,this[Z+2]=D>>>8,this[Z+3]=D&255,Z+4},d.prototype.writeBigInt64LE=Mt(function(D,Z=0){return je(this,D,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Mt(function(D,Z=0){return Ne(this,D,Z,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Se(be,D,Z,he,De,we){if(Z+he>be.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("Index out of range")}function ye(be,D,Z,he,De){return D=+D,Z=Z>>>0,De||Se(be,D,Z,4),n.write(be,D,Z,he,23,4),Z+4}d.prototype.writeFloatLE=function(D,Z,he){return ye(this,D,Z,!0,he)},d.prototype.writeFloatBE=function(D,Z,he){return ye(this,D,Z,!1,he)};function Fe(be,D,Z,he,De){return D=+D,Z=Z>>>0,De||Se(be,D,Z,8),n.write(be,D,Z,he,52,8),Z+8}d.prototype.writeDoubleLE=function(D,Z,he){return Fe(this,D,Z,!0,he)},d.prototype.writeDoubleBE=function(D,Z,he){return Fe(this,D,Z,!1,he)},d.prototype.copy=function(D,Z,he,De){if(!d.isBuffer(D))throw new TypeError("argument should be a Buffer");if(he||(he=0),!De&&De!==0&&(De=this.length),Z>=D.length&&(Z=D.length),Z||(Z=0),De>0&&De<he&&(De=he),De===he||D.length===0||this.length===0)return 0;if(Z<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(De<0)throw new RangeError("sourceEnd out of bounds");De>this.length&&(De=this.length),D.length-Z<De-he&&(De=D.length-Z+he);const we=De-he;return this===D&&typeof i.prototype.copyWithin=="function"?this.copyWithin(Z,he,De):i.prototype.set.call(D,this.subarray(he,De),Z),we},d.prototype.fill=function(D,Z,he,De){if(typeof D=="string"){if(typeof Z=="string"?(De=Z,Z=0,he=this.length):typeof he=="string"&&(De=he,he=this.length),De!==void 0&&typeof De!="string")throw new TypeError("encoding must be a string");if(typeof De=="string"&&!d.isEncoding(De))throw new TypeError("Unknown encoding: "+De);if(D.length===1){const Ae=D.charCodeAt(0);(De==="utf8"&&Ae<128||De==="latin1")&&(D=Ae)}}else typeof D=="number"?D=D&255:typeof D=="boolean"&&(D=Number(D));if(Z<0||this.length<Z||this.length<he)throw new RangeError("Out of range index");if(he<=Z)return this;Z=Z>>>0,he=he===void 0?this.length:he>>>0,D||(D=0);let we;if(typeof D=="number")for(we=Z;we<he;++we)this[we]=D;else{const Ae=d.isBuffer(D)?D:d.from(D,De),ue=Ae.length;if(ue===0)throw new TypeError('The value "'+D+'" is invalid for argument "value"');for(we=0;we<he-Z;++we)this[we+Z]=Ae[we%ue]}return this};const Xe={};function Le(be,D,Z){Xe[be]=class extends Z{constructor(){super(),Object.defineProperty(this,"message",{value:D.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${be}]`,this.stack,delete this.name}get code(){return be}set code(De){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:De,writable:!0})}toString(){return`${this.name} [${be}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(be){return be?`${be} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(be,D){return`The "${be}" argument must be of type number. Received type ${typeof D}`},TypeError),Le("ERR_OUT_OF_RANGE",function(be,D,Z){let he=`The value of "${be}" is out of range.`,De=Z;return Number.isInteger(Z)&&Math.abs(Z)>2**32?De=Ie(String(Z)):typeof Z=="bigint"&&(De=String(Z),(Z>BigInt(2)**BigInt(32)||Z<-(BigInt(2)**BigInt(32)))&&(De=Ie(De)),De+="n"),he+=` It must be ${D}. Received ${De}`,he},RangeError);function Ie(be){let D="",Z=be.length;const he=be[0]==="-"?1:0;for(;Z>=he+4;Z-=3)D=`_${be.slice(Z-3,Z)}${D}`;return`${be.slice(0,Z)}${D}`}function B(be,D,Z){Ee(D,"offset"),(be[D]===void 0||be[D+Z]===void 0)&&ce(D,be.length-(Z+1))}function Ce(be,D,Z,he,De,we){if(be>Z||be<D){const Ae=typeof D=="bigint"?"n":"";let ue;throw D===0||D===BigInt(0)?ue=`>= 0${Ae} and < 2${Ae} ** ${(we+1)*8}${Ae}`:ue=`>= -(2${Ae} ** ${(we+1)*8-1}${Ae}) and < 2 ** ${(we+1)*8-1}${Ae}`,new Xe.ERR_OUT_OF_RANGE("value",ue,be)}B(he,De,we)}function Ee(be,D){if(typeof be!="number")throw new Xe.ERR_INVALID_ARG_TYPE(D,"number",be)}function ce(be,D,Z){throw Math.floor(be)!==be?(Ee(be,Z),new Xe.ERR_OUT_OF_RANGE("offset","an integer",be)):D<0?new Xe.ERR_BUFFER_OUT_OF_BOUNDS:new Xe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${D}`,be)}const oe=/[^+/0-9A-Za-z-_]/g;function ee(be){if(be=be.split("=")[0],be=be.trim().replace(oe,""),be.length<2)return"";for(;be.length%4!==0;)be=be+"=";return be}function _e(be,D){D=D||1/0;let Z;const he=be.length;let De=null;const we=[];for(let Ae=0;Ae<he;++Ae){if(Z=be.charCodeAt(Ae),Z>55295&&Z<57344){if(!De){if(Z>56319){(D-=3)>-1&&we.push(239,191,189);continue}else if(Ae+1===he){(D-=3)>-1&&we.push(239,191,189);continue}De=Z;continue}if(Z<56320){(D-=3)>-1&&we.push(239,191,189),De=Z;continue}Z=(De-55296<<10|Z-56320)+65536}else De&&(D-=3)>-1&&we.push(239,191,189);if(De=null,Z<128){if((D-=1)<0)break;we.push(Z)}else if(Z<2048){if((D-=2)<0)break;we.push(Z>>6|192,Z&63|128)}else if(Z<65536){if((D-=3)<0)break;we.push(Z>>12|224,Z>>6&63|128,Z&63|128)}else if(Z<1114112){if((D-=4)<0)break;we.push(Z>>18|240,Z>>12&63|128,Z>>6&63|128,Z&63|128)}else throw new Error("Invalid code point")}return we}function Pe(be){const D=[];for(let Z=0;Z<be.length;++Z)D.push(be.charCodeAt(Z)&255);return D}function ke(be,D){let Z,he,De;const we=[];for(let Ae=0;Ae<be.length&&!((D-=2)<0);++Ae)Z=be.charCodeAt(Ae),he=Z>>8,De=Z%256,we.push(De),we.push(he);return we}function We(be){return t.toByteArray(ee(be))}function Nt(be,D,Z,he){let De;for(De=0;De<he&&!(De+Z>=D.length||De>=be.length);++De)D[De+Z]=be[De];return De}function it(be,D){return be instanceof D||be!=null&&be.constructor!=null&&be.constructor.name!=null&&be.constructor.name===D.name}function Ct(be){return be!==be}const Ft=function(){const be="0123456789abcdef",D=new Array(256);for(let Z=0;Z<16;++Z){const he=Z*16;for(let De=0;De<16;++De)D[he+De]=be[Z]+be[De]}return D}();function Mt(be){return typeof BigInt>"u"?Zt:be}function Zt(){throw new Error("BigInt not supported")}})(_A);const Qt=_A.Buffer,Lr=_A.Buffer;var $d={exports:{}},O4;function uJ(){if(O4)return $d.exports;O4=1;const e=typeof Qt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(o,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Qt.isBuffer(o)&&(o=o.toString()),o&&o.charCodeAt(0)===65279&&(o=o.slice(1));const d=JSON.parse(o,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",m=u&&u.constructorAction||"error";if(h==="ignore"&&m==="ignore")return d;if(h!=="ignore"&&m!=="ignore"){if(t.test(o)===!1&&n.test(o)===!1)return d}else if(h!=="ignore"&&m==="ignore"){if(t.test(o)===!1)return d}else if(n.test(o)===!1)return d;return a(d,{protoAction:h,constructorAction:m,safe:u&&u.safe})}function a(o,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[o];for(;h.length;){const m=h;h=[];for(const g of m){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return o}function i(o,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,u)}finally{Error.stackTraceLimit=d}}function s(o,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(o,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return $d.exports=i,$d.exports.default=i,$d.exports.parse=i,$d.exports.safeParse=s,$d.exports.scan=a,$d.exports}var dJ=uJ();const Up=xi(dJ);var fJ={};function ha(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function hJ(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function pJ(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function mJ(){let e="",t,n=[],r,a;function i(l,u){if(l===""){s(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){o(l,"");return}const h=l.slice(0,d),m=d+1,g=m<l.length&&l[m]===" "?l.slice(m+1):l.slice(m);o(h,g)}function s(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function o(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=gJ(e,l);e=h;for(let m=0;m<d.length;m++)i(d[m],u)},flush(l){i(e,l),s(l)}})}function gJ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function Vp(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var Af=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=tJ(n,t);if(e==null)return a;if(n.includes(r))throw new u5({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},qi=Af();function yJ(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function bJ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Pw(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function D5({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Nv({message:`${r} API key must be a string.`});if(typeof da>"u")throw new Nv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=fJ[t],e==null)throw new Nv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Nv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var nx=Symbol.for("vercel.ai.validator");function vJ(e){return{[nx]:!0,validate:e}}function wJ(e){return typeof e=="object"&&e!==null&&nx in e&&e[nx]===!0&&"validate"in e}function xJ(e){return wJ(e)?e:_J(e)}function _J(e){return vJ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function SJ({value:e,schema:t}){const n=Hp({value:e,schema:t});if(!n.success)throw tx.wrap({value:e,cause:n.error});return n.value}function Hp({value:e,schema:t}){const n=xJ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:tx.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:tx.wrap({value:e,cause:r})}}}function EJ({text:e,schema:t}){try{const n=Up.parse(e);return t==null?n:SJ({value:n,schema:t})}catch(n){throw ex.isInstance(n)||tx.isInstance(n)?n:new ex({text:e,cause:n})}}function mf({text:e,schema:t}){try{const n=Up.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Hp({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:ex.isInstance(n)?n:new ex({text:e,cause:n})}}}function rx(e){try{return Up.parse(e),!0}catch{return!1}}function k1({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Hp({value:t[e],schema:n});if(!r.success)throw new u5({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var CJ=()=>globalThis.fetch,pa=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>M5({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),TJ=async({url:e,headers:t,formData:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>M5({url:e,headers:t,body:{content:n,values:Object.fromEntries(n.entries())},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),M5=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=CJ()})=>{try{const o=await s(e,{method:"POST",headers:bJ(t),body:n.content,signal:i}),l=Vp(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw Pw(d)||Gs.isInstance(d)?d:new Gs({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Pw(u)||Gs.isInstance(u))?u:new Gs({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(Pw(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new Gs({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}};async function PT(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var Nf=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=Vp(r);if(s.trim()==="")return{responseHeaders:o,value:new Gs({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=EJ({text:s,schema:e});return{responseHeaders:o,value:new Gs({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new Gs({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},qp=e=>async({response:t})=>{const n=Vp(t);if(t.body==null)throw new s5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(mJ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(mf({text:r,schema:e}))}}))}},rs=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=mf({text:a,schema:e}),s=Vp(t);if(!i.success)throw new Gs({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},kJ=()=>async({response:e,url:t,requestBodyValues:n})=>{const r=Vp(e);if(!e.body)throw new Gs({message:"Response body is empty",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0});try{const a=await e.arrayBuffer();return{responseHeaders:r,value:new Uint8Array(a)}}catch(a){throw new Gs({message:"Failed to read response as array buffer",url:t,requestBodyValues:n,statusCode:e.status,responseHeaders:r,responseBody:void 0,cause:a})}},{btoa:AJ,atob:NJ}=globalThis;function A1(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=NJ(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function Lu(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return AJ(t)}function N1(e){return e==null?void 0:e.replace(/\/$/,"")}var or;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const s of a)i[s]=s;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(o=>typeof a[a[o]]!="number"),s={};for(const o of i)s[o]=a[o];return e.objectValues(s)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&i.push(s);return i},e.find=(a,i)=>{for(const s of a)if(i(s))return s},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(s=>typeof s=="string"?`'${s}'`:s).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(or||(or={}));var FT;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(FT||(FT={}));const rn=or.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),lc=e=>{switch(typeof e){case"undefined":return rn.undefined;case"string":return rn.string;case"number":return isNaN(e)?rn.nan:rn.number;case"boolean":return rn.boolean;case"function":return rn.function;case"bigint":return rn.bigint;case"symbol":return rn.symbol;case"object":return Array.isArray(e)?rn.array:e===null?rn.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?rn.promise:typeof Map<"u"&&e instanceof Map?rn.map:typeof Set<"u"&&e instanceof Set?rn.set:typeof Date<"u"&&e instanceof Date?rn.date:rn.object;default:return rn.unknown}},Bt=or.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),RJ=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class ws extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const s of i.issues)if(s.code==="invalid_union")s.unionErrors.map(a);else if(s.code==="invalid_return_type")a(s.returnTypeError);else if(s.code==="invalid_arguments")a(s.argumentsError);else if(s.path.length===0)r._errors.push(n(s));else{let o=r,l=0;for(;l<s.path.length;){const u=s.path[l];l===s.path.length-1?(o[u]=o[u]||{_errors:[]},o[u]._errors.push(n(s))):o[u]=o[u]||{_errors:[]},o=o[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof ws))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,or.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}ws.create=e=>new ws(e);const gp=(e,t)=>{let n;switch(e.code){case Bt.invalid_type:e.received===rn.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Bt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,or.jsonStringifyReplacer)}`;break;case Bt.unrecognized_keys:n=`Unrecognized key(s) in object: ${or.joinValues(e.keys,", ")}`;break;case Bt.invalid_union:n="Invalid input";break;case Bt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${or.joinValues(e.options)}`;break;case Bt.invalid_enum_value:n=`Invalid enum value. Expected ${or.joinValues(e.options)}, received '${e.received}'`;break;case Bt.invalid_arguments:n="Invalid function arguments";break;case Bt.invalid_return_type:n="Invalid function return type";break;case Bt.invalid_date:n="Invalid date";break;case Bt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:or.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Bt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Bt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Bt.custom:n="Invalid input";break;case Bt.invalid_intersection_types:n="Intersection results could not be merged";break;case Bt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Bt.not_finite:n="Number must be finite";break;default:n=t.defaultError,or.assertNever(e)}return{message:n}};let O5=gp;function IJ(e){O5=e}function ax(){return O5}const ix=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],s={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let o="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)o=u(s,{data:t,defaultError:o}).message;return{...a,path:i,message:o}},jJ=[];function tn(e,t){const n=ax(),r=ix({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===gp?void 0:gp].filter(a=>!!a)});e.common.issues.push(r)}class bi{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return kn;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,s=await a.value;r.push({key:i,value:s})}return bi.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:s}=a;if(i.status==="aborted"||s.status==="aborted")return kn;i.status==="dirty"&&t.dirty(),s.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof s.value<"u"||a.alwaysSet)&&(r[i.value]=s.value)}return{status:t.value,value:r}}}const kn=Object.freeze({status:"aborted"}),Kh=e=>({status:"dirty",value:e}),Mi=e=>({status:"valid",value:e}),LT=e=>e.status==="aborted",BT=e=>e.status==="dirty",gf=e=>e.status==="valid",d0=e=>typeof Promise<"u"&&e instanceof Promise;function sx(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function P5(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var dn;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(dn||(dn={}));var Bg,$g;class Sl{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const P4=(e,t)=>{if(gf(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new ws(e.common.issues);return this._error=n,this._error}}};function Ln(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(s,o)=>{var l,u;const{message:d}=e;return s.code==="invalid_enum_value"?{message:d??o.defaultError}:typeof o.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:o.defaultError}:s.code!=="invalid_type"?{message:o.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:o.defaultError}},description:a}}class Vn{get description(){return this._def.description}_getType(t){return lc(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:lc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new bi,ctx:{common:t.parent.common,data:t.data,parsedType:lc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(d0(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:lc(t)},i=this._parseSync({data:t,path:a.path,parent:a});return P4(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:lc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return gf(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>gf(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:lc(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(d0(a)?a:Promise.resolve(a));return P4(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const s=t(a),o=()=>i.addIssue({code:Bt.custom,...r(a)});return typeof Promise<"u"&&s instanceof Promise?s.then(l=>l?!0:(o(),!1)):s?!0:(o(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Ao({schema:this,typeName:qt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return xo.create(this,this._def)}nullable(){return Uu.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return wo.create(this)}promise(){return bp.create(this,this._def)}or(t){return m0.create([this,t],this._def)}and(t){return g0.create(this,t,this._def)}transform(t){return new Ao({...Ln(this._def),schema:this,typeName:qt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new x0({...Ln(this._def),innerType:this,defaultValue:n,typeName:qt.ZodDefault})}brand(){return new EA({typeName:qt.ZodBranded,type:this,...Ln(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new _0({...Ln(this._def),innerType:this,catchValue:n,typeName:qt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return _y.create(this,t)}readonly(){return S0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const DJ=/^c[^\s-]{8,}$/i,MJ=/^[0-9a-z]+$/,OJ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,PJ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,FJ=/^[a-z0-9_-]{21}$/i,LJ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,BJ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,$J=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,zJ="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nE;const UJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,VJ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,HJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,qJ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,GJ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,WJ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,F5="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KJ=new RegExp(`^${F5}$`);function L5(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function ZJ(e){return new RegExp(`^${L5(e)}$`)}function B5(e){let t=`${F5}T${L5(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function YJ(e,t){return!!((t==="v4"||!t)&&UJ.test(e)||(t==="v6"||!t)&&HJ.test(e))}function XJ(e,t){if(!LJ.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function JJ(e,t){return!!((t==="v4"||!t)&&VJ.test(e)||(t==="v6"||!t)&&qJ.test(e))}class yo extends Vn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==rn.string){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.string,received:i.parsedType}),kn}const r=new bi;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const s=t.data.length>i.value,o=t.data.length<i.value;(s||o)&&(a=this._getOrReturnCtx(t,a),s?tn(a,{code:Bt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):o&&tn(a,{code:Bt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")$J.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"email",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")nE||(nE=new RegExp(zJ,"u")),nE.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"emoji",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")PJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"uuid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")FJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"nanoid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")DJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")MJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cuid2",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")OJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ulid",code:Bt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),tn(a,{validation:"url",code:Bt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"regex",code:Bt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?B5(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?KJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?ZJ(i).test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?BJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"duration",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?YJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"ip",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?XJ(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"jwt",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?JJ(t.data,i.version)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"cidr",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?GJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64",code:Bt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?WJ.test(t.data)||(a=this._getOrReturnCtx(t,a),tn(a,{validation:"base64url",code:Bt.invalid_string,message:i.message}),r.dirty()):or.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Bt.invalid_string,...dn.errToObj(r)})}_addCheck(t){return new yo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...dn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...dn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...dn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...dn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...dn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...dn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...dn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...dn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...dn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...dn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...dn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...dn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...dn.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...dn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...dn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...dn.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...dn.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...dn.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...dn.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...dn.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...dn.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...dn.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...dn.errToObj(n)})}nonempty(t){return this.min(1,dn.errToObj(t))}trim(){return new yo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new yo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new yo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}yo.create=e=>{var t;return new yo({checks:[],typeName:qt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};function QJ(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),s=parseInt(t.toFixed(a).replace(".",""));return i%s/Math.pow(10,a)}class Bu extends Vn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==rn.number){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.number,received:i.parsedType}),kn}let r;const a=new bi;for(const i of this._def.checks)i.kind==="int"?or.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?QJ(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_finite,message:i.message}),a.dirty()):or.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,dn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,dn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,dn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,dn.toString(n))}setLimit(t,n,r,a){return new Bu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:dn.toString(a)}]})}_addCheck(t){return new Bu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:dn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:dn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:dn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:dn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:dn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:dn.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:dn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:dn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:dn.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&or.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Bu.create=e=>new Bu({checks:[],typeName:qt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class $u extends Vn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==rn.bigint)return this._getInvalidInput(t);let r;const a=new bi;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),tn(r,{code:Bt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):or.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Bt.invalid_type,expected:rn.bigint,received:n.parsedType}),kn}gte(t,n){return this.setLimit("min",t,!0,dn.toString(n))}gt(t,n){return this.setLimit("min",t,!1,dn.toString(n))}lte(t,n){return this.setLimit("max",t,!0,dn.toString(n))}lt(t,n){return this.setLimit("max",t,!1,dn.toString(n))}setLimit(t,n,r,a){return new $u({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:dn.toString(a)}]})}_addCheck(t){return new $u({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:dn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:dn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:dn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:dn.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:dn.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}$u.create=e=>{var t;return new $u({checks:[],typeName:qt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ln(e)})};class f0 extends Vn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==rn.boolean){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.boolean,received:r.parsedType}),kn}return Mi(t.data)}}f0.create=e=>new f0({typeName:qt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ln(e)});class yf extends Vn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==rn.date){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_type,expected:rn.date,received:i.parsedType}),kn}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return tn(i,{code:Bt.invalid_date}),kn}const r=new bi;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),tn(a,{code:Bt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):or.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new yf({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:dn.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:dn.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}yf.create=e=>new yf({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:qt.ZodDate,...Ln(e)});class ox extends Vn{_parse(t){if(this._getType(t)!==rn.symbol){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.symbol,received:r.parsedType}),kn}return Mi(t.data)}}ox.create=e=>new ox({typeName:qt.ZodSymbol,...Ln(e)});class h0 extends Vn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.undefined,received:r.parsedType}),kn}return Mi(t.data)}}h0.create=e=>new h0({typeName:qt.ZodUndefined,...Ln(e)});class p0 extends Vn{_parse(t){if(this._getType(t)!==rn.null){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.null,received:r.parsedType}),kn}return Mi(t.data)}}p0.create=e=>new p0({typeName:qt.ZodNull,...Ln(e)});class yp extends Vn{constructor(){super(...arguments),this._any=!0}_parse(t){return Mi(t.data)}}yp.create=e=>new yp({typeName:qt.ZodAny,...Ln(e)});class uf extends Vn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Mi(t.data)}}uf.create=e=>new uf({typeName:qt.ZodUnknown,...Ln(e)});class Tc extends Vn{_parse(t){const n=this._getOrReturnCtx(t);return tn(n,{code:Bt.invalid_type,expected:rn.never,received:n.parsedType}),kn}}Tc.create=e=>new Tc({typeName:qt.ZodNever,...Ln(e)});class lx extends Vn{_parse(t){if(this._getType(t)!==rn.undefined){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.void,received:r.parsedType}),kn}return Mi(t.data)}}lx.create=e=>new lx({typeName:qt.ZodVoid,...Ln(e)});class wo extends Vn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==rn.array)return tn(n,{code:Bt.invalid_type,expected:rn.array,received:n.parsedType}),kn;if(a.exactLength!==null){const s=n.data.length>a.exactLength.value,o=n.data.length<a.exactLength.value;(s||o)&&(tn(n,{code:s?Bt.too_big:Bt.too_small,minimum:o?a.exactLength.value:void 0,maximum:s?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(tn(n,{code:Bt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(tn(n,{code:Bt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((s,o)=>a.type._parseAsync(new Sl(n,s,n.path,o)))).then(s=>bi.mergeArray(r,s));const i=[...n.data].map((s,o)=>a.type._parseSync(new Sl(n,s,n.path,o)));return bi.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new wo({...this._def,minLength:{value:t,message:dn.toString(n)}})}max(t,n){return new wo({...this._def,maxLength:{value:t,message:dn.toString(n)}})}length(t,n){return new wo({...this._def,exactLength:{value:t,message:dn.toString(n)}})}nonempty(t){return this.min(1,t)}}wo.create=(e,t)=>new wo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:qt.ZodArray,...Ln(t)});function qh(e){if(e instanceof Xr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=xo.create(qh(r))}return new Xr({...e._def,shape:()=>t})}else return e instanceof wo?new wo({...e._def,type:qh(e.element)}):e instanceof xo?xo.create(qh(e.unwrap())):e instanceof Uu?Uu.create(qh(e.unwrap())):e instanceof El?El.create(e.items.map(t=>qh(t))):e}class Xr extends Vn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=or.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==rn.object){const u=this._getOrReturnCtx(t);return tn(u,{code:Bt.invalid_type,expected:rn.object,received:u.parsedType}),kn}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:s}=this._getCached(),o=[];if(!(this._def.catchall instanceof Tc&&this._def.unknownKeys==="strip"))for(const u in a.data)s.includes(u)||o.push(u);const l=[];for(const u of s){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new Sl(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Tc){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of o)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")o.length>0&&(tn(a,{code:Bt.unrecognized_keys,keys:o}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of o){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new Sl(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>bi.mergeObjectSync(r,u)):bi.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return dn.errToObj,new Xr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,s,o;const l=(s=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&s!==void 0?s:r.defaultError;return n.code==="unrecognized_keys"?{message:(o=dn.errToObj(t).message)!==null&&o!==void 0?o:l}:{message:l}}}:{}})}strip(){return new Xr({...this._def,unknownKeys:"strip"})}passthrough(){return new Xr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Xr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Xr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:qt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Xr({...this._def,catchall:t})}pick(t){const n={};return or.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Xr({...this._def,shape:()=>n})}omit(t){const n={};return or.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Xr({...this._def,shape:()=>n})}deepPartial(){return qh(this)}partial(t){const n={};return or.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Xr({...this._def,shape:()=>n})}required(t){const n={};return or.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof xo;)i=i._def.innerType;n[r]=i}}),new Xr({...this._def,shape:()=>n})}keyof(){return $5(or.objectKeys(this.shape))}}Xr.create=(e,t)=>new Xr({shape:()=>e,unknownKeys:"strip",catchall:Tc.create(),typeName:qt.ZodObject,...Ln(t)});Xr.strictCreate=(e,t)=>new Xr({shape:()=>e,unknownKeys:"strict",catchall:Tc.create(),typeName:qt.ZodObject,...Ln(t)});Xr.lazycreate=(e,t)=>new Xr({shape:e,unknownKeys:"strip",catchall:Tc.create(),typeName:qt.ZodObject,...Ln(t)});class m0 extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const o of i)if(o.result.status==="valid")return o.result;for(const o of i)if(o.result.status==="dirty")return n.common.issues.push(...o.ctx.common.issues),o.result;const s=i.map(o=>new ws(o.ctx.common.issues));return tn(n,{code:Bt.invalid_union,unionErrors:s}),kn}if(n.common.async)return Promise.all(r.map(async i=>{const s={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:s}),ctx:s}})).then(a);{let i;const s=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&s.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const o=s.map(l=>new ws(l));return tn(n,{code:Bt.invalid_union,unionErrors:o}),kn}}get options(){return this._def.options}}m0.create=(e,t)=>new m0({options:e,typeName:qt.ZodUnion,...Ln(t)});const ic=e=>e instanceof b0?ic(e.schema):e instanceof Ao?ic(e.innerType()):e instanceof v0?[e.value]:e instanceof zu?e.options:e instanceof w0?or.objectValues(e.enum):e instanceof x0?ic(e._def.innerType):e instanceof h0?[void 0]:e instanceof p0?[null]:e instanceof xo?[void 0,...ic(e.unwrap())]:e instanceof Uu?[null,...ic(e.unwrap())]:e instanceof EA||e instanceof S0?ic(e.unwrap()):e instanceof _0?ic(e._def.innerType):[];class R1 extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.object)return tn(n,{code:Bt.invalid_type,expected:rn.object,received:n.parsedType}),kn;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:Bt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),kn)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const s=ic(i.shape[t]);if(!s.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const o of s){if(a.has(o))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(o)}`);a.set(o,i)}}return new R1({typeName:qt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...Ln(r)})}}function $T(e,t){const n=lc(e),r=lc(t);if(e===t)return{valid:!0,data:e};if(n===rn.object&&r===rn.object){const a=or.objectKeys(t),i=or.objectKeys(e).filter(o=>a.indexOf(o)!==-1),s={...e,...t};for(const o of i){const l=$T(e[o],t[o]);if(!l.valid)return{valid:!1};s[o]=l.data}return{valid:!0,data:s}}else if(n===rn.array&&r===rn.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const s=e[i],o=t[i],l=$T(s,o);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===rn.date&&r===rn.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class g0 extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,s)=>{if(LT(i)||LT(s))return kn;const o=$T(i.value,s.value);return o.valid?((BT(i)||BT(s))&&n.dirty(),{status:n.value,value:o.data}):(tn(r,{code:Bt.invalid_intersection_types}),kn)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,s])=>a(i,s)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}g0.create=(e,t,n)=>new g0({left:e,right:t,typeName:qt.ZodIntersection,...Ln(n)});class El extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.array)return tn(r,{code:Bt.invalid_type,expected:rn.array,received:r.parsedType}),kn;if(r.data.length<this._def.items.length)return tn(r,{code:Bt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),kn;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:Bt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((s,o)=>{const l=this._def.items[o]||this._def.rest;return l?l._parse(new Sl(r,s,r.path,o)):null}).filter(s=>!!s);return r.common.async?Promise.all(i).then(s=>bi.mergeArray(n,s)):bi.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new El({...this._def,rest:t})}}El.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new El({items:e,typeName:qt.ZodTuple,rest:null,...Ln(t)})};class y0 extends Vn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.object)return tn(r,{code:Bt.invalid_type,expected:rn.object,received:r.parsedType}),kn;const a=[],i=this._def.keyType,s=this._def.valueType;for(const o in r.data)a.push({key:i._parse(new Sl(r,o,r.path,o)),value:s._parse(new Sl(r,r.data[o],r.path,o)),alwaysSet:o in r.data});return r.common.async?bi.mergeObjectAsync(n,a):bi.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Vn?new y0({keyType:t,valueType:n,typeName:qt.ZodRecord,...Ln(r)}):new y0({keyType:yo.create(),valueType:t,typeName:qt.ZodRecord,...Ln(n)})}}class cx extends Vn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.map)return tn(r,{code:Bt.invalid_type,expected:rn.map,received:r.parsedType}),kn;const a=this._def.keyType,i=this._def.valueType,s=[...r.data.entries()].map(([o,l],u)=>({key:a._parse(new Sl(r,o,r.path,[u,"key"])),value:i._parse(new Sl(r,l,r.path,[u,"value"]))}));if(r.common.async){const o=new Map;return Promise.resolve().then(async()=>{for(const l of s){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return kn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}})}else{const o=new Map;for(const l of s){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return kn;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),o.set(u.value,d.value)}return{status:n.value,value:o}}}}cx.create=(e,t,n)=>new cx({valueType:t,keyType:e,typeName:qt.ZodMap,...Ln(n)});class bf extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==rn.set)return tn(r,{code:Bt.invalid_type,expected:rn.set,received:r.parsedType}),kn;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(tn(r,{code:Bt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(tn(r,{code:Bt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function s(l){const u=new Set;for(const d of l){if(d.status==="aborted")return kn;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const o=[...r.data.values()].map((l,u)=>i._parse(new Sl(r,l,r.path,u)));return r.common.async?Promise.all(o).then(l=>s(l)):s(o)}min(t,n){return new bf({...this._def,minSize:{value:t,message:dn.toString(n)}})}max(t,n){return new bf({...this._def,maxSize:{value:t,message:dn.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}bf.create=(e,t)=>new bf({valueType:e,minSize:null,maxSize:null,typeName:qt.ZodSet,...Ln(t)});class sp extends Vn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.function)return tn(n,{code:Bt.invalid_type,expected:rn.function,received:n.parsedType}),kn;function r(o,l){return ix({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ax(),gp].filter(u=>!!u),issueData:{code:Bt.invalid_arguments,argumentsError:l}})}function a(o,l){return ix({data:o,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,ax(),gp].filter(u=>!!u),issueData:{code:Bt.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},s=n.data;if(this._def.returns instanceof bp){const o=this;return Mi(async function(...l){const u=new ws([]),d=await o._def.args.parseAsync(l,i).catch(g=>{throw u.addIssue(r(l,g)),u}),h=await Reflect.apply(s,this,d);return await o._def.returns._def.type.parseAsync(h,i).catch(g=>{throw u.addIssue(a(h,g)),u})})}else{const o=this;return Mi(function(...l){const u=o._def.args.safeParse(l,i);if(!u.success)throw new ws([r(l,u.error)]);const d=Reflect.apply(s,this,u.data),h=o._def.returns.safeParse(d,i);if(!h.success)throw new ws([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new sp({...this._def,args:El.create(t).rest(uf.create())})}returns(t){return new sp({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new sp({args:t||El.create([]).rest(uf.create()),returns:n||uf.create(),typeName:qt.ZodFunction,...Ln(r)})}}class b0 extends Vn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}b0.create=(e,t)=>new b0({getter:e,typeName:qt.ZodLazy,...Ln(t)});class v0 extends Vn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return tn(n,{received:n.data,code:Bt.invalid_literal,expected:this._def.value}),kn}return{status:"valid",value:t.data}}get value(){return this._def.value}}v0.create=(e,t)=>new v0({value:e,typeName:qt.ZodLiteral,...Ln(t)});function $5(e,t){return new zu({values:e,typeName:qt.ZodEnum,...Ln(t)})}class zu extends Vn{constructor(){super(...arguments),Bg.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{expected:or.joinValues(r),received:n.parsedType,code:Bt.invalid_type}),kn}if(sx(this,Bg)||P5(this,Bg,new Set(this._def.values)),!sx(this,Bg).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return tn(n,{received:n.data,code:Bt.invalid_enum_value,options:r}),kn}return Mi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return zu.create(t,{...this._def,...n})}exclude(t,n=this._def){return zu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Bg=new WeakMap;zu.create=$5;class w0 extends Vn{constructor(){super(...arguments),$g.set(this,void 0)}_parse(t){const n=or.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==rn.string&&r.parsedType!==rn.number){const a=or.objectValues(n);return tn(r,{expected:or.joinValues(a),received:r.parsedType,code:Bt.invalid_type}),kn}if(sx(this,$g)||P5(this,$g,new Set(or.getValidEnumValues(this._def.values))),!sx(this,$g).has(t.data)){const a=or.objectValues(n);return tn(r,{received:r.data,code:Bt.invalid_enum_value,options:a}),kn}return Mi(t.data)}get enum(){return this._def.values}}$g=new WeakMap;w0.create=(e,t)=>new w0({values:e,typeName:qt.ZodNativeEnum,...Ln(t)});class bp extends Vn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==rn.promise&&n.common.async===!1)return tn(n,{code:Bt.invalid_type,expected:rn.promise,received:n.parsedType}),kn;const r=n.parsedType===rn.promise?n.data:Promise.resolve(n.data);return Mi(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}bp.create=(e,t)=>new bp({type:e,typeName:qt.ZodPromise,...Ln(t)});class Ao extends Vn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:s=>{tn(r,s),s.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const s=a.transform(r.data,i);if(r.common.async)return Promise.resolve(s).then(async o=>{if(n.value==="aborted")return kn;const l=await this._def.schema._parseAsync({data:o,path:r.path,parent:r});return l.status==="aborted"?kn:l.status==="dirty"||n.value==="dirty"?Kh(l.value):l});{if(n.value==="aborted")return kn;const o=this._def.schema._parseSync({data:s,path:r.path,parent:r});return o.status==="aborted"?kn:o.status==="dirty"||n.value==="dirty"?Kh(o.value):o}}if(a.type==="refinement"){const s=o=>{const l=a.refinement(o,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return o};if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?kn:(o.status==="dirty"&&n.dirty(),s(o.value),{status:n.value,value:o.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>o.status==="aborted"?kn:(o.status==="dirty"&&n.dirty(),s(o.value).then(()=>({status:n.value,value:o.value}))))}if(a.type==="transform")if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!gf(s))return s;const o=a.transform(s.value,i);if(o instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:o}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>gf(s)?Promise.resolve(a.transform(s.value,i)).then(o=>({status:n.value,value:o})):s);or.assertNever(a)}}Ao.create=(e,t,n)=>new Ao({schema:e,typeName:qt.ZodEffects,effect:t,...Ln(n)});Ao.createWithPreprocess=(e,t,n)=>new Ao({schema:t,effect:{type:"preprocess",transform:e},typeName:qt.ZodEffects,...Ln(n)});class xo extends Vn{_parse(t){return this._getType(t)===rn.undefined?Mi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}xo.create=(e,t)=>new xo({innerType:e,typeName:qt.ZodOptional,...Ln(t)});class Uu extends Vn{_parse(t){return this._getType(t)===rn.null?Mi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Uu.create=(e,t)=>new Uu({innerType:e,typeName:qt.ZodNullable,...Ln(t)});class x0 extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===rn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}x0.create=(e,t)=>new x0({innerType:e,typeName:qt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ln(t)});class _0 extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return d0(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new ws(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new ws(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}_0.create=(e,t)=>new _0({innerType:e,typeName:qt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ln(t)});class ux extends Vn{_parse(t){if(this._getType(t)!==rn.nan){const r=this._getOrReturnCtx(t);return tn(r,{code:Bt.invalid_type,expected:rn.nan,received:r.parsedType}),kn}return{status:"valid",value:t.data}}}ux.create=e=>new ux({typeName:qt.ZodNaN,...Ln(e)});const eQ=Symbol("zod_brand");class EA extends Vn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class _y extends Vn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?kn:i.status==="dirty"?(n.dirty(),Kh(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?kn:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new _y({in:t,out:n,typeName:qt.ZodPipeline})}}class S0 extends Vn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(gf(a)&&(a.value=Object.freeze(a.value)),a);return d0(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}S0.create=(e,t)=>new S0({innerType:e,typeName:qt.ZodReadonly,...Ln(t)});function F4(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function z5(e,t={},n){return e?yp.create().superRefine((r,a)=>{var i,s;const o=e(r);if(o instanceof Promise)return o.then(l=>{var u,d;if(!l){const h=F4(t,r),m=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:m})}});if(!o){const l=F4(t,r),u=(s=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&s!==void 0?s:!0;a.addIssue({code:"custom",...l,fatal:u})}}):yp.create()}const tQ={object:Xr.lazycreate};var qt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(qt||(qt={}));const nQ=(e,t={message:`Input not instance of ${e.name}`})=>z5(n=>n instanceof e,t),U5=yo.create,V5=Bu.create,rQ=ux.create,aQ=$u.create,H5=f0.create,iQ=yf.create,sQ=ox.create,oQ=h0.create,lQ=p0.create,cQ=yp.create,uQ=uf.create,dQ=Tc.create,fQ=lx.create,hQ=wo.create,pQ=Xr.create,mQ=Xr.strictCreate,gQ=m0.create,yQ=R1.create,bQ=g0.create,vQ=El.create,wQ=y0.create,xQ=cx.create,_Q=bf.create,SQ=sp.create,EQ=b0.create,CQ=v0.create,TQ=zu.create,kQ=w0.create,AQ=bp.create,L4=Ao.create,NQ=xo.create,RQ=Uu.create,IQ=Ao.createWithPreprocess,jQ=_y.create,DQ=()=>U5().optional(),MQ=()=>V5().optional(),OQ=()=>H5().optional(),PQ={string:e=>yo.create({...e,coerce:!0}),number:e=>Bu.create({...e,coerce:!0}),boolean:e=>f0.create({...e,coerce:!0}),bigint:e=>$u.create({...e,coerce:!0}),date:e=>yf.create({...e,coerce:!0})},FQ=kn;var z=Object.freeze({__proto__:null,defaultErrorMap:gp,setErrorMap:IJ,getErrorMap:ax,makeIssue:ix,EMPTY_PATH:jJ,addIssueToContext:tn,ParseStatus:bi,INVALID:kn,DIRTY:Kh,OK:Mi,isAborted:LT,isDirty:BT,isValid:gf,isAsync:d0,get util(){return or},get objectUtil(){return FT},ZodParsedType:rn,getParsedType:lc,ZodType:Vn,datetimeRegex:B5,ZodString:yo,ZodNumber:Bu,ZodBigInt:$u,ZodBoolean:f0,ZodDate:yf,ZodSymbol:ox,ZodUndefined:h0,ZodNull:p0,ZodAny:yp,ZodUnknown:uf,ZodNever:Tc,ZodVoid:lx,ZodArray:wo,ZodObject:Xr,ZodUnion:m0,ZodDiscriminatedUnion:R1,ZodIntersection:g0,ZodTuple:El,ZodRecord:y0,ZodMap:cx,ZodSet:bf,ZodFunction:sp,ZodLazy:b0,ZodLiteral:v0,ZodEnum:zu,ZodNativeEnum:w0,ZodPromise:bp,ZodEffects:Ao,ZodTransformer:Ao,ZodOptional:xo,ZodNullable:Uu,ZodDefault:x0,ZodCatch:_0,ZodNaN:ux,BRAND:eQ,ZodBranded:EA,ZodPipeline:_y,ZodReadonly:S0,custom:z5,Schema:Vn,ZodSchema:Vn,late:tQ,get ZodFirstPartyTypeKind(){return qt},coerce:PQ,any:cQ,array:hQ,bigint:aQ,boolean:H5,date:iQ,discriminatedUnion:yQ,effect:L4,enum:TQ,function:SQ,instanceof:nQ,intersection:bQ,lazy:EQ,literal:CQ,map:xQ,nan:rQ,nativeEnum:kQ,never:dQ,null:lQ,nullable:RQ,number:V5,object:pQ,oboolean:OQ,onumber:MQ,optional:NQ,ostring:DQ,pipeline:jQ,preprocess:IQ,promise:AQ,record:wQ,set:_Q,strictObject:mQ,string:U5,symbol:sQ,transformer:L4,tuple:vQ,undefined:oQ,union:gQ,unknown:uQ,void:fQ,NEVER:FQ,ZodIssueCode:Bt,quotelessJson:RJ,ZodError:ws});function LQ({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:s}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:s});break}case"developer":{r.push({role:"developer",content:s});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=n;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{if(s.length===1&&s[0].type==="text"){r.push({role:"user",content:s[0].text});break}r.push({role:"user",content:s.map((o,l)=>{var u,d,h,m;switch(o.type){case"text":return{type:"text",text:o.text};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(u=o.mimeType)!=null?u:"image/jpeg"};base64,${Lu(o.image)}`,detail:(h=(d=o.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(o.data instanceof URL)throw new dr({functionality:"'File content parts with URL data' functionality not supported."});switch(o.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:o.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:o.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(m=o.filename)!=null?m:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${o.data}`}};default:throw new dr({functionality:`File content part type ${o.mimeType} in user messages`})}}}})});break}case"assistant":{let o="";const l=[];for(const u of s)switch(u.type){case"text":{o+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new dr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:o,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:o,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const o of s)t?r.push({role:"function",name:o.toolName,content:JSON.stringify(o.result)}):r.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result)});break}default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return{messages:r,warnings:a}}function B4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function dx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var CA=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),Cl=Nf({errorSchema:CA,errorToMessage:e=>e.error.message});function fx({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function BQ({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const s=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(s==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(s.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new dr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:s.toolName},toolWarnings:i}}}const o=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):o.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(s==null)return{tools:o,tool_choice:void 0,toolWarnings:i};const l=s.type;switch(l){case"auto":case"none":case"required":return{tools:o,tool_choice:l,toolWarnings:i};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:s.toolName}},toolWarnings:i};default:{const u=l;throw new dr({functionality:`Unsupported tool choice type: ${u}`})}}}var $Q=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:zT(this.modelId)}get defaultObjectGenerationMode(){return VQ(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,g,v,b,w,x,_,E;const T=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const R=this.settings.useLegacyFunctionCalling;if(R&&this.settings.parallelToolCalls===!0)throw new dr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(R&&this.supportsStructuredOutputs)throw new dr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:j,warnings:I}=LQ({prompt:t,useLegacyFunctionCalling:R,systemMessageMode:HQ(this.modelId)});k.push(...I);const P={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(m=u.name)!=null?m:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(w=h==null?void 0:h.openai)==null?void 0:w.prediction,reasoning_effort:(_=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?_:this.settings.reasoningEffort,messages:j};switch(zT(this.modelId)?(P.temperature!=null&&(P.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),P.top_p!=null&&(P.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),P.frequency_penalty!=null&&(P.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),P.presence_penalty!=null&&(P.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),P.logit_bias!=null&&(P.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),P.logprobs!=null&&(P.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),P.top_logprobs!=null&&(P.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),P.max_tokens!=null&&(P.max_completion_tokens==null&&(P.max_completion_tokens=P.max_tokens),P.max_tokens=void 0)):(this.modelId.startsWith("gpt-4o-search-preview")||this.modelId.startsWith("gpt-4o-mini-search-preview"))&&P.temperature!=null&&(P.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for the search preview models and has been removed."})),T){case"regular":{const{tools:O,tool_choice:U,functions:M,function_call:W,toolWarnings:V}=BQ({mode:e,useLegacyFunctionCalling:R,structuredOutputs:this.supportsStructuredOutputs});return{args:{...P,tools:O,tool_choice:U,functions:M,function_call:W},warnings:[...k,...V]}}case"object-json":return{args:{...P,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:R?{...P,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...P,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const O=T;throw new Error(`Unsupported type: ${O}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:m,rawValue:g}=await pa({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:u,failedResponseHandler:Cl,successfulResponseHandler:rs(zQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=u,w=m.choices[0],x=(t=m.usage)==null?void 0:t.completion_tokens_details,_=(n=m.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(_==null?void 0:_.cached_tokens)!=null&&(E.openai.cachedPromptTokens=_==null?void 0:_.cached_tokens),{text:(r=w.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&w.message.function_call?[{toolCallType:"function",toolCallId:qi(),toolName:w.message.function_call.name,args:w.message.function_call.arguments}]:(a=w.message.tool_calls)==null?void 0:a.map(T=>{var k;return{toolCallType:"function",toolCallId:(k=T.id)!=null?k:qi(),toolName:T.function.name,args:T.function.arguments}}),finishReason:dx(w.finish_reason),usage:{promptTokens:(s=(i=m.usage)==null?void 0:i.prompt_tokens)!=null?s:NaN,completionTokens:(l=(o=m.usage)==null?void 0:o.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(u)},response:fx(m),warnings:d,logprobs:B4(w.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:_.toolCallId,toolName:_.toolName,argsTextDelta:_.args}),x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await pa({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:r,failedResponseHandler:Cl,successfulResponseHandler:qp(UQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:s,...o}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,m=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,w){var x,_,E,T,k,R,j,I,P,O,U,M;if(!b.success){u="error",w.enqueue({type:"error",error:b.error});return}const W=b.value;if("error"in W){u="error",w.enqueue({type:"error",error:W.error});return}if(m&&(m=!1,w.enqueue({type:"response-metadata",...fx(W)})),W.usage!=null){const{prompt_tokens:q,completion_tokens:te,prompt_tokens_details:G,completion_tokens_details:J}=W.usage;d={promptTokens:q??void 0,completionTokens:te??void 0},(J==null?void 0:J.reasoning_tokens)!=null&&(v.openai.reasoningTokens=J==null?void 0:J.reasoning_tokens),(J==null?void 0:J.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=J==null?void 0:J.accepted_prediction_tokens),(J==null?void 0:J.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=J==null?void 0:J.rejected_prediction_tokens),(G==null?void 0:G.cached_tokens)!=null&&(v.openai.cachedPromptTokens=G==null?void 0:G.cached_tokens)}const V=W.choices[0];if((V==null?void 0:V.finish_reason)!=null&&(u=dx(V.finish_reason)),(V==null?void 0:V.delta)==null)return;const ie=V.delta;ie.content!=null&&w.enqueue({type:"text-delta",textDelta:ie.content});const ae=B4(V==null?void 0:V.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const ne=g&&ie.function_call!=null?[{type:"function",id:qi(),function:ie.function_call,index:0}]:ie.tool_calls;if(ne!=null)for(const q of ne){const te=q.index;if(l[te]==null){if(q.type!=="function")throw new ip({data:q,message:"Expected 'function' type."});if(q.id==null)throw new ip({data:q,message:"Expected 'id' to be a string."});if(((x=q.function)==null?void 0:x.name)==null)throw new ip({data:q,message:"Expected 'function.name' to be a string."});l[te]={id:q.id,type:"function",function:{name:q.function.name,arguments:(_=q.function.arguments)!=null?_:""},hasFinished:!1};const J=l[te];((E=J.function)==null?void 0:E.name)!=null&&((T=J.function)==null?void 0:T.arguments)!=null&&(J.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:J.id,toolName:J.function.name,argsTextDelta:J.function.arguments}),rx(J.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=J.id)!=null?k:qi(),toolName:J.function.name,args:J.function.arguments}),J.hasFinished=!0));continue}const G=l[te];G.hasFinished||(((R=q.function)==null?void 0:R.arguments)!=null&&(G.function.arguments+=(I=(j=q.function)==null?void 0:j.arguments)!=null?I:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:G.id,toolName:G.function.name,argsTextDelta:(P=q.function.arguments)!=null?P:""}),((O=G.function)==null?void 0:O.name)!=null&&((U=G.function)==null?void 0:U.arguments)!=null&&rx(G.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=G.id)!=null?M:qi(),toolName:G.function.name,args:G.function.arguments}),G.hasFinished=!0))}},flush(b){var w,x;b.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(w=d.promptTokens)!=null?w:NaN,completionTokens:(x=d.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},q5=z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish(),prompt_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),completion_tokens_details:z.object({reasoning_tokens:z.number().nullish(),accepted_prediction_tokens:z.number().nullish(),rejected_prediction_tokens:z.number().nullish()}).nullish()}).nullish(),zQ=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),function_call:z.object({arguments:z.string(),name:z.string()}).nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),index:z.number(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullish()})),usage:q5}),UQ=z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),function_call:z.object({name:z.string().optional(),arguments:z.string().optional()}).nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").nullish(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullish(),index:z.number()})),usage:q5}),CA]);function zT(e){return e.startsWith("o")}function VQ(e){return e.startsWith("gpt-4o-audio-preview")}function HQ(e){var t,n;return zT(e)?(n=(t=qQ[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var qQ={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},o3:{systemMessageMode:"developer"},"o3-2025-04-16":{systemMessageMode:"developer"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"},"o4-mini":{systemMessageMode:"developer"},"o4-mini-2025-04-16":{systemMessageMode:"developer"}};function GQ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new sc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new dr({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new dr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new dr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function $4(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var WQ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var m;const g=e.type,v=[];s!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:w}=GQ({prompt:n,inputFormat:t}),x=[...w??[],...u??[]],_={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(g){case"regular":{if((m=e.tools)!=null&&m.length)throw new dr({functionality:"tools"});if(e.toolChoice)throw new dr({functionality:"toolChoice"});return{args:_,warnings:v}}case"object-json":throw new dr({functionality:"object-json mode"});case"object-tool":throw new dr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await pa({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:t,failedResponseHandler:Cl,successfulResponseHandler:rs(KQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:dx(l.finish_reason),logprobs:$4(l.logprobs),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:r,body:i},response:fx(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await pa({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:r,failedResponseHandler:Cl,successfulResponseHandler:qp(ZQ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(m,g){if(!m.success){l="error",g.enqueue({type:"error",error:m.error});return}const v=m.value;if("error"in v){l="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...fx(v)})),v.usage!=null&&(u={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=dx(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const w=$4(b==null?void 0:b.logprobs);w!=null&&w.length&&(d===void 0&&(d=[]),d.push(...w))},flush(m){m.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},KQ=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullish()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()})}),ZQ=z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string().nullish(),index:z.number(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullish()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),CA]),YQ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new C1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await pa({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:ha(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Cl,successfulResponseHandler:rs(XQ),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},XQ=z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()}),JQ={"dall-e-3":1,"dall-e-2":10,"gpt-image-1":10},QQ=new Set(["gpt-image-1"]),eee=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:JQ[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h;const m=[];r!=null&&m.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&m.push({type:"unsupported-setting",setting:"seed"});const g=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await pa({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:ha(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},...QQ.has(this.modelId)?{}:{response_format:"b64_json"}},failedResponseHandler:Cl,successfulResponseHandler:rs(tee),abortSignal:o,fetch:this.config.fetch});return{images:v.data.map(w=>w.b64_json),warnings:m,response:{timestamp:g,modelId:this.modelId,headers:b}}}},tee=z.object({data:z.array(z.object({b64_json:z.string()}))}),nee=z.object({include:z.array(z.string()).nullish(),language:z.string().nullish(),prompt:z.string().nullish(),temperature:z.number().min(0).max(1).nullish().default(0),timestampGranularities:z.array(z.enum(["word","segment"])).nullish().default(["segment"])}),z4={afrikaans:"af",arabic:"ar",armenian:"hy",azerbaijani:"az",belarusian:"be",bosnian:"bs",bulgarian:"bg",catalan:"ca",chinese:"zh",croatian:"hr",czech:"cs",danish:"da",dutch:"nl",english:"en",estonian:"et",finnish:"fi",french:"fr",galician:"gl",german:"de",greek:"el",hebrew:"he",hindi:"hi",hungarian:"hu",icelandic:"is",indonesian:"id",italian:"it",japanese:"ja",kannada:"kn",kazakh:"kk",korean:"ko",latvian:"lv",lithuanian:"lt",macedonian:"mk",malay:"ms",marathi:"mr",maori:"mi",nepali:"ne",norwegian:"no",persian:"fa",polish:"pl",portuguese:"pt",romanian:"ro",russian:"ru",serbian:"sr",slovak:"sk",slovenian:"sl",spanish:"es",swahili:"sw",swedish:"sv",tagalog:"tl",tamil:"ta",thai:"th",turkish:"tr",ukrainian:"uk",urdu:"ur",vietnamese:"vi",welsh:"cy"},ree=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({audio:e,mediaType:t,providerOptions:n}){var r,a,i,s,o;const l=[],u=k1({provider:"openai",providerOptions:n,schema:nee}),d=new FormData,h=e instanceof Uint8Array?new Blob([e]):new Blob([A1(e)]);if(d.append("model",this.modelId),d.append("file",new File([h],"audio",{type:t})),u){const m={include:(r=u.include)!=null?r:void 0,language:(a=u.language)!=null?a:void 0,prompt:(i=u.prompt)!=null?i:void 0,temperature:(s=u.temperature)!=null?s:void 0,timestamp_granularities:(o=u.timestampGranularities)!=null?o:void 0};for(const g in m){const v=m[g];v!==void 0&&d.append(g,String(v))}}return{formData:d,warnings:l}}async doGenerate(e){var t,n,r,a,i,s;const o=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{formData:l,warnings:u}=this.getArgs(e),{value:d,responseHeaders:h,rawValue:m}=await TJ({url:this.config.url({path:"/audio/transcriptions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),formData:l,failedResponseHandler:Cl,successfulResponseHandler:rs(aee),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=d.language!=null&&d.language in z4?z4[d.language]:void 0;return{text:d.text,segments:(i=(a=d.words)==null?void 0:a.map(v=>({text:v.word,startSecond:v.start,endSecond:v.end})))!=null?i:[],language:g,durationInSeconds:(s=d.duration)!=null?s:void 0,warnings:u,response:{timestamp:o,modelId:this.modelId,headers:h,body:m}}}},aee=z.object({text:z.string(),language:z.string().nullish(),duration:z.number().nullish(),words:z.array(z.object({word:z.string(),start:z.number(),end:z.number()})).nullish()});function iee({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=t;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{n.push({role:"user",content:i.map((s,o)=>{var l,u,d,h;switch(s.type){case"text":return{type:"input_text",text:s.text};case"image":return{type:"input_image",image_url:s.image instanceof URL?s.image.toString():`data:${(l=s.mimeType)!=null?l:"image/jpeg"};base64,${Lu(s.image)}`,detail:(d=(u=s.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(s.data instanceof URL)throw new dr({functionality:"File URLs in user messages"});switch(s.mimeType){case"application/pdf":return{type:"input_file",filename:(h=s.filename)!=null?h:`part-${o}.pdf`,file_data:`data:application/pdf;base64,${s.data}`};default:throw new dr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const s of i)switch(s.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:s.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:s.toolCallId,name:s.toolName,arguments:JSON.stringify(s.args)});break}}break}case"tool":{for(const s of i)n.push({type:"function_call_output",call_id:s.toolCallId,output:JSON.stringify(s.result)});break}default:{const s=a;throw new Error(`Unsupported role: ${s}`)}}return{messages:n,warnings:r}}function U4({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function see({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)switch(l.type){case"function":s.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":s.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:s,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:s,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=o;throw new dr({functionality:`Unsupported tool choice type: ${l}`})}}}var oee=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsStructuredOutputs=!0,this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:s,frequencyPenalty:o,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var m,g,v;const b=[],w=Cee(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),s!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),o!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:_,warnings:E}=iee({prompt:u,systemMessageMode:w.systemMessageMode});b.push(...E);const T=k1({provider:"openai",providerOptions:d,schema:Tee}),k=(m=T==null?void 0:T.strictSchemas)!=null?m:!0,R={model:this.modelId,input:_,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:T==null?void 0:T.metadata,parallel_tool_calls:T==null?void 0:T.parallelToolCalls,previous_response_id:T==null?void 0:T.previousResponseId,store:T==null?void 0:T.store,user:T==null?void 0:T.user,instructions:T==null?void 0:T.instructions,...w.isReasoningModel&&((T==null?void 0:T.reasoningEffort)!=null||(T==null?void 0:T.reasoningSummary)!=null)&&{reasoning:{...(T==null?void 0:T.reasoningEffort)!=null&&{effort:T.reasoningEffort},...(T==null?void 0:T.reasoningSummary)!=null&&{summary:T.reasoningSummary}}},...w.requiredAutoTruncation&&{truncation:"auto"}};switch(w.isReasoningModel&&(R.temperature!=null&&(R.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),R.top_p!=null&&(R.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:j,tool_choice:I,toolWarnings:P}=see({mode:e,strict:k});return{args:{...R,tools:j,tool_choice:I},warnings:[...b,...P]}}case"object-json":return{args:{...R,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...R,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const j=x;throw new Error(`Unsupported type: ${j}`)}}}async doGenerate(e){var t,n,r,a,i,s,o;const{args:l,warnings:u}=this.getArgs(e),{responseHeaders:d,value:h,rawValue:m}=await pa({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:l,failedResponseHandler:Cl,successfulResponseHandler:rs(z.object({id:z.string(),created_at:z.number(),model:z.string(),output:z.array(z.discriminatedUnion("type",[z.object({type:z.literal("message"),role:z.literal("assistant"),content:z.array(z.object({type:z.literal("output_text"),text:z.string(),annotations:z.array(z.object({type:z.literal("url_citation"),start_index:z.number(),end_index:z.number(),url:z.string(),title:z.string()}))}))}),z.object({type:z.literal("function_call"),call_id:z.string(),name:z.string(),arguments:z.string()}),z.object({type:z.literal("web_search_call")}),z.object({type:z.literal("computer_call")}),z.object({type:z.literal("reasoning"),summary:z.array(z.object({type:z.literal("summary_text"),text:z.string()}))})])),incomplete_details:z.object({reason:z.string()}).nullable(),usage:G5})),abortSignal:e.abortSignal,fetch:this.config.fetch}),g=h.output.filter(w=>w.type==="message").flatMap(w=>w.content).filter(w=>w.type==="output_text"),v=h.output.filter(w=>w.type==="function_call").map(w=>({toolCallType:"function",toolCallId:w.call_id,toolName:w.name,args:w.arguments})),b=(n=(t=h.output.find(w=>w.type==="reasoning"))==null?void 0:t.summary)!=null?n:null;return{text:g.map(w=>w.text).join(`
`),sources:g.flatMap(w=>w.annotations.map(x=>{var _,E,T;return{sourceType:"url",id:(T=(E=(_=this.config).generateId)==null?void 0:E.call(_))!=null?T:qi(),url:x.url,title:x.title}})),finishReason:U4({finishReason:(r=h.incomplete_details)==null?void 0:r.reason,hasToolCalls:v.length>0}),toolCalls:v.length>0?v:void 0,reasoning:b?b.map(w=>({type:"text",text:w.text})):void 0,usage:{promptTokens:h.usage.input_tokens,completionTokens:h.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:d,body:m},request:{body:JSON.stringify(l)},response:{id:h.id,timestamp:new Date(h.created_at*1e3),modelId:h.model},providerMetadata:{openai:{responseId:h.id,cachedPromptTokens:(i=(a=h.usage.input_tokens_details)==null?void 0:a.cached_tokens)!=null?i:null,reasoningTokens:(o=(s=h.usage.output_tokens_details)==null?void 0:s.reasoning_tokens)!=null?o:null}},warnings:u}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await pa({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:Cl,successfulResponseHandler:qp(gee),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let s="unknown",o=NaN,l=NaN,u=null,d=null,h=null;const m={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var w,x,_,E,T,k,R,j;if(!v.success){s="error",b.enqueue({type:"error",error:v.error});return}const I=v.value;if(_ee(I))I.item.type==="function_call"&&(m[I.output_index]={toolName:I.item.name,toolCallId:I.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:I.item.call_id,toolName:I.item.name,argsTextDelta:I.item.arguments}));else if(xee(I)){const P=m[I.output_index];P!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:P.toolCallId,toolName:P.toolName,argsTextDelta:I.delta})}else wee(I)?(h=I.response.id,b.enqueue({type:"response-metadata",id:I.response.id,timestamp:new Date(I.response.created_at*1e3),modelId:I.response.model})):yee(I)?b.enqueue({type:"text-delta",textDelta:I.delta}):Eee(I)?b.enqueue({type:"reasoning",textDelta:I.delta}):bee(I)&&I.item.type==="function_call"?(m[I.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:I.item.call_id,toolName:I.item.name,args:I.item.arguments})):vee(I)?(s=U4({finishReason:(w=I.response.incomplete_details)==null?void 0:w.reason,hasToolCalls:g}),o=I.response.usage.input_tokens,l=I.response.usage.output_tokens,u=(_=(x=I.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?_:u,d=(T=(E=I.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?T:d):See(I)&&b.enqueue({type:"source",source:{sourceType:"url",id:(j=(R=(k=i.config).generateId)==null?void 0:R.call(k))!=null?j:qi(),url:I.annotation.url,title:I.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:s,usage:{promptTokens:o,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},G5=z.object({input_tokens:z.number(),input_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),output_tokens:z.number(),output_tokens_details:z.object({reasoning_tokens:z.number().nullish()}).nullish()}),lee=z.object({type:z.literal("response.output_text.delta"),delta:z.string()}),cee=z.object({type:z.enum(["response.completed","response.incomplete"]),response:z.object({incomplete_details:z.object({reason:z.string()}).nullish(),usage:G5})}),uee=z.object({type:z.literal("response.created"),response:z.object({id:z.string(),created_at:z.number(),model:z.string()})}),dee=z.object({type:z.literal("response.output_item.done"),output_index:z.number(),item:z.discriminatedUnion("type",[z.object({type:z.literal("message")}),z.object({type:z.literal("function_call"),id:z.string(),call_id:z.string(),name:z.string(),arguments:z.string(),status:z.literal("completed")})])}),fee=z.object({type:z.literal("response.function_call_arguments.delta"),item_id:z.string(),output_index:z.number(),delta:z.string()}),hee=z.object({type:z.literal("response.output_item.added"),output_index:z.number(),item:z.discriminatedUnion("type",[z.object({type:z.literal("message")}),z.object({type:z.literal("function_call"),id:z.string(),call_id:z.string(),name:z.string(),arguments:z.string()})])}),pee=z.object({type:z.literal("response.output_text.annotation.added"),annotation:z.object({type:z.literal("url_citation"),url:z.string(),title:z.string()})}),mee=z.object({type:z.literal("response.reasoning_summary_text.delta"),item_id:z.string(),output_index:z.number(),summary_index:z.number(),delta:z.string()}),gee=z.union([lee,cee,uee,dee,fee,hee,pee,mee,z.object({type:z.string()}).passthrough()]);function yee(e){return e.type==="response.output_text.delta"}function bee(e){return e.type==="response.output_item.done"}function vee(e){return e.type==="response.completed"||e.type==="response.incomplete"}function wee(e){return e.type==="response.created"}function xee(e){return e.type==="response.function_call_arguments.delta"}function _ee(e){return e.type==="response.output_item.added"}function See(e){return e.type==="response.output_text.annotation.added"}function Eee(e){return e.type==="response.reasoning_summary_text.delta"}function Cee(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var Tee=z.object({metadata:z.any().nullish(),parallelToolCalls:z.boolean().nullish(),previousResponseId:z.string().nullish(),store:z.boolean().nullish(),user:z.string().nullish(),reasoningEffort:z.string().nullish(),strictSchemas:z.boolean().nullish(),instructions:z.string().nullish(),reasoningSummary:z.string().nullish()}),kee=z.object({});function Aee({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:kee}}var Nee={webSearchPreview:Aee},Ree=z.object({instructions:z.string().nullish(),speed:z.number().min(.25).max(4).default(1).nullish()}),Iee=class{constructor(e,t){this.modelId=e,this.config=t,this.specificationVersion="v1"}get provider(){return this.config.provider}getArgs({text:e,voice:t="alloy",outputFormat:n="mp3",speed:r,instructions:a,providerOptions:i}){const s=[],o=k1({provider:"openai",providerOptions:i,schema:Ree}),l={model:this.modelId,input:e,voice:t,response_format:"mp3",speed:r,instructions:a};if(n&&(["mp3","opus","aac","flac","wav","pcm"].includes(n)?l.response_format=n:s.push({type:"unsupported-setting",setting:"outputFormat",details:`Unsupported output format: ${n}. Using mp3 instead.`})),o){const u={};for(const d in u){const h=u[d];h!==void 0&&(l[d]=h)}}return{requestBody:l,warnings:s}}async doGenerate(e){var t,n,r;const a=(r=(n=(t=this.config._internal)==null?void 0:t.currentDate)==null?void 0:n.call(t))!=null?r:new Date,{requestBody:i,warnings:s}=this.getArgs(e),{value:o,responseHeaders:l,rawValue:u}=await pa({url:this.config.url({path:"/audio/speech",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:i,failedResponseHandler:Cl,successfulResponseHandler:kJ(),abortSignal:e.abortSignal,fetch:this.config.fetch});return{audio:o,warnings:s,request:{body:JSON.stringify(i)},response:{timestamp:a,modelId:this.modelId,headers:l,body:u}}}};function W5(e={}){var t,n,r;const a=(t=N1(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",s=(r=e.name)!=null?r:"openai",o=()=>({Authorization:`Bearer ${D5({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(x,_={})=>new $Q(x,_,{provider:`${s}.chat`,url:({path:E})=>`${a}${E}`,headers:o,compatibility:i,fetch:e.fetch}),u=(x,_={})=>new WQ(x,_,{provider:`${s}.completion`,url:({path:E})=>`${a}${E}`,headers:o,compatibility:i,fetch:e.fetch}),d=(x,_={})=>new YQ(x,_,{provider:`${s}.embedding`,url:({path:E})=>`${a}${E}`,headers:o,fetch:e.fetch}),h=(x,_={})=>new eee(x,_,{provider:`${s}.image`,url:({path:E})=>`${a}${E}`,headers:o,fetch:e.fetch}),m=x=>new ree(x,{provider:`${s}.transcription`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),g=x=>new Iee(x,{provider:`${s}.speech`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),v=(x,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return x==="gpt-3.5-turbo-instruct"?u(x,_):l(x,_)},b=x=>new oee(x,{provider:`${s}.responses`,url:({path:_})=>`${a}${_}`,headers:o,fetch:e.fetch}),w=function(x,_){return v(x,_)};return w.languageModel=v,w.chat=l,w.completion=u,w.responses=b,w.embedding=d,w.textEmbedding=d,w.textEmbeddingModel=d,w.image=h,w.imageModel=h,w.transcription=m,w.transcriptionModel=m,w.speech=g,w.speechModel=g,w.tools=Nee,w}W5({compatibility:"strict"});function Us(e){if(jee(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:s,anyOf:o,oneOf:l,format:u,const:d,minLength:h,enum:m}=e,g={};if(n&&(g.description=n),r&&(g.required=r),u&&(g.format=u),d!==void 0&&(g.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),m!==void 0&&(g.enum=m),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,w])=>(v[b]=Us(w),v),{})),i&&(g.items=Array.isArray(i)?i.map(Us):Us(i)),s&&(g.allOf=s.map(Us)),o)if(o.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=o.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=Us(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(Us),g.nullable=!0}else g.anyOf=o.map(Us);return l&&(g.oneOf=l.map(Us)),h!==void 0&&(g.minLength=h),g}function jee(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function Dee(e){var t,n;const r=[],a=[];let i=!0;for(const{role:s,content:o}of e)switch(s){case"system":{if(!i)throw new dr({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:o});break}case"user":{i=!1;const l=[];for(const u of o)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:Lu(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:o.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new dr({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new dr({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:o.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function V4(e){return e.includes("/")?e:`models/${e}`}var Mee=z.object({error:z.object({code:z.number().nullable(),message:z.string(),status:z.string()})}),UT=Nf({errorSchema:Mee,errorToMessage:e=>e.error.message});function Oee(e,t,n,r){var a,i;const s=(a=e.tools)!=null&&a.length?e.tools:void 0,o=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:o};if(s==null)return{tools:void 0,toolConfig:void 0,toolWarnings:o};const d=[];for(const g of s)g.type==="provider-defined"?o.push({type:"unsupported-tool",tool:g}):d.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:Us(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:o};const m=h.type;switch(m){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:o};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:o};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:o};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:o};default:{const g=m;throw new dr({functionality:`Unsupported tool choice type: ${g}`})}}}function H4({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var Pee=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var m,g;const v=e.type,b=[],w=k1({provider:"google",providerOptions:h,schema:$ee}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:s,presencePenalty:o,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?Us(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:w==null?void 0:w.responseModalities,thinkingConfig:w==null?void 0:w.thinkingConfig},{contents:_,systemInstruction:E}=Dee(t);switch(v){case"regular":{const{tools:T,toolConfig:k,toolWarnings:R}=Oee(e,(m=this.settings.useSearchGrounding)!=null?m:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:T,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...R]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?Us(e.schema):void 0},contents:_,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:_,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:Us(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const T=v;throw new Error(`Unsupported type: ${T}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:s,warnings:o}=await this.getArgs(e),l=JSON.stringify(s),u=ha(await PT(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:m}=await pa({url:`${this.config.baseURL}/${V4(this.modelId)}:generateContent`,headers:u,body:s,failedResponseHandler:UT,successfulResponseHandler:rs(Lee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=s,b=h.candidates[0],w=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=q4({parts:w,generateId:this.config.generateId}),_=h.usageMetadata;return{text:G4(w),files:(t=W4(w))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:H4({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=_==null?void 0:_.promptTokenCount)!=null?n:NaN,completionTokens:(r=_==null?void 0:_.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:d,body:m},warnings:o,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:K4({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=ha(await PT(this.config.headers),e.headers),{responseHeaders:i,value:s}=await pa({url:`${this.config.baseURL}/${V4(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:UT,successfulResponseHandler:qp(Bee),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:o,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const m=this.config.generateId;let g=!1;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var w,x,_,E,T,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const R=v.value,j=R.usageMetadata;j!=null&&(d={promptTokens:(w=j.promptTokenCount)!=null?w:NaN,completionTokens:(x=j.candidatesTokenCount)!=null?x:NaN});const I=(_=R.candidates)==null?void 0:_[0];if(I==null)return;const P=I.content;if(P!=null){const O=G4(P.parts);O!=null&&b.enqueue({type:"text-delta",textDelta:O});const U=W4(P.parts);if(U!=null)for(const W of U)b.enqueue({type:"file",mimeType:W.inlineData.mimeType,data:W.inlineData.data});const M=q4({parts:P.parts,generateId:m});if(M!=null)for(const W of M)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:W.toolCallId,toolName:W.toolName,argsTextDelta:W.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:W.toolCallId,toolName:W.toolName,args:W.args}),g=!0}if(I.finishReason!=null){u=H4({finishReason:I.finishReason,hasToolCalls:g});const O=(E=K4({groundingMetadata:I.groundingMetadata,generateId:m}))!=null?E:[];for(const U of O)b.enqueue({type:"source",source:U});h={google:{groundingMetadata:(T=I.groundingMetadata)!=null?T:null,safetyRatings:(k=I.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:o,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function q4({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function G4(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function W4(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function K4({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var K5=z.object({role:z.string(),parts:z.array(z.union([z.object({text:z.string()}),z.object({functionCall:z.object({name:z.string(),args:z.unknown()})}),z.object({inlineData:z.object({mimeType:z.string(),data:z.string()})})])).nullish()}),Fee=z.object({web:z.object({uri:z.string(),title:z.string()}).nullish(),retrievedContext:z.object({uri:z.string(),title:z.string()}).nullish()}),Z5=z.object({webSearchQueries:z.array(z.string()).nullish(),retrievalQueries:z.array(z.string()).nullish(),searchEntryPoint:z.object({renderedContent:z.string()}).nullish(),groundingChunks:z.array(Fee).nullish(),groundingSupports:z.array(z.object({segment:z.object({startIndex:z.number().nullish(),endIndex:z.number().nullish(),text:z.string().nullish()}),segment_text:z.string().nullish(),groundingChunkIndices:z.array(z.number()).nullish(),supportChunkIndices:z.array(z.number()).nullish(),confidenceScores:z.array(z.number()).nullish(),confidenceScore:z.array(z.number()).nullish()})).nullish(),retrievalMetadata:z.union([z.object({webDynamicRetrievalScore:z.number()}),z.object({})]).nullish()}),Y5=z.object({category:z.string().nullish(),probability:z.string().nullish(),probabilityScore:z.number().nullish(),severity:z.string().nullish(),severityScore:z.number().nullish(),blocked:z.boolean().nullish()}),Lee=z.object({candidates:z.array(z.object({content:K5.nullish().or(z.object({}).strict()),finishReason:z.string().nullish(),safetyRatings:z.array(Y5).nullish(),groundingMetadata:Z5.nullish()})),usageMetadata:z.object({promptTokenCount:z.number().nullish(),candidatesTokenCount:z.number().nullish(),totalTokenCount:z.number().nullish()}).nullish()}),Bee=z.object({candidates:z.array(z.object({content:K5.nullish(),finishReason:z.string().nullish(),safetyRatings:z.array(Y5).nullish(),groundingMetadata:Z5.nullish()})).nullish(),usageMetadata:z.object({promptTokenCount:z.number().nullish(),candidatesTokenCount:z.number().nullish(),totalTokenCount:z.number().nullish()}).nullish()}),$ee=z.object({responseModalities:z.array(z.enum(["TEXT","IMAGE"])).nullish(),thinkingConfig:z.object({thinkingBudget:z.number().nullish()}).nullish()}),zee=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new C1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=ha(await PT(this.config.headers),t),{responseHeaders:a,value:i}=await pa({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(s=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:s}]},outputDimensionality:this.settings.outputDimensionality,taskType:this.settings.taskType}))},failedResponseHandler:UT,successfulResponseHandler:rs(Uee),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(s=>s.values),usage:void 0,rawResponse:{headers:a}}}},Uee=z.object({embeddings:z.array(z.object({values:z.array(z.number())}))});function Vee(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function X5(e={}){var t;const n=(t=N1(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":D5({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(o,l={})=>{var u;return new Pee(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:qi,isSupportedUrl:Vee,fetch:e.fetch})},i=(o,l={})=>new zee(o,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),s=function(o,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(o,l)};return s.languageModel=a,s.chat=a,s.generativeAI=a,s.embedding=i,s.textEmbedding=i,s.textEmbeddingModel=i,s}X5();var J5="vercel.ai.error",Hee=Symbol.for(J5),Q5,qee=class eF extends Error{constructor({name:t,message:n,cause:r}){super(n),this[Q5]=!0,this.name=t,this.cause=r}static isInstance(t){return eF.hasMarker(t,J5)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};Q5=Hee;var Wa=qee,tF="AI_APICallError",nF=`vercel.ai.error.${tF}`,Gee=Symbol.for(nF),rF,uc=class extends Wa{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:s,isRetryable:o=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:tF,message:e,cause:s}),this[rF]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=o,this.data=l}static isInstance(e){return Wa.hasMarker(e,nF)}};rF=Gee;var aF="AI_EmptyResponseBodyError",iF=`vercel.ai.error.${aF}`,Wee=Symbol.for(iF),sF,Kee=class extends Wa{constructor({message:e="Empty response body"}={}){super({name:aF,message:e}),this[sF]=!0}static isInstance(e){return Wa.hasMarker(e,iF)}};sF=Wee;function oF(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var lF="AI_InvalidArgumentError",cF=`vercel.ai.error.${lF}`,Zee=Symbol.for(cF),uF,Yee=class extends Wa{constructor({message:t,cause:n,argument:r}){super({name:lF,message:t,cause:n}),this[uF]=!0,this.argument=r}static isInstance(t){return Wa.hasMarker(t,cF)}};uF=Zee;var dF="AI_InvalidPromptError",fF=`vercel.ai.error.${dF}`,Xee=Symbol.for(fF),hF,Jee=class extends Wa{constructor({prompt:e,message:t,cause:n}){super({name:dF,message:`Invalid prompt: ${t}`,cause:n}),this[hF]=!0,this.prompt=e}static isInstance(e){return Wa.hasMarker(e,fF)}};hF=Xee;var pF="AI_InvalidResponseDataError",mF=`vercel.ai.error.${pF}`,Qee=Symbol.for(mF),gF,rE=class extends Wa{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:pF,message:t}),this[gF]=!0,this.data=e}static isInstance(e){return Wa.hasMarker(e,mF)}};gF=Qee;var yF="AI_JSONParseError",bF=`vercel.ai.error.${yF}`,ete=Symbol.for(bF),vF,hx=class extends Wa{constructor({text:e,cause:t}){super({name:yF,message:`JSON parsing failed: Text: ${e}.
Error message: ${oF(t)}`,cause:t}),this[vF]=!0,this.text=e}static isInstance(e){return Wa.hasMarker(e,bF)}};vF=ete;var wF="AI_LoadAPIKeyError",xF=`vercel.ai.error.${wF}`,tte=Symbol.for(xF),_F,Rv=class extends Wa{constructor({message:e}){super({name:wF,message:e}),this[_F]=!0}static isInstance(e){return Wa.hasMarker(e,xF)}};_F=tte;var SF="AI_TypeValidationError",EF=`vercel.ai.error.${SF}`,nte=Symbol.for(EF),CF,rte=class VT extends Wa{constructor({value:t,cause:n}){super({name:SF,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${oF(n)}`,cause:n}),this[CF]=!0,this.value=t}static isInstance(t){return Wa.hasMarker(t,EF)}static wrap({value:t,cause:n}){return VT.isInstance(n)&&n.value===t?n:new VT({value:t,cause:n})}};CF=nte;var px=rte,TF="AI_UnsupportedFunctionalityError",kF=`vercel.ai.error.${TF}`,ate=Symbol.for(kF),AF,Hs=class extends Wa{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:TF,message:t}),this[AF]=!0,this.functionality=e}static isInstance(e){return Wa.hasMarker(e,kF)}};AF=ate;let ite=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},Z4=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function aE(e){}function ste(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=aE,onError:n=aE,onRetry:r=aE,onComment:a}=e;let i="",s=!0,o,l="",u="";function d(b){const w=s?b.replace(/^\xEF\xBB\xBF/,""):b,[x,_]=ote(`${i}${w}`);for(const E of x)h(E);i=_,s=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const w=b.indexOf(":");if(w!==-1){const x=b.slice(0,w),_=b[w+1]===" "?2:1,E=b.slice(w+_);m(x,E,b);return}m(b,"",b)}function m(b,w,x){switch(b){case"event":u=w;break;case"data":l=`${l}${w}
`;break;case"id":o=w.includes("\0")?void 0:w;break;case"retry":/^\d+$/.test(w)?r(parseInt(w,10)):n(new Z4(`Invalid \`retry\` value: "${w}"`,{type:"invalid-retry",value:w,line:x}));break;default:n(new Z4(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:w,line:x}));break}}function g(){l.length>0&&t({id:o,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),o=void 0,l="",u=""}function v(b={}){i&&b.consume&&h(i),s=!0,o=void 0,l="",u="",i=""}return{feed:d,reset:v}}function ote(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let s=-1;if(a!==-1&&i!==-1?s=Math.min(a,i):a!==-1?s=a:i!==-1&&(s=i),s===-1){n=e.slice(r);break}else{const o=e.slice(r,s);t.push(o),r=s+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class lte extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=ste({onEvent:s=>{i.enqueue(s)},onError(s){t==="terminate"?i.error(s):typeof t=="function"&&t(s)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var cte={};function mx(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function I1(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var ute=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=ite(n,t);if(e==null)return a;if(n.includes(r))throw new Yee({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Iv=ute();function dte(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function iE(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function fte({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new Rv({message:`${r} API key must be a string.`});if(typeof da>"u")throw new Rv({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=cte[t],e==null)throw new Rv({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new Rv({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var HT=Symbol.for("vercel.ai.validator");function hte(e){return{[HT]:!0,validate:e}}function pte(e){return typeof e=="object"&&e!==null&&HT in e&&e[HT]===!0&&"validate"in e}function mte(e){return pte(e)?e:gte(e)}function gte(e){return hte(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function yte({value:e,schema:t}){const n=NF({value:e,schema:t});if(!n.success)throw px.wrap({value:e,cause:n.error});return n.value}function NF({value:e,schema:t}){const n=mte(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:px.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:px.wrap({value:e,cause:r})}}}function bte({text:e,schema:t}){try{const n=Up.parse(e);return t==null?n:yte({value:n,schema:t})}catch(n){throw hx.isInstance(n)||px.isInstance(n)?n:new hx({text:e,cause:n})}}function RF({text:e,schema:t}){try{const n=Up.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=NF({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:hx.isInstance(n)?n:new hx({text:e,cause:n})}}}function sE(e){try{return Up.parse(e),!0}catch{return!1}}var vte=()=>globalThis.fetch,gx=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s})=>wte({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:s}),wte=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:s=vte()})=>{try{const o=await s(e,{method:"POST",headers:dte(t),body:n.content,signal:i}),l=I1(o);if(!o.ok){let u;try{u=await a({response:o,url:e,requestBodyValues:n.values})}catch(d){throw iE(d)||uc.isInstance(d)?d:new uc({message:"Failed to process error response",cause:d,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:o,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(iE(u)||uc.isInstance(u))?u:new uc({message:"Failed to process successful response",cause:u,statusCode:o.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(o){if(iE(o))throw o;if(o instanceof TypeError&&o.message==="fetch failed"){const l=o.cause;if(l!=null)throw new uc({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw o}},xte=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const s=await r.text(),o=I1(r);if(s.trim()==="")return{responseHeaders:o,value:new uc({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})};try{const l=bte({text:s,schema:e});return{responseHeaders:o,value:new uc({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:o,value:new uc({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:o,responseBody:s,isRetryable:n==null?void 0:n(r)})}}},IF=e=>async({response:t})=>{const n=I1(t);if(t.body==null)throw new Kee({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new lte).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(RF({text:r,schema:e}))}}))}},jF=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=RF({text:a,schema:e}),s=I1(t);if(!i.success)throw new uc({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:s,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:s,value:i.value,rawValue:i.rawValue}},{btoa:_te}=globalThis;function Ste(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return _te(t)}function Ete(e){return e==null?void 0:e.replace(/\/$/,"")}var Cte=Object.defineProperty,Tte=Object.defineProperties,kte=Object.getOwnPropertyDescriptors,yx=Object.getOwnPropertySymbols,DF=Object.prototype.hasOwnProperty,MF=Object.prototype.propertyIsEnumerable,Y4=(e,t,n)=>t in e?Cte(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,bs=(e,t)=>{for(var n in t||(t={}))DF.call(t,n)&&Y4(e,n,t[n]);if(yx)for(var n of yx(t))MF.call(t,n)&&Y4(e,n,t[n]);return e},Fw=(e,t)=>Tte(e,kte(t)),bx=(e,t)=>{var n={};for(var r in e)DF.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yx)for(var r of yx(e))t.indexOf(r)<0&&MF.call(e,r)&&(n[r]=e[r]);return n};function al(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function Ate(e){var t,n,r;const a=[];for(const{role:i,content:s,providerMetadata:o}of e)switch(i){case"system":{a.push({role:"system",content:s,cache_control:al(o)});break}case"user":{if(s.length===1&&((t=s[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:s[0].text,cache_control:(n=al(o))!=null?n:al(s[0].providerMetadata)});break}const l=al(o),u=s.map(d=>{var h,m,g,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=al(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(m=d.mimeType)!=null?m:"image/jpeg"};base64,${Ste(d.image)}`},cache_control:(g=al(d.providerMetadata))!=null?g:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=al(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of s)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:al(o)});break}case"tool":{for(const l of s)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=al(o))!=null?r:al(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function X4(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:s,logprob:o})=>({token:s,logprob:o})):[]})))!=null?n:void 0}function vx(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var TA=z.object({error:z.object({message:z.string(),type:z.string(),param:z.any().nullable(),code:z.string().nullable()})}),wx=xte({errorSchema:TA,errorToMessage:e=>e.error.message});function Nte(e){return"parameters"in e}var Rte=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:s,seed:o,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var m;const g=e.type,v=(m=h==null?void 0:h.openrouter)!=null?m:{},b=bs(bs(bs({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:s,seed:o,stop:l,response_format:u,top_k:d,messages:Ate(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return bs(bs({},b),Dte(e));case"object-json":return Fw(bs({},b),{response_format:{type:"json_object"}});case"object-tool":return Fw(bs({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const w=g;throw new Hs({functionality:`${w} mode`})}}}async doGenerate(e){var t,n,r,a,i,s,o;const l=this.getArgs(e),{responseHeaders:u,value:d}=await gx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mx(this.config.headers(),e.headers),body:l,failedResponseHandler:wx,successfulResponseHandler:jF(Ite),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:m}=h,g=bx(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var w;return{toolCallType:"function",toolCallId:(w=b.id)!=null?w:Iv(),toolName:b.function.name,args:b.function.arguments}}),finishReason:vx(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(o=(s=d.usage)==null?void 0:s.completion_tokens)!=null?o:0},rawCall:{rawPrompt:m,rawSettings:g},rawResponse:{headers:u},warnings:[],logprobs:X4(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await gx({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mx(this.config.headers(),e.headers),body:Fw(bs({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:wx,successfulResponseHandler:IF(jte),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,s=bx(a,["messages"]),o=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,m){var g,v,b,w,x,_,E,T,k,R,j,I;if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const P=h.value;if("error"in P){l="error",m.enqueue({type:"error",error:P.error});return}P.id&&m.enqueue({type:"response-metadata",id:P.id}),P.model&&m.enqueue({type:"response-metadata",modelId:P.model}),P.usage!=null&&(u={promptTokens:P.usage.prompt_tokens,completionTokens:P.usage.completion_tokens});const O=P.choices[0];if((O==null?void 0:O.finish_reason)!=null&&(l=vx(O.finish_reason)),(O==null?void 0:O.delta)==null)return;const U=O.delta;U.content!=null&&m.enqueue({type:"text-delta",textDelta:U.content}),U.reasoning!=null&&m.enqueue({type:"reasoning",textDelta:U.reasoning});const M=X4(O==null?void 0:O.logprobs);if(M!=null&&M.length&&(d===void 0&&(d=[]),d.push(...M)),U.tool_calls!=null)for(const W of U.tool_calls){const V=W.index;if(o[V]==null){if(W.type!=="function")throw new rE({data:W,message:"Expected 'function' type."});if(W.id==null)throw new rE({data:W,message:"Expected 'id' to be a string."});if(((g=W.function)==null?void 0:g.name)==null)throw new rE({data:W,message:"Expected 'function.name' to be a string."});o[V]={id:W.id,type:"function",function:{name:W.function.name,arguments:(v=W.function.arguments)!=null?v:""},sent:!1};const ae=o[V];if(ae==null)throw new Error("Tool call is missing");((b=ae.function)==null?void 0:b.name)!=null&&((w=ae.function)==null?void 0:w.arguments)!=null&&sE(ae.function.arguments)&&(m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ae.id)!=null?x:Iv(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const ie=o[V];if(ie==null)throw new Error("Tool call is missing");((_=W.function)==null?void 0:_.arguments)!=null&&(ie.function.arguments+=(T=(E=W.function)==null?void 0:E.arguments)!=null?T:""),m.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:(k=W.function.arguments)!=null?k:""}),((R=ie.function)==null?void 0:R.name)!=null&&((j=ie.function)==null?void 0:j.arguments)!=null&&sE(ie.function.arguments)&&(m.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(I=ie.id)!=null?I:Iv(),toolName:ie.function.name,args:ie.function.arguments}),ie.sent=!0)}},flush(h){var m;if(l==="tool-calls")for(const g of o)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(m=g.id)!=null?m:Iv(),toolName:g.function.name,args:sE(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},OF=z.object({id:z.string().optional(),model:z.string().optional(),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number(),total_tokens:z.number()}).nullish()}),Ite=OF.extend({choices:z.array(z.object({message:z.object({role:z.literal("assistant"),content:z.string().nullable().optional(),reasoning:z.string().nullable().optional(),tool_calls:z.array(z.object({id:z.string().optional().nullable(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).optional()}),index:z.number(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullable().optional(),finish_reason:z.string().optional().nullable()}))}),jte=z.union([OF.extend({choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).optional(),content:z.string().nullish(),reasoning:z.string().nullish().optional(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").optional(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),logprobs:z.object({content:z.array(z.object({token:z.string(),logprob:z.number(),top_logprobs:z.array(z.object({token:z.string(),logprob:z.number()}))})).nullable()}).nullish(),finish_reason:z.string().nullable().optional(),index:z.number()}))}),TA]);function Dte(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(s=>Nte(s)?{type:"function",function:{name:s.name,description:s.description,parameters:s.parameters}}:{type:"function",function:{name:s.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const s=i;throw new Error(`Unsupported tool choice type: ${s}`)}}}function Mte({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new Jee({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Hs({functionality:"images"});case"file":throw new Hs({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Hs({functionality:"tool-call messages"});case"reasoning":throw new Hs({functionality:"reasoning messages"});case"redacted-reasoning":throw new Hs({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new Hs({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a}}function J4(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,s])=>({token:i,logprob:s})):[]}})}var Ote=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:s,presencePenalty:o,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:m}){var g,v;const b=e.type,w=(g=m==null?void 0:m.openrouter)!=null?g:{},{prompt:x}=Mte({prompt:n,inputFormat:t}),_=bs(bs(bs({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:o,seed:l,stop:h,response_format:u,top_k:d,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),w);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new Hs({functionality:"tools"});if(e.toolChoice)throw new Hs({functionality:"toolChoice"});return _}case"object-json":throw new Hs({functionality:"object-json mode"});case"object-tool":throw new Hs({functionality:"object-tool mode"});default:{const E=b;throw new Hs({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const s=this.getArgs(e),{responseHeaders:o,value:l}=await gx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mx(this.config.headers(),e.headers),body:s,failedResponseHandler:wx,successfulResponseHandler:jF(Q4),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=s,{prompt:d}=u,h=bx(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const m=l.choices[0];if(!m)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=m.text)!=null?t:"",reasoning:m.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:vx(m.finish_reason),logprobs:J4(m.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await gx({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mx(this.config.headers(),e.headers),body:Fw(bs({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:wx,successfulResponseHandler:IF(Q4),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,s=bx(a,["prompt"]);let o="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){o="error",h.enqueue({type:"error",error:d.error});return}const m=d.value;if("error"in m){o="error",h.enqueue({type:"error",error:m.error});return}m.usage!=null&&(l={promptTokens:m.usage.prompt_tokens,completionTokens:m.usage.completion_tokens});const g=m.choices[0];(g==null?void 0:g.finish_reason)!=null&&(o=vx(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=J4(g==null?void 0:g.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:o,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:s},rawResponse:{headers:n},warnings:[]}}},Q4=z.union([z.object({id:z.string().optional(),model:z.string().optional(),choices:z.array(z.object({text:z.string(),reasoning:z.string().nullish().optional(),finish_reason:z.string().nullish(),index:z.number(),logprobs:z.object({tokens:z.array(z.string()),token_logprobs:z.array(z.number()),top_logprobs:z.array(z.record(z.string(),z.number())).nullable()}).nullable().optional()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).optional().nullable()}),TA]);function PF(e={}){var t,n,r;const a=(n=Ete((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",s=()=>bs({Authorization:`Bearer ${fte({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),o=(h,m={})=>new Rte(h,m,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,m={})=>new Ote(h,m,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:s,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,m)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,m):o(h,m)},d=function(h,m){return u(h,m)};return d.languageModel=u,d.chat=o,d.completion=l,d}PF({compatibility:"strict"});var zd={},oE={},e6;function t6(){return e6||(e6=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(oE)),oE}var n6;function Pte(){return n6||(n6=1,function(e){var t=zd&&zd.__createBinding||(Object.create?function(u,d,h,m){m===void 0&&(m=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,m,g)}:function(u,d,h,m){m===void 0&&(m=h),u[m]=d[h]}),n=zd&&zd.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=t6();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(t6(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function s(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return o(u.trim(),d)}e.parseJSON=s;const o=(u,d)=>{const h=u.length;let m=0;const g=k=>{throw new a(`${k} at position ${m}`)},v=k=>{throw new i(`${k} at position ${m}`)},b=()=>(T(),m>=h&&g("Unexpected end of input"),u[m]==='"'?w():u[m]==="{"?x():u[m]==="["?_():u.substring(m,m+4)==="null"||r.Allow.NULL&d&&h-m<4&&"null".startsWith(u.substring(m))?(m+=4,null):u.substring(m,m+4)==="true"||r.Allow.BOOL&d&&h-m<4&&"true".startsWith(u.substring(m))?(m+=4,!0):u.substring(m,m+5)==="false"||r.Allow.BOOL&d&&h-m<5&&"false".startsWith(u.substring(m))?(m+=5,!1):u.substring(m,m+8)==="Infinity"||r.Allow.INFINITY&d&&h-m<8&&"Infinity".startsWith(u.substring(m))?(m+=8,1/0):u.substring(m,m+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-m&&h-m<9&&"-Infinity".startsWith(u.substring(m))?(m+=9,-1/0):u.substring(m,m+3)==="NaN"||r.Allow.NAN&d&&h-m<3&&"NaN".startsWith(u.substring(m))?(m+=3,NaN):E()),w=()=>{const k=m;let R=!1;for(m++;m<h&&(u[m]!=='"'||R&&u[m-1]==="\\");)R=u[m]==="\\"?!R:!1,m++;if(u.charAt(m)=='"')try{return JSON.parse(u.substring(k,++m-Number(R)))}catch(j){v(String(j))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(k,m-Number(R))+'"')}catch{return JSON.parse(u.substring(k,u.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{m++,T();const k={};try{for(;u[m]!=="}";){if(T(),m>=h&&r.Allow.OBJ&d)return k;const R=w();T(),m++;try{const j=b();k[R]=j}catch(j){if(r.Allow.OBJ&d)return k;throw j}T(),u[m]===","&&m++}}catch{if(r.Allow.OBJ&d)return k;g("Expected '}' at end of object")}return m++,k},_=()=>{m++;const k=[];try{for(;u[m]!=="]";)k.push(b()),T(),u[m]===","&&m++}catch{if(r.Allow.ARR&d)return k;g("Expected ']' at end of array")}return m++,k},E=()=>{if(m===0){u==="-"&&v("Not sure what '-' is");try{return JSON.parse(u)}catch(R){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}v(String(R))}}const k=m;for(u[m]==="-"&&m++;u[m]&&",]}".indexOf(u[m])===-1;)m++;m==h&&!(r.Allow.NUM&d)&&g("Unterminated number literal");try{return JSON.parse(u.substring(k,m))}catch{u.substring(k,m)==="-"&&g("Not sure what '-' is");try{return JSON.parse(u.substring(k,u.lastIndexOf("e")))}catch(j){v(String(j))}}},T=()=>{for(;m<h&&` 
\r	`.includes(u[m]);)m++};return b()},l=s;e.parse=l}(zd)),zd}var Fte=Pte();function lE(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new dr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(Lu(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const s of n)switch(s.type){case"text":{a.push(s.text);break}case"tool-call":{i.push({function:{arguments:s.args,name:s.toolName},id:s.toolCallId,type:"function"});break}default:{const o=s;throw new Error(`Unsupported part: ${o}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var Lte=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=Fte.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const s=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(s==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:qi(),type:"function"});const o=this._toolCalls[a];o.function.arguments=s,e.enqueue({argsTextDelta:t,toolCallId:o.id,toolCallType:"function",toolName:o.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function Bte({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var $te=z.object({error:z.object({code:z.string().nullable(),message:z.string(),param:z.any().nullable(),type:z.string()})}),qT=Nf({errorSchema:$te,errorToMessage:e=>e.error.message});function zte({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const o of n)o.type==="provider-defined"?r.push({tool:o,type:"unsupported-tool"}):i.push({function:{description:o.description,name:o.name,parameters:o.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const s=a.type;switch(s){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const o=s;throw new dr({functionality:`Unsupported tool choice type: ${o}`})}}}function Ute(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var Vte=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},Hte=e=>async({response:t})=>{const n=Vp(t);if(t.body===null)throw new s5({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new Vte).pipeThrough(new TransformStream({transform(r,a){a.enqueue(mf({schema:e,text:r}))}}))}},qte=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:s,stopSequences:o,temperature:l,topK:u,topP:d}){const h=n.type,m=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&m.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:Ute({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:s,stop:o,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=zte({mode:n});return{args:{...g,messages:lE(a),tools:v},type:h,warnings:[...m,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:lE(a)},type:h,warnings:m};case"object-tool":return{args:{...g,messages:lE(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:m};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:s,value:o}=await pa({abortSignal:e.abortSignal,body:i,failedResponseHandler:qT,fetch:this.config.fetch,headers:ha(this.config.headers(),e.headers),successfulResponseHandler:rs(Gte),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=o.message.tool_calls)==null?void 0:t.map(h=>{var m;return{args:JSON.stringify(h.function.arguments),toolCallId:(m=h.id)!=null?m:qi(),toolCallType:"function",toolName:h.function.name}});return{finishReason:Bte({finishReason:o.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},request:{body:JSON.stringify(i)},text:(n=o.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:o.eval_count||0,promptTokens:o.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const w of g.toolCalls)b.enqueue({argsTextDelta:w.args,toolCallId:w.toolCallId,toolCallType:"function",toolName:w.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",...w});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await pa({abortSignal:e.abortSignal,body:t,failedResponseHandler:qT,fetch:this.config.fetch,headers:ha(this.config.headers(),e.headers),successfulResponseHandler:Hte(Wte),url:`${this.config.baseURL}/chat`}),{messages:s,...o}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new Lte({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:m=!0}=this.settings;return{rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:d,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){d=u.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}m&&u.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},Gte=z.object({created_at:z.string(),done:z.literal(!0),done_reason:z.string().optional().nullable(),eval_count:z.number(),eval_duration:z.number(),load_duration:z.number().optional(),message:z.object({content:z.string(),role:z.string(),tool_calls:z.array(z.object({function:z.object({arguments:z.record(z.any()),name:z.string()}),id:z.string().optional()})).optional().nullable()}),model:z.string(),prompt_eval_count:z.number().optional(),prompt_eval_duration:z.number().optional(),total_duration:z.number()}),Wte=z.discriminatedUnion("done",[z.object({created_at:z.string(),done:z.literal(!1),message:z.object({content:z.string(),role:z.string()}),model:z.string()}),z.object({created_at:z.string(),done:z.literal(!0),eval_count:z.number(),eval_duration:z.number(),load_duration:z.number().optional(),model:z.string(),prompt_eval_count:z.number().optional(),prompt_eval_duration:z.number().optional(),total_duration:z.number()})]),Kte=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new C1({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await pa({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:qT,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:rs(Zte),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},Zte=z.object({embeddings:z.array(z.array(z.number())),prompt_eval_count:z.number().nullable()});function FF(e={}){var t;const n=(t=N1(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(o,l={})=>new qte(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(o,l={})=>new Kte(o,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),s=function(o,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(o,l)};return s.chat=a,s.embedding=i,s.languageModel=a,s.textEmbedding=i,s.textEmbeddingModel=i,s}FF();function Ag(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function Yte(e){const t=[];for(const{role:n,content:r,...a}of e){const i=Ag({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,...Ag(r[0])});break}t.push({role:"user",content:r.map(s=>{var o;const l=Ag(s);switch(s.type){case"text":return{type:"text",text:s.text,...l};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(o=s.mimeType)!=null?o:"image/jpeg"};base64,${Lu(s.image)}`},...l};case"file":throw new dr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let s="";const o=[];for(const l of r){const u=Ag(l);switch(l.type){case"text":{s+=l.text;break}case"tool-call":{o.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:s,tool_calls:o.length>0?o:void 0,...i});break}case"tool":{for(const s of r){const o=Ag(s);t.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result),...o})}break}default:{const s=n;throw new Error(`Unsupported role: ${s}`)}}}return t}function xx({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function _x(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var Xte=z.object({error:z.object({message:z.string(),type:z.string().nullish(),param:z.any().nullish(),code:z.union([z.string(),z.number()]).nullish()})}),j1={errorSchema:Xte,errorToMessage:e=>e.error.message};function Jte({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,s=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):s.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:s,tool_choice:void 0,toolWarnings:a};const o=i.type;switch(o){case"auto":case"none":case"required":return{tools:s,tool_choice:o,toolWarnings:a};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=o;throw new dr({functionality:`Unsupported tool choice type: ${l}`})}}}var Qte=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:j1;this.chunkSchema=tne(i.errorSchema),this.failedResponseHandler=Nf(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:s,presencePenalty:o,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var m,g,v,b,w;const x=e.type,_=[];i!=null&&_.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&_.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const E={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:s,presence_penalty:o,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(m=d.name)!=null?m:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],reasoning_effort:(b=(g=l==null?void 0:l[this.providerOptionsName])==null?void 0:g.reasoningEffort)!=null?b:(v=l==null?void 0:l["openai-compatible"])==null?void 0:v.reasoningEffort,messages:Yte(t)};switch(x){case"regular":{const{tools:T,tool_choice:k,toolWarnings:R}=Jte({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{...E,tools:T,tool_choice:k},warnings:[..._,...R]}}case"object-json":return{args:{...E,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(w=e.name)!=null?w:"response",description:e.description}}:{type:"json_object"}},warnings:_};case"object-tool":return{args:{...E,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:_};default:{const T=x;throw new Error(`Unsupported type: ${T}`)}}}async doGenerate(e){var t,n,r,a,i,s,o,l,u,d,h;const{args:m,warnings:g}=this.getArgs({...e}),v=JSON.stringify(m),{responseHeaders:b,value:w,rawValue:x}=await pa({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:m,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:rs(ene),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...E}=m,T=w.choices[0],k={[this.providerOptionsName]:{},...(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:x})},R=(r=w.usage)==null?void 0:r.completion_tokens_details,j=(a=w.usage)==null?void 0:a.prompt_tokens_details;return(R==null?void 0:R.reasoning_tokens)!=null&&(k[this.providerOptionsName].reasoningTokens=R==null?void 0:R.reasoning_tokens),(R==null?void 0:R.accepted_prediction_tokens)!=null&&(k[this.providerOptionsName].acceptedPredictionTokens=R==null?void 0:R.accepted_prediction_tokens),(R==null?void 0:R.rejected_prediction_tokens)!=null&&(k[this.providerOptionsName].rejectedPredictionTokens=R==null?void 0:R.rejected_prediction_tokens),(j==null?void 0:j.cached_tokens)!=null&&(k[this.providerOptionsName].cachedPromptTokens=j==null?void 0:j.cached_tokens),{text:(i=T.message.content)!=null?i:void 0,reasoning:(s=T.message.reasoning_content)!=null?s:void 0,toolCalls:(o=T.message.tool_calls)==null?void 0:o.map(I=>{var P;return{toolCallType:"function",toolCallId:(P=I.id)!=null?P:qi(),toolName:I.function.name,args:I.function.arguments}}),finishReason:_x(T.finish_reason),usage:{promptTokens:(u=(l=w.usage)==null?void 0:l.prompt_tokens)!=null?u:NaN,completionTokens:(h=(d=w.usage)==null?void 0:d.completion_tokens)!=null?h:NaN},providerMetadata:k,rawCall:{rawPrompt:_,rawSettings:E},rawResponse:{headers:b,body:x},response:xx(w),warnings:g,request:{body:v}}}async doStream(e){var t;if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.reasoning)if(Array.isArray(b.reasoning))for(const _ of b.reasoning)_.type==="text"&&x.enqueue({type:"reasoning",textDelta:_.text});else x.enqueue({type:"reasoning",textDelta:b.reasoning});if(b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const _ of b.toolCalls)x.enqueue({type:"tool-call",..._});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a={...n,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:s,value:o}=await pa({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:a,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:qp(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",m={completionTokens:void 0,completionTokensDetails:{reasoningTokens:void 0,acceptedPredictionTokens:void 0,rejectedPredictionTokens:void 0},promptTokens:void 0,promptTokensDetails:{cachedTokens:void 0}},g=!0,v=this.providerOptionsName;return{stream:o.pipeThrough(new TransformStream({transform(b,w){var x,_,E,T,k,R,j,I,P,O,U,M;if(!b.success){h="error",w.enqueue({type:"error",error:b.error});return}const W=b.value;if(i==null||i.processChunk(b.rawValue),"error"in W){h="error",w.enqueue({type:"error",error:W.error.message});return}if(g&&(g=!1,w.enqueue({type:"response-metadata",...xx(W)})),W.usage!=null){const{prompt_tokens:ae,completion_tokens:ne,prompt_tokens_details:q,completion_tokens_details:te}=W.usage;m.promptTokens=ae??void 0,m.completionTokens=ne??void 0,(te==null?void 0:te.reasoning_tokens)!=null&&(m.completionTokensDetails.reasoningTokens=te==null?void 0:te.reasoning_tokens),(te==null?void 0:te.accepted_prediction_tokens)!=null&&(m.completionTokensDetails.acceptedPredictionTokens=te==null?void 0:te.accepted_prediction_tokens),(te==null?void 0:te.rejected_prediction_tokens)!=null&&(m.completionTokensDetails.rejectedPredictionTokens=te==null?void 0:te.rejected_prediction_tokens),(q==null?void 0:q.cached_tokens)!=null&&(m.promptTokensDetails.cachedTokens=q==null?void 0:q.cached_tokens)}const V=W.choices[0];if((V==null?void 0:V.finish_reason)!=null&&(h=_x(V.finish_reason)),(V==null?void 0:V.delta)==null)return;const ie=V.delta;if(ie.reasoning_content!=null&&w.enqueue({type:"reasoning",textDelta:ie.reasoning_content}),ie.content!=null&&w.enqueue({type:"text-delta",textDelta:ie.content}),ie.tool_calls!=null)for(const ae of ie.tool_calls){const ne=ae.index;if(d[ne]==null){if(ae.type!=="function")throw new ip({data:ae,message:"Expected 'function' type."});if(ae.id==null)throw new ip({data:ae,message:"Expected 'id' to be a string."});if(((x=ae.function)==null?void 0:x.name)==null)throw new ip({data:ae,message:"Expected 'function.name' to be a string."});d[ne]={id:ae.id,type:"function",function:{name:ae.function.name,arguments:(_=ae.function.arguments)!=null?_:""},hasFinished:!1};const te=d[ne];((E=te.function)==null?void 0:E.name)!=null&&((T=te.function)==null?void 0:T.arguments)!=null&&(te.function.arguments.length>0&&w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:te.id,toolName:te.function.name,argsTextDelta:te.function.arguments}),rx(te.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=te.id)!=null?k:qi(),toolName:te.function.name,args:te.function.arguments}),te.hasFinished=!0));continue}const q=d[ne];q.hasFinished||(((R=ae.function)==null?void 0:R.arguments)!=null&&(q.function.arguments+=(I=(j=ae.function)==null?void 0:j.arguments)!=null?I:""),w.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:q.id,toolName:q.function.name,argsTextDelta:(P=ae.function.arguments)!=null?P:""}),((O=q.function)==null?void 0:O.name)!=null&&((U=q.function)==null?void 0:U.arguments)!=null&&rx(q.function.arguments)&&(w.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(M=q.id)!=null?M:qi(),toolName:q.function.name,args:q.function.arguments}),q.hasFinished=!0))}},flush(b){var w,x;const _={[v]:{},...i==null?void 0:i.buildMetadata()};m.completionTokensDetails.reasoningTokens!=null&&(_[v].reasoningTokens=m.completionTokensDetails.reasoningTokens),m.completionTokensDetails.acceptedPredictionTokens!=null&&(_[v].acceptedPredictionTokens=m.completionTokensDetails.acceptedPredictionTokens),m.completionTokensDetails.rejectedPredictionTokens!=null&&(_[v].rejectedPredictionTokens=m.completionTokensDetails.rejectedPredictionTokens),m.promptTokensDetails.cachedTokens!=null&&(_[v].cachedPromptTokens=m.promptTokensDetails.cachedTokens),b.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(w=m.promptTokens)!=null?w:NaN,completionTokens:(x=m.completionTokens)!=null?x:NaN},providerMetadata:_})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:s},warnings:r,request:{body:JSON.stringify(a)}}}},LF=z.object({prompt_tokens:z.number().nullish(),completion_tokens:z.number().nullish(),prompt_tokens_details:z.object({cached_tokens:z.number().nullish()}).nullish(),completion_tokens_details:z.object({reasoning_tokens:z.number().nullish(),accepted_prediction_tokens:z.number().nullish(),rejected_prediction_tokens:z.number().nullish()}).nullish()}).nullish(),ene=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({message:z.object({role:z.literal("assistant").nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({id:z.string().nullish(),type:z.literal("function"),function:z.object({name:z.string(),arguments:z.string()})})).nullish()}),finish_reason:z.string().nullish()})),usage:LF}),tne=e=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({delta:z.object({role:z.enum(["assistant"]).nullish(),content:z.string().nullish(),reasoning_content:z.string().nullish(),tool_calls:z.array(z.object({index:z.number(),id:z.string().nullish(),type:z.literal("function").nullish(),function:z.object({name:z.string().nullish(),arguments:z.string().nullish()})})).nullish()}).nullish(),finish_reason:z.string().nullish()})),usage:LF}),e]);function nne({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:s}of e)switch(i){case"system":throw new sc({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new dr({functionality:"images"})}}).join("");a+=`${n}:
${o}

`;break}case"assistant":{const o=s.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new dr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${o}

`;break}case"tool":throw new dr({functionality:"tool messages"});default:{const o=i;throw new Error(`Unsupported role: ${o}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var rne=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:j1;this.chunkSchema=ine(a.errorSchema),this.failedResponseHandler=Nf(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:s,frequencyPenalty:o,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:m}){var g;const v=e.type,b=[];s!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:w,stopSequences:x}=nne({prompt:n,inputFormat:t}),_=[...x??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:l,seed:h,...m==null?void 0:m[this.providerOptionsName],prompt:w,stop:_.length>0?_:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new dr({functionality:"tools"});if(e.toolChoice)throw new dr({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new dr({functionality:"object-json mode"});case"object-tool":throw new dr({functionality:"object-tool mode"});default:{const T=v;throw new Error(`Unsupported type: ${T}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:s}=this.getArgs(e),{responseHeaders:o,value:l,rawValue:u}=await pa({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:rs(ane),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,m=l.choices[0];return{text:m.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:_x(m.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:o,body:u},response:xx(l),warnings:s,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.includeUsage?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await pa({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:ha(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:qp(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:s,...o}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,m){if(!h.success){l="error",m.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",m.enqueue({type:"error",error:g.error});return}d&&(d=!1,m.enqueue({type:"response-metadata",...xx(g)})),g.usage!=null&&(u={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=_x(v.finish_reason)),(v==null?void 0:v.text)!=null&&m.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:s,rawSettings:o},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},ane=z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),ine=e=>z.union([z.object({id:z.string().nullish(),created:z.number().nullish(),model:z.string().nullish(),choices:z.array(z.object({text:z.string(),finish_reason:z.string().nullish(),index:z.number()})),usage:z.object({prompt_tokens:z.number(),completion_tokens:z.number()}).nullish()}),e]),sne=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new C1({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await pa({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:ha(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Nf((r=this.config.errorStructure)!=null?r:j1),successfulResponseHandler:rs(one),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(s=>s.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},one=z.object({data:z.array(z.object({embedding:z.array(z.number())})),usage:z.object({prompt_tokens:z.number()}).nullish()}),lne=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:s,abortSignal:o}){var l,u,d,h,m;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:w}=await pa({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:ha(this.config.headers(),s),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Nf((m=this.config.errorStructure)!=null?m:j1),successfulResponseHandler:rs(cne),abortSignal:o,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:w}}}},cne=z.object({data:z.array(z.object({b64_json:z.string()}))});function une(e){const t=N1(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:m})=>{const g=new URL(`${t}${m}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,m={})=>s(h,m),s=(h,m={})=>new Qte(h,m,{...a("chat"),defaultObjectGenerationMode:"tool"}),o=(h,m={})=>new rne(h,m,a("completion")),l=(h,m={})=>new sne(h,m,a("embedding")),u=(h,m={})=>new lne(h,m,a("image")),d=(h,m)=>i(h,m);return d.languageModel=i,d.chatModel=s,d.completionModel=o,d.textEmbeddingModel=l,d.imageModel=u,d}const dl=(e,t)=>`${e}:${t}`,_o=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},E0=e=>e==="openai"||e==="openrouter"||e==="google",BF=e=>e==="ollama"||e==="openai-compatible",tf=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",hc=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],dne={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},$F=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function kA(e,t,n){try{switch(e.type){case"openai":return W5({apiKey:n})(t);case"google":return X5({apiKey:n})(t);case"openrouter":return PF({apiKey:n,extraBody:{include_reasoning:!0}})(t);case"ollama":return FF({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return une({baseURL:$F(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function zF(e,t,n){const a=Hn.getState().getAllAvailableModelDefsForProvider(e.id).find(s=>s.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=kA(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:dl(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const UF={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]},Ng=new Map,fne=5*60*1e3,hne=(e,t)=>{var i,s,o,l,u,d,h,m,g,v,b,w,x,_;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((s=e.architecture)==null?void 0:s.input_modalities)??["text"],output_modalities:((o=e.architecture)==null?void 0:o.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((m=e.pricing)==null?void 0:m.request)??"0",image:((g=e.pricing)==null?void 0:g.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((w=e.top_provider)==null?void 0:w.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((_=e.top_provider)==null?void 0:_.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??UF[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function pne(e,t){const n=`${e.id}-${e.baseURL||""}`,r=Ng.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var o,l,u;let i;const s={Accept:"application/json"};t&&(s.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",s["HTTP-Referer"]=((o=globalThis.location)==null?void 0:o.origin)||"http://localhost:3000",s["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete s.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=$F(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),qe.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:s});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const w=JSON.parse(b);v=((u=w==null?void 0:w.error)==null?void 0:u.message)||(w==null?void 0:w.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let m=[];if(e.type==="ollama"?m=h.models||[]:m=h.data||h||[],!Array.isArray(m))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const g=m.map(v=>hne(v,e.type));return g.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${g.length} models for ${e.name}`),g}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),qe.error(`Failed to fetch models for ${e.name}: ${h}`),Ng.delete(n),[]}})();return Ng.set(n,a),setTimeout(()=>{Ng.get(n)===a&&(Ng.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},fne),a}const cE="provider:lastModelSelection",r6="provider:globalModelSortOrder",Hn=Js(Qs((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,createAiModelConfig:(n,r,a)=>{const s=t().getAllAvailableModelDefsForProvider(n.id).find(l=>l.id===r);if(!s){console.warn(`Model definition not found for ${r} in provider ${n.name}`);return}const o=kA(n,r,a);if(!o){console.warn(`Failed to instantiate AI SDK instance for ${r} from provider ${n.name}`);return}return{id:dl(n.id,r),name:s.name,providerId:n.id,providerName:n.name,instance:o,metadata:s}},setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),_t.saveSetting("enableApiKeyManagement",n),Et.emit(St.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadSetting("enableApiKeyManagement",!0),[r,a,i,s]=await Promise.all([_t.loadProviderConfigs(),_t.loadApiKeys(),_t.loadSetting(r6,[]),_t.loadSetting(cE,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const o=r.reduce((m,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{m.push(dl(g.id,v))}),m),[]),l=new Set(o),u=i.filter(m=>l.has(m));let d=s;d&&l.has(d)||(d=u[0]??null,d||(d=o[0]??null)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await _t.saveSetting(cE,d),Et.emit(St.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),qe.error("Failed to load provider data")}},selectModel:n=>{t().selectedModelId!==n&&(e({selectedModelId:n}),_t.saveSetting(cE,n),Et.emit(St.MODEL_SELECTION_CHANGED,{modelId:n}))},addApiKey:async(n,r,a)=>{const i=yi(),s=new Date,o={id:i,name:n,value:a,providerId:r,createdAt:s,updatedAt:s};try{return await _t.saveApiKey(o),e(l=>{l.dbApiKeys.push(o)}),qe.success(`API Key "${n}" added.`),Et.emit(St.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),qe.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await _t.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(s=>s.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(s=>s.apiKeyId===n?{...s,apiKeyId:null}:s)}),qe.success(`API Key "${r}" deleted.`),Et.emit(St.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),qe.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=yi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await _t.saveProviderConfig(i),e(s=>{s.dbProviderConfigs.push(i)}),qe.success(`Provider "${n.name}" added.`),Et.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),t().fetchModels(r).catch(s=>{console.warn(`[ProviderStore] Initial model fetch failed for new provider ${r}:`,s)}),r}catch(s){throw console.error("ProviderStore: Error adding provider config",s),qe.error(`Failed to add Provider: ${s instanceof Error?s.message:String(s)}`),s}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};try{await _t.saveProviderConfig(i),e(h=>{const m=h.dbProviderConfigs.findIndex(g=>g.id===n);m!==-1&&(h.dbProviderConfigs[m]=i)}),Et.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const s=t().globalModelSortOrder,o=t().dbProviderConfigs;let l=[...s];const u=o.reduce((h,m)=>(m.isEnabled&&m.enabledModels&&m.enabledModels.forEach(g=>{h.push(dl(m.id,g))}),h),[]),d=new Set(u);l=s.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(s){throw console.error("ProviderStore: Error updating provider config",s),qe.error(`Failed to update Provider: ${s instanceof Error?s.message:String(s)}`),s}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await _t.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),Et.emit(St.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const s=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(m=>{d.push(dl(h.id,m))}),d),[]),o=new Set(s),u=t().globalModelSortOrder.filter(d=>o.has(d));await t().setGlobalModelSortOrder(u),qe.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),qe.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){qe.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]!=="fetching"){t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,s=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,o=await pne(r,s);await t().updateProviderConfig(n,{fetchedModels:o,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),qe.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await _t.saveSetting(r6,r);const a=t().selectedModelId,s=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(dl(u.id,d))}),l),[]),o=new Set(s);if(!a||!o.has(a)){const l=r.find(h=>o.has(h)),u=s[0]??null,d=l??u;d!==a&&t().selectModel(d)}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n}=t();if(!n)return;const{providerId:r,modelId:a}=_o(n);if(!r||!a)return;const i=t().dbProviderConfigs.find(o=>o.id===r);if(!i)return;const s=t().dbApiKeys.find(o=>o.id===i.apiKeyId);return t().createAiModelConfig(i,a,s==null?void 0:s.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(s=>s.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(dne[a]||[]).map(s=>({id:s.id,name:s.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:UF[r.type]??[]}))},getAvailableModelListItems:()=>{const{dbProviderConfigs:n}=t(),r=[];return n.forEach(a=>{t().getAllAvailableModelDefsForProvider(a.id).forEach(s=>{var o,l;r.push({id:dl(a.id,s.id),name:s.name,providerId:a.id,providerName:a.name,metadataSummary:{context_length:((o=s.top_provider)==null?void 0:o.context_length)??s.context_length,supported_parameters:s.supported_parameters,input_modalities:(l=s.architecture)==null?void 0:l.input_modalities,pricing:s.pricing,description:s.description}})})}),r}}))),jv="system",Dv="You are a helpful AI assistant.",Mv=.7,Ov=null,Pv=null,Fv=null,Lv=0,Bv=0,a6=!0,$v=!0,zv=!1,Uv=!1,Vv=!1,Hv=15,i6=null,s6=null,qv=5,Gv=null,Wv=!0,Kv=null,Zv=768,Yv=!1,Xv=!1,Jv=null,Qv=16,ew="max-w-7xl",tw=null,nw=1e3,rw=!0,ar=Js(Qs((e,t)=>({theme:jv,globalSystemPrompt:Dv,temperature:Mv,maxTokens:Ov,topP:Pv,topK:Fv,presencePenalty:Lv,frequencyPenalty:Bv,enableAdvancedSettings:a6,enableStreamingMarkdown:$v,enableStreamingCodeBlockParsing:zv,foldStreamingCodeBlocks:Uv,foldUserMessagesOnCompletion:Vv,streamingRenderFPS:Hv,gitUserName:i6,gitUserEmail:s6,toolMaxSteps:qv,prismThemeUrl:Gv,autoTitleEnabled:Wv,autoTitleModelId:Kv,autoTitlePromptMaxLength:Zv,autoTitleIncludeFiles:Yv,autoTitleIncludeRules:Xv,customFontFamily:Jv,customFontSize:Qv,chatMaxWidth:ew,customThemeColors:tw,autoScrollInterval:nw,enableAutoScrollOnStream:rw,setTheme:n=>{e({theme:n}),_t.saveSetting("theme",n)},setGlobalSystemPrompt:n=>{e({globalSystemPrompt:n}),_t.saveSetting("globalSystemPrompt",n)},setTemperature:n=>{e({temperature:n}),_t.saveSetting("temperature",n)},setMaxTokens:n=>{e({maxTokens:n}),_t.saveSetting("maxTokens",n)},setTopP:n=>{e({topP:n}),_t.saveSetting("topP",n)},setTopK:n=>{e({topK:n}),_t.saveSetting("topK",n)},setPresencePenalty:n=>{e({presencePenalty:n}),_t.saveSetting("presencePenalty",n)},setFrequencyPenalty:n=>{e({frequencyPenalty:n}),_t.saveSetting("frequencyPenalty",n)},setEnableAdvancedSettings:n=>{e({enableAdvancedSettings:n}),_t.saveSetting("enableAdvancedSettings",n)},setEnableStreamingMarkdown:n=>{e({enableStreamingMarkdown:n}),_t.saveSetting("enableStreamingMarkdown",n)},setEnableStreamingCodeBlockParsing:n=>{e({enableStreamingCodeBlockParsing:n}),_t.saveSetting("enableStreamingCodeBlockParsing",n)},setFoldStreamingCodeBlocks:n=>{e({foldStreamingCodeBlocks:n}),_t.saveSetting("foldStreamingCodeBlocks",n)},setFoldUserMessagesOnCompletion:n=>{e({foldUserMessagesOnCompletion:n}),_t.saveSetting("foldUserMessagesOnCompletion",n)},setStreamingRenderFPS:n=>{const r=Math.max(3,Math.min(60,n));e({streamingRenderFPS:r}),_t.saveSetting("streamingRenderFPS",r)},setGitUserName:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserName:r}),_t.saveSetting("gitUserName",r)},setGitUserEmail:n=>{const r=(n==null?void 0:n.trim())||null;e({gitUserEmail:r}),_t.saveSetting("gitUserEmail",r)},setToolMaxSteps:n=>{const r=Math.max(1,Math.min(20,n));e({toolMaxSteps:r}),_t.saveSetting("toolMaxSteps",r)},setPrismThemeUrl:n=>{const r=(n==null?void 0:n.trim())||null;e({prismThemeUrl:r}),_t.saveSetting("prismThemeUrl",r)},setAutoTitleEnabled:n=>{e({autoTitleEnabled:n}),_t.saveSetting("autoTitleEnabled",n)},setAutoTitleModelId:n=>{e({autoTitleModelId:n}),_t.saveSetting("autoTitleModelId",n)},setAutoTitlePromptMaxLength:n=>{const r=Math.max(100,Math.min(4e3,n));e({autoTitlePromptMaxLength:r}),_t.saveSetting("autoTitlePromptMaxLength",r)},setAutoTitleIncludeFiles:n=>{e({autoTitleIncludeFiles:n}),_t.saveSetting("autoTitleIncludeFiles",n)},setAutoTitleIncludeRules:n=>{e({autoTitleIncludeRules:n}),_t.saveSetting("autoTitleIncludeRules",n)},setCustomFontFamily:n=>{const r=(n==null?void 0:n.trim())||null;e({customFontFamily:r}),_t.saveSetting("customFontFamily",r)},setCustomFontSize:n=>{const r=n===null?null:Math.max(10,Math.min(24,n));e({customFontSize:r}),_t.saveSetting("customFontSize",r)},setChatMaxWidth:n=>{e({chatMaxWidth:n}),_t.saveSetting("chatMaxWidth",n)},setCustomThemeColors:n=>{e({customThemeColors:n}),_t.saveSetting("customThemeColors",n)},setCustomThemeColor:(n,r)=>{e(a=>{const s={...a.customThemeColors??{}};r===null||r.trim()===""?delete s[n]:s[n]=r.trim(),a.customThemeColors=Object.keys(s).length>0?s:null}),_t.saveSetting("customThemeColors",t().customThemeColors)},setAutoScrollInterval:n=>{const r=Math.max(50,n);e({autoScrollInterval:r}),_t.saveSetting("autoScrollInterval",r)},setEnableAutoScrollOnStream:n=>{e({enableAutoScrollOnStream:n}),_t.saveSetting("enableAutoScrollOnStream",n)},loadSettings:async()=>{try{const[n,r,a,i,s,o,l,u,d,h,m,g,v,b,w,x,_,E,T,k,R,j,I,P,O,U,M,W,V]=await Promise.all([_t.loadSetting("theme",jv),_t.loadSetting("temperature",Mv),_t.loadSetting("maxTokens",Ov),_t.loadSetting("topP",Pv),_t.loadSetting("topK",Fv),_t.loadSetting("presencePenalty",Lv),_t.loadSetting("frequencyPenalty",Bv),_t.loadSetting("globalSystemPrompt",Dv),_t.loadSetting("enableAdvancedSettings",a6),_t.loadSetting("enableStreamingMarkdown",$v),_t.loadSetting("enableStreamingCodeBlockParsing",zv),_t.loadSetting("foldStreamingCodeBlocks",Uv),_t.loadSetting("foldUserMessagesOnCompletion",Vv),_t.loadSetting("streamingRenderFPS",Hv),_t.loadSetting("gitUserName",i6),_t.loadSetting("gitUserEmail",s6),_t.loadSetting("toolMaxSteps",qv),_t.loadSetting("prismThemeUrl",Gv),_t.loadSetting("autoTitleEnabled",Wv),_t.loadSetting("autoTitleModelId",Kv),_t.loadSetting("autoTitlePromptMaxLength",Zv),_t.loadSetting("autoTitleIncludeFiles",Yv),_t.loadSetting("autoTitleIncludeRules",Xv),_t.loadSetting("customFontFamily",Jv),_t.loadSetting("customFontSize",Qv),_t.loadSetting("chatMaxWidth",ew),_t.loadSetting("customThemeColors",tw),_t.loadSetting("autoScrollInterval",nw),_t.loadSetting("enableAutoScrollOnStream",rw)]);e({theme:n,temperature:r,maxTokens:a,topP:i,topK:s,presencePenalty:o,frequencyPenalty:l,globalSystemPrompt:u,enableAdvancedSettings:d,enableStreamingMarkdown:h,enableStreamingCodeBlockParsing:m,foldStreamingCodeBlocks:g,foldUserMessagesOnCompletion:v,streamingRenderFPS:b,gitUserName:w,gitUserEmail:x,toolMaxSteps:_,prismThemeUrl:E,autoTitleEnabled:T,autoTitleModelId:k,autoTitlePromptMaxLength:R,autoTitleIncludeFiles:j,autoTitleIncludeRules:I,customFontFamily:P,customFontSize:O,chatMaxWidth:U,customThemeColors:M,autoScrollInterval:W,enableAutoScrollOnStream:V})}catch(n){console.error("SettingsStore: Error loading settings",n)}},resetGeneralSettings:async()=>{try{e({enableStreamingMarkdown:$v,enableStreamingCodeBlockParsing:zv,foldStreamingCodeBlocks:Uv,foldUserMessagesOnCompletion:Vv,streamingRenderFPS:Hv,autoScrollInterval:nw,enableAutoScrollOnStream:rw}),await Promise.all([_t.saveSetting("enableStreamingMarkdown",$v),_t.saveSetting("enableStreamingCodeBlockParsing",zv),_t.saveSetting("foldStreamingCodeBlocks",Uv),_t.saveSetting("foldUserMessagesOnCompletion",Vv),_t.saveSetting("streamingRenderFPS",Hv),_t.saveSetting("autoScrollInterval",nw),_t.saveSetting("enableAutoScrollOnStream",rw)]),qe.success("Streaming & Display settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting general settings",n),qe.error("Failed to reset general settings.")}},resetAssistantSettings:async()=>{try{e({globalSystemPrompt:Dv,temperature:Mv,maxTokens:Ov,topP:Pv,topK:Fv,presencePenalty:Lv,frequencyPenalty:Bv,toolMaxSteps:qv,autoTitleEnabled:Wv,autoTitleModelId:Kv,autoTitlePromptMaxLength:Zv,autoTitleIncludeFiles:Yv,autoTitleIncludeRules:Xv}),await Promise.all([_t.saveSetting("globalSystemPrompt",Dv),_t.saveSetting("temperature",Mv),_t.saveSetting("maxTokens",Ov),_t.saveSetting("topP",Pv),_t.saveSetting("topK",Fv),_t.saveSetting("presencePenalty",Lv),_t.saveSetting("frequencyPenalty",Bv),_t.saveSetting("toolMaxSteps",qv),_t.saveSetting("autoTitleEnabled",Wv),_t.saveSetting("autoTitleModelId",Kv),_t.saveSetting("autoTitlePromptMaxLength",Zv),_t.saveSetting("autoTitleIncludeFiles",Yv),_t.saveSetting("autoTitleIncludeRules",Xv)]),qe.success("Assistant settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting assistant settings",n),qe.error("Failed to reset assistant settings.")}},resetThemeSettings:async()=>{try{e({theme:jv,prismThemeUrl:Gv,customFontFamily:Jv,customFontSize:Qv,chatMaxWidth:ew,customThemeColors:tw}),await Promise.all([_t.saveSetting("theme",jv),_t.saveSetting("prismThemeUrl",Gv),_t.saveSetting("customFontFamily",Jv),_t.saveSetting("customFontSize",Qv),_t.saveSetting("chatMaxWidth",ew),_t.saveSetting("customThemeColors",tw)]),qe.success("Theme settings reset to defaults.")}catch(n){console.error("SettingsStore: Error resetting theme settings",n),qe.error("Failed to reset theme settings.")}}})));async function Sx(e,t){const n=Sr.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const s=await i.callback(a);if(s===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;s&&typeof s=="object"&&(a=s)}catch(s){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,s),!1}return a}function mne(){const e=On.getState(),t=Hn.getState(),n=ar.getState(),{providerId:r}=_o(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function gne(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function o6(e){try{const t=e.type||"application/octet-stream",n=E1(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:gne(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),qe.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function l6(e){return e.flatMap(t=>{var a,i,s;const n=[],r=t.prompt;if(r){const o=[];r.content&&o.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{o.push({type:"text",text:`[User attached file: ${l.name}]`})}),o.length>0&&n.push({role:"user",content:o})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const o=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),o.length>0&&n.push({role:"assistant",content:o})}if((s=t.metadata)!=null&&s.toolResults&&Array.isArray(t.metadata.toolResults)){const o=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?o.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),o.length>0&&n.push({role:"tool",content:o})}return n})}const c6=e=>Symbol.iterator in e,u6=e=>"entries"in e,d6=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},yne=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function bne(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!c6(e)||!c6(t)?d6({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):u6(e)&&u6(t)?d6(e,t):yne(e,t)}function cn(e){const t=gt.useRef(void 0);return n=>{const r=e(n);return bne(t.current,r)?t.current:t.current=r}}const vne=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message...",inputAreaRef:a})=>{const[i,s]=C.useState(!1),[o,l]=C.useState(!1),u=Sr(cn(_=>_.promptControls)),d=On(cn(_=>_.status==="streaming")),{attachedFilesMetadata:h,clearAttachedFiles:m}=ko(cn(_=>({attachedFilesMetadata:_.attachedFilesMetadata,clearAttachedFiles:_.clearAttachedFiles,removeAttachedFile:_.removeAttachedFile}))),g=C.useMemo(()=>Object.values(u).filter(_=>_.show?_.show():!0),[u]),v=C.useMemo(()=>g.filter(_=>_.renderer),[g]),b=C.useMemo(()=>g.filter(_=>_.triggerRenderer),[g]),w=C.useCallback(async()=>{var k,R;const E=(((k=a==null?void 0:a.current)==null?void 0:k.getValue())??"").trim(),T=ko.getState().attachedFilesMetadata;if(!(!E&&T.length===0)&&!(d||i)){s(!0);try{let j={},I={};for(const M of g){if(M.getParameters){const W=await M.getParameters();W&&(j={...j,...W})}if(M.getMetadata){const W=await M.getMetadata();W&&(I={...I,...W})}}T.length>0&&(I.attachedFiles=[...T]);let P={id:yi(),content:E,parameters:j,metadata:I};Et.emit(St.PROMPT_SUBMITTED,{turnData:P});const O=await Sx(u0.PROMPT_TURN_FINALIZE,{turnData:P});if(O===!1){console.log("Prompt submission cancelled by middleware."),s(!1);return}const U=O&&typeof O=="object"?O.turnData:P;await t(U),m(),g.forEach(M=>{M.clearOnSubmit&&M.clearOnSubmit()}),(R=a.current)==null||R.clearValue(),l(!1)}catch(j){console.error("Error during prompt submission:",j),qe.error(`Failed to send message: ${j instanceof Error?j.message:String(j)}`)}finally{s(!1)}}},[a,d,i,g,t,m]),x=C.useCallback(_=>{l(_.trim().length>0)},[]);return p.jsxs("div",{className:vt("p-2 md:p-4 space-y-2 md:space-y-3",n),children:[v.length>0&&p.jsx(S4,{controls:v,area:"panel",className:"flex flex-wrap gap-1 md:gap-2 items-start mb-1 md:mb-2"}),p.jsxs("div",{className:"flex items-end gap-2",children:[p.jsx(e,{ref:a,onSubmit:w,disabled:d||i,placeholder:r,onValueChange:x,className:"flex-grow"}),p.jsx(Rt,{type:"button",size:"icon",onClick:w,disabled:d||i||!o&&h.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(bY,{className:"h-4 w-4"})})]}),p.jsx(S4,{controls:b,area:"trigger",className:"flex items-center gap-1 flex-wrap flex-shrink-0 mt-1 md:mt-2"})]})};function Gt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function wne(e,t){const n=C.createContext(t),r=i=>{const{children:s,...o}=i,l=C.useMemo(()=>o,Object.values(o));return p.jsx(n.Provider,{value:l,children:s})};r.displayName=e+"Provider";function a(i){const s=C.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function _i(e,t=[]){let n=[];function r(i,s){const o=C.createContext(s),l=n.length;n=[...n,s];const u=h=>{var x;const{scope:m,children:g,...v}=h,b=((x=m==null?void 0:m[e])==null?void 0:x[l])||o,w=C.useMemo(()=>v,Object.values(v));return p.jsx(b.Provider,{value:w,children:g})};u.displayName=i+"Provider";function d(h,m){var b;const g=((b=m==null?void 0:m[e])==null?void 0:b[l])||o,v=C.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(s=>C.createContext(s));return function(o){const l=(o==null?void 0:o[e])||i;return C.useMemo(()=>({[`__scope${e}`]:{...o,[e]:l}}),[o,l])}};return a.scopeName=e,[r,xne(a,...t)]}function xne(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const s=r.reduce((o,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...o,...h}},{});return C.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var _ne=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],an=_ne.reduce((e,t)=>{const n=Pu(`Primitive.${t}`),r=C.forwardRef((a,i)=>{const{asChild:s,...o}=a,l=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(l,{...o,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function VF(e,t){e&&ml.flushSync(()=>e.dispatchEvent(t))}function Ua(e){const t=C.useRef(e);return C.useEffect(()=>{t.current=e}),C.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function Sne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e);C.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var Ene="DismissableLayer",GT="dismissableLayer.update",Cne="dismissableLayer.pointerDownOutside",Tne="dismissableLayer.focusOutside",f6,HF=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gp=C.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:s,onDismiss:o,...l}=e,u=C.useContext(HF),[d,h]=C.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=C.useState({}),v=Nn(t,j=>h(j)),b=Array.from(u.layers),[w]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(w),_=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,T=_>=x,k=Nne(j=>{const I=j.target,P=[...u.branches].some(O=>O.contains(I));!T||P||(a==null||a(j),s==null||s(j),j.defaultPrevented||o==null||o())},m),R=Rne(j=>{const I=j.target;[...u.branches].some(O=>O.contains(I))||(i==null||i(j),s==null||s(j),j.defaultPrevented||o==null||o())},m);return Sne(j=>{_===u.layers.size-1&&(r==null||r(j),!j.defaultPrevented&&o&&(j.preventDefault(),o()))},m),C.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(f6=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),h6(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=f6)}},[d,m,n,u]),C.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),h6())},[d,u]),C.useEffect(()=>{const j=()=>g({});return document.addEventListener(GT,j),()=>document.removeEventListener(GT,j)},[]),p.jsx(an.div,{...l,ref:v,style:{pointerEvents:E?T?"auto":"none":void 0,...e.style},onFocusCapture:Gt(e.onFocusCapture,R.onFocusCapture),onBlurCapture:Gt(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:Gt(e.onPointerDownCapture,k.onPointerDownCapture)})});Gp.displayName=Ene;var kne="DismissableLayerBranch",Ane=C.forwardRef((e,t)=>{const n=C.useContext(HF),r=C.useRef(null),a=Nn(t,r);return C.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),p.jsx(an.div,{...e,ref:a})});Ane.displayName=kne;function Nne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e),r=C.useRef(!1),a=C.useRef(()=>{});return C.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let l=function(){qF(Cne,n,u,{discrete:!0})};const u={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function Rne(e,t=globalThis==null?void 0:globalThis.document){const n=Ua(e),r=C.useRef(!1);return C.useEffect(()=>{const a=i=>{i.target&&!r.current&&qF(Tne,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function h6(){const e=new CustomEvent(GT);document.dispatchEvent(e)}function qF(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?VF(a,i):a.dispatchEvent(i)}var si=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},Ine=y8[" useId ".trim().toString()]||(()=>{}),jne=0;function Ha(e){const[t,n]=C.useState(Ine());return si(()=>{n(r=>r??String(jne++))},[e]),t?`radix-${t}`:""}const Dne=["top","right","bottom","left"],Vu=Math.min,vs=Math.max,Ex=Math.round,aw=Math.floor,vl=e=>({x:e,y:e}),Mne={left:"right",right:"left",bottom:"top",top:"bottom"},One={start:"end",end:"start"};function WT(e,t,n){return vs(e,Vu(t,n))}function kc(e,t){return typeof e=="function"?e(t):e}function Ac(e){return e.split("-")[0]}function Wp(e){return e.split("-")[1]}function AA(e){return e==="x"?"y":"x"}function NA(e){return e==="y"?"height":"width"}function Hu(e){return["top","bottom"].includes(Ac(e))?"y":"x"}function RA(e){return AA(Hu(e))}function Pne(e,t,n){n===void 0&&(n=!1);const r=Wp(e),a=RA(e),i=NA(a);let s=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=Cx(s)),[s,Cx(s)]}function Fne(e){const t=Cx(e);return[KT(e),t,KT(t)]}function KT(e){return e.replace(/start|end/g,t=>One[t])}function Lne(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:s;default:return[]}}function Bne(e,t,n,r){const a=Wp(e);let i=Lne(Ac(e),n==="start",r);return a&&(i=i.map(s=>s+"-"+a),t&&(i=i.concat(i.map(KT)))),i}function Cx(e){return e.replace(/left|right|bottom|top/g,t=>Mne[t])}function $ne(e){return{top:0,right:0,bottom:0,left:0,...e}}function GF(e){return typeof e!="number"?$ne(e):{top:e,right:e,bottom:e,left:e}}function Tx(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function p6(e,t,n){let{reference:r,floating:a}=e;const i=Hu(t),s=RA(t),o=NA(s),l=Ac(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,m=r[o]/2-a[o]/2;let g;switch(l){case"top":g={x:d,y:r.y-a.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Wp(t)){case"start":g[s]-=m*(n&&u?-1:1);break;case"end":g[s]+=m*(n&&u?-1:1);break}return g}const zne=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:s}=n,o=i.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let u=await s.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=p6(u,r,l),m=r,g={},v=0;for(let b=0;b<o.length;b++){const{name:w,fn:x}=o[b],{x:_,y:E,data:T,reset:k}=await x({x:d,y:h,initialPlacement:r,placement:m,strategy:a,middlewareData:g,rects:u,platform:s,elements:{reference:e,floating:t}});d=_??d,h=E??h,g={...g,[w]:{...g[w],...T}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(m=k.placement),k.rects&&(u=k.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=p6(u,m,l)),b=-1)}return{x:d,y:h,placement:m,strategy:a,middlewareData:g}};async function C0(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:s,elements:o,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=kc(t,e),v=GF(g),w=o[m?h==="floating"?"reference":"floating":h],x=Tx(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(w)))==null||n?w:w.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),_=h==="floating"?{x:r,y:a,width:s.floating.width,height:s.floating.height}:s.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),T=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Tx(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:_,offsetParent:E,strategy:l}):_);return{top:(x.top-k.top+v.top)/T.y,bottom:(k.bottom-x.bottom+v.bottom)/T.y,left:(x.left-k.left+v.left)/T.x,right:(k.right-x.right+v.right)/T.x}}const Une=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:s,elements:o,middlewareData:l}=t,{element:u,padding:d=0}=kc(e,t)||{};if(u==null)return{};const h=GF(d),m={x:n,y:r},g=RA(a),v=NA(g),b=await s.getDimensions(u),w=g==="y",x=w?"top":"left",_=w?"bottom":"right",E=w?"clientHeight":"clientWidth",T=i.reference[v]+i.reference[g]-m[g]-i.floating[v],k=m[g]-i.reference[g],R=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let j=R?R[E]:0;(!j||!await(s.isElement==null?void 0:s.isElement(R)))&&(j=o.floating[E]||i.floating[v]);const I=T/2-k/2,P=j/2-b[v]/2-1,O=Vu(h[x],P),U=Vu(h[_],P),M=O,W=j-b[v]-U,V=j/2-b[v]/2+I,ie=WT(M,V,W),ae=!l.arrow&&Wp(a)!=null&&V!==ie&&i.reference[v]/2-(V<M?O:U)-b[v]/2<0,ne=ae?V<M?V-M:V-W:0;return{[g]:m[g]+ne,data:{[g]:ie,centerOffset:V-ie-ne,...ae&&{alignmentOffset:ne}},reset:ae}}}),Vne=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:s,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,...w}=kc(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Ac(a),_=Hu(o),E=Ac(o)===o,T=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=m||(E||!b?[Cx(o)]:Fne(o)),R=v!=="none";!m&&R&&k.push(...Bne(o,b,v,T));const j=[o,...k],I=await C0(t,w),P=[];let O=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&P.push(I[x]),h){const V=Pne(a,s,T);P.push(I[V[0]],I[V[1]])}if(O=[...O,{placement:a,overflows:P}],!P.every(V=>V<=0)){var U,M;const V=(((U=i.flip)==null?void 0:U.index)||0)+1,ie=j[V];if(ie)return{data:{index:V,overflows:O},reset:{placement:ie}};let ae=(M=O.filter(ne=>ne.overflows[0]<=0).sort((ne,q)=>ne.overflows[1]-q.overflows[1])[0])==null?void 0:M.placement;if(!ae)switch(g){case"bestFit":{var W;const ne=(W=O.filter(q=>{if(R){const te=Hu(q.placement);return te===_||te==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(te=>te>0).reduce((te,G)=>te+G,0)]).sort((q,te)=>q[1]-te[1])[0])==null?void 0:W[0];ne&&(ae=ne);break}case"initialPlacement":ae=o;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function m6(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function g6(e){return Dne.some(t=>e[t]>=0)}const Hne=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=kc(e,t);switch(r){case"referenceHidden":{const i=await C0(t,{...a,elementContext:"reference"}),s=m6(i,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:g6(s)}}}case"escaped":{const i=await C0(t,{...a,altBoundary:!0}),s=m6(i,n.floating);return{data:{escapedOffsets:s,escaped:g6(s)}}}default:return{}}}}};async function qne(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),s=Ac(n),o=Wp(n),l=Hu(n)==="y",u=["left","top"].includes(s)?-1:1,d=i&&l?-1:1,h=kc(t,e);let{mainAxis:m,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof v=="number"&&(g=o==="end"?v*-1:v),l?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const Gne=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:s,middlewareData:o}=t,l=await qne(t,e);return s===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:s}}}}},Wne=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:s=!1,limiter:o={fn:w=>{let{x,y:_}=w;return{x,y:_}}},...l}=kc(e,t),u={x:n,y:r},d=await C0(t,l),h=Hu(Ac(a)),m=AA(h);let g=u[m],v=u[h];if(i){const w=m==="y"?"top":"left",x=m==="y"?"bottom":"right",_=g+d[w],E=g-d[x];g=WT(_,g,E)}if(s){const w=h==="y"?"top":"left",x=h==="y"?"bottom":"right",_=v+d[w],E=v-d[x];v=WT(_,v,E)}const b=o.fn({...t,[m]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[m]:i,[h]:s}}}}}},Kne=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:s}=t,{offset:o=0,mainAxis:l=!0,crossAxis:u=!0}=kc(e,t),d={x:n,y:r},h=Hu(a),m=AA(h);let g=d[m],v=d[h];const b=kc(o,t),w=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=m==="y"?"height":"width",T=i.reference[m]-i.floating[E]+w.mainAxis,k=i.reference[m]+i.reference[E]-w.mainAxis;g<T?g=T:g>k&&(g=k)}if(u){var x,_;const E=m==="y"?"width":"height",T=["top","left"].includes(Ac(a)),k=i.reference[h]-i.floating[E]+(T&&((x=s.offset)==null?void 0:x[h])||0)+(T?0:w.crossAxis),R=i.reference[h]+i.reference[E]+(T?0:((_=s.offset)==null?void 0:_[h])||0)-(T?w.crossAxis:0);v<k?v=k:v>R&&(v=R)}return{[m]:g,[h]:v}}}},Zne=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:s,elements:o}=t,{apply:l=()=>{},...u}=kc(e,t),d=await C0(t,u),h=Ac(a),m=Wp(a),g=Hu(a)==="y",{width:v,height:b}=i.floating;let w,x;h==="top"||h==="bottom"?(w=h,x=m===(await(s.isRTL==null?void 0:s.isRTL(o.floating))?"start":"end")?"left":"right"):(x=h,w=m==="end"?"top":"bottom");const _=b-d.top-d.bottom,E=v-d.left-d.right,T=Vu(b-d[w],_),k=Vu(v-d[x],E),R=!t.middlewareData.shift;let j=T,I=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(j=_),R&&!m){const O=vs(d.left,0),U=vs(d.right,0),M=vs(d.top,0),W=vs(d.bottom,0);g?I=v-2*(O!==0||U!==0?O+U:vs(d.left,d.right)):j=b-2*(M!==0||W!==0?M+W:vs(d.top,d.bottom))}await l({...t,availableWidth:I,availableHeight:j});const P=await s.getDimensions(o.floating);return v!==P.width||b!==P.height?{reset:{rects:!0}}:{}}}};function D1(){return typeof window<"u"}function Kp(e){return WF(e)?(e.nodeName||"").toLowerCase():"#document"}function xs(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Nl(e){var t;return(t=(WF(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function WF(e){return D1()?e instanceof Node||e instanceof xs(e).Node:!1}function No(e){return D1()?e instanceof Element||e instanceof xs(e).Element:!1}function Tl(e){return D1()?e instanceof HTMLElement||e instanceof xs(e).HTMLElement:!1}function y6(e){return!D1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof xs(e).ShadowRoot}function Sy(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Ro(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function Yne(e){return["table","td","th"].includes(Kp(e))}function M1(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function IA(e){const t=jA(),n=No(e)?Ro(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Xne(e){let t=qu(e);for(;Tl(t)&&!vp(t);){if(IA(t))return t;if(M1(t))return null;t=qu(t)}return null}function jA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function vp(e){return["html","body","#document"].includes(Kp(e))}function Ro(e){return xs(e).getComputedStyle(e)}function O1(e){return No(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function qu(e){if(Kp(e)==="html")return e;const t=e.assignedSlot||e.parentNode||y6(e)&&e.host||Nl(e);return y6(t)?t.host:t}function KF(e){const t=qu(e);return vp(t)?e.ownerDocument?e.ownerDocument.body:e.body:Tl(t)&&Sy(t)?t:KF(t)}function T0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=KF(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),s=xs(a);if(i){const o=ZT(s);return t.concat(s,s.visualViewport||[],Sy(a)?a:[],o&&n?T0(o):[])}return t.concat(a,T0(a,[],n))}function ZT(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ZF(e){const t=Ro(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Tl(e),i=a?e.offsetWidth:n,s=a?e.offsetHeight:r,o=Ex(n)!==i||Ex(r)!==s;return o&&(n=i,r=s),{width:n,height:r,$:o}}function DA(e){return No(e)?e:e.contextElement}function op(e){const t=DA(e);if(!Tl(t))return vl(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=ZF(t);let s=(i?Ex(n.width):n.width)/r,o=(i?Ex(n.height):n.height)/a;return(!s||!Number.isFinite(s))&&(s=1),(!o||!Number.isFinite(o))&&(o=1),{x:s,y:o}}const Jne=vl(0);function YF(e){const t=xs(e);return!jA()||!t.visualViewport?Jne:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Qne(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==xs(e)?!1:t}function vf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=DA(e);let s=vl(1);t&&(r?No(r)&&(s=op(r)):s=op(e));const o=Qne(i,n,r)?YF(i):vl(0);let l=(a.left+o.x)/s.x,u=(a.top+o.y)/s.y,d=a.width/s.x,h=a.height/s.y;if(i){const m=xs(i),g=r&&No(r)?xs(r):r;let v=m,b=ZT(v);for(;b&&r&&g!==v;){const w=op(b),x=b.getBoundingClientRect(),_=Ro(b),E=x.left+(b.clientLeft+parseFloat(_.paddingLeft))*w.x,T=x.top+(b.clientTop+parseFloat(_.paddingTop))*w.y;l*=w.x,u*=w.y,d*=w.x,h*=w.y,l+=E,u+=T,v=xs(b),b=ZT(v)}}return Tx({width:d,height:h,x:l,y:u})}function MA(e,t){const n=O1(e).scrollLeft;return t?t.left+n:vf(Nl(e)).left+n}function XF(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:MA(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function ere(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",s=Nl(r),o=t?M1(t.floating):!1;if(r===s||o&&i)return n;let l={scrollLeft:0,scrollTop:0},u=vl(1);const d=vl(0),h=Tl(r);if((h||!h&&!i)&&((Kp(r)!=="body"||Sy(s))&&(l=O1(r)),Tl(r))){const g=vf(r);u=op(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=s&&!h&&!i?XF(s,l,!0):vl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-l.scrollTop*u.y+d.y+m.y}}function tre(e){return Array.from(e.getClientRects())}function nre(e){const t=Nl(e),n=O1(e),r=e.ownerDocument.body,a=vs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=vs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+MA(e);const o=-n.scrollTop;return Ro(r).direction==="rtl"&&(s+=vs(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:s,y:o}}function rre(e,t){const n=xs(e),r=Nl(e),a=n.visualViewport;let i=r.clientWidth,s=r.clientHeight,o=0,l=0;if(a){i=a.width,s=a.height;const u=jA();(!u||u&&t==="fixed")&&(o=a.offsetLeft,l=a.offsetTop)}return{width:i,height:s,x:o,y:l}}function are(e,t){const n=vf(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Tl(e)?op(e):vl(1),s=e.clientWidth*i.x,o=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:s,height:o,x:l,y:u}}function b6(e,t,n){let r;if(t==="viewport")r=rre(e,n);else if(t==="document")r=nre(Nl(e));else if(No(t))r=are(t,n);else{const a=YF(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Tx(r)}function JF(e,t){const n=qu(e);return n===t||!No(n)||vp(n)?!1:Ro(n).position==="fixed"||JF(n,t)}function ire(e,t){const n=t.get(e);if(n)return n;let r=T0(e,[],!1).filter(o=>No(o)&&Kp(o)!=="body"),a=null;const i=Ro(e).position==="fixed";let s=i?qu(e):e;for(;No(s)&&!vp(s);){const o=Ro(s),l=IA(s);!l&&o.position==="fixed"&&(a=null),(i?!l&&!a:!l&&o.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||Sy(s)&&!l&&JF(e,s))?r=r.filter(d=>d!==s):a=o,s=qu(s)}return t.set(e,r),r}function sre(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const s=[...n==="clippingAncestors"?M1(t)?[]:ire(t,this._c):[].concat(n),r],o=s[0],l=s.reduce((u,d)=>{const h=b6(t,d,a);return u.top=vs(h.top,u.top),u.right=Vu(h.right,u.right),u.bottom=Vu(h.bottom,u.bottom),u.left=vs(h.left,u.left),u},b6(t,o,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function ore(e){const{width:t,height:n}=ZF(e);return{width:t,height:n}}function lre(e,t,n){const r=Tl(t),a=Nl(t),i=n==="fixed",s=vf(e,!0,i,t);let o={scrollLeft:0,scrollTop:0};const l=vl(0);if(r||!r&&!i)if((Kp(t)!=="body"||Sy(a))&&(o=O1(t)),r){const m=vf(t,!0,i,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else a&&(l.x=MA(a));const u=a&&!r&&!i?XF(a,o):vl(0),d=s.left+o.scrollLeft-l.x-u.x,h=s.top+o.scrollTop-l.y-u.y;return{x:d,y:h,width:s.width,height:s.height}}function uE(e){return Ro(e).position==="static"}function v6(e,t){if(!Tl(e)||Ro(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Nl(e)===n&&(n=n.ownerDocument.body),n}function QF(e,t){const n=xs(e);if(M1(e))return n;if(!Tl(e)){let a=qu(e);for(;a&&!vp(a);){if(No(a)&&!uE(a))return a;a=qu(a)}return n}let r=v6(e,t);for(;r&&Yne(r)&&uE(r);)r=v6(r,t);return r&&vp(r)&&uE(r)&&!IA(r)?n:r||Xne(e)||n}const cre=async function(e){const t=this.getOffsetParent||QF,n=this.getDimensions,r=await n(e.floating);return{reference:lre(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function ure(e){return Ro(e).direction==="rtl"}const dre={convertOffsetParentRelativeRectToViewportRelativeRect:ere,getDocumentElement:Nl,getClippingRect:sre,getOffsetParent:QF,getElementRects:cre,getClientRects:tre,getDimensions:ore,getScale:op,isElement:No,isRTL:ure};function eL(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function fre(e,t){let n=null,r;const a=Nl(e);function i(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function s(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=u;if(o||t(),!m||!g)return;const v=aw(h),b=aw(a.clientWidth-(d+m)),w=aw(a.clientHeight-(h+g)),x=aw(d),E={rootMargin:-v+"px "+-b+"px "+-w+"px "+-x+"px",threshold:vs(0,Vu(1,l))||1};let T=!0;function k(R){const j=R[0].intersectionRatio;if(j!==l){if(!T)return s();j?s(!1,j):r=setTimeout(()=>{s(!1,1e-7)},1e3)}j===1&&!eL(u,e.getBoundingClientRect())&&s(),T=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return s(!0),i}function hre(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=DA(e),d=a||i?[...u?T0(u):[],...T0(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&o?fre(u,n):null;let m=-1,g=null;s&&(g=new ResizeObserver(x=>{let[_]=x;_&&_.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),u&&!l&&g.observe(u),g.observe(t));let v,b=l?vf(e):null;l&&w();function w(){const x=vf(e);b&&!eL(b,x)&&n(),b=x,v=requestAnimationFrame(w)}return n(),()=>{var x;d.forEach(_=>{a&&_.removeEventListener("scroll",n),i&&_.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const pre=Gne,mre=Wne,gre=Vne,yre=Zne,bre=Hne,w6=Une,vre=Kne,wre=(e,t,n)=>{const r=new Map,a={platform:dre,...n},i={...a.platform,_c:r};return zne(e,t,{...a,platform:i})};var Lw=typeof document<"u"?C.useLayoutEffect:C.useEffect;function kx(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!kx(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!kx(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function tL(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function x6(e,t){const n=tL(e);return Math.round(t*n)/n}function dE(e){const t=C.useRef(e);return Lw(()=>{t.current=e}),t}function xre(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:s}={},transform:o=!0,whileElementsMounted:l,open:u}=e,[d,h]=C.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[m,g]=C.useState(r);kx(m,r)||g(r);const[v,b]=C.useState(null),[w,x]=C.useState(null),_=C.useCallback(q=>{q!==R.current&&(R.current=q,b(q))},[]),E=C.useCallback(q=>{q!==j.current&&(j.current=q,x(q))},[]),T=i||v,k=s||w,R=C.useRef(null),j=C.useRef(null),I=C.useRef(d),P=l!=null,O=dE(l),U=dE(a),M=dE(u),W=C.useCallback(()=>{if(!R.current||!j.current)return;const q={placement:t,strategy:n,middleware:m};U.current&&(q.platform=U.current),wre(R.current,j.current,q).then(te=>{const G={...te,isPositioned:M.current!==!1};V.current&&!kx(I.current,G)&&(I.current=G,ml.flushSync(()=>{h(G)}))})},[m,t,n,U,M]);Lw(()=>{u===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,h(q=>({...q,isPositioned:!1})))},[u]);const V=C.useRef(!1);Lw(()=>(V.current=!0,()=>{V.current=!1}),[]),Lw(()=>{if(T&&(R.current=T),k&&(j.current=k),T&&k){if(O.current)return O.current(T,k,W);W()}},[T,k,W,O,P]);const ie=C.useMemo(()=>({reference:R,floating:j,setReference:_,setFloating:E}),[_,E]),ae=C.useMemo(()=>({reference:T,floating:k}),[T,k]),ne=C.useMemo(()=>{const q={position:n,left:0,top:0};if(!ae.floating)return q;const te=x6(ae.floating,d.x),G=x6(ae.floating,d.y);return o?{...q,transform:"translate("+te+"px, "+G+"px)",...tL(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:te,top:G}},[n,o,ae.floating,d.x,d.y]);return C.useMemo(()=>({...d,update:W,refs:ie,elements:ae,floatingStyles:ne}),[d,W,ie,ae,ne])}const _re=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?w6({element:r.current,padding:a}).fn(n):{}:r?w6({element:r,padding:a}).fn(n):{}}}},Sre=(e,t)=>({...pre(e),options:[e,t]}),Ere=(e,t)=>({...mre(e),options:[e,t]}),Cre=(e,t)=>({...vre(e),options:[e,t]}),Tre=(e,t)=>({...gre(e),options:[e,t]}),kre=(e,t)=>({...yre(e),options:[e,t]}),Are=(e,t)=>({...bre(e),options:[e,t]}),Nre=(e,t)=>({..._re(e),options:[e,t]});var Rre="Arrow",nL=C.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return p.jsx(an.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});nL.displayName=Rre;var Ire=nL;function P1(e){const[t,n]=C.useState(void 0);return si(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let s,o;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,o=u.blockSize}else s=e.offsetWidth,o=e.offsetHeight;n({width:s,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var OA="Popper",[rL,rd]=_i(OA),[jre,aL]=rL(OA),iL=e=>{const{__scopePopper:t,children:n}=e,[r,a]=C.useState(null);return p.jsx(jre,{scope:t,anchor:r,onAnchorChange:a,children:n})};iL.displayName=OA;var sL="PopperAnchor",oL=C.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=aL(sL,n),s=C.useRef(null),o=Nn(t,s);return C.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:p.jsx(an.div,{...a,ref:o})});oL.displayName=sL;var PA="PopperContent",[Dre,Mre]=rL(PA),lL=C.forwardRef((e,t)=>{var Ne,Se,ye,Fe,Xe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:s=0,arrowPadding:o=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,w=aL(PA,n),[x,_]=C.useState(null),E=Nn(t,Ie=>_(Ie)),[T,k]=C.useState(null),R=P1(T),j=(R==null?void 0:R.width)??0,I=(R==null?void 0:R.height)??0,P=r+(i!=="center"?"-"+i:""),O=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},U=Array.isArray(u)?u:[u],M=U.length>0,W={padding:O,boundary:U.filter(Pre),altBoundary:M},{refs:V,floatingStyles:ie,placement:ae,isPositioned:ne,middlewareData:q}=xre({strategy:"fixed",placement:P,whileElementsMounted:(...Ie)=>hre(...Ie,{animationFrame:g==="always"}),elements:{reference:w.anchor},middleware:[Sre({mainAxis:a+I,alignmentAxis:s}),l&&Ere({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Cre():void 0,...W}),l&&Tre({...W}),kre({...W,apply:({elements:Ie,rects:B,availableWidth:Ce,availableHeight:Ee})=>{const{width:ce,height:oe}=B.reference,ee=Ie.floating.style;ee.setProperty("--radix-popper-available-width",`${Ce}px`),ee.setProperty("--radix-popper-available-height",`${Ee}px`),ee.setProperty("--radix-popper-anchor-width",`${ce}px`),ee.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),T&&Nre({element:T,padding:o}),Fre({arrowWidth:j,arrowHeight:I}),m&&Are({strategy:"referenceHidden",...W})]}),[te,G]=dL(ae),J=Ua(v);si(()=>{ne&&(J==null||J())},[ne,J]);const Q=(Ne=q.arrow)==null?void 0:Ne.x,se=(Se=q.arrow)==null?void 0:Se.y,fe=((ye=q.arrow)==null?void 0:ye.centerOffset)!==0,[ve,je]=C.useState();return si(()=>{x&&je(window.getComputedStyle(x).zIndex)},[x]),p.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...ie,transform:ne?ie.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ve,"--radix-popper-transform-origin":[(Fe=q.transformOrigin)==null?void 0:Fe.x,(Xe=q.transformOrigin)==null?void 0:Xe.y].join(" "),...((Le=q.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:p.jsx(Dre,{scope:n,placedSide:te,onArrowChange:k,arrowX:Q,arrowY:se,shouldHideArrow:fe,children:p.jsx(an.div,{"data-side":te,"data-align":G,...b,ref:E,style:{...b.style,animation:ne?void 0:"none"}})})})});lL.displayName=PA;var cL="PopperArrow",Ore={top:"bottom",right:"left",bottom:"top",left:"right"},uL=C.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=Mre(cL,r),s=Ore[i.placedSide];return p.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:p.jsx(Ire,{...a,ref:n,style:{...a.style,display:"block"}})})});uL.displayName=cL;function Pre(e){return e!==null}var Fre=e=>({name:"transformOrigin",options:e,fn(t){var w,x,_;const{placement:n,rects:r,middlewareData:a}=t,s=((w=a.arrow)==null?void 0:w.centerOffset)!==0,o=s?0:e.arrowWidth,l=s?0:e.arrowHeight,[u,d]=dL(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((x=a.arrow)==null?void 0:x.x)??0)+o/2,g=(((_=a.arrow)==null?void 0:_.y)??0)+l/2;let v="",b="";return u==="bottom"?(v=s?h:`${m}px`,b=`${-l}px`):u==="top"?(v=s?h:`${m}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=s?h:`${g}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=s?h:`${g}px`),{data:{x:v,y:b}}}});function dL(e){const[t,n="center"]=e.split("-");return[t,n]}var F1=iL,Ey=oL,L1=lL,B1=uL,Lre="Portal",Zp=C.forwardRef((e,t)=>{var o;const{container:n,...r}=e,[a,i]=C.useState(!1);si(()=>i(!0),[]);const s=n||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return s?Z8.createPortal(p.jsx(an.div,{...r,ref:t}),s):null});Zp.displayName=Lre;function Bre(e,t){return C.useReducer((n,r)=>t[n][r]??n,e)}var Za=e=>{const{present:t,children:n}=e,r=$re(t),a=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),i=Nn(r.ref,zre(a));return typeof n=="function"||r.isPresent?C.cloneElement(a,{ref:i}):null};Za.displayName="Presence";function $re(e){const[t,n]=C.useState(),r=C.useRef(null),a=C.useRef(e),i=C.useRef("none"),s=e?"mounted":"unmounted",[o,l]=Bre(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=iw(r.current);i.current=o==="mounted"?u:"none"},[o]),si(()=>{const u=r.current,d=a.current;if(d!==e){const m=i.current,g=iw(u);e?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),si(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=g=>{const b=iw(r.current).includes(g.animationName);if(g.target===t&&b&&(l("ANIMATION_END"),!a.current)){const w=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=w)})}},m=g=>{g.target===t&&(i.current=iw(r.current))};return t.addEventListener("animationstart",m),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",m),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:C.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function iw(e){return(e==null?void 0:e.animationName)||"none"}function zre(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ure=y8[" useInsertionEffect ".trim().toString()]||si;function Io({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,s]=Vre({defaultProp:t,onChange:n}),o=e!==void 0,l=o?e:a;{const d=C.useRef(e!==void 0);C.useEffect(()=>{const h=d.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=o},[o,r])}const u=C.useCallback(d=>{var h;if(o){const m=Hre(d)?d(e):d;m!==e&&((h=s.current)==null||h.call(s,m))}else i(d)},[o,e,i,s]);return[l,u]}function Vre({defaultProp:e,onChange:t}){const[n,r]=C.useState(e),a=C.useRef(n),i=C.useRef(t);return Ure(()=>{i.current=t},[t]),C.useEffect(()=>{var s;a.current!==n&&((s=i.current)==null||s.call(i,n),a.current=n)},[n,a]),[n,r,i]}function Hre(e){return typeof e=="function"}var fL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),qre="VisuallyHidden",hL=C.forwardRef((e,t)=>p.jsx(an.span,{...e,ref:t,style:{...fL,...e.style}}));hL.displayName=qre;var Gre=hL,[$1,H3e]=_i("Tooltip",[rd]),z1=rd(),pL="TooltipProvider",Wre=700,YT="tooltip.open",[Kre,FA]=$1(pL),mL=e=>{const{__scopeTooltip:t,delayDuration:n=Wre,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,s=C.useRef(!0),o=C.useRef(!1),l=C.useRef(0);return C.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),p.jsx(Kre,{scope:t,isOpenDelayedRef:s,delayDuration:n,onOpen:C.useCallback(()=>{window.clearTimeout(l.current),s.current=!1},[]),onClose:C.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>s.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:C.useCallback(u=>{o.current=u},[]),disableHoverableContent:a,children:i})};mL.displayName=pL;var k0="Tooltip",[Zre,Cy]=$1(k0),gL=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:s,delayDuration:o}=e,l=FA(k0,e.__scopeTooltip),u=z1(t),[d,h]=C.useState(null),m=Ha(),g=C.useRef(0),v=s??l.disableHoverableContent,b=o??l.delayDuration,w=C.useRef(!1),[x,_]=Io({prop:r,defaultProp:a??!1,onChange:j=>{j?(l.onOpen(),document.dispatchEvent(new CustomEvent(YT))):l.onClose(),i==null||i(j)},caller:k0}),E=C.useMemo(()=>x?w.current?"delayed-open":"instant-open":"closed",[x]),T=C.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w.current=!1,_(!0)},[_]),k=C.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_(!1)},[_]),R=C.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{w.current=!0,_(!0),g.current=0},b)},[b,_]);return C.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),p.jsx(F1,{...u,children:p.jsx(Zre,{scope:t,contentId:m,open:x,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:C.useCallback(()=>{l.isOpenDelayedRef.current?R():T()},[l.isOpenDelayedRef,R,T]),onTriggerLeave:C.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:T,onClose:k,disableHoverableContent:v,children:n})})};gL.displayName=k0;var XT="TooltipTrigger",yL=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=Cy(XT,n),i=FA(XT,n),s=z1(n),o=C.useRef(null),l=Nn(t,o,a.onTriggerChange),u=C.useRef(!1),d=C.useRef(!1),h=C.useCallback(()=>u.current=!1,[]);return C.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),p.jsx(Ey,{asChild:!0,...s,children:p.jsx(an.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:Gt(e.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:Gt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:Gt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Gt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:Gt(e.onBlur,a.onClose),onClick:Gt(e.onClick,a.onClose)})})});yL.displayName=XT;var LA="TooltipPortal",[Yre,Xre]=$1(LA,{forceMount:void 0}),bL=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=Cy(LA,t);return p.jsx(Yre,{scope:t,forceMount:n,children:p.jsx(Za,{present:n||i.open,children:p.jsx(Zp,{asChild:!0,container:a,children:r})})})};bL.displayName=LA;var wp="TooltipContent",vL=C.forwardRef((e,t)=>{const n=Xre(wp,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,s=Cy(wp,e.__scopeTooltip);return p.jsx(Za,{present:r||s.open,children:s.disableHoverableContent?p.jsx(wL,{side:a,...i,ref:t}):p.jsx(Jre,{side:a,...i,ref:t})})}),Jre=C.forwardRef((e,t)=>{const n=Cy(wp,e.__scopeTooltip),r=FA(wp,e.__scopeTooltip),a=C.useRef(null),i=Nn(t,a),[s,o]=C.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,m=C.useCallback(()=>{o(null),h(!1)},[h]),g=C.useCallback((v,b)=>{const w=v.currentTarget,x={x:v.clientX,y:v.clientY},_=nae(x,w.getBoundingClientRect()),E=rae(x,_),T=aae(b.getBoundingClientRect()),k=sae([...E,...T]);o(k),h(!0)},[h]);return C.useEffect(()=>()=>m(),[m]),C.useEffect(()=>{if(l&&d){const v=w=>g(w,d),b=w=>g(w,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,g,m]),C.useEffect(()=>{if(s){const v=b=>{const w=b.target,x={x:b.clientX,y:b.clientY},_=(l==null?void 0:l.contains(w))||(d==null?void 0:d.contains(w)),E=!iae(x,s);_?m():E&&(m(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,s,u,m]),p.jsx(wL,{...e,ref:i})}),[Qre,eae]=$1(k0,{isInside:!1}),tae=qW("TooltipContent"),wL=C.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:s,...o}=e,l=Cy(wp,n),u=z1(n),{onClose:d}=l;return C.useEffect(()=>(document.addEventListener(YT,d),()=>document.removeEventListener(YT,d)),[d]),C.useEffect(()=>{if(l.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),p.jsx(Gp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:p.jsxs(L1,{"data-state":l.stateAttribute,...u,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(tae,{children:r}),p.jsx(Qre,{scope:n,isInside:!0,children:p.jsx(Gre,{id:l.contentId,role:"tooltip",children:a||r})})]})})});vL.displayName=wp;var xL="TooltipArrow",_L=C.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=z1(n);return eae(xL,n).isInside?null:p.jsx(B1,{...a,...r,ref:t})});_L.displayName=xL;function nae(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function rae(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function aae(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function iae(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function sae(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),oae(t)}function oae(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],s=t[t.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],s=n[n.length-2];if((i.x-s.x)*(a.y-s.y)>=(i.y-s.y)*(a.x-s.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var lae=mL,cae=gL,uae=yL,dae=bL,fae=vL,hae=_L;function Un({delayDuration:e=0,...t}){return p.jsx(lae,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function Kn({...e}){return p.jsx(Un,{children:p.jsx(cae,{"data-slot":"tooltip",...e})})}function Zn({...e}){return p.jsx(uae,{"data-slot":"tooltip-trigger",...e})}function Yn({className:e,sideOffset:t=0,children:n,...r}){return p.jsx(dae,{children:p.jsxs(fae,{"data-slot":"tooltip-content",sideOffset:t,className:vt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,p.jsx(hae,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var fE={exports:{}},_6;function pae(){return _6||(_6=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,s={},o={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function _(E){return E instanceof l?new l(E.type,_(E.content),E.alias):Array.isArray(E)?E.map(_):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(_){return Object.prototype.toString.call(_).slice(8,-1)},objId:function(_){return _.__id||Object.defineProperty(_,"__id",{value:++i}),_.__id},clone:function _(E,T){T=T||{};var k,R;switch(o.util.type(E)){case"Object":if(R=o.util.objId(E),T[R])return T[R];k={},T[R]=k;for(var j in E)E.hasOwnProperty(j)&&(k[j]=_(E[j],T));return k;case"Array":return R=o.util.objId(E),T[R]?T[R]:(k=[],T[R]=k,E.forEach(function(I,P){k[P]=_(I,T)}),k);default:return E}},getLanguage:function(_){for(;_;){var E=a.exec(_.className);if(E)return E[1].toLowerCase();_=_.parentElement}return"none"},setLanguage:function(_,E){_.className=_.className.replace(RegExp(a,"gi"),""),_.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var _=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(_){var E=document.getElementsByTagName("script");for(var T in E)if(E[T].src==_)return E[T]}return null}},isActive:function(_,E,T){for(var k="no-"+E;_;){var R=_.classList;if(R.contains(E))return!0;if(R.contains(k))return!1;_=_.parentElement}return!!T}},languages:{plain:s,plaintext:s,text:s,txt:s,extend:function(_,E){var T=o.util.clone(o.languages[_]);for(var k in E)T[k]=E[k];return T},insertBefore:function(_,E,T,k){k=k||o.languages;var R=k[_],j={};for(var I in R)if(R.hasOwnProperty(I)){if(I==E)for(var P in T)T.hasOwnProperty(P)&&(j[P]=T[P]);T.hasOwnProperty(I)||(j[I]=R[I])}var O=k[_];return k[_]=j,o.languages.DFS(o.languages,function(U,M){M===O&&U!=_&&(this[U]=j)}),j},DFS:function _(E,T,k,R){R=R||{};var j=o.util.objId;for(var I in E)if(E.hasOwnProperty(I)){T.call(E,I,E[I],k||I);var P=E[I],O=o.util.type(P);O==="Object"&&!R[j(P)]?(R[j(P)]=!0,_(P,T,null,R)):O==="Array"&&!R[j(P)]&&(R[j(P)]=!0,_(P,T,I,R))}}},plugins:{},highlightAll:function(_,E){o.highlightAllUnder(document,_,E)},highlightAllUnder:function(_,E,T){var k={callback:T,container:_,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),o.hooks.run("before-all-elements-highlight",k);for(var R=0,j;j=k.elements[R++];)o.highlightElement(j,E===!0,k.callback)},highlightElement:function(_,E,T){var k=o.util.getLanguage(_),R=o.languages[k];o.util.setLanguage(_,k);var j=_.parentElement;j&&j.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(j,k);var I=_.textContent,P={element:_,language:k,grammar:R,code:I};function O(M){P.highlightedCode=M,o.hooks.run("before-insert",P),P.element.innerHTML=P.highlightedCode,o.hooks.run("after-highlight",P),o.hooks.run("complete",P),T&&T.call(P.element)}if(o.hooks.run("before-sanity-check",P),j=P.element.parentElement,j&&j.nodeName.toLowerCase()==="pre"&&!j.hasAttribute("tabindex")&&j.setAttribute("tabindex","0"),!P.code){o.hooks.run("complete",P),T&&T.call(P.element);return}if(o.hooks.run("before-highlight",P),!P.grammar){O(o.util.encode(P.code));return}if(E&&r.Worker){var U=new Worker(o.filename);U.onmessage=function(M){O(M.data)},U.postMessage(JSON.stringify({language:P.language,code:P.code,immediateClose:!0}))}else O(o.highlight(P.code,P.grammar,P.language))},highlight:function(_,E,T){var k={code:_,grammar:E,language:T};if(o.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=o.tokenize(k.code,k.grammar),o.hooks.run("after-tokenize",k),l.stringify(o.util.encode(k.tokens),k.language)},tokenize:function(_,E){var T=E.rest;if(T){for(var k in T)E[k]=T[k];delete E.rest}var R=new h;return m(R,R.head,_),d(_,R,E,R.head,0),v(R)},hooks:{all:{},add:function(_,E){var T=o.hooks.all;T[_]=T[_]||[],T[_].push(E)},run:function(_,E){var T=o.hooks.all[_];if(!(!T||!T.length))for(var k=0,R;R=T[k++];)R(E)}},Token:l};r.Prism=o;function l(_,E,T,k){this.type=_,this.content=E,this.alias=T,this.length=(k||"").length|0}l.stringify=function _(E,T){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(O){k+=_(O,T)}),k}var R={type:E.type,content:_(E.content,T),tag:"span",classes:["token",E.type],attributes:{},language:T},j=E.alias;j&&(Array.isArray(j)?Array.prototype.push.apply(R.classes,j):R.classes.push(j)),o.hooks.run("wrap",R);var I="";for(var P in R.attributes)I+=" "+P+'="'+(R.attributes[P]||"").replace(/"/g,"&quot;")+'"';return"<"+R.tag+' class="'+R.classes.join(" ")+'"'+I+">"+R.content+"</"+R.tag+">"};function u(_,E,T,k){_.lastIndex=E;var R=_.exec(T);if(R&&k&&R[1]){var j=R[1].length;R.index+=j,R[0]=R[0].slice(j)}return R}function d(_,E,T,k,R,j){for(var I in T)if(!(!T.hasOwnProperty(I)||!T[I])){var P=T[I];P=Array.isArray(P)?P:[P];for(var O=0;O<P.length;++O){if(j&&j.cause==I+","+O)return;var U=P[O],M=U.inside,W=!!U.lookbehind,V=!!U.greedy,ie=U.alias;if(V&&!U.pattern.global){var ae=U.pattern.toString().match(/[imsuy]*$/)[0];U.pattern=RegExp(U.pattern.source,ae+"g")}for(var ne=U.pattern||U,q=k.next,te=R;q!==E.tail&&!(j&&te>=j.reach);te+=q.value.length,q=q.next){var G=q.value;if(E.length>_.length)return;if(!(G instanceof l)){var J=1,Q;if(V){if(Q=u(ne,te,_,W),!Q||Q.index>=_.length)break;var je=Q.index,se=Q.index+Q[0].length,fe=te;for(fe+=q.value.length;je>=fe;)q=q.next,fe+=q.value.length;if(fe-=q.value.length,te=fe,q.value instanceof l)continue;for(var ve=q;ve!==E.tail&&(fe<se||typeof ve.value=="string");ve=ve.next)J++,fe+=ve.value.length;J--,G=_.slice(te,fe),Q.index-=te}else if(Q=u(ne,0,G,W),!Q)continue;var je=Q.index,Ne=Q[0],Se=G.slice(0,je),ye=G.slice(je+Ne.length),Fe=te+G.length;j&&Fe>j.reach&&(j.reach=Fe);var Xe=q.prev;Se&&(Xe=m(E,Xe,Se),te+=Se.length),g(E,Xe,J);var Le=new l(I,M?o.tokenize(Ne,M):Ne,ie,Ne);if(q=m(E,Xe,Le),ye&&m(E,q,ye),J>1){var Ie={cause:I+","+O,reach:Fe};d(_,E,T,q.prev,te,Ie),j&&Ie.reach>j.reach&&(j.reach=Ie.reach)}}}}}}function h(){var _={value:null,prev:null,next:null},E={value:null,prev:_,next:null};_.next=E,this.head=_,this.tail=E,this.length=0}function m(_,E,T){var k=E.next,R={value:T,prev:E,next:k};return E.next=R,k.prev=R,_.length++,R}function g(_,E,T){for(var k=E.next,R=0;R<T&&k!==_.tail;R++)k=k.next;E.next=k,k.prev=E,_.length-=R}function v(_){for(var E=[],T=_.head.next;T!==_.tail;)E.push(T.value),T=T.next;return E}if(!r.document)return r.addEventListener&&(o.disableWorkerMessageHandler||r.addEventListener("message",function(_){var E=JSON.parse(_.data),T=E.language,k=E.code,R=E.immediateClose;r.postMessage(o.highlight(k,o.languages[T],T)),R&&r.close()},!1)),o;var b=o.util.currentScript();b&&(o.filename=b.src,b.hasAttribute("data-manual")&&(o.manual=!0));function w(){o.manual||o.highlightAll()}if(!o.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",w):window.requestAnimationFrame?window.requestAnimationFrame(w):window.setTimeout(w,16)}return o}(t);e.exports&&(e.exports=n),typeof Qd<"u"&&(Qd.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var s={};s["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},s.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:s}};o["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:o},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,w){return" Error "+b+" while fetching file: "+w},i=" Error: File does not exist or is empty",s={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+o+'="'+u+'"]):not(['+o+'="'+l+'"])';function m(b,w,x){var _=new XMLHttpRequest;_.open("GET",b,!0),_.onreadystatechange=function(){_.readyState==4&&(_.status<400&&_.responseText?w(_.responseText):_.status>=400?x(a(_.status,_.statusText)):x(i))},_.send(null)}function g(b){var w=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(w){var x=Number(w[1]),_=w[2],E=w[3];return _?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var w=b.element;if(w.matches(h)){b.code="",w.setAttribute(o,l);var x=w.appendChild(document.createElement("CODE"));x.textContent=r;var _=w.getAttribute("data-src"),E=b.language;if(E==="none"){var T=(/\.(\w+)$/.exec(_)||[,"none"])[1];E=s[T]||T}n.util.setLanguage(x,E),n.util.setLanguage(w,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),m(_,function(R){w.setAttribute(o,u);var j=g(w.getAttribute("data-range"));if(j){var I=R.split(/\r\n?|\n/g),P=j[0],O=j[1]==null?I.length:j[1];P<0&&(P+=I.length),P=Math.max(0,Math.min(P-1,I.length)),O<0&&(O+=I.length),O=Math.max(0,Math.min(O,I.length)),R=I.slice(P,O).join(`
`),w.hasAttribute("data-start")||w.setAttribute("data-start",String(P+1))}x.textContent=R,n.highlightElement(x)},function(R){w.setAttribute(o,d),x.textContent=R})}}),n.plugins.fileHighlight={highlight:function(w){for(var x=(w||document).querySelectorAll(h),_=0,E;E=x[_++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(fE)),fE.exports}var mae=pae();const gae=xi(mae);var S6={},E6;function yae(){return E6||(E6=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),S6}yae();var C6={},T6;function bae(){return T6||(T6=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),C6}bae();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,s=0;s<a.length;s++)i[a[s]]=e.languages.bash[a[s]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(m){if(!(!m||typeof m=="string"))for(var g=0,v=m.length;g<v;g++){var b=m[g];if(b.type!=="code"){h(b.content);continue}var w=b.content[1],x=b.content[3];if(w&&x&&w.type==="code-language"&&x.type==="code-block"&&typeof w.content=="string"){var _=w.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");_=(/[a-z][\w-]*/i.exec(_)||[""])[0].toLowerCase();var E="language-"+_;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",m=0,g=d.classes.length;m<g;m++){var v=d.classes[m],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var w=e.languages[h];if(w)d.content=e.highlight(u(d.content),w,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var _=document.getElementById(x);_&&(_.innerHTML=e.highlight(_.textContent,e.languages[h],h))})}}});var s=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(s,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(m,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),l(v)}else{var b=o[g];return b||m}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function s(o,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return o});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:s(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:s(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:s(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:s(i),lookbehind:!0,greedy:!0},number:{pattern:s(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var k6={},A6;function vae(){return A6||(A6=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),k6}vae();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const wae=({lang:e,code:t,isStreaming:n=!1})=>{const{foldStreamingCodeBlocks:r}=ar(cn(v=>({prismThemeUrl:v.prismThemeUrl,theme:v.theme,foldStreamingCodeBlocks:v.foldStreamingCodeBlocks}))),[a,i]=C.useState(!1),[s,o]=C.useState(n?r:!1),l=C.useRef(null),u=C.useCallback(()=>{if(l.current&&t)try{l.current.style.whiteSpace!=="pre-wrap"&&(l.current.style.whiteSpace="pre-wrap"),l.current.textContent=t,gae.highlightElement(l.current)}catch(v){console.error("Prism highlight error:",v),l.current.textContent=t}else l.current&&(l.current.textContent="")},[t]);C.useEffect(()=>{s||u()},[t,e,s,u]);const d=async()=>{try{await navigator.clipboard.writeText(t),i(!0),qe.success("Code copied to clipboard!"),setTimeout(()=>i(!1),1500)}catch(v){qe.error("Failed to copy code."),console.error("Clipboard copy failed:",v)}},h=()=>{const v=s;o(b=>!b),v&&setTimeout(u,0)},m=e?`language-${e}`:"language-plaintext",g=C.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return p.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[p.jsxs("div",{className:"code-block-header sticky top-0 z-10 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/codeblock:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:h,"aria-label":s?"Unfold code":"Fold code",children:p.jsx(y1,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:s?"Unfold":"Fold"})]})}),p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:d,"aria-label":"Copy code",children:a?p.jsx(Ga,{className:"h-3.5 w-3.5 text-green-500"}):p.jsx(hp,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:"Copy"})]})})]})]}),p.jsx("div",{})]}),!s&&p.jsx("div",{className:"overflow-hidden w-full",children:p.jsx("pre",{className:"overflow-x-auto w-full relative overflow-wrap-anywhere",children:p.jsx("code",{ref:l,className:m+" block"})})}),s&&p.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:h,children:p.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:g})})]})},Yp=C.memo(wae);var lt;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(lt||(lt={}));const N6={[lt.EPERM]:"Operation not permitted",[lt.ENOENT]:"No such file or directory",[lt.EINTR]:"Interrupted system call",[lt.EIO]:"Input/output error",[lt.ENXIO]:"No such device or address",[lt.EBADF]:"Bad file descriptor",[lt.EAGAIN]:"Resource temporarily unavailable",[lt.ENOMEM]:"Cannot allocate memory",[lt.EACCES]:"Permission denied",[lt.EFAULT]:"Bad address",[lt.ENOTBLK]:"Block device required",[lt.EBUSY]:"Resource busy or locked",[lt.EEXIST]:"File exists",[lt.EXDEV]:"Invalid cross-device link",[lt.ENODEV]:"No such device",[lt.ENOTDIR]:"File is not a directory",[lt.EISDIR]:"File is a directory",[lt.EINVAL]:"Invalid argument",[lt.ENFILE]:"Too many open files in system",[lt.EMFILE]:"Too many open files",[lt.ETXTBSY]:"Text file busy",[lt.EFBIG]:"File is too big",[lt.ENOSPC]:"No space left on disk",[lt.ESPIPE]:"Illegal seek",[lt.EROFS]:"Cannot modify a read-only file system",[lt.EMLINK]:"Too many links",[lt.EPIPE]:"Broken pipe",[lt.EDOM]:"Numerical argument out of domain",[lt.ERANGE]:"Numerical result out of range",[lt.EDEADLK]:"Resource deadlock would occur",[lt.ENAMETOOLONG]:"File name too long",[lt.ENOLCK]:"No locks available",[lt.ENOSYS]:"Function not implemented",[lt.ENOTEMPTY]:"Directory is not empty",[lt.ELOOP]:"Too many levels of symbolic links",[lt.ENOMSG]:"No message of desired type",[lt.EBADE]:"Invalid exchange",[lt.EBADR]:"Invalid request descriptor",[lt.EXFULL]:"Exchange full",[lt.ENOANO]:"No anode",[lt.EBADRQC]:"Invalid request code",[lt.ENOSTR]:"Device not a stream",[lt.ENODATA]:"No data available",[lt.ETIME]:"Timer expired",[lt.ENOSR]:"Out of streams resources",[lt.ENONET]:"Machine is not on the network",[lt.EREMOTE]:"Object is remote",[lt.ENOLINK]:"Link has been severed",[lt.ECOMM]:"Communication error on send",[lt.EPROTO]:"Protocol error",[lt.EBADMSG]:"Bad message",[lt.EOVERFLOW]:"Value too large for defined data type",[lt.EBADFD]:"File descriptor in bad state",[lt.ESTRPIPE]:"Streams pipe error",[lt.ENOTSOCK]:"Socket operation on non-socket",[lt.EDESTADDRREQ]:"Destination address required",[lt.EMSGSIZE]:"Message too long",[lt.EPROTOTYPE]:"Protocol wrong type for socket",[lt.ENOPROTOOPT]:"Protocol not available",[lt.EPROTONOSUPPORT]:"Protocol not supported",[lt.ESOCKTNOSUPPORT]:"Socket type not supported",[lt.ENOTSUP]:"Operation is not supported",[lt.ENETDOWN]:"Network is down",[lt.ENETUNREACH]:"Network is unreachable",[lt.ENETRESET]:"Network dropped connection on reset",[lt.ETIMEDOUT]:"Connection timed out",[lt.ECONNREFUSED]:"Connection refused",[lt.EHOSTDOWN]:"Host is down",[lt.EHOSTUNREACH]:"No route to host",[lt.EALREADY]:"Operation already in progress",[lt.EINPROGRESS]:"Operation now in progress",[lt.ESTALE]:"Stale file handle",[lt.EREMOTEIO]:"Remote I/O error",[lt.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(lt[t],N6[lt[t]],n,r)}constructor(t,n=N6[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=lt[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var hE={exports:{}},R6;function xae(){return R6||(R6=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||l,m),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function s(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},o.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,v=new Array(g);m<g;m++)v[m]=h[m].fn;return v},o.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},o.prototype.emit=function(u,d,h,m,g,v){var b=n?n+u:u;if(!this._events[b])return!1;var w=this._events[b],x=arguments.length,_,E;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),x){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,d),!0;case 3:return w.fn.call(w.context,d,h),!0;case 4:return w.fn.call(w.context,d,h,m),!0;case 5:return w.fn.call(w.context,d,h,m,g),!0;case 6:return w.fn.call(w.context,d,h,m,g,v),!0}for(E=1,_=new Array(x-1);E<x;E++)_[E-1]=arguments[E];w.fn.apply(w.context,_)}else{var T=w.length,k;for(E=0;E<T;E++)switch(w[E].once&&this.removeListener(u,w[E].fn,void 0,!0),x){case 1:w[E].fn.call(w[E].context);break;case 2:w[E].fn.call(w[E].context,d);break;case 3:w[E].fn.call(w[E].context,d,h);break;case 4:w[E].fn.call(w[E].context,d,h,m);break;default:if(!_)for(k=1,_=new Array(x-1);k<x;k++)_[k-1]=arguments[k];w[E].fn.apply(w[E].context,_)}}return!0},o.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},o.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},o.prototype.removeListener=function(u,d,h,m){var g=n?n+u:u;if(!this._events[g])return this;if(!d)return s(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!m||v.once)&&(!h||v.context===h)&&s(this,g);else{for(var b=0,w=[],x=v.length;b<x;b++)(v[b].fn!==d||m&&!v[b].once||h&&v[b].context!==h)&&w.push(v[b]);w.length?this._events[g]=w.length===1?w[0]:w:s(this,g)}return this},o.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&s(this,d)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o}(hE)),hE.exports}var _ae=xae();const BA=xi(_ae);var f8;let Sae=class extends BA{constructor(n){super();wa(this,f8,"List");wa(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),s=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),s}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(f8=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function I6(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function wr(e){throw e}const j6=Intl.NumberFormat("en",{notation:"compact"});j6.format.bind(j6);function Rf(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function Eae(e){try{return JSON.parse(e),!0}catch{return!1}}function JT(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function $A(e){return e.at(0).toUpperCase()+e.slice(1)}const Cae=new TextEncoder;function Xd(e){return Cae.encode(e)}const D6=new TextDecoder;function zA(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return D6.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),D6.decode(t)}function A0(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=A0(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function Tae(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var kae={};let Aae="process"in globalThis&&"env"in globalThis.process&&kae.U_DEBUG=="true";function N0(...e){Aae&&console.debug("[U]",...e)}const M6=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],Nae=[...M6,...M6.map(e=>$A(e)),"char"],UA=/^(u?int|float)(8|16|32|64|128)$/i;function SL(e){return e=="char"?"uint8":e.toLowerCase()}function VA(e){return UA.test(e.toString())}function QT(e){return e=="char"||UA.test(e.toString().toLowerCase())}function Rae(e){if(!QT(e))throw new TypeError("Not a valid primitive type: "+e)}const O6=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function EL(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function Iae(e){return e!=null&&typeof e=="object"&&"struct"in e}function U1(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function So(e){return typeof e=="function"&&Symbol.metadata in e&&Iae(e[Symbol.metadata])}function Ty(e){return e!=null&&typeof e=="object"&&So(e.constructor)}function CL(e){if(!Ty(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function HA(e){return Ty(e)||So(e)}function TL(e){if(!HA(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function qA(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Hr(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Hr(e[i]);return a}if(typeof e=="string")return Rae(e),+SL(e).match(UA)[2]/8;if(qA(e))return e[Symbol.size];TL(e);const t=So(e)?e:e.constructor;U1(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(So(e))return r;for(const a of n.members.values()){const i=e[a.name];if(Ty(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Hr(i)):r+=Hr(i);continue}if(typeof a.length!="string")continue;let s=0;for(let o=0;o<e[a.length];o++)s+=Hr(HA(i[o])?i[o]:a.type);n.isUnion?r=Math.max(r,s):r+=s}return r}function jae(e,t){var i;TL(e);const n=So(e)?e:e.constructor;U1(n);const{struct:r}=n[Symbol.metadata];if(So(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??wr(new Error("Struct does not have member: "+t));let a=0;for(const s of r.members.values()){if(s.name==t)return a;const o=e[s.name];a+=Hr(HA(o)?o:s.type)}throw new Error("Struct does not have member: "+t)}function Dae(e,t){return Math.ceil(e/t)*t}function If(e={}){return function(n,r){const a=new Map;let i=0,s=!1;for(const{name:o,type:l,length:u}of EL(r)){if(!QT(l)&&!So(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const m=a.get(u);if(!m)throw new Error(`"${u}" is undefined or declared after "${o}"`);if(!VA(m.type))throw new Error(`"${u}" is not a number and cannot be used to count "${o}"`)}let d=`${typeof l=="string"?l:l.name} ${o}`;u!==void 0&&(d+=`[${u}]`),a.set(o,{name:o,staticOffset:e.isUnion?0:i,type:QT(l)?SL(l):l,length:u,decl:d});const h=typeof u=="string"||So(l)&&l[Symbol.metadata].struct.isDynamic?0:Hr(l)*(u||1);s||(s=So(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=Dae(i,e.align||1),N0("define",n.name+"."+o)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:s,isUnion:e.isUnion??!1},n}}function R0(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return EL(r).push({name:a,type:e,length:t}),n}}function kL(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:wr(new Error("Array lengths must be natural numbers"))}function ti(e){if(qA(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();CL(e),U1(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Hr(e),a=new Uint8Array(r),i=new DataView(a.buffer);N0("serialize",e.constructor.name);let s=0,o=0;for(const l of n.values()){const u=kL(e,l);N0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),s=o,o+=Ty(h)?Hr(h):Hr(l.type),!VA(l.type)){a.set(h?ti(h):new Uint8Array(Hr(l.type)),s);continue}const m=`set${$A(l.type)}`;if(m=="setInt64"){i.setBigInt64(s,BigInt(h),!t.bigEndian);continue}if(m=="setUint64"){i.setBigUint64(s,BigInt(h),!t.bigEndian);continue}if(m=="setInt128"){i.setBigUint64(s+(t.bigEndian?8:0),h&O6,!t.bigEndian),i.setBigInt64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setUint128"){i.setBigUint64(s+(t.bigEndian?8:0),h&O6,!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(m=="setFloat128"){i.setFloat64(s+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(s+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[m](s,Number(h),!t.bigEndian)}}return a}function V1(e,t){const n=Tae(t);if(qA(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);CL(e),U1(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);N0("deserialize",e.constructor.name);let s=0,o=0;for(const l of a.values()){const u=kL(e,l);N0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const m=u!=-1?d:l.name,g=h[m]===null||h[m]===void 0,v=g&&So(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(s=o,!Ty(h[m])&&!v&&(o+=Hr(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(s))+e[l.name].slice(d+1);continue}if(!VA(l.type)){if(v&&So(l.type))h[m]??(h[m]=new l.type);else if(g)continue;V1(h[m],new Uint8Array(n.subarray(s))),o+=Hr(h[m]);continue}u&&u!=-1&&(h||(h=[]));const b=`get${$A(l.type)}`;if(b=="getInt64"){h[m]=i.getBigInt64(s,!r.bigEndian);continue}if(b=="getUint64"){h[m]=i.getBigUint64(s,!r.bigEndian);continue}if(b=="getInt128"){h[m]=i.getBigInt64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[m]=i.getBigUint64(s+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(s+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[m]=i.getFloat64(s+(r.bigEndian?8:0),!r.bigEndian);continue}h[m]=i[b](s,!r.bigEndian)}}}function Mae(e){function t(n,r){return typeof n=="number"||typeof n=="string"?R0(e,n):R0(e)(n,r)}return t}const _n=Object.fromEntries(Nae.map(e=>[e,Mae(e)]));function Oae(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const Lo={root:"/",pwd:"/",credentials:Oae({uid:0,gid:0}),descriptors:new Map};function AL(e,t){let n="",r=0,a=-1,i=0,s="\0";for(let o=0;o<=e.length;++o){if(o<e.length)s=e[o];else{if(s=="/")break;s="/"}if(s=="/"){if(!(a===o-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=o,i=0;continue}else if(n.length!==0){n="",r=0,a=o,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),r=o-a-1;a=o,i=0}else s==="."&&i!==-1?++i:i=-1}return n}function Nc(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:Lo.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=AL(n,!r),r?`/${n}`:n.length?n:"/"}function Pae(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=AL(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function hr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?Pae(t):"."}function NL(e,t){if(e===t||(e=Nc.call(this,e),t=Nc.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,s=t.length-i,o=a<s?a:s;let l=-1,u=0;for(;u<o;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===o)if(s>o){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>o&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function lr(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function xp(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function ll(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,s=-1,o=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!o){i=l+1;break}continue}s===-1&&(o=!1,s=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(s!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===s-1&&a===i+1?n.base=n.name=e.slice(d,s):(n.name=e.slice(d,a),n.base=e.slice(d,s),n.ext=e.slice(a,s))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var vn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(vn||(vn={}));vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";const Fae=new Sae;function Lae(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};Fae.add(n),Gae(n)}function Bae(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+hr(i,e.path)}function ad(e){return function(t,n={}){return Lae(e,Bae(t,n)),t}}ad(vn.EMERG);const $ae=ad(vn.ALERT),H1=ad(vn.CRIT),Gi=ad(vn.ERR),mi=ad(vn.WARN),GA=ad(vn.NOTICE),RL=ad(vn.INFO),Zg=ad(vn.DEBUG);function zae(e,t){return`\x1B[${t}m${e}\x1B[0m`}function Uae(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[zae(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"",vn.EMERG+"",vn.ALERT+"",vn.CRIT+"",vn.ERR+"",vn.WARN+"",vn.NOTICE+"",vn.INFO+"",vn.DEBUG+"";let Vae=e=>[...Uae(e),e.message];function Hae(e){const t=Vae(e);return typeof t=="string"?[t]:Array.from(t)}let qae=console.error;function Gae(e){e.level>Wae||qae(...Hae(e))}let Wae=vn.ALERT;function WA(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function Kae(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function Zae(e,t){if(typeof t!="object"||t===null)throw Gi(new Ue(lt.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Zg("Using default for option: "+n);continue}throw Gi(new Ue(lt.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const s=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,o=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(o).join(", ")}`:o(r.type);throw Gi(new Ue(lt.EINVAL,`Incorrect type for "${n}": ${s} (expected ${l})`))}}function IL(e){return e!=null&&typeof e=="object"&&"backend"in e&&WA(e.backend)}const KA=0,Ra=4,aa=2,Bw=1,ZA=1,Yae=2,Xae=4,jL=0,pi=1,pc=2,q1=64,G1=128,Jae=256,W1=512,wf=1024,Qae=65536,eie=262144,tie=131072,K1=1052672,nie=4096,rie=32768,aie=16384,iie=2048,Nr=61440,jf=49152,Fc=40960,Eo=32768,Df=24576,_a=16384,Mf=8192,Of=4096,ky=2048,Ay=1024,sie=512,oie=448,DL=256,ML=128,OL=64,lie=56,PL=32,FL=16,LL=8,cie=7,BL=4,$L=2,zL=1,uie=0,Oi=4294967295,UL=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:ZA,COPYFILE_FICLONE:Yae,COPYFILE_FICLONE_FORCE:Xae,F_OK:KA,O_APPEND:wf,O_CREAT:q1,O_DIRECT:aie,O_DIRECTORY:Qae,O_DSYNC:nie,O_EXCL:G1,O_NOATIME:eie,O_NOCTTY:Jae,O_NOFOLLOW:tie,O_NONBLOCK:iie,O_RDONLY:jL,O_RDWR:pc,O_SYMLINK:rie,O_SYNC:K1,O_TRUNC:W1,O_WRONLY:pi,R_OK:Ra,S_IFBLK:Df,S_IFCHR:Mf,S_IFDIR:_a,S_IFIFO:Of,S_IFLNK:Fc,S_IFMT:Nr,S_IFREG:Eo,S_IFSOCK:jf,S_IRGRP:PL,S_IROTH:BL,S_IRUSR:DL,S_IRWXG:lie,S_IRWXO:cie,S_IRWXU:oie,S_ISGID:Ay,S_ISUID:ky,S_ISVTX:sie,S_IWGRP:FL,S_IWOTH:$L,S_IWUSR:ML,S_IXGRP:LL,S_IXOTH:zL,S_IXUSR:OL,UV_FS_O_FILEMAP:uie,W_OK:aa,X_OK:Bw,size_max:Oi},Symbol.toStringTag,{value:"Module"})),sw=BigInt(1e3);class VL{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:s,size:o,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(s??0),this.size=this._convert(o??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&Eo),(this.mode&Nr)==0&&(this.mode=this.mode|this._convert(Eo)),Object.assign(this,d)}isFile(){return(this.mode&Nr)===Eo}isDirectory(){return(this.mode&Nr)===_a}isSymbolicLink(){return(this.mode&Nr)===Fc}isSocket(){return(this.mode&Nr)===jf}isBlockDevice(){return(this.mode&Nr)===Df}isCharacterDevice(){return(this.mode&Nr)===Mf}isFIFO(){return(this.mode&Nr)===Of}toJSON(){return Rf(this,ek)}hasAccess(t,n){return gr(n,this._isBigint?new Lc(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*sw}get mtimeNs(){return BigInt(this.mtimeMs)*sw}get ctimeNs(){return BigInt(this.ctimeMs)*sw}get birthtimeNs(){return BigInt(this.birthtimeMs)*sw}}function HL(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<Oi?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<Oi?e.gid=n:r=!1,r}class Lc extends VL{constructor(){super(...arguments),this._isBigint=!1}}class Pf extends VL{constructor(){super(...arguments),this._isBigint=!0}}function die(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class fie{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=Oi,this.ffree=Oi}}class hie{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(Oi),this.ffree=BigInt(Oi)}}var Pr=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},bn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},YA=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const ps=0,pie=1024;let P6=(()=>{var e,t;let n=[If()],r,a=[],i,s,o=[],l=[],u,d=[],h=[],m,g=[],v=[],b,w=[],x=[];return i=class{get key(){return this._key}set key(_){this._key=_,this.keySize=_.length}get value(){return this._value.subarray(0,this.valueSize)}set value(_){this._value=_,this.valueSize=_.length}constructor(_,E){this.keySize=bn(this,o,0),this.valueSize=(bn(this,l),bn(this,d,0)),this._key=(bn(this,h),bn(this,g,"")),this._value=(bn(this,v),bn(this,w,new Uint8Array(pie))),bn(this,x),_&&(this.key=_),E&&(this.value=E)}},YA(i,"Attribute"),(()=>{const _=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;s=[(e=_n).uint32.bind(e)],u=[(t=_n).uint32.bind(t)],m=[_n.char("keySize")],b=[_n.uint8("valueSize")],Pr(null,null,s,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,T)=>{E.keySize=T}},metadata:_},o,l),Pr(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,T)=>{E.valueSize=T}},metadata:_},d,h),Pr(null,null,m,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,T)=>{E._key=T}},metadata:_},g,v),Pr(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,T)=>{E._value=T}},metadata:_},w,x),Pr(null,r={value:i},n,{kind:"class",name:i.name,metadata:_},null,a),i=r.value,_&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:_}),bn(i,a)})(),i})(),Gu=(()=>{var e;let t=[If()],n,r=[],a,i,s=[],o=[],l,u=[],d=[];return a=class{has(h){return this.data.some(m=>m.key==h)}get(h){return this.data.find(m=>m.key==h)}set(h,m){const g=this.get(h);if(g){g.value=m;return}this.data.push(new P6(h,m)),this.size++}remove(h){const m=this.data.findIndex(g=>g.key==h);return m===-1?!1:(this.data.splice(m,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=bn(this,s,0),this.data=(bn(this,o),bn(this,u,[])),bn(this,d)}},YA(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=_n).uint32.bind(e)],l=[R0(P6,"size")],Pr(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:m=>"size"in m,get:m=>m.size,set:(m,g)=>{m.size=g}},metadata:h},s,o),Pr(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:m=>"data"in m,get:m=>m.data,set:(m,g)=>{m.data=g}},metadata:h},u,d),Pr(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),bn(a,r)})(),a})();const ek=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],mie=4;var Wi;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Wi||(Wi={}));let xa=(()=>{var e,t,n,r,a,i,s,o,l,u,d,h,m,g,v,b;let w=[If()],x,_=[],E,T,k=[],R=[],j,I=[],P=[],O,U=[],M=[],W,V=[],ie=[],ae,ne=[],q=[],te,G=[],J=[],Q,se=[],fe=[],ve,je=[],Ne=[],Se,ye=[],Fe=[],Xe,Le=[],Ie=[],B,Ce=[],Ee=[],ce,oe=[],ee=[],_e,Pe=[],ke=[],We,Nt=[],it=[],Ct,Ft=[],Mt=[],Zt,be=[],D=[],Z,he=[],De=[],we,Ae=[],ue=[];var ft=E=class{constructor(wt){if(this.data=bn(this,k,JT(0,Oi)),this.__data_old=(bn(this,R),bn(this,I,0)),this.size=(bn(this,P),bn(this,U,0)),this.mode=(bn(this,M),bn(this,V,0)),this.nlink=(bn(this,ie),bn(this,ne,1)),this.uid=(bn(this,q),bn(this,G,0)),this.gid=(bn(this,J),bn(this,se,0)),this.atimeMs=(bn(this,fe),bn(this,je,Date.now())),this.birthtimeMs=(bn(this,Ne),bn(this,ye,Date.now())),this.mtimeMs=(bn(this,Fe),bn(this,Le,Date.now())),this.ctimeMs=(bn(this,Ie),bn(this,Ce,Date.now())),this.ino=(bn(this,Ee),bn(this,oe,JT(0,Oi))),this.__ino_old=(bn(this,ee),bn(this,Pe,0)),this.flags=(bn(this,ke),bn(this,Nt,0)),this.__after_flags=(bn(this,it),bn(this,Ft,0)),this.version=(bn(this,Mt),bn(this,be,0)),this.__padding=(bn(this,D),bn(this,he,[])),this.attributes=(bn(this,De),bn(this,Ae,new Gu)),bn(this,ue),!!wt){if(!("byteLength"in wt)){Object.assign(this,wt);return}if(wt.byteLength<Hr(ft))throw H1(new Ue(lt.EIO,"Buffer is too small to create an inode"));V1(this,wt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Rf(this,ek),attributes:this.attributes}}toStats(){return new Lc(this)}update(wt){if(!wt)return!1;let L=!1;for(const $e of ek)wt[$e]!==void 0&&($e=="ino"||$e=="data"||this[$e]!==wt[$e]&&($e=="atimeMs"&&this.flags&Wi.NoAtime||(this[$e]=wt[$e],L=!0)));return wt.attributes&&(this.attributes=wt.attributes,L=!0),L&&(this.ctimeMs=Date.now()),L}};return YA(E,"Inode"),(()=>{const wt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;T=[(e=_n).uint32.bind(e)],j=[(t=_n).uint32.bind(t)],O=[(n=_n).uint32.bind(n)],W=[(r=_n).uint16.bind(r)],ae=[(a=_n).uint32.bind(a)],te=[(i=_n).uint32.bind(i)],Q=[(s=_n).uint32.bind(s)],ve=[(o=_n).float64.bind(o)],Se=[(l=_n).float64.bind(l)],Xe=[(u=_n).float64.bind(u)],B=[(d=_n).float64.bind(d)],ce=[(h=_n).uint32.bind(h)],_e=[(m=_n).uint32.bind(m)],We=[(g=_n).uint32.bind(g)],Ct=[(v=_n).uint16.bind(v)],Zt=[(b=_n).uint32.bind(b)],Z=[_n.uint8(48)],we=[R0(Gu)],Pr(null,null,T,{kind:"field",name:"data",static:!1,private:!1,access:{has:L=>"data"in L,get:L=>L.data,set:(L,$e)=>{L.data=$e}},metadata:wt},k,R),Pr(null,null,j,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:L=>"__data_old"in L,get:L=>L.__data_old,set:(L,$e)=>{L.__data_old=$e}},metadata:wt},I,P),Pr(null,null,O,{kind:"field",name:"size",static:!1,private:!1,access:{has:L=>"size"in L,get:L=>L.size,set:(L,$e)=>{L.size=$e}},metadata:wt},U,M),Pr(null,null,W,{kind:"field",name:"mode",static:!1,private:!1,access:{has:L=>"mode"in L,get:L=>L.mode,set:(L,$e)=>{L.mode=$e}},metadata:wt},V,ie),Pr(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:L=>"nlink"in L,get:L=>L.nlink,set:(L,$e)=>{L.nlink=$e}},metadata:wt},ne,q),Pr(null,null,te,{kind:"field",name:"uid",static:!1,private:!1,access:{has:L=>"uid"in L,get:L=>L.uid,set:(L,$e)=>{L.uid=$e}},metadata:wt},G,J),Pr(null,null,Q,{kind:"field",name:"gid",static:!1,private:!1,access:{has:L=>"gid"in L,get:L=>L.gid,set:(L,$e)=>{L.gid=$e}},metadata:wt},se,fe),Pr(null,null,ve,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:L=>"atimeMs"in L,get:L=>L.atimeMs,set:(L,$e)=>{L.atimeMs=$e}},metadata:wt},je,Ne),Pr(null,null,Se,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:L=>"birthtimeMs"in L,get:L=>L.birthtimeMs,set:(L,$e)=>{L.birthtimeMs=$e}},metadata:wt},ye,Fe),Pr(null,null,Xe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:L=>"mtimeMs"in L,get:L=>L.mtimeMs,set:(L,$e)=>{L.mtimeMs=$e}},metadata:wt},Le,Ie),Pr(null,null,B,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:L=>"ctimeMs"in L,get:L=>L.ctimeMs,set:(L,$e)=>{L.ctimeMs=$e}},metadata:wt},Ce,Ee),Pr(null,null,ce,{kind:"field",name:"ino",static:!1,private:!1,access:{has:L=>"ino"in L,get:L=>L.ino,set:(L,$e)=>{L.ino=$e}},metadata:wt},oe,ee),Pr(null,null,_e,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:L=>"__ino_old"in L,get:L=>L.__ino_old,set:(L,$e)=>{L.__ino_old=$e}},metadata:wt},Pe,ke),Pr(null,null,We,{kind:"field",name:"flags",static:!1,private:!1,access:{has:L=>"flags"in L,get:L=>L.flags,set:(L,$e)=>{L.flags=$e}},metadata:wt},Nt,it),Pr(null,null,Ct,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:L=>"__after_flags"in L,get:L=>L.__after_flags,set:(L,$e)=>{L.__after_flags=$e}},metadata:wt},Ft,Mt),Pr(null,null,Zt,{kind:"field",name:"version",static:!1,private:!1,access:{has:L=>"version"in L,get:L=>L.version,set:(L,$e)=>{L.version=$e}},metadata:wt},be,D),Pr(null,null,Z,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:L=>"__padding"in L,get:L=>L.__padding,set:(L,$e)=>{L.__padding=$e}},metadata:wt},he,De),Pr(null,null,we,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:L=>"attributes"in L,get:L=>L.attributes,set:(L,$e)=>{L.attributes=$e}},metadata:wt},Ae,ue),Pr(null,x={value:E},w,{kind:"class",name:E.name,metadata:wt},null,_),ft=E=x.value,wt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:wt}),bn(E,_)})(),ft=E})();function gie(e){return(e.mode&Nr)===Eo}function jo(e){return(e.mode&Nr)===_a}function _p(e){return(e.mode&Nr)===Fc}function yie(e){return(e.mode&Nr)===jf}function I0(e){return(e.mode&Nr)===Df}function j0(e){return(e.mode&Nr)===Mf}function bie(e){return(e.mode&Nr)===Of}function gr(e,t,n){const r=(e==null?void 0:e.credentials)||Lo.credentials;if(_p(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&DL&&(a|=Ra),t.mode&ML&&(a|=aa),t.mode&OL&&(a|=Bw)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&PL&&(a|=Ra),t.mode&FL&&(a|=aa),t.mode&LL&&(a|=Bw)),t.mode&BL&&(a|=Ra),t.mode&$L&&(a|=aa),t.mode&zL&&(a|=Bw),(a&n)===n}const F6=1;class Ax extends Map{constructor(){super(...arguments),this.maxSize=Oi}toJSON(){return{version:F6,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Hr(xa);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&Nr)!=_a)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())lr(a)==t&&a!=t&&(r[xp(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&Nr)!=_a)continue;const a={};for(const i of this.keys())lr(i)==n&&i!=n&&(a[xp(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=F6)throw new Ue(lt.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=JT(1,Oi)),r=="/"&&(a.ino=0),this.set(r,new xa(a));return this}static parse(t){if(!Eae(t))throw new Ue(lt.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Ax;return r.fromJSON(n),r}}const pE=4096;let XA=class tk{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===tk.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===tk.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:s=a}=n;for(let o=i;o<s;o+=pE){const l=o+pE>s?s-o:pE,u=new Uint8Array(l);await this.read(t,u,o,o+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,s)=>{let o=!1;const l=d=>{o=!0,s.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!o&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function Ni(e){return JSON.parse(zA(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function Os(e){return Xd(JSON.stringify(e))}function id(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(lt.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Nx(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(lt.EINVAL,"Invalid time.")}}function pn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(lt.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(lt.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(lt.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Nc(e)}function mc(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:id("mode"in e?e==null?void 0:e.mode:null,r)}}class vie{constructor(t,n,r,a){wa(this,"id");wa(this,"_size");wa(this,"options");wa(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,s)=>i.start-s.start),r.ranges=r.ranges.reduce((i,s)=>(!i.length||i.at(-1).end<s.start?i.push(s):i.at(-1).end=Math.max(i.at(-1).end,s.end),i),[]),r.data=A0(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const s of i.ranges)if(!(s.end<=t)){if(s.start>=n)break;r.push({start:Math.max(t,s.start),end:Math.min(n,s.end)})}}r.sort((i,s)=>i.start-s.start);const a=[];for(const i of r){const s=a.at(-1);s&&i.start<=s.end?s.end=Math.max(s.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=A0(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((o,l)=>o.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},s=this.regions.findIndex(o=>o.offset>n);return s==-1?this.regions.push(i):this.regions.splice(s,0,i),this.collect(),this}}var mE,gE,yE;(mE=Promise.withResolvers)!==null&&mE!==void 0||(Promise.withResolvers=(mi("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(gE=Symbol.dispose)!==null&&gE!==void 0||(Symbol.dispose=(mi("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(yE=Symbol.asyncDispose)!==null&&yE!==void 0||(Symbol.asyncDispose=(mi("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class qL{constructor(t){this.store=t}}class wie extends qL{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class nk extends qL{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new vie(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const s=i.missing(n,r);for(const{start:l,end:u}of s)this.async(this.get(t,l,u));if(s.length)throw Gi(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const o=i.regionAt(n);if(!o){mi("Missing cache region for "+t);return}return o.data.subarray(n-o.offset,r-o.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class xie{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof nk))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof nk))throw i;const o=this.raw._cached(t);if(!o)throw i;for(const l of o.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Mr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Or=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class GL extends XA{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const s=NL(t,a);if(s.startsWith(".."))continue;let o=hr(n,s);o.endsWith("/")&&(o=o.slice(0,-1)),r.push({oldKey:a,newKey:o,ino:i})}for(const{oldKey:a,newKey:i,ino:s}of r){this._ids.delete(a),this._ids.set(i,s);const o=this._paths.get(s);if(!o){mi("Missing paths in table for ino "+s);continue}o.delete(a),o.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Zg(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),await r.set(s.ino,ti(s)),a.has(i)&&await r.set(s.data,Os(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1),a=t.directories();for(const[i,s]of t)this._add(s.ino,i),r.setSync(s.ino,ti(s)),a.has(i)&&r.setSync(s.data,Os(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Ax,a=Mr(n,this.transaction(),!0),i=[["/",0]],s=I6(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new xa(await a.get(l));if(r.set(o,u),u.mode&_a){const d=Ni((t=await a.get(u.data))!==null&&t!==void 0?t:wr(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([hr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Ax,a=Mr(n,this.transaction(),!1),i=[["/",0]],s=I6(Ue.With("EDEADLK"));for(;i.length;){const[o,l]=i.shift(),u=new xa(a.getSync(l));if(r.set(o,u),u.mode&_a){const d=Ni((t=a.getSync(u.data))!==null&&t!==void 0?t:wr(Ue.With("ENODATA",o)));for(const[h,m]of Object.entries(d))i.push([hr(o,h),m])}}return s(),r}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async rename(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=ll(t),u=ll(n),d=await this.findInode(o,l.dir,"rename"),h=Ni((r=await o.get(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Gi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const g=u.dir==l.dir,v=g?d:await this.findInode(o,u.dir,"rename"),b=g?h:Ni((a=await o.get(v.data))!==null&&a!==void 0?a:wr(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const w=new xa((i=await o.get(b[u.base]))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw Ue.With("EPERM",n,"rename");await o.remove(w.data),await o.remove(b[u.base])}b[u.base]=m,await o.set(d.data,Os(h)),await o.set(v.data,Os(b)),await o.commit(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}renameSync(t,n){var r,a,i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=ll(t),u=ll(n),d=this.findInodeSync(o,l.dir,"rename"),h=Ni((r=o.getSync(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const m=h[l.base];if(m!=this._ids.get(t)&&Gi(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(lt.EBUSY,l.dir);const g=u.dir===l.dir,v=g?d:this.findInodeSync(o,u.dir,"rename"),b=g?h:Ni((a=o.getSync(v.data))!==null&&a!==void 0?a:wr(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const w=new xa((i=o.getSync(b[u.base]))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",n,"rename")));if(!w.toStats().isFile())throw Ue.With("EPERM",n,"rename");o.removeSync(w.data),o.removeSync(b[u.base])}b[u.base]=m,o.setSync(d.data,Os(h)),o.setSync(v.data,Os(b)),o.commitSync(),this._move(t,n)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Or(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Mr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Or(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,ti(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,ti(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async createFile(t,n){return n.mode|=Eo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Eo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=_a,await this.commitNew(t,n,Xd("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=_a,this.commitNewSync(t,n,Xd("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(Ni((n=await a.get(i.data))!==null&&n!==void 0?n:wr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Or(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Mr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(Ni((n=a.getSync(i.data))!==null&&n!==void 0?n:wr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Or(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=await this.findInode(i,t,"sync");n&&await i.set(s.data,n),s.update(r)&&(this._add(s.ino,t),await i.set(s.ino,ti(s))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=this.findInodeSync(i,t,"sync");n&&i.setSync(s.data,n),s.update(r)&&(this._add(s.ino,t),i.setSync(s.ino,ti(s))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!0),s=lr(n),o=await this.findInode(i,s,"link"),l=Ni((r=await i.get(o.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",s,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[xp(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,ti(u)),await i.set(o.data,Os(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Or(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Mr(a,this.transaction(),!1),s=lr(n),o=this.findInodeSync(i,s,"link"),l=Ni((r=i.getSync(o.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",s,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[xp(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,ti(u)),i.setSync(o.data,Os(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Or(a)}}async read(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!0),l=await this.findInode(o,t,"read");if(l.size==0)return;const u=(i=await o.get(l.data,r,a))!==null&&i!==void 0?i:wr(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Gi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}readSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{const o=Mr(s,this.transaction(),!1),l=this.findInodeSync(o,t,"read");if(l.size==0)return;const u=(i=o.getSync(l.data,r,a))!==null&&i!==void 0?i:wr(Ue.With("ENODATA",t,"read")),d=o.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Gi(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!0),o=await this.findInode(s,t,"write");let l=n;s.flag("partial")||(l=A0((a=await s.get(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await s.set(o.data,l,r),this._add(o.ino,t),await s.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const s=Mr(i,this.transaction(),!1),o=this.findInodeSync(s,t,"write");let l=n;s.flag("partial")||(l=A0((a=s.getSync(o.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),s.setSync(o.data,l,r),this._add(o.ino,t),s.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}transaction(){return new xie(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!0);if(await n.get(ps))return;const r=new xa({ino:ps,data:1,mode:511|_a});await n.set(r.data,Xd("{}")),this._add(ps,"/"),await n.set(ps,ti(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Mr(t,this.transaction(),!1);if(n.getSync(ps))return;const r=new xa({ino:ps,data:1,mode:511|_a});n.setSync(r.data,Xd("{}")),this._add(ps,"/"),n.setSync(ps,ti(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Or(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){mi("Attempted to populate tables after initialization");return}Zg("Populating tables with existing store metadata");const n=Mr(t,this.transaction(),!0),r=await n.get(ps);if(!r){GA("Store does not have a root inode");const o=new xa({ino:ps,data:1,mode:511|_a});await n.set(o.data,Xd("{}")),this._add(ps,"/"),await n.set(ps,ti(o)),await n.commit();return}if(r.length<Hr(xa)){H1("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const s=[["/",ps]];for(;s.length>0;){i++;const[o,l]=s.shift();this._add(l,o);const u=await n.get(l);if(!u){mi("Store is missing data for inode: "+l);continue}if(u.length<Hr(xa)){mi(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new xa(u);if((d.mode&_a)!=_a||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){mi("Store is missing directory data: "+d.data);continue}const m=Ni(h);for(const[g,v]of Object.entries(m))s.push([hr(o,g),v])}Zg(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Or(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new xa((a=await t.get(i))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new xa((a=t.getSync(i))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>Oi)throw Gi(new Ue(lt.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!0),{dir:l,base:u}=ll(t),d=await this.findInode(o,l,a),h=Ni((i=await o.get(d.data))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new xa({...n,ino:m,data:m+1,size:r.byteLength});return await o.set(g.ino,ti(g)),await o.set(g.data,r),h[u]=g.ino,await o.set(d.data,Os(h)),await o.commit(),g}catch(o){s.error=o,s.hasError=!0}finally{const o=Or(s);o&&await o}}commitNewSync(t,n,r,a){var i;const s={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const o=Mr(s,this.transaction(),!1),{dir:l,base:u}=ll(t),d=this.findInodeSync(o,l,a),h=Ni((i=o.getSync(d.data))!==null&&i!==void 0?i:wr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const m=this.allocNew(t,a),g=new xa({...n,ino:m,data:m+1,size:r.byteLength});return o.setSync(g.ino,ti(g)),o.setSync(g.data,r),h[u]=g.ino,o.setSync(d.data,Os(h)),o.commitSync(),g}catch(o){s.error=o,s.hasError=!0}finally{Or(s)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!0),{dir:l,base:u}=ll(t),d=await this.findInode(o,l,s),h=Ni((r=await o.get(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",l,s)));if(!h[u])throw Ue.With("ENOENT",t,s);const m=h[u],g=new xa((a=await o.get(m))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&jo(g))throw Ue.With("EISDIR",t,s);await o.set(d.data,Os(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await o.set(g.ino,ti(g))):(await o.remove(g.data),await o.remove(m),this._remove(m)),await o.commit()}catch(s){i.error=s,i.hasError=!0}finally{const s=Or(i);s&&await s}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const s=n?"rmdir":"unlink",o=Mr(i,this.transaction(),!1),{dir:l,base:u}=ll(t),d=this.findInodeSync(o,l,s),h=Ni((r=o.getSync(d.data))!==null&&r!==void 0?r:wr(Ue.With("ENOENT",l,s))),m=h[u];if(!m)throw Ue.With("ENOENT",t,s);const g=new xa((a=o.getSync(m))!==null&&a!==void 0?a:wr(Ue.With("ENOENT",t,s)));if(delete h[u],!n&&jo(g))throw Ue.With("EISDIR",t,s);o.setSync(d.data,Os(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),o.setSync(g.ino,ti(g))):(o.removeSync(g.data),o.removeSync(m),this._remove(m)),o.commitSync()}catch(s){i.error=s,i.hasError=!0}finally{Or(i)}}}class _ie extends wie{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class Sie extends Map{constructor(t=Oi,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new _ie(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const Eie={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new GL(new Sie(e,t));return n.checkRootSync(),n}},Cie=Eie;let Ia=!0;class L6 extends BA{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let s=this._buffer.indexOf(`
`);s>=0;s=this._buffer.indexOf(`
`)){let o=this._buffer.substring(0,s);o.endsWith("\r")&&(o=o.substring(0,o.length-1)),this._buffer=this._buffer.substring(s+1),this.line=o,o.trim()&&!o.trim().match(/^\s*$/)&&this._history.at(-1)!=o&&(this._history.push(o),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",o)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;Ps(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;Ps(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);ow(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);ow(this.output,0),Ps(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,Ps(this.output,-a.length,0),Ps(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;Ps(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(Ps(this.output,-this._cursor,0),Ps(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);ow(this.output,0),Ps(this.output,0,0),this.output.write(this._prompt+r),this.line=r,Ps(this.output,-r.length,0),Ps(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(ow(this.output,0),Ps(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return mi("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return mi("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function Tie(e,t,n,r){return"input"in e?new L6(e.input,e.output,e.completer,e.terminal):new L6(e,t,n,r)}function ow(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function Ps(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Rx{get position(){return this.flag&wf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,s){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=s,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&K1||this.inode.flags&Wi.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&pi||this.flag&pc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&pi||this.flag&pc))throw new Ue(lt.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!j0(this.inode)&&!I0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,this.fs.writeSync(this.internalPath,s,a),this._isSync&&this.sync(),s.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&pi)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Wi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!j0(this.inode)&&!I0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>Nr?-61441:Nr)|t,(this._isSync||t>Nr)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,HL(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Ix(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:Lo.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function Si(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Lo.descriptors).get(t);if(!a)throw new Ue(lt.EBADF);return a}function WL(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:Lo.descriptors).delete(t)}const kie=/[rwasx]{1,2}\+?/;function gc(e){if(typeof e=="number")return e;if(!kie.test(e))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);return Aie(e)}function Aie(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(lt.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?jL:q1;return e.includes("w")&&(t|=W1),e.includes("a")&&(t|=wf),e.includes("+")?t|=pc:e.includes("r")||(t|=pi),e.includes("s")&&(t|=K1),e.includes("x")&&(t|=G1),t}function KL(e){let t=0;return e&pi||(t|=Ra),(e&pi||e&pc)&&(t|=aa),t}const D0=new Map;JA("/",Cie.create({label:"root"}));function JA(e,t){if(e[0]!="/"&&(e="/"+e),e=Nc.call(this,e),D0.has(e))throw Gi(new Ue(lt.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,D0.set(e,t),RL(`Mounted ${t.name} on ${e}`),Zg(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function ZL(e){if(e[0]!="/"&&(e="/"+e),e=Nc.call(this,e),!D0.has(e)){mi(e+" is already unmounted");return}D0.delete(e),GA("Unmounted "+e)}function qn(e,t){const n=(t==null?void 0:t.root)||Lo.root;e=pn(hr(n,e));const r=[...D0].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(Rie(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw $ae(new Ue(lt.EIO,"No file system",e))}function bE(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function yr(e,t){typeof e.stack=="string"&&(e.stack=bE(e.stack,t));try{e.message=bE(e.message,t)}catch{}return e.path&&(e.path=bE(e.path,t)),e}function YL(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||Oi),files:(t?BigInt:Number)(n.totalNodes||Oi),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function Nie(e){var t,n,r,a,i,s,o;const l=this!==null&&this!==void 0?this:Lo;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(lt.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=hr(l.root,e);for(const d of(o=(s=l.descriptors)===null||s===void 0?void 0:s.values())!==null&&o!==void 0?o:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new Ue(lt.EPERM,"Can not chroot() outside of current root");l.root=u}function Rie(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class XL extends BA{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class JL extends XL{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?hr(t.root,n):n,jie(this.realpath,this)}close(){super.emit("close"),Die(this.realpath,this)}[Symbol.dispose](){this.close()}}class Iie extends XL{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=Wu(this.path);die(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=Wu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const Iu=new Map;function jie(e,t){const n=pn(e);Iu.has(n)||Iu.set(n,new Set),Iu.get(n).add(t)}function Die(e,t){const n=pn(e);Iu.has(n)&&(Iu.get(n).delete(t),Iu.get(n).size===0&&Iu.delete(n))}function ai(e,t,n){var r;e&&(n=hr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=pn(n);for(let a=n;a!="/";a=lr(a)){const i=Iu.get(a);if(i)for(const s of i)s.emit("change",t,NL.call(s._context,a,n)||xp(n))}}var Ny=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Ry=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function Mie(e,t){e=pn(e),t=pn(t);const n=qn(e,this),r=qn(t,this);if(!Wu.call(this,lr(e)).hasAccess(aa,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),ai(this,"rename",e.toString()),ai(this,"change",t.toString());return}rN.call(this,t,nN(e)),tN.call(this,e),ai(this,"rename",e.toString())}catch(a){throw yr(a,{[n.path]:e,[r.path]:t})}}function QA(e){e=pn(e);try{const{fs:t,path:n}=qn(sd.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==lt.ENOENT)return!1;throw t}}function Wu(e,t){e=pn(e);const{fs:n,path:r}=qn(sd.call(this,e),this);try{const a=n.statSync(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Pf(a):new Lc(a)}catch(a){throw yr(a,{[r]:e})}}function eN(e,t){e=pn(e);const{fs:n,path:r}=qn(e,this);try{const a=n.statSync(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Pf(a):new Lc(a)}catch(a){throw yr(a,{[r]:e})}}function Oie(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=Ny(n,Ff.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(lt.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{Ry(n)}}function tN(e){e=pn(e);const{fs:t,path:n}=qn(e,this);try{if(Ia&&!gr(this,t.statSync(n),aa))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),ai(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}function Ff(e,t){var n;e=pn(e);const r=id(t.mode,420),a=gc(t.flag);e=t.preserveSymlinks?e:sd.call(this,e);const{fs:i,path:s}=qn(e,this);let o;try{o=i.statSync(s)}catch{}if(!o){if(!(a&q1))throw Ue.With("ENOENT",e,"_open");const u=i.statSync(lr(s));if(!gr(this,u,aa))throw Ue.With("EACCES",lr(e),"_open");if(!jo(u))throw Ue.With("ENOTDIR",lr(e),"_open");if(!t.allowDirectory&&r&_a)throw Ue.With("EISDIR",e,"_open");if(!gr(this,u,aa))throw Ue.With("EACCES",lr(s),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Lo.credentials,m=i.createFileSync(s,{mode:r,uid:u.mode&ky?u.uid:d,gid:u.mode&Ay?u.gid:h});return new Rx(this,e,i,s,a,m)}if(!gr(this,o,r)||!gr(this,o,KL(a)))throw Ue.With("EACCES",e,"_open");if(a&G1)throw Ue.With("EEXIST",e,"_open");const l=new Rx(this,e,i,s,a,o);if(a&W1&&l.truncate(0),!t.allowDirectory&&o.mode&_a)throw Ue.With("EISDIR",e,"_open");return l}function Z1(e,t,n=KA){return Ix(Ff.call(this,e,{flag:t,mode:n}))}function Y1(e,t,n){return Ix(Ff.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function QL(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Ny(r,typeof e=="number"?Si(this,e):Ff.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),s=new Uint8Array(i);return a.read(s,0,i,0),s}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function nN(e,t={}){const n=mc(t,null,"r",420);if(gc(n.flag)&pi)throw new Ue(lt.EINVAL,"Flag passed to readFile must allow for reading");const a=Lr.from(QL.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function rN(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=mc(n,"utf8","w+",420),i=gc(a.flag);if(!(i&pi||i&pc))throw new Ue(lt.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!s)throw new Ue(lt.EINVAL,"Data not specified");Ny(r,typeof e=="number"?Si(this,e):Ff.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength,0),ai(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function Pie(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=mc(n,"utf8","a+",420),i=gc(a.flag);if(!(i&wf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);Ny(r,Ff.call(this,typeof e=="number"?Si(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(s,0,s.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function Fie(e,t){const n=Si(this,e).stat();return t!=null&&t.bigint?new Pf(n):new Lc(n)}function Lf(e){Si(this,e).close(),WL(this,e)}function Lie(e,t=0){if(t||(t=0),t<0)throw new Ue(lt.EINVAL);Si(this,e).truncate(t)}function Bie(e){Si(this,e).sync()}function $ie(e){Si(this,e).datasync()}function zie(e,t,n,r,a){let i,s,o,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";s=0,i=Lr.from(t,h),o=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n,o=r,l=typeof a=="number"?a:null;const u=Si(this,e);l??(l=u.position);const d=u.write(i,s,o,l);return ai(this,"change",u.path),d}function Uie(e,t,n,r,a){const i=Si(this,e),s=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,s,r,a)}function aN(e,t,n){Si(this,e).chown(t,n)}function iN(e,t){const n=id(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode.");Si(this,e).chmod(n)}function sN(e,t,n){Si(this,e).utimes(Nx(t),Nx(n))}function e9(e){e=pn(e);const{fs:t,path:n}=qn(sd.call(this,e),this);try{const r=t.statSync(n);if(!jo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ia&&!gr(this,r,aa))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),ai(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}function oN(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Lo.credentials;t=typeof t=="object"?t:{mode:t};const s=id(t==null?void 0:t.mode,511);e=sd.call(this,e);const{fs:o,path:l,root:u}=qn(e,this),d={[l]:e},h=(m,g)=>{if(!gr(this,g,aa))throw Ue.With("EACCES",lr(m),"mkdir");const v=o.mkdirSync(m,{mode:s,uid:g.mode&ky?g.uid:a,gid:g.mode&Ay?g.gid:i});return ai(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){h(l,o.statSync(lr(l)));return}const m=[];for(let v=l,b=e;!o.existsSync(v);v=lr(v),b=lr(b))m.unshift(v),d[v]=b;if(!m.length)return;const g=[o.statSync(lr(m[0]))];for(const[v,b]of m.entries())g.push(h(b,g[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw yr(m,d)}}function Xp(e,t){t=typeof t=="object"?t:{encoding:t},e=pn(e);const{fs:n,path:r}=qn(sd.call(this,e),this);let a;try{const s=n.statSync(r);if(Ia&&!gr(this,s,Ra))throw Ue.With("EACCES",r,"readdir");if(!jo(s))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(s){throw yr(s,{[r]:e})}const i=[];for(const s of a){let o;try{o=n.statSync(hr(r,s))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new M0(s,o)):(t==null?void 0:t.encoding)=="buffer"?i.push(Lr.from(s)):i.push(s),!(!jo(o)||!(t!=null&&t.recursive)))for(const l of Xp.call(this,hr(e,s),t))l instanceof M0?(l.path=hr(s,l.path),i.push(l)):Lr.isBuffer(l)?i.push(Lr.from(hr(s,zA(l)))):i.push(hr(s,l))}return i}function Vie(e,t){if(e=pn(e),!Wu(lr(e)).hasAccess(Ra,this))throw Ue.With("EACCES",lr(e),"link");if(t=pn(t),!Wu(lr(t)).hasAccess(aa,this))throw Ue.With("EACCES",lr(t),"link");const{fs:n,path:r}=qn(e,this),a=qn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ia&&!gr(this,n.statSync(r),Ra))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw yr(i,{[r]:e,[a.path]:t})}}function Hie(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid type: "+n);t=pn(t);const a=Ny(r,Ff.call(this,t,{flag:"wx",mode:420}),!1);a.write(Xd(pn(e,!0))),a.chmod(Fc)}catch(a){r.error=a,r.hasError=!0}finally{Ry(r)}}function rk(e,t){const n=Lr.from(QL.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function qie(e,t,n){const r=Z1.call(this,e,"r+");aN.call(this,r,t,n),Lf.call(this,r)}function Gie(e,t,n){const r=Y1.call(this,e,"r+");aN.call(this,r,t,n),Lf.call(this,r)}function Wie(e,t){const n=Z1.call(this,e,"r+");iN.call(this,n,t),Lf.call(this,n)}function Kie(e,t){const n=Y1.call(this,e,"r+");iN.call(this,n,t),Lf.call(this,n)}function t9(e,t,n){const r=Z1.call(this,e,"r+");sN.call(this,r,t,n),Lf.call(this,r)}function Zie(e,t,n){const r=Y1.call(this,e,"r+");sN.call(this,r,t,n),Lf.call(this,r)}function ak(e,t,n){try{const l=qn(t,e),u=l.fs.statSync(l.path);if(!_p(u))return{...l,fullPath:t,stats:u};const d=Nc.call(e,lr(t),rk.call(e,t).toString());return ak(e,d)}catch{}const{base:r,dir:a}=ll(t),i=a=="/"?"/":sd.call(e,a),s=hr(i,r),o=qn(s,e);try{const l=o.fs.statSync(o.path);if(!_p(l))return{...o,fullPath:s,stats:l};const u=Nc.call(e,i,rk.call(e,s).toString());return ak(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw yr(l,{[o.path]:s})}}function sd(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=pn(e);const{fullPath:a}=ak(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function Yie(e,t=384){if(!gr(this,Wu.call(this,e),t))throw new Ue(lt.EACCES)}function n9(e,t){e=pn(e);let n;try{n=eN.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&Nr){case _a:if(t!=null&&t.recursive)for(const r of Xp.call(this,e))n9.call(this,hr(e,r),t);e9.call(this,e);break;case Eo:case Fc:case Df:case Mf:tN.call(this,e);break;case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}function Xie(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return oN.call(this,a),n=="buffer"?Lr.from(a):a}function r9(e,t,n){if(e=pn(e),t=pn(t),n&&n&ZA&&QA(t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");rN.call(this,t,nN(e)),ai(this,"rename",t.toString())}function Jie(e,t,n){const r=Si(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function Qie(e,t,n){const r=Si(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function ese(e,t){return e=pn(e),new lN(e,this)}function a9(e,t,n){e=pn(e),t=pn(t);const r=eN.call(this,e);if(n!=null&&n.errorOnExist&&QA.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Nr){case _a:if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");oN.call(this,t,{recursive:!0});for(const a of Xp.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(hr(e,a.name),hr(t,a.name))||a9.call(this,hr(e,a.name),hr(t,a.name),n);break;case Eo:case Fc:r9.call(this,e,t);break;case Df:case Mf:case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&t9.call(this,t,r.atime,r.mtime)}function tse(e,t){e=pn(e);const{fs:n}=qn(e,this);return YL(n,t==null?void 0:t.bigint)}function nse(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),s=[];function o(l){const u=Xp(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(Wu(h).isDirectory()&&i.some(m=>m.source.includes(".*"))&&o(h),i.some(m=>m.test(h.replace(/^\/+/g,"")))&&s.push(r?d.path:h.replace(/^\/+/g,"")))}}return o(n),s}class M0{get name(){return xp(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return gie(this.stats)}isDirectory(){return jo(this.stats)}isBlockDevice(){return I0(this.stats)}isCharacterDevice(){return j0(this.stats)}isSymbolicLink(){return _p(this.stats)}isFIFO(){return bie(this.stats)}isSocket(){return yie(this.stats)}}class lN{checkClosed(){if(this.closed)throw new Ue(lt.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await $f.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Xp.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var vE={exports:{}},wE={exports:{}},xE={},B6;function od(){return B6||(B6=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=m,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=s.length;o<l;++o)r[o]=s[o],a[s.charCodeAt(o)]=o;a[45]=62,a[95]=63;function u(_){var E=_.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var T=_.indexOf("=");T===-1&&(T=E);var k=T===E?0:4-T%4;return[T,k]}function d(_){var E=u(_),T=E[0],k=E[1];return(T+k)*3/4-k}function h(_,E,T){return(E+T)*3/4-T}function m(_){var E,T=u(_),k=T[0],R=T[1],j=new i(h(_,k,R)),I=0,P=R>0?k-4:k,O;for(O=0;O<P;O+=4)E=a[_.charCodeAt(O)]<<18|a[_.charCodeAt(O+1)]<<12|a[_.charCodeAt(O+2)]<<6|a[_.charCodeAt(O+3)],j[I++]=E>>16&255,j[I++]=E>>8&255,j[I++]=E&255;return R===2&&(E=a[_.charCodeAt(O)]<<2|a[_.charCodeAt(O+1)]>>4,j[I++]=E&255),R===1&&(E=a[_.charCodeAt(O)]<<10|a[_.charCodeAt(O+1)]<<4|a[_.charCodeAt(O+2)]>>2,j[I++]=E>>8&255,j[I++]=E&255),j}function g(_){return r[_>>18&63]+r[_>>12&63]+r[_>>6&63]+r[_&63]}function v(_,E,T){for(var k,R=[],j=E;j<T;j+=3)k=(_[j]<<16&16711680)+(_[j+1]<<8&65280)+(_[j+2]&255),R.push(g(k));return R.join("")}function b(_){for(var E,T=_.length,k=T%3,R=[],j=16383,I=0,P=T-k;I<P;I+=j)R.push(v(_,I,I+j>P?P:I+j));return k===1?(E=_[T-1],R.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(_[T-2]<<8)+_[T-1],R.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),R.join("")}var w={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */w.read=function(_,E,T,k,R){var j,I,P=R*8-k-1,O=(1<<P)-1,U=O>>1,M=-7,W=T?R-1:0,V=T?-1:1,ie=_[E+W];for(W+=V,j=ie&(1<<-M)-1,ie>>=-M,M+=P;M>0;j=j*256+_[E+W],W+=V,M-=8);for(I=j&(1<<-M)-1,j>>=-M,M+=k;M>0;I=I*256+_[E+W],W+=V,M-=8);if(j===0)j=1-U;else{if(j===O)return I?NaN:(ie?-1:1)*(1/0);I=I+Math.pow(2,k),j=j-U}return(ie?-1:1)*I*Math.pow(2,j-k)},w.write=function(_,E,T,k,R,j){var I,P,O,U=j*8-R-1,M=(1<<U)-1,W=M>>1,V=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,ie=k?0:j-1,ae=k?1:-1,ne=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(P=isNaN(E)?1:0,I=M):(I=Math.floor(Math.log(E)/Math.LN2),E*(O=Math.pow(2,-I))<1&&(I--,O*=2),I+W>=1?E+=V/O:E+=V*Math.pow(2,1-W),E*O>=2&&(I++,O/=2),I+W>=M?(P=0,I=M):I+W>=1?(P=(E*O-1)*Math.pow(2,R),I=I+W):(P=E*Math.pow(2,W-1)*Math.pow(2,R),I=0));R>=8;_[T+ie]=P&255,ie+=ae,P/=256,R-=8);for(I=I<<R|P,U+=R;U>0;_[T+ie]=I&255,ie+=ae,I/=256,U-=8);_[T+ie-ae]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(_){const E=n,T=w,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;_.Buffer=M,_.SlowBuffer=se,_.INSPECT_MAX_BYTES=50;const R=2147483647;_.kMaxLength=R;const{Uint8Array:j,ArrayBuffer:I,SharedArrayBuffer:P}=globalThis;M.TYPED_ARRAY_SUPPORT=O(),!M.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function O(){try{const K=new j(1),H={foo:function(){return 42}};return Object.setPrototypeOf(H,j.prototype),Object.setPrototypeOf(K,H),K.foo()===42}catch{return!1}}Object.defineProperty(M.prototype,"parent",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.buffer}}),Object.defineProperty(M.prototype,"offset",{enumerable:!0,get:function(){if(M.isBuffer(this))return this.byteOffset}});function U(K){if(K>R)throw new RangeError('The value "'+K+'" is invalid for option "size"');const H=new j(K);return Object.setPrototypeOf(H,M.prototype),H}function M(K,H,Y){if(typeof K=="number"){if(typeof H=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(K)}return W(K,H,Y)}M.poolSize=8192;function W(K,H,Y){if(typeof K=="string")return ne(K,H);if(I.isView(K))return te(K);if(K==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K);if(ge(K,I)||K&&ge(K.buffer,I)||typeof P<"u"&&(ge(K,P)||K&&ge(K.buffer,P)))return G(K,H,Y);if(typeof K=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pe=K.valueOf&&K.valueOf();if(pe!=null&&pe!==K)return M.from(pe,H,Y);const Re=J(K);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof K[Symbol.toPrimitive]=="function")return M.from(K[Symbol.toPrimitive]("string"),H,Y);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof K)}M.from=function(K,H,Y){return W(K,H,Y)},Object.setPrototypeOf(M.prototype,j.prototype),Object.setPrototypeOf(M,j);function V(K){if(typeof K!="number")throw new TypeError('"size" argument must be of type number');if(K<0)throw new RangeError('The value "'+K+'" is invalid for option "size"')}function ie(K,H,Y){return V(K),K<=0?U(K):H!==void 0?typeof Y=="string"?U(K).fill(H,Y):U(K).fill(H):U(K)}M.alloc=function(K,H,Y){return ie(K,H,Y)};function ae(K){return V(K),U(K<0?0:Q(K)|0)}M.allocUnsafe=function(K){return ae(K)},M.allocUnsafeSlow=function(K){return ae(K)};function ne(K,H){if((typeof H!="string"||H==="")&&(H="utf8"),!M.isEncoding(H))throw new TypeError("Unknown encoding: "+H);const Y=fe(K,H)|0;let pe=U(Y);const Re=pe.write(K,H);return Re!==Y&&(pe=pe.slice(0,Re)),pe}function q(K){const H=K.length<0?0:Q(K.length)|0,Y=U(H);for(let pe=0;pe<H;pe+=1)Y[pe]=K[pe]&255;return Y}function te(K){if(ge(K,j)){const H=new j(K);return G(H.buffer,H.byteOffset,H.byteLength)}return q(K)}function G(K,H,Y){if(H<0||K.byteLength<H)throw new RangeError('"offset" is outside of buffer bounds');if(K.byteLength<H+(Y||0))throw new RangeError('"length" is outside of buffer bounds');let pe;return H===void 0&&Y===void 0?pe=new j(K):Y===void 0?pe=new j(K,H):pe=new j(K,H,Y),Object.setPrototypeOf(pe,M.prototype),pe}function J(K){if(M.isBuffer(K)){const H=Q(K.length)|0,Y=U(H);return Y.length===0||K.copy(Y,0,0,H),Y}if(K.length!==void 0)return typeof K.length!="number"||Me(K.length)?U(0):q(K);if(K.type==="Buffer"&&Array.isArray(K.data))return q(K.data)}function Q(K){if(K>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return K|0}function se(K){return+K!=K&&(K=0),M.alloc(+K)}M.isBuffer=function(H){return H!=null&&H._isBuffer===!0&&H!==M.prototype},M.compare=function(H,Y){if(ge(H,j)&&(H=M.from(H,H.offset,H.byteLength)),ge(Y,j)&&(Y=M.from(Y,Y.offset,Y.byteLength)),!M.isBuffer(H)||!M.isBuffer(Y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(H===Y)return 0;let pe=H.length,Re=Y.length;for(let Ve=0,pt=Math.min(pe,Re);Ve<pt;++Ve)if(H[Ve]!==Y[Ve]){pe=H[Ve],Re=Y[Ve];break}return pe<Re?-1:Re<pe?1:0},M.isEncoding=function(H){switch(String(H).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},M.concat=function(H,Y){if(!Array.isArray(H))throw new TypeError('"list" argument must be an Array of Buffers');if(H.length===0)return M.alloc(0);let pe;if(Y===void 0)for(Y=0,pe=0;pe<H.length;++pe)Y+=H[pe].length;const Re=M.allocUnsafe(Y);let Ve=0;for(pe=0;pe<H.length;++pe){let pt=H[pe];if(ge(pt,j))Ve+pt.length>Re.length?(M.isBuffer(pt)||(pt=M.from(pt)),pt.copy(Re,Ve)):j.prototype.set.call(Re,pt,Ve);else if(M.isBuffer(pt))pt.copy(Re,Ve);else throw new TypeError('"list" argument must be an Array of Buffers');Ve+=pt.length}return Re};function fe(K,H){if(M.isBuffer(K))return K.length;if(I.isView(K)||ge(K,I))return K.byteLength;if(typeof K!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof K);const Y=K.length,pe=arguments.length>2&&arguments[2]===!0;if(!pe&&Y===0)return 0;let Re=!1;for(;;)switch(H){case"ascii":case"latin1":case"binary":return Y;case"utf8":case"utf-8":return ft(K).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y*2;case"hex":return Y>>>1;case"base64":return $e(K).length;default:if(Re)return pe?-1:ft(K).length;H=(""+H).toLowerCase(),Re=!0}}M.byteLength=fe;function ve(K,H,Y){let pe=!1;if((H===void 0||H<0)&&(H=0),H>this.length||((Y===void 0||Y>this.length)&&(Y=this.length),Y<=0)||(Y>>>=0,H>>>=0,Y<=H))return"";for(K||(K="utf8");;)switch(K){case"hex":return _e(this,H,Y);case"utf8":case"utf-8":return Ce(this,H,Y);case"ascii":return oe(this,H,Y);case"latin1":case"binary":return ee(this,H,Y);case"base64":return B(this,H,Y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pe(this,H,Y);default:if(pe)throw new TypeError("Unknown encoding: "+K);K=(K+"").toLowerCase(),pe=!0}}M.prototype._isBuffer=!0;function je(K,H,Y){const pe=K[H];K[H]=K[Y],K[Y]=pe}M.prototype.swap16=function(){const H=this.length;if(H%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Y=0;Y<H;Y+=2)je(this,Y,Y+1);return this},M.prototype.swap32=function(){const H=this.length;if(H%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Y=0;Y<H;Y+=4)je(this,Y,Y+3),je(this,Y+1,Y+2);return this},M.prototype.swap64=function(){const H=this.length;if(H%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Y=0;Y<H;Y+=8)je(this,Y,Y+7),je(this,Y+1,Y+6),je(this,Y+2,Y+5),je(this,Y+3,Y+4);return this},M.prototype.toString=function(){const H=this.length;return H===0?"":arguments.length===0?Ce(this,0,H):ve.apply(this,arguments)},M.prototype.toLocaleString=M.prototype.toString,M.prototype.equals=function(H){if(!M.isBuffer(H))throw new TypeError("Argument must be a Buffer");return this===H?!0:M.compare(this,H)===0},M.prototype.inspect=function(){let H="";const Y=_.INSPECT_MAX_BYTES;return H=this.toString("hex",0,Y).replace(/(.{2})/g,"$1 ").trim(),this.length>Y&&(H+=" ... "),"<Buffer "+H+">"},k&&(M.prototype[k]=M.prototype.inspect),M.prototype.compare=function(H,Y,pe,Re,Ve){if(ge(H,j)&&(H=M.from(H,H.offset,H.byteLength)),!M.isBuffer(H))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof H);if(Y===void 0&&(Y=0),pe===void 0&&(pe=H?H.length:0),Re===void 0&&(Re=0),Ve===void 0&&(Ve=this.length),Y<0||pe>H.length||Re<0||Ve>this.length)throw new RangeError("out of range index");if(Re>=Ve&&Y>=pe)return 0;if(Re>=Ve)return-1;if(Y>=pe)return 1;if(Y>>>=0,pe>>>=0,Re>>>=0,Ve>>>=0,this===H)return 0;let pt=Ve-Re,Kt=pe-Y;const ut=Math.min(pt,Kt),It=this.slice(Re,Ve),Lt=H.slice(Y,pe);for(let en=0;en<ut;++en)if(It[en]!==Lt[en]){pt=It[en],Kt=Lt[en];break}return pt<Kt?-1:Kt<pt?1:0};function Ne(K,H,Y,pe,Re){if(K.length===0)return-1;if(typeof Y=="string"?(pe=Y,Y=0):Y>2147483647?Y=2147483647:Y<-2147483648&&(Y=-2147483648),Y=+Y,Me(Y)&&(Y=Re?0:K.length-1),Y<0&&(Y=K.length+Y),Y>=K.length){if(Re)return-1;Y=K.length-1}else if(Y<0)if(Re)Y=0;else return-1;if(typeof H=="string"&&(H=M.from(H,pe)),M.isBuffer(H))return H.length===0?-1:Se(K,H,Y,pe,Re);if(typeof H=="number")return H=H&255,typeof j.prototype.indexOf=="function"?Re?j.prototype.indexOf.call(K,H,Y):j.prototype.lastIndexOf.call(K,H,Y):Se(K,[H],Y,pe,Re);throw new TypeError("val must be string, number or Buffer")}function Se(K,H,Y,pe,Re){let Ve=1,pt=K.length,Kt=H.length;if(pe!==void 0&&(pe=String(pe).toLowerCase(),pe==="ucs2"||pe==="ucs-2"||pe==="utf16le"||pe==="utf-16le")){if(K.length<2||H.length<2)return-1;Ve=2,pt/=2,Kt/=2,Y/=2}function ut(Lt,en){return Ve===1?Lt[en]:Lt.readUInt16BE(en*Ve)}let It;if(Re){let Lt=-1;for(It=Y;It<pt;It++)if(ut(K,It)===ut(H,Lt===-1?0:It-Lt)){if(Lt===-1&&(Lt=It),It-Lt+1===Kt)return Lt*Ve}else Lt!==-1&&(It-=It-Lt),Lt=-1}else for(Y+Kt>pt&&(Y=pt-Kt),It=Y;It>=0;It--){let Lt=!0;for(let en=0;en<Kt;en++)if(ut(K,It+en)!==ut(H,en)){Lt=!1;break}if(Lt)return It}return-1}M.prototype.includes=function(H,Y,pe){return this.indexOf(H,Y,pe)!==-1},M.prototype.indexOf=function(H,Y,pe){return Ne(this,H,Y,pe,!0)},M.prototype.lastIndexOf=function(H,Y,pe){return Ne(this,H,Y,pe,!1)};function ye(K,H,Y,pe){Y=Number(Y)||0;const Re=K.length-Y;pe?(pe=Number(pe),pe>Re&&(pe=Re)):pe=Re;const Ve=H.length;pe>Ve/2&&(pe=Ve/2);let pt;for(pt=0;pt<pe;++pt){const Kt=parseInt(H.substr(pt*2,2),16);if(Me(Kt))return pt;K[Y+pt]=Kt}return pt}function Fe(K,H,Y,pe){return nt(ft(H,K.length-Y),K,Y,pe)}function Xe(K,H,Y,pe){return nt(wt(H),K,Y,pe)}function Le(K,H,Y,pe){return nt($e(H),K,Y,pe)}function Ie(K,H,Y,pe){return nt(L(H,K.length-Y),K,Y,pe)}M.prototype.write=function(H,Y,pe,Re){if(Y===void 0)Re="utf8",pe=this.length,Y=0;else if(pe===void 0&&typeof Y=="string")Re=Y,pe=this.length,Y=0;else if(isFinite(Y))Y=Y>>>0,isFinite(pe)?(pe=pe>>>0,Re===void 0&&(Re="utf8")):(Re=pe,pe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ve=this.length-Y;if((pe===void 0||pe>Ve)&&(pe=Ve),H.length>0&&(pe<0||Y<0)||Y>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let pt=!1;for(;;)switch(Re){case"hex":return ye(this,H,Y,pe);case"utf8":case"utf-8":return Fe(this,H,Y,pe);case"ascii":case"latin1":case"binary":return Xe(this,H,Y,pe);case"base64":return Le(this,H,Y,pe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,H,Y,pe);default:if(pt)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),pt=!0}},M.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(K,H,Y){return H===0&&Y===K.length?E.fromByteArray(K):E.fromByteArray(K.slice(H,Y))}function Ce(K,H,Y){Y=Math.min(K.length,Y);const pe=[];let Re=H;for(;Re<Y;){const Ve=K[Re];let pt=null,Kt=Ve>239?4:Ve>223?3:Ve>191?2:1;if(Re+Kt<=Y){let ut,It,Lt,en;switch(Kt){case 1:Ve<128&&(pt=Ve);break;case 2:ut=K[Re+1],(ut&192)===128&&(en=(Ve&31)<<6|ut&63,en>127&&(pt=en));break;case 3:ut=K[Re+1],It=K[Re+2],(ut&192)===128&&(It&192)===128&&(en=(Ve&15)<<12|(ut&63)<<6|It&63,en>2047&&(en<55296||en>57343)&&(pt=en));break;case 4:ut=K[Re+1],It=K[Re+2],Lt=K[Re+3],(ut&192)===128&&(It&192)===128&&(Lt&192)===128&&(en=(Ve&15)<<18|(ut&63)<<12|(It&63)<<6|Lt&63,en>65535&&en<1114112&&(pt=en))}}pt===null?(pt=65533,Kt=1):pt>65535&&(pt-=65536,pe.push(pt>>>10&1023|55296),pt=56320|pt&1023),pe.push(pt),Re+=Kt}return ce(pe)}const Ee=4096;function ce(K){const H=K.length;if(H<=Ee)return String.fromCharCode.apply(String,K);let Y="",pe=0;for(;pe<H;)Y+=String.fromCharCode.apply(String,K.slice(pe,pe+=Ee));return Y}function oe(K,H,Y){let pe="";Y=Math.min(K.length,Y);for(let Re=H;Re<Y;++Re)pe+=String.fromCharCode(K[Re]&127);return pe}function ee(K,H,Y){let pe="";Y=Math.min(K.length,Y);for(let Re=H;Re<Y;++Re)pe+=String.fromCharCode(K[Re]);return pe}function _e(K,H,Y){const pe=K.length;(!H||H<0)&&(H=0),(!Y||Y<0||Y>pe)&&(Y=pe);let Re="";for(let Ve=H;Ve<Y;++Ve)Re+=Ke[K[Ve]];return Re}function Pe(K,H,Y){const pe=K.slice(H,Y);let Re="";for(let Ve=0;Ve<pe.length-1;Ve+=2)Re+=String.fromCharCode(pe[Ve]+pe[Ve+1]*256);return Re}M.prototype.slice=function(H,Y){const pe=this.length;H=~~H,Y=Y===void 0?pe:~~Y,H<0?(H+=pe,H<0&&(H=0)):H>pe&&(H=pe),Y<0?(Y+=pe,Y<0&&(Y=0)):Y>pe&&(Y=pe),Y<H&&(Y=H);const Re=this.subarray(H,Y);return Object.setPrototypeOf(Re,M.prototype),Re};function ke(K,H,Y){if(K%1!==0||K<0)throw new RangeError("offset is not uint");if(K+H>Y)throw new RangeError("Trying to access beyond buffer length")}M.prototype.readUintLE=M.prototype.readUIntLE=function(H,Y,pe){H=H>>>0,Y=Y>>>0,pe||ke(H,Y,this.length);let Re=this[H],Ve=1,pt=0;for(;++pt<Y&&(Ve*=256);)Re+=this[H+pt]*Ve;return Re},M.prototype.readUintBE=M.prototype.readUIntBE=function(H,Y,pe){H=H>>>0,Y=Y>>>0,pe||ke(H,Y,this.length);let Re=this[H+--Y],Ve=1;for(;Y>0&&(Ve*=256);)Re+=this[H+--Y]*Ve;return Re},M.prototype.readUint8=M.prototype.readUInt8=function(H,Y){return H=H>>>0,Y||ke(H,1,this.length),this[H]},M.prototype.readUint16LE=M.prototype.readUInt16LE=function(H,Y){return H=H>>>0,Y||ke(H,2,this.length),this[H]|this[H+1]<<8},M.prototype.readUint16BE=M.prototype.readUInt16BE=function(H,Y){return H=H>>>0,Y||ke(H,2,this.length),this[H]<<8|this[H+1]},M.prototype.readUint32LE=M.prototype.readUInt32LE=function(H,Y){return H=H>>>0,Y||ke(H,4,this.length),(this[H]|this[H+1]<<8|this[H+2]<<16)+this[H+3]*16777216},M.prototype.readUint32BE=M.prototype.readUInt32BE=function(H,Y){return H=H>>>0,Y||ke(H,4,this.length),this[H]*16777216+(this[H+1]<<16|this[H+2]<<8|this[H+3])},M.prototype.readBigUInt64LE=Dt(function(H){H=H>>>0,De(H,"offset");const Y=this[H],pe=this[H+7];(Y===void 0||pe===void 0)&&we(H,this.length-8);const Re=Y+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24,Ve=this[++H]+this[++H]*2**8+this[++H]*2**16+pe*2**24;return BigInt(Re)+(BigInt(Ve)<<BigInt(32))}),M.prototype.readBigUInt64BE=Dt(function(H){H=H>>>0,De(H,"offset");const Y=this[H],pe=this[H+7];(Y===void 0||pe===void 0)&&we(H,this.length-8);const Re=Y*2**24+this[++H]*2**16+this[++H]*2**8+this[++H],Ve=this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+pe;return(BigInt(Re)<<BigInt(32))+BigInt(Ve)}),M.prototype.readIntLE=function(H,Y,pe){H=H>>>0,Y=Y>>>0,pe||ke(H,Y,this.length);let Re=this[H],Ve=1,pt=0;for(;++pt<Y&&(Ve*=256);)Re+=this[H+pt]*Ve;return Ve*=128,Re>=Ve&&(Re-=Math.pow(2,8*Y)),Re},M.prototype.readIntBE=function(H,Y,pe){H=H>>>0,Y=Y>>>0,pe||ke(H,Y,this.length);let Re=Y,Ve=1,pt=this[H+--Re];for(;Re>0&&(Ve*=256);)pt+=this[H+--Re]*Ve;return Ve*=128,pt>=Ve&&(pt-=Math.pow(2,8*Y)),pt},M.prototype.readInt8=function(H,Y){return H=H>>>0,Y||ke(H,1,this.length),this[H]&128?(255-this[H]+1)*-1:this[H]},M.prototype.readInt16LE=function(H,Y){H=H>>>0,Y||ke(H,2,this.length);const pe=this[H]|this[H+1]<<8;return pe&32768?pe|4294901760:pe},M.prototype.readInt16BE=function(H,Y){H=H>>>0,Y||ke(H,2,this.length);const pe=this[H+1]|this[H]<<8;return pe&32768?pe|4294901760:pe},M.prototype.readInt32LE=function(H,Y){return H=H>>>0,Y||ke(H,4,this.length),this[H]|this[H+1]<<8|this[H+2]<<16|this[H+3]<<24},M.prototype.readInt32BE=function(H,Y){return H=H>>>0,Y||ke(H,4,this.length),this[H]<<24|this[H+1]<<16|this[H+2]<<8|this[H+3]},M.prototype.readBigInt64LE=Dt(function(H){H=H>>>0,De(H,"offset");const Y=this[H],pe=this[H+7];(Y===void 0||pe===void 0)&&we(H,this.length-8);const Re=this[H+4]+this[H+5]*2**8+this[H+6]*2**16+(pe<<24);return(BigInt(Re)<<BigInt(32))+BigInt(Y+this[++H]*2**8+this[++H]*2**16+this[++H]*2**24)}),M.prototype.readBigInt64BE=Dt(function(H){H=H>>>0,De(H,"offset");const Y=this[H],pe=this[H+7];(Y===void 0||pe===void 0)&&we(H,this.length-8);const Re=(Y<<24)+this[++H]*2**16+this[++H]*2**8+this[++H];return(BigInt(Re)<<BigInt(32))+BigInt(this[++H]*2**24+this[++H]*2**16+this[++H]*2**8+pe)}),M.prototype.readFloatLE=function(H,Y){return H=H>>>0,Y||ke(H,4,this.length),T.read(this,H,!0,23,4)},M.prototype.readFloatBE=function(H,Y){return H=H>>>0,Y||ke(H,4,this.length),T.read(this,H,!1,23,4)},M.prototype.readDoubleLE=function(H,Y){return H=H>>>0,Y||ke(H,8,this.length),T.read(this,H,!0,52,8)},M.prototype.readDoubleBE=function(H,Y){return H=H>>>0,Y||ke(H,8,this.length),T.read(this,H,!1,52,8)};function We(K,H,Y,pe,Re,Ve){if(!M.isBuffer(K))throw new TypeError('"buffer" argument must be a Buffer instance');if(H>Re||H<Ve)throw new RangeError('"value" argument is out of bounds');if(Y+pe>K.length)throw new RangeError("Index out of range")}M.prototype.writeUintLE=M.prototype.writeUIntLE=function(H,Y,pe,Re){if(H=+H,Y=Y>>>0,pe=pe>>>0,!Re){const Kt=Math.pow(2,8*pe)-1;We(this,H,Y,pe,Kt,0)}let Ve=1,pt=0;for(this[Y]=H&255;++pt<pe&&(Ve*=256);)this[Y+pt]=H/Ve&255;return Y+pe},M.prototype.writeUintBE=M.prototype.writeUIntBE=function(H,Y,pe,Re){if(H=+H,Y=Y>>>0,pe=pe>>>0,!Re){const Kt=Math.pow(2,8*pe)-1;We(this,H,Y,pe,Kt,0)}let Ve=pe-1,pt=1;for(this[Y+Ve]=H&255;--Ve>=0&&(pt*=256);)this[Y+Ve]=H/pt&255;return Y+pe},M.prototype.writeUint8=M.prototype.writeUInt8=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,1,255,0),this[Y]=H&255,Y+1},M.prototype.writeUint16LE=M.prototype.writeUInt16LE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,2,65535,0),this[Y]=H&255,this[Y+1]=H>>>8,Y+2},M.prototype.writeUint16BE=M.prototype.writeUInt16BE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,2,65535,0),this[Y]=H>>>8,this[Y+1]=H&255,Y+2},M.prototype.writeUint32LE=M.prototype.writeUInt32LE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,4,4294967295,0),this[Y+3]=H>>>24,this[Y+2]=H>>>16,this[Y+1]=H>>>8,this[Y]=H&255,Y+4},M.prototype.writeUint32BE=M.prototype.writeUInt32BE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,4,4294967295,0),this[Y]=H>>>24,this[Y+1]=H>>>16,this[Y+2]=H>>>8,this[Y+3]=H&255,Y+4};function Nt(K,H,Y,pe,Re){he(H,pe,Re,K,Y,7);let Ve=Number(H&BigInt(4294967295));K[Y++]=Ve,Ve=Ve>>8,K[Y++]=Ve,Ve=Ve>>8,K[Y++]=Ve,Ve=Ve>>8,K[Y++]=Ve;let pt=Number(H>>BigInt(32)&BigInt(4294967295));return K[Y++]=pt,pt=pt>>8,K[Y++]=pt,pt=pt>>8,K[Y++]=pt,pt=pt>>8,K[Y++]=pt,Y}function it(K,H,Y,pe,Re){he(H,pe,Re,K,Y,7);let Ve=Number(H&BigInt(4294967295));K[Y+7]=Ve,Ve=Ve>>8,K[Y+6]=Ve,Ve=Ve>>8,K[Y+5]=Ve,Ve=Ve>>8,K[Y+4]=Ve;let pt=Number(H>>BigInt(32)&BigInt(4294967295));return K[Y+3]=pt,pt=pt>>8,K[Y+2]=pt,pt=pt>>8,K[Y+1]=pt,pt=pt>>8,K[Y]=pt,Y+8}M.prototype.writeBigUInt64LE=Dt(function(H,Y=0){return Nt(this,H,Y,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeBigUInt64BE=Dt(function(H,Y=0){return it(this,H,Y,BigInt(0),BigInt("0xffffffffffffffff"))}),M.prototype.writeIntLE=function(H,Y,pe,Re){if(H=+H,Y=Y>>>0,!Re){const ut=Math.pow(2,8*pe-1);We(this,H,Y,pe,ut-1,-ut)}let Ve=0,pt=1,Kt=0;for(this[Y]=H&255;++Ve<pe&&(pt*=256);)H<0&&Kt===0&&this[Y+Ve-1]!==0&&(Kt=1),this[Y+Ve]=(H/pt>>0)-Kt&255;return Y+pe},M.prototype.writeIntBE=function(H,Y,pe,Re){if(H=+H,Y=Y>>>0,!Re){const ut=Math.pow(2,8*pe-1);We(this,H,Y,pe,ut-1,-ut)}let Ve=pe-1,pt=1,Kt=0;for(this[Y+Ve]=H&255;--Ve>=0&&(pt*=256);)H<0&&Kt===0&&this[Y+Ve+1]!==0&&(Kt=1),this[Y+Ve]=(H/pt>>0)-Kt&255;return Y+pe},M.prototype.writeInt8=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,1,127,-128),H<0&&(H=255+H+1),this[Y]=H&255,Y+1},M.prototype.writeInt16LE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,2,32767,-32768),this[Y]=H&255,this[Y+1]=H>>>8,Y+2},M.prototype.writeInt16BE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,2,32767,-32768),this[Y]=H>>>8,this[Y+1]=H&255,Y+2},M.prototype.writeInt32LE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,4,2147483647,-2147483648),this[Y]=H&255,this[Y+1]=H>>>8,this[Y+2]=H>>>16,this[Y+3]=H>>>24,Y+4},M.prototype.writeInt32BE=function(H,Y,pe){return H=+H,Y=Y>>>0,pe||We(this,H,Y,4,2147483647,-2147483648),H<0&&(H=4294967295+H+1),this[Y]=H>>>24,this[Y+1]=H>>>16,this[Y+2]=H>>>8,this[Y+3]=H&255,Y+4},M.prototype.writeBigInt64LE=Dt(function(H,Y=0){return Nt(this,H,Y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),M.prototype.writeBigInt64BE=Dt(function(H,Y=0){return it(this,H,Y,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ct(K,H,Y,pe,Re,Ve){if(Y+pe>K.length)throw new RangeError("Index out of range");if(Y<0)throw new RangeError("Index out of range")}function Ft(K,H,Y,pe,Re){return H=+H,Y=Y>>>0,Re||Ct(K,H,Y,4),T.write(K,H,Y,pe,23,4),Y+4}M.prototype.writeFloatLE=function(H,Y,pe){return Ft(this,H,Y,!0,pe)},M.prototype.writeFloatBE=function(H,Y,pe){return Ft(this,H,Y,!1,pe)};function Mt(K,H,Y,pe,Re){return H=+H,Y=Y>>>0,Re||Ct(K,H,Y,8),T.write(K,H,Y,pe,52,8),Y+8}M.prototype.writeDoubleLE=function(H,Y,pe){return Mt(this,H,Y,!0,pe)},M.prototype.writeDoubleBE=function(H,Y,pe){return Mt(this,H,Y,!1,pe)},M.prototype.copy=function(H,Y,pe,Re){if(!M.isBuffer(H))throw new TypeError("argument should be a Buffer");if(pe||(pe=0),!Re&&Re!==0&&(Re=this.length),Y>=H.length&&(Y=H.length),Y||(Y=0),Re>0&&Re<pe&&(Re=pe),Re===pe||H.length===0||this.length===0)return 0;if(Y<0)throw new RangeError("targetStart out of bounds");if(pe<0||pe>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),H.length-Y<Re-pe&&(Re=H.length-Y+pe);const Ve=Re-pe;return this===H&&typeof j.prototype.copyWithin=="function"?this.copyWithin(Y,pe,Re):j.prototype.set.call(H,this.subarray(pe,Re),Y),Ve},M.prototype.fill=function(H,Y,pe,Re){if(typeof H=="string"){if(typeof Y=="string"?(Re=Y,Y=0,pe=this.length):typeof pe=="string"&&(Re=pe,pe=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!M.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(H.length===1){const pt=H.charCodeAt(0);(Re==="utf8"&&pt<128||Re==="latin1")&&(H=pt)}}else typeof H=="number"?H=H&255:typeof H=="boolean"&&(H=Number(H));if(Y<0||this.length<Y||this.length<pe)throw new RangeError("Out of range index");if(pe<=Y)return this;Y=Y>>>0,pe=pe===void 0?this.length:pe>>>0,H||(H=0);let Ve;if(typeof H=="number")for(Ve=Y;Ve<pe;++Ve)this[Ve]=H;else{const pt=M.isBuffer(H)?H:M.from(H,Re),Kt=pt.length;if(Kt===0)throw new TypeError('The value "'+H+'" is invalid for argument "value"');for(Ve=0;Ve<pe-Y;++Ve)this[Ve+Y]=pt[Ve%Kt]}return this};const Zt={};function be(K,H,Y){Zt[K]=class extends Y{constructor(){super(),Object.defineProperty(this,"message",{value:H.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${K}]`,this.stack,delete this.name}get code(){return K}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${K}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(K){return K?`${K} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(K,H){return`The "${K}" argument must be of type number. Received type ${typeof H}`},TypeError),be("ERR_OUT_OF_RANGE",function(K,H,Y){let pe=`The value of "${K}" is out of range.`,Re=Y;return Number.isInteger(Y)&&Math.abs(Y)>2**32?Re=D(String(Y)):typeof Y=="bigint"&&(Re=String(Y),(Y>BigInt(2)**BigInt(32)||Y<-(BigInt(2)**BigInt(32)))&&(Re=D(Re)),Re+="n"),pe+=` It must be ${H}. Received ${Re}`,pe},RangeError);function D(K){let H="",Y=K.length;const pe=K[0]==="-"?1:0;for(;Y>=pe+4;Y-=3)H=`_${K.slice(Y-3,Y)}${H}`;return`${K.slice(0,Y)}${H}`}function Z(K,H,Y){De(H,"offset"),(K[H]===void 0||K[H+Y]===void 0)&&we(H,K.length-(Y+1))}function he(K,H,Y,pe,Re,Ve){if(K>Y||K<H){const pt=typeof H=="bigint"?"n":"";let Kt;throw H===0||H===BigInt(0)?Kt=`>= 0${pt} and < 2${pt} ** ${(Ve+1)*8}${pt}`:Kt=`>= -(2${pt} ** ${(Ve+1)*8-1}${pt}) and < 2 ** ${(Ve+1)*8-1}${pt}`,new Zt.ERR_OUT_OF_RANGE("value",Kt,K)}Z(pe,Re,Ve)}function De(K,H){if(typeof K!="number")throw new Zt.ERR_INVALID_ARG_TYPE(H,"number",K)}function we(K,H,Y){throw Math.floor(K)!==K?(De(K,Y),new Zt.ERR_OUT_OF_RANGE("offset","an integer",K)):H<0?new Zt.ERR_BUFFER_OUT_OF_BOUNDS:new Zt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${H}`,K)}const Ae=/[^+/0-9A-Za-z-_]/g;function ue(K){if(K=K.split("=")[0],K=K.trim().replace(Ae,""),K.length<2)return"";for(;K.length%4!==0;)K=K+"=";return K}function ft(K,H){H=H||1/0;let Y;const pe=K.length;let Re=null;const Ve=[];for(let pt=0;pt<pe;++pt){if(Y=K.charCodeAt(pt),Y>55295&&Y<57344){if(!Re){if(Y>56319){(H-=3)>-1&&Ve.push(239,191,189);continue}else if(pt+1===pe){(H-=3)>-1&&Ve.push(239,191,189);continue}Re=Y;continue}if(Y<56320){(H-=3)>-1&&Ve.push(239,191,189),Re=Y;continue}Y=(Re-55296<<10|Y-56320)+65536}else Re&&(H-=3)>-1&&Ve.push(239,191,189);if(Re=null,Y<128){if((H-=1)<0)break;Ve.push(Y)}else if(Y<2048){if((H-=2)<0)break;Ve.push(Y>>6|192,Y&63|128)}else if(Y<65536){if((H-=3)<0)break;Ve.push(Y>>12|224,Y>>6&63|128,Y&63|128)}else if(Y<1114112){if((H-=4)<0)break;Ve.push(Y>>18|240,Y>>12&63|128,Y>>6&63|128,Y&63|128)}else throw new Error("Invalid code point")}return Ve}function wt(K){const H=[];for(let Y=0;Y<K.length;++Y)H.push(K.charCodeAt(Y)&255);return H}function L(K,H){let Y,pe,Re;const Ve=[];for(let pt=0;pt<K.length&&!((H-=2)<0);++pt)Y=K.charCodeAt(pt),pe=Y>>8,Re=Y%256,Ve.push(Re),Ve.push(pe);return Ve}function $e(K){return E.toByteArray(ue(K))}function nt(K,H,Y,pe){let Re;for(Re=0;Re<pe&&!(Re+Y>=H.length||Re>=K.length);++Re)H[Re+Y]=K[Re];return Re}function ge(K,H){return K instanceof H||K!=null&&K.constructor!=null&&K.constructor.name!=null&&K.constructor.name===H.name}function Me(K){return K!==K}const Ke=function(){const K="0123456789abcdef",H=new Array(256);for(let Y=0;Y<16;++Y){const pe=Y*16;for(let Re=0;Re<16;++Re)H[pe+Re]=K[Y]+K[Re]}return H}();function Dt(K){return typeof BigInt>"u"?me:K}function me(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(xE)),xE}var _E,$6;function Qr(){if($6)return _E;$6=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return _E={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},_E}var SE={exports:{}},EE,z6;function i9(){return z6||(z6=1,EE={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),EE}var CE,U6;function Pi(){if(U6)return CE;U6=1;const{format:e,inspect:t}=i9(),{AggregateError:n}=Qr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],s=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function u(w,x){if(!w)throw new l.ERR_INTERNAL_ASSERTION(x)}function d(w){let x="",_=w.length;const E=w[0]==="-"?1:0;for(;_>=E+4;_-=3)x=`_${w.slice(_-3,_)}${x}`;return`${w.slice(0,_)}${x}`}function h(w,x,_){if(typeof x=="function")return u(x.length<=_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${x.length}).`),x(..._);const E=(x.match(/%[dfijoOs]/g)||[]).length;return u(E===_.length,`Code: ${w}; The provided arguments length (${_.length}) does not match the required ones (${E}).`),_.length===0?x:e(x,..._)}function m(w,x,_){_||(_=Error);class E extends _{constructor(...k){super(h(w,x,k))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:_.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=w,E.prototype[a]=!0,l[w]=E}function g(w){const x=o+w.name;return Object.defineProperty(w,"name",{value:x}),w}function v(w,x){if(w&&x&&w!==x){if(Array.isArray(x.errors))return x.errors.push(w),x;const _=new r([x,w],x.message);return _.code=x.code,_}return w||x}class b extends Error{constructor(x="The operation was aborted",_=void 0){if(_!==void 0&&typeof _!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",_);super(x,_),this.code="ABORT_ERR",this.name="AbortError"}}return m("ERR_ASSERTION","%s",Error),m("ERR_INVALID_ARG_TYPE",(w,x,_)=>{u(typeof w=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";w.endsWith(" argument")?E+=`${w} `:E+=`"${w}" ${w.includes(".")?"property":"argument"} `,E+="must be ";const T=[],k=[],R=[];for(const I of x)u(typeof I=="string","All expected entries have to be of type string"),i.includes(I)?T.push(I.toLowerCase()):s.test(I)?k.push(I):(u(I!=="object",'The value "object" should be written as "Object"'),R.push(I));if(k.length>0){const I=T.indexOf("object");I!==-1&&(T.splice(T,I,1),k.push("Object"))}if(T.length>0){switch(T.length){case 1:E+=`of type ${T[0]}`;break;case 2:E+=`one of type ${T[0]} or ${T[1]}`;break;default:{const I=T.pop();E+=`one of type ${T.join(", ")}, or ${I}`}}(k.length>0||R.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const I=k.pop();E+=`an instance of ${k.join(", ")}, or ${I}`}}R.length>0&&(E+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(E+="an "),E+=`${R[0]}`;break;case 2:E+=`one of ${R[0]} or ${R[1]}`;break;default:{const I=R.pop();E+=`one of ${R.join(", ")}, or ${I}`}}if(_==null)E+=`. Received ${_}`;else if(typeof _=="function"&&_.name)E+=`. Received function ${_.name}`;else if(typeof _=="object"){var j;if((j=_.constructor)!==null&&j!==void 0&&j.name)E+=`. Received an instance of ${_.constructor.name}`;else{const I=t(_,{depth:-1});E+=`. Received ${I}`}}else{let I=t(_,{colors:!1});I.length>25&&(I=`${I.slice(0,25)}...`),E+=`. Received type ${typeof _} (${I})`}return E},TypeError),m("ERR_INVALID_ARG_VALUE",(w,x,_="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${_}. Received ${E}`},TypeError),m("ERR_INVALID_RETURN_VALUE",(w,x,_)=>{var E;const T=_!=null&&(E=_.constructor)!==null&&E!==void 0&&E.name?`instance of ${_.constructor.name}`:`type ${typeof _}`;return`Expected ${w} to be returned from the "${x}" function but got ${T}.`},TypeError),m("ERR_MISSING_ARGS",(...w)=>{u(w.length>0,"At least one arg needs to be specified");let x;const _=w.length;switch(w=(Array.isArray(w)?w:[w]).map(E=>`"${E}"`).join(" or "),_){case 1:x+=`The ${w[0]} argument`;break;case 2:x+=`The ${w[0]} and ${w[1]} arguments`;break;default:{const E=w.pop();x+=`The ${w.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),m("ERR_OUT_OF_RANGE",(w,x,_)=>{u(x,'Missing "range" argument');let E;if(Number.isInteger(_)&&Math.abs(_)>2**32)E=d(String(_));else if(typeof _=="bigint"){E=String(_);const T=BigInt(2)**BigInt(32);(_>T||_<-T)&&(E=d(E)),E+="n"}else E=t(_);return`The value of "${w}" is out of range. It must be ${x}. Received ${E}`},RangeError),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),m("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),m("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),m("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),m("ERR_STREAM_WRITE_AFTER_END","write after end",Error),m("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),CE={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:l},CE}var Rg={exports:{}},V6;function O0(){if(V6)return Rg.exports;V6=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Rg.exports=e,Rg.exports.AbortSignal=t,Rg.exports.default=e,Rg.exports}var lw={exports:{}},H6;function X1(){if(H6)return lw.exports;H6=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,R,j){return Function.prototype.apply.call(k,R,j)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(T){console&&console.warn&&console.warn(T)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}lw.exports=i,lw.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var s=10;function o(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(T){if(typeof T!="number"||T<0||a(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");s=T}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(T){return T._maxListeners===void 0?i.defaultMaxListeners:T._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var R=[],j=1;j<arguments.length;j++)R.push(arguments[j]);var I=k==="error",P=this._events;if(P!==void 0)I=I&&P.error===void 0;else if(!I)return!1;if(I){var O;if(R.length>0&&(O=R[0]),O instanceof Error)throw O;var U=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw U.context=O,U}var M=P[k];if(M===void 0)return!1;if(typeof M=="function")t(M,this,R);else for(var W=M.length,V=v(M,W),j=0;j<W;++j)t(V[j],this,R);return!0};function u(T,k,R,j){var I,P,O;if(o(R),P=T._events,P===void 0?(P=T._events=Object.create(null),T._eventsCount=0):(P.newListener!==void 0&&(T.emit("newListener",k,R.listener?R.listener:R),P=T._events),O=P[k]),O===void 0)O=P[k]=R,++T._eventsCount;else if(typeof O=="function"?O=P[k]=j?[R,O]:[O,R]:j?O.unshift(R):O.push(R),I=l(T),I>0&&O.length>I&&!O.warned){O.warned=!0;var U=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");U.name="MaxListenersExceededWarning",U.emitter=T,U.type=k,U.count=O.length,r(U)}return T}i.prototype.addListener=function(k,R){return u(this,k,R,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,R){return u(this,k,R,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(T,k,R){var j={fired:!1,wrapFn:void 0,target:T,type:k,listener:R},I=d.bind(j);return I.listener=R,j.wrapFn=I,I}i.prototype.once=function(k,R){return o(R),this.on(k,h(this,k,R)),this},i.prototype.prependOnceListener=function(k,R){return o(R),this.prependListener(k,h(this,k,R)),this},i.prototype.removeListener=function(k,R){var j,I,P,O,U;if(o(R),I=this._events,I===void 0)return this;if(j=I[k],j===void 0)return this;if(j===R||j.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete I[k],I.removeListener&&this.emit("removeListener",k,j.listener||R));else if(typeof j!="function"){for(P=-1,O=j.length-1;O>=0;O--)if(j[O]===R||j[O].listener===R){U=j[O].listener,P=O;break}if(P<0)return this;P===0?j.shift():b(j,P),j.length===1&&(I[k]=j[0]),I.removeListener!==void 0&&this.emit("removeListener",k,U||R)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var R,j,I;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[k]),this;if(arguments.length===0){var P=Object.keys(j),O;for(I=0;I<P.length;++I)O=P[I],O!=="removeListener"&&this.removeAllListeners(O);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=j[k],typeof R=="function")this.removeListener(k,R);else if(R!==void 0)for(I=R.length-1;I>=0;I--)this.removeListener(k,R[I]);return this};function m(T,k,R){var j=T._events;if(j===void 0)return[];var I=j[k];return I===void 0?[]:typeof I=="function"?R?[I.listener||I]:[I]:R?w(I):v(I,I.length)}i.prototype.listeners=function(k){return m(this,k,!0)},i.prototype.rawListeners=function(k){return m(this,k,!1)},i.listenerCount=function(T,k){return typeof T.listenerCount=="function"?T.listenerCount(k):g.call(T,k)},i.prototype.listenerCount=g;function g(T){var k=this._events;if(k!==void 0){var R=k[T];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(T,k){for(var R=new Array(k),j=0;j<k;++j)R[j]=T[j];return R}function b(T,k){for(;k+1<T.length;k++)T[k]=T[k+1];T.pop()}function w(T){for(var k=new Array(T.length),R=0;R<k.length;++R)k[R]=T[R].listener||T[R];return k}function x(T,k){return new Promise(function(R,j){function I(O){T.removeListener(k,P),j(O)}function P(){typeof T.removeListener=="function"&&T.removeListener("error",I),R([].slice.call(arguments))}E(T,k,P,{once:!0}),k!=="error"&&_(T,I,{once:!0})})}function _(T,k,R){typeof T.on=="function"&&E(T,"error",k,R)}function E(T,k,R,j){if(typeof T.on=="function")j.once?T.once(k,R):T.on(k,R);else if(typeof T.addEventListener=="function")T.addEventListener(k,function I(P){j.once&&T.removeEventListener(k,I),R(P)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return lw.exports}var q6;function Xi(){return q6||(q6=1,function(e){const t=od(),{format:n,inspect:r}=i9(),{codes:{ERR_INVALID_ARG_TYPE:a}}=Pi(),{kResistStopPropagation:i,AggregateError:s,SymbolDispose:o}=Qr(),l=globalThis.AbortSignal||O0().AbortSignal,u=globalThis.AbortController||O0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,m=typeof h<"u"?function(w){return w instanceof h}:function(w){return!1},g=(b,w)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(w,"AbortSignal",b)},v=(b,w)=>{if(typeof b!="function")throw new a(w,"Function",b)};e.exports={AggregateError:s,kEmptyObject:Object.freeze({}),once(b){let w=!1;return function(...x){w||(w=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,w;return{promise:new Promise((_,E)=>{b=_,w=E}),resolve:b,reject:w}},promisify(b){return new Promise((w,x)=>{b((_,...E)=>_?x(_):w(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:m,deprecate(b,w){return b},addAbortListener:X1().addAbortListener||function(w,x){if(w===void 0)throw new a("signal","AbortSignal",w);g(w,"signal"),v(x,"listener");let _;return w.aborted?queueMicrotask(()=>x()):(w.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),_=()=>{w.removeEventListener("abort",x)}),{__proto__:null,[o](){var E;(E=_)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const x=new u,_=()=>x.abort();return w.forEach(E=>{g(E,"signals"),E.addEventListener("abort",_,{once:!0})}),x.signal.addEventListener("abort",()=>{w.forEach(E=>E.removeEventListener("abort",_))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(SE)),SE.exports}var cw={},TE,G6;function Iy(){if(G6)return TE;G6=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:s,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:m,StringPrototypeTrim:g}=Qr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:_,ERR_UNKNOWN_SIGNAL:E}}=Pi(),{normalizeEncoding:T}=Xi(),{isAsyncFunction:k,isArrayBufferView:R}=Xi().types,j={};function I(ee){return ee===(ee|0)}function P(ee){return ee===ee>>>0}const O=/^[0-7]+$/,U="must be a 32-bit unsigned integer or an octal string";function M(ee,_e,Pe){if(typeof ee>"u"&&(ee=Pe),typeof ee=="string"){if(d(O,ee)===null)throw new x(_e,ee,U);ee=l(ee,8)}return ie(ee,_e),ee}const W=v((ee,_e,Pe=o,ke=s)=>{if(typeof ee!="number")throw new w(_e,"number",ee);if(!a(ee))throw new _(_e,"an integer",ee);if(ee<Pe||ee>ke)throw new _(_e,`>= ${Pe} && <= ${ke}`,ee)}),V=v((ee,_e,Pe=-2147483648,ke=2147483647)=>{if(typeof ee!="number")throw new w(_e,"number",ee);if(!a(ee))throw new _(_e,"an integer",ee);if(ee<Pe||ee>ke)throw new _(_e,`>= ${Pe} && <= ${ke}`,ee)}),ie=v((ee,_e,Pe=!1)=>{if(typeof ee!="number")throw new w(_e,"number",ee);if(!a(ee))throw new _(_e,"an integer",ee);const ke=Pe?1:0,We=4294967295;if(ee<ke||ee>We)throw new _(_e,`>= ${ke} && <= ${We}`,ee)});function ae(ee,_e){if(typeof ee!="string")throw new w(_e,"string",ee)}function ne(ee,_e,Pe=void 0,ke){if(typeof ee!="number")throw new w(_e,"number",ee);if(Pe!=null&&ee<Pe||ke!=null&&ee>ke||(Pe!=null||ke!=null)&&i(ee))throw new _(_e,`${Pe!=null?`>= ${Pe}`:""}${Pe!=null&&ke!=null?" && ":""}${ke!=null?`<= ${ke}`:""}`,ee)}const q=v((ee,_e,Pe)=>{if(!t(Pe,ee)){const We="must be one of: "+n(r(Pe,Nt=>typeof Nt=="string"?`'${Nt}'`:h(Nt)),", ");throw new x(_e,ee,We)}});function te(ee,_e){if(typeof ee!="boolean")throw new w(_e,"boolean",ee)}function G(ee,_e,Pe){return ee==null||!u(ee,_e)?Pe:ee[_e]}const J=v((ee,_e,Pe=null)=>{const ke=G(Pe,"allowArray",!1),We=G(Pe,"allowFunction",!1);if(!G(Pe,"nullable",!1)&&ee===null||!ke&&e(ee)||typeof ee!="object"&&(!We||typeof ee!="function"))throw new w(_e,"Object",ee)}),Q=v((ee,_e)=>{if(ee!=null&&typeof ee!="object"&&typeof ee!="function")throw new w(_e,"a dictionary",ee)}),se=v((ee,_e,Pe=0)=>{if(!e(ee))throw new w(_e,"Array",ee);if(ee.length<Pe){const ke=`must be longer than ${Pe}`;throw new x(_e,ee,ke)}});function fe(ee,_e){se(ee,_e);for(let Pe=0;Pe<ee.length;Pe++)ae(ee[Pe],`${_e}[${Pe}]`)}function ve(ee,_e){se(ee,_e);for(let Pe=0;Pe<ee.length;Pe++)te(ee[Pe],`${_e}[${Pe}]`)}function je(ee,_e){se(ee,_e);for(let Pe=0;Pe<ee.length;Pe++){const ke=ee[Pe],We=`${_e}[${Pe}]`;if(ke==null)throw new w(We,"AbortSignal",ke);Xe(ke,We)}}function Ne(ee,_e="signal"){if(ae(ee,_e),j[ee]===void 0)throw j[m(ee)]!==void 0?new E(ee+" (signals must use all capital letters)"):new E(ee)}const Se=v((ee,_e="buffer")=>{if(!R(ee))throw new w(_e,["Buffer","TypedArray","DataView"],ee)});function ye(ee,_e){const Pe=T(_e),ke=ee.length;if(Pe==="hex"&&ke%2!==0)throw new x("encoding",_e,`is invalid for data of length ${ke}`)}function Fe(ee,_e="Port",Pe=!0){if(typeof ee!="number"&&typeof ee!="string"||typeof ee=="string"&&g(ee).length===0||+ee!==+ee>>>0||ee>65535||ee===0&&!Pe)throw new b(_e,ee,Pe);return ee|0}const Xe=v((ee,_e)=>{if(ee!==void 0&&(ee===null||typeof ee!="object"||!("aborted"in ee)))throw new w(_e,"AbortSignal",ee)}),Le=v((ee,_e)=>{if(typeof ee!="function")throw new w(_e,"Function",ee)}),Ie=v((ee,_e)=>{if(typeof ee!="function"||k(ee))throw new w(_e,"Function",ee)}),B=v((ee,_e)=>{if(ee!==void 0)throw new w(_e,"undefined",ee)});function Ce(ee,_e,Pe){if(!t(Pe,ee))throw new w(_e,`('${n(Pe,"|")}')`,ee)}const Ee=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function ce(ee,_e){if(typeof ee>"u"||!d(Ee,ee))throw new x(_e,ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe(ee){if(typeof ee=="string")return ce(ee,"hints"),ee;if(e(ee)){const _e=ee.length;let Pe="";if(_e===0)return Pe;for(let ke=0;ke<_e;ke++){const We=ee[ke];ce(We,"hints"),Pe+=We,ke!==_e-1&&(Pe+=", ")}return Pe}throw new x("hints",ee,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return TE={isInt32:I,isUint32:P,parseFileMode:M,validateArray:se,validateStringArray:fe,validateBooleanArray:ve,validateAbortSignalArray:je,validateBoolean:te,validateBuffer:Se,validateDictionary:Q,validateEncoding:ye,validateFunction:Le,validateInt32:V,validateInteger:W,validateNumber:ne,validateObject:J,validateOneOf:q,validatePlainFunction:Ie,validatePort:Fe,validateSignalName:Ne,validateString:ae,validateUint32:ie,validateUndefined:B,validateUnion:Ce,validateAbortSignal:Xe,validateLinkHeaderValue:oe},TE}var uw={exports:{}},kE={},W6;function Bf(){return W6||(W6=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}var n={exports:{}},r=n.exports={},a,i;function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=s}catch{a=s}try{typeof clearTimeout=="function"?i=clearTimeout:i=o}catch{i=o}})();function l(T){if(a===setTimeout)return setTimeout(T,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(T,0);try{return a(T,0)}catch{try{return a.call(null,T,0)}catch{return a.call(this,T,0)}}}function u(T){if(i===clearTimeout)return clearTimeout(T);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(T);try{return i(T)}catch{try{return i.call(null,T)}catch{return i.call(this,T)}}}var d=[],h=!1,m,g=-1;function v(){!h||!m||(h=!1,m.length?d=m.concat(d):g=-1,d.length&&b())}function b(){if(!h){var T=l(v);h=!0;for(var k=d.length;k;){for(m=d,d=[];++g<k;)m&&m[g].run();g=-1,k=d.length}m=null,h=!1,u(T)}}r.nextTick=function(T){var k=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)k[R-1]=arguments[R];d.push(new w(T,k)),d.length===1&&!h&&l(b)};function w(T,k){this.fun=T,this.array=k}w.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(T){return[]},r.binding=function(T){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(T){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var _=n.exports;const E=t(_);e.default=E,e.process=E}(kE)),kE}var AE,K6;function Bc(){if(K6)return AE;K6=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Qr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),s=n("nodejs.stream.writable"),o=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(G,J=!1){var Q;return!!(G&&typeof G.pipe=="function"&&typeof G.on=="function"&&(!J||typeof G.pause=="function"&&typeof G.resume=="function")&&(!G._writableState||((Q=G._readableState)===null||Q===void 0?void 0:Q.readable)!==!1)&&(!G._writableState||G._readableState))}function h(G){var J;return!!(G&&typeof G.write=="function"&&typeof G.on=="function"&&(!G._readableState||((J=G._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function m(G){return!!(G&&typeof G.pipe=="function"&&G._readableState&&typeof G.on=="function"&&typeof G.write=="function")}function g(G){return G&&(G._readableState||G._writableState||typeof G.write=="function"&&typeof G.on=="function"||typeof G.pipe=="function"&&typeof G.on=="function")}function v(G){return!!(G&&!g(G)&&typeof G.pipeThrough=="function"&&typeof G.getReader=="function"&&typeof G.cancel=="function")}function b(G){return!!(G&&!g(G)&&typeof G.getWriter=="function"&&typeof G.abort=="function")}function w(G){return!!(G&&!g(G)&&typeof G.readable=="object"&&typeof G.writable=="object")}function x(G){return v(G)||b(G)||w(G)}function _(G,J){return G==null?!1:J===!0?typeof G[e]=="function":J===!1?typeof G[t]=="function":typeof G[e]=="function"||typeof G[t]=="function"}function E(G){if(!g(G))return null;const J=G._writableState,Q=G._readableState,se=J||Q;return!!(G.destroyed||G[r]||se!=null&&se.destroyed)}function T(G){if(!h(G))return null;if(G.writableEnded===!0)return!0;const J=G._writableState;return J!=null&&J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function k(G,J){if(!h(G))return null;if(G.writableFinished===!0)return!0;const Q=G._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.finished)!="boolean"?null:!!(Q.finished||J===!1&&Q.ended===!0&&Q.length===0)}function R(G){if(!d(G))return null;if(G.readableEnded===!0)return!0;const J=G._readableState;return!J||J.errored?!1:typeof(J==null?void 0:J.ended)!="boolean"?null:J.ended}function j(G,J){if(!d(G))return null;const Q=G._readableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.endEmitted)!="boolean"?null:!!(Q.endEmitted||J===!1&&Q.ended===!0&&Q.length===0)}function I(G){return G&&G[i]!=null?G[i]:typeof(G==null?void 0:G.readable)!="boolean"?null:E(G)?!1:d(G)&&G.readable&&!j(G)}function P(G){return G&&G[s]!=null?G[s]:typeof(G==null?void 0:G.writable)!="boolean"?null:E(G)?!1:h(G)&&G.writable&&!T(G)}function O(G,J){return g(G)?E(G)?!0:!((J==null?void 0:J.readable)!==!1&&I(G)||(J==null?void 0:J.writable)!==!1&&P(G)):null}function U(G){var J,Q;return g(G)?G.writableErrored?G.writableErrored:(J=(Q=G._writableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function M(G){var J,Q;return g(G)?G.readableErrored?G.readableErrored:(J=(Q=G._readableState)===null||Q===void 0?void 0:Q.errored)!==null&&J!==void 0?J:null:null}function W(G){if(!g(G))return null;if(typeof G.closed=="boolean")return G.closed;const J=G._writableState,Q=G._readableState;return typeof(J==null?void 0:J.closed)=="boolean"||typeof(Q==null?void 0:Q.closed)=="boolean"?(J==null?void 0:J.closed)||(Q==null?void 0:Q.closed):typeof G._closed=="boolean"&&V(G)?G._closed:null}function V(G){return typeof G._closed=="boolean"&&typeof G._defaultKeepAlive=="boolean"&&typeof G._removedConnection=="boolean"&&typeof G._removedContLen=="boolean"}function ie(G){return typeof G._sent100=="boolean"&&V(G)}function ae(G){var J;return typeof G._consuming=="boolean"&&typeof G._dumped=="boolean"&&((J=G.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function ne(G){if(!g(G))return null;const J=G._writableState,Q=G._readableState,se=J||Q;return!se&&ie(G)||!!(se&&se.autoDestroy&&se.emitClose&&se.closed===!1)}function q(G){var J;return!!(G&&((J=G[o])!==null&&J!==void 0?J:G.readableDidRead||G.readableAborted))}function te(G){var J,Q,se,fe,ve,je,Ne,Se,ye,Fe;return!!(G&&((J=(Q=(se=(fe=(ve=(je=G[a])!==null&&je!==void 0?je:G.readableErrored)!==null&&ve!==void 0?ve:G.writableErrored)!==null&&fe!==void 0?fe:(Ne=G._readableState)===null||Ne===void 0?void 0:Ne.errorEmitted)!==null&&se!==void 0?se:(Se=G._writableState)===null||Se===void 0?void 0:Se.errorEmitted)!==null&&Q!==void 0?Q:(ye=G._readableState)===null||ye===void 0?void 0:ye.errored)!==null&&J!==void 0?J:!((Fe=G._writableState)===null||Fe===void 0)&&Fe.errored))}return AE={isDestroyed:E,kIsDestroyed:r,isDisturbed:q,kIsDisturbed:o,isErrored:te,kIsErrored:a,isReadable:I,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:s,isClosed:W,isDuplexNodeStream:m,isFinished:O,isIterable:_,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:R,isReadableFinished:j,isReadableErrored:M,isNodeStream:g,isWebStream:x,isWritable:P,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:T,isWritableFinished:k,isWritableErrored:U,isServerRequest:ae,isServerResponse:ie,willEmitClose:ne,isTransformStream:w},AE}var Z6;function ld(){if(Z6)return uw.exports;Z6=1;const e=Bf(),{AbortError:t,codes:n}=Pi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:s}=Xi(),{validateAbortSignal:o,validateFunction:l,validateObject:u,validateBoolean:d}=Iy(),{Promise:h,PromisePrototypeThen:m,SymbolDispose:g}=Qr(),{isClosed:v,isReadable:b,isReadableNodeStream:w,isReadableStream:x,isReadableFinished:_,isReadableErrored:E,isWritable:T,isWritableNodeStream:k,isWritableStream:R,isWritableFinished:j,isWritableErrored:I,isNodeStream:P,willEmitClose:O,kIsClosedPromise:U}=Bc();let M;function W(q){return q.setHeader&&typeof q.abort=="function"}const V=()=>{};function ie(q,te,G){var J,Q;if(arguments.length===2?(G=te,te=i):te==null?te=i:u(te,"options"),l(G,"callback"),o(te.signal,"options.signal"),G=s(G),x(q)||R(q))return ae(q,te,G);if(!P(q))throw new r("stream",["ReadableStream","WritableStream","Stream"],q);const se=(J=te.readable)!==null&&J!==void 0?J:w(q),fe=(Q=te.writable)!==null&&Q!==void 0?Q:k(q),ve=q._writableState,je=q._readableState,Ne=()=>{q.writable||Fe()};let Se=O(q)&&w(q)===se&&k(q)===fe,ye=j(q,!1);const Fe=()=>{ye=!0,q.destroyed&&(Se=!1),!(Se&&(!q.readable||se))&&(!se||Xe)&&G.call(q)};let Xe=_(q,!1);const Le=()=>{Xe=!0,q.destroyed&&(Se=!1),!(Se&&(!q.writable||fe))&&(!fe||ye)&&G.call(q)},Ie=ee=>{G.call(q,ee)};let B=v(q);const Ce=()=>{B=!0;const ee=I(q)||E(q);if(ee&&typeof ee!="boolean")return G.call(q,ee);if(se&&!Xe&&w(q,!0)&&!_(q,!1))return G.call(q,new a);if(fe&&!ye&&!j(q,!1))return G.call(q,new a);G.call(q)},Ee=()=>{B=!0;const ee=I(q)||E(q);if(ee&&typeof ee!="boolean")return G.call(q,ee);G.call(q)},ce=()=>{q.req.on("finish",Fe)};W(q)?(q.on("complete",Fe),Se||q.on("abort",Ce),q.req?ce():q.on("request",ce)):fe&&!ve&&(q.on("end",Ne),q.on("close",Ne)),!Se&&typeof q.aborted=="boolean"&&q.on("aborted",Ce),q.on("end",Le),q.on("finish",Fe),te.error!==!1&&q.on("error",Ie),q.on("close",Ce),B?e.nextTick(Ce):ve!=null&&ve.errorEmitted||je!=null&&je.errorEmitted?Se||e.nextTick(Ee):(!se&&(!Se||b(q))&&(ye||T(q)===!1)||!fe&&(!Se||T(q))&&(Xe||b(q)===!1)||je&&q.req&&q.aborted)&&e.nextTick(Ee);const oe=()=>{G=V,q.removeListener("aborted",Ce),q.removeListener("complete",Fe),q.removeListener("abort",Ce),q.removeListener("request",ce),q.req&&q.req.removeListener("finish",Fe),q.removeListener("end",Ne),q.removeListener("close",Ne),q.removeListener("finish",Fe),q.removeListener("end",Le),q.removeListener("error",Ie),q.removeListener("close",Ce)};if(te.signal&&!B){const ee=()=>{const _e=G;oe(),_e.call(q,new t(void 0,{cause:te.signal.reason}))};if(te.signal.aborted)e.nextTick(ee);else{M=M||Xi().addAbortListener;const _e=M(te.signal,ee),Pe=G;G=s((...ke)=>{_e[g](),Pe.apply(q,ke)})}}return oe}function ae(q,te,G){let J=!1,Q=V;if(te.signal)if(Q=()=>{J=!0,G.call(q,new t(void 0,{cause:te.signal.reason}))},te.signal.aborted)e.nextTick(Q);else{M=M||Xi().addAbortListener;const fe=M(te.signal,Q),ve=G;G=s((...je)=>{fe[g](),ve.apply(q,je)})}const se=(...fe)=>{J||e.nextTick(()=>G.apply(q,fe))};return m(q[U].promise,se,se),V}function ne(q,te){var G;let J=!1;return te===null&&(te=i),(G=te)!==null&&G!==void 0&&G.cleanup&&(d(te.cleanup,"cleanup"),J=te.cleanup),new h((Q,se)=>{const fe=ie(q,te,ve=>{J&&fe(),ve?se(ve):Q()})})}return uw.exports=ie,uw.exports.finished=ne,uw.exports}var NE,Y6;function Jp(){if(Y6)return NE;Y6=1;const e=Bf(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=Pi(),{Symbol:a}=Qr(),{kIsDestroyed:i,isDestroyed:s,isFinished:o,isServerRequest:l}=Bc(),u=a("kDestroy"),d=a("kConstruct");function h(O,U,M){O&&(O.stack,U&&!U.errored&&(U.errored=O),M&&!M.errored&&(M.errored=O))}function m(O,U){const M=this._readableState,W=this._writableState,V=W||M;return W!=null&&W.destroyed||M!=null&&M.destroyed?(typeof U=="function"&&U(),this):(h(O,W,M),W&&(W.destroyed=!0),M&&(M.destroyed=!0),V.constructed?g(this,O,U):this.once(u,function(ie){g(this,t(ie,O),U)}),this)}function g(O,U,M){let W=!1;function V(ie){if(W)return;W=!0;const ae=O._readableState,ne=O._writableState;h(ie,ne,ae),ne&&(ne.closed=!0),ae&&(ae.closed=!0),typeof M=="function"&&M(ie),ie?e.nextTick(v,O,ie):e.nextTick(b,O)}try{O._destroy(U||null,V)}catch(ie){V(ie)}}function v(O,U){w(O,U),b(O)}function b(O){const U=O._readableState,M=O._writableState;M&&(M.closeEmitted=!0),U&&(U.closeEmitted=!0),(M!=null&&M.emitClose||U!=null&&U.emitClose)&&O.emit("close")}function w(O,U){const M=O._readableState,W=O._writableState;W!=null&&W.errorEmitted||M!=null&&M.errorEmitted||(W&&(W.errorEmitted=!0),M&&(M.errorEmitted=!0),O.emit("error",U))}function x(){const O=this._readableState,U=this._writableState;O&&(O.constructed=!0,O.closed=!1,O.closeEmitted=!1,O.destroyed=!1,O.errored=null,O.errorEmitted=!1,O.reading=!1,O.ended=O.readable===!1,O.endEmitted=O.readable===!1),U&&(U.constructed=!0,U.destroyed=!1,U.closed=!1,U.closeEmitted=!1,U.errored=null,U.errorEmitted=!1,U.finalCalled=!1,U.prefinished=!1,U.ended=U.writable===!1,U.ending=U.writable===!1,U.finished=U.writable===!1)}function _(O,U,M){const W=O._readableState,V=O._writableState;if(V!=null&&V.destroyed||W!=null&&W.destroyed)return this;W!=null&&W.autoDestroy||V!=null&&V.autoDestroy?O.destroy(U):U&&(U.stack,V&&!V.errored&&(V.errored=U),W&&!W.errored&&(W.errored=U),M?e.nextTick(w,O,U):w(O,U))}function E(O,U){if(typeof O._construct!="function")return;const M=O._readableState,W=O._writableState;M&&(M.constructed=!1),W&&(W.constructed=!1),O.once(d,U),!(O.listenerCount(d)>1)&&e.nextTick(T,O)}function T(O){let U=!1;function M(W){if(U){_(O,W??new n);return}U=!0;const V=O._readableState,ie=O._writableState,ae=ie||V;V&&(V.constructed=!0),ie&&(ie.constructed=!0),ae.destroyed?O.emit(u,W):W?_(O,W,!0):e.nextTick(k,O)}try{O._construct(W=>{e.nextTick(M,W)})}catch(W){e.nextTick(M,W)}}function k(O){O.emit(d)}function R(O){return(O==null?void 0:O.setHeader)&&typeof O.abort=="function"}function j(O){O.emit("close")}function I(O,U){O.emit("error",U),e.nextTick(j,O)}function P(O,U){!O||s(O)||(!U&&!o(O)&&(U=new r),l(O)?(O.socket=null,O.destroy(U)):R(O)?O.abort():R(O.req)?O.req.abort():typeof O.destroy=="function"?O.destroy(U):typeof O.close=="function"?O.close():U?e.nextTick(I,O,U):e.nextTick(j,O),O.destroyed||(O[i]=!0))}return NE={construct:E,destroyer:P,destroy:m,undestroy:x,errorOrDestroy:_},NE}var RE,X6;function cN(){if(X6)return RE;X6=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Qr(),{EventEmitter:n}=X1();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,s){const o=this;function l(b){i.writable&&i.write(b)===!1&&o.pause&&o.pause()}o.on("data",l);function u(){o.readable&&o.resume&&o.resume()}i.on("drain",u),!i._isStdio&&(!s||s.end!==!1)&&(o.on("end",h),o.on("close",m));let d=!1;function h(){d||(d=!0,i.end())}function m(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(o,"error",g),a(i,"error",g);function v(){o.removeListener("data",l),i.removeListener("drain",u),o.removeListener("end",h),o.removeListener("close",m),o.removeListener("error",g),i.removeListener("error",g),o.removeListener("end",v),o.removeListener("close",v),i.removeListener("close",v)}return o.on("end",v),o.on("close",v),i.on("close",v),i.emit("pipe",o),i};function a(i,s,o){if(typeof i.prependListener=="function")return i.prependListener(s,o);!i._events||!i._events[s]?i.on(s,o):e(i._events[s])?i._events[s].unshift(o):i._events[s]=[o,i._events[s]]}return RE={Stream:r,prependListener:a},RE}var IE={exports:{}},J6;function J1(){return J6||(J6=1,function(e){const{SymbolDispose:t}=Qr(),{AbortError:n,codes:r}=Pi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:s}=Bc(),o=ld(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,m)=>{if(typeof h!="object"||!("aborted"in h))throw new l(m,"AbortSignal",h)};e.exports.addAbortSignal=function(m,g){if(d(m,"signal"),!a(g)&&!i(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(m,g)},e.exports.addAbortSignalNoValidate=function(h,m){if(typeof h!="object"||!("aborted"in h))return m;const g=a(m)?()=>{m.destroy(new n(void 0,{cause:h.reason}))}:()=>{m[s](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{u=u||Xi().addAbortListener;const v=u(h,g);o(m,v[t])}return m}}(IE)),IE.exports}var jE,Q6;function rse(){if(Q6)return jE;Q6=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Qr(),{Buffer:a}=od(),{inspect:i}=Xi();return jE=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=o+l.data;return u}concat(o){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(o>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(o,l){const u=this.head.data;if(o<u.length){const d=u.slice(0,o);return this.head.data=u.slice(o),d}return o===u.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[t](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",u=this.head,d=0;do{const h=u.data;if(o>h.length)l+=h,o-=h.length;else{o===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,o),this.head=u,u.data=e(h,o));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(o){const l=a.allocUnsafe(o),u=o;let d=this.head,h=0;do{const m=d.data;if(o>m.length)n(l,m,u-o),o-=m.length;else{o===m.length?(n(l,m,u-o),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(m.buffer,m.byteOffset,o),u-o),this.head=d,d.data=m.slice(o));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return i(this,{...l,depth:0,customInspect:!1})}},jE}var DE,eD;function Q1(){if(eD)return DE;eD=1;const{MathFloor:e,NumberIsInteger:t}=Qr(),{validateInteger:n}=Iy(),{ERR_INVALID_ARG_VALUE:r}=Pi().codes;let a=16*1024,i=16;function s(d,h,m){return d.highWaterMark!=null?d.highWaterMark:h?d[m]:null}function o(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,m,g){const v=s(h,g,m);if(v!=null){if(!t(v)||v<0){const b=g?`options.${m}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return o(d.objectMode)}return DE={getHighWaterMark:u,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},DE}var ME={},dw={exports:{}},tD;function uN(){return tD||(tD=1,function(e,t){var n=od(),r=n.Buffer;function a(s,o){for(var l in s)o[l]=s[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(s,o,l){return r(s,o,l)}a(r,i),i.from=function(s,o,l){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,o,l)},i.alloc=function(s,o,l){if(typeof s!="number")throw new TypeError("Argument must be a number");var u=r(s);return o!==void 0?typeof l=="string"?u.fill(o,l):u.fill(o):u.fill(0),u},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(s)}}(dw,dw.exports)),dw.exports}var nD;function ase(){if(nD)return ME;nD=1;var e=uN().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var _;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(_)return;x=(""+x).toLowerCase(),_=!0}}function r(x){var _=n(x);if(typeof _!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return _||x}ME.StringDecoder=a;function a(x){this.encoding=r(x);var _;switch(this.encoding){case"utf16le":this.text=h,this.end=m,_=4;break;case"utf8":this.fillLast=l,_=4;break;case"base64":this.text=g,this.end=v,_=3;break;default:this.write=b,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(_)}a.prototype.write=function(x){if(x.length===0)return"";var _,E;if(this.lastNeed){if(_=this.fillLast(x),_===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?_?_+this.text(x,E):this.text(x,E):_||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function s(x,_,E){var T=_.length-1;if(T<E)return 0;var k=i(_[T]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--T<E||k===-2?0:(k=i(_[T]),k>=0?(k>0&&(x.lastNeed=k-2),k):--T<E||k===-2?0:(k=i(_[T]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function o(x,_,E){if((_[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var _=this.lastTotal-this.lastNeed,E=o(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,_,0,x.length),this.lastNeed-=x.length}function u(x,_){var E=s(this,x,_);if(!this.lastNeed)return x.toString("utf8",_);this.lastTotal=E;var T=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,T),x.toString("utf8",_,T)}function d(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+"":_}function h(x,_){if((x.length-_)%2===0){var E=x.toString("utf16le",_);if(E){var T=E.charCodeAt(E.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",_,x.length-1)}function m(x){var _=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,E)}return _}function g(x,_){var E=(x.length-_)%3;return E===0?x.toString("base64",_):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",_,x.length-E))}function v(x){var _=x&&x.length?this.write(x):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function b(x){return x.toString(this.encoding)}function w(x){return x&&x.length?this.write(x):""}return ME}var OE,rD;function s9(){if(rD)return OE;rD=1;const e=Bf(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Qr(),{Buffer:a}=od(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:s}=Pi().codes;function o(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let m;if(u&&u[n])m=!0,h=u[n]();else if(u&&u[r])m=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const g=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;g._read=function(){v||(v=!0,w())},g._destroy=function(x,_){t(b(x),()=>e.nextTick(_,x),E=>e.nextTick(_,E||x))};async function b(x){const _=x!=null,E=typeof h.throw=="function";if(_&&E){const{value:T,done:k}=await h.throw(x);if(await T,k)return}if(typeof h.return=="function"){const{value:T}=await h.return();await T}}async function w(){for(;;){try{const{value:x,done:_}=m?await h.next():h.next();if(_)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new s;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return OE=o,OE}var PE,aD;function e_(){if(aD)return PE;aD=1;const e=Bf(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:s,ObjectSetPrototypeOf:o,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:m}=Qr();PE=ke,ke.ReadableState=Pe;const{EventEmitter:g}=X1(),{Stream:v,prependListener:b}=cN(),{Buffer:w}=od(),{addAbortSignal:x}=J1(),_=ld();let E=Xi().debuglog("stream",me=>{E=me});const T=rse(),k=Jp(),{getHighWaterMark:R,getDefaultHighWaterMark:j}=Q1(),{aggregateTwoErrors:I,codes:{ERR_INVALID_ARG_TYPE:P,ERR_METHOD_NOT_IMPLEMENTED:O,ERR_OUT_OF_RANGE:U,ERR_STREAM_PUSH_AFTER_EOF:M,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:W},AbortError:V}=Pi(),{validateObject:ie}=Iy(),ae=m("kPaused"),{StringDecoder:ne}=ase(),q=s9();o(ke.prototype,v.prototype),o(ke,v);const te=()=>{},{errorOrDestroy:G}=k,J=1,Q=2,se=4,fe=8,ve=16,je=32,Ne=64,Se=128,ye=256,Fe=512,Xe=1024,Le=2048,Ie=4096,B=8192,Ce=16384,Ee=32768,ce=65536,oe=1<<17,ee=1<<18;function _e(me){return{enumerable:!1,get(){return(this.state&me)!==0},set(K){K?this.state|=me:this.state&=~me}}}i(Pe.prototype,{objectMode:_e(J),ended:_e(Q),endEmitted:_e(se),reading:_e(fe),constructed:_e(ve),sync:_e(je),needReadable:_e(Ne),emittedReadable:_e(Se),readableListening:_e(ye),resumeScheduled:_e(Fe),errorEmitted:_e(Xe),emitClose:_e(Le),autoDestroy:_e(Ie),destroyed:_e(B),closed:_e(Ce),closeEmitted:_e(Ee),multiAwaitDrain:_e(ce),readingMore:_e(oe),dataEmitted:_e(ee)});function Pe(me,K,H){typeof H!="boolean"&&(H=K instanceof Rc()),this.state=Le|Ie|ve|je,me&&me.objectMode&&(this.state|=J),H&&me&&me.readableObjectMode&&(this.state|=J),this.highWaterMark=me?R(this,me,"readableHighWaterMark",H):j(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,me&&me.emitClose===!1&&(this.state&=-2049),me&&me.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=me&&me.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,me&&me.encoding&&(this.decoder=new ne(me.encoding),this.encoding=me.encoding)}function ke(me){if(!(this instanceof ke))return new ke(me);const K=this instanceof Rc();this._readableState=new Pe(me,this,K),me&&(typeof me.read=="function"&&(this._read=me.read),typeof me.destroy=="function"&&(this._destroy=me.destroy),typeof me.construct=="function"&&(this._construct=me.construct),me.signal&&!K&&x(me.signal,this)),v.call(this,me),k.construct(this,()=>{this._readableState.needReadable&&D(this,this._readableState)})}ke.prototype.destroy=k.destroy,ke.prototype._undestroy=k.undestroy,ke.prototype._destroy=function(me,K){K(me)},ke.prototype[g.captureRejectionSymbol]=function(me){this.destroy(me)},ke.prototype[d]=function(){let me;return this.destroyed||(me=this.readableEnded?null:new V,this.destroy(me)),new l((K,H)=>_(this,Y=>Y&&Y!==me?H(Y):K(null)))},ke.prototype.push=function(me,K){return We(this,me,K,!1)},ke.prototype.unshift=function(me,K){return We(this,me,K,!0)};function We(me,K,H,Y){E("readableAddChunk",K);const pe=me._readableState;let Re;if((pe.state&J)===0&&(typeof K=="string"?(H=H||pe.defaultEncoding,pe.encoding!==H&&(Y&&pe.encoding?K=w.from(K,H).toString(pe.encoding):(K=w.from(K,H),H=""))):K instanceof w?H="":v._isUint8Array(K)?(K=v._uint8ArrayToBuffer(K),H=""):K!=null&&(Re=new P("chunk",["string","Buffer","Uint8Array"],K))),Re)G(me,Re);else if(K===null)pe.state&=-9,Mt(me,pe);else if((pe.state&J)!==0||K&&K.length>0)if(Y)if((pe.state&se)!==0)G(me,new W);else{if(pe.destroyed||pe.errored)return!1;Nt(me,pe,K,!0)}else if(pe.ended)G(me,new M);else{if(pe.destroyed||pe.errored)return!1;pe.state&=-9,pe.decoder&&!H?(K=pe.decoder.write(K),pe.objectMode||K.length!==0?Nt(me,pe,K,!1):D(me,pe)):Nt(me,pe,K,!1)}else Y||(pe.state&=-9,D(me,pe));return!pe.ended&&(pe.length<pe.highWaterMark||pe.length===0)}function Nt(me,K,H,Y){K.flowing&&K.length===0&&!K.sync&&me.listenerCount("data")>0?((K.state&ce)!==0?K.awaitDrainWriters.clear():K.awaitDrainWriters=null,K.dataEmitted=!0,me.emit("data",H)):(K.length+=K.objectMode?1:H.length,Y?K.buffer.unshift(H):K.buffer.push(H),(K.state&Ne)!==0&&Zt(me)),D(me,K)}ke.prototype.isPaused=function(){const me=this._readableState;return me[ae]===!0||me.flowing===!1},ke.prototype.setEncoding=function(me){const K=new ne(me);this._readableState.decoder=K,this._readableState.encoding=this._readableState.decoder.encoding;const H=this._readableState.buffer;let Y="";for(const pe of H)Y+=K.write(pe);return H.clear(),Y!==""&&H.push(Y),this._readableState.length=Y.length,this};const it=1073741824;function Ct(me){if(me>it)throw new U("size","<= 1GiB",me);return me--,me|=me>>>1,me|=me>>>2,me|=me>>>4,me|=me>>>8,me|=me>>>16,me++,me}function Ft(me,K){return me<=0||K.length===0&&K.ended?0:(K.state&J)!==0?1:r(me)?K.flowing&&K.length?K.buffer.first().length:K.length:me<=K.length?me:K.ended?K.length:0}ke.prototype.read=function(me){E("read",me),me===void 0?me=NaN:n(me)||(me=a(me,10));const K=this._readableState,H=me;if(me>K.highWaterMark&&(K.highWaterMark=Ct(me)),me!==0&&(K.state&=-129),me===0&&K.needReadable&&((K.highWaterMark!==0?K.length>=K.highWaterMark:K.length>0)||K.ended))return E("read: emitReadable",K.length,K.ended),K.length===0&&K.ended?nt(this):Zt(this),null;if(me=Ft(me,K),me===0&&K.ended)return K.length===0&&nt(this),null;let Y=(K.state&Ne)!==0;if(E("need readable",Y),(K.length===0||K.length-me<K.highWaterMark)&&(Y=!0,E("length less than watermark",Y)),K.ended||K.reading||K.destroyed||K.errored||!K.constructed)Y=!1,E("reading, ended or constructing",Y);else if(Y){E("do read"),K.state|=fe|je,K.length===0&&(K.state|=Ne);try{this._read(K.highWaterMark)}catch(Re){G(this,Re)}K.state&=-33,K.reading||(me=Ft(H,K))}let pe;return me>0?pe=$e(me,K):pe=null,pe===null?(K.needReadable=K.length<=K.highWaterMark,me=0):(K.length-=me,K.multiAwaitDrain?K.awaitDrainWriters.clear():K.awaitDrainWriters=null),K.length===0&&(K.ended||(K.needReadable=!0),H!==me&&K.ended&&nt(this)),pe!==null&&!K.errorEmitted&&!K.closeEmitted&&(K.dataEmitted=!0,this.emit("data",pe)),pe};function Mt(me,K){if(E("onEofChunk"),!K.ended){if(K.decoder){const H=K.decoder.end();H&&H.length&&(K.buffer.push(H),K.length+=K.objectMode?1:H.length)}K.ended=!0,K.sync?Zt(me):(K.needReadable=!1,K.emittedReadable=!0,be(me))}}function Zt(me){const K=me._readableState;E("emitReadable",K.needReadable,K.emittedReadable),K.needReadable=!1,K.emittedReadable||(E("emitReadable",K.flowing),K.emittedReadable=!0,e.nextTick(be,me))}function be(me){const K=me._readableState;E("emitReadable_",K.destroyed,K.length,K.ended),!K.destroyed&&!K.errored&&(K.length||K.ended)&&(me.emit("readable"),K.emittedReadable=!1),K.needReadable=!K.flowing&&!K.ended&&K.length<=K.highWaterMark,ft(me)}function D(me,K){!K.readingMore&&K.constructed&&(K.readingMore=!0,e.nextTick(Z,me,K))}function Z(me,K){for(;!K.reading&&!K.ended&&(K.length<K.highWaterMark||K.flowing&&K.length===0);){const H=K.length;if(E("maybeReadMore read 0"),me.read(0),H===K.length)break}K.readingMore=!1}ke.prototype._read=function(me){throw new O("_read()")},ke.prototype.pipe=function(me,K){const H=this,Y=this._readableState;Y.pipes.length===1&&(Y.multiAwaitDrain||(Y.multiAwaitDrain=!0,Y.awaitDrainWriters=new u(Y.awaitDrainWriters?[Y.awaitDrainWriters]:[]))),Y.pipes.push(me),E("pipe count=%d opts=%j",Y.pipes.length,K);const Re=(!K||K.end!==!1)&&me!==e.stdout&&me!==e.stderr?pt:Cr;Y.endEmitted?e.nextTick(Re):H.once("end",Re),me.on("unpipe",Ve);function Ve(zn,Ei){E("onunpipe"),zn===H&&Ei&&Ei.hasUnpiped===!1&&(Ei.hasUnpiped=!0,It())}function pt(){E("onend"),me.end()}let Kt,ut=!1;function It(){E("cleanup"),me.removeListener("close",Jn),me.removeListener("finish",Er),Kt&&me.removeListener("drain",Kt),me.removeListener("error",In),me.removeListener("unpipe",Ve),H.removeListener("end",pt),H.removeListener("end",Cr),H.removeListener("data",en),ut=!0,Kt&&Y.awaitDrainWriters&&(!me._writableState||me._writableState.needDrain)&&Kt()}function Lt(){ut||(Y.pipes.length===1&&Y.pipes[0]===me?(E("false write response, pause",0),Y.awaitDrainWriters=me,Y.multiAwaitDrain=!1):Y.pipes.length>1&&Y.pipes.includes(me)&&(E("false write response, pause",Y.awaitDrainWriters.size),Y.awaitDrainWriters.add(me)),H.pause()),Kt||(Kt=he(H,me),me.on("drain",Kt))}H.on("data",en);function en(zn){E("ondata");const Ei=me.write(zn);E("dest.write",Ei),Ei===!1&&Lt()}function In(zn){if(E("onerror",zn),Cr(),me.removeListener("error",In),me.listenerCount("error")===0){const Ei=me._writableState||me._readableState;Ei&&!Ei.errorEmitted?G(me,zn):me.emit("error",zn)}}b(me,"error",In);function Jn(){me.removeListener("finish",Er),Cr()}me.once("close",Jn);function Er(){E("onfinish"),me.removeListener("close",Jn),Cr()}me.once("finish",Er);function Cr(){E("unpipe"),H.unpipe(me)}return me.emit("pipe",H),me.writableNeedDrain===!0?Lt():Y.flowing||(E("pipe resume"),H.resume()),me};function he(me,K){return function(){const Y=me._readableState;Y.awaitDrainWriters===K?(E("pipeOnDrain",1),Y.awaitDrainWriters=null):Y.multiAwaitDrain&&(E("pipeOnDrain",Y.awaitDrainWriters.size),Y.awaitDrainWriters.delete(K)),(!Y.awaitDrainWriters||Y.awaitDrainWriters.size===0)&&me.listenerCount("data")&&me.resume()}}ke.prototype.unpipe=function(me){const K=this._readableState,H={hasUnpiped:!1};if(K.pipes.length===0)return this;if(!me){const pe=K.pipes;K.pipes=[],this.pause();for(let Re=0;Re<pe.length;Re++)pe[Re].emit("unpipe",this,{hasUnpiped:!1});return this}const Y=t(K.pipes,me);return Y===-1?this:(K.pipes.splice(Y,1),K.pipes.length===0&&this.pause(),me.emit("unpipe",this,H),this)},ke.prototype.on=function(me,K){const H=v.prototype.on.call(this,me,K),Y=this._readableState;return me==="data"?(Y.readableListening=this.listenerCount("readable")>0,Y.flowing!==!1&&this.resume()):me==="readable"&&!Y.endEmitted&&!Y.readableListening&&(Y.readableListening=Y.needReadable=!0,Y.flowing=!1,Y.emittedReadable=!1,E("on readable",Y.length,Y.reading),Y.length?Zt(this):Y.reading||e.nextTick(we,this)),H},ke.prototype.addListener=ke.prototype.on,ke.prototype.removeListener=function(me,K){const H=v.prototype.removeListener.call(this,me,K);return me==="readable"&&e.nextTick(De,this),H},ke.prototype.off=ke.prototype.removeListener,ke.prototype.removeAllListeners=function(me){const K=v.prototype.removeAllListeners.apply(this,arguments);return(me==="readable"||me===void 0)&&e.nextTick(De,this),K};function De(me){const K=me._readableState;K.readableListening=me.listenerCount("readable")>0,K.resumeScheduled&&K[ae]===!1?K.flowing=!0:me.listenerCount("data")>0?me.resume():K.readableListening||(K.flowing=null)}function we(me){E("readable nexttick read 0"),me.read(0)}ke.prototype.resume=function(){const me=this._readableState;return me.flowing||(E("resume"),me.flowing=!me.readableListening,Ae(this,me)),me[ae]=!1,this};function Ae(me,K){K.resumeScheduled||(K.resumeScheduled=!0,e.nextTick(ue,me,K))}function ue(me,K){E("resume",K.reading),K.reading||me.read(0),K.resumeScheduled=!1,me.emit("resume"),ft(me),K.flowing&&!K.reading&&me.read(0)}ke.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ft(me){const K=me._readableState;for(E("flow",K.flowing);K.flowing&&me.read()!==null;);}ke.prototype.wrap=function(me){let K=!1;me.on("data",Y=>{!this.push(Y)&&me.pause&&(K=!0,me.pause())}),me.on("end",()=>{this.push(null)}),me.on("error",Y=>{G(this,Y)}),me.on("close",()=>{this.destroy()}),me.on("destroy",()=>{this.destroy()}),this._read=()=>{K&&me.resume&&(K=!1,me.resume())};const H=s(me);for(let Y=1;Y<H.length;Y++){const pe=H[Y];this[pe]===void 0&&typeof me[pe]=="function"&&(this[pe]=me[pe].bind(me))}return this},ke.prototype[h]=function(){return wt(this)},ke.prototype.iterator=function(me){return me!==void 0&&ie(me,"options"),wt(this,me)};function wt(me,K){typeof me.read!="function"&&(me=ke.wrap(me,{objectMode:!0}));const H=L(me,K);return H.stream=me,H}async function*L(me,K){let H=te;function Y(Ve){this===me?(H(),H=te):H=Ve}me.on("readable",Y);let pe;const Re=_(me,{writable:!1},Ve=>{pe=Ve?I(pe,Ve):null,H(),H=te});try{for(;;){const Ve=me.destroyed?null:me.read();if(Ve!==null)yield Ve;else{if(pe)throw pe;if(pe===null)return;await new l(Y)}}}catch(Ve){throw pe=I(pe,Ve),pe}finally{(pe||(K==null?void 0:K.destroyOnReturn)!==!1)&&(pe===void 0||me._readableState.autoDestroy)?k.destroyer(me,null):(me.off("readable",Y),Re())}}i(ke.prototype,{readable:{__proto__:null,get(){const me=this._readableState;return!!me&&me.readable!==!1&&!me.destroyed&&!me.errorEmitted&&!me.endEmitted},set(me){this._readableState&&(this._readableState.readable=!!me)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(me){this._readableState&&(this._readableState.flowing=me)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(me){this._readableState&&(this._readableState.destroyed=me)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Pe.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(me){this[ae]=!!me}}}),ke._fromList=$e;function $e(me,K){if(K.length===0)return null;let H;return K.objectMode?H=K.buffer.shift():!me||me>=K.length?(K.decoder?H=K.buffer.join(""):K.buffer.length===1?H=K.buffer.first():H=K.buffer.concat(K.length),K.buffer.clear()):H=K.buffer.consume(me,K.decoder),H}function nt(me){const K=me._readableState;E("endReadable",K.endEmitted),K.endEmitted||(K.ended=!0,e.nextTick(ge,K,me))}function ge(me,K){if(E("endReadableNT",me.endEmitted,me.length),!me.errored&&!me.closeEmitted&&!me.endEmitted&&me.length===0){if(me.endEmitted=!0,K.emit("end"),K.writable&&K.allowHalfOpen===!1)e.nextTick(Me,K);else if(me.autoDestroy){const H=K._writableState;(!H||H.autoDestroy&&(H.finished||H.writable===!1))&&K.destroy()}}}function Me(me){me.writable&&!me.writableEnded&&!me.destroyed&&me.end()}ke.from=function(me,K){return q(ke,me,K)};let Ke;function Dt(){return Ke===void 0&&(Ke={}),Ke}return ke.fromWeb=function(me,K){return Dt().newStreamReadableFromReadableStream(me,K)},ke.toWeb=function(me,K){return Dt().newReadableStreamFromStreamReadable(me,K)},ke.wrap=function(me,K){var H,Y;return new ke({objectMode:(H=(Y=me.readableObjectMode)!==null&&Y!==void 0?Y:me.objectMode)!==null&&H!==void 0?H:!0,...K,destroy(pe,Re){k.destroyer(me,pe),Re(pe)}}).wrap(me)},PE}var FE,iD;function dN(){if(iD)return FE;iD=1;const e=Bf(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:s,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:u}=Qr();FE=ie,ie.WritableState=W;const{EventEmitter:d}=X1(),h=cN().Stream,{Buffer:m}=od(),g=Jp(),{addAbortSignal:v}=J1(),{getHighWaterMark:b,getDefaultHighWaterMark:w}=Q1(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:_,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:j,ERR_STREAM_WRITE_AFTER_END:I,ERR_UNKNOWN_ENCODING:P}=Pi().codes,{errorOrDestroy:O}=g;s(ie.prototype,h.prototype),s(ie,h);function U(){}const M=l("kOnFinished");function W(Ie,B,Ce){typeof Ce!="boolean"&&(Ce=B instanceof Rc()),this.objectMode=!!(Ie&&Ie.objectMode),Ce&&(this.objectMode=this.objectMode||!!(Ie&&Ie.writableObjectMode)),this.highWaterMark=Ie?b(this,Ie,"writableHighWaterMark",Ce):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Ee=!!(Ie&&Ie.decodeStrings===!1);this.decodeStrings=!Ee,this.defaultEncoding=Ie&&Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=G.bind(void 0,B),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,V(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ie||Ie.emitClose!==!1,this.autoDestroy=!Ie||Ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[M]=[]}function V(Ie){Ie.buffered=[],Ie.bufferedIndex=0,Ie.allBuffers=!0,Ie.allNoop=!0}W.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(W.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ie(Ie){const B=this instanceof Rc();if(!B&&!r(ie,this))return new ie(Ie);this._writableState=new W(Ie,this,B),Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final),typeof Ie.construct=="function"&&(this._construct=Ie.construct),Ie.signal&&v(Ie.signal,this)),h.call(this,Ie),g.construct(this,()=>{const Ce=this._writableState;Ce.writing||fe(this,Ce),Se(this,Ce)})}a(ie,u,{__proto__:null,value:function(Ie){return r(this,Ie)?!0:this!==ie?!1:Ie&&Ie._writableState instanceof W}}),ie.prototype.pipe=function(){O(this,new T)};function ae(Ie,B,Ce,Ee){const ce=Ie._writableState;if(typeof Ce=="function")Ee=Ce,Ce=ce.defaultEncoding;else{if(!Ce)Ce=ce.defaultEncoding;else if(Ce!=="buffer"&&!m.isEncoding(Ce))throw new P(Ce);typeof Ee!="function"&&(Ee=U)}if(B===null)throw new j;if(!ce.objectMode)if(typeof B=="string")ce.decodeStrings!==!1&&(B=m.from(B,Ce),Ce="buffer");else if(B instanceof m)Ce="buffer";else if(h._isUint8Array(B))B=h._uint8ArrayToBuffer(B),Ce="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],B);let oe;return ce.ending?oe=new I:ce.destroyed&&(oe=new k("write")),oe?(e.nextTick(Ee,oe),O(Ie,oe,!0),oe):(ce.pendingcb++,ne(Ie,ce,B,Ce,Ee))}ie.prototype.write=function(Ie,B,Ce){return ae(this,Ie,B,Ce)===!0},ie.prototype.cork=function(){this._writableState.corked++},ie.prototype.uncork=function(){const Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||fe(this,Ie))},ie.prototype.setDefaultEncoding=function(B){if(typeof B=="string"&&(B=o(B)),!m.isEncoding(B))throw new P(B);return this._writableState.defaultEncoding=B,this};function ne(Ie,B,Ce,Ee,ce){const oe=B.objectMode?1:Ce.length;B.length+=oe;const ee=B.length<B.highWaterMark;return ee||(B.needDrain=!0),B.writing||B.corked||B.errored||!B.constructed?(B.buffered.push({chunk:Ce,encoding:Ee,callback:ce}),B.allBuffers&&Ee!=="buffer"&&(B.allBuffers=!1),B.allNoop&&ce!==U&&(B.allNoop=!1)):(B.writelen=oe,B.writecb=ce,B.writing=!0,B.sync=!0,Ie._write(Ce,Ee,B.onwrite),B.sync=!1),ee&&!B.errored&&!B.destroyed}function q(Ie,B,Ce,Ee,ce,oe,ee){B.writelen=Ee,B.writecb=ee,B.writing=!0,B.sync=!0,B.destroyed?B.onwrite(new k("write")):Ce?Ie._writev(ce,B.onwrite):Ie._write(ce,oe,B.onwrite),B.sync=!1}function te(Ie,B,Ce,Ee){--B.pendingcb,Ee(Ce),se(B),O(Ie,Ce)}function G(Ie,B){const Ce=Ie._writableState,Ee=Ce.sync,ce=Ce.writecb;if(typeof ce!="function"){O(Ie,new E);return}Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0,B?(B.stack,Ce.errored||(Ce.errored=B),Ie._readableState&&!Ie._readableState.errored&&(Ie._readableState.errored=B),Ee?e.nextTick(te,Ie,Ce,B,ce):te(Ie,Ce,B,ce)):(Ce.buffered.length>Ce.bufferedIndex&&fe(Ie,Ce),Ee?Ce.afterWriteTickInfo!==null&&Ce.afterWriteTickInfo.cb===ce?Ce.afterWriteTickInfo.count++:(Ce.afterWriteTickInfo={count:1,cb:ce,stream:Ie,state:Ce},e.nextTick(J,Ce.afterWriteTickInfo)):Q(Ie,Ce,1,ce))}function J({stream:Ie,state:B,count:Ce,cb:Ee}){return B.afterWriteTickInfo=null,Q(Ie,B,Ce,Ee)}function Q(Ie,B,Ce,Ee){for(!B.ending&&!Ie.destroyed&&B.length===0&&B.needDrain&&(B.needDrain=!1,Ie.emit("drain"));Ce-- >0;)B.pendingcb--,Ee();B.destroyed&&se(B),Se(Ie,B)}function se(Ie){if(Ie.writing)return;for(let ce=Ie.bufferedIndex;ce<Ie.buffered.length;++ce){var B;const{chunk:oe,callback:ee}=Ie.buffered[ce],_e=Ie.objectMode?1:oe.length;Ie.length-=_e,ee((B=Ie.errored)!==null&&B!==void 0?B:new k("write"))}const Ce=Ie[M].splice(0);for(let ce=0;ce<Ce.length;ce++){var Ee;Ce[ce]((Ee=Ie.errored)!==null&&Ee!==void 0?Ee:new k("end"))}V(Ie)}function fe(Ie,B){if(B.corked||B.bufferProcessing||B.destroyed||!B.constructed)return;const{buffered:Ce,bufferedIndex:Ee,objectMode:ce}=B,oe=Ce.length-Ee;if(!oe)return;let ee=Ee;if(B.bufferProcessing=!0,oe>1&&Ie._writev){B.pendingcb-=oe-1;const _e=B.allNoop?U:ke=>{for(let We=ee;We<Ce.length;++We)Ce[We].callback(ke)},Pe=B.allNoop&&ee===0?Ce:t(Ce,ee);Pe.allBuffers=B.allBuffers,q(Ie,B,!0,B.length,Pe,"",_e),V(B)}else{do{const{chunk:_e,encoding:Pe,callback:ke}=Ce[ee];Ce[ee++]=null;const We=ce?1:_e.length;q(Ie,B,!1,We,_e,Pe,ke)}while(ee<Ce.length&&!B.writing);ee===Ce.length?V(B):ee>256?(Ce.splice(0,ee),B.bufferedIndex=0):B.bufferedIndex=ee}B.bufferProcessing=!1}ie.prototype._write=function(Ie,B,Ce){if(this._writev)this._writev([{chunk:Ie,encoding:B}],Ce);else throw new _("_write()")},ie.prototype._writev=null,ie.prototype.end=function(Ie,B,Ce){const Ee=this._writableState;typeof Ie=="function"?(Ce=Ie,Ie=null,B=null):typeof B=="function"&&(Ce=B,B=null);let ce;if(Ie!=null){const oe=ae(this,Ie,B);oe instanceof n&&(ce=oe)}return Ee.corked&&(Ee.corked=1,this.uncork()),ce||(!Ee.errored&&!Ee.ending?(Ee.ending=!0,Se(this,Ee,!0),Ee.ended=!0):Ee.finished?ce=new R("end"):Ee.destroyed&&(ce=new k("end"))),typeof Ce=="function"&&(ce||Ee.finished?e.nextTick(Ce,ce):Ee[M].push(Ce)),this};function ve(Ie){return Ie.ending&&!Ie.destroyed&&Ie.constructed&&Ie.length===0&&!Ie.errored&&Ie.buffered.length===0&&!Ie.finished&&!Ie.writing&&!Ie.errorEmitted&&!Ie.closeEmitted}function je(Ie,B){let Ce=!1;function Ee(ce){if(Ce){O(Ie,ce??E());return}if(Ce=!0,B.pendingcb--,ce){const oe=B[M].splice(0);for(let ee=0;ee<oe.length;ee++)oe[ee](ce);O(Ie,ce,B.sync)}else ve(B)&&(B.prefinished=!0,Ie.emit("prefinish"),B.pendingcb++,e.nextTick(ye,Ie,B))}B.sync=!0,B.pendingcb++;try{Ie._final(Ee)}catch(ce){Ee(ce)}B.sync=!1}function Ne(Ie,B){!B.prefinished&&!B.finalCalled&&(typeof Ie._final=="function"&&!B.destroyed?(B.finalCalled=!0,je(Ie,B)):(B.prefinished=!0,Ie.emit("prefinish")))}function Se(Ie,B,Ce){ve(B)&&(Ne(Ie,B),B.pendingcb===0&&(Ce?(B.pendingcb++,e.nextTick((Ee,ce)=>{ve(ce)?ye(Ee,ce):ce.pendingcb--},Ie,B)):ve(B)&&(B.pendingcb++,ye(Ie,B))))}function ye(Ie,B){B.pendingcb--,B.finished=!0;const Ce=B[M].splice(0);for(let Ee=0;Ee<Ce.length;Ee++)Ce[Ee]();if(Ie.emit("finish"),B.autoDestroy){const Ee=Ie._readableState;(!Ee||Ee.autoDestroy&&(Ee.endEmitted||Ee.readable===!1))&&Ie.destroy()}}i(ie.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ie){this._writableState&&(this._writableState.destroyed=Ie)}},writable:{__proto__:null,get(){const Ie=this._writableState;return!!Ie&&Ie.writable!==!1&&!Ie.destroyed&&!Ie.errored&&!Ie.ending&&!Ie.ended},set(Ie){this._writableState&&(this._writableState.writable=!!Ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ie=this._writableState;return Ie?!Ie.destroyed&&!Ie.ending&&Ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Fe=g.destroy;ie.prototype.destroy=function(Ie,B){const Ce=this._writableState;return!Ce.destroyed&&(Ce.bufferedIndex<Ce.buffered.length||Ce[M].length)&&e.nextTick(se,Ce),Fe.call(this,Ie,B),this},ie.prototype._undestroy=g.undestroy,ie.prototype._destroy=function(Ie,B){B(Ie)},ie.prototype[d.captureRejectionSymbol]=function(Ie){this.destroy(Ie)};let Xe;function Le(){return Xe===void 0&&(Xe={}),Xe}return ie.fromWeb=function(Ie,B){return Le().newStreamWritableFromWritableStream(Ie,B)},ie.toWeb=function(Ie){return Le().newWritableStreamFromStreamWritable(Ie)},FE}var LE,sD;function ise(){if(sD)return LE;sD=1;const e=Bf(),t=od(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:s,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=Bc(),h=ld(),{AbortError:m,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=Pi(),{destroyer:b}=Jp(),w=Rc(),x=e_(),_=dN(),{createDeferredPromise:E}=Xi(),T=s9(),k=globalThis.Blob||t.Blob,R=typeof k<"u"?function(W){return W instanceof k}:function(W){return!1},j=globalThis.AbortController||O0().AbortController,{FunctionPrototypeCall:I}=Qr();class P extends w{constructor(W){super(W),(W==null?void 0:W.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(W==null?void 0:W.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}LE=function M(W,V){if(l(W))return W;if(s(W))return U({readable:W});if(o(W))return U({writable:W});if(i(W))return U({writable:!1,readable:!1});if(u(W))return U({readable:x.fromWeb(W)});if(d(W))return U({writable:_.fromWeb(W)});if(typeof W=="function"){const{value:ae,write:ne,final:q,destroy:te}=O(W);if(a(ae))return T(P,ae,{objectMode:!0,write:ne,final:q,destroy:te});const G=ae==null?void 0:ae.then;if(typeof G=="function"){let J;const Q=I(G,ae,se=>{if(se!=null)throw new v("nully","body",se)},se=>{b(J,se)});return J=new P({objectMode:!0,readable:!1,write:ne,final(se){q(async()=>{try{await Q,e.nextTick(se,null)}catch(fe){e.nextTick(se,fe)}})},destroy:te})}throw new v("Iterable, AsyncIterable or AsyncFunction",V,ae)}if(R(W))return M(W.arrayBuffer());if(a(W))return T(P,W,{objectMode:!0,writable:!1});if(u(W==null?void 0:W.readable)&&d(W==null?void 0:W.writable))return P.fromWeb(W);if(typeof(W==null?void 0:W.writable)=="object"||typeof(W==null?void 0:W.readable)=="object"){const ae=W!=null&&W.readable?s(W==null?void 0:W.readable)?W==null?void 0:W.readable:M(W.readable):void 0,ne=W!=null&&W.writable?o(W==null?void 0:W.writable)?W==null?void 0:W.writable:M(W.writable):void 0;return U({readable:ae,writable:ne})}const ie=W==null?void 0:W.then;if(typeof ie=="function"){let ae;return I(ie,W,ne=>{ne!=null&&ae.push(ne),ae.push(null)},ne=>{b(ae,ne)}),ae=new P({objectMode:!0,writable:!1,read(){}})}throw new g(V,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],W)};function O(M){let{promise:W,resolve:V}=E();const ie=new j,ae=ie.signal;return{value:M(async function*(){for(;;){const q=W;W=null;const{chunk:te,done:G,cb:J}=await q;if(e.nextTick(J),G)return;if(ae.aborted)throw new m(void 0,{cause:ae.reason});({promise:W,resolve:V}=E()),yield te}}(),{signal:ae}),write(q,te,G){const J=V;V=null,J({chunk:q,done:!1,cb:G})},final(q){const te=V;V=null,te({done:!0,cb:q})},destroy(q,te){ie.abort(),te(q)}}}function U(M){const W=M.readable&&typeof M.readable.read!="function"?x.wrap(M.readable):M.readable,V=M.writable;let ie=!!n(W),ae=!!r(V),ne,q,te,G,J;function Q(se){const fe=G;G=null,fe?fe(se):se&&J.destroy(se)}return J=new P({readableObjectMode:!!(W!=null&&W.readableObjectMode),writableObjectMode:!!(V!=null&&V.writableObjectMode),readable:ie,writable:ae}),ae&&(h(V,se=>{ae=!1,se&&b(W,se),Q(se)}),J._write=function(se,fe,ve){V.write(se,fe)?ve():ne=ve},J._final=function(se){V.end(),q=se},V.on("drain",function(){if(ne){const se=ne;ne=null,se()}}),V.on("finish",function(){if(q){const se=q;q=null,se()}})),ie&&(h(W,se=>{ie=!1,se&&b(W,se),Q(se)}),W.on("readable",function(){if(te){const se=te;te=null,se()}}),W.on("end",function(){J.push(null)}),J._read=function(){for(;;){const se=W.read();if(se===null){te=J._read;return}if(!J.push(se))return}}),J._destroy=function(se,fe){!se&&G!==null&&(se=new m),te=null,ne=null,q=null,G===null?fe(se):(G=fe,b(V,se),b(W,se))},J}return LE}var BE,oD;function Rc(){if(oD)return BE;oD=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Qr();BE=s;const a=e_(),i=dN();r(s.prototype,a.prototype),r(s,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const m=d[h];s.prototype[m]||(s.prototype[m]=i.prototype[m])}}function s(d){if(!(this instanceof s))return new s(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(s.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let o;function l(){return o===void 0&&(o={}),o}s.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},s.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return s.from=function(d){return u||(u=ise()),u(d,"body")},BE}var $E,lD;function o9(){if(lD)return $E;lD=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Qr();$E=s;const{ERR_METHOD_NOT_IMPLEMENTED:n}=Pi().codes,r=Rc(),{getHighWaterMark:a}=Q1();e(s.prototype,r.prototype),e(s,r);const i=t("kCallback");function s(u){if(!(this instanceof s))return new s(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function o(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==o&&o.call(this)}return s.prototype._final=o,s.prototype._transform=function(u,d,h){throw new n("_transform()")},s.prototype._write=function(u,d,h){const m=this._readableState,g=this._writableState,v=m.length;this._transform(u,d,(b,w)=>{if(b){h(b);return}w!=null&&this.push(w),g.ended||v===m.length||m.length<m.highWaterMark?h():this[i]=h})},s.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},$E}var zE,cD;function l9(){if(cD)return zE;cD=1;const{ObjectSetPrototypeOf:e}=Qr();zE=n;const t=o9();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},zE}var UE,uD;function fN(){if(uD)return UE;uD=1;const e=Bf(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Qr(),i=ld(),{once:s}=Xi(),o=Jp(),l=Rc(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=Pi(),{validateFunction:w,validateAbortSignal:x}=Iy(),{isIterable:_,isReadable:E,isReadableNodeStream:T,isNodeStream:k,isTransformStream:R,isWebStream:j,isReadableStream:I,isReadableFinished:P}=Bc(),O=globalThis.AbortController||O0().AbortController;let U,M,W;function V(se,fe,ve){let je=!1;se.on("close",()=>{je=!0});const Ne=i(se,{readable:fe,writable:ve},Se=>{je=!Se});return{destroy:Se=>{je||(je=!0,o.destroyer(se,Se||new g("pipe")))},cleanup:Ne}}function ie(se){return w(se[se.length-1],"streams[stream.length - 1]"),se.pop()}function ae(se){if(_(se))return se;if(T(se))return ne(se);throw new d("val",["Readable","Iterable","AsyncIterable"],se)}async function*ne(se){M||(M=e_()),yield*M.prototype[r].call(se)}async function q(se,fe,ve,{end:je}){let Ne,Se=null;const ye=Le=>{if(Le&&(Ne=Le),Se){const Ie=Se;Se=null,Ie()}},Fe=()=>new n((Le,Ie)=>{Ne?Ie(Ne):Se=()=>{Ne?Ie(Ne):Le()}});fe.on("drain",ye);const Xe=i(fe,{readable:!1},ye);try{fe.writableNeedDrain&&await Fe();for await(const Le of se)fe.write(Le)||await Fe();je&&(fe.end(),await Fe()),ve()}catch(Le){ve(Ne!==Le?u(Ne,Le):Le)}finally{Xe(),fe.off("drain",ye)}}async function te(se,fe,ve,{end:je}){R(fe)&&(fe=fe.writable);const Ne=fe.getWriter();try{for await(const Se of se)await Ne.ready,Ne.write(Se).catch(()=>{});await Ne.ready,je&&await Ne.close(),ve()}catch(Se){try{await Ne.abort(Se),ve(Se)}catch(ye){ve(ye)}}}function G(...se){return J(se,s(ie(se)))}function J(se,fe,ve){if(se.length===1&&t(se[0])&&(se=se[0]),se.length<2)throw new m("streams");const je=new O,Ne=je.signal,Se=ve==null?void 0:ve.signal,ye=[];x(Se,"options.signal");function Fe(){ce(new b)}W=W||Xi().addAbortListener;let Xe;Se&&(Xe=W(Se,Fe));let Le,Ie;const B=[];let Ce=0;function Ee(ke){ce(ke,--Ce===0)}function ce(ke,We){var Nt;if(ke&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=ke),!(!Le&&!We)){for(;B.length;)B.shift()(Le);(Nt=Xe)===null||Nt===void 0||Nt[a](),je.abort(),We&&(Le||ye.forEach(it=>it()),e.nextTick(fe,Le,Ie))}}let oe;for(let ke=0;ke<se.length;ke++){const We=se[ke],Nt=ke<se.length-1,it=ke>0,Ct=Nt||(ve==null?void 0:ve.end)!==!1,Ft=ke===se.length-1;if(k(We)){let Mt=function(Zt){Zt&&Zt.name!=="AbortError"&&Zt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Ee(Zt)};var Pe=Mt;if(Ct){const{destroy:Zt,cleanup:be}=V(We,Nt,it);B.push(Zt),E(We)&&Ft&&ye.push(be)}We.on("error",Mt),E(We)&&Ft&&ye.push(()=>{We.removeListener("error",Mt)})}if(ke===0)if(typeof We=="function"){if(oe=We({signal:Ne}),!_(oe))throw new h("Iterable, AsyncIterable or Stream","source",oe)}else _(We)||T(We)||R(We)?oe=We:oe=l.from(We);else if(typeof We=="function"){if(R(oe)){var ee;oe=ae((ee=oe)===null||ee===void 0?void 0:ee.readable)}else oe=ae(oe);if(oe=We(oe,{signal:Ne}),Nt){if(!_(oe,!0))throw new h("AsyncIterable",`transform[${ke-1}]`,oe)}else{var _e;U||(U=l9());const Mt=new U({objectMode:!0}),Zt=(_e=oe)===null||_e===void 0?void 0:_e.then;if(typeof Zt=="function")Ce++,Zt.call(oe,Z=>{Ie=Z,Z!=null&&Mt.write(Z),Ct&&Mt.end(),e.nextTick(Ee)},Z=>{Mt.destroy(Z),e.nextTick(Ee,Z)});else if(_(oe,!0))Ce++,q(oe,Mt,Ee,{end:Ct});else if(I(oe)||R(oe)){const Z=oe.readable||oe;Ce++,q(Z,Mt,Ee,{end:Ct})}else throw new h("AsyncIterable or Promise","destination",oe);oe=Mt;const{destroy:be,cleanup:D}=V(oe,!1,!0);B.push(be),Ft&&ye.push(D)}}else if(k(We)){if(T(oe)){Ce+=2;const Mt=Q(oe,We,Ee,{end:Ct});E(We)&&Ft&&ye.push(Mt)}else if(R(oe)||I(oe)){const Mt=oe.readable||oe;Ce++,q(Mt,We,Ee,{end:Ct})}else if(_(oe))Ce++,q(oe,We,Ee,{end:Ct});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else if(j(We)){if(T(oe))Ce++,te(ae(oe),We,Ee,{end:Ct});else if(I(oe)||_(oe))Ce++,te(oe,We,Ee,{end:Ct});else if(R(oe))Ce++,te(oe.readable,We,Ee,{end:Ct});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else oe=l.from(We)}return(Ne!=null&&Ne.aborted||Se!=null&&Se.aborted)&&e.nextTick(Fe),oe}function Q(se,fe,ve,{end:je}){let Ne=!1;if(fe.on("close",()=>{Ne||ve(new v)}),se.pipe(fe,{end:!1}),je){let ye=function(){Ne=!0,fe.end()};var Se=ye;P(se)?e.nextTick(ye):se.once("end",ye)}else ve();return i(se,{readable:!0,writable:!1},ye=>{const Fe=se._readableState;ye&&ye.code==="ERR_STREAM_PREMATURE_CLOSE"&&Fe&&Fe.ended&&!Fe.errored&&!Fe.errorEmitted?se.once("end",ve).once("error",ve):ve(ye)}),i(fe,{readable:!1,writable:!0},ve)}return UE={pipelineImpl:J,pipeline:G},UE}var VE,dD;function c9(){if(dD)return VE;dD=1;const{pipeline:e}=fN(),t=Rc(),{destroyer:n}=Jp(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:s,isTransformStream:o,isWritableStream:l,isReadableStream:u}=Bc(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:m}}=Pi(),g=ld();return VE=function(...b){if(b.length===0)throw new m("streams");if(b.length===1)return t.from(b[0]);const w=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const U=b.length-1;b[U]=t.from(b[U])}for(let U=0;U<b.length;++U)if(!(!r(b[U])&&!s(b[U]))){if(U<b.length-1&&!(a(b[U])||u(b[U])||o(b[U])))throw new h(`streams[${U}]`,w[U],"must be readable");if(U>0&&!(i(b[U])||l(b[U])||o(b[U])))throw new h(`streams[${U}]`,w[U],"must be writable")}let x,_,E,T,k;function R(U){const M=T;T=null,M?M(U):U?k.destroy(U):!O&&!P&&k.destroy()}const j=b[0],I=e(b,R),P=!!(i(j)||l(j)||o(j)),O=!!(a(I)||u(I)||o(I));if(k=new t({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(I!=null&&I.readableObjectMode),writable:P,readable:O}),P){if(r(j))k._write=function(M,W,V){j.write(M,W)?V():x=V},k._final=function(M){j.end(),_=M},j.on("drain",function(){if(x){const M=x;x=null,M()}});else if(s(j)){const W=(o(j)?j.writable:j).getWriter();k._write=async function(V,ie,ae){try{await W.ready,W.write(V).catch(()=>{}),ae()}catch(ne){ae(ne)}},k._final=async function(V){try{await W.ready,W.close().catch(()=>{}),_=V}catch(ie){V(ie)}}}const U=o(I)?I.readable:I;g(U,()=>{if(_){const M=_;_=null,M()}})}if(O){if(r(I))I.on("readable",function(){if(E){const U=E;E=null,U()}}),I.on("end",function(){k.push(null)}),k._read=function(){for(;;){const U=I.read();if(U===null){E=k._read;return}if(!k.push(U))return}};else if(s(I)){const M=(o(I)?I.readable:I).getReader();k._read=async function(){for(;;)try{const{value:W,done:V}=await M.read();if(!k.push(W))return;if(V){k.push(null);return}}catch{return}}}}return k._destroy=function(U,M){!U&&T!==null&&(U=new d),E=null,x=null,_=null,T===null?M(U):(T=M,r(I)&&n(I,U))},k},VE}var fD;function sse(){if(fD)return cw;fD=1;const e=globalThis.AbortController||O0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=Pi(),{validateAbortSignal:s,validateInteger:o,validateObject:l}=Iy(),u=Qr().Symbol("kWeak"),d=Qr().Symbol("kResistStopPropagation"),{finished:h}=ld(),m=c9(),{addAbortSignalNoValidate:g}=J1(),{isWritable:v,isNodeStream:b}=Bc(),{deprecate:w}=Xi(),{ArrayPrototypePush:x,Boolean:_,MathFloor:E,Number:T,NumberIsNaN:k,Promise:R,PromiseReject:j,PromiseResolve:I,PromisePrototypeThen:P,Symbol:O}=Qr(),U=O("kEmpty"),M=O("kEof");function W(Se,ye){if(ye!=null&&l(ye,"options"),(ye==null?void 0:ye.signal)!=null&&s(ye.signal,"options.signal"),b(Se)&&!v(Se))throw new t("stream",Se,"must be writable");const Fe=m(this,Se);return ye!=null&&ye.signal&&g(ye.signal,Fe),Fe}function V(Se,ye){if(typeof Se!="function")throw new n("fn",["Function","AsyncFunction"],Se);ye!=null&&l(ye,"options"),(ye==null?void 0:ye.signal)!=null&&s(ye.signal,"options.signal");let Fe=1;(ye==null?void 0:ye.concurrency)!=null&&(Fe=E(ye.concurrency));let Xe=Fe-1;return(ye==null?void 0:ye.highWaterMark)!=null&&(Xe=E(ye.highWaterMark)),o(Fe,"options.concurrency",1),o(Xe,"options.highWaterMark",0),Xe+=Fe,(async function*(){const Ie=Xi().AbortSignalAny([ye==null?void 0:ye.signal].filter(_)),B=this,Ce=[],Ee={signal:Ie};let ce,oe,ee=!1,_e=0;function Pe(){ee=!0,ke()}function ke(){_e-=1,We()}function We(){oe&&!ee&&_e<Fe&&Ce.length<Xe&&(oe(),oe=null)}async function Nt(){try{for await(let it of B){if(ee)return;if(Ie.aborted)throw new i;try{if(it=Se(it,Ee),it===U)continue;it=I(it)}catch(Ct){it=j(Ct)}_e+=1,P(it,ke,Pe),Ce.push(it),ce&&(ce(),ce=null),!ee&&(Ce.length>=Xe||_e>=Fe)&&await new R(Ct=>{oe=Ct})}Ce.push(M)}catch(it){const Ct=j(it);P(Ct,ke,Pe),Ce.push(Ct)}finally{ee=!0,ce&&(ce(),ce=null)}}Nt();try{for(;;){for(;Ce.length>0;){const it=await Ce[0];if(it===M)return;if(Ie.aborted)throw new i;it!==U&&(yield it),Ce.shift(),We()}await new R(it=>{ce=it})}}finally{ee=!0,oe&&(oe(),oe=null)}}).call(this)}function ie(Se=void 0){return Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&s(Se.signal,"options.signal"),(async function*(){let Fe=0;for await(const Le of this){var Xe;if(Se!=null&&(Xe=Se.signal)!==null&&Xe!==void 0&&Xe.aborted)throw new i({cause:Se.signal.reason});yield[Fe++,Le]}}).call(this)}async function ae(Se,ye=void 0){for await(const Fe of G.call(this,Se,ye))return!0;return!1}async function ne(Se,ye=void 0){if(typeof Se!="function")throw new n("fn",["Function","AsyncFunction"],Se);return!await ae.call(this,async(...Fe)=>!await Se(...Fe),ye)}async function q(Se,ye){for await(const Fe of G.call(this,Se,ye))return Fe}async function te(Se,ye){if(typeof Se!="function")throw new n("fn",["Function","AsyncFunction"],Se);async function Fe(Xe,Le){return await Se(Xe,Le),U}for await(const Xe of V.call(this,Fe,ye));}function G(Se,ye){if(typeof Se!="function")throw new n("fn",["Function","AsyncFunction"],Se);async function Fe(Xe,Le){return await Se(Xe,Le)?Xe:U}return V.call(this,Fe,ye)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function Q(Se,ye,Fe){var Xe;if(typeof Se!="function")throw new n("reducer",["Function","AsyncFunction"],Se);Fe!=null&&l(Fe,"options"),(Fe==null?void 0:Fe.signal)!=null&&s(Fe.signal,"options.signal");let Le=arguments.length>1;if(Fe!=null&&(Xe=Fe.signal)!==null&&Xe!==void 0&&Xe.aborted){const ce=new i(void 0,{cause:Fe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(ce)),ce}const Ie=new e,B=Ie.signal;if(Fe!=null&&Fe.signal){const ce={once:!0,[u]:this,[d]:!0};Fe.signal.addEventListener("abort",()=>Ie.abort(),ce)}let Ce=!1;try{for await(const ce of this){var Ee;if(Ce=!0,Fe!=null&&(Ee=Fe.signal)!==null&&Ee!==void 0&&Ee.aborted)throw new i;Le?ye=await Se(ye,ce,{signal:B}):(ye=ce,Le=!0)}if(!Ce&&!Le)throw new J}finally{Ie.abort()}return ye}async function se(Se){Se!=null&&l(Se,"options"),(Se==null?void 0:Se.signal)!=null&&s(Se.signal,"options.signal");const ye=[];for await(const Xe of this){var Fe;if(Se!=null&&(Fe=Se.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new i(void 0,{cause:Se.signal.reason});x(ye,Xe)}return ye}function fe(Se,ye){const Fe=V.call(this,Se,ye);return(async function*(){for await(const Le of Fe)yield*Le}).call(this)}function ve(Se){if(Se=T(Se),k(Se))return 0;if(Se<0)throw new a("number",">= 0",Se);return Se}function je(Se,ye=void 0){return ye!=null&&l(ye,"options"),(ye==null?void 0:ye.signal)!=null&&s(ye.signal,"options.signal"),Se=ve(Se),(async function*(){var Xe;if(ye!=null&&(Xe=ye.signal)!==null&&Xe!==void 0&&Xe.aborted)throw new i;for await(const Ie of this){var Le;if(ye!=null&&(Le=ye.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Se--<=0&&(yield Ie)}}).call(this)}function Ne(Se,ye=void 0){return ye!=null&&l(ye,"options"),(ye==null?void 0:ye.signal)!=null&&s(ye.signal,"options.signal"),Se=ve(Se),(async function*(){var Xe;if(ye!=null&&(Xe=ye.signal)!==null&&Xe!==void 0&&Xe.aborted)throw new i;for await(const Ie of this){var Le;if(ye!=null&&(Le=ye.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Se-- >0&&(yield Ie),Se<=0)return}}).call(this)}return cw.streamReturningOperators={asIndexedPairs:w(ie,"readable.asIndexedPairs will be removed in a future version."),drop:je,filter:G,flatMap:fe,map:V,take:Ne,compose:W},cw.promiseReturningOperators={every:ne,forEach:te,reduce:Q,toArray:se,some:ae,find:q},cw}var HE,hD;function u9(){if(hD)return HE;hD=1;const{ArrayPrototypePop:e,Promise:t}=Qr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Bc(),{pipelineImpl:i}=fN(),{finished:s}=ld();d9();function o(...l){return new t((u,d)=>{let h,m;const g=l[l.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(l);h=v.signal,m=v.end}i(l,(v,b)=>{v?d(v):u(b)},{signal:h,end:m})})}return HE={finished:s,pipeline:o},HE}var pD;function d9(){if(pD)return wE.exports;pD=1;const{Buffer:e}=od(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Qr(),{promisify:{custom:a}}=Xi(),{streamReturningOperators:i,promiseReturningOperators:s}=sse(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=Pi(),l=c9(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Q1(),{pipeline:h}=fN(),{destroyer:m}=Jp(),g=ld(),v=u9(),b=Bc(),w=wE.exports=cN().Stream;w.isDestroyed=b.isDestroyed,w.isDisturbed=b.isDisturbed,w.isErrored=b.isErrored,w.isReadable=b.isReadable,w.isWritable=b.isWritable,w.Readable=e_();for(const E of n(i)){let k=function(...R){if(new.target)throw o();return w.Readable.from(r(T,this,R))};var _=k;const T=i[E];t(k,"name",{__proto__:null,value:T.name}),t(k,"length",{__proto__:null,value:T.length}),t(w.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(s)){let k=function(...j){if(new.target)throw o();return r(T,this,j)};var _=k;const T=s[E];t(k,"name",{__proto__:null,value:T.name}),t(k,"length",{__proto__:null,value:T.length}),t(w.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}w.Writable=dN(),w.Duplex=Rc(),w.Transform=o9(),w.PassThrough=l9(),w.pipeline=h;const{addAbortSignal:x}=J1();return w.addAbortSignal=x,w.finished=g,w.destroy=m,w.compose=l,w.setDefaultHighWaterMark=u,w.getDefaultHighWaterMark=d,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),w.Stream=w,w._isUint8Array=function(T){return T instanceof Uint8Array},w._uint8ArrayToBuffer=function(T){return e.from(T.buffer,T.byteOffset,T.byteLength)},wE.exports}var mD;function ose(){return mD||(mD=1,function(e){const t=d9(),n=u9(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(vE)),vE.exports}var f9=ose();class hN extends f9.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(lt.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class pN extends f9.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(mi(new Ue(lt.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(mi(new Ue(lt.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(lt.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(lt.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(lt.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var eo=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},to=function(e){return function(t){function n(s){t.error=t.hasError?new e(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(s).then(i,function(o){return n(o),i()})}else a|=1}catch(o){n(o)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class vi{get position(){return this.flag&wf?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=Si(t,n);Object.assign(this,Rf(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&K1||this.inode.flags&Wi.Sync)}_emitChange(){ai(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,HL(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=id(t,-1);if(n<0)throw new Ue(lt.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>Nr?-61441:Nr)|n,(this._isSync||n>Nr)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(lt.EINVAL);if(this.dirty=!0,!(this.flag&pi||this.flag&pc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Nx(t),this.inode.mtimeMs=Nx(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=mc(n,"utf8","a",420);if(!(gc(r.flag)&wf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&pi)throw new Ue(lt.EPERM,"File not opened with a readable mode");this.inode.flags&Wi.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!j0(this.inode)&&!I0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,s.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=mc(t,null,"r",292);if(gc(n.flag)&pi)throw new Ue(lt.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),s=Lr.from(i);return n.encoding?s.toString(n.encoding):s}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&pi)throw Ue.With("EBADF",this.path,"readLines");return Tie({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!gr(this.context,this.inode,Ra))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new Pf(this.inode):new Lc(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"write");if(!(this.flag&pi||this.flag&pc))throw new Ue(lt.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,s=t.subarray(n,n+r);return!j0(this.inode)&&!I0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+s.byteLength,await this.fs.write(this.internalPath,s,a),this._isSync&&await this.sync(),s.byteLength}async write(t,n,r,a){let i,s,o;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,s=0,i=Lr.from(t,typeof r=="string"?r:"utf8"),o=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),s=n??0,o=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,s,o,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=mc(n,"utf8","w",420),a=gc(r.flag);if(!(a&pi||a&pc))throw new Ue(lt.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const i=typeof t=="string"?Lr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),WL(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&pi)throw Ue.With("EBADF",this.path,"createReadStream");return new hN(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Wi.Immutable)throw new Ue(lt.EPERM,"File is immutable",this.path,"createWriteStream");return new pN(t,this)}}async function h9(e,t){e=pn(e),t=pn(t);const n=qn(e,this),r=qn(t,this);if(!(await Qp.call(this,lr(e))).hasAccess(aa,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),ai(this,"rename",e.toString()),ai(this,"change",t.toString());return}await a_.call(this,t,await r_(e)),await n_.call(this,e),ai(this,"rename",e.toString())}catch(a){throw yr(a,{[n.path]:e,[r.path]:t})}}async function jy(e){try{const{fs:t,path:n}=qn(await cd.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Qp(e,t){e=pn(e);const{fs:n,path:r}=qn(await cd.call(this,e),this);try{const a=await n.stat(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new Pf(a):new Lc(a)}catch(a){throw yr(a,{[r]:e})}}async function t_(e,t){e=pn(e);const{fs:n,path:r}=qn(e,this);try{const a=await n.stat(r);if(Ia&&!gr(this,a,Ra))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new Pf(a):new Lc(a)}catch(a){throw yr(a,{[r]:e})}}async function p9(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await eo(n,await no.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=to(n);r&&await r}}async function n_(e){e=pn(e);const{fs:t,path:n}=qn(e,this);try{if(Ia&&!gr(this,await t.stat(n),aa))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),ai(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}async function em(e,t,n){var r;t=pn(t);const a=id(n.mode,420),i=gc(n.flag),{fullPath:s,fs:o,path:l,stats:u}=await Dx(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&q1))throw Ue.With("ENOENT",s,"_open");const h=await o.stat(lr(l));if(!gr(e,h,aa))throw Ue.With("EACCES",lr(s),"_open");if(!jo(h))throw Ue.With("ENOTDIR",lr(s),"_open");const{euid:m,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:Lo.credentials,v=await o.createFile(l,{mode:a,uid:h.mode&ky?h.uid:m,gid:h.mode&Ay?h.gid:g});return new vi(e,Ix(new Rx(e,t,o,l,i,v)))}if(!gr(e,u,KL(i)))throw Ue.With("EACCES",s,"_open");if(i&G1)throw Ue.With("EEXIST",s,"_open");const d=new vi(e,Ix(new Rx(e,t,o,l,i,u)));return i&W1&&await d.truncate(0),d}async function no(e,t="r",n=420){return await em(this,e,{flag:t,mode:n})}async function r_(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=mc(t,null,"r",292);return await eo(n,typeof e=="object"&&"fd"in e?e:await no.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=to(n);r&&await r}}async function a_(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=mc(n,"utf8","w+",420),i=eo(r,e instanceof vi?e:await no.call(this,e.toString(),a.flag,a.mode),!0),s=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof s!="string"&&!(s instanceof Uint8Array))throw new Ue(lt.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=to(r);a&&await a}}async function m9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=mc(n,"utf8","a",420);if(!(gc(a.flag)&wf))throw new Ue(lt.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(lt.EINVAL,"Encoding not specified");const s=typeof t=="string"?Lr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await eo(r,typeof e=="object"&&"fd"in e?e:await no.call(this,e,a.flag,a.mode),!0).appendFile(s,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=to(r);a&&await a}}async function mN(e){e=await cd.call(this,e);const{fs:t,path:n}=qn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!jo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(Ia&&!gr(this,r,aa))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),ai(this,"rename",e.toString())}catch(r){throw yr(r,{[n]:e})}}async function i_(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:Lo.credentials;t=typeof t=="object"?t:{mode:t};const s=id(t==null?void 0:t.mode,511);e=await cd.call(this,e);const{fs:o,path:l,root:u}=qn(e,this),d={[l]:e},h=async(m,g)=>{if(!gr(this,g,aa))throw Ue.With("EACCES",lr(m),"mkdir");const v=await o.mkdir(m,{mode:s,uid:g.mode&ky?g.uid:a,gid:g.mode&Ay?g.gid:i});return ai(this,"rename",m),v};try{if(!(t!=null&&t.recursive)){await h(l,await o.stat(lr(l)));return}const m=[];for(let v=l,b=e;!await o.exists(v);v=lr(v),b=lr(b))m.unshift(v),d[v]=b;if(!m.length)return;const g=[await o.stat(lr(m[0]))];for(const[v,b]of m.entries())g.push(await h(b,g[v]));return u.length==1?m[0]:(r=m[0])===null||r===void 0?void 0:r.slice(u.length)}catch(m){throw yr(m,d)}}async function $f(e,t){t=typeof t=="object"?t:{encoding:t},e=await cd.call(this,e);const{fs:n,path:r}=qn(e,this),a=await n.stat(r).catch(l=>wr(yr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!gr(this,a,Ra))throw Ue.With("EACCES",e,"readdir");if(!jo(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>wr(yr(l,{[r]:e}))),s=[],o=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(hr(r,l)).catch(d=>{if(d.code!="ENOENT")throw yr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?s.push(new M0(l,u)):(t==null?void 0:t.encoding)=="buffer"?s.push(Lr.from(l)):s.push(l),!(!(t!=null&&t.recursive)||!jo(u))))for(const d of await $f.call(this,hr(e,l),t))d instanceof M0?(d.path=hr(l,d.path),s.push(d)):Lr.isBuffer(d)?s.push(Lr.from(hr(l,zA(d)))):s.push(hr(l,d))};return await Promise.all(i.map(o)),s}async function g9(e,t){e=pn(e),t=pn(t);const{fs:n,path:r}=qn(e,this),a=qn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(Ia&&!gr(this,await n.stat(lr(r)),Ra))throw Ue.With("EACCES",lr(r),"link");if(Ia&&!(await Qp.call(this,lr(t))).hasAccess(aa,this))throw Ue.With("EACCES",lr(t),"link");if(Ia&&!gr(this,await n.stat(r),Ra))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw yr(i,{[a.path]:t,[r]:e})}}async function y9(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(lt.EINVAL,"Invalid symlink type: "+n);if(t=pn(t),await jy.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=eo(r,await em(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(pn(e,!0)),await a.chmod(Fc)}catch(a){r.error=a,r.hasError=!0}finally{const a=to(r);a&&await a}}async function jx(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await eo(n,await em(this,pn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=to(n);r&&await r}}async function b9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await eo(r,await no.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=to(r);a&&await a}}async function v9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await eo(r,await em(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=to(r);a&&await a}}async function w9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await eo(n,await no.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=to(n);r&&await r}}async function x9(e,t){const n={stack:[],error:void 0,hasError:!1};try{await eo(n,await em(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=to(n);r&&await r}}async function gN(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await eo(r,await no.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=to(r);a&&await a}}async function _9(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await eo(r,await em(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=to(r);a&&await a}}async function Dx(e,t,n){if(n){const l=qn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=qn(t,e),u=await l.fs.stat(l.path);if(!_p(u))return{...l,fullPath:t,stats:u};const d=Nc.call(e,lr(t),(await jx.call(e,t)).toString());return await Dx(e,d)}catch{}const{base:r,dir:a}=ll(t),i=a=="/"?"/":await cd.call(e,a),s=hr(i,r),o=qn(s,e);try{const l=await o.fs.stat(o.path);if(!_p(l))return{...o,fullPath:s,stats:l};const u=Nc.call(e,i,(await jx.call(e,s)).toString());return await Dx(e,u)}catch(l){if(l.code=="ENOENT")return{...o,fullPath:t};throw yr(l,{[o.path]:s})}}async function cd(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=pn(e);const{fullPath:a}=await Dx(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Lr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function lse(e,t={}){const n=new JL(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(s,o)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:s,filename:o},done:!1})});function i(){a=!0,n.close();for(const s of r)s({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:s,resolve:o}=Promise.withResolvers();return r.push(o),s},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function S9(e,t=KA){if(!(await Qp.call(this,e)).hasAccess(t,this))throw new Ue(lt.EACCES)}async function yN(e,t){e=pn(e);const n=await t_.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&Nr){case _a:if(t!=null&&t.recursive)for(const r of await $f.call(this,e))await yN.call(this,hr(e,r),t);await mN.call(this,e);break;case Eo:case Fc:case Df:case Mf:await n_.call(this,e);break;case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}}async function E9(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await i_.call(this,a),n=="buffer"?Lr.from(a):a}async function bN(e,t,n){if(e=pn(e),t=pn(t),n&&n&ZA&&await jy.call(this,t))throw new Ue(lt.EEXIST,"Destination file already exists",t,"copyFile");await a_.call(this,t,await r_.call(this,e)),ai(this,"rename",t.toString())}function C9(e,t){return e=pn(e),Promise.resolve(new lN(e,this))}async function vN(e,t,n){e=pn(e),t=pn(t);const r=await t_.call(this,e);if(n!=null&&n.errorOnExist&&await jy.call(this,t))throw new Ue(lt.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Nr){case _a:{if(!(n!=null&&n.recursive))throw new Ue(lt.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([$f.call(this,e,{withFileTypes:!0}),i_.call(this,t,{recursive:!0})]),i=async s=>{n.filter&&!n.filter(hr(e,s.name),hr(t,s.name))||await vN.call(this,hr(e,s.name),hr(t,s.name),n)};await Promise.all(a.map(i));break}case Eo:case Fc:await bN.call(this,e,t);break;case Df:case Mf:case Of:case jf:default:throw new Ue(lt.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await gN.call(this,t,r.atime,r.mtime)}async function T9(e,t){e=pn(e);const{fs:n}=qn(e,this);return Promise.resolve(YL(n,t==null?void 0:t.bigint))}function k9(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(o=>(o=o.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${o}$`)));async function*s(o){const l=await $f(o,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:o+"/"+u;a(r?u:d)||((await Qp(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*s(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return s(n)}const cse=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:vi,access:S9,appendFile:m9,chmod:w9,chown:b9,constants:UL,copyFile:bN,cp:vN,exists:jy,glob:k9,lchmod:x9,lchown:v9,link:g9,lstat:t_,lutimes:_9,mkdir:i_,mkdtemp:E9,open:no,opendir:C9,readFile:r_,readdir:$f,readlink:jx,realpath:cd,rename:h9,rm:yN,rmdir:mN,stat:Qp,statfs:T9,symlink:y9,truncate:p9,unlink:n_,utimes:gN,watch:lse,writeFile:a_},Symbol.toStringTag,{value:"Module"})),Dn=()=>{};async function use(e){const t=[];for await(const n of e)t.push(n);return t}function dse(e,t,n=Dn){h9.call(this,e,t).then(()=>n()).catch(n)}function fse(e,t=Dn){jy.call(this,e).then(t).catch(()=>t(!1))}function hse(e,t,n=Dn){n=typeof t=="function"?t:n,Qp.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function pse(e,t,n=Dn){n=typeof t=="function"?t:n,t_.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function mse(e,t=0,n=Dn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;p9.call(this,e,r).then(()=>n()).catch(n)}function gse(e,t=Dn){n_.call(this,e).then(()=>t()).catch(t)}function yse(e,t,n,r=Dn){const a=id(n,420);r=typeof n=="function"?n:r,no.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function bse(e,t,n=Dn){n=typeof t=="function"?t:n,r_.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function vse(e,t,n,r=Dn){r=typeof n=="function"?n:r,a_.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function wse(e,t,n,r=Dn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,m9.call(this,e,t,a).then(()=>r()).catch(r)}function xse(e,t,n=Dn){n=typeof t=="function"?t:n,new vi(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new Pf(r):r)).catch(n)}function _se(e,t=Dn){new vi(this,e).close().then(()=>t()).catch(t)}function Sse(e,t,n=Dn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new vi(this,e);if(r<0)throw new Ue(lt.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function Ese(e,t=Dn){new vi(this,e).sync().then(()=>t()).catch(t)}function Cse(e,t=Dn){new vi(this,e).datasync().then(()=>t()).catch(t)}function Tse(e,t,n,r,a,i=Dn){let s,o,l,u,d;const h=new vi(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(lt.EINVAL,"Invalid arguments"));return}s=Lr.from(t),o=0,l=s.length;const m=i;h.write(s,o,l,u).then(({bytesWritten:g})=>m(void 0,g,s.toString(d))).catch(m)}else{s=Lr.from(t.buffer),o=n,l=r,u=typeof a=="number"?a:null;const m=typeof a=="function"?a:i;h.write(s,o,l,u).then(({bytesWritten:g})=>m(void 0,g,s)).catch(m)}}function kse(e,t,n,r,a,i=Dn){new vi(this,e).read(t,n,r,a).then(({bytesRead:s,buffer:o})=>i(void 0,s,o)).catch(i)}function Ase(e,t,n,r=Dn){new vi(this,e).chown(t,n).then(()=>r()).catch(r)}function Nse(e,t,n){new vi(this,e).chmod(t).then(()=>n()).catch(n)}function Rse(e,t,n,r=Dn){new vi(this,e).utimes(t,n).then(()=>r()).catch(r)}function Ise(e,t=Dn){mN.call(this,e).then(()=>t()).catch(t)}function jse(e,t,n=Dn){i_.call(this,e,t).then(()=>n()).catch(n)}function Dse(e,t,n=Dn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};$f.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function Mse(e,t,n=Dn){g9.call(this,e,t).then(()=>n()).catch(n)}function Ose(e,t,n,r=Dn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,y9.call(this,e,t,a).then(()=>r()).catch(r)}function Pse(e,t,n=Dn){n=typeof t=="function"?t:n,jx.call(this,e).then(r=>n(void 0,r)).catch(n)}function Fse(e,t,n,r=Dn){b9.call(this,e,t,n).then(()=>r()).catch(r)}function Lse(e,t,n,r=Dn){v9.call(this,e,t,n).then(()=>r()).catch(r)}function Bse(e,t,n=Dn){w9.call(this,e,t).then(()=>n()).catch(n)}function $se(e,t,n=Dn){x9.call(this,e,t).then(()=>n()).catch(n)}function zse(e,t,n,r=Dn){gN.call(this,e,t,n).then(()=>r()).catch(r)}function Use(e,t,n,r=Dn){_9.call(this,e,t,n).then(()=>r()).catch(r)}function Vse(e,t,n=Dn){n=typeof t=="function"?t:n,cd.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Hse(e,t,n=Dn){const r=typeof t=="number"?t:Ra;n=typeof t=="function"?t:n,S9.call(this,e,r).then(()=>n()).catch(n)}const Zh=new Map;function qse(e,t,n){const r=pn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(lt.EINVAL,"No listener specified",e.toString(),"watchFile");if(Zh.has(r)){const s=Zh.get(r);s&&s.listeners.add(n);return}const i=new Iie(this,r,a);i.on("change",(s,o)=>{const l=Zh.get(r);if(l)for(const u of l.listeners)u(s,o)}),Zh.set(r,{watcher:i,listeners:new Set})}function Gse(e,t=Dn){const n=pn(e),r=Zh.get(n);r&&(t&&t!==Dn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Zh.delete(n)))}function Wse(e,t,n){const r=new JL(this,pn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Dn),r}function Kse(e,t){t=typeof t=="object"?t:{encoding:t};const n=no.call(this,e,"r",t==null?void 0:t.mode);return new hN({...t,autoClose:!0},n)}function Zse(e,t){t=typeof t=="object"?t:{encoding:t};const n=no.call(this,e,"w",t==null?void 0:t.mode);return new pN(t,n)}function Yse(e,t,n=Dn){n=typeof t=="function"?t:n,yN.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function Xse(e,t,n=Dn){n=typeof t=="function"?t:n,E9.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function Jse(e,t,n,r=Dn){r=typeof n=="function"?n:r,bN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function Qse(e,t,n,r=Dn){r=typeof n=="function"?n:r,new vi(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function eoe(e,t,n,r=Dn){r=typeof n=="function"?n:r,new vi(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function toe(e,t,n=Dn){n=typeof t=="function"?t:n,C9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function noe(e,t,n,r=Dn){r=typeof n=="function"?n:r,vN.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function roe(e,t,n=Dn){n=typeof t=="function"?t:n,T9.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function aoe(e,t){const n=await no.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function ioe(e,t,n=Dn){n=typeof t=="function"?t:n;const r=k9.call(this,e,typeof t=="function"?void 0:t);use(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var Ud=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},ms=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},soe=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Mx;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Mx||(Mx={}));let A9=(()=>{var e,t,n,r,a;let i=[If()],s,o=[],l,u,d=[],h=[],m,g=[],v=[],b,w=[],x=[],_,E=[],T=[],k,R=[],j=[],I,P=[],O=[];return l=class{constructor(U=wr(new Ue(lt.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=ms(this,d,0),this.extsize=(ms(this,h),ms(this,g,0)),this.nextents=(ms(this,v),ms(this,w,0)),this.projid=(ms(this,x),ms(this,E,0)),this.cowextsize=(ms(this,T),ms(this,R,0)),this.pad=(ms(this,j),ms(this,P,[])),ms(this,O),this.extsize=U.size,this.nextents=1,this.projid=U.uid,this.cowextsize=U.size;for(const M of Object.keys(Wi))U.flags&Wi[M]&&M in Mx&&(this.xflags|=Mx[M])}},soe(l,"fsxattr"),(()=>{const U=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=_n).uint32.bind(e)],m=[(t=_n).uint32.bind(t)],b=[(n=_n).uint32.bind(n)],_=[(r=_n).uint32.bind(r)],k=[(a=_n).uint32.bind(a)],I=[_n.char(8)],Ud(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:M=>"xflags"in M,get:M=>M.xflags,set:(M,W)=>{M.xflags=W}},metadata:U},d,h),Ud(null,null,m,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:M=>"extsize"in M,get:M=>M.extsize,set:(M,W)=>{M.extsize=W}},metadata:U},g,v),Ud(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:M=>"nextents"in M,get:M=>M.nextents,set:(M,W)=>{M.nextents=W}},metadata:U},w,x),Ud(null,null,_,{kind:"field",name:"projid",static:!1,private:!1,access:{has:M=>"projid"in M,get:M=>M.projid,set:(M,W)=>{M.projid=W}},metadata:U},E,T),Ud(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:M=>"cowextsize"in M,get:M=>M.cowextsize,set:(M,W)=>{M.cowextsize=W}},metadata:U},R,j),Ud(null,null,I,{kind:"field",name:"pad",static:!1,private:!1,access:{has:M=>"pad"in M,get:M=>M.pad,set:(M,W)=>{M.pad=W}},metadata:U},P,O),Ud(null,s={value:l},i,{kind:"class",name:l.name,metadata:U},null,o),l=s.value,U&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:U}),ms(l,o)})(),l})();var Vr;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})(Vr||(Vr={}));var bo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(bo||(bo={}));async function ooe(e,t,...n){e=pn(e);const{fs:r,path:a}=qn(e,this);try{const i=new xa(await r.stat(a));switch(t){case Vr.GetFlags:case bo.GetFlags:return i.flags;case Vr.SetFlags:case bo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case Vr.GetVersion:case bo.GetVersion:return i.version;case Vr.SetVersion:case bo.SetVersion:i.version=n[0],await r.touch(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new A9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw yr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function loe(e,t,...n){e=pn(e);const{fs:r,path:a}=qn(e,this);try{const i=new xa(r.statSync(a));switch(t){case Vr.GetFlags:case bo.GetFlags:return i.flags;case Vr.SetFlags:case bo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case Vr.GetVersion:case bo.GetVersion:return i.version;case Vr.SetVersion:case bo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case Vr.Fiemap:break;case Vr.GetXattr:return new A9(i);case Vr.SetXattr:break;case Vr.GetLabel:return r.label;case Vr.SetLabel:r.label=n[0];return;case Vr.GetUUID:return r.uuid;case Vr.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw yr(i,{[a]:e})}throw new Ue(lt.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const coe=[];function tm(e,t,n,r){if(!t.startsWith("user.")&&!coe.includes(t))throw new Ue(lt.EPERM,"Only attributes in the user namespace are supported",n,r)}async function uoe(e,t,n={}){var r;e=pn(e);const{fs:a,path:i}=qn(e,this);tm(this,t,e,"xattr.get");try{const s=await a.stat(i);if(Ia&&!gr(this,s,Ra))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Gu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw yr(s,{[i]:e})}}function doe(e,t,n={}){var r;e=pn(e),tm(this,t,e,"xattr.get");const{fs:a,path:i}=qn(e,this);try{const s=a.statSync(i);if(Ia&&!gr(this,s,Ra))throw Ue.With("EACCES",i,"xattr.get");(r=s.attributes)!==null&&r!==void 0||(s.attributes=new Gu);const o=s.attributes.get(t);if(!o)throw Ue.With("ENODATA",i,"xattr.get");const l=Lr.from(o.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(s){throw yr(s,{[i]:e})}}async function foe(e,t,n,r={}){var a;e=pn(e);const{fs:i,path:s}=qn(e,this);tm(this,t,e,"xattr.set");try{const o=await i.stat(s);if(Ia&&!gr(this,o,aa))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Gu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),await i.touch(s,Rf(o,"attributes"))}catch(o){throw yr(o,{[s]:e})}}function hoe(e,t,n,r={}){var a;e=pn(e);const{fs:i,path:s}=qn(e,this);tm(this,t,e,"xattr.set");try{const o=i.statSync(s);if(Ia&&!gr(this,o,aa))throw Ue.With("EACCES",s,"xattr.set");(a=o.attributes)!==null&&a!==void 0||(o.attributes=new Gu);const l=o.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",s,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",s,"xattr.set");o.attributes.set(t,Lr.from(n)),i.touchSync(s,Rf(o,"attributes"))}catch(o){throw yr(o,{[s]:e})}}async function poe(e,t){var n;e=pn(e);const{fs:r,path:a}=qn(e,this);tm(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(Ia&&!gr(this,i,aa))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Gu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Rf(i,"attributes"))}catch(i){throw yr(i,{[a]:e})}}function moe(e,t){var n;e=pn(e);const{fs:r,path:a}=qn(e,this);tm(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(Ia&&!gr(this,i,aa))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new Gu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Rf(i,"attributes"))}catch(i){throw yr(i,{[a]:e})}}async function goe(e){e=pn(e);const{fs:t,path:n}=qn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw yr(r,{[n]:e})}}function yoe(e){e=pn(e);const{fs:t,path:n}=qn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw yr(r,{[n]:e})}}const boe=Object.freeze(Object.defineProperty({__proto__:null,get:uoe,getSync:doe,list:goe,listSync:yoe,remove:poe,removeSync:moe,set:foe,setSync:hoe},Symbol.toStringTag,{value:"Module"})),Ya=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:hie,Dir:lN,Dirent:M0,get IOC(){return Vr},get IOC32(){return bo},ReadStream:hN,Stats:Lc,StatsFs:fie,WriteStream:pN,access:Hse,accessSync:Yie,appendFile:wse,appendFileSync:Pie,chmod:Bse,chmodSync:Wie,chown:Fse,chownSync:qie,chroot:Nie,close:_se,closeSync:Lf,constants:UL,copyFile:Jse,copyFileSync:r9,cp:noe,cpSync:a9,createReadStream:Kse,createWriteStream:Zse,exists:fse,existsSync:QA,fchmod:Nse,fchmodSync:iN,fchown:Ase,fchownSync:aN,fdatasync:Cse,fdatasyncSync:$ie,fstat:xse,fstatSync:Fie,fsync:Ese,fsyncSync:Bie,ftruncate:Sse,ftruncateSync:Lie,futimes:Rse,futimesSync:sN,glob:ioe,globSync:nse,ioctl:ooe,ioctlSync:loe,lchmod:$se,lchmodSync:Kie,lchown:Lse,lchownSync:Gie,link:Mse,linkSync:Vie,lopenSync:Y1,lstat:pse,lstatSync:eN,lutimes:Use,lutimesSync:Zie,mkdir:jse,mkdirSync:oN,mkdtemp:Xse,mkdtempSync:Xie,mount:JA,open:yse,openAsBlob:aoe,openSync:Z1,opendir:toe,opendirSync:ese,promises:cse,read:kse,readFile:bse,readFileSync:nN,readSync:Uie,readdir:Dse,readdirSync:Xp,readlink:Pse,readlinkSync:rk,readv:Qse,readvSync:Jie,realpath:Vse,realpathSync:sd,rename:dse,renameSync:Mie,rm:Yse,rmSync:n9,rmdir:Ise,rmdirSync:e9,stat:hse,statSync:Wu,statfs:roe,statfsSync:tse,symlink:Ose,symlinkSync:Hie,truncate:mse,truncateSync:Oie,umount:ZL,unlink:gse,unlinkSync:tN,unwatchFile:Gse,utimes:zse,utimesSync:t9,watch:Wse,watchFile:qse,write:Tse,writeFile:vse,writeFileSync:rN,writeSync:zie,writev:eoe,writevSync:Qie,xattr:boe},Symbol.toStringTag,{value:"Module"}));function gD(e){return IL(e)||WA(e)||e instanceof XA}async function N9(e,t=0){if(typeof e!="object"||e==null)throw Gi(new Ue(lt.EINVAL,"Invalid options on mount configuration"));if(!gD(e))throw Gi(new Ue(lt.EINVAL,"Invalid mount configuration"));if(e instanceof XA)return await e.ready(),e;WA(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&gD(i)){if(RL("Resolving nested mount configuration: "+a),t>10)throw Gi(new Ue(lt.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await N9(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Gi(new Ue(lt.EPERM,"Backend not available: "+n.name));Zae(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function voe(e){if(!IL(e))throw new TypeError("Invalid single mount point configuration");const t=await N9(e);ZL("/"),JA("/",t)}const woe=["delete"];Math.max(...woe.map(e=>e.length));Kae("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const R9=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;R9[e]=t}function xoe(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^R9[(t^e[n])&255];return(t^4294967295)>>>0}var Ur=function(e,t,n,r,a,i){function s(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var o=r.kind,l=o==="getter"?"get":o==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,m=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(m)throw new TypeError("Cannot add initializers after decoration has completed");i.push(s(x||null))};var w=(0,n[g])(o==="accessor"?{get:d.get,set:d.set}:d[l],v);if(o==="accessor"){if(w===void 0)continue;if(w===null||typeof w!="object")throw new TypeError("Object expected");(h=s(w.get))&&(d.get=h),(h=s(w.set))&&(d.set=h),(h=s(w.init))&&a.unshift(h)}else(h=s(w))&&(o==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),m=!0},An=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},wN=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let yD=(()=>{var e,t,n,r;let a=[If()],i,s=[],o,l,u=[],d=[],h,m=[],g=[],v,b=[],w=[],x,_=[],E=[];return o=class{constructor(){this.id=An(this,u,0),this.offset_=(An(this,d),An(this,m,0)),this.offset=(An(this,g),An(this,b,0)),this.size=(An(this,w),An(this,_,0)),An(this,E)}},wN(o,"MetadataEntry"),(()=>{const T=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=_n).uint32.bind(e)],h=[(t=_n).uint32.bind(t)],v=[(n=_n).uint32.bind(n)],x=[(r=_n).uint32.bind(r)],Ur(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,R)=>{k.id=R}},metadata:T},u,d),Ur(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,R)=>{k.offset_=R}},metadata:T},m,g),Ur(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,R)=>{k.offset=R}},metadata:T},b,w),Ur(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,R)=>{k.size=R}},metadata:T},_,E),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:T},null,s),o=i.value,T&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:T}),An(o,s)})(),o})();const bD=255;let Vd=(()=>{var e,t,n,r;let a=[If()],i,s=[],o,l,u=[],d=[],h,m=[],g=[],v,b=[],w=[],x,_=[],E=[],T,k=[],R=[];var j=o=class{constructor(I=wr(new Ue(lt.EINVAL,"Metadata block must be initialized with a superblock")),P=0){if(this.superblock=I,this.offset=P,this.checksum=An(this,u,0),this.timestamp=(An(this,d),An(this,m,Date.now())),this.previous_offset_=(An(this,g),An(this,b,0)),this.previous_offset=(An(this,w),An(this,_,0)),this._previous=An(this,E),this.entries=An(this,k,Array.from({length:bD},()=>new yD)),An(this,R),this.superblock=I,this.offset=P,!!P&&(V1(this,I.store._buffer.subarray(P,P+Hr(j))),!I9(this)))throw H1(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+P.toString(16)))}get previous(){var I;if(this.previous_offset)return(I=this._previous)!==null&&I!==void 0||(this._previous=new j(this.superblock,this.previous_offset)),this._previous}};return wN(o,"MetadataBlock"),(()=>{const I=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=_n).uint32.bind(e)],h=[(t=_n).uint32.bind(t)],v=[(n=_n).uint32.bind(n)],x=[(r=_n).uint32.bind(r)],T=[R0(yD,bD)],Ur(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:P=>"checksum"in P,get:P=>P.checksum,set:(P,O)=>{P.checksum=O}},metadata:I},u,d),Ur(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:P=>"timestamp"in P,get:P=>P.timestamp,set:(P,O)=>{P.timestamp=O}},metadata:I},m,g),Ur(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:P=>"previous_offset_"in P,get:P=>P.previous_offset_,set:(P,O)=>{P.previous_offset_=O}},metadata:I},b,w),Ur(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:P=>"previous_offset"in P,get:P=>P.previous_offset,set:(P,O)=>{P.previous_offset=O}},metadata:I},_,E),Ur(null,null,T,{kind:"field",name:"entries",static:!1,private:!1,access:{has:P=>"entries"in P,get:P=>P.entries,set:(P,O)=>{P.entries=O}},metadata:I},k,R),Ur(null,i={value:o},a,{kind:"class",name:o.name,metadata:I},null,s),j=o=i.value,I&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:I}),An(o,s)})(),j=o})();const vD=2049864546;(()=>{var e,t,n,r,a,i,s,o,l,u,d;let h=[If()],m,g=[],v,b,w=[],x=[],_,E=[],T=[],k,R=[],j=[],I,P=[],O=[],U,M=[],W=[],V,ie=[],ae=[],ne,q=[],te=[],G,J=[],Q=[],se,fe=[],ve=[],je,Ne=[],Se=[],ye,Fe=[],Xe=[],Le,Ie=[],B=[],Ce,Ee=[],ce=[];var oe=v=class{constructor(ee=wr(new Ue(lt.EINVAL,"Super block must be initialized with a store"))){if(this.store=ee,this.checksum=An(this,w,0),this.magic=(An(this,x),An(this,E,vD)),this.version=(An(this,T),An(this,R,1)),this.inode_format=(An(this,j),An(this,P,mie)),this.flags=(An(this,O),An(this,M,0)),this.used_bytes=(An(this,W),An(this,ie,BigInt(0))),this.total_bytes=(An(this,ae),An(this,q,BigInt(0))),this.uuid=(An(this,te),An(this,J,BigInt(0))),this.metadata_block_size=(An(this,Q),An(this,fe,Hr(Vd))),this.metadata_offset_=(An(this,ve),An(this,Ne,0)),this.metadata_offset=(An(this,Se),An(this,Fe,0)),this.metadata=An(this,Xe),this.label=An(this,Ie,""),this._padding=(An(this,B),An(this,Ee,new Array(132).fill(0))),An(this,ce),this.store=ee,ee._view.getUint32(jae(oe,"magic"),!0)!=vD){mi("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new Vd(this),this.metadata.offset=Hr(oe),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Hr(oe)+Hr(Vd)),this.total_bytes=BigInt(ee._buffer.byteLength),ee._write(this),ee._write(this.metadata);return}if(V1(this,ee._buffer.subarray(0,Hr(oe))),!I9(this))throw H1(new Ue(lt.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new Vd(this,this.metadata_offset)}rotateMetadata(){const ee=new Vd(this);return ee.offset=Number(this.used_bytes),ee.previous_offset=this.metadata_offset,this.metadata=ee,this.metadata_offset=ee.offset,this.store._write(ee),this.used_bytes+=BigInt(Hr(Vd)),this.store._write(this),ee}isUnused(ee,_e){if(!_e)return!0;if(ee+_e>this.total_bytes||ee<Hr(oe))return!1;for(let Pe=this.metadata;Pe;Pe=Pe.previous){if(ee<Pe.offset+Hr(Vd)&&ee+_e>Pe.offset)return!1;for(const ke of Pe.entries)if(ke.offset&&(ee>=ke.offset&&ee<ke.offset+ke.size||ee+_e>ke.offset&&ee+_e<=ke.offset+ke.size||ee<=ke.offset&&ee+_e>=ke.offset+ke.size))return!1}return!0}};return wN(v,"SuperBlock"),(()=>{const ee=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=_n).uint32.bind(e)],_=[(t=_n).uint32.bind(t)],k=[(n=_n).uint16.bind(n)],I=[(r=_n).uint16.bind(r)],U=[(a=_n).uint32.bind(a)],V=[(i=_n).uint64.bind(i)],ne=[(s=_n).uint64.bind(s)],G=[(o=_n).uint128.bind(o)],se=[(l=_n).uint32.bind(l)],je=[(u=_n).uint32.bind(u)],ye=[(d=_n).uint32.bind(d)],Le=[_n.char(64)],Ce=[_n.char(132)],Ur(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:_e=>"checksum"in _e,get:_e=>_e.checksum,set:(_e,Pe)=>{_e.checksum=Pe}},metadata:ee},w,x),Ur(null,null,_,{kind:"field",name:"magic",static:!1,private:!1,access:{has:_e=>"magic"in _e,get:_e=>_e.magic,set:(_e,Pe)=>{_e.magic=Pe}},metadata:ee},E,T),Ur(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:_e=>"version"in _e,get:_e=>_e.version,set:(_e,Pe)=>{_e.version=Pe}},metadata:ee},R,j),Ur(null,null,I,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:_e=>"inode_format"in _e,get:_e=>_e.inode_format,set:(_e,Pe)=>{_e.inode_format=Pe}},metadata:ee},P,O),Ur(null,null,U,{kind:"field",name:"flags",static:!1,private:!1,access:{has:_e=>"flags"in _e,get:_e=>_e.flags,set:(_e,Pe)=>{_e.flags=Pe}},metadata:ee},M,W),Ur(null,null,V,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:_e=>"used_bytes"in _e,get:_e=>_e.used_bytes,set:(_e,Pe)=>{_e.used_bytes=Pe}},metadata:ee},ie,ae),Ur(null,null,ne,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:_e=>"total_bytes"in _e,get:_e=>_e.total_bytes,set:(_e,Pe)=>{_e.total_bytes=Pe}},metadata:ee},q,te),Ur(null,null,G,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:_e=>"uuid"in _e,get:_e=>_e.uuid,set:(_e,Pe)=>{_e.uuid=Pe}},metadata:ee},J,Q),Ur(null,null,se,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:_e=>"metadata_block_size"in _e,get:_e=>_e.metadata_block_size,set:(_e,Pe)=>{_e.metadata_block_size=Pe}},metadata:ee},fe,ve),Ur(null,null,je,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:_e=>"metadata_offset_"in _e,get:_e=>_e.metadata_offset_,set:(_e,Pe)=>{_e.metadata_offset_=Pe}},metadata:ee},Ne,Se),Ur(null,null,ye,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:_e=>"metadata_offset"in _e,get:_e=>_e.metadata_offset,set:(_e,Pe)=>{_e.metadata_offset=Pe}},metadata:ee},Fe,Xe),Ur(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:_e=>"label"in _e,get:_e=>_e.label,set:(_e,Pe)=>{_e.label=Pe}},metadata:ee},Ie,B),Ur(null,null,Ce,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:_e=>"_padding"in _e,get:_e=>_e._padding,set:(_e,Pe)=>{_e._padding=Pe}},metadata:ee},Ee,ce),Ur(null,m={value:v},h,{kind:"class",name:v.name,metadata:ee},null,g),oe=v=m.value,ee&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:ee}),An(v,g)})(),oe=v})();function I9(e){const t=ti(e),n=xoe(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=Ya;function _oe(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function ik(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?lt[_oe(e)]:lt.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Yh(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(ik(e.error))}})}class Soe extends nk{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Yh(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Yh(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Yh(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Yh(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(ik(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(ik(this.tx.error)),this.tx.abort(),t}}async function Eoe(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(mi("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Yh(n)}class Coe{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new Soe(t,this)}}const Toe={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Yh(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await Eoe(e.storeName||"zenfs",e.idbFactory),n=new Coe(t),r=new GL(n);if(e!=null&&e.disableAsyncCache)return GA("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},koe=Toe;function fw(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qE={exports:{}},wD;function Aoe(){return wD||(wD=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function s(u,d){if(!a[u]){if(!r[u]){var h=typeof fw=="function"&&fw;if(!d&&h)return h(u,!0);if(o)return o(u,!0);var m=new Error("Cannot find module '"+u+"'");throw m.code="MODULE_NOT_FOUND",m}var g=a[u]={exports:{}};r[u][0].call(g.exports,function(v){var b=r[u][1][v];return s(b||v)},g,g.exports,n,r,a,i)}return a[u].exports}for(var o=typeof fw=="function"&&fw,l=0;l<i.length;l++)s(i[l]);return s}({1:[function(n,r,a){var i=n("./utils"),s=n("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,m,g,v,b,w=[],x=0,_=l.length,E=_,T=i.getTypeOf(l)!=="string";x<l.length;)E=_-x,h=T?(u=l[x++],d=x<_?l[x++]:0,x<_?l[x++]:0):(u=l.charCodeAt(x++),d=x<_?l.charCodeAt(x++):0,x<_?l.charCodeAt(x++):0),m=u>>2,g=(3&u)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,w.push(o.charAt(m)+o.charAt(g)+o.charAt(v)+o.charAt(b));return w.join("")},a.decode=function(l){var u,d,h,m,g,v,b=0,w=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var _,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===o.charAt(64)&&E--,l.charAt(l.length-2)===o.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=s.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)u=o.indexOf(l.charAt(b++))<<2|(m=o.indexOf(l.charAt(b++)))>>4,d=(15&m)<<4|(g=o.indexOf(l.charAt(b++)))>>2,h=(3&g)<<6|(v=o.indexOf(l.charAt(b++))),_[w++]=u,g!==64&&(_[w++]=d),v!==64&&(_[w++]=h);return _}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),s=n("./stream/DataWorker"),o=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,m,g,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=m,this.compression=g,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new s(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new s(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,m){return d.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(m)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),s=function(){for(var o,l=[],u=0;u<256;u++){o=u;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;l[u]=o}return l}();r.exports=function(o,l){return o!==void 0&&o.length?i.getTypeOf(o)!=="string"?function(u,d,h,m){var g=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^g[255&(u^d[b])];return-1^u}(0|l,o,o.length,0):function(u,d,h,m){var g=s,v=m+h;u^=-1;for(var b=m;b<v;b++)u=u>>>8^g[255&(u^d.charCodeAt(b))];return-1^u}(0|l,o,o.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=n("pako"),o=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,m){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=m,this.meta={}}a.magic="\b\0",o.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(m){h.push({data:m,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,w="";for(b=0;b<v;b++)w+=String.fromCharCode(255&g),g>>>=8;return w}function s(g,v,b,w,x,_){var E,T,k=g.file,R=g.compression,j=_!==u.utf8encode,I=o.transformTo("string",_(k.name)),P=o.transformTo("string",u.utf8encode(k.name)),O=k.comment,U=o.transformTo("string",_(O)),M=o.transformTo("string",u.utf8encode(O)),W=P.length!==k.name.length,V=M.length!==O.length,ie="",ae="",ne="",q=k.dir,te=k.date,G={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(G.crc32=g.crc32,G.compressedSize=g.compressedSize,G.uncompressedSize=g.uncompressedSize);var J=0;v&&(J|=8),j||!W&&!V||(J|=2048);var Q=0,se=0;q&&(Q|=16),x==="UNIX"?(se=798,Q|=function(ve,je){var Ne=ve;return ve||(Ne=je?16893:33204),(65535&Ne)<<16}(k.unixPermissions,q)):(se=20,Q|=function(ve){return 63&(ve||0)}(k.dosPermissions)),E=te.getUTCHours(),E<<=6,E|=te.getUTCMinutes(),E<<=5,E|=te.getUTCSeconds()/2,T=te.getUTCFullYear()-1980,T<<=4,T|=te.getUTCMonth()+1,T<<=5,T|=te.getUTCDate(),W&&(ae=i(1,1)+i(d(I),4)+P,ie+="up"+i(ae.length,2)+ae),V&&(ne=i(1,1)+i(d(U),4)+M,ie+="uc"+i(ne.length,2)+ne);var fe="";return fe+=`
\0`,fe+=i(J,2),fe+=R.magic,fe+=i(E,2),fe+=i(T,2),fe+=i(G.crc32,4),fe+=i(G.compressedSize,4),fe+=i(G.uncompressedSize,4),fe+=i(I.length,2),fe+=i(ie.length,2),{fileRecord:h.LOCAL_FILE_HEADER+fe+I+ie,dirRecord:h.CENTRAL_FILE_HEADER+i(se,2)+fe+i(U.length,2)+"\0\0\0\0"+i(Q,4)+i(w,4)+I+ie+U}}var o=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function m(g,v,b,w){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=w,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(m,l),m.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-w-1))/b:100}}))},m.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=s(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},m.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=s(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(w){return h.DATA_DESCRIPTOR+i(w.crc32,4)+i(w.compressedSize,4)+i(w.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},m.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,w=function(x,_,E,T,k){var R=o.transformTo("string",k(T));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(_,4)+i(E,4)+i(R.length,2)+R}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},m.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},m.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},m.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},m.prototype.error=function(g){var v=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},m.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=m},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),s=n("./ZipFileWorker");a.generateWorker=function(o,l,u){var d=new s(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{o.forEach(function(m,g){h++;var v=function(_,E){var T=_||E,k=i[T];if(!k)throw new Error(T+" is not a valid compression method !");return k}(g.options.compression,l.compression),b=g.options.compressionOptions||l.compressionOptions||{},w=g.dir,x=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:m,dir:w,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(m){d.error(m)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new i;for(var o in this)typeof this[o]!="function"&&(s[o]=this[o]);return s}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(s,o){return new i().loadAsync(s,o)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),s=n("./external"),o=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(m){return new s.Promise(function(g,v){var b=m.decompressed.getContentWorker().pipe(new u);b.on("error",function(w){v(w)}).on("end",function(){b.streamInfo.crc32!==m.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(m,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),d.isNode&&d.isStream(m)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",m,!0,g.optimizedBinaryString,g.base64).then(function(b){var w=new l(g);return w.load(b),w}).then(function(b){var w=[s.Promise.resolve(b)],x=b.files;if(g.checkCRC32)for(var _=0;_<x.length;_++)w.push(h(x[_]));return s.Promise.all(w)}).then(function(b){for(var w=b.shift(),x=w.files,_=0;_<x.length;_++){var E=x[_],T=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=T)}return w.zipComment.length&&(v.comment=w.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),s=n("../stream/GenericWorker");function o(l,u){s.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(o,s),o.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function s(o,l,u){i.call(this,l),this._helper=o;var d=this;o.on("data",function(h,m){d.push(h)||d._helper.pause(),u&&u(m)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(s,i),s.prototype._read=function(){this._helper.resume()},r.exports=s},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Qt<"u",newBufferFrom:function(i,s){if(Qt.from&&Qt.from!==Uint8Array.from)return Qt.from(i,s);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Qt(i,s)},allocBuffer:function(i){if(Qt.alloc)return Qt.alloc(i);var s=new Qt(i);return s.fill(0),s},isBuffer:function(i){return Qt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,R,j){var I,P=o.getTypeOf(R),O=o.extend(j||{},d);O.date=O.date||new Date,O.compression!==null&&(O.compression=O.compression.toUpperCase()),typeof O.unixPermissions=="string"&&(O.unixPermissions=parseInt(O.unixPermissions,8)),O.unixPermissions&&16384&O.unixPermissions&&(O.dir=!0),O.dosPermissions&&16&O.dosPermissions&&(O.dir=!0),O.dir&&(k=x(k)),O.createFolders&&(I=w(k))&&_.call(this,I,!0);var U=P==="string"&&O.binary===!1&&O.base64===!1;j&&j.binary!==void 0||(O.binary=!U),(R instanceof h&&R.uncompressedSize===0||O.dir||!R||R.length===0)&&(O.base64=!1,O.binary=!0,R="",O.compression="STORE",P="string");var M=null;M=R instanceof h||R instanceof l?R:v.isNode&&v.isStream(R)?new b(k,R):o.prepareContent(k,R,O.binary,O.optimizedBinaryString,O.base64);var W=new m(k,M,O);this.files[k]=W}var s=n("./utf8"),o=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),m=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),w=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var R=k.lastIndexOf("/");return 0<R?k.substring(0,R):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},_=function(k,R){return R=R!==void 0?R:d.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:R}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var R,j,I;for(R in this.files)I=this.files[R],(j=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&k(j,I)},filter:function(k){var R=[];return this.forEach(function(j,I){k(j,I)&&R.push(I)}),R},file:function(k,R,j){if(arguments.length!==1)return k=this.root+k,i.call(this,k,R,j),this;if(E(k)){var I=k;return this.filter(function(O,U){return!U.dir&&I.test(O)})}var P=this.files[this.root+k];return P&&!P.dir?P:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(P,O){return O.dir&&k.test(P)});var R=this.root+k,j=_.call(this,R),I=this.clone();return I.root=j.name,I},remove:function(k){k=this.root+k;var R=this.files[k];if(R||(k.slice(-1)!=="/"&&(k+="/"),R=this.files[k]),R&&!R.dir)delete this.files[k];else for(var j=this.filter(function(P,O){return O.name.slice(0,k.length)===k}),I=0;I<j.length;I++)delete this.files[j[I].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var R,j={};try{if((j=o.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=j.type.toLowerCase(),j.compression=j.compression.toUpperCase(),j.type==="binarystring"&&(j.type="string"),!j.type)throw new Error("No output type specified.");o.checkSupport(j.type),j.platform!=="darwin"&&j.platform!=="freebsd"&&j.platform!=="linux"&&j.platform!=="sunos"||(j.platform="UNIX"),j.platform==="win32"&&(j.platform="DOS");var I=j.comment||this.comment||"";R=g.generateWorker(this,j,I)}catch(P){(R=new l("error")).error(P)}return new u(R,j.type||"string",j.mimeType)},generateAsync:function(k,R){return this.generateInternalStream(k).accumulate(R)},generateNodeStream:function(k,R){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(R)}};r.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o);for(var l=0;l<this.data.length;l++)o[l]=255&o[l]}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data[this.zero+o]},s.prototype.lastIndexOfSignature=function(o){for(var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.length-4;0<=m;--m)if(this.data[m]===l&&this.data[m+1]===u&&this.data[m+2]===d&&this.data[m+3]===h)return m-this.zero;return-1},s.prototype.readAndCheckSignature=function(o){var l=o.charCodeAt(0),u=o.charCodeAt(1),d=o.charCodeAt(2),h=o.charCodeAt(3),m=this.readData(4);return l===m[0]&&u===m[1]&&d===m[2]&&h===m[3]},s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function s(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l,u=0;for(this.checkOffset(o),l=this.index+o-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=o,u},readString:function(o){return i.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC(1980+(o>>25&127),(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(31&o)<<1))}},r.exports=s},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.byteAt=function(o){return this.data.charCodeAt(this.zero+o)},s.prototype.lastIndexOfSignature=function(o){return this.data.lastIndexOf(o)-this.zero},s.prototype.readAndCheckSignature=function(o){return o===this.readData(4)},s.prototype.readData=function(o){this.checkOffset(o);var l=this.data.slice(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function s(o){i.call(this,o)}n("../utils").inherits(s,i),s.prototype.readData=function(o){if(this.checkOffset(o),o===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+o);return this.index+=o,l},r.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),s=n("../support"),o=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var m=i.getTypeOf(h);return i.checkSupport(m),m!=="string"||s.uint8array?m==="nodebuffer"?new u(h):s.uint8array?new d(i.transformTo("uint8array",h)):new o(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),s=n("../utils");function o(l){i.call(this,"ConvertWorker to "+l),this.destType=l}s.inherits(o,i),o.prototype.processChunk=function(l){this.push({data:s.transformTo(this.destType,l.data),meta:l.meta})},r.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),s=n("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(o,i),o.prototype.processChunk=function(l){this.streamInfo.crc32=s(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(o,s),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}s.prototype.processChunk.call(this,l)},r.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),s=n("./GenericWorker");function o(l){s.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(o,s),o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,o){return this._listeners[s].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,o){if(this._listeners[s])for(var l=0;l<this._listeners[s].length;l++)this._listeners[s][l].call(this,o)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var o=this;return s.on("data",function(l){o.processChunk(l)}),s.on("end",function(){o.end()}),s.on("error",function(l){o.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,o){return this.extraStreamInfo[s]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),s=n("./ConvertWorker"),o=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function m(v,b){return new d.Promise(function(w,x){var _=[],E=v._internalType,T=v._outputType,k=v._mimeType;v.on("data",function(R,j){_.push(R),b&&b(j)}).on("error",function(R){_=[],x(R)}).on("end",function(){try{var R=function(j,I,P){switch(j){case"blob":return i.newBlob(i.transformTo("arraybuffer",I),P);case"base64":return l.encode(I);default:return i.transformTo(j,I)}}(T,function(j,I){var P,O=0,U=null,M=0;for(P=0;P<I.length;P++)M+=I[P].length;switch(j){case"string":return I.join("");case"array":return Array.prototype.concat.apply([],I);case"uint8array":for(U=new Uint8Array(M),P=0;P<I.length;P++)U.set(I[P],O),O+=I[P].length;return U;case"nodebuffer":return Qt.concat(I);default:throw new Error("concat : unsupported type '"+j+"'")}}(E,_),k);w(R)}catch(j){x(j)}_=[]}).resume()})}function g(v,b,w){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=w,i.checkSupport(x),this._worker=v.pipe(new s(x)),v.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}g.prototype={accumulate:function(v){return m(this,v)},on:function(v,b){var w=this;return v==="data"?this._worker.on(v,function(x){b.call(w,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,w)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Qt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(i),a.blob=s.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),s=n("./support"),o=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function m(){l.call(this,"utf-8 encode")}a.utf8encode=function(g){return s.nodebuffer?o.newBufferFrom(g,"utf-8"):function(v){var b,w,x,_,E,T=v.length,k=0;for(_=0;_<T;_++)(64512&(w=v.charCodeAt(_)))==55296&&_+1<T&&(64512&(x=v.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),_++),k+=w<128?1:w<2048?2:w<65536?3:4;for(b=s.uint8array?new Uint8Array(k):new Array(k),_=E=0;E<k;_++)(64512&(w=v.charCodeAt(_)))==55296&&_+1<T&&(64512&(x=v.charCodeAt(_+1)))==56320&&(w=65536+(w-55296<<10)+(x-56320),_++),w<128?b[E++]=w:(w<2048?b[E++]=192|w>>>6:(w<65536?b[E++]=224|w>>>12:(b[E++]=240|w>>>18,b[E++]=128|w>>>12&63),b[E++]=128|w>>>6&63),b[E++]=128|63&w);return b}(g)},a.utf8decode=function(g){return s.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,w,x,_,E=v.length,T=new Array(2*E);for(b=w=0;b<E;)if((x=v[b++])<128)T[w++]=x;else if(4<(_=u[x]))T[w++]=65533,b+=_-1;else{for(x&=_===2?31:_===3?15:7;1<_&&b<E;)x=x<<6|63&v[b++],_--;1<_?T[w++]=65533:x<65536?T[w++]=x:(x-=65536,T[w++]=55296|x>>10&1023,T[w++]=56320|1023&x)}return T.length!==w&&(T.subarray?T=T.subarray(0,w):T.length=w),i.applyFromCharCode(T)}(g=i.transformTo(s.uint8array?"uint8array":"array",g))},i.inherits(h,l),h.prototype.processChunk=function(g){var v=i.transformTo(s.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var w=function(_,E){var T;for((E=E||_.length)>_.length&&(E=_.length),T=E-1;0<=T&&(192&_[T])==128;)T--;return T<0||T===0?E:T+u[_[T]]>E?T:E}(v),x=v;w!==v.length&&(s.uint8array?(x=v.subarray(0,w),this.leftOver=v.subarray(w,v.length)):(x=v.slice(0,w),this.leftOver=v.slice(w,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(m,l),m.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=m},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),s=n("./base64"),o=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,w){for(var x=0;x<b.length;++x)w[x]=255&b.charCodeAt(x);return w}n("setimmediate"),a.newBlob=function(b,w){a.checkSupport("blob");try{return new Blob([b],{type:w})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,w,x){var _=[],E=0,T=b.length;if(T<=x)return String.fromCharCode.apply(null,b);for(;E<T;)w==="array"||w==="nodebuffer"?_.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,T)))):_.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,T)))),E+=x;return _.join("")},stringifyByChar:function(b){for(var w="",x=0;x<b.length;x++)w+=String.fromCharCode(b[x]);return w},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function m(b){var w=65536,x=a.getTypeOf(b),_=!0;if(x==="uint8array"?_=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(_=h.applyCanBeUsed.nodebuffer),_)for(;1<w;)try{return h.stringifyByChunk(b,x,w)}catch{w=Math.floor(w/2)}return h.stringifyByChar(b)}function g(b,w){for(var x=0;x<b.length;x++)w[x]=b[x];return w}a.applyFromCharCode=m;var v={};v.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,o.allocBuffer(b.length))}},v.array={string:m,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(b)}},v.arraybuffer={string:function(b){return m(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return o.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return o.newBufferFrom(b)}},v.nodebuffer={string:m,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,w){if(w=w||"",!b)return w;a.checkSupport(b);var x=a.getTypeOf(w);return v[x][b](w)},a.resolve=function(b){for(var w=b.split("/"),x=[],_=0;_<w.length;_++){var E=w[_];E==="."||E===""&&_!==0&&_!==w.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&o.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var w,x,_="";for(x=0;x<(b||"").length;x++)_+="\\x"+((w=b.charCodeAt(x))<16?"0":"")+w.toString(16).toUpperCase();return _},a.delay=function(b,w,x){setImmediate(function(){b.apply(x||null,w||[])})},a.inherits=function(b,w){function x(){}x.prototype=w.prototype,b.prototype=new x},a.extend=function(){var b,w,x={};for(b=0;b<arguments.length;b++)for(w in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],w)&&x[w]===void 0&&(x[w]=arguments[b][w]);return x},a.prepareContent=function(b,w,x,_,E){return l.Promise.resolve(w).then(function(T){return i.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,R){var j=new FileReader;j.onload=function(I){k(I.target.result)},j.onerror=function(I){R(I.target.error)},j.readAsArrayBuffer(T)}):T}).then(function(T){var k=a.getTypeOf(T);return k?(k==="arraybuffer"?T=a.transformTo("uint8array",T):k==="string"&&(E?T=s.decode(T):x&&_!==!0&&(T=function(R){return d(R,i.uint8array?new Uint8Array(R.length):new Array(R.length))}(T))),T):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var m=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(m)+", expected "+s.pretty(h)+")")}},isSignature:function(h,m){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===m;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),m=u.uint8array?"uint8array":"array",g=s.transformTo(m,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,m,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),m=this.reader.readInt(4),g=this.reader.readData(m),this.zip64ExtensibleData[h]={id:h,length:m,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,m;for(h=0;h<this.files.length;h++)m=this.files[h],this.reader.setIndex(m.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),m.readLocalPart(this.reader),m.handleUTF8(),m.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var m=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=m-g;if(0<v)this.isSignature(m,o.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),s=n("./utils"),o=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function m(g,v){this.options=g,this.loadOptions=v}m.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(w){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===w)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,w,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),b=g.readInt(2),w=g.readData(b),this.extraFields[v]={id:v,length:b,value:w};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=s.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var x=s.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null}},r.exports=m},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,w){this.name=v,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=b,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var s=n("./stream/StreamHelper"),o=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,w="string";try{if(!v)throw new Error("No output type specified.");var x=(w=v.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),b=this._decompressWorker();var _=!this._dataBinary;_&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!_&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new s(b,w,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(w,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new o(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],m=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=m;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var s,o,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),s=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)s="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var m=new i.MessageChannel;m.port1.onmessage=v,s=function(){m.port2.postMessage(0)}}var g=[];function v(){var b,w;o=!0;for(var x=g.length;x;){for(w=g,g=[],b=-1;++b<x;)w[b]();x=g.length}o=!1}r.exports=function(b){g.push(b)!==1||o||s()}}).call(this,typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function s(){}var o={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==s&&b(this,x)}function m(x,_,E){this.promise=x,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,_,E){i(function(){var T;try{T=_(E)}catch(k){return o.reject(x,k)}T===x?o.reject(x,new TypeError("Cannot resolve promise with itself")):o.resolve(x,T)})}function v(x){var _=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof _=="function")return function(){_.apply(x,arguments)}}function b(x,_){var E=!1;function T(j){E||(E=!0,o.reject(x,j))}function k(j){E||(E=!0,o.resolve(x,j))}var R=w(function(){_(k,T)});R.status==="error"&&T(R.value)}function w(x,_){var E={};try{E.value=x(_),E.status="success"}catch(T){E.status="error",E.value=T}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var _=this.constructor;return this.then(function(E){return _.resolve(x()).then(function(){return E})},function(E){return _.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,_){if(typeof x!="function"&&this.state===u||typeof _!="function"&&this.state===l)return this;var E=new this.constructor(s);return this.state!==d?g(E,this.state===u?x:_,this.outcome):this.queue.push(new m(E,x,_)),E},m.prototype.callFulfilled=function(x){o.resolve(this.promise,x)},m.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},m.prototype.callRejected=function(x){o.reject(this.promise,x)},m.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},o.resolve=function(x,_){var E=w(v,_);if(E.status==="error")return o.reject(x,E.value);var T=E.value;if(T)b(x,T);else{x.state=u,x.outcome=_;for(var k=-1,R=x.queue.length;++k<R;)x.queue[k].callFulfilled(_)}return x},o.reject=function(x,_){x.state=l,x.outcome=_;for(var E=-1,T=x.queue.length;++E<T;)x.queue[E].callRejected(_);return x},h.resolve=function(x){return x instanceof this?x:o.resolve(new this(s),x)},h.reject=function(x){var _=new this(s);return o.reject(_,x)},h.all=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,T=!1;if(!E)return this.resolve([]);for(var k=new Array(E),R=0,j=-1,I=new this(s);++j<E;)P(x[j],j);return I;function P(O,U){_.resolve(O).then(function(M){k[U]=M,++R!==E||T||(T=!0,o.resolve(I,k))},function(M){T||(T=!0,o.reject(I,M))})}},h.race=function(x){var _=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,T=!1;if(!E)return this.resolve([]);for(var k=-1,R=new this(s);++k<E;)j=x[k],_.resolve(j).then(function(I){T||(T=!0,o.resolve(R,I))},function(I){T||(T=!0,o.reject(R,I))});var j;return R}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,m=-1,g=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=s.assign({level:m,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(E!==h)throw new Error(l[E]);if(_.header&&i.deflateSetHeader(this.strm,_.header),_.dictionary){var T;if(T=typeof _.dictionary=="string"?o.string2buf(_.dictionary):d.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(E=i.deflateSetDictionary(this.strm,T))!==h)throw new Error(l[E]);this._dict_set=!0}}function w(x,_){var E=new b(_);if(E.push(x,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(x,_){var E,T,k=this.strm,R=this.options.chunkSize;if(this.ended)return!1;T=_===~~_?_:_===!0?4:0,typeof x=="string"?k.input=o.string2buf(x):d.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new s.Buf8(R),k.next_out=0,k.avail_out=R),(E=i.deflate(k,T))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(o.buf2binstring(s.shrinkBuf(k.output,k.next_out))):this.onData(s.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return T===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):T!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=b,a.deflate=w,a.deflateRaw=function(x,_){return(_=_||{}).raw=!0,w(x,_)},a.gzip=function(x,_){return(_=_||{}).gzip=!0,w(x,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),s=n("./utils/common"),o=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),m=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},b||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||b&&b.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,w.windowBits);if(x!==l.Z_OK)throw new Error(u[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,w){var x=new g(w);if(x.push(b,!0),x.err)throw x.msg||u[x.err];return x.result}g.prototype.push=function(b,w){var x,_,E,T,k,R,j=this.strm,I=this.options.chunkSize,P=this.options.dictionary,O=!1;if(this.ended)return!1;_=w===~~w?w:w===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?j.input=o.binstring2buf(b):m.call(b)==="[object ArrayBuffer]"?j.input=new Uint8Array(b):j.input=b,j.next_in=0,j.avail_in=j.input.length;do{if(j.avail_out===0&&(j.output=new s.Buf8(I),j.next_out=0,j.avail_out=I),(x=i.inflate(j,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&P&&(R=typeof P=="string"?o.string2buf(P):m.call(P)==="[object ArrayBuffer]"?new Uint8Array(P):P,x=i.inflateSetDictionary(this.strm,R)),x===l.Z_BUF_ERROR&&O===!0&&(x=l.Z_OK,O=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);j.next_out&&(j.avail_out!==0&&x!==l.Z_STREAM_END&&(j.avail_in!==0||_!==l.Z_FINISH&&_!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=o.utf8border(j.output,j.next_out),T=j.next_out-E,k=o.buf2string(j.output,E),j.next_out=T,j.avail_out=I-T,T&&s.arraySet(j.output,j.output,E,T,0),this.onData(k)):this.onData(s.shrinkBuf(j.output,j.next_out)))),j.avail_in===0&&j.avail_out===0&&(O=!0)}while((0<j.avail_in||j.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(_=l.Z_FINISH),_===l.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):_!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(j.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,w){return(w=w||{}).raw=!0,v(b,w)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var s={arraySet:function(l,u,d,h,m){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),m);else for(var g=0;g<h;g++)l[m+g]=u[d+g]},flattenChunks:function(l){var u,d,h,m,g,v;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(v=new Uint8Array(h),u=m=0,d=l.length;u<d;u++)g=l[u],v.set(g,m),m+=g.length;return v}},o={arraySet:function(l,u,d,h,m){for(var g=0;g<h;g++)l[m+g]=u[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,s)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,o))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),s=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,m){if(m<65537&&(h.subarray&&o||!h.subarray&&s))return String.fromCharCode.apply(null,i.shrinkBuf(h,m));for(var g="",v=0;v<m;v++)g+=String.fromCharCode(h[v]);return g}l[254]=l[254]=1,a.string2buf=function(h){var m,g,v,b,w,x=h.length,_=0;for(b=0;b<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),_+=g<128?1:g<2048?2:g<65536?3:4;for(m=new i.Buf8(_),b=w=0;w<_;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?m[w++]=g:(g<2048?m[w++]=192|g>>>6:(g<65536?m[w++]=224|g>>>12:(m[w++]=240|g>>>18,m[w++]=128|g>>>12&63),m[w++]=128|g>>>6&63),m[w++]=128|63&g);return m},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var m=new i.Buf8(h.length),g=0,v=m.length;g<v;g++)m[g]=h.charCodeAt(g);return m},a.buf2string=function(h,m){var g,v,b,w,x=m||h.length,_=new Array(2*x);for(g=v=0;g<x;)if((b=h[g++])<128)_[v++]=b;else if(4<(w=l[b]))_[v++]=65533,g+=w-1;else{for(b&=w===2?31:w===3?15:7;1<w&&g<x;)b=b<<6|63&h[g++],w--;1<w?_[v++]=65533:b<65536?_[v++]=b:(b-=65536,_[v++]=55296|b>>10&1023,_[v++]=56320|1023&b)}return d(_,v)},a.utf8border=function(h,m){var g;for((m=m||h.length)>h.length&&(m=h.length),g=m-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?m:g+l[h[g]]>m?g:m}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,s,o,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;o!==0;){for(o-=h=2e3<o?2e3:o;d=d+(u=u+s[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var s,o=[],l=0;l<256;l++){s=l;for(var u=0;u<8;u++)s=1&s?3988292384^s>>>1:s>>>1;o[l]=s}return o}();r.exports=function(s,o,l,u){var d=i,h=u+l;s^=-1;for(var m=u;m<h;m++)s=s>>>8^d[255&(s^o[m])];return-1^s}},{}],46:[function(n,r,a){var i,s=n("../utils/common"),o=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,m=4,g=0,v=-2,b=-1,w=4,x=2,_=8,E=9,T=286,k=30,R=19,j=2*T+1,I=15,P=3,O=258,U=O+P+1,M=42,W=113,V=1,ie=2,ae=3,ne=4;function q(B,Ce){return B.msg=d[Ce],Ce}function te(B){return(B<<1)-(4<B?9:0)}function G(B){for(var Ce=B.length;0<=--Ce;)B[Ce]=0}function J(B){var Ce=B.state,Ee=Ce.pending;Ee>B.avail_out&&(Ee=B.avail_out),Ee!==0&&(s.arraySet(B.output,Ce.pending_buf,Ce.pending_out,Ee,B.next_out),B.next_out+=Ee,Ce.pending_out+=Ee,B.total_out+=Ee,B.avail_out-=Ee,Ce.pending-=Ee,Ce.pending===0&&(Ce.pending_out=0))}function Q(B,Ce){o._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,Ce),B.block_start=B.strstart,J(B.strm)}function se(B,Ce){B.pending_buf[B.pending++]=Ce}function fe(B,Ce){B.pending_buf[B.pending++]=Ce>>>8&255,B.pending_buf[B.pending++]=255&Ce}function ve(B,Ce){var Ee,ce,oe=B.max_chain_length,ee=B.strstart,_e=B.prev_length,Pe=B.nice_match,ke=B.strstart>B.w_size-U?B.strstart-(B.w_size-U):0,We=B.window,Nt=B.w_mask,it=B.prev,Ct=B.strstart+O,Ft=We[ee+_e-1],Mt=We[ee+_e];B.prev_length>=B.good_match&&(oe>>=2),Pe>B.lookahead&&(Pe=B.lookahead);do if(We[(Ee=Ce)+_e]===Mt&&We[Ee+_e-1]===Ft&&We[Ee]===We[ee]&&We[++Ee]===We[ee+1]){ee+=2,Ee++;do;while(We[++ee]===We[++Ee]&&We[++ee]===We[++Ee]&&We[++ee]===We[++Ee]&&We[++ee]===We[++Ee]&&We[++ee]===We[++Ee]&&We[++ee]===We[++Ee]&&We[++ee]===We[++Ee]&&We[++ee]===We[++Ee]&&ee<Ct);if(ce=O-(Ct-ee),ee=Ct-O,_e<ce){if(B.match_start=Ce,Pe<=(_e=ce))break;Ft=We[ee+_e-1],Mt=We[ee+_e]}}while((Ce=it[Ce&Nt])>ke&&--oe!=0);return _e<=B.lookahead?_e:B.lookahead}function je(B){var Ce,Ee,ce,oe,ee,_e,Pe,ke,We,Nt,it=B.w_size;do{if(oe=B.window_size-B.lookahead-B.strstart,B.strstart>=it+(it-U)){for(s.arraySet(B.window,B.window,it,it,0),B.match_start-=it,B.strstart-=it,B.block_start-=it,Ce=Ee=B.hash_size;ce=B.head[--Ce],B.head[Ce]=it<=ce?ce-it:0,--Ee;);for(Ce=Ee=it;ce=B.prev[--Ce],B.prev[Ce]=it<=ce?ce-it:0,--Ee;);oe+=it}if(B.strm.avail_in===0)break;if(_e=B.strm,Pe=B.window,ke=B.strstart+B.lookahead,We=oe,Nt=void 0,Nt=_e.avail_in,We<Nt&&(Nt=We),Ee=Nt===0?0:(_e.avail_in-=Nt,s.arraySet(Pe,_e.input,_e.next_in,Nt,ke),_e.state.wrap===1?_e.adler=l(_e.adler,Pe,Nt,ke):_e.state.wrap===2&&(_e.adler=u(_e.adler,Pe,Nt,ke)),_e.next_in+=Nt,_e.total_in+=Nt,Nt),B.lookahead+=Ee,B.lookahead+B.insert>=P)for(ee=B.strstart-B.insert,B.ins_h=B.window[ee],B.ins_h=(B.ins_h<<B.hash_shift^B.window[ee+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[ee+P-1])&B.hash_mask,B.prev[ee&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=ee,ee++,B.insert--,!(B.lookahead+B.insert<P)););}while(B.lookahead<U&&B.strm.avail_in!==0)}function Ne(B,Ce){for(var Ee,ce;;){if(B.lookahead<U){if(je(B),B.lookahead<U&&Ce===h)return V;if(B.lookahead===0)break}if(Ee=0,B.lookahead>=P&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+P-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),Ee!==0&&B.strstart-Ee<=B.w_size-U&&(B.match_length=ve(B,Ee)),B.match_length>=P)if(ce=o._tr_tally(B,B.strstart-B.match_start,B.match_length-P),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=P){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+P-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else ce=o._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(ce&&(Q(B,!1),B.strm.avail_out===0))return V}return B.insert=B.strstart<P-1?B.strstart:P-1,Ce===m?(Q(B,!0),B.strm.avail_out===0?ae:ne):B.last_lit&&(Q(B,!1),B.strm.avail_out===0)?V:ie}function Se(B,Ce){for(var Ee,ce,oe;;){if(B.lookahead<U){if(je(B),B.lookahead<U&&Ce===h)return V;if(B.lookahead===0)break}if(Ee=0,B.lookahead>=P&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+P-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=P-1,Ee!==0&&B.prev_length<B.max_lazy_match&&B.strstart-Ee<=B.w_size-U&&(B.match_length=ve(B,Ee),B.match_length<=5&&(B.strategy===1||B.match_length===P&&4096<B.strstart-B.match_start)&&(B.match_length=P-1)),B.prev_length>=P&&B.match_length<=B.prev_length){for(oe=B.strstart+B.lookahead-P,ce=o._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-P),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=oe&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+P-1])&B.hash_mask,Ee=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=P-1,B.strstart++,ce&&(Q(B,!1),B.strm.avail_out===0))return V}else if(B.match_available){if((ce=o._tr_tally(B,0,B.window[B.strstart-1]))&&Q(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return V}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(ce=o._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<P-1?B.strstart:P-1,Ce===m?(Q(B,!0),B.strm.avail_out===0?ae:ne):B.last_lit&&(Q(B,!1),B.strm.avail_out===0)?V:ie}function ye(B,Ce,Ee,ce,oe){this.good_length=B,this.max_lazy=Ce,this.nice_length=Ee,this.max_chain=ce,this.func=oe}function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*j),this.dyn_dtree=new s.Buf16(2*(2*k+1)),this.bl_tree=new s.Buf16(2*(2*R+1)),G(this.dyn_ltree),G(this.dyn_dtree),G(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(I+1),this.heap=new s.Buf16(2*T+1),G(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*T+1),G(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Xe(B){var Ce;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=x,(Ce=B.state).pending=0,Ce.pending_out=0,Ce.wrap<0&&(Ce.wrap=-Ce.wrap),Ce.status=Ce.wrap?M:W,B.adler=Ce.wrap===2?0:1,Ce.last_flush=h,o._tr_init(Ce),g):q(B,v)}function Le(B){var Ce=Xe(B);return Ce===g&&function(Ee){Ee.window_size=2*Ee.w_size,G(Ee.head),Ee.max_lazy_match=i[Ee.level].max_lazy,Ee.good_match=i[Ee.level].good_length,Ee.nice_match=i[Ee.level].nice_length,Ee.max_chain_length=i[Ee.level].max_chain,Ee.strstart=0,Ee.block_start=0,Ee.lookahead=0,Ee.insert=0,Ee.match_length=Ee.prev_length=P-1,Ee.match_available=0,Ee.ins_h=0}(B.state),Ce}function Ie(B,Ce,Ee,ce,oe,ee){if(!B)return v;var _e=1;if(Ce===b&&(Ce=6),ce<0?(_e=0,ce=-ce):15<ce&&(_e=2,ce-=16),oe<1||E<oe||Ee!==_||ce<8||15<ce||Ce<0||9<Ce||ee<0||w<ee)return q(B,v);ce===8&&(ce=9);var Pe=new Fe;return(B.state=Pe).strm=B,Pe.wrap=_e,Pe.gzhead=null,Pe.w_bits=ce,Pe.w_size=1<<Pe.w_bits,Pe.w_mask=Pe.w_size-1,Pe.hash_bits=oe+7,Pe.hash_size=1<<Pe.hash_bits,Pe.hash_mask=Pe.hash_size-1,Pe.hash_shift=~~((Pe.hash_bits+P-1)/P),Pe.window=new s.Buf8(2*Pe.w_size),Pe.head=new s.Buf16(Pe.hash_size),Pe.prev=new s.Buf16(Pe.w_size),Pe.lit_bufsize=1<<oe+6,Pe.pending_buf_size=4*Pe.lit_bufsize,Pe.pending_buf=new s.Buf8(Pe.pending_buf_size),Pe.d_buf=1*Pe.lit_bufsize,Pe.l_buf=3*Pe.lit_bufsize,Pe.level=Ce,Pe.strategy=ee,Pe.method=Ee,Le(B)}i=[new ye(0,0,0,0,function(B,Ce){var Ee=65535;for(Ee>B.pending_buf_size-5&&(Ee=B.pending_buf_size-5);;){if(B.lookahead<=1){if(je(B),B.lookahead===0&&Ce===h)return V;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var ce=B.block_start+Ee;if((B.strstart===0||B.strstart>=ce)&&(B.lookahead=B.strstart-ce,B.strstart=ce,Q(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-U&&(Q(B,!1),B.strm.avail_out===0))return V}return B.insert=0,Ce===m?(Q(B,!0),B.strm.avail_out===0?ae:ne):(B.strstart>B.block_start&&(Q(B,!1),B.strm.avail_out),V)}),new ye(4,4,8,4,Ne),new ye(4,5,16,8,Ne),new ye(4,6,32,32,Ne),new ye(4,4,16,16,Se),new ye(8,16,32,32,Se),new ye(8,16,128,128,Se),new ye(8,32,128,256,Se),new ye(32,128,258,1024,Se),new ye(32,258,258,4096,Se)],a.deflateInit=function(B,Ce){return Ie(B,Ce,_,15,8,0)},a.deflateInit2=Ie,a.deflateReset=Le,a.deflateResetKeep=Xe,a.deflateSetHeader=function(B,Ce){return B&&B.state?B.state.wrap!==2?v:(B.state.gzhead=Ce,g):v},a.deflate=function(B,Ce){var Ee,ce,oe,ee;if(!B||!B.state||5<Ce||Ce<0)return B?q(B,v):v;if(ce=B.state,!B.output||!B.input&&B.avail_in!==0||ce.status===666&&Ce!==m)return q(B,B.avail_out===0?-5:v);if(ce.strm=B,Ee=ce.last_flush,ce.last_flush=Ce,ce.status===M)if(ce.wrap===2)B.adler=0,se(ce,31),se(ce,139),se(ce,8),ce.gzhead?(se(ce,(ce.gzhead.text?1:0)+(ce.gzhead.hcrc?2:0)+(ce.gzhead.extra?4:0)+(ce.gzhead.name?8:0)+(ce.gzhead.comment?16:0)),se(ce,255&ce.gzhead.time),se(ce,ce.gzhead.time>>8&255),se(ce,ce.gzhead.time>>16&255),se(ce,ce.gzhead.time>>24&255),se(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),se(ce,255&ce.gzhead.os),ce.gzhead.extra&&ce.gzhead.extra.length&&(se(ce,255&ce.gzhead.extra.length),se(ce,ce.gzhead.extra.length>>8&255)),ce.gzhead.hcrc&&(B.adler=u(B.adler,ce.pending_buf,ce.pending,0)),ce.gzindex=0,ce.status=69):(se(ce,0),se(ce,0),se(ce,0),se(ce,0),se(ce,0),se(ce,ce.level===9?2:2<=ce.strategy||ce.level<2?4:0),se(ce,3),ce.status=W);else{var _e=_+(ce.w_bits-8<<4)<<8;_e|=(2<=ce.strategy||ce.level<2?0:ce.level<6?1:ce.level===6?2:3)<<6,ce.strstart!==0&&(_e|=32),_e+=31-_e%31,ce.status=W,fe(ce,_e),ce.strstart!==0&&(fe(ce,B.adler>>>16),fe(ce,65535&B.adler)),B.adler=1}if(ce.status===69)if(ce.gzhead.extra){for(oe=ce.pending;ce.gzindex<(65535&ce.gzhead.extra.length)&&(ce.pending!==ce.pending_buf_size||(ce.gzhead.hcrc&&ce.pending>oe&&(B.adler=u(B.adler,ce.pending_buf,ce.pending-oe,oe)),J(B),oe=ce.pending,ce.pending!==ce.pending_buf_size));)se(ce,255&ce.gzhead.extra[ce.gzindex]),ce.gzindex++;ce.gzhead.hcrc&&ce.pending>oe&&(B.adler=u(B.adler,ce.pending_buf,ce.pending-oe,oe)),ce.gzindex===ce.gzhead.extra.length&&(ce.gzindex=0,ce.status=73)}else ce.status=73;if(ce.status===73)if(ce.gzhead.name){oe=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>oe&&(B.adler=u(B.adler,ce.pending_buf,ce.pending-oe,oe)),J(B),oe=ce.pending,ce.pending===ce.pending_buf_size)){ee=1;break}ee=ce.gzindex<ce.gzhead.name.length?255&ce.gzhead.name.charCodeAt(ce.gzindex++):0,se(ce,ee)}while(ee!==0);ce.gzhead.hcrc&&ce.pending>oe&&(B.adler=u(B.adler,ce.pending_buf,ce.pending-oe,oe)),ee===0&&(ce.gzindex=0,ce.status=91)}else ce.status=91;if(ce.status===91)if(ce.gzhead.comment){oe=ce.pending;do{if(ce.pending===ce.pending_buf_size&&(ce.gzhead.hcrc&&ce.pending>oe&&(B.adler=u(B.adler,ce.pending_buf,ce.pending-oe,oe)),J(B),oe=ce.pending,ce.pending===ce.pending_buf_size)){ee=1;break}ee=ce.gzindex<ce.gzhead.comment.length?255&ce.gzhead.comment.charCodeAt(ce.gzindex++):0,se(ce,ee)}while(ee!==0);ce.gzhead.hcrc&&ce.pending>oe&&(B.adler=u(B.adler,ce.pending_buf,ce.pending-oe,oe)),ee===0&&(ce.status=103)}else ce.status=103;if(ce.status===103&&(ce.gzhead.hcrc?(ce.pending+2>ce.pending_buf_size&&J(B),ce.pending+2<=ce.pending_buf_size&&(se(ce,255&B.adler),se(ce,B.adler>>8&255),B.adler=0,ce.status=W)):ce.status=W),ce.pending!==0){if(J(B),B.avail_out===0)return ce.last_flush=-1,g}else if(B.avail_in===0&&te(Ce)<=te(Ee)&&Ce!==m)return q(B,-5);if(ce.status===666&&B.avail_in!==0)return q(B,-5);if(B.avail_in!==0||ce.lookahead!==0||Ce!==h&&ce.status!==666){var Pe=ce.strategy===2?function(ke,We){for(var Nt;;){if(ke.lookahead===0&&(je(ke),ke.lookahead===0)){if(We===h)return V;break}if(ke.match_length=0,Nt=o._tr_tally(ke,0,ke.window[ke.strstart]),ke.lookahead--,ke.strstart++,Nt&&(Q(ke,!1),ke.strm.avail_out===0))return V}return ke.insert=0,We===m?(Q(ke,!0),ke.strm.avail_out===0?ae:ne):ke.last_lit&&(Q(ke,!1),ke.strm.avail_out===0)?V:ie}(ce,Ce):ce.strategy===3?function(ke,We){for(var Nt,it,Ct,Ft,Mt=ke.window;;){if(ke.lookahead<=O){if(je(ke),ke.lookahead<=O&&We===h)return V;if(ke.lookahead===0)break}if(ke.match_length=0,ke.lookahead>=P&&0<ke.strstart&&(it=Mt[Ct=ke.strstart-1])===Mt[++Ct]&&it===Mt[++Ct]&&it===Mt[++Ct]){Ft=ke.strstart+O;do;while(it===Mt[++Ct]&&it===Mt[++Ct]&&it===Mt[++Ct]&&it===Mt[++Ct]&&it===Mt[++Ct]&&it===Mt[++Ct]&&it===Mt[++Ct]&&it===Mt[++Ct]&&Ct<Ft);ke.match_length=O-(Ft-Ct),ke.match_length>ke.lookahead&&(ke.match_length=ke.lookahead)}if(ke.match_length>=P?(Nt=o._tr_tally(ke,1,ke.match_length-P),ke.lookahead-=ke.match_length,ke.strstart+=ke.match_length,ke.match_length=0):(Nt=o._tr_tally(ke,0,ke.window[ke.strstart]),ke.lookahead--,ke.strstart++),Nt&&(Q(ke,!1),ke.strm.avail_out===0))return V}return ke.insert=0,We===m?(Q(ke,!0),ke.strm.avail_out===0?ae:ne):ke.last_lit&&(Q(ke,!1),ke.strm.avail_out===0)?V:ie}(ce,Ce):i[ce.level].func(ce,Ce);if(Pe!==ae&&Pe!==ne||(ce.status=666),Pe===V||Pe===ae)return B.avail_out===0&&(ce.last_flush=-1),g;if(Pe===ie&&(Ce===1?o._tr_align(ce):Ce!==5&&(o._tr_stored_block(ce,0,0,!1),Ce===3&&(G(ce.head),ce.lookahead===0&&(ce.strstart=0,ce.block_start=0,ce.insert=0))),J(B),B.avail_out===0))return ce.last_flush=-1,g}return Ce!==m?g:ce.wrap<=0?1:(ce.wrap===2?(se(ce,255&B.adler),se(ce,B.adler>>8&255),se(ce,B.adler>>16&255),se(ce,B.adler>>24&255),se(ce,255&B.total_in),se(ce,B.total_in>>8&255),se(ce,B.total_in>>16&255),se(ce,B.total_in>>24&255)):(fe(ce,B.adler>>>16),fe(ce,65535&B.adler)),J(B),0<ce.wrap&&(ce.wrap=-ce.wrap),ce.pending!==0?g:1)},a.deflateEnd=function(B){var Ce;return B&&B.state?(Ce=B.state.status)!==M&&Ce!==69&&Ce!==73&&Ce!==91&&Ce!==103&&Ce!==W&&Ce!==666?q(B,v):(B.state=null,Ce===W?q(B,-3):g):v},a.deflateSetDictionary=function(B,Ce){var Ee,ce,oe,ee,_e,Pe,ke,We,Nt=Ce.length;if(!B||!B.state||(ee=(Ee=B.state).wrap)===2||ee===1&&Ee.status!==M||Ee.lookahead)return v;for(ee===1&&(B.adler=l(B.adler,Ce,Nt,0)),Ee.wrap=0,Nt>=Ee.w_size&&(ee===0&&(G(Ee.head),Ee.strstart=0,Ee.block_start=0,Ee.insert=0),We=new s.Buf8(Ee.w_size),s.arraySet(We,Ce,Nt-Ee.w_size,Ee.w_size,0),Ce=We,Nt=Ee.w_size),_e=B.avail_in,Pe=B.next_in,ke=B.input,B.avail_in=Nt,B.next_in=0,B.input=Ce,je(Ee);Ee.lookahead>=P;){for(ce=Ee.strstart,oe=Ee.lookahead-(P-1);Ee.ins_h=(Ee.ins_h<<Ee.hash_shift^Ee.window[ce+P-1])&Ee.hash_mask,Ee.prev[ce&Ee.w_mask]=Ee.head[Ee.ins_h],Ee.head[Ee.ins_h]=ce,ce++,--oe;);Ee.strstart=ce,Ee.lookahead=P-1,je(Ee)}return Ee.strstart+=Ee.lookahead,Ee.block_start=Ee.strstart,Ee.insert=Ee.lookahead,Ee.lookahead=0,Ee.match_length=Ee.prev_length=P-1,Ee.match_available=0,B.next_in=Pe,B.input=ke,B.avail_in=_e,Ee.wrap=ee,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,s){var o,l,u,d,h,m,g,v,b,w,x,_,E,T,k,R,j,I,P,O,U,M,W,V,ie;o=i.state,l=i.next_in,V=i.input,u=l+(i.avail_in-5),d=i.next_out,ie=i.output,h=d-(s-i.avail_out),m=d+(i.avail_out-257),g=o.dmax,v=o.wsize,b=o.whave,w=o.wnext,x=o.window,_=o.hold,E=o.bits,T=o.lencode,k=o.distcode,R=(1<<o.lenbits)-1,j=(1<<o.distbits)-1;e:do{E<15&&(_+=V[l++]<<E,E+=8,_+=V[l++]<<E,E+=8),I=T[_&R];t:for(;;){if(_>>>=P=I>>>24,E-=P,(P=I>>>16&255)===0)ie[d++]=65535&I;else{if(!(16&P)){if((64&P)==0){I=T[(65535&I)+(_&(1<<P)-1)];continue t}if(32&P){o.mode=12;break e}i.msg="invalid literal/length code",o.mode=30;break e}O=65535&I,(P&=15)&&(E<P&&(_+=V[l++]<<E,E+=8),O+=_&(1<<P)-1,_>>>=P,E-=P),E<15&&(_+=V[l++]<<E,E+=8,_+=V[l++]<<E,E+=8),I=k[_&j];n:for(;;){if(_>>>=P=I>>>24,E-=P,!(16&(P=I>>>16&255))){if((64&P)==0){I=k[(65535&I)+(_&(1<<P)-1)];continue n}i.msg="invalid distance code",o.mode=30;break e}if(U=65535&I,E<(P&=15)&&(_+=V[l++]<<E,(E+=8)<P&&(_+=V[l++]<<E,E+=8)),g<(U+=_&(1<<P)-1)){i.msg="invalid distance too far back",o.mode=30;break e}if(_>>>=P,E-=P,(P=d-h)<U){if(b<(P=U-P)&&o.sane){i.msg="invalid distance too far back",o.mode=30;break e}if(W=x,(M=0)===w){if(M+=v-P,P<O){for(O-=P;ie[d++]=x[M++],--P;);M=d-U,W=ie}}else if(w<P){if(M+=v+w-P,(P-=w)<O){for(O-=P;ie[d++]=x[M++],--P;);if(M=0,w<O){for(O-=P=w;ie[d++]=x[M++],--P;);M=d-U,W=ie}}}else if(M+=w-P,P<O){for(O-=P;ie[d++]=x[M++],--P;);M=d-U,W=ie}for(;2<O;)ie[d++]=W[M++],ie[d++]=W[M++],ie[d++]=W[M++],O-=3;O&&(ie[d++]=W[M++],1<O&&(ie[d++]=W[M++]))}else{for(M=d-U;ie[d++]=ie[M++],ie[d++]=ie[M++],ie[d++]=ie[M++],2<(O-=3););O&&(ie[d++]=ie[M++],1<O&&(ie[d++]=ie[M++]))}break}}break}}while(l<u&&d<m);l-=O=E>>3,_&=(1<<(E-=O<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<m?m-d+257:257-(d-m),o.hold=_,o.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),s=n("./adler32"),o=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,m=0,g=-2,v=1,b=852,w=592;function x(M){return(M>>>24&255)+(M>>>8&65280)+((65280&M)<<8)+((255&M)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(M){var W;return M&&M.state?(W=M.state,M.total_in=M.total_out=W.total=0,M.msg="",W.wrap&&(M.adler=1&W.wrap),W.mode=v,W.last=0,W.havedict=0,W.dmax=32768,W.head=null,W.hold=0,W.bits=0,W.lencode=W.lendyn=new i.Buf32(b),W.distcode=W.distdyn=new i.Buf32(w),W.sane=1,W.back=-1,m):g}function T(M){var W;return M&&M.state?((W=M.state).wsize=0,W.whave=0,W.wnext=0,E(M)):g}function k(M,W){var V,ie;return M&&M.state?(ie=M.state,W<0?(V=0,W=-W):(V=1+(W>>4),W<48&&(W&=15)),W&&(W<8||15<W)?g:(ie.window!==null&&ie.wbits!==W&&(ie.window=null),ie.wrap=V,ie.wbits=W,T(M))):g}function R(M,W){var V,ie;return M?(ie=new _,(M.state=ie).window=null,(V=k(M,W))!==m&&(M.state=null),V):g}var j,I,P=!0;function O(M){if(P){var W;for(j=new i.Buf32(512),I=new i.Buf32(32),W=0;W<144;)M.lens[W++]=8;for(;W<256;)M.lens[W++]=9;for(;W<280;)M.lens[W++]=7;for(;W<288;)M.lens[W++]=8;for(u(d,M.lens,0,288,j,0,M.work,{bits:9}),W=0;W<32;)M.lens[W++]=5;u(h,M.lens,0,32,I,0,M.work,{bits:5}),P=!1}M.lencode=j,M.lenbits=9,M.distcode=I,M.distbits=5}function U(M,W,V,ie){var ae,ne=M.state;return ne.window===null&&(ne.wsize=1<<ne.wbits,ne.wnext=0,ne.whave=0,ne.window=new i.Buf8(ne.wsize)),ie>=ne.wsize?(i.arraySet(ne.window,W,V-ne.wsize,ne.wsize,0),ne.wnext=0,ne.whave=ne.wsize):(ie<(ae=ne.wsize-ne.wnext)&&(ae=ie),i.arraySet(ne.window,W,V-ie,ae,ne.wnext),(ie-=ae)?(i.arraySet(ne.window,W,V-ie,ie,0),ne.wnext=ie,ne.whave=ne.wsize):(ne.wnext+=ae,ne.wnext===ne.wsize&&(ne.wnext=0),ne.whave<ne.wsize&&(ne.whave+=ae))),0}a.inflateReset=T,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(M){return R(M,15)},a.inflateInit2=R,a.inflate=function(M,W){var V,ie,ae,ne,q,te,G,J,Q,se,fe,ve,je,Ne,Se,ye,Fe,Xe,Le,Ie,B,Ce,Ee,ce,oe=0,ee=new i.Buf8(4),_e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!M||!M.state||!M.output||!M.input&&M.avail_in!==0)return g;(V=M.state).mode===12&&(V.mode=13),q=M.next_out,ae=M.output,G=M.avail_out,ne=M.next_in,ie=M.input,te=M.avail_in,J=V.hold,Q=V.bits,se=te,fe=G,Ce=m;e:for(;;)switch(V.mode){case v:if(V.wrap===0){V.mode=13;break}for(;Q<16;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(2&V.wrap&&J===35615){ee[V.check=0]=255&J,ee[1]=J>>>8&255,V.check=o(V.check,ee,2,0),Q=J=0,V.mode=2;break}if(V.flags=0,V.head&&(V.head.done=!1),!(1&V.wrap)||(((255&J)<<8)+(J>>8))%31){M.msg="incorrect header check",V.mode=30;break}if((15&J)!=8){M.msg="unknown compression method",V.mode=30;break}if(Q-=4,B=8+(15&(J>>>=4)),V.wbits===0)V.wbits=B;else if(B>V.wbits){M.msg="invalid window size",V.mode=30;break}V.dmax=1<<B,M.adler=V.check=1,V.mode=512&J?10:12,Q=J=0;break;case 2:for(;Q<16;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(V.flags=J,(255&V.flags)!=8){M.msg="unknown compression method",V.mode=30;break}if(57344&V.flags){M.msg="unknown header flags set",V.mode=30;break}V.head&&(V.head.text=J>>8&1),512&V.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,V.check=o(V.check,ee,2,0)),Q=J=0,V.mode=3;case 3:for(;Q<32;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}V.head&&(V.head.time=J),512&V.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,ee[2]=J>>>16&255,ee[3]=J>>>24&255,V.check=o(V.check,ee,4,0)),Q=J=0,V.mode=4;case 4:for(;Q<16;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}V.head&&(V.head.xflags=255&J,V.head.os=J>>8),512&V.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,V.check=o(V.check,ee,2,0)),Q=J=0,V.mode=5;case 5:if(1024&V.flags){for(;Q<16;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}V.length=J,V.head&&(V.head.extra_len=J),512&V.flags&&(ee[0]=255&J,ee[1]=J>>>8&255,V.check=o(V.check,ee,2,0)),Q=J=0}else V.head&&(V.head.extra=null);V.mode=6;case 6:if(1024&V.flags&&(te<(ve=V.length)&&(ve=te),ve&&(V.head&&(B=V.head.extra_len-V.length,V.head.extra||(V.head.extra=new Array(V.head.extra_len)),i.arraySet(V.head.extra,ie,ne,ve,B)),512&V.flags&&(V.check=o(V.check,ie,ve,ne)),te-=ve,ne+=ve,V.length-=ve),V.length))break e;V.length=0,V.mode=7;case 7:if(2048&V.flags){if(te===0)break e;for(ve=0;B=ie[ne+ve++],V.head&&B&&V.length<65536&&(V.head.name+=String.fromCharCode(B)),B&&ve<te;);if(512&V.flags&&(V.check=o(V.check,ie,ve,ne)),te-=ve,ne+=ve,B)break e}else V.head&&(V.head.name=null);V.length=0,V.mode=8;case 8:if(4096&V.flags){if(te===0)break e;for(ve=0;B=ie[ne+ve++],V.head&&B&&V.length<65536&&(V.head.comment+=String.fromCharCode(B)),B&&ve<te;);if(512&V.flags&&(V.check=o(V.check,ie,ve,ne)),te-=ve,ne+=ve,B)break e}else V.head&&(V.head.comment=null);V.mode=9;case 9:if(512&V.flags){for(;Q<16;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(J!==(65535&V.check)){M.msg="header crc mismatch",V.mode=30;break}Q=J=0}V.head&&(V.head.hcrc=V.flags>>9&1,V.head.done=!0),M.adler=V.check=0,V.mode=12;break;case 10:for(;Q<32;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}M.adler=V.check=x(J),Q=J=0,V.mode=11;case 11:if(V.havedict===0)return M.next_out=q,M.avail_out=G,M.next_in=ne,M.avail_in=te,V.hold=J,V.bits=Q,2;M.adler=V.check=1,V.mode=12;case 12:if(W===5||W===6)break e;case 13:if(V.last){J>>>=7&Q,Q-=7&Q,V.mode=27;break}for(;Q<3;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}switch(V.last=1&J,Q-=1,3&(J>>>=1)){case 0:V.mode=14;break;case 1:if(O(V),V.mode=20,W!==6)break;J>>>=2,Q-=2;break e;case 2:V.mode=17;break;case 3:M.msg="invalid block type",V.mode=30}J>>>=2,Q-=2;break;case 14:for(J>>>=7&Q,Q-=7&Q;Q<32;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if((65535&J)!=(J>>>16^65535)){M.msg="invalid stored block lengths",V.mode=30;break}if(V.length=65535&J,Q=J=0,V.mode=15,W===6)break e;case 15:V.mode=16;case 16:if(ve=V.length){if(te<ve&&(ve=te),G<ve&&(ve=G),ve===0)break e;i.arraySet(ae,ie,ne,ve,q),te-=ve,ne+=ve,G-=ve,q+=ve,V.length-=ve;break}V.mode=12;break;case 17:for(;Q<14;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(V.nlen=257+(31&J),J>>>=5,Q-=5,V.ndist=1+(31&J),J>>>=5,Q-=5,V.ncode=4+(15&J),J>>>=4,Q-=4,286<V.nlen||30<V.ndist){M.msg="too many length or distance symbols",V.mode=30;break}V.have=0,V.mode=18;case 18:for(;V.have<V.ncode;){for(;Q<3;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}V.lens[_e[V.have++]]=7&J,J>>>=3,Q-=3}for(;V.have<19;)V.lens[_e[V.have++]]=0;if(V.lencode=V.lendyn,V.lenbits=7,Ee={bits:V.lenbits},Ce=u(0,V.lens,0,19,V.lencode,0,V.work,Ee),V.lenbits=Ee.bits,Ce){M.msg="invalid code lengths set",V.mode=30;break}V.have=0,V.mode=19;case 19:for(;V.have<V.nlen+V.ndist;){for(;ye=(oe=V.lencode[J&(1<<V.lenbits)-1])>>>16&255,Fe=65535&oe,!((Se=oe>>>24)<=Q);){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(Fe<16)J>>>=Se,Q-=Se,V.lens[V.have++]=Fe;else{if(Fe===16){for(ce=Se+2;Q<ce;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(J>>>=Se,Q-=Se,V.have===0){M.msg="invalid bit length repeat",V.mode=30;break}B=V.lens[V.have-1],ve=3+(3&J),J>>>=2,Q-=2}else if(Fe===17){for(ce=Se+3;Q<ce;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}Q-=Se,B=0,ve=3+(7&(J>>>=Se)),J>>>=3,Q-=3}else{for(ce=Se+7;Q<ce;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}Q-=Se,B=0,ve=11+(127&(J>>>=Se)),J>>>=7,Q-=7}if(V.have+ve>V.nlen+V.ndist){M.msg="invalid bit length repeat",V.mode=30;break}for(;ve--;)V.lens[V.have++]=B}}if(V.mode===30)break;if(V.lens[256]===0){M.msg="invalid code -- missing end-of-block",V.mode=30;break}if(V.lenbits=9,Ee={bits:V.lenbits},Ce=u(d,V.lens,0,V.nlen,V.lencode,0,V.work,Ee),V.lenbits=Ee.bits,Ce){M.msg="invalid literal/lengths set",V.mode=30;break}if(V.distbits=6,V.distcode=V.distdyn,Ee={bits:V.distbits},Ce=u(h,V.lens,V.nlen,V.ndist,V.distcode,0,V.work,Ee),V.distbits=Ee.bits,Ce){M.msg="invalid distances set",V.mode=30;break}if(V.mode=20,W===6)break e;case 20:V.mode=21;case 21:if(6<=te&&258<=G){M.next_out=q,M.avail_out=G,M.next_in=ne,M.avail_in=te,V.hold=J,V.bits=Q,l(M,fe),q=M.next_out,ae=M.output,G=M.avail_out,ne=M.next_in,ie=M.input,te=M.avail_in,J=V.hold,Q=V.bits,V.mode===12&&(V.back=-1);break}for(V.back=0;ye=(oe=V.lencode[J&(1<<V.lenbits)-1])>>>16&255,Fe=65535&oe,!((Se=oe>>>24)<=Q);){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(ye&&(240&ye)==0){for(Xe=Se,Le=ye,Ie=Fe;ye=(oe=V.lencode[Ie+((J&(1<<Xe+Le)-1)>>Xe)])>>>16&255,Fe=65535&oe,!(Xe+(Se=oe>>>24)<=Q);){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}J>>>=Xe,Q-=Xe,V.back+=Xe}if(J>>>=Se,Q-=Se,V.back+=Se,V.length=Fe,ye===0){V.mode=26;break}if(32&ye){V.back=-1,V.mode=12;break}if(64&ye){M.msg="invalid literal/length code",V.mode=30;break}V.extra=15&ye,V.mode=22;case 22:if(V.extra){for(ce=V.extra;Q<ce;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}V.length+=J&(1<<V.extra)-1,J>>>=V.extra,Q-=V.extra,V.back+=V.extra}V.was=V.length,V.mode=23;case 23:for(;ye=(oe=V.distcode[J&(1<<V.distbits)-1])>>>16&255,Fe=65535&oe,!((Se=oe>>>24)<=Q);){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if((240&ye)==0){for(Xe=Se,Le=ye,Ie=Fe;ye=(oe=V.distcode[Ie+((J&(1<<Xe+Le)-1)>>Xe)])>>>16&255,Fe=65535&oe,!(Xe+(Se=oe>>>24)<=Q);){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}J>>>=Xe,Q-=Xe,V.back+=Xe}if(J>>>=Se,Q-=Se,V.back+=Se,64&ye){M.msg="invalid distance code",V.mode=30;break}V.offset=Fe,V.extra=15&ye,V.mode=24;case 24:if(V.extra){for(ce=V.extra;Q<ce;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}V.offset+=J&(1<<V.extra)-1,J>>>=V.extra,Q-=V.extra,V.back+=V.extra}if(V.offset>V.dmax){M.msg="invalid distance too far back",V.mode=30;break}V.mode=25;case 25:if(G===0)break e;if(ve=fe-G,V.offset>ve){if((ve=V.offset-ve)>V.whave&&V.sane){M.msg="invalid distance too far back",V.mode=30;break}je=ve>V.wnext?(ve-=V.wnext,V.wsize-ve):V.wnext-ve,ve>V.length&&(ve=V.length),Ne=V.window}else Ne=ae,je=q-V.offset,ve=V.length;for(G<ve&&(ve=G),G-=ve,V.length-=ve;ae[q++]=Ne[je++],--ve;);V.length===0&&(V.mode=21);break;case 26:if(G===0)break e;ae[q++]=V.length,G--,V.mode=21;break;case 27:if(V.wrap){for(;Q<32;){if(te===0)break e;te--,J|=ie[ne++]<<Q,Q+=8}if(fe-=G,M.total_out+=fe,V.total+=fe,fe&&(M.adler=V.check=V.flags?o(V.check,ae,fe,q-fe):s(V.check,ae,fe,q-fe)),fe=G,(V.flags?J:x(J))!==V.check){M.msg="incorrect data check",V.mode=30;break}Q=J=0}V.mode=28;case 28:if(V.wrap&&V.flags){for(;Q<32;){if(te===0)break e;te--,J+=ie[ne++]<<Q,Q+=8}if(J!==(4294967295&V.total)){M.msg="incorrect length check",V.mode=30;break}Q=J=0}V.mode=29;case 29:Ce=1;break e;case 30:Ce=-3;break e;case 31:return-4;case 32:default:return g}return M.next_out=q,M.avail_out=G,M.next_in=ne,M.avail_in=te,V.hold=J,V.bits=Q,(V.wsize||fe!==M.avail_out&&V.mode<30&&(V.mode<27||W!==4))&&U(M,M.output,M.next_out,fe-M.avail_out)?(V.mode=31,-4):(se-=M.avail_in,fe-=M.avail_out,M.total_in+=se,M.total_out+=fe,V.total+=fe,V.wrap&&fe&&(M.adler=V.check=V.flags?o(V.check,ae,fe,M.next_out-fe):s(V.check,ae,fe,M.next_out-fe)),M.data_type=V.bits+(V.last?64:0)+(V.mode===12?128:0)+(V.mode===20||V.mode===15?256:0),(se==0&&fe===0||W===4)&&Ce===m&&(Ce=-5),Ce)},a.inflateEnd=function(M){if(!M||!M.state)return g;var W=M.state;return W.window&&(W.window=null),M.state=null,m},a.inflateGetHeader=function(M,W){var V;return M&&M.state?(2&(V=M.state).wrap)==0?g:((V.head=W).done=!1,m):g},a.inflateSetDictionary=function(M,W){var V,ie=W.length;return M&&M.state?(V=M.state).wrap!==0&&V.mode!==11?g:V.mode===11&&s(1,W,ie,0)!==V.check?-3:U(M,W,ie,ie)?(V.mode=31,-4):(V.havedict=1,m):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,m,g,v,b,w,x){var _,E,T,k,R,j,I,P,O,U=x.bits,M=0,W=0,V=0,ie=0,ae=0,ne=0,q=0,te=0,G=0,J=0,Q=null,se=0,fe=new i.Buf16(16),ve=new i.Buf16(16),je=null,Ne=0;for(M=0;M<=15;M++)fe[M]=0;for(W=0;W<g;W++)fe[h[m+W]]++;for(ae=U,ie=15;1<=ie&&fe[ie]===0;ie--);if(ie<ae&&(ae=ie),ie===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for(V=1;V<ie&&fe[V]===0;V++);for(ae<V&&(ae=V),M=te=1;M<=15;M++)if(te<<=1,(te-=fe[M])<0)return-1;if(0<te&&(d===0||ie!==1))return-1;for(ve[1]=0,M=1;M<15;M++)ve[M+1]=ve[M]+fe[M];for(W=0;W<g;W++)h[m+W]!==0&&(w[ve[h[m+W]]++]=W);if(j=d===0?(Q=je=w,19):d===1?(Q=s,se-=257,je=o,Ne-=257,256):(Q=l,je=u,-1),M=V,R=b,q=W=J=0,T=-1,k=(G=1<<(ne=ae))-1,d===1&&852<G||d===2&&592<G)return 1;for(;;){for(I=M-q,O=w[W]<j?(P=0,w[W]):w[W]>j?(P=je[Ne+w[W]],Q[se+w[W]]):(P=96,0),_=1<<M-q,V=E=1<<ne;v[R+(J>>q)+(E-=_)]=I<<24|P<<16|O|0,E!==0;);for(_=1<<M-1;J&_;)_>>=1;if(_!==0?(J&=_-1,J+=_):J=0,W++,--fe[M]==0){if(M===ie)break;M=h[m+w[W]]}if(ae<M&&(J&k)!==T){for(q===0&&(q=ae),R+=V,te=1<<(ne=M-q);ne+q<ie&&!((te-=fe[ne+q])<=0);)ne++,te<<=1;if(G+=1<<ne,d===1&&852<G||d===2&&592<G)return 1;v[T=J&k]=ae<<24|ne<<16|R-b|0}}return J!==0&&(v[R+J]=M-q<<24|64<<16|0),x.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),s=0,o=1;function l(oe){for(var ee=oe.length;0<=--ee;)oe[ee]=0}var u=0,d=29,h=256,m=h+1+d,g=30,v=19,b=2*m+1,w=15,x=16,_=7,E=256,T=16,k=17,R=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],P=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],U=new Array(2*(m+2));l(U);var M=new Array(2*g);l(M);var W=new Array(512);l(W);var V=new Array(256);l(V);var ie=new Array(d);l(ie);var ae,ne,q,te=new Array(g);function G(oe,ee,_e,Pe,ke){this.static_tree=oe,this.extra_bits=ee,this.extra_base=_e,this.elems=Pe,this.max_length=ke,this.has_stree=oe&&oe.length}function J(oe,ee){this.dyn_tree=oe,this.max_code=0,this.stat_desc=ee}function Q(oe){return oe<256?W[oe]:W[256+(oe>>>7)]}function se(oe,ee){oe.pending_buf[oe.pending++]=255&ee,oe.pending_buf[oe.pending++]=ee>>>8&255}function fe(oe,ee,_e){oe.bi_valid>x-_e?(oe.bi_buf|=ee<<oe.bi_valid&65535,se(oe,oe.bi_buf),oe.bi_buf=ee>>x-oe.bi_valid,oe.bi_valid+=_e-x):(oe.bi_buf|=ee<<oe.bi_valid&65535,oe.bi_valid+=_e)}function ve(oe,ee,_e){fe(oe,_e[2*ee],_e[2*ee+1])}function je(oe,ee){for(var _e=0;_e|=1&oe,oe>>>=1,_e<<=1,0<--ee;);return _e>>>1}function Ne(oe,ee,_e){var Pe,ke,We=new Array(w+1),Nt=0;for(Pe=1;Pe<=w;Pe++)We[Pe]=Nt=Nt+_e[Pe-1]<<1;for(ke=0;ke<=ee;ke++){var it=oe[2*ke+1];it!==0&&(oe[2*ke]=je(We[it]++,it))}}function Se(oe){var ee;for(ee=0;ee<m;ee++)oe.dyn_ltree[2*ee]=0;for(ee=0;ee<g;ee++)oe.dyn_dtree[2*ee]=0;for(ee=0;ee<v;ee++)oe.bl_tree[2*ee]=0;oe.dyn_ltree[2*E]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function ye(oe){8<oe.bi_valid?se(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Fe(oe,ee,_e,Pe){var ke=2*ee,We=2*_e;return oe[ke]<oe[We]||oe[ke]===oe[We]&&Pe[ee]<=Pe[_e]}function Xe(oe,ee,_e){for(var Pe=oe.heap[_e],ke=_e<<1;ke<=oe.heap_len&&(ke<oe.heap_len&&Fe(ee,oe.heap[ke+1],oe.heap[ke],oe.depth)&&ke++,!Fe(ee,Pe,oe.heap[ke],oe.depth));)oe.heap[_e]=oe.heap[ke],_e=ke,ke<<=1;oe.heap[_e]=Pe}function Le(oe,ee,_e){var Pe,ke,We,Nt,it=0;if(oe.last_lit!==0)for(;Pe=oe.pending_buf[oe.d_buf+2*it]<<8|oe.pending_buf[oe.d_buf+2*it+1],ke=oe.pending_buf[oe.l_buf+it],it++,Pe===0?ve(oe,ke,ee):(ve(oe,(We=V[ke])+h+1,ee),(Nt=j[We])!==0&&fe(oe,ke-=ie[We],Nt),ve(oe,We=Q(--Pe),_e),(Nt=I[We])!==0&&fe(oe,Pe-=te[We],Nt)),it<oe.last_lit;);ve(oe,E,ee)}function Ie(oe,ee){var _e,Pe,ke,We=ee.dyn_tree,Nt=ee.stat_desc.static_tree,it=ee.stat_desc.has_stree,Ct=ee.stat_desc.elems,Ft=-1;for(oe.heap_len=0,oe.heap_max=b,_e=0;_e<Ct;_e++)We[2*_e]!==0?(oe.heap[++oe.heap_len]=Ft=_e,oe.depth[_e]=0):We[2*_e+1]=0;for(;oe.heap_len<2;)We[2*(ke=oe.heap[++oe.heap_len]=Ft<2?++Ft:0)]=1,oe.depth[ke]=0,oe.opt_len--,it&&(oe.static_len-=Nt[2*ke+1]);for(ee.max_code=Ft,_e=oe.heap_len>>1;1<=_e;_e--)Xe(oe,We,_e);for(ke=Ct;_e=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],Xe(oe,We,1),Pe=oe.heap[1],oe.heap[--oe.heap_max]=_e,oe.heap[--oe.heap_max]=Pe,We[2*ke]=We[2*_e]+We[2*Pe],oe.depth[ke]=(oe.depth[_e]>=oe.depth[Pe]?oe.depth[_e]:oe.depth[Pe])+1,We[2*_e+1]=We[2*Pe+1]=ke,oe.heap[1]=ke++,Xe(oe,We,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],function(Mt,Zt){var be,D,Z,he,De,we,Ae=Zt.dyn_tree,ue=Zt.max_code,ft=Zt.stat_desc.static_tree,wt=Zt.stat_desc.has_stree,L=Zt.stat_desc.extra_bits,$e=Zt.stat_desc.extra_base,nt=Zt.stat_desc.max_length,ge=0;for(he=0;he<=w;he++)Mt.bl_count[he]=0;for(Ae[2*Mt.heap[Mt.heap_max]+1]=0,be=Mt.heap_max+1;be<b;be++)nt<(he=Ae[2*Ae[2*(D=Mt.heap[be])+1]+1]+1)&&(he=nt,ge++),Ae[2*D+1]=he,ue<D||(Mt.bl_count[he]++,De=0,$e<=D&&(De=L[D-$e]),we=Ae[2*D],Mt.opt_len+=we*(he+De),wt&&(Mt.static_len+=we*(ft[2*D+1]+De)));if(ge!==0){do{for(he=nt-1;Mt.bl_count[he]===0;)he--;Mt.bl_count[he]--,Mt.bl_count[he+1]+=2,Mt.bl_count[nt]--,ge-=2}while(0<ge);for(he=nt;he!==0;he--)for(D=Mt.bl_count[he];D!==0;)ue<(Z=Mt.heap[--be])||(Ae[2*Z+1]!==he&&(Mt.opt_len+=(he-Ae[2*Z+1])*Ae[2*Z],Ae[2*Z+1]=he),D--)}}(oe,ee),Ne(We,Ft,oe.bl_count)}function B(oe,ee,_e){var Pe,ke,We=-1,Nt=ee[1],it=0,Ct=7,Ft=4;for(Nt===0&&(Ct=138,Ft=3),ee[2*(_e+1)+1]=65535,Pe=0;Pe<=_e;Pe++)ke=Nt,Nt=ee[2*(Pe+1)+1],++it<Ct&&ke===Nt||(it<Ft?oe.bl_tree[2*ke]+=it:ke!==0?(ke!==We&&oe.bl_tree[2*ke]++,oe.bl_tree[2*T]++):it<=10?oe.bl_tree[2*k]++:oe.bl_tree[2*R]++,We=ke,Ft=(it=0)===Nt?(Ct=138,3):ke===Nt?(Ct=6,3):(Ct=7,4))}function Ce(oe,ee,_e){var Pe,ke,We=-1,Nt=ee[1],it=0,Ct=7,Ft=4;for(Nt===0&&(Ct=138,Ft=3),Pe=0;Pe<=_e;Pe++)if(ke=Nt,Nt=ee[2*(Pe+1)+1],!(++it<Ct&&ke===Nt)){if(it<Ft)for(;ve(oe,ke,oe.bl_tree),--it!=0;);else ke!==0?(ke!==We&&(ve(oe,ke,oe.bl_tree),it--),ve(oe,T,oe.bl_tree),fe(oe,it-3,2)):it<=10?(ve(oe,k,oe.bl_tree),fe(oe,it-3,3)):(ve(oe,R,oe.bl_tree),fe(oe,it-11,7));We=ke,Ft=(it=0)===Nt?(Ct=138,3):ke===Nt?(Ct=6,3):(Ct=7,4)}}l(te);var Ee=!1;function ce(oe,ee,_e,Pe){fe(oe,(u<<1)+(Pe?1:0),3),function(ke,We,Nt,it){ye(ke),se(ke,Nt),se(ke,~Nt),i.arraySet(ke.pending_buf,ke.window,We,Nt,ke.pending),ke.pending+=Nt}(oe,ee,_e)}a._tr_init=function(oe){Ee||(function(){var ee,_e,Pe,ke,We,Nt=new Array(w+1);for(ke=Pe=0;ke<d-1;ke++)for(ie[ke]=Pe,ee=0;ee<1<<j[ke];ee++)V[Pe++]=ke;for(V[Pe-1]=ke,ke=We=0;ke<16;ke++)for(te[ke]=We,ee=0;ee<1<<I[ke];ee++)W[We++]=ke;for(We>>=7;ke<g;ke++)for(te[ke]=We<<7,ee=0;ee<1<<I[ke]-7;ee++)W[256+We++]=ke;for(_e=0;_e<=w;_e++)Nt[_e]=0;for(ee=0;ee<=143;)U[2*ee+1]=8,ee++,Nt[8]++;for(;ee<=255;)U[2*ee+1]=9,ee++,Nt[9]++;for(;ee<=279;)U[2*ee+1]=7,ee++,Nt[7]++;for(;ee<=287;)U[2*ee+1]=8,ee++,Nt[8]++;for(Ne(U,m+1,Nt),ee=0;ee<g;ee++)M[2*ee+1]=5,M[2*ee]=je(ee,5);ae=new G(U,j,h+1,m,w),ne=new G(M,I,0,g,w),q=new G(new Array(0),P,0,v,_)}(),Ee=!0),oe.l_desc=new J(oe.dyn_ltree,ae),oe.d_desc=new J(oe.dyn_dtree,ne),oe.bl_desc=new J(oe.bl_tree,q),oe.bi_buf=0,oe.bi_valid=0,Se(oe)},a._tr_stored_block=ce,a._tr_flush_block=function(oe,ee,_e,Pe){var ke,We,Nt=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=function(it){var Ct,Ft=4093624447;for(Ct=0;Ct<=31;Ct++,Ft>>>=1)if(1&Ft&&it.dyn_ltree[2*Ct]!==0)return s;if(it.dyn_ltree[18]!==0||it.dyn_ltree[20]!==0||it.dyn_ltree[26]!==0)return o;for(Ct=32;Ct<h;Ct++)if(it.dyn_ltree[2*Ct]!==0)return o;return s}(oe)),Ie(oe,oe.l_desc),Ie(oe,oe.d_desc),Nt=function(it){var Ct;for(B(it,it.dyn_ltree,it.l_desc.max_code),B(it,it.dyn_dtree,it.d_desc.max_code),Ie(it,it.bl_desc),Ct=v-1;3<=Ct&&it.bl_tree[2*O[Ct]+1]===0;Ct--);return it.opt_len+=3*(Ct+1)+5+5+4,Ct}(oe),ke=oe.opt_len+3+7>>>3,(We=oe.static_len+3+7>>>3)<=ke&&(ke=We)):ke=We=_e+5,_e+4<=ke&&ee!==-1?ce(oe,ee,_e,Pe):oe.strategy===4||We===ke?(fe(oe,2+(Pe?1:0),3),Le(oe,U,M)):(fe(oe,4+(Pe?1:0),3),function(it,Ct,Ft,Mt){var Zt;for(fe(it,Ct-257,5),fe(it,Ft-1,5),fe(it,Mt-4,4),Zt=0;Zt<Mt;Zt++)fe(it,it.bl_tree[2*O[Zt]+1],3);Ce(it,it.dyn_ltree,Ct-1),Ce(it,it.dyn_dtree,Ft-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,Nt+1),Le(oe,oe.dyn_ltree,oe.dyn_dtree)),Se(oe),Pe&&ye(oe)},a._tr_tally=function(oe,ee,_e){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=ee>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&ee,oe.pending_buf[oe.l_buf+oe.last_lit]=255&_e,oe.last_lit++,ee===0?oe.dyn_ltree[2*_e]++:(oe.matches++,ee--,oe.dyn_ltree[2*(V[_e]+h+1)]++,oe.dyn_dtree[2*Q(ee)]++),oe.last_lit===oe.lit_bufsize-1},a._tr_align=function(oe){fe(oe,2,3),ve(oe,E,U),function(ee){ee.bi_valid===16?(se(ee,ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0):8<=ee.bi_valid&&(ee.pending_buf[ee.pending++]=255&ee.bi_buf,ee.bi_buf>>=8,ee.bi_valid-=8)}(oe)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(s,o){if(!s.setImmediate){var l,u,d,h,m=1,g={},v=!1,b=s.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(s);w=w&&w.setTimeout?w:s,l={}.toString.call(s.process)==="[object process]"?function(T){da.nextTick(function(){_(T)})}:function(){if(s.postMessage&&!s.importScripts){var T=!0,k=s.onmessage;return s.onmessage=function(){T=!1},s.postMessage("","*"),s.onmessage=k,T}}()?(h="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(T){s.postMessage(h+T,"*")}):s.MessageChannel?((d=new MessageChannel).port1.onmessage=function(T){_(T.data)},function(T){d.port2.postMessage(T)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(T){var k=b.createElement("script");k.onreadystatechange=function(){_(T),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(T){setTimeout(_,0,T)},w.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var k=new Array(arguments.length-1),R=0;R<k.length;R++)k[R]=arguments[R+1];var j={callback:T,args:k};return g[m]=j,l(m),m++},w.clearImmediate=x}function x(T){delete g[T]}function _(T){if(v)setTimeout(_,0,T);else{var k=g[T];if(k){v=!0;try{(function(R){var j=R.callback,I=R.args;switch(I.length){case 0:j();break;case 1:j(I[0]);break;case 2:j(I[0],I[1]);break;case 3:j(I[0],I[1],I[2]);break;default:j.apply(o,I)}})(k)}finally{x(T),v=!1}}}}function E(T){T.source===s&&typeof T.data=="string"&&T.data.indexOf(h)===0&&_(+T.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof Qd<"u"?Qd:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(qE)),qE.exports}var Noe=Aoe();const j9=xi(Noe),P0=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},nr=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},kl=(...e)=>nr(e.map(t=>t.trim()).filter(Boolean).join("/")),s_=e=>{const t=nr(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},fa=e=>{const t=nr(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},sk=(e,t)=>nr(e==="/"?`/${t}`:`${e}/${t}`);var GE,xD;function Roe(){if(xD)return GE;xD=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof da>"u"||typeof da.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,s=null,o=null;typeof r!="function"&&(a=r,r=null,o=new this.Promise(function(E,T){i=E,s=T})),a=a||{};var l=!1,u=null,d=null,h=null,m=this,g=function(E,T,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(m.queues[t]&&m.queues[t].length===0&&delete m.queues[t],m.domainReentrant&&delete m.domains[t]),l||(o?T?s(T):i(k):typeof r=="function"&&r(T,k),l=!0),E&&m.queues[t]&&m.queues[t].length>0&&m.queues[t].shift()()},v=function(E){if(l)return g(E);u&&(clearTimeout(u),u=null),m.domainReentrant&&E&&(m.domains[t]=da.domain);var T=a.maxExecutionTime||m.maxExecutionTime;if(T&&(h=setTimeout(function(){m.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},T)),n.length===1){var k=!1;try{n(function(R,j){k||(k=!0,g(E,R,j))})}catch(R){k||(k=!0,g(E,R))}}else m._promiseTry(function(){return n()}).then(function(R){g(E,void 0,R)},function(R){g(E,R)})};m.domainReentrant&&da.domain&&(v=da.domain.bind(v));var b=a.maxPending||m.maxPending;if(!m.queues[t])m.queues[t]=[],v(!0);else if(m.domainReentrant&&da.domain&&da.domain===m.domains[t])v(!1);else if(m.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var w=function(){v(!0)};a.skipQueue?m.queues[t].unshift(w):m.queues[t].push(w);var x=a.timeout||m.timeout;x&&(u=setTimeout(function(){u=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var _=a.maxOccupationTime||m.maxOccupationTime;if(_&&(d=setTimeout(function(){m.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},_)),o)return o},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,s=function(l,u){return function(d){i.acquire(l,u,d,a)}},o=t.reduceRight(function(l,u){return s(u,l)},n);if(typeof r=="function")o(r);else return new this.Promise(function(l,u){o.length===1?o(function(d,h){d?u(d):l(h)}):l(o())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},GE=e,GE}var WE,_D;function Ioe(){return _D||(_D=1,WE=Roe()),WE}var joe=Ioe();const F0=xi(joe);var hw={exports:{}},SD;function Doe(){return SD||(SD=1,typeof Object.create=="function"?hw.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:hw.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),hw.exports}var KE,ED;function Moe(){if(ED)return KE;ED=1;var e=uN().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,s=n.length,o=this._len,l=0;l<s;){for(var u=o%i,d=Math.min(s-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];o+=d,l+=d,o%i===0&&this._update(a)}return this._len+=s,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,s=(a-i)/4294967296;this._block.writeUInt32BE(s,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var o=this._hash();return n?o.toString(n):o},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},KE=t,KE}var ZE,CD;function Ooe(){if(CD)return ZE;CD=1;var e=Doe(),t=Moe(),n=uN().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function s(d){return d<<1|d>>>31}function o(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,m,g){return d===0?h&m|~h&g:d===2?h&m|h&g|m&g:h^m^g}return i.prototype._update=function(d){for(var h=this._w,m=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,w=this._e|0,x=0;x<16;++x)h[x]=d.readInt32BE(x*4);for(;x<80;++x)h[x]=s(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var _=0;_<80;++_){var E=~~(_/20),T=o(m)+u(E,g,v,b)+w+h[_]+r[E]|0;w=b,b=v,v=l(g),g=m,m=T}this._a=m+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=w+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},ZE=i,ZE}var Poe=Ooe();const D9=xi(Poe);var YE,TD;function Foe(){if(TD)return YE;TD=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var s="",o=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(s.length<2||o!==2||s.charCodeAt(s.length-1)!==46||s.charCodeAt(s.length-2)!==46){if(s.length>2){var m=s.lastIndexOf("/");if(m!==s.length-1){m===-1?(s="",o=0):(s=s.slice(0,m),o=s.length-1-s.lastIndexOf("/")),l=h,u=0;continue}}else if(s.length===2||s.length===1){s="",o=0,l=h,u=0;continue}}i&&(s.length>0?s+="/..":s="..",o=2)}else s.length>0?s+="/"+a.slice(l+1,h):s=a.slice(l+1,h),o=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return s}function n(a,i){var s=i.dir||i.root,o=i.base||(i.name||"")+(i.ext||"");return s?s===i.root?s+o:s+a+o:o}var r={resolve:function(){for(var i="",s=!1,o,l=arguments.length-1;l>=-1&&!s;l--){var u;l>=0?u=arguments[l]:(o===void 0&&(o=da.cwd()),u=o),e(u),u.length!==0&&(i=u+"/"+i,s=u.charCodeAt(0)===47)}return i=t(i,!s),s?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var s=i.charCodeAt(0)===47,o=i.charCodeAt(i.length-1)===47;return i=t(i,!s),i.length===0&&!s&&(i="."),i.length>0&&o&&(i+="/"),s?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,s=0;s<arguments.length;++s){var o=arguments[s];e(o),o.length>0&&(i===void 0?i=o:i+="/"+o)}return i===void 0?".":r.normalize(i)},relative:function(i,s){if(e(i),e(s),i===s||(i=r.resolve(i),s=r.resolve(s),i===s))return"";for(var o=1;o<i.length&&i.charCodeAt(o)===47;++o);for(var l=i.length,u=l-o,d=1;d<s.length&&s.charCodeAt(d)===47;++d);for(var h=s.length,m=h-d,g=u<m?u:m,v=-1,b=0;b<=g;++b){if(b===g){if(m>g){if(s.charCodeAt(d+b)===47)return s.slice(d+b+1);if(b===0)return s.slice(d+b)}else u>g&&(i.charCodeAt(o+b)===47?v=b:b===0&&(v=0));break}var w=i.charCodeAt(o+b),x=s.charCodeAt(d+b);if(w!==x)break;w===47&&(v=b)}var _="";for(b=o+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+s.slice(d+v):(d+=v,s.charCodeAt(d)===47&&++d,s.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var s=i.charCodeAt(0),o=s===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(s=i.charCodeAt(d),s===47){if(!u){l=d;break}}else u=!1;return l===-1?o?"/":".":o&&l===1?"//":i.slice(0,l)},basename:function(i,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(i);var o=0,l=-1,u=!0,d;if(s!==void 0&&s.length>0&&s.length<=i.length){if(s.length===i.length&&s===i)return"";var h=s.length-1,m=-1;for(d=i.length-1;d>=0;--d){var g=i.charCodeAt(d);if(g===47){if(!u){o=d+1;break}}else m===-1&&(u=!1,m=d+1),h>=0&&(g===s.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=m))}return o===l?l=m:l===-1&&(l=i.length),i.slice(o,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){o=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(o,l)}},extname:function(i){e(i);for(var s=-1,o=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var m=i.charCodeAt(h);if(m===47){if(!u){o=h+1;break}continue}l===-1&&(u=!1,l=h+1),m===46?s===-1?s=h:d!==1&&(d=1):s!==-1&&(d=-1)}return s===-1||l===-1||d===0||d===1&&s===l-1&&s===o+1?"":i.slice(s,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var s={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return s;var o=i.charCodeAt(0),l=o===47,u;l?(s.root="/",u=1):u=0;for(var d=-1,h=0,m=-1,g=!0,v=i.length-1,b=0;v>=u;--v){if(o=i.charCodeAt(v),o===47){if(!g){h=v+1;break}continue}m===-1&&(g=!1,m=v+1),o===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||m===-1||b===0||b===1&&d===m-1&&d===h+1?m!==-1&&(h===0&&l?s.base=s.name=i.slice(1,m):s.base=s.name=i.slice(h,m)):(h===0&&l?(s.name=i.slice(1,d),s.base=i.slice(1,m)):(s.name=i.slice(h,d),s.base=i.slice(h,m)),s.ext=i.slice(d,m)),h>0?s.dir=i.slice(0,h-1):l&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,YE=r,YE}var Pt=Foe(),XE={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var kD;function Loe(){return kD||(kD=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var I=0,P=new Array(256),O=0;O!=256;++O)I=O,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,I=I&1?-306674912^I>>>1:I>>>1,P[O]=I;return typeof Int32Array<"u"?new Int32Array(P):P}var r=n();function a(I){var P=0,O=0,U=0,M=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(U=0;U!=256;++U)M[U]=I[U];for(U=0;U!=256;++U)for(O=I[U],P=256+U;P<4096;P+=256)O=M[P]=O>>>8^I[O&255];var W=[];for(U=1;U!=16;++U)W[U-1]=typeof Int32Array<"u"?M.subarray(U*256,U*256+256):M.slice(U*256,U*256+256);return W}var i=a(r),s=i[0],o=i[1],l=i[2],u=i[3],d=i[4],h=i[5],m=i[6],g=i[7],v=i[8],b=i[9],w=i[10],x=i[11],_=i[12],E=i[13],T=i[14];function k(I,P){for(var O=P^-1,U=0,M=I.length;U<M;)O=O>>>8^r[(O^I.charCodeAt(U++))&255];return~O}function R(I,P){for(var O=P^-1,U=I.length-15,M=0;M<U;)O=T[I[M++]^O&255]^E[I[M++]^O>>8&255]^_[I[M++]^O>>16&255]^x[I[M++]^O>>>24]^w[I[M++]]^b[I[M++]]^v[I[M++]]^g[I[M++]]^m[I[M++]]^h[I[M++]]^d[I[M++]]^u[I[M++]]^l[I[M++]]^o[I[M++]]^s[I[M++]]^r[I[M++]];for(U+=15;M<U;)O=O>>>8^r[(O^I[M++])&255];return~O}function j(I,P){for(var O=P^-1,U=0,M=I.length,W=0,V=0;U<M;)W=I.charCodeAt(U++),W<128?O=O>>>8^r[(O^W)&255]:W<2048?(O=O>>>8^r[(O^(192|W>>6&31))&255],O=O>>>8^r[(O^(128|W&63))&255]):W>=55296&&W<57344?(W=(W&1023)+64,V=I.charCodeAt(U++)&1023,O=O>>>8^r[(O^(240|W>>8&7))&255],O=O>>>8^r[(O^(128|W>>2&63))&255],O=O>>>8^r[(O^(128|V>>6&15|(W&3)<<4))&255],O=O>>>8^r[(O^(128|V&63))&255]):(O=O>>>8^r[(O^(224|W>>12&15))&255],O=O>>>8^r[(O^(128|W>>6&63))&255],O=O>>>8^r[(O^(128|W&63))&255]);return~O}t.table=r,t.bstr=k,t.buf=R,t.str=j})}(XE)),XE}var Boe=Loe();const $oe=xi(Boe);var JE={},AD;function ud(){return AD||(AD=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,s){return Object.prototype.hasOwnProperty.call(i,s)}e.assign=function(i){for(var s=Array.prototype.slice.call(arguments,1);s.length;){var o=s.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var l in o)n(o,l)&&(i[l]=o[l])}}return i},e.shrinkBuf=function(i,s){return i.length===s?i:i.subarray?i.subarray(0,s):(i.length=s,i)};var r={arraySet:function(i,s,o,l,u){if(s.subarray&&i.subarray){i.set(s.subarray(o,o+l),u);return}for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){var s,o,l,u,d,h;for(l=0,s=0,o=i.length;s<o;s++)l+=i[s].length;for(h=new Uint8Array(l),u=0,s=0,o=i.length;s<o;s++)d=i[s],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,s,o,l,u){for(var d=0;d<l;d++)i[u+d]=s[o+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}(JE)),JE}var Fh={},co={},Hd={},ND;function zoe(){if(ND)return Hd;ND=1;var e=ud(),t=4,n=0,r=1,a=2;function i(D){for(var Z=D.length;--Z>=0;)D[Z]=0}var s=0,o=1,l=2,u=3,d=258,h=29,m=256,g=m+1+h,v=30,b=19,w=2*g+1,x=15,_=16,E=7,T=256,k=16,R=17,j=18,I=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=512,W=new Array((g+2)*2);i(W);var V=new Array(v*2);i(V);var ie=new Array(M);i(ie);var ae=new Array(d-u+1);i(ae);var ne=new Array(h);i(ne);var q=new Array(v);i(q);function te(D,Z,he,De,we){this.static_tree=D,this.extra_bits=Z,this.extra_base=he,this.elems=De,this.max_length=we,this.has_stree=D&&D.length}var G,J,Q;function se(D,Z){this.dyn_tree=D,this.max_code=0,this.stat_desc=Z}function fe(D){return D<256?ie[D]:ie[256+(D>>>7)]}function ve(D,Z){D.pending_buf[D.pending++]=Z&255,D.pending_buf[D.pending++]=Z>>>8&255}function je(D,Z,he){D.bi_valid>_-he?(D.bi_buf|=Z<<D.bi_valid&65535,ve(D,D.bi_buf),D.bi_buf=Z>>_-D.bi_valid,D.bi_valid+=he-_):(D.bi_buf|=Z<<D.bi_valid&65535,D.bi_valid+=he)}function Ne(D,Z,he){je(D,he[Z*2],he[Z*2+1])}function Se(D,Z){var he=0;do he|=D&1,D>>>=1,he<<=1;while(--Z>0);return he>>>1}function ye(D){D.bi_valid===16?(ve(D,D.bi_buf),D.bi_buf=0,D.bi_valid=0):D.bi_valid>=8&&(D.pending_buf[D.pending++]=D.bi_buf&255,D.bi_buf>>=8,D.bi_valid-=8)}function Fe(D,Z){var he=Z.dyn_tree,De=Z.max_code,we=Z.stat_desc.static_tree,Ae=Z.stat_desc.has_stree,ue=Z.stat_desc.extra_bits,ft=Z.stat_desc.extra_base,wt=Z.stat_desc.max_length,L,$e,nt,ge,Me,Ke,Dt=0;for(ge=0;ge<=x;ge++)D.bl_count[ge]=0;for(he[D.heap[D.heap_max]*2+1]=0,L=D.heap_max+1;L<w;L++)$e=D.heap[L],ge=he[he[$e*2+1]*2+1]+1,ge>wt&&(ge=wt,Dt++),he[$e*2+1]=ge,!($e>De)&&(D.bl_count[ge]++,Me=0,$e>=ft&&(Me=ue[$e-ft]),Ke=he[$e*2],D.opt_len+=Ke*(ge+Me),Ae&&(D.static_len+=Ke*(we[$e*2+1]+Me)));if(Dt!==0){do{for(ge=wt-1;D.bl_count[ge]===0;)ge--;D.bl_count[ge]--,D.bl_count[ge+1]+=2,D.bl_count[wt]--,Dt-=2}while(Dt>0);for(ge=wt;ge!==0;ge--)for($e=D.bl_count[ge];$e!==0;)nt=D.heap[--L],!(nt>De)&&(he[nt*2+1]!==ge&&(D.opt_len+=(ge-he[nt*2+1])*he[nt*2],he[nt*2+1]=ge),$e--)}}function Xe(D,Z,he){var De=new Array(x+1),we=0,Ae,ue;for(Ae=1;Ae<=x;Ae++)De[Ae]=we=we+he[Ae-1]<<1;for(ue=0;ue<=Z;ue++){var ft=D[ue*2+1];ft!==0&&(D[ue*2]=Se(De[ft]++,ft))}}function Le(){var D,Z,he,De,we,Ae=new Array(x+1);for(he=0,De=0;De<h-1;De++)for(ne[De]=he,D=0;D<1<<I[De];D++)ae[he++]=De;for(ae[he-1]=De,we=0,De=0;De<16;De++)for(q[De]=we,D=0;D<1<<P[De];D++)ie[we++]=De;for(we>>=7;De<v;De++)for(q[De]=we<<7,D=0;D<1<<P[De]-7;D++)ie[256+we++]=De;for(Z=0;Z<=x;Z++)Ae[Z]=0;for(D=0;D<=143;)W[D*2+1]=8,D++,Ae[8]++;for(;D<=255;)W[D*2+1]=9,D++,Ae[9]++;for(;D<=279;)W[D*2+1]=7,D++,Ae[7]++;for(;D<=287;)W[D*2+1]=8,D++,Ae[8]++;for(Xe(W,g+1,Ae),D=0;D<v;D++)V[D*2+1]=5,V[D*2]=Se(D,5);G=new te(W,I,m+1,g,x),J=new te(V,P,0,v,x),Q=new te(new Array(0),O,0,b,E)}function Ie(D){var Z;for(Z=0;Z<g;Z++)D.dyn_ltree[Z*2]=0;for(Z=0;Z<v;Z++)D.dyn_dtree[Z*2]=0;for(Z=0;Z<b;Z++)D.bl_tree[Z*2]=0;D.dyn_ltree[T*2]=1,D.opt_len=D.static_len=0,D.last_lit=D.matches=0}function B(D){D.bi_valid>8?ve(D,D.bi_buf):D.bi_valid>0&&(D.pending_buf[D.pending++]=D.bi_buf),D.bi_buf=0,D.bi_valid=0}function Ce(D,Z,he,De){B(D),ve(D,he),ve(D,~he),e.arraySet(D.pending_buf,D.window,Z,he,D.pending),D.pending+=he}function Ee(D,Z,he,De){var we=Z*2,Ae=he*2;return D[we]<D[Ae]||D[we]===D[Ae]&&De[Z]<=De[he]}function ce(D,Z,he){for(var De=D.heap[he],we=he<<1;we<=D.heap_len&&(we<D.heap_len&&Ee(Z,D.heap[we+1],D.heap[we],D.depth)&&we++,!Ee(Z,De,D.heap[we],D.depth));)D.heap[he]=D.heap[we],he=we,we<<=1;D.heap[he]=De}function oe(D,Z,he){var De,we,Ae=0,ue,ft;if(D.last_lit!==0)do De=D.pending_buf[D.d_buf+Ae*2]<<8|D.pending_buf[D.d_buf+Ae*2+1],we=D.pending_buf[D.l_buf+Ae],Ae++,De===0?Ne(D,we,Z):(ue=ae[we],Ne(D,ue+m+1,Z),ft=I[ue],ft!==0&&(we-=ne[ue],je(D,we,ft)),De--,ue=fe(De),Ne(D,ue,he),ft=P[ue],ft!==0&&(De-=q[ue],je(D,De,ft)));while(Ae<D.last_lit);Ne(D,T,Z)}function ee(D,Z){var he=Z.dyn_tree,De=Z.stat_desc.static_tree,we=Z.stat_desc.has_stree,Ae=Z.stat_desc.elems,ue,ft,wt=-1,L;for(D.heap_len=0,D.heap_max=w,ue=0;ue<Ae;ue++)he[ue*2]!==0?(D.heap[++D.heap_len]=wt=ue,D.depth[ue]=0):he[ue*2+1]=0;for(;D.heap_len<2;)L=D.heap[++D.heap_len]=wt<2?++wt:0,he[L*2]=1,D.depth[L]=0,D.opt_len--,we&&(D.static_len-=De[L*2+1]);for(Z.max_code=wt,ue=D.heap_len>>1;ue>=1;ue--)ce(D,he,ue);L=Ae;do ue=D.heap[1],D.heap[1]=D.heap[D.heap_len--],ce(D,he,1),ft=D.heap[1],D.heap[--D.heap_max]=ue,D.heap[--D.heap_max]=ft,he[L*2]=he[ue*2]+he[ft*2],D.depth[L]=(D.depth[ue]>=D.depth[ft]?D.depth[ue]:D.depth[ft])+1,he[ue*2+1]=he[ft*2+1]=L,D.heap[1]=L++,ce(D,he,1);while(D.heap_len>=2);D.heap[--D.heap_max]=D.heap[1],Fe(D,Z),Xe(he,wt,D.bl_count)}function _e(D,Z,he){var De,we=-1,Ae,ue=Z[0*2+1],ft=0,wt=7,L=4;for(ue===0&&(wt=138,L=3),Z[(he+1)*2+1]=65535,De=0;De<=he;De++)Ae=ue,ue=Z[(De+1)*2+1],!(++ft<wt&&Ae===ue)&&(ft<L?D.bl_tree[Ae*2]+=ft:Ae!==0?(Ae!==we&&D.bl_tree[Ae*2]++,D.bl_tree[k*2]++):ft<=10?D.bl_tree[R*2]++:D.bl_tree[j*2]++,ft=0,we=Ae,ue===0?(wt=138,L=3):Ae===ue?(wt=6,L=3):(wt=7,L=4))}function Pe(D,Z,he){var De,we=-1,Ae,ue=Z[0*2+1],ft=0,wt=7,L=4;for(ue===0&&(wt=138,L=3),De=0;De<=he;De++)if(Ae=ue,ue=Z[(De+1)*2+1],!(++ft<wt&&Ae===ue)){if(ft<L)do Ne(D,Ae,D.bl_tree);while(--ft!==0);else Ae!==0?(Ae!==we&&(Ne(D,Ae,D.bl_tree),ft--),Ne(D,k,D.bl_tree),je(D,ft-3,2)):ft<=10?(Ne(D,R,D.bl_tree),je(D,ft-3,3)):(Ne(D,j,D.bl_tree),je(D,ft-11,7));ft=0,we=Ae,ue===0?(wt=138,L=3):Ae===ue?(wt=6,L=3):(wt=7,L=4)}}function ke(D){var Z;for(_e(D,D.dyn_ltree,D.l_desc.max_code),_e(D,D.dyn_dtree,D.d_desc.max_code),ee(D,D.bl_desc),Z=b-1;Z>=3&&D.bl_tree[U[Z]*2+1]===0;Z--);return D.opt_len+=3*(Z+1)+5+5+4,Z}function We(D,Z,he,De){var we;for(je(D,Z-257,5),je(D,he-1,5),je(D,De-4,4),we=0;we<De;we++)je(D,D.bl_tree[U[we]*2+1],3);Pe(D,D.dyn_ltree,Z-1),Pe(D,D.dyn_dtree,he-1)}function Nt(D){var Z=4093624447,he;for(he=0;he<=31;he++,Z>>>=1)if(Z&1&&D.dyn_ltree[he*2]!==0)return n;if(D.dyn_ltree[9*2]!==0||D.dyn_ltree[10*2]!==0||D.dyn_ltree[13*2]!==0)return r;for(he=32;he<m;he++)if(D.dyn_ltree[he*2]!==0)return r;return n}var it=!1;function Ct(D){it||(Le(),it=!0),D.l_desc=new se(D.dyn_ltree,G),D.d_desc=new se(D.dyn_dtree,J),D.bl_desc=new se(D.bl_tree,Q),D.bi_buf=0,D.bi_valid=0,Ie(D)}function Ft(D,Z,he,De){je(D,(s<<1)+(De?1:0),3),Ce(D,Z,he)}function Mt(D){je(D,o<<1,3),Ne(D,T,W),ye(D)}function Zt(D,Z,he,De){var we,Ae,ue=0;D.level>0?(D.strm.data_type===a&&(D.strm.data_type=Nt(D)),ee(D,D.l_desc),ee(D,D.d_desc),ue=ke(D),we=D.opt_len+3+7>>>3,Ae=D.static_len+3+7>>>3,Ae<=we&&(we=Ae)):we=Ae=he+5,he+4<=we&&Z!==-1?Ft(D,Z,he,De):D.strategy===t||Ae===we?(je(D,(o<<1)+(De?1:0),3),oe(D,W,V)):(je(D,(l<<1)+(De?1:0),3),We(D,D.l_desc.max_code+1,D.d_desc.max_code+1,ue+1),oe(D,D.dyn_ltree,D.dyn_dtree)),Ie(D),De&&B(D)}function be(D,Z,he){return D.pending_buf[D.d_buf+D.last_lit*2]=Z>>>8&255,D.pending_buf[D.d_buf+D.last_lit*2+1]=Z&255,D.pending_buf[D.l_buf+D.last_lit]=he&255,D.last_lit++,Z===0?D.dyn_ltree[he*2]++:(D.matches++,Z--,D.dyn_ltree[(ae[he]+m+1)*2]++,D.dyn_dtree[fe(Z)*2]++),D.last_lit===D.lit_bufsize-1}return Hd._tr_init=Ct,Hd._tr_stored_block=Ft,Hd._tr_flush_block=Zt,Hd._tr_tally=be,Hd._tr_align=Mt,Hd}var QE,RD;function M9(){if(RD)return QE;RD=1;function e(t,n,r,a){for(var i=t&65535|0,s=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+n[a++]|0,s=s+i|0;while(--o);i%=65521,s%=65521}return i|s<<16|0}return QE=e,QE}var eC,ID;function O9(){if(ID)return eC;ID=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var s=0;s<8;s++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,s){var o=t,l=s+i;r^=-1;for(var u=s;u<l;u++)r=r>>>8^o[(r^a[u])&255];return r^-1}return eC=n,eC}var tC,jD;function xN(){return jD||(jD=1,tC={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),tC}var DD;function Uoe(){if(DD)return co;DD=1;var e=ud(),t=zoe(),n=M9(),r=O9(),a=xN(),i=0,s=1,o=3,l=4,u=5,d=0,h=1,m=-2,g=-3,v=-5,b=-1,w=1,x=2,_=3,E=4,T=0,k=2,R=8,j=9,I=15,P=8,O=29,U=256,M=U+1+O,W=30,V=19,ie=2*M+1,ae=15,ne=3,q=258,te=q+ne+1,G=32,J=42,Q=69,se=73,fe=91,ve=103,je=113,Ne=666,Se=1,ye=2,Fe=3,Xe=4,Le=3;function Ie(L,$e){return L.msg=a[$e],$e}function B(L){return(L<<1)-(L>4?9:0)}function Ce(L){for(var $e=L.length;--$e>=0;)L[$e]=0}function Ee(L){var $e=L.state,nt=$e.pending;nt>L.avail_out&&(nt=L.avail_out),nt!==0&&(e.arraySet(L.output,$e.pending_buf,$e.pending_out,nt,L.next_out),L.next_out+=nt,$e.pending_out+=nt,L.total_out+=nt,L.avail_out-=nt,$e.pending-=nt,$e.pending===0&&($e.pending_out=0))}function ce(L,$e){t._tr_flush_block(L,L.block_start>=0?L.block_start:-1,L.strstart-L.block_start,$e),L.block_start=L.strstart,Ee(L.strm)}function oe(L,$e){L.pending_buf[L.pending++]=$e}function ee(L,$e){L.pending_buf[L.pending++]=$e>>>8&255,L.pending_buf[L.pending++]=$e&255}function _e(L,$e,nt,ge){var Me=L.avail_in;return Me>ge&&(Me=ge),Me===0?0:(L.avail_in-=Me,e.arraySet($e,L.input,L.next_in,Me,nt),L.state.wrap===1?L.adler=n(L.adler,$e,Me,nt):L.state.wrap===2&&(L.adler=r(L.adler,$e,Me,nt)),L.next_in+=Me,L.total_in+=Me,Me)}function Pe(L,$e){var nt=L.max_chain_length,ge=L.strstart,Me,Ke,Dt=L.prev_length,me=L.nice_match,K=L.strstart>L.w_size-te?L.strstart-(L.w_size-te):0,H=L.window,Y=L.w_mask,pe=L.prev,Re=L.strstart+q,Ve=H[ge+Dt-1],pt=H[ge+Dt];L.prev_length>=L.good_match&&(nt>>=2),me>L.lookahead&&(me=L.lookahead);do if(Me=$e,!(H[Me+Dt]!==pt||H[Me+Dt-1]!==Ve||H[Me]!==H[ge]||H[++Me]!==H[ge+1])){ge+=2,Me++;do;while(H[++ge]===H[++Me]&&H[++ge]===H[++Me]&&H[++ge]===H[++Me]&&H[++ge]===H[++Me]&&H[++ge]===H[++Me]&&H[++ge]===H[++Me]&&H[++ge]===H[++Me]&&H[++ge]===H[++Me]&&ge<Re);if(Ke=q-(Re-ge),ge=Re-q,Ke>Dt){if(L.match_start=$e,Dt=Ke,Ke>=me)break;Ve=H[ge+Dt-1],pt=H[ge+Dt]}}while(($e=pe[$e&Y])>K&&--nt!==0);return Dt<=L.lookahead?Dt:L.lookahead}function ke(L){var $e=L.w_size,nt,ge,Me,Ke,Dt;do{if(Ke=L.window_size-L.lookahead-L.strstart,L.strstart>=$e+($e-te)){e.arraySet(L.window,L.window,$e,$e,0),L.match_start-=$e,L.strstart-=$e,L.block_start-=$e,ge=L.hash_size,nt=ge;do Me=L.head[--nt],L.head[nt]=Me>=$e?Me-$e:0;while(--ge);ge=$e,nt=ge;do Me=L.prev[--nt],L.prev[nt]=Me>=$e?Me-$e:0;while(--ge);Ke+=$e}if(L.strm.avail_in===0)break;if(ge=_e(L.strm,L.window,L.strstart+L.lookahead,Ke),L.lookahead+=ge,L.lookahead+L.insert>=ne)for(Dt=L.strstart-L.insert,L.ins_h=L.window[Dt],L.ins_h=(L.ins_h<<L.hash_shift^L.window[Dt+1])&L.hash_mask;L.insert&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[Dt+ne-1])&L.hash_mask,L.prev[Dt&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=Dt,Dt++,L.insert--,!(L.lookahead+L.insert<ne)););}while(L.lookahead<te&&L.strm.avail_in!==0)}function We(L,$e){var nt=65535;for(nt>L.pending_buf_size-5&&(nt=L.pending_buf_size-5);;){if(L.lookahead<=1){if(ke(L),L.lookahead===0&&$e===i)return Se;if(L.lookahead===0)break}L.strstart+=L.lookahead,L.lookahead=0;var ge=L.block_start+nt;if((L.strstart===0||L.strstart>=ge)&&(L.lookahead=L.strstart-ge,L.strstart=ge,ce(L,!1),L.strm.avail_out===0)||L.strstart-L.block_start>=L.w_size-te&&(ce(L,!1),L.strm.avail_out===0))return Se}return L.insert=0,$e===l?(ce(L,!0),L.strm.avail_out===0?Fe:Xe):(L.strstart>L.block_start&&(ce(L,!1),L.strm.avail_out===0),Se)}function Nt(L,$e){for(var nt,ge;;){if(L.lookahead<te){if(ke(L),L.lookahead<te&&$e===i)return Se;if(L.lookahead===0)break}if(nt=0,L.lookahead>=ne&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+ne-1])&L.hash_mask,nt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),nt!==0&&L.strstart-nt<=L.w_size-te&&(L.match_length=Pe(L,nt)),L.match_length>=ne)if(ge=t._tr_tally(L,L.strstart-L.match_start,L.match_length-ne),L.lookahead-=L.match_length,L.match_length<=L.max_lazy_match&&L.lookahead>=ne){L.match_length--;do L.strstart++,L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+ne-1])&L.hash_mask,nt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart;while(--L.match_length!==0);L.strstart++}else L.strstart+=L.match_length,L.match_length=0,L.ins_h=L.window[L.strstart],L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+1])&L.hash_mask;else ge=t._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++;if(ge&&(ce(L,!1),L.strm.avail_out===0))return Se}return L.insert=L.strstart<ne-1?L.strstart:ne-1,$e===l?(ce(L,!0),L.strm.avail_out===0?Fe:Xe):L.last_lit&&(ce(L,!1),L.strm.avail_out===0)?Se:ye}function it(L,$e){for(var nt,ge,Me;;){if(L.lookahead<te){if(ke(L),L.lookahead<te&&$e===i)return Se;if(L.lookahead===0)break}if(nt=0,L.lookahead>=ne&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+ne-1])&L.hash_mask,nt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart),L.prev_length=L.match_length,L.prev_match=L.match_start,L.match_length=ne-1,nt!==0&&L.prev_length<L.max_lazy_match&&L.strstart-nt<=L.w_size-te&&(L.match_length=Pe(L,nt),L.match_length<=5&&(L.strategy===w||L.match_length===ne&&L.strstart-L.match_start>4096)&&(L.match_length=ne-1)),L.prev_length>=ne&&L.match_length<=L.prev_length){Me=L.strstart+L.lookahead-ne,ge=t._tr_tally(L,L.strstart-1-L.prev_match,L.prev_length-ne),L.lookahead-=L.prev_length-1,L.prev_length-=2;do++L.strstart<=Me&&(L.ins_h=(L.ins_h<<L.hash_shift^L.window[L.strstart+ne-1])&L.hash_mask,nt=L.prev[L.strstart&L.w_mask]=L.head[L.ins_h],L.head[L.ins_h]=L.strstart);while(--L.prev_length!==0);if(L.match_available=0,L.match_length=ne-1,L.strstart++,ge&&(ce(L,!1),L.strm.avail_out===0))return Se}else if(L.match_available){if(ge=t._tr_tally(L,0,L.window[L.strstart-1]),ge&&ce(L,!1),L.strstart++,L.lookahead--,L.strm.avail_out===0)return Se}else L.match_available=1,L.strstart++,L.lookahead--}return L.match_available&&(ge=t._tr_tally(L,0,L.window[L.strstart-1]),L.match_available=0),L.insert=L.strstart<ne-1?L.strstart:ne-1,$e===l?(ce(L,!0),L.strm.avail_out===0?Fe:Xe):L.last_lit&&(ce(L,!1),L.strm.avail_out===0)?Se:ye}function Ct(L,$e){for(var nt,ge,Me,Ke,Dt=L.window;;){if(L.lookahead<=q){if(ke(L),L.lookahead<=q&&$e===i)return Se;if(L.lookahead===0)break}if(L.match_length=0,L.lookahead>=ne&&L.strstart>0&&(Me=L.strstart-1,ge=Dt[Me],ge===Dt[++Me]&&ge===Dt[++Me]&&ge===Dt[++Me])){Ke=L.strstart+q;do;while(ge===Dt[++Me]&&ge===Dt[++Me]&&ge===Dt[++Me]&&ge===Dt[++Me]&&ge===Dt[++Me]&&ge===Dt[++Me]&&ge===Dt[++Me]&&ge===Dt[++Me]&&Me<Ke);L.match_length=q-(Ke-Me),L.match_length>L.lookahead&&(L.match_length=L.lookahead)}if(L.match_length>=ne?(nt=t._tr_tally(L,1,L.match_length-ne),L.lookahead-=L.match_length,L.strstart+=L.match_length,L.match_length=0):(nt=t._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++),nt&&(ce(L,!1),L.strm.avail_out===0))return Se}return L.insert=0,$e===l?(ce(L,!0),L.strm.avail_out===0?Fe:Xe):L.last_lit&&(ce(L,!1),L.strm.avail_out===0)?Se:ye}function Ft(L,$e){for(var nt;;){if(L.lookahead===0&&(ke(L),L.lookahead===0)){if($e===i)return Se;break}if(L.match_length=0,nt=t._tr_tally(L,0,L.window[L.strstart]),L.lookahead--,L.strstart++,nt&&(ce(L,!1),L.strm.avail_out===0))return Se}return L.insert=0,$e===l?(ce(L,!0),L.strm.avail_out===0?Fe:Xe):L.last_lit&&(ce(L,!1),L.strm.avail_out===0)?Se:ye}function Mt(L,$e,nt,ge,Me){this.good_length=L,this.max_lazy=$e,this.nice_length=nt,this.max_chain=ge,this.func=Me}var Zt;Zt=[new Mt(0,0,0,0,We),new Mt(4,4,8,4,Nt),new Mt(4,5,16,8,Nt),new Mt(4,6,32,32,Nt),new Mt(4,4,16,16,it),new Mt(8,16,32,32,it),new Mt(8,16,128,128,it),new Mt(8,32,128,256,it),new Mt(32,128,258,1024,it),new Mt(32,258,258,4096,it)];function be(L){L.window_size=2*L.w_size,Ce(L.head),L.max_lazy_match=Zt[L.level].max_lazy,L.good_match=Zt[L.level].good_length,L.nice_match=Zt[L.level].nice_length,L.max_chain_length=Zt[L.level].max_chain,L.strstart=0,L.block_start=0,L.lookahead=0,L.insert=0,L.match_length=L.prev_length=ne-1,L.match_available=0,L.ins_h=0}function D(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ie*2),this.dyn_dtree=new e.Buf16((2*W+1)*2),this.bl_tree=new e.Buf16((2*V+1)*2),Ce(this.dyn_ltree),Ce(this.dyn_dtree),Ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*M+1),Ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*M+1),Ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Z(L){var $e;return!L||!L.state?Ie(L,m):(L.total_in=L.total_out=0,L.data_type=k,$e=L.state,$e.pending=0,$e.pending_out=0,$e.wrap<0&&($e.wrap=-$e.wrap),$e.status=$e.wrap?J:je,L.adler=$e.wrap===2?0:1,$e.last_flush=i,t._tr_init($e),d)}function he(L){var $e=Z(L);return $e===d&&be(L.state),$e}function De(L,$e){return!L||!L.state||L.state.wrap!==2?m:(L.state.gzhead=$e,d)}function we(L,$e,nt,ge,Me,Ke){if(!L)return m;var Dt=1;if($e===b&&($e=6),ge<0?(Dt=0,ge=-ge):ge>15&&(Dt=2,ge-=16),Me<1||Me>j||nt!==R||ge<8||ge>15||$e<0||$e>9||Ke<0||Ke>E)return Ie(L,m);ge===8&&(ge=9);var me=new D;return L.state=me,me.strm=L,me.wrap=Dt,me.gzhead=null,me.w_bits=ge,me.w_size=1<<me.w_bits,me.w_mask=me.w_size-1,me.hash_bits=Me+7,me.hash_size=1<<me.hash_bits,me.hash_mask=me.hash_size-1,me.hash_shift=~~((me.hash_bits+ne-1)/ne),me.window=new e.Buf8(me.w_size*2),me.head=new e.Buf16(me.hash_size),me.prev=new e.Buf16(me.w_size),me.lit_bufsize=1<<Me+6,me.pending_buf_size=me.lit_bufsize*4,me.pending_buf=new e.Buf8(me.pending_buf_size),me.d_buf=1*me.lit_bufsize,me.l_buf=3*me.lit_bufsize,me.level=$e,me.strategy=Ke,me.method=nt,he(L)}function Ae(L,$e){return we(L,$e,R,I,P,T)}function ue(L,$e){var nt,ge,Me,Ke;if(!L||!L.state||$e>u||$e<0)return L?Ie(L,m):m;if(ge=L.state,!L.output||!L.input&&L.avail_in!==0||ge.status===Ne&&$e!==l)return Ie(L,L.avail_out===0?v:m);if(ge.strm=L,nt=ge.last_flush,ge.last_flush=$e,ge.status===J)if(ge.wrap===2)L.adler=0,oe(ge,31),oe(ge,139),oe(ge,8),ge.gzhead?(oe(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),oe(ge,ge.gzhead.time&255),oe(ge,ge.gzhead.time>>8&255),oe(ge,ge.gzhead.time>>16&255),oe(ge,ge.gzhead.time>>24&255),oe(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),oe(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(oe(ge,ge.gzhead.extra.length&255),oe(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(L.adler=r(L.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=Q):(oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),oe(ge,Le),ge.status=je);else{var Dt=R+(ge.w_bits-8<<4)<<8,me=-1;ge.strategy>=x||ge.level<2?me=0:ge.level<6?me=1:ge.level===6?me=2:me=3,Dt|=me<<6,ge.strstart!==0&&(Dt|=G),Dt+=31-Dt%31,ge.status=je,ee(ge,Dt),ge.strstart!==0&&(ee(ge,L.adler>>>16),ee(ge,L.adler&65535)),L.adler=1}if(ge.status===Q)if(ge.gzhead.extra){for(Me=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Me&&(L.adler=r(L.adler,ge.pending_buf,ge.pending-Me,Me)),Ee(L),Me=ge.pending,ge.pending===ge.pending_buf_size));)oe(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>Me&&(L.adler=r(L.adler,ge.pending_buf,ge.pending-Me,Me)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=se)}else ge.status=se;if(ge.status===se)if(ge.gzhead.name){Me=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Me&&(L.adler=r(L.adler,ge.pending_buf,ge.pending-Me,Me)),Ee(L),Me=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.name.length?Ke=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Ke=0,oe(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>Me&&(L.adler=r(L.adler,ge.pending_buf,ge.pending-Me,Me)),Ke===0&&(ge.gzindex=0,ge.status=fe)}else ge.status=fe;if(ge.status===fe)if(ge.gzhead.comment){Me=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>Me&&(L.adler=r(L.adler,ge.pending_buf,ge.pending-Me,Me)),Ee(L),Me=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.comment.length?Ke=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Ke=0,oe(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>Me&&(L.adler=r(L.adler,ge.pending_buf,ge.pending-Me,Me)),Ke===0&&(ge.status=ve)}else ge.status=ve;if(ge.status===ve&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Ee(L),ge.pending+2<=ge.pending_buf_size&&(oe(ge,L.adler&255),oe(ge,L.adler>>8&255),L.adler=0,ge.status=je)):ge.status=je),ge.pending!==0){if(Ee(L),L.avail_out===0)return ge.last_flush=-1,d}else if(L.avail_in===0&&B($e)<=B(nt)&&$e!==l)return Ie(L,v);if(ge.status===Ne&&L.avail_in!==0)return Ie(L,v);if(L.avail_in!==0||ge.lookahead!==0||$e!==i&&ge.status!==Ne){var K=ge.strategy===x?Ft(ge,$e):ge.strategy===_?Ct(ge,$e):Zt[ge.level].func(ge,$e);if((K===Fe||K===Xe)&&(ge.status=Ne),K===Se||K===Fe)return L.avail_out===0&&(ge.last_flush=-1),d;if(K===ye&&($e===s?t._tr_align(ge):$e!==u&&(t._tr_stored_block(ge,0,0,!1),$e===o&&(Ce(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Ee(L),L.avail_out===0))return ge.last_flush=-1,d}return $e!==l?d:ge.wrap<=0?h:(ge.wrap===2?(oe(ge,L.adler&255),oe(ge,L.adler>>8&255),oe(ge,L.adler>>16&255),oe(ge,L.adler>>24&255),oe(ge,L.total_in&255),oe(ge,L.total_in>>8&255),oe(ge,L.total_in>>16&255),oe(ge,L.total_in>>24&255)):(ee(ge,L.adler>>>16),ee(ge,L.adler&65535)),Ee(L),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?d:h)}function ft(L){var $e;return!L||!L.state?m:($e=L.state.status,$e!==J&&$e!==Q&&$e!==se&&$e!==fe&&$e!==ve&&$e!==je&&$e!==Ne?Ie(L,m):(L.state=null,$e===je?Ie(L,g):d))}function wt(L,$e){var nt=$e.length,ge,Me,Ke,Dt,me,K,H,Y;if(!L||!L.state||(ge=L.state,Dt=ge.wrap,Dt===2||Dt===1&&ge.status!==J||ge.lookahead))return m;for(Dt===1&&(L.adler=n(L.adler,$e,nt,0)),ge.wrap=0,nt>=ge.w_size&&(Dt===0&&(Ce(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),Y=new e.Buf8(ge.w_size),e.arraySet(Y,$e,nt-ge.w_size,ge.w_size,0),$e=Y,nt=ge.w_size),me=L.avail_in,K=L.next_in,H=L.input,L.avail_in=nt,L.next_in=0,L.input=$e,ke(ge);ge.lookahead>=ne;){Me=ge.strstart,Ke=ge.lookahead-(ne-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[Me+ne-1])&ge.hash_mask,ge.prev[Me&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=Me,Me++;while(--Ke);ge.strstart=Me,ge.lookahead=ne-1,ke(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=ne-1,ge.match_available=0,L.next_in=K,L.input=H,L.avail_in=me,ge.wrap=Dt,d}return co.deflateInit=Ae,co.deflateInit2=we,co.deflateReset=he,co.deflateResetKeep=Z,co.deflateSetHeader=De,co.deflate=ue,co.deflateEnd=ft,co.deflateSetDictionary=wt,co.deflateInfo="pako deflate (from Nodeca project)",co}var qd={},MD;function P9(){if(MD)return qd;MD=1;var e=ud(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,qd.string2buf=function(s){var o,l,u,d,h,m=s.length,g=0;for(d=0;d<m;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),g+=l<128?1:l<2048?2:l<65536?3:4;for(o=new e.Buf8(g),h=0,d=0;h<g;d++)l=s.charCodeAt(d),(l&64512)===55296&&d+1<m&&(u=s.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?o[h++]=l:l<2048?(o[h++]=192|l>>>6,o[h++]=128|l&63):l<65536?(o[h++]=224|l>>>12,o[h++]=128|l>>>6&63,o[h++]=128|l&63):(o[h++]=240|l>>>18,o[h++]=128|l>>>12&63,o[h++]=128|l>>>6&63,o[h++]=128|l&63);return o};function i(s,o){if(o<65534&&(s.subarray&&n||!s.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(s,o));for(var l="",u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l}return qd.buf2binstring=function(s){return i(s,s.length)},qd.binstring2buf=function(s){for(var o=new e.Buf8(s.length),l=0,u=o.length;l<u;l++)o[l]=s.charCodeAt(l);return o},qd.buf2string=function(s,o){var l,u,d,h,m=o||s.length,g=new Array(m*2);for(u=0,l=0;l<m;){if(d=s[l++],d<128){g[u++]=d;continue}if(h=r[d],h>4){g[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<m;)d=d<<6|s[l++]&63,h--;if(h>1){g[u++]=65533;continue}d<65536?g[u++]=d:(d-=65536,g[u++]=55296|d>>10&1023,g[u++]=56320|d&1023)}return i(g,u)},qd.utf8border=function(s,o){var l;for(o=o||s.length,o>s.length&&(o=s.length),l=o-1;l>=0&&(s[l]&192)===128;)l--;return l<0||l===0?o:l+r[s[l]]>o?l:o},qd}var nC,OD;function F9(){if(OD)return nC;OD=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return nC=e,nC}var PD;function Voe(){if(PD)return Fh;PD=1;var e=Uoe(),t=ud(),n=P9(),r=xN(),a=F9(),i=Object.prototype.toString,s=0,o=4,l=0,u=1,d=2,h=-1,m=0,g=8;function v(_){if(!(this instanceof v))return new v(_);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:m,to:""},_||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var T=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(T!==l)throw new Error(r[T]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,T=e.deflateSetDictionary(this.strm,k),T!==l)throw new Error(r[T]);this._dict_set=!0}}v.prototype.push=function(_,E){var T=this.strm,k=this.options.chunkSize,R,j;if(this.ended)return!1;j=E===~~E?E:E===!0?o:s,typeof _=="string"?T.input=n.string2buf(_):i.call(_)==="[object ArrayBuffer]"?T.input=new Uint8Array(_):T.input=_,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new t.Buf8(k),T.next_out=0,T.avail_out=k),R=e.deflate(T,j),R!==u&&R!==l)return this.onEnd(R),this.ended=!0,!1;(T.avail_out===0||T.avail_in===0&&(j===o||j===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(T.output,T.next_out))):this.onData(t.shrinkBuf(T.output,T.next_out)))}while((T.avail_in>0||T.avail_out===0)&&R!==u);return j===o?(R=e.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===l):(j===d&&(this.onEnd(l),T.avail_out=0),!0)},v.prototype.onData=function(_){this.chunks.push(_)},v.prototype.onEnd=function(_){_===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=_,this.msg=this.strm.msg};function b(_,E){var T=new v(E);if(T.push(_,!0),T.err)throw T.msg||r[T.err];return T.result}function w(_,E){return E=E||{},E.raw=!0,b(_,E)}function x(_,E){return E=E||{},E.gzip=!0,b(_,E)}return Fh.Deflate=v,Fh.deflate=b,Fh.deflateRaw=w,Fh.gzip=x,Fh}var Lh={},Fs={},rC,FD;function Hoe(){if(FD)return rC;FD=1;var e=30,t=12;return rC=function(r,a){var i,s,o,l,u,d,h,m,g,v,b,w,x,_,E,T,k,R,j,I,P,O,U,M,W;i=r.state,s=r.next_in,M=r.input,o=s+(r.avail_in-5),l=r.next_out,W=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,m=i.wsize,g=i.whave,v=i.wnext,b=i.window,w=i.hold,x=i.bits,_=i.lencode,E=i.distcode,T=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(w+=M[s++]<<x,x+=8,w+=M[s++]<<x,x+=8),R=_[w&T];t:for(;;){if(j=R>>>24,w>>>=j,x-=j,j=R>>>16&255,j===0)W[l++]=R&65535;else if(j&16){I=R&65535,j&=15,j&&(x<j&&(w+=M[s++]<<x,x+=8),I+=w&(1<<j)-1,w>>>=j,x-=j),x<15&&(w+=M[s++]<<x,x+=8,w+=M[s++]<<x,x+=8),R=E[w&k];n:for(;;){if(j=R>>>24,w>>>=j,x-=j,j=R>>>16&255,j&16){if(P=R&65535,j&=15,x<j&&(w+=M[s++]<<x,x+=8,x<j&&(w+=M[s++]<<x,x+=8)),P+=w&(1<<j)-1,P>h){r.msg="invalid distance too far back",i.mode=e;break e}if(w>>>=j,x-=j,j=l-u,P>j){if(j=P-j,j>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(O=0,U=b,v===0){if(O+=m-j,j<I){I-=j;do W[l++]=b[O++];while(--j);O=l-P,U=W}}else if(v<j){if(O+=m+v-j,j-=v,j<I){I-=j;do W[l++]=b[O++];while(--j);if(O=0,v<I){j=v,I-=j;do W[l++]=b[O++];while(--j);O=l-P,U=W}}}else if(O+=v-j,j<I){I-=j;do W[l++]=b[O++];while(--j);O=l-P,U=W}for(;I>2;)W[l++]=U[O++],W[l++]=U[O++],W[l++]=U[O++],I-=3;I&&(W[l++]=U[O++],I>1&&(W[l++]=U[O++]))}else{O=l-P;do W[l++]=W[O++],W[l++]=W[O++],W[l++]=W[O++],I-=3;while(I>2);I&&(W[l++]=W[O++],I>1&&(W[l++]=W[O++]))}}else if((j&64)===0){R=E[(R&65535)+(w&(1<<j)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((j&64)===0){R=_[(R&65535)+(w&(1<<j)-1)];continue t}else if(j&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(s<o&&l<d);I=x>>3,s-=I,x-=I<<3,w&=(1<<x)-1,r.next_in=s,r.next_out=l,r.avail_in=s<o?5+(o-s):5-(s-o),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=w,i.bits=x},rC}var aC,LD;function qoe(){if(LD)return aC;LD=1;var e=ud(),t=15,n=852,r=592,a=0,i=1,s=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return aC=function(m,g,v,b,w,x,_,E){var T=E.bits,k=0,R=0,j=0,I=0,P=0,O=0,U=0,M=0,W=0,V=0,ie,ae,ne,q,te,G=null,J=0,Q,se=new e.Buf16(t+1),fe=new e.Buf16(t+1),ve=null,je=0,Ne,Se,ye;for(k=0;k<=t;k++)se[k]=0;for(R=0;R<b;R++)se[g[v+R]]++;for(P=T,I=t;I>=1&&se[I]===0;I--);if(P>I&&(P=I),I===0)return w[x++]=1<<24|64<<16|0,w[x++]=1<<24|64<<16|0,E.bits=1,0;for(j=1;j<I&&se[j]===0;j++);for(P<j&&(P=j),M=1,k=1;k<=t;k++)if(M<<=1,M-=se[k],M<0)return-1;if(M>0&&(m===a||I!==1))return-1;for(fe[1]=0,k=1;k<t;k++)fe[k+1]=fe[k]+se[k];for(R=0;R<b;R++)g[v+R]!==0&&(_[fe[g[v+R]]++]=R);if(m===a?(G=ve=_,Q=19):m===i?(G=o,J-=257,ve=l,je-=257,Q=256):(G=u,ve=d,Q=-1),V=0,R=0,k=j,te=x,O=P,U=0,ne=-1,W=1<<P,q=W-1,m===i&&W>n||m===s&&W>r)return 1;for(;;){Ne=k-U,_[R]<Q?(Se=0,ye=_[R]):_[R]>Q?(Se=ve[je+_[R]],ye=G[J+_[R]]):(Se=96,ye=0),ie=1<<k-U,ae=1<<O,j=ae;do ae-=ie,w[te+(V>>U)+ae]=Ne<<24|Se<<16|ye|0;while(ae!==0);for(ie=1<<k-1;V&ie;)ie>>=1;if(ie!==0?(V&=ie-1,V+=ie):V=0,R++,--se[k]===0){if(k===I)break;k=g[v+_[R]]}if(k>P&&(V&q)!==ne){for(U===0&&(U=P),te+=j,O=k-U,M=1<<O;O+U<I&&(M-=se[O+U],!(M<=0));)O++,M<<=1;if(W+=1<<O,m===i&&W>n||m===s&&W>r)return 1;ne=V&q,w[ne]=P<<24|O<<16|te-x|0}}return V!==0&&(w[te+V]=k-U<<24|64<<16|0),E.bits=P,0},aC}var BD;function Goe(){if(BD)return Fs;BD=1;var e=ud(),t=M9(),n=O9(),r=Hoe(),a=qoe(),i=0,s=1,o=2,l=4,u=5,d=6,h=0,m=1,g=2,v=-2,b=-3,w=-4,x=-5,_=8,E=1,T=2,k=3,R=4,j=5,I=6,P=7,O=8,U=9,M=10,W=11,V=12,ie=13,ae=14,ne=15,q=16,te=17,G=18,J=19,Q=20,se=21,fe=22,ve=23,je=24,Ne=25,Se=26,ye=27,Fe=28,Xe=29,Le=30,Ie=31,B=32,Ce=852,Ee=592,ce=15,oe=ce;function ee(we){return(we>>>24&255)+(we>>>8&65280)+((we&65280)<<8)+((we&255)<<24)}function _e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Pe(we){var Ae;return!we||!we.state?v:(Ae=we.state,we.total_in=we.total_out=Ae.total=0,we.msg="",Ae.wrap&&(we.adler=Ae.wrap&1),Ae.mode=E,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new e.Buf32(Ce),Ae.distcode=Ae.distdyn=new e.Buf32(Ee),Ae.sane=1,Ae.back=-1,h)}function ke(we){var Ae;return!we||!we.state?v:(Ae=we.state,Ae.wsize=0,Ae.whave=0,Ae.wnext=0,Pe(we))}function We(we,Ae){var ue,ft;return!we||!we.state||(ft=we.state,Ae<0?(ue=0,Ae=-Ae):(ue=(Ae>>4)+1,Ae<48&&(Ae&=15)),Ae&&(Ae<8||Ae>15))?v:(ft.window!==null&&ft.wbits!==Ae&&(ft.window=null),ft.wrap=ue,ft.wbits=Ae,ke(we))}function Nt(we,Ae){var ue,ft;return we?(ft=new _e,we.state=ft,ft.window=null,ue=We(we,Ae),ue!==h&&(we.state=null),ue):v}function it(we){return Nt(we,oe)}var Ct=!0,Ft,Mt;function Zt(we){if(Ct){var Ae;for(Ft=new e.Buf32(512),Mt=new e.Buf32(32),Ae=0;Ae<144;)we.lens[Ae++]=8;for(;Ae<256;)we.lens[Ae++]=9;for(;Ae<280;)we.lens[Ae++]=7;for(;Ae<288;)we.lens[Ae++]=8;for(a(s,we.lens,0,288,Ft,0,we.work,{bits:9}),Ae=0;Ae<32;)we.lens[Ae++]=5;a(o,we.lens,0,32,Mt,0,we.work,{bits:5}),Ct=!1}we.lencode=Ft,we.lenbits=9,we.distcode=Mt,we.distbits=5}function be(we,Ae,ue,ft){var wt,L=we.state;return L.window===null&&(L.wsize=1<<L.wbits,L.wnext=0,L.whave=0,L.window=new e.Buf8(L.wsize)),ft>=L.wsize?(e.arraySet(L.window,Ae,ue-L.wsize,L.wsize,0),L.wnext=0,L.whave=L.wsize):(wt=L.wsize-L.wnext,wt>ft&&(wt=ft),e.arraySet(L.window,Ae,ue-ft,wt,L.wnext),ft-=wt,ft?(e.arraySet(L.window,Ae,ue-ft,ft,0),L.wnext=ft,L.whave=L.wsize):(L.wnext+=wt,L.wnext===L.wsize&&(L.wnext=0),L.whave<L.wsize&&(L.whave+=wt))),0}function D(we,Ae){var ue,ft,wt,L,$e,nt,ge,Me,Ke,Dt,me,K,H,Y,pe=0,Re,Ve,pt,Kt,ut,It,Lt,en,In=new e.Buf8(4),Jn,Er,Cr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!we||!we.state||!we.output||!we.input&&we.avail_in!==0)return v;ue=we.state,ue.mode===V&&(ue.mode=ie),$e=we.next_out,wt=we.output,ge=we.avail_out,L=we.next_in,ft=we.input,nt=we.avail_in,Me=ue.hold,Ke=ue.bits,Dt=nt,me=ge,en=h;e:for(;;)switch(ue.mode){case E:if(ue.wrap===0){ue.mode=ie;break}for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(ue.wrap&2&&Me===35615){ue.check=0,In[0]=Me&255,In[1]=Me>>>8&255,ue.check=n(ue.check,In,2,0),Me=0,Ke=0,ue.mode=T;break}if(ue.flags=0,ue.head&&(ue.head.done=!1),!(ue.wrap&1)||(((Me&255)<<8)+(Me>>8))%31){we.msg="incorrect header check",ue.mode=Le;break}if((Me&15)!==_){we.msg="unknown compression method",ue.mode=Le;break}if(Me>>>=4,Ke-=4,Lt=(Me&15)+8,ue.wbits===0)ue.wbits=Lt;else if(Lt>ue.wbits){we.msg="invalid window size",ue.mode=Le;break}ue.dmax=1<<Lt,we.adler=ue.check=1,ue.mode=Me&512?M:V,Me=0,Ke=0;break;case T:for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(ue.flags=Me,(ue.flags&255)!==_){we.msg="unknown compression method",ue.mode=Le;break}if(ue.flags&57344){we.msg="unknown header flags set",ue.mode=Le;break}ue.head&&(ue.head.text=Me>>8&1),ue.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,ue.check=n(ue.check,In,2,0)),Me=0,Ke=0,ue.mode=k;case k:for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}ue.head&&(ue.head.time=Me),ue.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,In[2]=Me>>>16&255,In[3]=Me>>>24&255,ue.check=n(ue.check,In,4,0)),Me=0,Ke=0,ue.mode=R;case R:for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}ue.head&&(ue.head.xflags=Me&255,ue.head.os=Me>>8),ue.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,ue.check=n(ue.check,In,2,0)),Me=0,Ke=0,ue.mode=j;case j:if(ue.flags&1024){for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}ue.length=Me,ue.head&&(ue.head.extra_len=Me),ue.flags&512&&(In[0]=Me&255,In[1]=Me>>>8&255,ue.check=n(ue.check,In,2,0)),Me=0,Ke=0}else ue.head&&(ue.head.extra=null);ue.mode=I;case I:if(ue.flags&1024&&(K=ue.length,K>nt&&(K=nt),K&&(ue.head&&(Lt=ue.head.extra_len-ue.length,ue.head.extra||(ue.head.extra=new Array(ue.head.extra_len)),e.arraySet(ue.head.extra,ft,L,K,Lt)),ue.flags&512&&(ue.check=n(ue.check,ft,K,L)),nt-=K,L+=K,ue.length-=K),ue.length))break e;ue.length=0,ue.mode=P;case P:if(ue.flags&2048){if(nt===0)break e;K=0;do Lt=ft[L+K++],ue.head&&Lt&&ue.length<65536&&(ue.head.name+=String.fromCharCode(Lt));while(Lt&&K<nt);if(ue.flags&512&&(ue.check=n(ue.check,ft,K,L)),nt-=K,L+=K,Lt)break e}else ue.head&&(ue.head.name=null);ue.length=0,ue.mode=O;case O:if(ue.flags&4096){if(nt===0)break e;K=0;do Lt=ft[L+K++],ue.head&&Lt&&ue.length<65536&&(ue.head.comment+=String.fromCharCode(Lt));while(Lt&&K<nt);if(ue.flags&512&&(ue.check=n(ue.check,ft,K,L)),nt-=K,L+=K,Lt)break e}else ue.head&&(ue.head.comment=null);ue.mode=U;case U:if(ue.flags&512){for(;Ke<16;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(Me!==(ue.check&65535)){we.msg="header crc mismatch",ue.mode=Le;break}Me=0,Ke=0}ue.head&&(ue.head.hcrc=ue.flags>>9&1,ue.head.done=!0),we.adler=ue.check=0,ue.mode=V;break;case M:for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}we.adler=ue.check=ee(Me),Me=0,Ke=0,ue.mode=W;case W:if(ue.havedict===0)return we.next_out=$e,we.avail_out=ge,we.next_in=L,we.avail_in=nt,ue.hold=Me,ue.bits=Ke,g;we.adler=ue.check=1,ue.mode=V;case V:if(Ae===u||Ae===d)break e;case ie:if(ue.last){Me>>>=Ke&7,Ke-=Ke&7,ue.mode=ye;break}for(;Ke<3;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}switch(ue.last=Me&1,Me>>>=1,Ke-=1,Me&3){case 0:ue.mode=ae;break;case 1:if(Zt(ue),ue.mode=Q,Ae===d){Me>>>=2,Ke-=2;break e}break;case 2:ue.mode=te;break;case 3:we.msg="invalid block type",ue.mode=Le}Me>>>=2,Ke-=2;break;case ae:for(Me>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if((Me&65535)!==(Me>>>16^65535)){we.msg="invalid stored block lengths",ue.mode=Le;break}if(ue.length=Me&65535,Me=0,Ke=0,ue.mode=ne,Ae===d)break e;case ne:ue.mode=q;case q:if(K=ue.length,K){if(K>nt&&(K=nt),K>ge&&(K=ge),K===0)break e;e.arraySet(wt,ft,L,K,$e),nt-=K,L+=K,ge-=K,$e+=K,ue.length-=K;break}ue.mode=V;break;case te:for(;Ke<14;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(ue.nlen=(Me&31)+257,Me>>>=5,Ke-=5,ue.ndist=(Me&31)+1,Me>>>=5,Ke-=5,ue.ncode=(Me&15)+4,Me>>>=4,Ke-=4,ue.nlen>286||ue.ndist>30){we.msg="too many length or distance symbols",ue.mode=Le;break}ue.have=0,ue.mode=G;case G:for(;ue.have<ue.ncode;){for(;Ke<3;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}ue.lens[Cr[ue.have++]]=Me&7,Me>>>=3,Ke-=3}for(;ue.have<19;)ue.lens[Cr[ue.have++]]=0;if(ue.lencode=ue.lendyn,ue.lenbits=7,Jn={bits:ue.lenbits},en=a(i,ue.lens,0,19,ue.lencode,0,ue.work,Jn),ue.lenbits=Jn.bits,en){we.msg="invalid code lengths set",ue.mode=Le;break}ue.have=0,ue.mode=J;case J:for(;ue.have<ue.nlen+ue.ndist;){for(;pe=ue.lencode[Me&(1<<ue.lenbits)-1],Re=pe>>>24,Ve=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(pt<16)Me>>>=Re,Ke-=Re,ue.lens[ue.have++]=pt;else{if(pt===16){for(Er=Re+2;Ke<Er;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(Me>>>=Re,Ke-=Re,ue.have===0){we.msg="invalid bit length repeat",ue.mode=Le;break}Lt=ue.lens[ue.have-1],K=3+(Me&3),Me>>>=2,Ke-=2}else if(pt===17){for(Er=Re+3;Ke<Er;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,K=3+(Me&7),Me>>>=3,Ke-=3}else{for(Er=Re+7;Ke<Er;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}Me>>>=Re,Ke-=Re,Lt=0,K=11+(Me&127),Me>>>=7,Ke-=7}if(ue.have+K>ue.nlen+ue.ndist){we.msg="invalid bit length repeat",ue.mode=Le;break}for(;K--;)ue.lens[ue.have++]=Lt}}if(ue.mode===Le)break;if(ue.lens[256]===0){we.msg="invalid code -- missing end-of-block",ue.mode=Le;break}if(ue.lenbits=9,Jn={bits:ue.lenbits},en=a(s,ue.lens,0,ue.nlen,ue.lencode,0,ue.work,Jn),ue.lenbits=Jn.bits,en){we.msg="invalid literal/lengths set",ue.mode=Le;break}if(ue.distbits=6,ue.distcode=ue.distdyn,Jn={bits:ue.distbits},en=a(o,ue.lens,ue.nlen,ue.ndist,ue.distcode,0,ue.work,Jn),ue.distbits=Jn.bits,en){we.msg="invalid distances set",ue.mode=Le;break}if(ue.mode=Q,Ae===d)break e;case Q:ue.mode=se;case se:if(nt>=6&&ge>=258){we.next_out=$e,we.avail_out=ge,we.next_in=L,we.avail_in=nt,ue.hold=Me,ue.bits=Ke,r(we,me),$e=we.next_out,wt=we.output,ge=we.avail_out,L=we.next_in,ft=we.input,nt=we.avail_in,Me=ue.hold,Ke=ue.bits,ue.mode===V&&(ue.back=-1);break}for(ue.back=0;pe=ue.lencode[Me&(1<<ue.lenbits)-1],Re=pe>>>24,Ve=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(Ve&&(Ve&240)===0){for(Kt=Re,ut=Ve,It=pt;pe=ue.lencode[It+((Me&(1<<Kt+ut)-1)>>Kt)],Re=pe>>>24,Ve=pe>>>16&255,pt=pe&65535,!(Kt+Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}Me>>>=Kt,Ke-=Kt,ue.back+=Kt}if(Me>>>=Re,Ke-=Re,ue.back+=Re,ue.length=pt,Ve===0){ue.mode=Se;break}if(Ve&32){ue.back=-1,ue.mode=V;break}if(Ve&64){we.msg="invalid literal/length code",ue.mode=Le;break}ue.extra=Ve&15,ue.mode=fe;case fe:if(ue.extra){for(Er=ue.extra;Ke<Er;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}ue.length+=Me&(1<<ue.extra)-1,Me>>>=ue.extra,Ke-=ue.extra,ue.back+=ue.extra}ue.was=ue.length,ue.mode=ve;case ve:for(;pe=ue.distcode[Me&(1<<ue.distbits)-1],Re=pe>>>24,Ve=pe>>>16&255,pt=pe&65535,!(Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if((Ve&240)===0){for(Kt=Re,ut=Ve,It=pt;pe=ue.distcode[It+((Me&(1<<Kt+ut)-1)>>Kt)],Re=pe>>>24,Ve=pe>>>16&255,pt=pe&65535,!(Kt+Re<=Ke);){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}Me>>>=Kt,Ke-=Kt,ue.back+=Kt}if(Me>>>=Re,Ke-=Re,ue.back+=Re,Ve&64){we.msg="invalid distance code",ue.mode=Le;break}ue.offset=pt,ue.extra=Ve&15,ue.mode=je;case je:if(ue.extra){for(Er=ue.extra;Ke<Er;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}ue.offset+=Me&(1<<ue.extra)-1,Me>>>=ue.extra,Ke-=ue.extra,ue.back+=ue.extra}if(ue.offset>ue.dmax){we.msg="invalid distance too far back",ue.mode=Le;break}ue.mode=Ne;case Ne:if(ge===0)break e;if(K=me-ge,ue.offset>K){if(K=ue.offset-K,K>ue.whave&&ue.sane){we.msg="invalid distance too far back",ue.mode=Le;break}K>ue.wnext?(K-=ue.wnext,H=ue.wsize-K):H=ue.wnext-K,K>ue.length&&(K=ue.length),Y=ue.window}else Y=wt,H=$e-ue.offset,K=ue.length;K>ge&&(K=ge),ge-=K,ue.length-=K;do wt[$e++]=Y[H++];while(--K);ue.length===0&&(ue.mode=se);break;case Se:if(ge===0)break e;wt[$e++]=ue.length,ge--,ue.mode=se;break;case ye:if(ue.wrap){for(;Ke<32;){if(nt===0)break e;nt--,Me|=ft[L++]<<Ke,Ke+=8}if(me-=ge,we.total_out+=me,ue.total+=me,me&&(we.adler=ue.check=ue.flags?n(ue.check,wt,me,$e-me):t(ue.check,wt,me,$e-me)),me=ge,(ue.flags?Me:ee(Me))!==ue.check){we.msg="incorrect data check",ue.mode=Le;break}Me=0,Ke=0}ue.mode=Fe;case Fe:if(ue.wrap&&ue.flags){for(;Ke<32;){if(nt===0)break e;nt--,Me+=ft[L++]<<Ke,Ke+=8}if(Me!==(ue.total&4294967295)){we.msg="incorrect length check",ue.mode=Le;break}Me=0,Ke=0}ue.mode=Xe;case Xe:en=m;break e;case Le:en=b;break e;case Ie:return w;case B:default:return v}return we.next_out=$e,we.avail_out=ge,we.next_in=L,we.avail_in=nt,ue.hold=Me,ue.bits=Ke,(ue.wsize||me!==we.avail_out&&ue.mode<Le&&(ue.mode<ye||Ae!==l))&&be(we,we.output,we.next_out,me-we.avail_out),Dt-=we.avail_in,me-=we.avail_out,we.total_in+=Dt,we.total_out+=me,ue.total+=me,ue.wrap&&me&&(we.adler=ue.check=ue.flags?n(ue.check,wt,me,we.next_out-me):t(ue.check,wt,me,we.next_out-me)),we.data_type=ue.bits+(ue.last?64:0)+(ue.mode===V?128:0)+(ue.mode===Q||ue.mode===ne?256:0),(Dt===0&&me===0||Ae===l)&&en===h&&(en=x),en}function Z(we){if(!we||!we.state)return v;var Ae=we.state;return Ae.window&&(Ae.window=null),we.state=null,h}function he(we,Ae){var ue;return!we||!we.state||(ue=we.state,(ue.wrap&2)===0)?v:(ue.head=Ae,Ae.done=!1,h)}function De(we,Ae){var ue=Ae.length,ft,wt,L;return!we||!we.state||(ft=we.state,ft.wrap!==0&&ft.mode!==W)?v:ft.mode===W&&(wt=1,wt=t(wt,Ae,ue,0),wt!==ft.check)?b:(L=be(we,Ae,ue,ue),L?(ft.mode=Ie,w):(ft.havedict=1,h))}return Fs.inflateReset=ke,Fs.inflateReset2=We,Fs.inflateResetKeep=Pe,Fs.inflateInit=it,Fs.inflateInit2=Nt,Fs.inflate=D,Fs.inflateEnd=Z,Fs.inflateGetHeader=he,Fs.inflateSetDictionary=De,Fs.inflateInfo="pako inflate (from Nodeca project)",Fs}var iC,$D;function L9(){return $D||($D=1,iC={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),iC}var sC,zD;function Woe(){if(zD)return sC;zD=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return sC=e,sC}var UD;function Koe(){if(UD)return Lh;UD=1;var e=Goe(),t=ud(),n=P9(),r=L9(),a=xN(),i=F9(),s=Woe(),o=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&m.windowBits>=0&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),m.windowBits>=0&&m.windowBits<16&&!(h&&h.windowBits)&&(m.windowBits+=32),m.windowBits>15&&m.windowBits<48&&(m.windowBits&15)===0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,m.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new s,e.inflateGetHeader(this.strm,this.header),m.dictionary&&(typeof m.dictionary=="string"?m.dictionary=n.string2buf(m.dictionary):o.call(m.dictionary)==="[object ArrayBuffer]"&&(m.dictionary=new Uint8Array(m.dictionary)),m.raw&&(g=e.inflateSetDictionary(this.strm,m.dictionary),g!==r.Z_OK)))throw new Error(a[g])}l.prototype.push=function(h,m){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,w,x,_,E,T,k=!1;if(this.ended)return!1;x=m===~~m?m:m===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):o.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),w=e.inflate(g,r.Z_NO_FLUSH),w===r.Z_NEED_DICT&&b&&(w=e.inflateSetDictionary(this.strm,b)),w===r.Z_BUF_ERROR&&k===!0&&(w=r.Z_OK,k=!1),w!==r.Z_STREAM_END&&w!==r.Z_OK)return this.onEnd(w),this.ended=!0,!1;g.next_out&&(g.avail_out===0||w===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(_=n.utf8border(g.output,g.next_out),E=g.next_out-_,T=n.buf2string(g.output,_),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,_,E,0),this.onData(T)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&w!==r.Z_STREAM_END);return w===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(w=e.inflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,m){var g=new l(m);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function d(h,m){return m=m||{},m.raw=!0,u(h,m)}return Lh.Inflate=l,Lh.inflate=u,Lh.inflateRaw=d,Lh.ungzip=u,Lh}var oC,VD;function Zoe(){if(VD)return oC;VD=1;var e=ud().assign,t=Voe(),n=Koe(),r=L9(),a={};return e(a,t,n,r),oC=a,oC}var Yoe=Zoe();const _N=xi(Yoe);var lC,HD;function Xoe(){if(HD)return lC;HD=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,s)=>{n.multiArgs?r.push((...o)=>{n.errorFirst?o[0]?s(o):(o.shift(),i(o)):i(o)}):n.errorFirst?r.push((o,l)=>{o?s(o):i(l)}):r.push(i),t.apply(this,r)})};return lC=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=s=>{const o=l=>typeof l=="string"?s===l:l.test(s);return n.include?n.include.some(o):!n.exclude.some(o)};let i;r==="function"?i=function(...s){return n.excludeMain?t(...s):e(t,n).apply(this,s)}:i=Object.create(Object.getPrototypeOf(t));for(const s in t){const o=t[s];i[s]=typeof o=="function"&&a(s)?e(o,n):o}return i},lC}var Joe=Xoe();const cC=xi(Joe);var uC,qD;function Qoe(){if(qD)return uC;qD=1;var e={};function t(ne){return Array.isArray(ne)?ne:[ne]}const n="",r=" ",a="\\",i=/^\s+$/,s=/(?:[^\\]|^)\\$/,o=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let m="node-ignore";typeof Symbol<"u"&&(m=Symbol.for("node-ignore"));const g=m,v=(ne,q,te)=>Object.defineProperty(ne,q,{value:te}),b=/([0-z])-([0-z])/g,w=()=>!1,x=ne=>ne.replace(b,(q,te,G)=>te.charCodeAt(0)<=G.charCodeAt(0)?q:n),_=ne=>{const{length:q}=ne;return ne.slice(0,q-q%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(ne,q,te)=>q+(te.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(ne,q)=>{const{length:te}=q;return q.slice(0,te-te%2)+r}],[/[\\$.|*+(){^]/g,ne=>`\\${ne}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(ne,q,te)=>q+6<te.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(ne,q,te)=>{const G=te.replace(/\\\*/g,"[^\\/]*");return q+G}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(ne,q,te,G,J)=>q===a?`\\[${te}${_(G)}${J}`:J==="]"&&G.length%2===0?`[${x(te)}${G}]`:"[]"],[/(?:[^*])$/,ne=>/\/$/.test(ne)?`${ne}$`:`${ne}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(ne,q)=>`${q?`${q}[^/]+`:"[^/]*"}(?=$|\\/$)`]],T=Object.create(null),k=(ne,q)=>{let te=T[ne];return te||(te=E.reduce((G,[J,Q])=>G.replace(J,Q.bind(ne)),ne),T[ne]=te),q?new RegExp(te,"i"):new RegExp(te)},R=ne=>typeof ne=="string",j=ne=>ne&&R(ne)&&!i.test(ne)&&!s.test(ne)&&ne.indexOf("#")!==0,I=ne=>ne.split(u);class P{constructor(q,te,G,J){this.origin=q,this.pattern=te,this.negative=G,this.regex=J}}const O=(ne,q)=>{const te=ne;let G=!1;ne.indexOf("!")===0&&(G=!0,ne=ne.substr(1)),ne=ne.replace(o,"!").replace(l,"#");const J=k(ne,q);return new P(te,ne,G,J)},U=(ne,q)=>{throw new q(ne)},M=(ne,q,te)=>R(ne)?ne?M.isNotRelative(ne)?te(`path should be a \`path.relative()\`d string, but got "${q}"`,RangeError):!0:te("path must not be empty",TypeError):te(`path must be a string, but got \`${q}\``,TypeError),W=ne=>d.test(ne);M.isNotRelative=W,M.convert=ne=>ne;class V{constructor({ignorecase:q=!0,ignoreCase:te=q,allowRelativePaths:G=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=te,this._allowRelativePaths=G,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(q){if(q&&q[g]){this._rules=this._rules.concat(q._rules),this._added=!0;return}if(j(q)){const te=O(q,this._ignoreCase);this._added=!0,this._rules.push(te)}}add(q){return this._added=!1,t(R(q)?I(q):q).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(q){return this.add(q)}_testOne(q,te){let G=!1,J=!1;return this._rules.forEach(Q=>{const{negative:se}=Q;if(J===se&&G!==J||se&&!G&&!J&&!te)return;Q.regex.test(q)&&(G=!se,J=se)}),{ignored:G,unignored:J}}_test(q,te,G,J){const Q=q&&M.convert(q);return M(Q,q,this._allowRelativePaths?w:U),this._t(Q,te,G,J)}_t(q,te,G,J){if(q in te)return te[q];if(J||(J=q.split(h)),J.pop(),!J.length)return te[q]=this._testOne(q,G);const Q=this._t(J.join(h)+h,te,G,J);return te[q]=Q.ignored?Q:this._testOne(q,G)}ignores(q){return this._test(q,this._ignoreCache,!1).ignored}createFilter(){return q=>!this.ignores(q)}filter(q){return t(q).filter(this.createFilter())}test(q){return this._test(q,this._testCache,!0)}}const ie=ne=>new V(ne),ae=ne=>M(ne&&M.convert(ne),ne,w);if(ie.isPathValid=ae,ie.default=ie,uC=ie,typeof da<"u"&&(e&&e.IGNORE_TEST_WIN32||da.platform==="win32")){const ne=te=>/^\\\\\?\\/.test(te)||/["<>|\u0000-\u001F]+/u.test(te)?te:te.replace(/\\/g,"/");M.convert=ne;const q=/^[a-z]:\//i;M.isNotRelative=te=>q.test(te)||W(te)}return uC}var ele=Qoe();const tle=xi(ele);var dC,GD;function nle(){if(GD)return dC;GD=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return dC=n,dC}var rle=nle();const gl=xi(rle);var fC,WD;function ale(){return WD||(WD=1,fC=function(e,t){var n=e,r=t,a=n.length,i=r.length,s=!1,o=null,l=a+1,u=[],d=[],h=[],m="",g=-1,v=0,b=1,w,x,_=function(){a>=i&&(w=n,x=a,n=r,r=w,a=i,i=x,s=!0,l=a+1)},E=function(j,I,P){return{x:j,y:I,k:P}},T=function(j,I){return{elem:j,t:I}},k=function(j,I,P){var O,U,M;for(I>P?O=u[j-1+l]:O=u[j+1+l],M=Math.max(I,P),U=M-j;U<a&&M<i&&n[U]===r[M];)++U,++M;return u[j+l]=d.length,d[d.length]=new E(U,M,O),M},R=function(j){var I,P,O;for(I=P=0,O=j.length-1;O>=0;--O)for(;I<j[O].x||P<j[O].y;)j[O].y-j[O].x>P-I?(s?h[h.length]=new T(r[P],g):h[h.length]=new T(r[P],b),++P):j[O].y-j[O].x<P-I?(s?h[h.length]=new T(n[I],b):h[h.length]=new T(n[I],g),++I):(h[h.length]=new T(n[I],v),m+=n[I],++I,++P)};return _(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return o},getlcs:function(){return m},getses:function(){return h},compose:function(){var j,I,P,O,U,M,W,V;for(j=i-a,I=a+i+3,P={},W=0;W<I;++W)P[W]=-1,u[W]=-1;O=-1;do{for(++O,V=-O;V<=j-1;++V)P[V+l]=k(V,P[V-1+l]+1,P[V+1+l]);for(V=j+O;V>=j+1;--V)P[V+l]=k(V,P[V-1+l]+1,P[V+1+l]);P[j+l]=k(j,P[j-1+l]+1,P[j+1+l])}while(P[j+l]!==i);for(o=j+2*O,U=u[j+l],M=[];U!==-1;)M[M.length]=new E(d[U].x,d[U].y,null),U=d[U].k;R(M)}}}),fC}var hC,KD;function ile(){if(KD)return hC;KD=1;var e=ale();function t(i,s){var o=new e(i,s);o.compose();for(var l=o.getses(),u,d,h=i.length-1,m=s.length-1,g=l.length-1;g>=0;--g)l[g].t===o.SES_COMMON?(d?(d.chain={file1index:h,file2index:m,chain:null},d=d.chain):(u={file1index:h,file2index:m,chain:null},d=u),h--,m--):l[g].t===o.SES_DELETE?h--:l[g].t===o.SES_ADD&&m--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,u):v}function n(i,s){for(var o=[],l=i.length,u=s.length,d=t(i,s);d!==null;d=d.chain){var h=l-d.file1index-1,m=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||m)&&o.push({file1:[l+1,h],file2:[u+1,m]})}return o.reverse(),o}function r(i,s,o){var l,u=n(s,i),d=n(s,o),h=[];function m(q,te){h.push([q.file1[0],te,q.file1[1],q.file2[0],q.file2[1]])}for(l=0;l<u.length;l++)m(u[l],0);for(l=0;l<d.length;l++)m(d[l],2);h.sort(function(q,te){return q[0]-te[0]});var g=[],v=0;function b(q){q>v&&(g.push([1,v,q-v]),v=q)}for(var w=0;w<h.length;w++){for(var x=w,_=h[w],E=_[0],T=E+_[2];w<h.length-1;){var k=h[w+1],R=k[0];if(R>T)break;T=Math.max(T,R+k[2]),w++}if(b(E),x==w)_[4]>0&&g.push([_[1],_[3],_[4]]);else{var j={0:[i.length,-1,s.length,-1],2:[o.length,-1,s.length,-1]};for(l=x;l<=w;l++){_=h[l];var I=_[1],P=j[I],O=_[0],U=O+_[2],M=_[3],W=M+_[4];P[0]=Math.min(M,P[0]),P[1]=Math.max(W,P[1]),P[2]=Math.min(O,P[2]),P[3]=Math.max(U,P[3])}var V=j[0][0]+(E-j[0][2]),ie=j[0][1]+(T-j[0][3]),ae=j[2][0]+(E-j[2][2]),ne=j[2][1]+(T-j[2][3]);g.push([-1,V,ie-V,E,T-E,ae,ne-ae])}v=T}return b(s.length),g}function a(i,s,o){var l=[],u=[i,s,o],d=r(i,s,o),h=[];function m(){h.length&&l.push({ok:h}),h=[]}function g(_){for(var E=0;E<_.length;E++)h.push(_[E])}function v(_){if(_[2]!=_[6])return!0;for(var E=_[1],T=_[5],k=0;k<_[2];k++)if(i[k+E]!=o[k+T])return!0;return!1}for(var b=0;b<d.length;b++){var w=d[b],x=w[0];x==-1?v(w)?(m(),l.push({conflict:{a:i.slice(w[1],w[1]+w[2]),aIndex:w[1],o:s.slice(w[3],w[3]+w[4]),oIndex:w[3],b:o.slice(w[5],w[5]+w[6]),bIndex:w[5]}})):g(u[0].slice(w[1],w[1]+w[2])):g(u[x].slice(w[1],w[1]+w[2]))}return m(),l}return hC=a,hC}var sle=ile();const ole=xi(sle);class cr extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new cr(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class Dy extends cr{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=Dy.code,this.data={filepaths:t}}}Dy.code="UnmergedPathsError";class Pn extends cr{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=Pn.code,this.data={message:t}}}Pn.code="InternalError";class nm extends cr{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=nm.code,this.data={filepath:t}}}nm.code="UnsafeFilepathError";class hl{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function o_(e,t){return-(e<t)||+(e>t)}function B9(e,t){return o_(e.path,t.path)}function $9(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const il=2**32;function ZD(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function Sp(e){const[t,n]=ZD(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=ZD(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%il,ctimeNanoseconds:n%il,mtimeSeconds:r%il,mtimeNanoseconds:a%il,dev:e.dev%il,ino:e.ino%il,mode:$9(e.mode%il),uid:e.uid%il,gid:e.gid%il,size:e.size>-1?e.size%il:0}}function lle(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let pC=null;async function Ic(e){return pC===null&&(pC=await ule()),pC?z9(e):cle(e)}function cle(e){return new D9().update(e).digest("hex")}async function z9(e){const t=await crypto.subtle.digest("SHA-1",e);return lle(t)}async function ule(){try{if(await z9(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function dle(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function fle(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Qt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class Jd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Qt.isBuffer(t))return Jd.fromBuffer(t);if(t===null)return new Jd(null);throw new Pn("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new Pn("Index file is empty (.git/index)");const n=new Jd,r=new hl(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new Pn(`Invalid dircache magic file number: ${a}`);const i=await Ic(t.slice(0,-20)),s=t.slice(-20).toString("hex");if(s!==i)throw new Pn(`Invalid checksum in GitIndex buffer: expected ${s} but saw ${i}`);const o=r.readUInt32BE();if(o!==2)throw new Pn(`Unsupported dircache version: ${o}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=dle(h);const m=t.indexOf(0,r.tell()+1)-r.tell();if(m<1)throw new Pn(`Got a path length of: ${m}`);if(d.path=r.toString("utf8",m),d.path.includes("..\\")||d.path.includes("../"))throw new nm(d.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new Pn(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new Pn("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(B9)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=Sp(n);const i=Qt.from(t),s={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(s),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Qt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Qt.alloc(r),i=new hl(a),s=Sp(t);return i.writeUInt32BE(s.ctimeSeconds),i.writeUInt32BE(s.ctimeNanoseconds),i.writeUInt32BE(s.mtimeSeconds),i.writeUInt32BE(s.mtimeNanoseconds),i.writeUInt32BE(s.dev),i.writeUInt32BE(s.ino),i.writeUInt32BE(s.mode),i.writeUInt32BE(s.uid),i.writeUInt32BE(s.gid),i.writeUInt32BE(s.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(fle(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Qt.alloc(12),n=new hl(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const o of this.entries)if(r.push(Jd._entryToBuffer(o)),o.stages.length>1)for(const l of o.stages)l&&l!==o&&r.push(Jd._entryToBuffer(l));r=await Promise.all(r);const a=Qt.concat(r),i=Qt.concat([t,a]),s=await Ic(i);return Qt.concat([i,Qt.from(s,"hex")])}}function Ox(e,t,n=!0,r=!0){const a=Sp(e),i=Sp(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let mC=null;const gC=Symbol("IndexCache");function hle(){return{map:new Map,stats:new Map}}async function ple(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await Jd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function mle(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Ox(r,a)}class qa{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[gC]||(r[gC]=hle());const s=`${n}/index`;mC===null&&(mC=new F0({maxPending:1/0}));let o,l=[];return await mC.acquire(s,async()=>{const u=r[gC];await mle(t,s,u)&&await ple(t,s,u);const d=u.map.get(s);if(l=d.unmergedPaths,l.length&&!a)throw new Dy(l);if(o=await i(d),d._dirty){const h=await d.toObject();await t.write(s,h),u.stats.set(s,await t.lstat(s)),d._dirty=!1}}),o}}function Px(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function Ep(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function U9(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Px(a),metadata:{},children:[]};t.set(a,i),i.parent=n(Ep(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const s={type:"blob",fullpath:a,basename:Px(a),metadata:i,parent:n(Ep(a)),children:[]};s.parent&&s.parent.children.push(s),t.set(a,s)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function gle(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new Pn(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class yle{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=qa.acquire({fs:t,gitdir:n,cache:r},async function(i){return U9(i.entries)});const a=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(s=>s.fullpath);return i.sort(o_),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:Sp(r.metadata);t._type=r.type==="tree"?"tree":gle(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const l_=Symbol("GitWalkSymbol");function rm(){const e=Object.create(null);return Object.defineProperty(e,l_,{value:function({fs:t,gitdir:n,cache:r}){return new yle({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class Ir extends cr{constructor(t){super(`Could not find ${t}.`),this.code=this.name=Ir.code,this.data={what:t}}}Ir.code="NotFoundError";class Fi extends cr{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Fi.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Fi.code="ObjectTypeError";class Ku extends cr{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=Ku.code,this.data={value:t}}}Ku.code="InvalidOidError";class My extends cr{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=My.code,this.data={remote:t}}}My.code="NoRefspecError";class Fx{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Fx(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Lx{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,s]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),o=n==="+",l=a==="*";if(l!==(s==="*"))throw new Pn("Invalid refspec");return new Lx({remotePath:r,localPath:i,force:o,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class SN{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Lx.from(r));return new SN(n)}add(t){const n=Lx.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function ble(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const vle=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Ig=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},YD={core:{filemode:Ig,bare:Ig,logallrefupdates:Ig,symlinks:Ig,ignorecase:Ig,bigFileThreshold:vle}},wle=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,xle=/^[A-Za-z0-9-.]+$/,_le=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Sle=/^[A-Za-z][A-Za-z-]*$/,Ele=/^(.*?)( *[#;].*)$/,Cle=e=>{const t=wle.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},Tle=e=>{const t=_le.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=kle(r),i=Ale(a);return[n,i]}return null},kle=e=>{const t=Ele.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return XD(n)&&XD(r)?`${n}${r}`:n},XD=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Ale=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",s=n==="\\"&&a[r+1]==='"';return i||s?t:t+n},""),JD=e=>e!=null?e.toLowerCase():null,ok=(e,t,n)=>[JD(e),t,JD(n)].filter(r=>r!=null).join("."),QD=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:ok(n,a,r),sectionPath:ok(n,a,null),isSection:!!n}},Nle=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class EN{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,s=null;const o=a.trim(),l=Cle(o),u=l!=null;if(u)[n,r]=l;else{const h=Tle(o);h!=null&&([i,s]=h)}const d=ok(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:s,path:d}}):[]}static from(t){return new EN(t)}async get(t,n=!1){const r=QD(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:s,value:o})=>{const l=YD[i]&&YD[i][s];return l?l(o):o});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:s,path:o,sectionPath:l,isSection:u}=QD(t),d=Nle(this.parsedConfig,h=>h.path===o);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],m=Object.assign({},h,{name:s,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,m):this.parsedConfig[d]=m}else{const h=this.parsedConfig.findIndex(g=>g.path===l),m={section:a,subsection:i,name:s,value:n,modified:!0,path:o};if(xle.test(a)&&Sle.test(s))if(h>=0)this.parsedConfig.splice(h+1,0,m);else{const g={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(g,m)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:s=!1})=>s?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class Ea{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return EN.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const pw=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Rle=["config","description","index","shallow","commondir"];let yC;async function Eu(e,t){return yC===void 0&&(yC=new F0),yC.acquire(e,t)}class Vt{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:s,refspecs:o=void 0,prune:l=!1,pruneTags:u=!1}){for(const w of a.values())if(!w.match(/[0-9a-f]{40}/))throw new Ku(w);const d=await Ea.get({fs:t,gitdir:n});if(!o){if(o=await d.getall(`remote.${r}.fetch`),o.length===0)throw new My(r);o.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=SN.from(o),m=new Map;if(u){const w=await Vt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await Vt.deleteRefs({fs:t,gitdir:n,refs:w.map(x=>`refs/tags/${x}`)})}if(s){for(const w of a.keys())if(w.startsWith("refs/tags")&&!w.endsWith("^{}")&&!await Vt.exists({fs:t,gitdir:n,ref:w})){const x=a.get(w);m.set(w,x)}}const g=h.translate([...a.keys()]);for(const[w,x]of g){const _=a.get(w);m.set(x,_)}const v=h.translate([...i.keys()]);for(const[w,x]of v){const _=i.get(w),E=h.translateOne(_);E&&m.set(x,`ref: ${E}`)}const b=[];if(l){for(const w of h.localNamespaces()){const x=(await Vt.listRefs({fs:t,gitdir:n,filepath:w})).map(_=>`${w}/${_}`);for(const _ of x)m.has(_)||b.push(_)}b.length>0&&await Vt.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[w,x]of m)await Eu(w,async()=>t.write(Pt.join(n,w),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new Ku(a);await Eu(r,async()=>t.write(Pt.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Eu(r,async()=>t.write(Pt.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return Vt.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(o=>t.rm(Pt.join(n,o))));let a=await Eu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Fx.from(a),s=i.refs.size;for(const o of r)i.refs.has(o)&&i.delete(o);i.refs.size<s&&(a=i.toString(),await Eu("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),Vt.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await Vt.packedRefs({fs:t,gitdir:n}),s=pw(r).filter(o=>!Rle.includes(o));for(const o of s){const l=await Eu(o,async()=>await t.read(`${n}/${o}`,{encoding:"utf8"})||i.get(o));if(l)return Vt.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new Ir(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await Vt.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await Vt.packedRefs({fs:t,gitdir:n}),i=pw(r);for(const s of i)if(await Eu(s,async()=>t.exists(`${n}/${s}`))||a.has(s))return s;throw new Ir(r)}static async expandAgainstMap({ref:t,map:n}){const r=pw(t);for(const a of r)if(await n.has(a))return a;throw new Ir(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),Vt.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=pw(t);for(const s of i){const o=a.get(s);if(o)return Vt.resolveAgainstMap({ref:o.trim(),fullref:s,depth:r,map:a})}throw new Ir(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Eu("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Fx.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=Vt.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(s=>s.replace(`${n}/${r}/`,""))}catch{i=[]}for(let s of(await a).keys())s.startsWith(r)&&(s=s.replace(r+"/",""),i.includes(s)||i.push(s));return i.sort(ble),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?Vt.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):Vt.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await Vt.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Ile(e,t){return o_(eM(e),eM(t))}function eM(e){return e.mode==="040000"?e.path+"/":e.path}function V9(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new Pn(`Unexpected GitTree entry mode: ${e}`)}function jle(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new Pn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new Pn(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const s=V9(i),o=e.slice(r+1,a).toString("utf8");if(o.includes("\\")||o.includes("/"))throw new nm(o);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:o,oid:l,type:s})}return t}function Dle(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new Pn(`Could not understand file mode: ${e}`)}function Mle(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Dle(e.mode),e.type||(e.type=V9(e.mode)),e}class ts{constructor(t){if(Qt.isBuffer(t))this._entries=jle(t);else if(Array.isArray(t))this._entries=t.map(Mle);else throw new Pn("invalid type passed to GitTree constructor");this._entries.sort(B9)}static from(t){return new ts(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Ile),Qt.concat(t.map(n=>{const r=Qt.from(n.mode.replace(/^0/,"")),a=Qt.from(" "),i=Qt.from(n.path,"utf8"),s=Qt.from([0]),o=Qt.from(n.oid,"hex");return Qt.concat([r,a,i,s,o])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class am{static wrap({type:t,object:n}){return Qt.concat([Qt.from(`${t} ${n.byteLength.toString()}\0`),Qt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),s=t.length-(r+1);if(parseInt(i)!==s)throw new Pn(`Length mismatch: expected ${i} bytes but got ${s} instead.`);return{type:a,object:Qt.from(t.slice(r+1))}}}async function H9({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Ole(e,t){const n=new hl(e),r=tM(n);if(r!==t.byteLength)throw new Pn(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=tM(n);let i;const s=rM(n,t);if(s.byteLength===a)i=s;else{i=Qt.alloc(a);const o=new hl(i);for(o.copy(s);!n.eof();)o.copy(rM(n,t));const l=o.tell();if(a!==l)throw new Pn(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function tM(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function nM(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function rM(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const s=nM(e,n&a,4);let o=nM(e,(n&i)>>4,3);return o===0&&(o=65536),t.slice(s,s+o)}else return e.slice(n)}function Ple(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function q9(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:Ple(e)}class G9{constructor(t){if(typeof Qt>"u")throw new Error("Missing Buffer dependency");this.stream=q9(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Qt.alloc(0):(n&&(n=Qt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>Fle(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Qt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Fle(e){return e.reduce((t,n)=>t+n.length,0)}async function Lle(e,t){const n=new G9(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new Pn(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new Pn(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const s=n.tell(),{type:o,length:l,ofs:u,reference:d}=await Ble(n),h=new _N.Inflate;for(;!h.result;){const m=await n.chunk();if(!m)break;if(h.push(m,!1),h.err)throw new Pn(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new Pn("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(m.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:o,num:i,offset:s,end:g,reference:d,ofs:u})}}}}async function Ble(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let s=4;do t=await e.byte(),r|=(t&127)<<s,s+=7;while(t&128)}let a,i;if(n===6){let s=0;a=0;const o=[];do t=await e.byte(),a|=(t&127)<<s,s+=7,o.push(t);while(t&128);i=Qt.from(o)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function W9(e){return _N.inflate(e)}function $le(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function zle(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Cp{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new hl(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new Pn(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new Pn("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const s=r.readUInt32BE(),o=[];for(let d=0;d<s;d++){const h=r.slice(20).toString("hex");o[d]=h}r.seek(r.tell()+4*s);const l=new Map;for(let d=0;d<s;d++)l.set(o[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new Cp({hashes:o,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},s=t.slice(-20).toString("hex"),o=[],l={},u=new Map;let d=null,h=null;await Lle([t],async({data:w,type:x,reference:_,offset:E,num:T})=>{d===null&&(d=T);const k=Math.floor((d-T)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-T,total:d}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const m=Object.keys(i).map(Number);for(const[w,x]of m.entries()){const _=w+1===m.length?t.byteLength-20:m[w+1],E=i[x],T=$oe.buf(t.slice(x,_))>>>0;E.end=_,E.crc=T}const g=new Cp({pack:Promise.resolve(t),packfileSha:s,crcs:l,hashes:o,offsets:u,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let w in i){w=Number(w);const x=Math.floor(v*100/d);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=x;const _=i[w];if(!_.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:T}=await g.readSlice({start:w});b[g.readDepth]+=1;const k=await Ic(am.wrap({type:E,object:T}));_.oid=k,o.push(k),u.set(k,w),l[k]=_.crc}catch{continue}}return o.sort(),g}async toBuffer(){const t=[],n=(u,d)=>{t.push(Qt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new hl(Qt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new hl(Qt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new hl(Qt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const s=Qt.concat(t),o=await Ic(s),l=Qt.alloc(20);return l.write(o,"hex"),Qt.concat([s,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new Pn(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new Pn("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new hl(r),i=a.readUInt8(),s=i&112;let o=n[s];if(o===void 0)throw new Pn("Unrecognized type: 0b"+s.toString(2));const l=i&15;let u=l;i&128&&(u=zle(a,l));let h=null,m=null;if(o==="ofs_delta"){const v=$le(a),b=t-v;({object:h,type:o}=await this.readSlice({start:b}))}if(o==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:o}=await this.read({oid:v}))}const g=r.slice(a.tell());if(m=Qt.from(await W9(g)),m.byteLength!==u)throw new Pn(`Packfile told us object would have length ${u} but it had length ${m.byteLength}`);return h&&(m=Qt.from(Ole(m,h))),this.readDepth>3&&(this.offsetCache[t]={type:o,object:m}),{type:o,format:"content",object:m}}}const mw=Symbol("PackfileCache");async function Ule({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Cp.fromIdx({idx:i,getExternalRefDelta:n})}function CN({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[mw]||(t[mw]=new Map);let s=t[mw].get(n);return s||(s=Ule({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[mw].set(n,s)),s}async function Vle({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await CN({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new Pn(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${o.replace(/idx$/,"pack")}`,d}}return null}async function Kr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Kr({fs:e,cache:t,gitdir:n,oid:d});let s;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(s={format:"wrapped",object:Qt.from("tree 0\0")}),s||(s=await H9({fs:e,gitdir:n,oid:r})),!s){if(s=await Vle({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!s)throw new Ir(r);return s}if(a==="deflated"||(s.format==="deflated"&&(s.object=Qt.from(await W9(s.object)),s.format="wrapped"),a==="wrapped"))return s;const o=await Ic(s.object);if(o!==r)throw new Pn(`SHA check failed! Expected ${r}, computed ${o}`);const{object:l,type:u}=am.unwrap(s.object);if(s.type=u,s.object=l,s.format="content",a==="content")return s;throw new Pn(`invalid requested format "${a}"`)}class Bo extends cr{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=Bo.code,this.data={noun:t,where:n,canForce:r}}}Bo.code="AlreadyExistsError";class Oy extends cr{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=Oy.code,this.data={nouns:t,short:n,matches:r}}}Oy.code="AmbiguousError";class Py extends cr{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=Py.code,this.data={filepaths:t}}}Py.code="CheckoutConflictError";class Fy extends cr{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=Fy.code,this.data={ref:t,oid:n}}}Fy.code="CommitNotFetchedError";class Ly extends cr{constructor(){super("Empty response from git server."),this.code=this.name=Ly.code,this.data={}}}Ly.code="EmptyServerResponseError";class By extends cr{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=By.code,this.data={}}}By.code="FastForwardError";class $y extends cr{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=$y.code,this.data={prettyDetails:t,result:n}}}$y.code="GitPushError";class Tp extends cr{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Tp.code,this.data={statusCode:t,statusMessage:n,response:r}}}Tp.code="HttpError";class Zu extends cr{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=Zu.code,this.data={reason:t}}}Zu.code="InvalidFilepathError";class Do extends cr{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Do.code,this.data={ref:t,suggestion:n}}}Do.code="InvalidRefNameError";class zy extends cr{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=zy.code,this.data={depth:t}}}zy.code="MaxDepthError";class im extends cr{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=im.code,this.data={}}}im.code="MergeNotSupportedError";class sm extends cr{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=sm.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}sm.code="MergeConflictError";class wi extends cr{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=wi.code,this.data={role:t}}}wi.code="MissingNameError";class Ji extends cr{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Ji.code,this.data={parameter:t}}}Ji.code="MissingParameterError";class Uy extends cr{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=Uy.code,this.data={errors:t},this.errors=t}}Uy.code="MultipleGitError";class zf extends cr{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=zf.code,this.data={expected:t,actual:n}}}zf.code="ParseError";class kp extends cr{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=kp.code,this.data={reason:t}}}kp.code="PushRejectedError";class ju extends cr{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=ju.code,this.data={capability:t,parameter:n}}}ju.code="RemoteCapabilityError";class Vy extends cr{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=Vy.code,this.data={preview:t,response:n}}}Vy.code="SmartHttpError";class Hy extends cr{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Hy.code,this.data={url:t,transport:n,suggestion:r}}}Hy.code="UnknownTransportError";class qy extends cr{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=qy.code,this.data={url:t}}}qy.code="UrlParseError";class om extends cr{constructor(){super("The operation was canceled."),this.code=this.name=om.code,this.data={}}}om.code="UserCanceledError";class Gy extends cr{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Gy.code,this.data={filepath:t}}}Gy.code="IndexResetError";class Wy extends cr{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=Wy.code,this.data={ref:t}}}Wy.code="NoCommitError";var Hle=Object.freeze({__proto__:null,AlreadyExistsError:Bo,AmbiguousError:Oy,CheckoutConflictError:Py,CommitNotFetchedError:Fy,EmptyServerResponseError:Ly,FastForwardError:By,GitPushError:$y,HttpError:Tp,InternalError:Pn,InvalidFilepathError:Zu,InvalidOidError:Ku,InvalidRefNameError:Do,MaxDepthError:zy,MergeNotSupportedError:im,MergeConflictError:sm,MissingNameError:wi,MissingParameterError:Ji,MultipleGitError:Uy,NoRefspecError:My,NotFoundError:Ir,ObjectTypeError:Fi,ParseError:zf,PushRejectedError:kp,RemoteCapabilityError:ju,SmartHttpError:Vy,UnknownTransportError:Hy,UnsafeFilepathError:nm,UrlParseError:qy,UserCanceledError:om,UnmergedPathsError:Dy,IndexResetError:Gy,NoCommitError:Wy});function lk({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=qle(r),`${e} <${t}> ${n} ${r}`}function qle(e){const t=Gle(Wle(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function Gle(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Wle(e){return e===0?e:-e}function cc(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function Bx(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:Kle(a)}}function Kle(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),Zle(r)}function Zle(e){return e===0?e:-e}class ji{constructor(t){if(typeof t=="string")this._tag=t;else if(Qt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=ji.render(t);else throw new Pn("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new ji(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${lk(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.tagger&&(r.tagger=Bx(r.tagger)),r.committer&&(r.committer=Bx(r.committer)),r}withoutSignature(){const t=cc(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return cc(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Qt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=cc(i);const s=a+i;return ji.from(s)}}function bC(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function Yle(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Gr{constructor(t){if(typeof t=="string")this._commit=t;else if(Qt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Gr.render(t);else throw new Pn("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Gr.justHeaders(t),a=Gr.justMessage(t),i=cc(r+`
gpgsig`+bC(n)+`
`+a);return new Gr(i)}static from(t){return new Gr(t)}toObject(){return Qt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Gr.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return cc(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Gr.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),s=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(s):r[i]=s}return r.author&&(r.author=Bx(r.author)),r.committer&&(r.committer=Bx(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new Pn("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${lk(r)}
`;const a=t.committer||t.author;return n+=`committer ${lk(a)}
`,t.gpgsig&&(n+="gpgsig"+bC(t.gpgsig)),n}static render(t){return Gr.renderHeaders(t)+`
`+cc(t.message)}render(){return this._commit}withoutSignature(){const t=cc(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return cc(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return Yle(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Gr.justMessage(t._commit);let{signature:s}=await n({payload:a,secretKey:r});s=cc(s);const l=Gr.justHeaders(t._commit)+`
gpgsig`+bC(s)+`
`+i;return Gr.from(l)}}async function Ap({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:ts.from([]),oid:r};const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ji.from(i).parse().object,Ap({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Gr.from(i).parse().tree,Ap({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Fi(r,a,"tree");return{tree:ts.from(i),oid:r}}class Xle{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const s=new Map;let o;try{o=await Vt.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof Ir&&(o="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await Ap({fs:t,cache:this.cache,gitdir:n,oid:o});return l.type="tree",l.mode="40000",s.set(".",l),s})();const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,s=await this.mapPromise,o=s.get(n);if(!o)throw new Error(`No obj for ${n}`);const l=o.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(o)}`);if(o.type!=="tree")return null;const{type:u,object:d}=await Kr({fs:r,cache:a,gitdir:i,oid:l});if(u!==o.type)throw new Fi(l,u,o.type);const h=ts.from(d);for(const m of h)s.set(Pt.join(n,m.path),m);return h.entries().map(m=>Pt.join(n,m.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=$9(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,o=n.get(t._fullpath).oid,{type:l,object:u}=await Kr({fs:r,cache:a,gitdir:i,oid:o});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function Ws({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,l_,{value:function({fs:n,gitdir:r,cache:a}){return new Xle({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class Jle{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Pt.join(a,n));return i===null?null:i.map(s=>Pt.join(n,s))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=Sp(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const s=await(await this._getGitConfig(n,a)).get("core.autocrlf"),o=await n.read(`${r}/${t._fullpath}`,{autocrlf:s});t._actualSize=o.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(o)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let s;await qa.acquire({fs:r,gitdir:a,cache:i},async function(o){const l=o.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),m=typeof da<"u"?da.platform!=="win32":!0;if(!l||Ox(u,l,h,m)){const g=await t.content();g===void 0?s=void 0:(s=await Ic(am.wrap({type:"blob",object:g})),l&&s===l.oid&&(!h||u.mode===l.mode)&&Ox(u,l,h,m)&&o.insert({filepath:t._fullpath,stats:u,oid:s}))}else s=l.oid}),t._oid=s}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await Ea.get({fs:t,gitdir:n}),this.config)}}function Ky(){const e=Object.create(null);return Object.defineProperty(e,l_,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new Jle({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function Qle(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const K9=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class ece{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*tce(e){const t=new ece;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let s=0;s<a;s++)r[s]!==void 0&&r[s]===n?(i[s]=r[s],r[s]=e[s].next().value):i[s]=null,r[s]!==void 0&&t.consider(r[s]);if(yield i,t.value===null)return}}async function Yu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:s=async(l,u)=>{const d=K9(u);return l!==void 0&&d.unshift(l),d},iterate:o=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(g=>g[l_]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=Qle(0,l.length),h=async g=>{d.map(w=>{const x=g[w];g[w]=x&&new l[w].ConstructEntry(x)});const b=(await Promise.all(d.map(w=>{const x=g[w];return x?l[w].readdir(x):[]}))).map(w=>(w===null?[]:w)[Symbol.iterator]());return{entries:g,children:tce(b)}},m=async g=>{const{entries:v,children:b}=await h(g),w=v.find(_=>_&&_._fullpath)._fullpath,x=await i(w,v);if(x!==null){let _=await o(m,b);return _=_.filter(E=>E!==void 0),s(x,_)}};return m(u)}async function ck(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Pt.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?ck(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function nce(e){return rce(e)&&aM(e.then)&&aM(e.catch)}function rce(e){return e&&typeof e=="object"}function aM(e){return typeof e=="function"}function iM(e){return nce((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const sM=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function oM(e,t){if(iM(t))for(const n of sM)e[`_${n}`]=t[n].bind(t);else for(const n of sM)e[`_${n}`]=cC(t[n].bind(t));iM(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=ck.bind(null,e):t.rm?e._rm=cC(t.rm.bind(t)):t.rmdir.length>2?e._rm=cC(t.rmdir.bind(t)):e._rm=ck.bind(null,e)}class un{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?oM(this,t.promises):oM(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Qt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(Ep(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=Ep(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(o_),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Qt.isBuffer(r)?r:Qt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function et(e,t){if(t===void 0)throw new Ji(e)}async function $x(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function ace({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r="HEAD",cache:a={}}){try{et("fs",e),et("dir",t),et("gitdir",n);const i=new un(e),s=[Ws({ref:r}),Ky(),rm()];let o=[];await qa.acquire({fs:i,gitdir:n,cache:a},async function(u){o=u.unmergedPaths});const l=await Yu({fs:i,cache:a,dir:t,gitdir:n,trees:s,map:async function(u,[d,h,m]){const g=!await $x(h,m),v=o.includes(u),b=!await $x(m,d);if(g||v)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new Gy(u)}});await qa.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class lm{static async isIgnored({fs:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a}){if(Px(a)===".git")return!0;if(a===".")return!1;let i="";const s=Pt.join(r,"info","exclude");await t.exists(s)&&(i=await t.read(s,"utf8"));const o=[{gitignore:Pt.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),m=l.slice(d).join("/");o.push({gitignore:Pt.join(n,h,".gitignore"),filepath:m})}let u=!1;for(const d of o){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const m=tle().add(i);m.add(h);const g=Ep(d.filepath);if(g!=="."&&m.ignores(g))return!0;u?u=!m.test(d.filepath).unignored:u=m.test(d.filepath).ignored}return u}}async function ice({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,s=`${t}/${i}`;await e.exists(s)||await e.write(s,n)}let vC=null;async function Z9(e){return vC===null&&(vC=oce()),vC?sce(e):_N.deflate(e)}async function sce(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function oce(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function as({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:s=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=am.wrap({type:n,object:r})),i=await Ic(r),r=Qt.from(await Z9(r))),s||await ice({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function Y9(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function lce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:s=!0}){try{et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r);const o=new un(e);await qa.acquire({fs:o,gitdir:n,cache:a},async l=>{const d=await(await Ea.get({fs:o,gitdir:n})).get("core.autocrlf");return uk({dir:t,gitdir:n,fs:o,filepath:r,index:l,force:i,parallel:s,autocrlf:d})})}catch(o){throw o.caller="git.add",o}}async function uk({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:s,autocrlf:o}){r=Array.isArray(r)?r:[r];const l=r.map(async m=>{if(!i&&await lm.isIgnored({fs:n,dir:e,gitdir:t,filepath:m}))return;const g=await n.lstat(Pt.join(e,m));if(!g)throw new Ir(m);if(g.isDirectory()){const v=await n.readdir(Pt.join(e,m));if(s){const b=v.map(w=>uk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,w)],index:a,force:i,parallel:s,autocrlf:o}));await Promise.all(b)}else for(const b of v)await uk({dir:e,gitdir:t,fs:n,filepath:[Pt.join(m,b)],index:a,force:i,parallel:s,autocrlf:o})}else{const v=g.isSymbolicLink()?await n.readlink(Pt.join(e,m)).then(Y9):await n.read(Pt.join(e,m),{autocrlf:o});if(v===null)throw new Ir(m);const b=await as({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:m,stats:g,oid:b})}}),u=await Promise.allSettled(l),d=u.filter(m=>m.status==="rejected").map(m=>m.reason);if(d.length>1)throw new Uy(d);if(d.length===1)throw d[0];return u.filter(m=>m.status==="fulfilled"&&m.value).map(m=>m.value)}async function L0({fs:e,gitdir:t,path:n}){return(await Ea.get({fs:e,gitdir:t})).get(n)}function X9(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function Xu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await L0({fs:e,gitdir:t,path:"user.name"}),email:await L0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},s=X9({},i,r?r.author:void 0,n);if(s.name!==void 0)return s}async function Np({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),s={name:await L0({fs:e,gitdir:t,path:"user.name"}),email:await L0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},o=X9({},s,a?a.committer:void 0,n,r);if(o.name!==void 0)return o}async function J9({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ji.from(i).parse().object,J9({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Fi(r,a,"commit");return{commit:Gr.from(i),oid:r}}async function Rp({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await J9({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function c_({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g}){let v=!1;h||(h=await Vt.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,w;try{b=await Vt.resolve({fs:e,gitdir:r,ref:h}),w=await Rp({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new Wy(h);const x=l?await Xu({fs:e,gitdir:r,author:i,commit:w.commit}):await Xu({fs:e,gitdir:r,author:i});if(!x)throw new wi("author");const _=l?await Np({fs:e,gitdir:r,author:x,committer:s,commit:w.commit}):await Np({fs:e,gitdir:r,author:x,committer:s});if(!_)throw new wi("committer");return qa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=U9(E.entries).get(".");if(g||(g=await Q9({fs:e,gitdir:r,inode:k,dryRun:u})),m?m=await Promise.all(m.map(I=>Vt.resolve({fs:e,gitdir:r,ref:I}))):l?m=w.commit.parent:m=b?[b]:[],!a)if(l)a=w.commit.message;else throw new Ji("message");let R=Gr.from({tree:g,parent:m,author:x,committer:_,message:a});o&&(R=await Gr.sign(R,n,o));const j=await as({fs:e,gitdir:r,type:"commit",object:R.toObject(),dryRun:u});return!d&&!u&&await Vt.writeRef({fs:e,gitdir:r,ref:h,value:j}),j})}async function Q9({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await Q9({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),s=ts.from(i);return await as({fs:e,gitdir:t,type:"tree",object:s.toObject(),dryRun:r})}async function Zy({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new Zu("leading-slash");if(a.endsWith("/"))throw new Zu("trailing-slash");const i=r,s=await Ap({fs:e,cache:t,gitdir:n,oid:r}),o=s.tree;if(a==="")r=s.oid;else{const l=a.split("/");r=await eB({fs:e,cache:t,gitdir:n,tree:o,pathArray:l,oid:i,filepath:a})}return r}async function eB({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s}){const o=a.shift();for(const l of r)if(l.path===o){if(a.length===0)return l.oid;{const{type:u,object:d}=await Kr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new Fi(i,u,"tree",s);return r=ts.from(d),eB({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:s})}}throw new Ir(`file or directory found at "${i}:${s}"`)}async function cm({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await Zy({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:s}=await Ap({fs:e,cache:t,gitdir:n,oid:r});return{oid:s,tree:i.entries()}}async function Yy({fs:e,gitdir:t,tree:n}){const r=ts.from(n).toObject();return await as({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function cce({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:s,force:o,author:l,committer:u,signingKey:d}){let h;try{h=await Vt.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof Ir))throw x}let g=(await cm({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(o)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new Bo("note",i);typeof s=="string"&&(s=Qt.from(s,"utf8"));const v=await as({fs:e,gitdir:r,type:"blob",object:s,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await Yy({fs:e,gitdir:r,tree:g});return await c_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function uce({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:s,force:o,author:l,committer:u,signingKey:d,cache:h={}}){try{et("fs",e),et("gitdir",r),et("oid",i),et("note",s),d&&et("onSign",t);const m=new un(e),g=await Xu({fs:m,gitdir:r,author:l});if(!g)throw new wi("author");const v=await Np({fs:m,gitdir:r,author:g,committer:u});if(!v)throw new wi("committer");return await cce({fs:new un(m),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:s,force:o,author:g,committer:v,signingKey:d})}catch(m){throw m.caller="git.addNote",m}}async function tB({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==gl.clean(n))throw new Do(n,gl.clean(n));const i=await Ea.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new Bo("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await Ea.save({fs:e,gitdir:t,config:i})}async function dce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r,url:a,force:i=!1}){try{return et("fs",e),et("gitdir",n),et("remote",r),et("url",a),await tB({fs:new un(e),gitdir:n,remote:r,url:a,force:i})}catch(s){throw s.caller="git.addRemote",s}}async function fce({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await Vt.exists({fs:e,gitdir:r,ref:a}))throw new Bo("tag",a);const h=await Vt.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:m}=await Kr({fs:e,cache:t,gitdir:r,oid:h});let g=ji.from({object:h,type:m,tag:a.replace("refs/tags/",""),tagger:i,message:s,gpgsig:o});u&&(g=await ji.sign(g,n,u));const v=await as({fs:e,gitdir:r,type:"tag",object:g.toObject()});await Vt.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function hce({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a,tagger:i,message:s=a,gpgsig:o,object:l,signingKey:u,force:d=!1,cache:h={}}){try{et("fs",e),et("gitdir",r),et("ref",a),u&&et("onSign",t);const m=new un(e),g=await Xu({fs:m,gitdir:r,author:i});if(!g)throw new wi("tagger");return await fce({fs:m,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:s,gpgsig:o,object:l,signingKey:u,force:d})}catch(m){throw m.caller="git.annotatedTag",m}}async function pce({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==gl.clean(n))throw new Do(n,gl.clean(n));const s=`refs/heads/${n}`;if(!i&&await Vt.exists({fs:e,gitdir:t,ref:s}))throw new Bo("branch",n,!1);let o;try{o=await Vt.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}o&&await Vt.writeRef({fs:e,gitdir:t,ref:s,value:o}),a&&await Vt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function mce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,checkout:i=!1,force:s=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),await pce({fs:new un(e),gitdir:n,ref:r,object:a,checkout:i,force:s})}catch(o){throw o.caller="git.branch",o}}const nB=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function TN({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:s,ref:o,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:m,track:g=!0}){let v;if(r)try{v=await Vt.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await Vt.resolve({fs:e,gitdir:i,ref:o})}catch(w){if(o==="HEAD")throw w;const x=`${s}/${o}`;if(b=await Vt.resolve({fs:e,gitdir:i,ref:x}),g){const _=await Ea.get({fs:e,gitdir:i});await _.set(`branch.${o}.remote`,s),await _.set(`branch.${o}.merge`,`refs/heads/${o}`),await Ea.save({fs:e,gitdir:i,config:_})}await Vt.writeRef({fs:e,gitdir:i,ref:`refs/heads/${o}`,value:b})}if(!u){let w;try{w=await gce({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:o,force:m,filepaths:l})}catch(k){throw k instanceof Ir&&k.data.what===b?new Fy(o,b):k}const x=w.filter(([k])=>k==="conflict").map(([k,R])=>R);if(x.length>0)throw new Py(x);const _=w.filter(([k])=>k==="error").map(([k,R])=>R);if(_.length>0)throw new Pn(_.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const T=w.length;await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(w.filter(([R])=>R==="delete"||R==="delete-index").map(async function([R,j]){const I=`${a}/${j}`;R==="delete"&&await e.rm(I),k.delete({filepath:j}),n&&await n({phase:"Updating workdir",loaded:++E,total:T})}))}),await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[R,j]of w)if(R==="rmdir"||R==="rmdir-index"){const I=`${a}/${j}`;try{R==="rmdir-index"&&k.delete({filepath:j}),await e.rmdir(I),n&&await n({phase:"Updating workdir",loaded:++E,total:T})}catch(P){if(P.code==="ENOTEMPTY")console.log(`Did not delete ${j} because directory is not empty`);else throw P}}}),await Promise.all(w.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,R]){const j=`${a}/${R}`;await e.mkdir(j),n&&await n({phase:"Updating workdir",loaded:++E,total:T})})),await qa.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(w.filter(([R])=>R==="create"||R==="create-index"||R==="update"||R==="mkdir-index").map(async function([R,j,I,P,O]){const U=`${a}/${j}`;try{if(R!=="create-index"&&R!=="mkdir-index"){const{object:W}=await Kr({fs:e,cache:t,gitdir:i,oid:I});if(O&&await e.rm(U),P===33188)await e.write(U,W);else if(P===33261)await e.write(U,W,{mode:511});else if(P===40960)await e.writelink(U,W);else throw new Pn(`Invalid mode 0o${P.toString(8)} detected in blob ${I}`)}const M=await e.lstat(U);P===33261&&(M.mode=493),R==="mkdir-index"&&(M.mode=57344),k.insert({filepath:j,stats:M,oid:I}),n&&await n({phase:"Updating workdir",loaded:++E,total:T})}catch(M){console.log(M)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const w=await Vt.expand({fs:e,gitdir:i,ref:o});w.startsWith("refs/heads")?await Vt.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:w}):await Vt.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function gce({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:s,filepaths:o}){let l=0;return Yu({fs:e,cache:t,dir:r,gitdir:a,trees:[Ws({ref:i}),Ky(),rm()],map:async function(u,[d,h,m]){if(u===".")return;if(o&&!o.some(v=>nB(u,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!m,!!d,!!h].map(Number).join("")){case"000":return;case"001":return s&&o&&o.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?s?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await m.type()){case"tree":return["rmdir",u];case"blob":return await m.oid()!==await h.oid()?s?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await m.type()}`]}case"110":case"111":switch(`${await m.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await m.oid()===await d.oid()&&await m.mode()===await d.mode()&&!s)return;if(h){if(await h.oid()!==await m.oid()&&await h.oid()!==await d.oid())return s?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(s)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await m.mode()];return await d.mode()!==await m.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await m.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await m.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=K9(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function rB({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Pt.join(r,".git"),remote:i="origin",ref:s,filepaths:o,noCheckout:l=!1,noUpdateHead:u=s===void 0,dryRun:d=!1,force:h=!1,track:m=!0,cache:g={}}){try{et("fs",e),et("dir",r),et("gitdir",a);const v=s||"HEAD";return await TN({fs:new un(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:o,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:m})}catch(v){throw v.caller="git.checkout",v}}const yce=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function nf(e){const t=yce.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function dd({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await Vt.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await Vt.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:nf(a)}function bce(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function aB({username:e="",password:t=""}){return`Basic ${Qt.from(`${e}:${t}`).toString("base64")}`}async function Xy(e,t){const n=q9(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function zx(e){let t=0;const n=[];await Xy(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function lM(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function dk(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class ua{static flush(){return Qt.from("0000","utf8")}static delim(){return Qt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Qt.from(t));const n=t.length+4,r=dk(4,n);return Qt.concat([Qt.from(r,"utf8"),t])}static streamReader(t){const n=new G9(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function cM(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function uM(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=ua.streamReader(e);let s=await i();for(;s===null;)s=await i();if(s===!0)throw new Ly;if(s.includes("version 2"))return cM(i);if(s.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new zf(`# service=${t}\\n`,s.toString("utf8"));let o=await i();for(;o===null;)o=await i();if(o===!0)return{capabilities:n,refs:r,symrefs:a};if(o=o.toString("utf8"),o.includes("version 2"))return cM(i);const[l,u]=wC(o,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=wC(l," "," ");for(r.set(h,d);;){const m=await i();if(m===!0)break;if(m!==null){const[g,v]=wC(m.toString("utf8")," "," ");r.set(v,g)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function wC(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new zf(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const dM=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,fM=(e,t)=>{(t.username||t.password)&&(e.Authorization=aB(t)),t.headers&&Object.assign(e,t.headers)},xC=async e=>{try{const t=Qt.from(await zx(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Ux{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:s,service:o,url:l,headers:u,protocolVersion:d}){let{url:h,auth:m}=lM(l);const g=s?dM(s,h):h;(m.username||m.password)&&(u.Authorization=aB(m)),d===2&&(u["Git-Protocol"]="version=2");let v,b,w=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${o}`,headers:u}),b=!1,v.statusCode===401||v.statusCode===203){const x=w?i:r;if(x){if(m=await x(h,{...m,headers:{...u}}),m&&m.cancel)throw new om;m&&(fM(u,m),w=!0,b=!0)}}else v.statusCode===200&&w&&a&&await a(h,m);while(b);if(v.statusCode!==200){const{response:x}=await xC(v);throw new Tp(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${o}-advertisement`){const x=await uM(v.body,{service:o});return x.auth=m,x}else{const{preview:x,response:_,data:E}=await xC(v);try{const T=await uM([E],{service:o});return T.auth=m,T}catch{throw new Vy(x,_)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:s,body:o,headers:l}){const u=lM(i);u&&(i=u.url),r&&(i=dM(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,fM(l,s);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:o,headers:l});if(d.statusCode!==200){const{response:h}=xC(d);throw new Tp(d.statusCode,d.statusMessage,h)}return d}}function vce({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class u_{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Ux),n.set("https",Ux);const r=vce({url:t});if(!r)throw new qy(t);if(n.has(r.transport))return n.get(r.transport);throw new Hy(t,r.transport,r.transport==="ssh"?bce(t):void 0)}}let Gd=null;class B0{static async read({fs:t,gitdir:n}){Gd===null&&(Gd=new F0);const r=Pt.join(n,"shallow"),a=new Set;return await Gd.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(s=>a.add(s))}),a}static async write({fs:t,gitdir:n,oids:r}){Gd===null&&(Gd=new F0);const a=Pt.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await Gd.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await Gd.acquire(a,async function(){await t.rm(a)})}}async function wce({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function xce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Pt.join(n,"objects/pack"));i=i.filter(s=>s.endsWith(".idx"));for(const s of i){const o=`${n}/objects/pack/${s}`,l=await CN({fs:e,cache:t,filename:o,getExternalRefDelta:a});if(l.error)throw new Pn(l.error);if(l.offsets.has(r))return!0}return!1}async function hM({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=o=>Kr({fs:e,cache:t,gitdir:n,oid:o});let s=await wce({fs:e,gitdir:n,oid:r});return s||(s=await xce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),s}function _ce(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function iB(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const d_={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class $w{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Sce(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function sB(e){const t=new $w;let n="";return(async()=>(await Xy(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Sce(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class oB{static demux(t){const n=ua.streamReader(t),r=new $w,a=new $w,i=new $w,s=async function(){const o=await n();if(o===null)return s();if(o===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(o[0]){case 1:{a.write(o.slice(1));break}case 2:{i.write(o.slice(1));break}case 3:{const l=o.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(o)}s()};return s(),{packetlines:r,packfile:a,progress:i}}}async function Ece(e){const{packetlines:t,packfile:n,progress:r}=oB.demux(e),a=[],i=[],s=[];let o=!1,l=!1;return new Promise((u,d)=>{Xy(t,h=>{const m=h.toString("utf8").trim();if(m.startsWith("shallow")){const g=m.slice(-41).trim();g.length!==40&&d(new Ku(g)),a.push(g)}else if(m.startsWith("unshallow")){const g=m.slice(-41).trim();g.length!==40&&d(new Ku(g)),i.push(g)}else if(m.startsWith("ACK")){const[,g,v]=m.split(" ");s.push({oid:g,status:v}),v||(l=!0)}else m.startsWith("NAK")?(o=!0,l=!0):(l=!0,o=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:s,nak:o,packfile:n,progress:r}))})})}function Cce({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:s=[]}){const o=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)o.push(ua.encode(`want ${u}${l}
`)),l="";for(const u of r)o.push(ua.encode(`shallow ${u}
`));a!==null&&o.push(ua.encode(`deepen ${a}
`)),i!==null&&o.push(ua.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of s)o.push(ua.encode(`deepen-not ${u}
`));o.push(ua.flush());for(const u of n)o.push(ua.encode(`have ${u}
`));return o.push(ua.encode(`done
`)),o}async function kN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:l,ref:u,remoteRef:d,remote:h,url:m,corsProxy:g,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:_=!1,singleBranch:E=!1,headers:T={},prune:k=!1,pruneTags:R=!1}){const j=u||await dd({fs:e,gitdir:l,test:!0}),I=await Ea.get({fs:e,gitdir:l}),P=h||j&&await I.get(`branch.${j}.remote`)||"origin",O=m||await I.get(`remote.${P}.url`);if(typeof O>"u")throw new Ji("remote OR url");const U=d||j&&await I.get(`branch.${j}.merge`)||u||"HEAD";g===void 0&&(g=await I.get("http.corsProxy"));const M=u_.getRemoteHelperFor({url:O}),W=await M.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:g,service:"git-upload-pack",url:O,headers:T,protocolVersion:1}),V=W.auth,ie=W.refs;if(ie.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!W.capabilities.has("shallow"))throw new ju("shallow","depth");if(b!==null&&!W.capabilities.has("deepen-since"))throw new ju("deepen-since","since");if(w.length>0&&!W.capabilities.has("deepen-not"))throw new ju("deepen-not","exclude");if(x===!0&&!W.capabilities.has("deepen-relative"))throw new ju("deepen-relative","relative");const{oid:ae,fullref:ne}=Vt.resolveAgainstMap({ref:U,map:ie});for(const Le of ie.keys())Le===ne||Le==="HEAD"||Le.startsWith("refs/heads/")||_&&Le.startsWith("refs/tags/")||ie.delete(Le);const q=iB([...W.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${d_.agent}`]);x&&q.push("deepen-relative");const te=E?[ae]:ie.values(),G=E?[j]:await Vt.listRefs({fs:e,gitdir:l,filepath:"refs"});let J=[];for(let Le of G)try{Le=await Vt.expand({fs:e,gitdir:l,ref:Le});const Ie=await Vt.resolve({fs:e,gitdir:l,ref:Le});await hM({fs:e,cache:t,gitdir:l,oid:Ie})&&J.push(Ie)}catch{}J=[...new Set(J)];const Q=await B0.read({fs:e,gitdir:l}),se=W.capabilities.has("shallow")?[...Q]:[],fe=Cce({capabilities:q,wants:te,haves:J,shallows:se,depth:v,since:b,exclude:w}),ve=Qt.from(await zx(fe)),je=await M.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:O,auth:V,body:[ve],headers:T}),Ne=await Ece(je.body);je.headers&&(Ne.headers=je.headers);for(const Le of Ne.shallows)if(!Q.has(Le))try{const{object:Ie}=await Kr({fs:e,cache:t,gitdir:l,oid:Le}),B=new Gr(Ie),Ce=await Promise.all(B.headers().parent.map(ce=>hM({fs:e,cache:t,gitdir:l,oid:ce})));Ce.length===0||Ce.every(ce=>ce)||Q.add(Le)}catch{Q.add(Le)}for(const Le of Ne.unshallows)Q.delete(Le);if(await B0.write({fs:e,gitdir:l,oids:Q}),E){const Le=new Map([[ne,ae]]),Ie=new Map;let B=10,Ce=ne;for(;B--;){const oe=W.symrefs.get(Ce);if(oe===void 0)break;Ie.set(Ce,oe),Ce=oe}const Ee=ie.get(Ce);Ee&&Le.set(Ce,Ee);const{pruned:ce}=await Vt.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:Le,symrefs:Ie,tags:_,prune:k});k&&(Ne.pruned=ce)}else{const{pruned:Le}=await Vt.updateRemoteRefs({fs:e,gitdir:l,remote:P,refs:ie,symrefs:W.symrefs,tags:_,prune:k,pruneTags:R});k&&(Ne.pruned=Le)}if(Ne.HEAD=W.symrefs.get("HEAD"),Ne.HEAD===void 0){const{oid:Le}=Vt.resolveAgainstMap({ref:"HEAD",map:ie});for(const[Ie,B]of ie.entries())if(Ie!=="HEAD"&&B===Le){Ne.HEAD=Ie;break}}const Se=ne.startsWith("refs/tags")?"tag":"branch";if(Ne.FETCH_HEAD={oid:ae,description:`${Se} '${nf(ne)}' of ${O}`},r||a){const Le=sB(Ne.progress);Xy(Le,async Ie=>{if(a&&await a(Ie),r){const B=Ie.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);B&&await r({phase:B[1].trim(),loaded:parseInt(B[2],10),total:parseInt(B[3],10)})}})}const ye=Qt.from(await zx(Ne.packfile));if(je.body.error)throw je.body.error;const Fe=ye.slice(-20).toString("hex"),Xe={defaultBranch:Ne.HEAD,fetchHead:Ne.FETCH_HEAD.oid,fetchHeadDescription:Ne.FETCH_HEAD.description};if(Ne.headers&&(Xe.headers=Ne.headers),k&&(Xe.pruned=Ne.pruned),Fe!==""&&!_ce(ye)){Xe.packfile=`objects/pack/pack-${Fe}.pack`;const Le=Pt.join(l,Xe.packfile);await e.write(Le,ye);const Ie=Ce=>Kr({fs:e,cache:t,gitdir:l,oid:Ce}),B=await Cp.fromPack({pack:ye,getExternalRefDelta:Ie,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await B.toBuffer())}return Xe}async function lB({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(s=>r+"/"+s);for(const s of i)await e.mkdir(s);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Tce({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:m,ref:g,remote:v,depth:b,since:w,exclude:x,relative:_,singleBranch:E,noCheckout:T,noTags:k,headers:R}){try{if(await lB({fs:e,gitdir:d}),await tB({fs:e,gitdir:d,remote:v,url:h,force:!1}),m){const P=await Ea.get({fs:e,gitdir:d});await P.set("http.corsProxy",m),await Ea.save({fs:e,gitdir:d,config:P})}const{defaultBranch:j,fetchHead:I}=await kN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:d,ref:g,remote:v,corsProxy:m,depth:b,since:w,exclude:x,relative:_,singleBranch:E,headers:R,tags:!k});if(I===null)return;g=g||j,g=g.replace("refs/heads/",""),await TN({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:g,remote:v,noCheckout:T})}catch(j){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),j}}async function kce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u=Pt.join(l,".git"),url:d,corsProxy:h=void 0,ref:m=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:w=[],relative:x=!1,singleBranch:_=!1,noCheckout:E=!1,noTags:T=!1,headers:k={},cache:R={}}){try{return et("fs",e),et("http",t),et("gitdir",u),E||et("dir",l),et("url",d),await Tce({fs:new un(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPostCheckout:o,dir:l,gitdir:u,url:d,corsProxy:h,ref:m,remote:g,depth:v,since:b,exclude:w,relative:x,singleBranch:_,noCheckout:E,noTags:T,headers:k})}catch(j){throw j.caller="git.clone",j}}async function Ace({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),message:a,author:i,committer:s,signingKey:o,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:m,tree:g,cache:v={}}){try{et("fs",e),l||et("message",a),o&&et("onSign",t);const b=new un(e);return await c_({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:s,signingKey:o,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:m,tree:g})}catch(b){throw b.caller="git.commit",b}}async function Nce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),fullname:r=!1,test:a=!1}){try{return et("fs",e),et("gitdir",n),await dd({fs:new un(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Rce({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await Vt.exists({fs:e,gitdir:t,ref:n}))throw new Ir(n);const a=await Vt.expand({fs:e,gitdir:t,ref:n}),i=await dd({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await Vt.resolve({fs:e,gitdir:t,ref:a});await Vt.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await Vt.deleteRef({fs:e,gitdir:t,ref:a});const s=nf(n),o=await Ea.get({fs:e,gitdir:t});await o.deleteSection("branch",s),await Ea.save({fs:e,gitdir:t,config:o})}async function Ice({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await Rce({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function jce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{et("fs",e),et("ref",r),await Vt.deleteRef({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Dce({fs:e,gitdir:t,remote:n}){const r=await Ea.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await Ea.save({fs:e,gitdir:t,config:r})}async function Mce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("remote",r),await Dce({fs:new un(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Oce({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await Vt.deleteRef({fs:e,gitdir:t,ref:n})}async function Pce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("ref",r),await Oce({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Fce({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Lce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let s=await e.readdir(Pt.join(n,"objects/pack"));s=s.filter(o=>o.endsWith(".idx"));for(const o of s){const l=`${n}/objects/pack/${o}`,u=await CN({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new Pn(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function Bce({fs:e,cache:t,gitdir:n,oid:r}){const a=o=>Kr({fs:e,cache:t,gitdir:n,oid:o}),i=await Fce({fs:e,gitdir:n,oid:r}),s=await Lce({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const o of s)i.indexOf(o)===-1&&i.push(o);if(i.length===1)return i[0];throw i.length>1?new Oy("oids",r,i):new Ir(`an object matching "${r}"`)}async function $ce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Bce({fs:new un(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function zce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Vt.expand({fs:new un(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function AN({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let s=r.map((o,l)=>({index:l,oid:o}));for(;s.length;){const o=new Set;for(const{oid:u,index:d}of s)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&o.add(u);if(o.size>0)return[...o];const l=new Map;for(const{oid:u,index:d}of s)try{const{object:h}=await Kr({fs:e,cache:t,gitdir:n,oid:u}),m=Gr.from(h),{parent:g}=m.parseHeaders();for(const v of g)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}s=Array.from(l.values())}return[]}const _C=/^.*(\r?\n|$)/gm;function Uce({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],s=t[2],o=i.match(_C),l=a.match(_C),u=s.match(_C),d=ole(o,l,u),h=7;let m="",g=!0;for(const v of d)v.ok&&(m+=v.ok.join("")),v.conflict&&(g=!1,m+=`${"<".repeat(h)} ${n}
`,m+=v.conflict.a.join(""),m+=`${"=".repeat(h)}
`,m+=v.conflict.b.join(""),m+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:m}}async function Vce({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),index:a,ourOid:i,baseOid:s,theirOid:o,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:m=!0,mergeDriver:g}){const v=Ws({ref:i}),b=Ws({ref:s}),w=Ws({ref:o}),x=[],_=[],E=[],T=[],k=await Yu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,w],map:async function(R,[j,I,P]){const O=Px(R),U=await $x(j,I),M=await $x(P,I);switch(`${U}-${M}`){case"false-false":return{mode:await I.mode(),path:O,oid:await I.oid(),type:await I.type()};case"false-true":return P?{mode:await P.mode(),path:O,oid:await P.oid(),type:await P.type()}:void 0;case"true-false":return j?{mode:await j.mode(),path:O,oid:await j.oid(),type:await j.type()}:void 0;case"true-true":{if(j&&I&&P&&await j.type()==="blob"&&await I.type()==="blob"&&await P.type()==="blob")return Hce({fs:e,gitdir:r,path:O,ours:j,base:I,theirs:P,ourName:l,baseName:u,theirName:d,mergeDriver:g}).then(async W=>{if(W.cleanMerge)m||a.insert({filepath:R,oid:W.mergeResult.oid,stage:0});else if(x.push(R),_.push(R),!m){const V=await I.oid(),ie=await j.oid(),ae=await P.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:V,stage:1}),a.insert({filepath:R,oid:ie,stage:2}),a.insert({filepath:R,oid:ae,stage:3})}return W.mergeResult});if(I&&!j&&P&&await I.type()==="blob"&&await P.type()==="blob"){if(x.push(R),E.push(R),!m){const W=await I.oid(),V=await P.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:W,stage:1}),a.insert({filepath:R,oid:V,stage:3})}return{mode:await P.mode(),oid:await P.oid(),type:"blob",path:O}}if(I&&j&&!P&&await I.type()==="blob"&&await j.type()==="blob"){if(x.push(R),T.push(R),!m){const W=await I.oid(),V=await j.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:W,stage:1}),a.insert({filepath:R,oid:V,stage:2})}return{mode:await j.mode(),oid:await j.oid(),type:"blob",path:O}}if(I&&!j&&!P&&await I.type()==="blob")return;throw new im}}},reduce:x.length!==0&&(!n||m)?void 0:async(R,j)=>{const I=j.filter(Boolean);if(R&&!(R&&R.type==="tree"&&I.length===0)){if(I.length>0){const O=new ts(I).toObject(),U=await as({fs:e,gitdir:r,type:"tree",object:O,dryRun:h});R.oid=U}return R}}});return x.length!==0?(n&&!m&&await Yu({fs:e,cache:t,dir:n,gitdir:r,trees:[Ws({ref:k.oid})],map:async function(R,[j]){const I=`${n}/${R}`;if(await j.type()==="blob"){const P=await j.mode(),O=new TextDecoder().decode(await j.content());await e.write(I,O,{mode:P})}return!0}}),new sm(x,_,E,T)):k.oid}async function Hce({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:s,theirName:o,baseName:l,dryRun:u,mergeDriver:d=Uce}){const h="blob",m=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:m,path:n,oid:await r.oid(),type:h}};const g=Qt.from(await r.content()).toString("utf8"),v=Qt.from(await a.content()).toString("utf8"),b=Qt.from(await i.content()).toString("utf8"),{mergedText:w,cleanMerge:x}=await d({branches:[l,s,o],contents:[v,g,b],path:n}),_=await as({fs:e,gitdir:t,type:"blob",object:Qt.from(w,"utf8"),dryRun:u});return{cleanMerge:x,mergeResult:{mode:m,path:n,oid:_,type:h}}}async function cB({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:v,onSign:b,mergeDriver:w}){a===void 0&&(a=await dd({fs:e,gitdir:r,fullname:!0})),a=await Vt.expand({fs:e,gitdir:r,ref:a}),i=await Vt.expand({fs:e,gitdir:r,ref:i});const x=await Vt.resolve({fs:e,gitdir:r,ref:a}),_=await Vt.resolve({fs:e,gitdir:r,ref:i}),E=await AN({fs:e,cache:t,gitdir:r,oids:[x,_]});if(E.length!==1)throw new im;const T=E[0];if(T===_)return{oid:x,alreadyMerged:!0};if(s&&T===x)return!l&&!u&&await Vt.writeRef({fs:e,gitdir:r,ref:a,value:_}),{oid:_,fastForward:!0};{if(o)throw new By;const k=await qa.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async j=>Vce({fs:e,cache:t,dir:n,gitdir:r,index:j,ourOid:x,theirOid:_,baseOid:T,ourName:nf(a),baseName:"base",theirName:nf(i),dryRun:l,abortOnConflict:d,mergeDriver:w}));if(k instanceof sm)throw k;return h||(h=`Merge branch '${nf(i)}' into ${nf(a)}`),{oid:await c_({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,_],author:m,committer:g,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:u}),tree:k,mergeCommit:!0}}}async function uB({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,dir:l,gitdir:u,ref:d,url:h,remote:m,remoteRef:g,prune:v,pruneTags:b,fastForward:w,fastForwardOnly:x,corsProxy:_,singleBranch:E,headers:T,author:k,committer:R,signingKey:j}){try{if(!d){const O=await dd({fs:e,gitdir:u});if(!O)throw new Ji("ref");d=O}const{fetchHead:I,fetchHeadDescription:P}=await kN({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,gitdir:u,corsProxy:_,ref:d,url:h,remote:m,remoteRef:g,singleBranch:E,headers:T,prune:v,pruneTags:b});await cB({fs:e,cache:t,gitdir:u,ours:d,theirs:I,fastForward:w,fastForwardOnly:x,message:`Merge ${P}`,author:k,committer:R,signingKey:j,dryRun:!1,noUpdateBranch:!1}),await TN({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:m,noCheckout:!1})}catch(I){throw I.caller="git.pull",I}}async function qce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,corsProxy:g,singleBranch:v,headers:b={},cache:w={}}){try{et("fs",e),et("http",t),et("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await uB({fs:new un(e),cache:w,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function Gce({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,remote:d,remoteRef:h,url:m,corsProxy:g,depth:v=null,since:b=null,exclude:w=[],relative:x=!1,tags:_=!1,singleBranch:E=!1,headers:T={},prune:k=!1,pruneTags:R=!1,cache:j={}}){try{return et("fs",e),et("http",t),et("gitdir",l),await kN({fs:new un(e),cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,gitdir:l,ref:u,remote:d,remoteRef:h,url:m,corsProxy:g,depth:v,since:b,exclude:w,relative:x,tags:_,singleBranch:E,headers:T,prune:k,pruneTags:R})}catch(I){throw I.caller="git.fetch",I}}async function Wce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await AN({fs:new un(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function dB({fs:e,filepath:t}){if(await e.exists(Pt.join(t,".git")))return t;{const n=Ep(t);if(n===t)throw new Ir(`git root for ${t}`);return dB({fs:e,filepath:n})}}async function Kce({fs:e,filepath:t}){try{return et("fs",e),et("filepath",t),await dB({fs:new un(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function Zce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await L0({fs:new un(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function Yce({fs:e,gitdir:t,path:n}){return(await Ea.get({fs:e,gitdir:t})).getall(n)}async function Xce({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r}){try{return et("fs",e),et("gitdir",n),et("path",r),await Yce({fs:new un(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function Jce({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1}){try{et("http",e),et("url",i);const u=await u_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,m]of u.refs){const g=h.split("/"),v=g.pop();let b=d;for(const w of g)b[w]=b[w]||{},b=b[w];b[v]=m}for(const[h,m]of u.symrefs){const g=h.split("/"),v=g.pop();let b=d;for(const w of g)b[w]=b[w]||{},b=b[w];b[v]=m}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function fB(e,t,n,r){const a=[];for(const[i,s]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=s}continue}const o={ref:i,oid:s};n&&e.symrefs.has(i)&&(o.target=e.symrefs.get(i)),a.push(o)}return a}async function Qce({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2}){try{et("http",e),et("url",i);const d=await u_.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const m of d.capabilities){const[g,v]=m.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:fB(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function eue({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=am.wrap({type:e,object:t})),r=await Ic(t)),{oid:r,object:t}}async function tue({object:e}){try{et("object",e),typeof e=="string"?e=Qt.from(e,"utf8"):e=Qt.from(e);const t="blob",{oid:n,object:r}=await eue({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function nue({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Pt.join(r,i);const s=await e.read(i),o=u=>Kr({fs:e,cache:t,gitdir:a,oid:u}),l=await Cp.fromPack({pack:s,getExternalRefDelta:o,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(s){throw s.caller="git.indexPack",s}}async function rue({fs:e,onProgress:t,dir:n,gitdir:r=Pt.join(n,".git"),filepath:a,cache:i={}}){try{return et("fs",e),et("dir",n),et("gitdir",n),et("filepath",a),await nue({fs:new un(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(s){throw s.caller="git.indexPack",s}}async function aue({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Pt.join(n,".git"),defaultBranch:a="master"}){try{return et("fs",e),et("gitdir",r),t||et("dir",n),await lB({fs:new un(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function hB({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const s=await B0.read({fs:e,gitdir:n});if(!r)throw new Ji("oid");if(!a)throw new Ji("ancestor");if(r===a)return!1;const o=[r],l=new Set;let u=0;for(;o.length;){if(u++===i)throw new zy(i);const d=o.shift(),{type:h,object:m}=await Kr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Fi(d,h,"commit");const g=Gr.from(m).parse();for(const v of g.parent)if(v===a)return!0;if(!s.has(d))for(const v of g.parent)l.has(v)||(o.push(v),l.add(v))}return!1}async function iue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:s={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),et("ancestor",a),await hB({fs:new un(e),cache:s,gitdir:n,oid:r,ancestor:a,depth:i})}catch(o){throw o.caller="git.isDescendent",o}}async function sue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("dir",t),et("gitdir",n),et("filepath",r),lm.isIgnored({fs:new un(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function oue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),remote:r}){try{return et("fs",e),et("gitdir",n),Vt.listBranches({fs:new un(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function lue({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await Vt.resolve({gitdir:t,fs:e,ref:n}),i=[];return await pB({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return qa.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function pB({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:s}=await cm({fs:e,cache:t,gitdir:n,oid:r});for(const o of s)o.type==="tree"?await pB({fs:e,cache:t,gitdir:n,oid:o.oid,filenames:a,prefix:Pt.join(i,o.path)}):a.push(Pt.join(i,o.path))}async function cue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),await lue({fs:new un(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function uue({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await Vt.resolve({gitdir:n,fs:e,ref:r})}catch(o){if(o instanceof Ir)return[]}return(await cm({fs:e,cache:t,gitdir:n,oid:a})).tree.map(o=>({target:o.path,note:o.oid}))}async function due({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),await uue({fs:new un(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function fue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r}){try{return et("fs",e),et("gitdir",n),Vt.listRefs({fs:new un(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function hue({fs:e,gitdir:t}){const n=await Ea.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const s=await n.get(`remote.${i}.url`);return{remote:i,url:s}}))}async function pue({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),await hue({fs:new un(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function mue(e){const t=ua.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...s]=r.split(" "),o={ref:i,oid:a};for(const l of s){const[u,d]=l.split(":");u==="symref-target"?o.target=d:u==="peeled"&&(o.peeled=d)}n.push(o)}return n}async function gue({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(ua.encode(`command=ls-refs
`)),r.push(ua.encode(`agent=${d_.agent}
`)),(n||t||e)&&r.push(ua.delim()),n&&r.push(ua.encode("peel")),t&&r.push(ua.encode("symrefs")),e&&r.push(ua.encode(`ref-prefix ${e}`)),r.push(ua.flush()),r}async function yue({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:s={},forPush:o=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{et("http",e),et("url",i);const m=await Ux.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,headers:s,protocolVersion:l});if(m.protocolVersion===1)return fB(m,u,d,h);const g=await gue({prefix:u,symrefs:d,peelTags:h}),v=await Ux.connect({http:e,auth:m.auth,headers:s,corsProxy:a,service:o?"git-receive-pack":"git-upload-pack",url:i,body:g});return mue(v.body)}catch(m){throw m.caller="git.listServerRefs",m}}async function bue({fs:e,dir:t,gitdir:n=Pt.join(t,".git")}){try{return et("fs",e),et("gitdir",n),Vt.listTags({fs:new un(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function vue(e,t){return e.committer.timestamp-t.committer.timestamp}const wue="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function pM({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===wue)return;const i=r;let s;const o=await Ap({fs:e,cache:t,gitdir:n,oid:r}),l=o.tree;return a===o.oid?s=o.path:(s=await mB({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(s)&&(s.length===0?s=void 0:s.length===1&&(s=s[0]))),s}async function mB({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:s=[],parentPath:o=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Pt.join(o,u.path),s.push(d)):u.type==="tree"&&(d=Kr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return mB({fs:e,cache:t,gitdir:n,tree:ts.from(h),fileId:a,oid:i,filepaths:s,parentPath:Pt.join(o,u.path)})})),d});return await Promise.all(l),s}async function xue({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l}){const u=typeof s>"u"?void 0:Math.floor(s.valueOf()/1e3),d=[],h=await B0.read({fs:e,gitdir:n}),m=await Vt.resolve({fs:e,gitdir:n,ref:a}),g=[await Rp({fs:e,cache:t,gitdir:n,oid:m})];let v,b,w;function x(_){w&&r&&d.push(_)}for(;g.length>0;){const _=g.pop();if(u!==void 0&&_.commit.committer.timestamp<=u)break;if(r){let E;try{E=await Zy({fs:e,cache:t,gitdir:n,oid:_.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=_,w=!0}catch(T){if(T instanceof Ir){let k=l&&v;if(k&&(k=await pM({fs:e,cache:t,gitdir:n,oid:_.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const R=await pM({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(R))if(k=k.filter(j=>R.indexOf(j)===-1),k.length===1)k=k[0],r=k,b&&d.push(b);else{k=!1,b&&d.push(b);break}}}else r=k,b&&d.push(b);if(!k){if(w&&v&&(d.push(b),!o))break;if(!o&&!l)throw T}b=_,w=!1}else throw T}}else d.push(_);if(i!==void 0&&d.length===i){x(_);break}if(!h.has(_.oid))for(const E of _.commit.parent){const T=await Rp({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(T.oid)||g.push(T)}g.length===0&&x(_),g.sort((E,T)=>vue(E.commit,T.commit))}return d}async function _ue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:s,force:o,follow:l,cache:u={}}){try{return et("fs",e),et("gitdir",n),et("ref",a),await xue({fs:new un(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:s,force:o,follow:l})}catch(d){throw d.caller="git.log",d}}async function Sue({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ours:a,theirs:i,fastForward:s=!0,fastForwardOnly:o=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:m,committer:g,signingKey:v,cache:b={},mergeDriver:w}){try{et("fs",e),v&&et("onSign",t);const x=new un(e),_=await Xu({fs:x,gitdir:r,author:m});if(!_&&(!o||!s))throw new wi("author");const E=await Np({fs:x,gitdir:r,author:_,committer:g});if(!E&&(!o||!s))throw new wi("committer");return await cB({fs:x,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:s,fastForwardOnly:o,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:_,committer:E,signingKey:v,onSign:t,mergeDriver:w})}catch(x){throw x.caller="git.merge",x}}const Eue={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function gB({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new D9,s=[];function o(d,h){const m=Qt.from(d,h);s.push(m),i.update(m)}async function l({stype:d,object:h}){const m=Eue[d];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let w=(v|m|b).toString(16);for(o(w,"hex");v;)v=g>127?128:0,w=v|g&127,o(dk(2,w),"hex"),g=g>>>7;o(Qt.from(await Z9(h)))}o("PACK"),o("00000002","hex"),o(dk(8,a.length),"hex");for(const d of a){const{type:h,object:m}=await Kr({fs:e,cache:t,gitdir:r,oid:d});await l({object:m,stype:h})}const u=i.digest();return s.push(u),s}async function Cue({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await gB({fs:e,cache:t,gitdir:n,oids:r}),s=Qt.from(await zx(i)),l=`pack-${s.slice(-20).toString("hex")}.pack`;return a?(await e.write(Pt.join(n,`objects/pack/${l}`),s),{filename:l}):{filename:l,packfile:new Uint8Array(s)}}async function Tue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oids",r),await Cue({fs:new un(e),cache:i,gitdir:n,oids:r,write:a})}catch(s){throw s.caller="git.packObjects",s}}async function kue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l=Pt.join(o,".git"),ref:u,url:d,remote:h,remoteRef:m,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:w=!1,corsProxy:x,singleBranch:_,headers:E={},author:T,committer:k,signingKey:R,cache:j={}}){try{et("fs",e),et("gitdir",l);const I=new un(e),P=await Xu({fs:I,gitdir:l,author:T});if(!P)throw new wi("author");const O=await Np({fs:I,gitdir:l,author:P,committer:k});if(!O)throw new wi("committer");return await uB({fs:I,cache:j,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,dir:o,gitdir:l,ref:u,url:d,remote:h,remoteRef:m,fastForward:b,fastForwardOnly:w,corsProxy:x,singleBranch:_,headers:E,author:P,committer:O,signingKey:R,prune:g,pruneTags:v})}catch(I){throw I.caller="git.pull",I}}async function Aue({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),start:a,finish:i}){const s=await B0.read({fs:e,gitdir:r}),o=new Set,l=new Set;for(const h of a)o.add(await Vt.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const m=await Vt.resolve({fs:e,gitdir:r,ref:h});l.add(m)}catch{}const u=new Set;async function d(h){u.add(h);const{type:m,object:g}=await Kr({fs:e,cache:t,gitdir:r,oid:h});if(m==="tag"){const b=ji.from(g).headers().object;return d(b)}if(m!=="commit")throw new Fi(h,m,"commit");if(!s.has(h)){const b=Gr.from(g).headers().parent;for(h of b)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of o)await d(h);return u}async function SC({fs:e,cache:t,dir:n,gitdir:r=Pt.join(n,".git"),oids:a}){const i=new Set;async function s(o){if(i.has(o))return;i.add(o);const{type:l,object:u}=await Kr({fs:e,cache:t,gitdir:r,oid:o});if(l==="tag"){const h=ji.from(u).headers().object;await s(h)}else if(l==="commit"){const h=Gr.from(u).headers().tree;await s(h)}else if(l==="tree"){const d=ts.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await s(h.oid)}}for(const o of a)await s(o);return i}async function Nue(e){const t={};let n="";const r=ua.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new zf('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const s of i){if(s.trim()==="")continue;const o=s.slice(0,2),l=s.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:o==="ok",error:h}}return t}async function Rue({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(ua.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(ua.flush()),n}async function Iue({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:s,onAuthFailure:o,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:m,url:g,force:v=!1,delete:b=!1,corsProxy:w,headers:x={}}){const _=d||await dd({fs:e,gitdir:u});if(typeof _>"u")throw new Ji("ref");const E=await Ea.get({fs:e,gitdir:u});m=m||await E.get(`branch.${_}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${_}.remote`)||"origin";const T=g||await E.get(`remote.${m}.pushurl`)||await E.get(`remote.${m}.url`);if(typeof T>"u")throw new Ji("remote OR url");const k=h||await E.get(`branch.${_}.merge`);if(typeof T>"u")throw new Ji("remoteRef");w===void 0&&(w=await E.get("http.corsProxy"));const R=await Vt.expand({fs:e,gitdir:u,ref:_}),j=b?"0000000000000000000000000000000000000000":await Vt.resolve({fs:e,gitdir:u,ref:R}),I=u_.getRemoteHelperFor({url:T}),P=await I.discover({http:n,onAuth:i,onAuthSuccess:s,onAuthFailure:o,corsProxy:w,service:"git-receive-pack",url:T,headers:x,protocolVersion:1}),O=P.auth;let U;if(!k)U=R;else try{U=await Vt.expandAgainstMap({ref:k,map:P.refs})}catch(Q){if(Q instanceof Ir)U=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw Q}const M=P.refs.get(U)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:m,url:T,localRef:{ref:b?"(delete)":R,oid:j},remoteRef:{ref:U,oid:M}}))throw new om;const W=!P.capabilities.has("no-thin");let V=new Set;if(!b){const Q=[...P.refs.values()];let se=new Set;if(M!=="0000000000000000000000000000000000000000"){const fe=await AN({fs:e,cache:t,gitdir:u,oids:[j,M]});for(const ve of fe)Q.push(ve);W&&(se=await SC({fs:e,cache:t,gitdir:u,oids:fe}))}if(!Q.includes(j)){const fe=await Aue({fs:e,cache:t,gitdir:u,start:[j],finish:Q});V=await SC({fs:e,cache:t,gitdir:u,oids:fe})}if(W){try{const fe=await Vt.resolve({fs:e,gitdir:u,ref:`refs/remotes/${m}/HEAD`,depth:2}),{oid:ve}=await Vt.resolveAgainstMap({ref:fe.replace(`refs/remotes/${m}/`,""),fullref:fe,map:P.refs}),je=[ve];for(const Ne of await SC({fs:e,cache:t,gitdir:u,oids:je}))se.add(Ne)}catch{}for(const fe of se)V.delete(fe)}if(j===M&&(v=!0),!v){if(R.startsWith("refs/tags")&&M!=="0000000000000000000000000000000000000000")throw new kp("tag-exists");if(j!=="0000000000000000000000000000000000000000"&&M!=="0000000000000000000000000000000000000000"&&!await hB({fs:e,cache:t,gitdir:u,oid:j,ancestor:M,depth:-1}))throw new kp("not-fast-forward")}}const ie=iB([...P.capabilities],["report-status","side-band-64k",`agent=${d_.agent}`]),ae=await Rue({capabilities:ie,triplets:[{oldoid:M,oid:j,fullRef:U}]}),ne=b?[]:await gB({fs:e,cache:t,gitdir:u,oids:[...V]}),q=await I.connect({http:n,onProgress:r,corsProxy:w,service:"git-receive-pack",url:T,auth:O,headers:x,body:[...ae,...ne]}),{packfile:te,progress:G}=await oB.demux(q.body);if(a){const Q=sB(G);Xy(Q,async se=>{await a(se)})}const J=await Nue(te);if(q.headers&&(J.headers=q.headers),m&&J.ok&&J.refs[U].ok&&!R.startsWith("refs/tags")){const Q=`refs/remotes/${m}/${U.replace("refs/heads","")}`;b?await Vt.deleteRef({fs:e,gitdir:u,ref:Q}):await Vt.writeRef({fs:e,gitdir:u,ref:Q,value:j})}if(J.ok&&Object.values(J.refs).every(Q=>Q.ok))return J;{const Q=Object.entries(J.refs).filter(([se,fe])=>!fe.ok).map(([se,fe])=>`
  - ${se}: ${fe.error}`).join("");throw new $y(Q,J)}}async function jue({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,dir:l,gitdir:u=Pt.join(l,".git"),ref:d,remoteRef:h,remote:m="origin",url:g,force:v=!1,delete:b=!1,corsProxy:w,headers:x={},cache:_={}}){try{return et("fs",e),et("http",t),et("gitdir",u),await Iue({fs:new un(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:s,onPrePush:o,gitdir:u,ref:d,remoteRef:h,remote:m,url:g,force:v,delete:b,corsProxy:w,headers:x})}catch(E){throw E.caller="git.push",E}}async function yB({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=ji.from(i).parse().object,yB({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Fi(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function bB({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await Zy({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await yB({fs:e,cache:t,gitdir:n,oid:r})}async function Due({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await bB({fs:new un(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readBlob",s}}async function vB({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Rp({fs:new un(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function Mue({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await Vt.resolve({gitdir:n,fs:e,ref:r}),{blob:s}=await bB({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return s}async function Oue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oid",a),await Mue({fs:new un(e),cache:i,gitdir:n,ref:r,oid:a})}catch(s){throw s.caller="git.readNote",s}}async function Pue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:s=void 0,cache:o={}}){try{et("fs",e),et("gitdir",n),et("oid",r);const l=new un(e);i!==void 0&&(r=await Zy({fs:l,cache:o,gitdir:n,oid:r,filepath:i}));const d=await Kr({fs:l,cache:o,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Gr.from(d.object).parse();break;case"tree":d.object=ts.from(d.object).entries();break;case"blob":s?d.object=d.object.toString(s):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=ji.from(d.object).parse();break;default:throw new Fi(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function Fue({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Kr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Fi(r,a,"tag");const s=ji.from(i);return{oid:r,tag:s.parse(),payload:s.payload()}}async function Lue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,cache:a={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await Fue({fs:new un(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function Bue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return et("fs",e),et("gitdir",n),et("oid",r),await cm({fs:new un(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(s){throw s.caller="git.readTree",s}}async function $ue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r),await qa.acquire({fs:new un(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function zue({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l}){let u;try{u=await Vt.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof Ir))throw v}let h=(await cm({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const m=await Yy({fs:e,gitdir:r,tree:h});return await c_({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:m,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:s,committer:o,signingKey:l})}async function Uue({fs:e,onSign:t,dir:n,gitdir:r=Pt.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:s,committer:o,signingKey:l,cache:u={}}){try{et("fs",e),et("gitdir",r),et("oid",i);const d=new un(e),h=await Xu({fs:d,gitdir:r,author:s});if(!h)throw new wi("author");const m=await Np({fs:d,gitdir:r,author:h,committer:o});if(!m)throw new wi("committer");return await zue({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:m,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function Vue({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==gl.clean(r))throw new Do(r,gl.clean(r));if(n!==gl.clean(n))throw new Do(n,gl.clean(n));const i=`refs/heads/${n}`,s=`refs/heads/${r}`;if(await Vt.exists({fs:e,gitdir:t,ref:s}))throw new Bo("branch",r,!1);const l=await Vt.resolve({fs:e,gitdir:t,ref:i,depth:1});await Vt.writeRef({fs:e,gitdir:t,ref:s,value:l}),await Vt.deleteRef({fs:e,gitdir:t,ref:i});const d=await dd({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await Vt.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:s})}async function Hue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return et("fs",e),et("gitdir",n),et("ref",r),et("oldref",a),await Vue({fs:new un(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(s){throw s.caller="git.renameBranch",s}}async function wB({gitdir:e,type:t,object:n}){return Ic(am.wrap({type:t,object:n}))}async function que({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const s=new un(e);let o,l;try{o=await Vt.resolve({fs:s,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(o)try{o=await Zy({fs:s,cache:i,gitdir:n,oid:o,filepath:r})}catch{o=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await s.read(Pt.join(t,r));d&&(l=await wB({gitdir:n,type:"blob",object:d}),o===l&&(u=await s.lstat(Pt.join(t,r)))),await qa.acquire({fs:s,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),o&&h.insert({filepath:r,stats:u,oid:o})})}catch(s){throw s.caller="git.reset",s}}async function Gue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,depth:a}){try{return et("fs",e),et("gitdir",n),et("ref",r),await Vt.resolve({fs:new un(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function Wue({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),path:r,value:a,append:i=!1}){try{et("fs",e),et("gitdir",n),et("path",r);const s=new un(e),o=await Ea.get({fs:s,gitdir:n});i?await o.append(r,a):await o.set(r,a),await Ea.save({fs:s,gitdir:n,config:o})}catch(s){throw s.caller="git.setConfig",s}}async function xB({fs:e,gitdir:t,commit:n}){const r=Gr.from(n).toObject();return await as({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Vx{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",s=Math.floor(Date.now()/1e3),o=Vx.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${s} ${o}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,s)=>n?`stash@{${s}}: ${i.split("	")[1]}`:i)}}const Kue={stage:rm,workdir:Ky};let EC;async function Ip(e,t){return EC===void 0&&(EC=new F0),EC.acquire(e,t)}async function Zue(e,t,n,r,a=null){const i=Pt.join(n,r),s=await e.lstat(i);if(!s)throw new Ir(i);if(s.isDirectory())throw new Pn(`${i}: file expected, but found directory`);const o=a?await H9({fs:e,gitdir:t,oid:a}):void 0;let l=o?a:void 0;return o||await Ip({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=s.isSymbolicLink()?await e.readlink(i).then(Y9):await e.read(i);if(u===null)throw new Ir(i);l=await as({fs:e,gitdir:t,type:"blob",object:u})}),l}async function Yue({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const s=await Promise.all(i.children.map(a));i.oid=await Yy({fs:e,gitdir:n,tree:s}),i.mode=16384}}else i.type==="blob"&&(i.oid=await Zue(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function mM({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?Kue[g]():g),s=[],d=await Yu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await lm.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&s.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const w of v){const[x,_]=w;a?_&&(await e.exists(`${t}/${_.toString()}`)?b.push(w):s.push([null,_])):x&&(_?b.push(w):s.push([x,null]))}return b.length?Promise.all(b.map(g)):[]}});if(s.length===0||d.length===0)return null;const m=(await Yue({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return Yy({fs:e,gitdir:n,tree:m})}async function Xue({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const s=[],o=[],l=await Yu({fs:e,cache:{},dir:t,gitdir:n,trees:[Ws({ref:a}),Ws({ref:r})],map:async(u,[d,h])=>{if(u==="."||await lm.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const m=h?await h.type():await d.type();if(m!=="tree"&&m!=="blob")return;if(!h&&d){const v=m==="tree"?"rmdir":"rm";return m==="tree"&&s.push(u),m==="blob"&&i&&o.push({filepath:u,oid:await d.oid()}),{method:v,filepath:u}}const g=await h.oid();if(!d||await d.oid()!==g)return m==="tree"?{method:"mkdir",filepath:u}:(i&&o.push({filepath:u,oid:g,stats:await e.lstat(Pt.join(t,u))}),{method:"write",filepath:u,oid:g})}});await Ip({fs:e,gitdir:n,dirRemoved:s,ops:l},async()=>{for(const u of l){const d=Pt.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!s.some(h=>d.startsWith(h))){const{object:h}=await Kr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await qa.acquire({fs:e,gitdir:n,cache:{}},async u=>{o.forEach(({filepath:d,stats:h,oid:m})=>{u.insert({filepath:d,stats:h,oid:m})})})}class yc{constructor({fs:t,dir:n,gitdir:r=Pt.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Pt.join(this.gitdir,yc.refStash)}get refLogsStashPath(){return Pt.join(this.gitdir,yc.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await Xu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new wi("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return xB({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Do(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Rp({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return Vt.writeRef({fs:this.fs,gitdir:this.gitdir,ref:yc.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Vx.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Ip({filepath:i,entry:a},async()=>{const s=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,s+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Vx.getStashReflogEntry(r,t)}}async function Jue({fs:e,dir:t,gitdir:n,message:r=""}){const a=new yc({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await dd({fs:e,gitdir:n,fullname:!1}),s=await Vt.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await vB({fs:e,dir:t,gitdir:n,oid:s})).commit.message,u=[s];let d=null,h=Ws({ref:"HEAD"});const m=await mM({fs:e,dir:t,gitdir:n,treePair:[Ws({ref:"HEAD"}),"stage"]});if(m){const w=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:m,parent:u});u.push(w),d=m,h=rm()}const g=await mM({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const w=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[u[u.length-1]]});u.push(w),d=g}if(!d||!m&&!g)throw new Ir("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${s.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:u});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await rB({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function _B({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new yc({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:s=null}=i.commit?i.commit:{};if(!(!s||!Array.isArray(s)))for(let o=0;o<s.length-1;o++){const u=(await Rp({fs:e,cache:{},gitdir:n,oid:s[o+1]})).commit.message.startsWith("stash-Index");await Xue({fs:e,dir:t,gitdir:n,stashCommit:s[o+1],parentCommit:s[o],wasStaged:u})}}async function SB({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new yc({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const s=a.refStashPath;await Ip(s,async()=>{await e.exists(s)&&await e.rm(s)});const o=await a.readStashReflogs({parsed:!1});if(!o.length)return;o.splice(r,1);const l=a.refLogsStashPath;await Ip({reflogEntries:o,stashReflogPath:l,stashMgr:a},async()=>{if(o.length){await e.write(l,o.join(`
`),"utf8");const u=o[o.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function Que({fs:e,dir:t,gitdir:n}){return new yc({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function ede({fs:e,dir:t,gitdir:n}){const r=new yc({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Ip(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function tde({fs:e,dir:t,gitdir:n,refIdx:r=0}){await _B({fs:e,dir:t,gitdir:n,refIdx:r}),await SB({fs:e,dir:t,gitdir:n,refIdx:r})}async function nde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){et("fs",e),et("dir",t),et("gitdir",n),et("op",r);const s={push:Jue,apply:_B,drop:SB,list:Que,clear:ede,pop:tde},o=["apply","drop","pop"];try{const l=new un(e);["refs","logs","logs/refs"].map(h=>Pt.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=s[r];if(d){if(o.includes(r)&&i<0)throw new Do(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function rde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),filepath:r,cache:a={}}){try{et("fs",e),et("gitdir",n),et("filepath",r);const i=new un(e);if(await lm.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const o=await ade({fs:i,cache:a,gitdir:n}),l=await EB({fs:i,cache:a,gitdir:n,tree:o,path:r}),u=await qa.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const w of b)if(w.path===r)return w;return null}),d=await i.lstat(Pt.join(t,r)),h=l!==null,m=u!==null,g=d!==null,v=async()=>{if(m&&!Ox(u,d))return u.oid;{const b=await i.read(Pt.join(t,r)),w=await wB({gitdir:n,type:"blob",object:b});return m&&u.oid===w&&d.size!==-1&&qa.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:d,oid:w})}),w}};if(!h&&!g&&!m)return"absent";if(!h&&!g&&m)return"*absent";if(!h&&g&&!m)return"*added";if(!h&&g&&m)return await v()===u.oid?"added":"*added";if(h&&!g&&!m)return"deleted";if(h&&!g&&m)return l===u.oid,"*deleted";if(h&&g&&!m)return await v()===l?"*undeleted":"*undeletemodified";if(h&&g&&m){const b=await v();return b===l?b===u.oid?"unmodified":"*unmodified":b===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function EB({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const s of r)if(s.path===i){if(a.length===0)return s.oid;const{type:o,object:l}=await Kr({fs:e,cache:t,gitdir:n,oid:s.oid});if(o==="tree"){const u=ts.from(l);return EB({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(o==="blob")throw new Fi(s.oid,o,"blob",a.join("/"))}return null}async function ade({fs:e,cache:t,gitdir:n}){let r;try{r=await Vt.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof Ir)return[]}const{tree:a}=await cm({fs:e,cache:t,gitdir:n,oid:r});return a}async function ide({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:s={},ignored:o=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const l=new un(e);return await Yu({fs:l,cache:s,dir:t,gitdir:n,trees:[Ws({ref:r}),Ky(),rm()],map:async function(u,[d,h,m]){if(!d&&!m&&h&&!o&&await lm.isIgnored({fs:l,dir:t,filepath:u})||!a.some(R=>nB(u,R)))return null;if(i&&!i(u))return;const[g,v,b]=await Promise.all([d&&d.type(),h&&h.type(),m&&m.type()]),w=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!w)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!w)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!w)return;const x=g==="blob"?await d.oid():void 0,_=b==="blob"?await m.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const T=[void 0,x,E,_],k=T.map(R=>T.indexOf(R));return k.shift(),[u,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function sde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,object:a,force:i=!1}){try{et("fs",e),et("gitdir",n),et("ref",r);const s=new un(e);if(r===void 0)throw new Ji("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const o=await Vt.resolve({fs:s,gitdir:n,ref:a||"HEAD"});if(!i&&await Vt.exists({fs:s,gitdir:n,ref:r}))throw new Bo("tag",r);await Vt.writeRef({fs:s,gitdir:n,ref:r,value:o})}catch(s){throw s.caller="git.tag",s}}async function ode({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),cache:r={},filepath:a,oid:i,mode:s,add:o,remove:l,force:u}){try{et("fs",e),et("gitdir",n),et("filepath",a);const d=new un(e);if(l)return await qa.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!u){const g=await d.lstat(Pt.join(t,a));if(g){if(g.isDirectory())throw new Zu("directory");return}}m.has({filepath:a})&&m.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Pt.join(t,a)),!h)throw new Ir(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new Zu("directory")}return await qa.acquire({fs:d,gitdir:n,cache:r},async function(m){if(!o&&!m.has({filepath:a}))throw new Ir(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:s,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await d.readlink(Pt.join(t,a)):await d.read(Pt.join(t,a));i=await as({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return m.insert({filepath:a,oid:i,stats:g}),i})}catch(d){throw d.caller="git.updateIndex",d}}function lde(){try{return d_.version}catch(e){throw e.caller="git.version",e}}async function cde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),trees:r,map:a,reduce:i,iterate:s,cache:o={}}){try{return et("fs",e),et("gitdir",n),et("trees",r),await Yu({fs:new un(e),cache:o,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:s})}catch(l){throw l.caller="git.walk",l}}async function ude({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),blob:r}){try{return et("fs",e),et("gitdir",n),et("blob",r),await as({fs:new un(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function dde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),commit:r}){try{return et("fs",e),et("gitdir",n),et("commit",r),await xB({fs:new un(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function fde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),type:r,object:a,format:i="parsed",oid:s,encoding:o=void 0}){try{const l=new un(e);if(i==="parsed"){switch(r){case"commit":a=Gr.from(a).toObject();break;case"tree":a=ts.from(a).toObject();break;case"blob":a=Qt.from(a,o);break;case"tag":a=ji.from(a).toObject();break;default:throw new Fi(s||"",r,"blob|commit|tag|tree")}i="content"}return s=await as({fs:l,gitdir:n,type:r,object:a,oid:s,format:i}),s}catch(l){throw l.caller="git.writeObject",l}}async function hde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:s=!1}){try{et("fs",e),et("gitdir",n),et("ref",r),et("value",a);const o=new un(e);if(r!==gl.clean(r))throw new Do(r,gl.clean(r));if(!i&&await Vt.exists({fs:o,gitdir:n,ref:r}))throw new Bo("ref",r);s?await Vt.writeSymbolicRef({fs:o,gitdir:n,ref:r,value:a}):(a=await Vt.resolve({fs:o,gitdir:n,ref:a}),await Vt.writeRef({fs:o,gitdir:n,ref:r,value:a}))}catch(o){throw o.caller="git.writeRef",o}}async function pde({fs:e,gitdir:t,tag:n}){const r=ji.from(n).toObject();return await as({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function mde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tag:r}){try{return et("fs",e),et("gitdir",n),et("tag",r),await pde({fs:new un(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function gde({fs:e,dir:t,gitdir:n=Pt.join(t,".git"),tree:r}){try{return et("fs",e),et("gitdir",n),et("tree",r),await Yy({fs:new un(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var Na={Errors:Hle,STAGE:rm,TREE:Ws,WORKDIR:Ky,add:lce,abortMerge:ace,addNote:uce,addRemote:dce,annotatedTag:hce,branch:mce,checkout:rB,clone:kce,commit:Ace,getConfig:Zce,getConfigAll:Xce,setConfig:Wue,currentBranch:Nce,deleteBranch:Ice,deleteRef:jce,deleteRemote:Mce,deleteTag:Pce,expandOid:$ce,expandRef:zce,fastForward:qce,fetch:Gce,findMergeBase:Wce,findRoot:Kce,getRemoteInfo:Jce,getRemoteInfo2:Qce,hashBlob:tue,indexPack:rue,init:aue,isDescendent:iue,isIgnored:sue,listBranches:oue,listFiles:cue,listNotes:due,listRefs:fue,listRemotes:pue,listServerRefs:yue,listTags:bue,log:_ue,merge:Sue,packObjects:Tue,pull:kue,push:jue,readBlob:Due,readCommit:vB,readNote:Oue,readObject:Pue,readTag:Lue,readTree:Bue,remove:$ue,removeNote:Uue,renameBranch:Hue,resetIndex:que,updateIndex:ode,resolveRef:Gue,status:rde,statusMatrix:ide,tag:sde,version:lde,walk:cde,writeBlob:ude,writeCommit:dde,writeObject:fde,writeRef:hde,writeTag:mde,writeTree:gde,stash:nde};function yde(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function bde(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:yde(e)}async function vde(e,t){const n=bde(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function wde(e){let t=0;const n=[];await vde(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function xde(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function _de({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await wde(a));const i=await fetch(t,{method:n,headers:r,body:a}),s=i.body&&i.body.getReader?xde(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[o,l]of i.headers.entries())r[o]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:s,headers:r}}var $0={request:_de};const z0="https://cors.isomorphic-git.org",jp=new Map,CB=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=ar.getState();if(!n||!r)return qe.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await Na.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await Na.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await Na.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await Na.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),qe.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},U0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=jp.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return qe.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(jp.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(qe.error("Authentication cancelled: Password/token not provided."),null)},V0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),jp.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),jp.delete(n)),null},H0=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!jp.has(n)&&t.username&&t.password&&(jp.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},lp=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},Sde=async(e,t)=>{const n=Ya,r=nr(e),a=kl(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},TB=async(e,t,n,r,a)=>{var o;const i=(a==null?void 0:a.fsInstance)??Ya,s=nr(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${s}`);try{let l=!1;try{await i.promises.stat(kl(s,".git")),l=!0}catch(m){if(m.code!=="ENOENT")throw m}if(l)throw console.warn(`[VFS Git Op] Clone target ${s} already contains a .git directory.`),new Error(`Repository already cloned at ${s}.`);const u=s_(s);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(m){if(m.code!=="EEXIST")throw m}let d=n;if(!d)try{if(d=(o=(await Na.getRemoteInfo({http:$0,url:t,corsProxy:z0,onAuth:g=>U0(g,r),onAuthFailure:V0,onAuthSuccess:H0})).HEAD)==null?void 0:o.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(m){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",m),new Error(`Failed to determine default branch: ${lp(m)}`)}await Na.clone({fs:i,http:$0,dir:s,corsProxy:z0,url:t,ref:d,singleBranch:!0,depth:10,onAuth:m=>U0(m,r),onAuthFailure:V0,onAuthSuccess:H0,onProgress:m=>{m.phase==="counting objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):m.phase==="receiving objects"&&m.total?console.log(`Clone progress: ${m.phase} ${m.loaded}/${m.total}`):console.log(`Clone progress: ${m.phase}`)}}),await i.promises.stat(kl(s,".git"));const h=await Na.currentBranch({fs:i,dir:s,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await Na.checkout({fs:i,dir:s,ref:d})),qe.success(`Repository cloned successfully into ${s} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=lp(l);if(l instanceof Error&&l.message.includes("already cloned")||qe.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${s}`),await i.promises.rm(s,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},kB=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=nr(e);try{await Na.init({fs:n,dir:r}),qe.success(`Initialized empty Git repository in "${fa(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),qe.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},NN=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=nr(e);try{if(!await CB(a,r))throw new Error("Git user configuration is missing or invalid.");if(await Na.add({fs:r,dir:a,filepath:"."}),!(await Na.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){qe.info("No changes detected to commit.");return}const l=await Na.commit({fs:r,dir:a,message:t,author:{name:ar.getState().gitUserName,email:ar.getState().gitUserEmail}});qe.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),qe.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},f_=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??Ya,i=nr(e);try{if(!await CB(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const o=await Na.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(o!==t){console.log(`[VFS Git Op] Current branch is ${o}, switching to ${t} before pull...`);try{await Na.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await Na.fetch({fs:a,http:$0,dir:i,corsProxy:z0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>U0(u,n),onAuthFailure:V0,onAuthSuccess:H0}),await Na.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${lp(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${lp(l)}`)}}await Na.pull({fs:a,http:$0,dir:i,ref:t,singleBranch:!0,author:{name:ar.getState().gitUserName,email:ar.getState().gitUserEmail},corsProxy:z0,onAuth:l=>U0(l,n),onAuthFailure:V0,onAuthSuccess:H0}),qe.success(`Pulled changes successfully for "${fa(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(s){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,s),s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")?qe.info(`Branch "${t}" is already up-to-date.`):qe.error(`Git pull failed: ${lp(s)}`),!(s instanceof Error&&s.message.toLowerCase().includes("already up-to-date")))throw s}},RN=async(e,t,n,r)=>{var s,o;const a=(r==null?void 0:r.fsInstance)??Ya,i=nr(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await Na.push({fs:a,http:$0,dir:i,corsProxy:z0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>U0(u,n),onAuthFailure:V0,onAuthSuccess:H0});if(l!=null&&l.ok)qe.success(`Pushed changes successfully for "${fa(i)}"`);else if((s=l==null?void 0:l.error)!=null&&s.includes("up-to-date"))qe.info(`Branch "${t}" already up-to-date on remote.`);else throw(o=l==null?void 0:l.error)!=null&&o.includes("rejected")?(qe.error(`Push rejected for "${fa(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||qe.error(`Git push failed: ${lp(l)}`),l}},AB=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=nr(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await Na.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([s,o,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),o===0&&l===2?d+="WT_New":o===1&&l===2?d+="WT_Modified":o===1&&l===0?d+="WT_Deleted":o===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${o} w:${l} s:${u}`),`${s}: ${d.trim()}`}).filter(s=>!s.endsWith("Unmodified")).join(`
`);qe.info(`Git Status for "${fa(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),qe.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},xf=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=nr(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),qe.error(`Error creating directory "${fa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Ede=async e=>{try{const t={backend:koe,name:`litechat_vfs_${e}`};return await voe(t),Ya}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),qe.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},IN=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=nr(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await xf(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=kl(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),qe.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},fd=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??Ya,r=nr(e);try{const a=await n.promises.readFile(r);return Et.emit(St.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),qe.error(`Error reading file "${fa(r)}": ${a instanceof Error?a.message:String(a)}`),a}},h_=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=nr(e),i=s_(a);try{i!=="/"&&await xf(i,{fsInstance:r}),await r.promises.writeFile(a,t),Et.emit(St.VFS_FILE_WRITTEN,{path:a})}catch(s){throw s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,s),qe.error(`Error writing file "${fa(a)}": ${s instanceof Error?s.message:String(s)}`)),s}},jN=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=nr(e);if(a==="/")throw qe.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),Et.emit(St.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),Et.emit(St.VFS_FILE_DELETED,{path:a})),qe.success(`"${fa(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),qe.error(`Error deleting "${fa(a)}": ${i instanceof Error?i.message:String(i)}`),i}},NB=async(e,t)=>{await xf(e,t)},Cde=async(e,t,n)=>{try{const r=await fd(e,n),a=new Blob([r]),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i;const o=nr(e);s.download=t||fa(o),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||qe.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},RB=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=nr(t);let i=0,s=0;const o=Array.from(e);try{await xf(a,{fsInstance:r});for(const l of o){const u=kl(a,l.name);try{const d=await l.arrayBuffer();await h_(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){s++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){s=o.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{s>0&&i>0?qe.warning(`Upload complete with issues. ${i} succeeded, ${s} failed.`):s===0&&i>0&&qe.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":fa(a)}.`)}},Tde=async(e,t,n)=>{const r=Ya;if(!e.name.toLowerCase().endsWith(".zip")){qe.error("Please select a valid ZIP file.");return}const a=nr(t);let i;try{await xf(a,{fsInstance:r}),i=await j9.loadAsync(e);const s=Object.values(i.files),o=await Promise.allSettled(s.map(async h=>{const m=kl(a,h.name);if(h.dir)await xf(m,{fsInstance:r});else{const g=await h.async("uint8array");await h_(m,g,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;o.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?qe.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):qe.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":fa(a)}.`)}catch(s){s instanceof Error&&s.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,s),qe.error(`ZIP extraction failed: ${s instanceof Error?s.message:String(s)}`))}},gM=async(e,t="/",n)=>{const r=Ya,a=new j9,i=nr(t),s=fa(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){qe.error(`Cannot export: "${s}" is not a directory.`);return}}catch(m){m instanceof Error&&m.code==="ENOENT"?qe.error(`Cannot export: Path "${s}" not found.`):qe.error(`Cannot export: Error accessing path "${s}". ${m instanceof Error?m.message:String(m)}`);return}const o=async(m,g)=>{const v=await IN(m,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const w=g.folder(b.name);if(w)await o(b.path,w);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const w=await fd(b.path,{fsInstance:r});g.file(b.name,w)}};await o(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${s}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),qe.success(`"${s}" exported as ${d.download}.`)}catch(o){console.error("[VFS Op] Failed to download all as zip:",o),o instanceof Error&&(o.message.includes("Error listing files")||o.message.includes("Error reading file")||o.message.includes("Cannot export"))||qe.error(`ZIP export failed: ${o instanceof Error?o.message:String(o)}`)}},IB=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??Ya,a=nr(e),i=nr(t);if(a==="/"||i==="/")throw qe.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const s=s_(i);s!=="/"&&await xf(s,{fsInstance:r}),await r.promises.rename(a,i),qe.success(`Renamed "${fa(a)}" to "${fa(i)}"`)}catch(s){throw s instanceof Error&&s.code==="ENOENT"?s.message.includes("Error creating directory")||qe.error(`Rename failed: Original item "${fa(a)}" not found.`):s instanceof Error&&s.code==="EEXIST"?qe.error(`Rename failed: An item named "${fa(i)}" already exists.`):s instanceof Error&&s.message.includes("Error creating directory")||qe.error(`Rename failed: ${s instanceof Error?s.message:String(s)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,s),s}},kde=1024*5,Ade=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},yM=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},jB=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=C.useState(null),[i,s]=C.useState(null),[o,l]=C.useState(!1),[u,d]=C.useState(!1),[h,m]=C.useState(!0),g=e.type||"application/octet-stream",v=E1(e.name,g),b=g.startsWith("image/"),w=g.startsWith("audio/"),x=g.startsWith("video/"),_=e.source==="vfs";C.useEffect(()=>{let P=null;return s(null),e.source==="direct"&&!v&&e.contentBase64?(P=Ade(e.contentBase64,g),P||s("Failed to decode file content for preview."),a(P)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>kde?s(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&s("Text content missing from metadata."),()=>{P&&(URL.revokeObjectURL(P),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,g,v]);const E=async()=>{if(e.source==="vfs"){qe.info("File is already in VFS.");return}const P=yM(e);if(!P){qe.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await RB([P],"/"),qe.success(`"${e.name}" added to VFS root.`)}catch(O){console.error("Failed to add file to VFS:",O),qe.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},T=async()=>{d(!0);try{let P;if(e.source==="vfs"&&e.path){const M=await fd(e.path);P=new Blob([M],{type:g})}else{const M=yM(e);if(!M)throw new Error("Could not reconstruct file data.");P=M}const O=URL.createObjectURL(P),U=document.createElement("a");U.href=O,U.download=e.name,document.body.appendChild(U),U.click(),document.body.removeChild(U),URL.revokeObjectURL(O)}catch(P){console.error("Failed to download file:",P),qe.error(`Download failed: ${P instanceof Error?P.message:String(P)}`)}finally{d(!1)}},k=()=>m(P=>!P),R=()=>_?p.jsx(pA,{className:"h-5 w-5 text-cyan-500"}):v?p.jsx(EZ,{className:"h-5 w-5 text-blue-500"}):b?p.jsx(mA,{className:"h-5 w-5 text-purple-500"}):w?p.jsx(eY,{className:"h-5 w-5 text-green-500"}):x?p.jsx(UY,{className:"h-5 w-5 text-orange-500"}):p.jsx(_Z,{className:"h-5 w-5 text-muted-foreground"}),j=()=>_?p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?p.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[p.jsx(Ec,{className:"h-4 w-4"}),p.jsx("span",{children:i})]}):v&&e.contentText!==void 0?p.jsx(Yp,{lang:g==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?p.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):w&&r?p.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?p.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):p.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),I=C.useMemo(()=>{let P="File";return _?P="VFS File":v?P="Text":b?P="Image":w?P="Audio":x&&(P="Video"),`${P} (${P0(e.size)})`},[_,v,b,w,x,e.size]);return p.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[p.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[R(),p.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),p.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",P0(e.size),")"]}),_&&e.path&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),p.jsx(Yn,{children:p.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:T,disabled:u,"aria-label":"Download file",children:u?p.jsx(Fn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(cf,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Download File"})]})}),p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:p.jsx(y1,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&p.jsxs(p.Fragment,{children:[e.source==="direct"&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:o,"aria-label":"Add to VFS",children:o?p.jsx(Fn,{className:"h-3.5 w-3.5 animate-spin"}):p.jsx(P8,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Add to VFS"})]})}),p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:p.jsx(Di,{className:"h-3.5 w-3.5"})})}),p.jsx(Yn,{children:"Remove from Prompt"})]})})]})]})]}),h?p.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:I}):p.jsx("div",{className:vt("p-2 max-h-80 overflow-y-auto"),children:j()})]})},DB=6048e5,Nde=864e5,gw=43200,bM=1440,vM=Symbol.for("constructDateFrom");function jc(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&vM in e?e[vM](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ka(e,t){return jc(t||e,e)}let Rde={};function Jy(){return Rde}function q0(e,t){var o,l,u,d;const n=Jy(),r=(t==null?void 0:t.weekStartsOn)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Ka(e,t==null?void 0:t.in),i=a.getDay(),s=(i<r?7:0)+i-r;return a.setDate(a.getDate()-s),a.setHours(0,0,0,0),a}function Hx(e,t){return q0(e,{...t,weekStartsOn:1})}function MB(e,t){const n=Ka(e,t==null?void 0:t.in),r=n.getFullYear(),a=jc(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=Hx(a),s=jc(n,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=Hx(s);return n.getTime()>=i.getTime()?r+1:n.getTime()>=o.getTime()?r:r-1}function qx(e){const t=Ka(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function p_(e,...t){const n=jc.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function wM(e,t){const n=Ka(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Ide(e,t,n){const[r,a]=p_(n==null?void 0:n.in,e,t),i=wM(r),s=wM(a),o=+i-qx(i),l=+s-qx(s);return Math.round((o-l)/Nde)}function jde(e,t){const n=MB(e,t),r=jc(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Hx(r)}function zw(e,t){const n=+Ka(e)-+Ka(t);return n<0?-1:n>0?1:n}function Dde(e){return jc(e,Date.now())}function Mde(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ode(e){return!(!Mde(e)&&typeof e!="number"||isNaN(+Ka(e)))}function Pde(e,t,n){const[r,a]=p_(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),s=r.getMonth()-a.getMonth();return i*12+s}function Fde(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Lde(e,t){return+Ka(e)-+Ka(t)}function Bde(e,t){const n=Ka(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function $de(e,t){const n=Ka(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function zde(e,t){const n=Ka(e,t==null?void 0:t.in);return+Bde(n,t)==+$de(n,t)}function Ude(e,t,n){const[r,a,i]=p_(n==null?void 0:n.in,e,e,t),s=zw(a,i),o=Math.abs(Pde(a,i));if(o<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-s*o);let l=zw(a,i)===-s;zde(r)&&o===1&&zw(r,i)===1&&(l=!1);const u=s*(o-+l);return u===0?0:u}function Vde(e,t,n){const r=Lde(e,t)/1e3;return Fde(n==null?void 0:n.roundingMethod)(r)}function Hde(e,t){const n=Ka(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const qde={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gde=(e,t,n)=>{let r;const a=qde[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function CC(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Wde={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Kde={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Zde={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yde={date:CC({formats:Wde,defaultWidth:"full"}),time:CC({formats:Kde,defaultWidth:"full"}),dateTime:CC({formats:Zde,defaultWidth:"full"})},Xde={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Jde=(e,t,n,r)=>Xde[e];function jg(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const s=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):s;a=e.formattingValues[o]||e.formattingValues[s]}else{const s=e.defaultWidth,o=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[o]||e.values[s]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Qde={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},efe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tfe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},nfe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},afe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ife=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},sfe={ordinalNumber:ife,era:jg({values:Qde,defaultWidth:"wide"}),quarter:jg({values:efe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:jg({values:tfe,defaultWidth:"wide"}),day:jg({values:nfe,defaultWidth:"wide"}),dayPeriod:jg({values:rfe,defaultWidth:"wide",formattingValues:afe,defaultFormattingWidth:"wide"})};function Dg(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const s=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?lfe(o,h=>h.test(s)):ofe(o,h=>h.test(s));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(s.length);return{value:u,rest:d}}}function ofe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function lfe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function cfe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let s=e.valueCallback?e.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const o=t.slice(a.length);return{value:s,rest:o}}}const ufe=/^(\d+)(th|st|nd|rd)?/i,dfe=/\d+/i,ffe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},hfe={any:[/^b/i,/^(a|c)/i]},pfe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mfe={any:[/1/i,/2/i,/3/i,/4/i]},gfe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yfe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},bfe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},vfe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},wfe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xfe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_fe={ordinalNumber:cfe({matchPattern:ufe,parsePattern:dfe,valueCallback:e=>parseInt(e,10)}),era:Dg({matchPatterns:ffe,defaultMatchWidth:"wide",parsePatterns:hfe,defaultParseWidth:"any"}),quarter:Dg({matchPatterns:pfe,defaultMatchWidth:"wide",parsePatterns:mfe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Dg({matchPatterns:gfe,defaultMatchWidth:"wide",parsePatterns:yfe,defaultParseWidth:"any"}),day:Dg({matchPatterns:bfe,defaultMatchWidth:"wide",parsePatterns:vfe,defaultParseWidth:"any"}),dayPeriod:Dg({matchPatterns:wfe,defaultMatchWidth:"any",parsePatterns:xfe,defaultParseWidth:"any"})},OB={code:"en-US",formatDistance:Gde,formatLong:Yde,formatRelative:Jde,localize:sfe,match:_fe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Sfe(e,t){const n=Ka(e,t==null?void 0:t.in);return Ide(n,Hde(n))+1}function Efe(e,t){const n=Ka(e,t==null?void 0:t.in),r=+Hx(n)-+jde(n);return Math.round(r/DB)+1}function PB(e,t){var d,h,m,g;const n=Ka(e,t==null?void 0:t.in),r=n.getFullYear(),a=Jy(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(m=a.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,s=jc((t==null?void 0:t.in)||e,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const o=q0(s,t),l=jc((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=q0(l,t);return+n>=+o?r+1:+n>=+u?r:r-1}function Cfe(e,t){var o,l,u,d;const n=Jy(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(o=t==null?void 0:t.locale)==null?void 0:o.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=PB(e,t),i=jc((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),q0(i,t)}function Tfe(e,t){const n=Ka(e,t==null?void 0:t.in),r=+q0(n,t)-+Cfe(n,t);return Math.round(r/DB)+1}function xr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Cu={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return xr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):xr(n+1,2)},d(e,t){return xr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return xr(e.getHours()%12||12,t.length)},H(e,t){return xr(e.getHours(),t.length)},m(e,t){return xr(e.getMinutes(),t.length)},s(e,t){return xr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return xr(a,t.length)}},Bh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},xM={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Cu.y(e,t)},Y:function(e,t,n,r){const a=PB(e,r),i=a>0?a:1-a;if(t==="YY"){const s=i%100;return xr(s,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):xr(i,t.length)},R:function(e,t){const n=MB(e);return xr(n,t.length)},u:function(e,t){const n=e.getFullYear();return xr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Cu.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return xr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Tfe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):xr(a,t.length)},I:function(e,t,n){const r=Efe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):xr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Cu.d(e,t)},D:function(e,t,n){const r=Sfe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):xr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return xr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return xr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return xr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Bh.noon:r===0?a=Bh.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Bh.evening:r>=12?a=Bh.afternoon:r>=4?a=Bh.morning:a=Bh.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Cu.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Cu.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):xr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):xr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Cu.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Cu.s(e,t)},S:function(e,t){return Cu.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return SM(r);case"XXXX":case"XX":return Kd(r);case"XXXXX":case"XXX":default:return Kd(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return SM(r);case"xxxx":case"xx":return Kd(r);case"xxxxx":case"xxx":default:return Kd(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_M(r,":");case"OOOO":default:return"GMT"+Kd(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_M(r,":");case"zzzz":default:return"GMT"+Kd(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return xr(r,t.length)},T:function(e,t,n){return xr(+e,t.length)}};function _M(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+xr(i,2)}function SM(e,t){return e%60===0?(e>0?"-":"+")+xr(Math.abs(e)/60,2):Kd(e,t)}function Kd(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=xr(Math.trunc(r/60),2),i=xr(r%60,2);return n+a+t+i}const EM=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},FB=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},kfe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return EM(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",EM(r,t)).replace("{{time}}",FB(a,t))},Afe={p:FB,P:kfe},Nfe=/^D+$/,Rfe=/^Y+$/,Ife=["D","DD","YY","YYYY"];function jfe(e){return Nfe.test(e)}function Dfe(e){return Rfe.test(e)}function Mfe(e,t,n){const r=Ofe(e,t,n);if(console.warn(r),Ife.includes(e))throw new RangeError(r)}function Ofe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Pfe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ffe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lfe=/^'([^]*?)'?$/,Bfe=/''/g,$fe=/[a-zA-Z]/;function fk(e,t,n){var d,h,m,g;const r=Jy(),a=r.locale??OB,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=r.weekStartsOn??((g=(m=r.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,o=Ka(e,n==null?void 0:n.in);if(!Ode(o))throw new RangeError("Invalid time value");let l=t.match(Ffe).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=Afe[b];return w(v,a.formatLong)}return v}).join("").match(Pfe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:zfe(v)};if(xM[b])return{isToken:!0,value:v};if(b.match($fe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(o,l));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Dfe(b)||jfe(b))&&Mfe(b,t,String(e));const w=xM[b[0]];return w(o,b,a.localize,u)}).join("")}function zfe(e){const t=e.match(Lfe);return t?t[1].replace(Bfe,"'"):e}function Ufe(e,t,n){const r=Jy(),a=(n==null?void 0:n.locale)??r.locale??OB,i=2520,s=zw(e,t);if(isNaN(s))throw new RangeError("Invalid time value");const o=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:s}),[l,u]=p_(n==null?void 0:n.in,...s>0?[t,e]:[e,t]),d=Vde(u,l),h=(qx(u)-qx(l))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,o):d<10?a.formatDistance("lessThanXSeconds",10,o):d<20?a.formatDistance("lessThanXSeconds",20,o):d<40?a.formatDistance("halfAMinute",0,o):d<60?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",1,o):m===0?a.formatDistance("lessThanXMinutes",1,o):a.formatDistance("xMinutes",m,o);if(m<45)return a.formatDistance("xMinutes",m,o);if(m<90)return a.formatDistance("aboutXHours",1,o);if(m<bM){const v=Math.round(m/60);return a.formatDistance("aboutXHours",v,o)}else{if(m<i)return a.formatDistance("xDays",1,o);if(m<gw){const v=Math.round(m/bM);return a.formatDistance("xDays",v,o)}else if(m<gw*2)return g=Math.round(m/gw),a.formatDistance("aboutXMonths",g,o)}if(g=Ude(u,l),g<12){const v=Math.round(m/gw);return a.formatDistance("xMonths",v,o)}else{const v=g%12,b=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",b,o):v<9?a.formatDistance("overXYears",b,o):a.formatDistance("almostXYears",b+1,o)}}function LB(e,t){return Ufe(e,Dde(e),t)}const Sn=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:s="ghost",size:o="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:s,size:o,onClick:a,disabled:i,className:vt("h-6 w-6",l),"aria-label":u,...d,children:h?p.jsx(t,{className:vt("h-3.5 w-3.5",n)}):t})}),p.jsx(Yn,{side:r,children:p.jsx("p",{children:e})})]})})},CM={};function Vfe(e){let t=CM[e];if(t)return t;t=CM[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Dp(e,t){typeof t!="string"&&(t=Dp.defaultChars);const n=Vfe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,s=r.length;i<s;i+=3){const o=parseInt(r.slice(i+1,i+3),16);if(o<128){a+=n[o];continue}if((o&224)===192&&i+3<s){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=o<<6&1984|l&63;u<128?a+="":a+=String.fromCharCode(u),i+=3;continue}}if((o&240)===224&&i+6<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=o<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((o&248)===240&&i+9<s){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=o<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Dp.defaultChars=";/?:@&=+$,#";Dp.componentChars="";const TM={};function Hfe(e){let t=TM[e];if(t)return t;t=TM[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Qy(e,t,n){typeof t!="string"&&(n=t,t=Qy.defaultChars),typeof n>"u"&&(n=!0);const r=Hfe(t);let a="";for(let i=0,s=e.length;i<s;i++){const o=e.charCodeAt(i);if(n&&o===37&&i+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(o<128){a+=r[o];continue}if(o>=55296&&o<=57343){if(o>=55296&&o<=56319&&i+1<s){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}Qy.defaultChars=";/?:@&=+$,-_.!~*'()#";Qy.componentChars="-_.!~*'()";function DN(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Gx(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const qfe=/^([a-z0-9.+-]+:)/i,Gfe=/:[0-9]*$/,Wfe=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Kfe=["<",">",'"',"`"," ","\r",`
`,"	"],Zfe=["{","}","|","\\","^","`"].concat(Kfe),Yfe=["'"].concat(Zfe),kM=["%","/","?",";","#"].concat(Yfe),AM=["/","?","#"],Xfe=255,NM=/^[+a-z0-9A-Z_-]{0,63}$/,Jfe=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,RM={javascript:!0,"javascript:":!0},IM={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function MN(e,t){if(e&&e instanceof Gx)return e;const n=new Gx;return n.parse(e,t),n}Gx.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=Wfe.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let s=qfe.exec(i);if(s&&(s=s[0],n=s.toLowerCase(),this.protocol=s,i=i.substr(s.length)),(t||s||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(s&&RM[s])&&(i=i.substr(2),this.slashes=!0)),!RM[s]&&(a||s&&!IM[s])){let u=-1;for(let v=0;v<AM.length;v++)r=i.indexOf(AM[v]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let v=0;v<kM.length;v++)r=i.indexOf(kM[v]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const m=i.slice(0,u);i=i.slice(u),this.parseHost(m),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,w=v.length;b<w;b++){const x=v[b];if(x&&!x.match(NM)){let _="";for(let E=0,T=x.length;E<T;E++)x.charCodeAt(E)>127?_+="x":_+=x[E];if(!_.match(NM)){const E=v.slice(0,b),T=v.slice(b+1),k=x.match(Jfe);k&&(E.push(k[1]),T.unshift(k[2])),T.length&&(i=T.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>Xfe&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const o=i.indexOf("#");o!==-1&&(this.hash=i.substr(o),i=i.slice(0,o));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),IM[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Gx.prototype.parseHost=function(e){let t=Gfe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const Qfe=Object.freeze(Object.defineProperty({__proto__:null,decode:Dp,encode:Qy,format:DN,parse:MN},Symbol.toStringTag,{value:"Module"})),BB=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,$B=/[\0-\x1F\x7F-\x9F]/,ehe=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,ON=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,zB=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,UB=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,the=Object.freeze(Object.defineProperty({__proto__:null,Any:BB,Cc:$B,Cf:ehe,P:ON,S:zB,Z:UB},Symbol.toStringTag,{value:"Module"})),nhe=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),rhe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var TC;const ahe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ihe=(TC=String.fromCodePoint)!==null&&TC!==void 0?TC:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function she(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=ahe.get(e))!==null&&t!==void 0?t:e}var Va;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Va||(Va={}));const ohe=32;var Du;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Du||(Du={}));function hk(e){return e>=Va.ZERO&&e<=Va.NINE}function lhe(e){return e>=Va.UPPER_A&&e<=Va.UPPER_F||e>=Va.LOWER_A&&e<=Va.LOWER_F}function che(e){return e>=Va.UPPER_A&&e<=Va.UPPER_Z||e>=Va.LOWER_A&&e<=Va.LOWER_Z||hk(e)}function uhe(e){return e===Va.EQUALS||che(e)}var Ba;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ba||(Ba={}));var Ru;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Ru||(Ru={}));class dhe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ba.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Ru.Strict}startEntity(t){this.decodeMode=t,this.state=Ba.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ba.EntityStart:return t.charCodeAt(n)===Va.NUM?(this.state=Ba.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ba.NamedEntity,this.stateNamedEntity(t,n));case Ba.NumericStart:return this.stateNumericStart(t,n);case Ba.NumericDecimal:return this.stateNumericDecimal(t,n);case Ba.NumericHex:return this.stateNumericHex(t,n);case Ba.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|ohe)===Va.LOWER_X?(this.state=Ba.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ba.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(hk(a)||lhe(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(hk(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Va.SEMI)this.consumed+=1;else if(this.decodeMode===Ru.Strict)return 0;return this.emitCodePoint(she(this.result),this.consumed),this.errors&&(t!==Va.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Du.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const s=t.charCodeAt(n);if(this.treeIndex=fhe(r,a,this.treeIndex+Math.max(1,i),s),this.treeIndex<0)return this.result===0||this.decodeMode===Ru.Attribute&&(i===0||uhe(s))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Du.VALUE_LENGTH)>>14,i!==0){if(s===Va.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==Ru.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Du.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Du.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Ba.NamedEntity:return this.result!==0&&(this.decodeMode!==Ru.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ba.NumericDecimal:return this.emitNumericEntity(0,2);case Ba.NumericHex:return this.emitNumericEntity(0,3);case Ba.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ba.EntityStart:return 0}}}function VB(e){let t="";const n=new dhe(e,r=>t+=ihe(r));return function(a,i){let s=0,o=0;for(;(o=a.indexOf("&",o))>=0;){t+=a.slice(s,o),n.startEntity(i);const u=n.write(a,o+1);if(u<0){s=o+n.end();break}s=o+u,o=u===0?s+1:s}const l=t+a.slice(s);return t="",l}}function fhe(e,t,n,r){const a=(t&Du.BRANCH_LENGTH)>>7,i=t&Du.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let s=n,o=s+a-1;for(;s<=o;){const l=s+o>>>1,u=e[l];if(u<r)s=l+1;else if(u>r)o=l-1;else return e[l+a]}return-1}const hhe=VB(nhe);VB(rhe);function HB(e,t=Ru.Legacy){return hhe(e,t)}function phe(e){return Object.prototype.toString.call(e)}function PN(e){return phe(e)==="[object String]"}const mhe=Object.prototype.hasOwnProperty;function ghe(e,t){return mhe.call(e,t)}function m_(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function qB(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function FN(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Wx(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const GB=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,yhe=/&([a-z#][a-z0-9]{1,31});/gi,bhe=new RegExp(GB.source+"|"+yhe.source,"gi"),vhe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function whe(e,t){if(t.charCodeAt(0)===35&&vhe.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return FN(r)?Wx(r):e}const n=HB(e);return n!==e?n:e}function xhe(e){return e.indexOf("\\")<0?e:e.replace(GB,"$1")}function Mp(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(bhe,function(t,n,r){return n||whe(t,r)})}const _he=/[&<>"]/,She=/[&<>"]/g,Ehe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Che(e){return Ehe[e]}function Ju(e){return _he.test(e)?e.replace(She,Che):e}const The=/[.?*+^$[\]\\(){}|-]/g;function khe(e){return e.replace(The,"\\$&")}function Br(e){switch(e){case 9:case 32:return!0}return!1}function G0(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function W0(e){return ON.test(e)||zB.test(e)}function K0(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function g_(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Ahe={mdurl:Qfe,ucmicro:the},Nhe=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:qB,assign:m_,escapeHtml:Ju,escapeRE:khe,fromCodePoint:Wx,has:ghe,isMdAsciiPunct:K0,isPunctChar:W0,isSpace:Br,isString:PN,isValidEntityCode:FN,isWhiteSpace:G0,lib:Ahe,normalizeReference:g_,unescapeAll:Mp,unescapeMd:xhe},Symbol.toStringTag,{value:"Module"}));function Rhe(e,t,n){let r,a,i,s;const o=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<o;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(s=e.pos,e.md.inline.skipToken(e),i===91){if(s===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function Ihe(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Mp(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let s=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(s++,s>32))return i;if(r===41){if(s===0)break;s--}a++}return t===a||s!==0||(i.str=Mp(e.slice(t,a)),i.pos=a,i.ok=!0),i}function jhe(e,t,n,r){let a,i=t;const s={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)s.str=r.str,s.marker=r.marker;else{if(i>=n)return s;let o=e.charCodeAt(i);if(o!==34&&o!==39&&o!==40)return s;t++,i++,o===40&&(o=41),s.marker=o}for(;i<n;){if(a=e.charCodeAt(i),a===s.marker)return s.pos=i+1,s.str+=Mp(e.slice(t,i)),s.ok=!0,s;if(a===40&&s.marker===41)return s;a===92&&i+1<n&&i++,i++}return s.can_continue=!0,s.str+=Mp(e.slice(t,i)),s}const Dhe=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Ihe,parseLinkLabel:Rhe,parseLinkTitle:jhe},Symbol.toStringTag,{value:"Module"})),Rl={};Rl.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+Ju(i.content)+"</code>"};Rl.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+Ju(e[t].content)+`</code></pre>
`};Rl.fence=function(e,t,n,r,a){const i=e[t],s=i.info?Mp(i.info).trim():"";let o="",l="";if(s){const d=s.split(/(\s+)/g);o=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,o,l)||Ju(i.content):u=Ju(i.content),u.indexOf("<pre")===0)return u+`
`;if(s){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+o]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+o);const m={attrs:h};return`<pre><code${a.renderAttrs(m)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};Rl.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Rl.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Rl.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Rl.text=function(e,t){return Ju(e[t].content)};Rl.html_block=function(e,t){return e[t].content};Rl.html_inline=function(e,t){return e[t].content};function um(){this.rules=m_({},Rl)}um.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+Ju(t.attrs[n][0])+'="'+Ju(t.attrs[n][1])+'"';return a};um.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let s=!1;if(a.block&&(s=!0,a.nesting===1&&n+1<t.length)){const o=t[n+1];(o.type==="inline"||o.hidden||o.nesting===-1&&o.tag===a.tag)&&(s=!1)}return i+=s?`>
`:">",i};um.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};um.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};um.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,s=e.length;i<s;i++){const o=e[i].type;o==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[o]<"u"?r+=a[o](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function ns(){this.__rules__=[],this.__cache__=null}ns.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};ns.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};ns.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};ns.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};ns.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};ns.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};ns.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};ns.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};ns.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};ns.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function $o(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}$o.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};$o.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};$o.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};$o.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};$o.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function WB(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}WB.prototype.Token=$o;const Mhe=/\r\n?|\n/g,Ohe=/\0/g;function Phe(e){let t;t=e.src.replace(Mhe,`
`),t=t.replace(Ohe,""),e.src=t}function Fhe(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Lhe(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function Bhe(e){return/^<a[>\s]/i.test(e)}function $he(e){return/^<\/a\s*>/i.test(e)}function zhe(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let s=a.length-1;s>=0;s--){const o=a[s];if(o.type==="link_close"){for(s--;a[s].level!==o.level&&a[s].type!=="link_open";)s--;continue}if(o.type==="html_inline"&&(Bhe(o.content)&&i>0&&i--,$he(o.content)&&i++),!(i>0)&&o.type==="text"&&e.md.linkify.test(o.content)){const l=o.content;let u=e.md.linkify.match(l);const d=[];let h=o.level,m=0;u.length>0&&u[0].index===0&&s>0&&a[s-1].type==="text_special"&&(u=u.slice(1));for(let g=0;g<u.length;g++){const v=u[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let w=u[g].text;u[g].schema?u[g].schema==="mailto:"&&!/^mailto:/i.test(w)?w=e.md.normalizeLinkText("mailto:"+w).replace(/^mailto:/,""):w=e.md.normalizeLinkText(w):w=e.md.normalizeLinkText("http://"+w).replace(/^http:\/\//,"");const x=u[g].index;if(x>m){const k=new e.Token("text","",0);k.content=l.slice(m,x),k.level=h,d.push(k)}const _=new e.Token("link_open","a",1);_.attrs=[["href",b]],_.level=h++,_.markup="linkify",_.info="auto",d.push(_);const E=new e.Token("text","",0);E.content=w,E.level=h,d.push(E);const T=new e.Token("link_close","a",-1);T.level=--h,T.markup="linkify",T.info="auto",d.push(T),m=u[g].lastIndex}if(m<l.length){const g=new e.Token("text","",0);g.content=l.slice(m),g.level=h,d.push(g)}t[n].children=a=qB(a,s,d)}}}}const KB=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Uhe=/\((c|tm|r)\)/i,Vhe=/\((c|tm|r)\)/ig,Hhe={c:"",r:"",tm:""};function qhe(e,t){return Hhe[t.toLowerCase()]}function Ghe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Vhe,qhe)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Whe(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&KB.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Khe(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Uhe.test(e.tokens[t].content)&&Ghe(e.tokens[t].children),KB.test(e.tokens[t].content)&&Whe(e.tokens[t].children))}const Zhe=/['"]/,jM=/['"]/g,DM="";function yw(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function Yhe(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],s=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=s);n--);if(r.length=n+1,i.type!=="text")continue;let o=i.content,l=0,u=o.length;e:for(;l<u;){jM.lastIndex=l;const d=jM.exec(o);if(!d)break;let h=!0,m=!0;l=d.index+1;const g=d[0]==="'";let v=32;if(d.index-1>=0)v=o.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<u)b=o.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const w=K0(v)||W0(String.fromCharCode(v)),x=K0(b)||W0(String.fromCharCode(b)),_=G0(v),E=G0(b);if(E?h=!1:x&&(_||w||(h=!1)),_?m=!1:w&&(E||x||(m=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(m=h=!1),h&&m&&(h=w,m=x),!h&&!m){g&&(i.content=yw(i.content,d.index,DM));continue}if(m)for(n=r.length-1;n>=0;n--){let T=r[n];if(r[n].level<s)break;if(T.single===g&&r[n].level===s){T=r[n];let k,R;g?(k=t.md.options.quotes[2],R=t.md.options.quotes[3]):(k=t.md.options.quotes[0],R=t.md.options.quotes[1]),i.content=yw(i.content,d.index,R),e[T.token].content=yw(e[T.token].content,T.pos,k),l+=R.length-1,T.token===a&&(l+=k.length-1),o=i.content,u=o.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:g,level:s}):m&&g&&(i.content=yw(i.content,d.index,DM))}}}function Xhe(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Zhe.test(e.tokens[t].content)||Yhe(e.tokens[t].children,e)}function Jhe(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const s=r[i].children,o=s.length;for(t=0;t<o;t++)s[t].type==="text_special"&&(s[t].type="text");for(t=n=0;t<o;t++)s[t].type==="text"&&t+1<o&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}}const kC=[["normalize",Phe],["block",Fhe],["inline",Lhe],["linkify",zhe],["replacements",Khe],["smartquotes",Xhe],["text_join",Jhe]];function LN(){this.ruler=new ns;for(let e=0;e<kC.length;e++)this.ruler.push(kC[e][0],kC[e][1])}LN.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};LN.prototype.State=WB;function Il(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,s=0,o=0,l=0,u=a.length,d=!1;s<u;s++){const h=a.charCodeAt(s);if(!d)if(Br(h)){o++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||s===u-1)&&(h!==10&&s++,this.bMarks.push(i),this.eMarks.push(s),this.tShift.push(o),this.sCount.push(l),this.bsCount.push(0),d=!1,o=0,l=0,i=s+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Il.prototype.push=function(e,t,n){const r=new $o(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Il.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Il.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Il.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!Br(r))break}return t};Il.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!Br(this.src.charCodeAt(--t)))return t+1;return t};Il.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Il.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Il.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let s=0,o=t;o<n;o++,s++){let l=0;const u=this.bMarks[o];let d=u,h;for(o+1<n||a?h=this.eMarks[o]+1:h=this.eMarks[o];d<h&&l<r;){const m=this.src.charCodeAt(d);if(Br(m))m===9?l+=4-(l+this.bsCount[o])%4:l++;else if(d-u<this.tShift[o])l++;else break;d++}l>r?i[s]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[s]=this.src.slice(d,h)}return i.join("")};Il.prototype.Token=$o;const Qhe=65536;function AC(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function MM(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,s=0,o="";for(;r<n;)a===124&&(i?(o+=e.substring(s,r-1),s=r):(t.push(o+e.substring(s,r)),o="",s=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(o+e.substring(s)),t}function epe(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58||i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58&&!Br(o)||s===45&&Br(o))return!1;for(;i<e.eMarks[a];){const T=e.src.charCodeAt(i);if(T!==124&&T!==45&&T!==58&&!Br(T))return!1;i++}let l=AC(e,t+1),u=l.split("|");const d=[];for(let T=0;T<u.length;T++){const k=u[T].trim();if(!k){if(T===0||T===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=AC(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=MM(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const m=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const w=e.push("thead_open","thead",1);w.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let T=0;T<u.length;T++){const k=e.push("th_open","th",1);d[T]&&(k.attrs=[["style","text-align:"+d[T]]]);const R=e.push("inline","",0);R.content=u[T].trim(),R.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let _,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let T=!1;for(let R=0,j=g.length;R<j;R++)if(g[R](e,a,n,!0)){T=!0;break}if(T||(l=AC(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=MM(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>Qhe))break;if(a===t+2){const R=e.push("tbody_open","tbody",1);R.map=_=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let R=0;R<h;R++){const j=e.push("td_open","td",1);d[R]&&(j.attrs=[["style","text-align:"+d[R]]]);const I=e.push("inline","",0);I.content=u[R]?u[R].trim():"",I.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return _&&(e.push("tbody_close","tbody",-1),_[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=m,e.line=a,!0}function tpe(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function npe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const s=e.src.charCodeAt(a);if(s!==126&&s!==96)return!1;let o=a;a=e.skipChars(a,s);let l=a-o;if(l<3)return!1;const u=e.src.slice(o,a),d=e.src.slice(a,i);if(s===96&&d.indexOf(String.fromCharCode(s))>=0)return!1;if(r)return!0;let h=t,m=!1;for(;h++,!(h>=n||(a=o=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===s&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,s),!(a-o<l)&&(a=e.skipSpaces(a),!(a<i)))){m=!0;break}l=e.sCount[t],e.line=h+(m?1:0);const g=e.push("fence","code",0);return g.info=d,g.content=e.getLines(t+1,h,l,!0),g.markup=u,g.map=[t,e.line],!0}function rpe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const s=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const o=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),m=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,R,j;e.src.charCodeAt(a)===32?(a++,k++,j=!1,R=!0):e.src.charCodeAt(a)===9?(R=!0,(e.bsCount[v]+k)%4===3?(a++,k++,j=!1):j=!0):R=!1;let I=k;for(o.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const P=e.src.charCodeAt(a);if(Br(P))P===9?I+=4-(I+e.bsCount[v]+(j?1:0))%4:I++;else break;a++}g=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(R?1:0),u.push(e.sCount[v]),e.sCount[v]=I-k,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let T=!1;for(let k=0,R=h.length;k<R;k++)if(h[k](e,v,n,!0)){T=!0;break}if(T){e.lineMax=v,e.blkIndent!==0&&(o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}o.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const w=e.push("blockquote_open","blockquote",1);w.markup=">";const x=[t,0];w.map=x,e.md.block.tokenize(e,t,v);const _=e.push("blockquote_close","blockquote",-1);_.markup=">",e.lineMax=s,e.parentType=m,x[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=o[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function ape(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(i++);if(s!==42&&s!==45&&s!==95)return!1;let o=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==s&&!Br(u))return!1;u===s&&o++}if(o<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(o+1).join(String.fromCharCode(s)),!0}function OM(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!Br(i))return-1}return r}function PM(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!Br(i))?-1:a}function ipe(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function spe(e,t,n,r){let a,i,s,o,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,m,g;if((g=PM(e,l))>=0){if(h=!0,s=e.bMarks[l]+e.tShift[l],m=Number(e.src.slice(s,g-1)),d&&m!==1)return!1}else if((g=OM(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(g)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(o=e.push("ordered_list_open","ol",1),m!==1&&(o.attrs=[["start",m]])):o=e.push("bullet_list_open","ul",1);const w=[l,0];o.map=w,o.markup=String.fromCharCode(v);let x=!1;const _=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=g,a=e.eMarks[l];const T=e.sCount[l]+g-(e.bMarks[l]+e.tShift[l]);let k=T;for(;i<a;){const ie=e.src.charCodeAt(i);if(ie===9)k+=4-(k+e.bsCount[l])%4;else if(ie===32)k++;else break;i++}const R=i;let j;R>=a?j=1:j=k-T,j>4&&(j=1);const I=T+j;o=e.push("list_item_open","li",1),o.markup=String.fromCharCode(v);const P=[l,0];o.map=P,h&&(o.info=e.src.slice(s,g-1));const O=e.tight,U=e.tShift[l],M=e.sCount[l],W=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=I,e.tight=!0,e.tShift[l]=R-e.bMarks[l],e.sCount[l]=k,R>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(u=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=W,e.tShift[l]=U,e.sCount[l]=M,e.tight=O,o=e.push("list_item_close","li",-1),o.markup=String.fromCharCode(v),l=e.line,P[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let V=!1;for(let ie=0,ae=_.length;ie<ae;ie++)if(_[ie](e,l,n,!0)){V=!0;break}if(V)break;if(h){if(g=PM(e,l),g<0)break;s=e.bMarks[l]+e.tShift[l]}else if(g=OM(e,l),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?o=e.push("ordered_list_close","ol",-1):o=e.push("bullet_list_close","ul",-1),o.markup=String.fromCharCode(v),w[1]=l,e.line=l,e.parentType=E,u&&ipe(e,b),!0}function ope(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],s=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function o(_){const E=e.lineMax;if(_>=E||e.isEmpty(_))return null;let T=!1;if(e.sCount[_]-e.blkIndent>3&&(T=!0),e.sCount[_]<0&&(T=!0),!T){const j=e.md.block.ruler.getRules("reference"),I=e.parentType;e.parentType="reference";let P=!1;for(let O=0,U=j.length;O<U;O++)if(j[O](e,_,E,!0)){P=!0;break}if(e.parentType=I,P)return null}const k=e.bMarks[_]+e.tShift[_],R=e.eMarks[_];return e.src.slice(k,R+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const _=l.charCodeAt(a);if(_===91)return!1;if(_===93){u=a;break}else if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(_===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const _=l.charCodeAt(a);if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Br(_))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const m=a,g=s,v=a;for(;a<i;a++){const _=l.charCodeAt(a);if(_===10){const E=o(s);E!==null&&(l+=E,i=l.length,s++)}else if(!Br(_))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const _=o(s);if(_===null)break;l+=_,a=i,i=l.length,s++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let w;for(a<i&&v!==a&&b.ok?(w=b.str,a=b.pos):(w="",a=m,s=g);a<i;){const _=l.charCodeAt(a);if(!Br(_))break;a++}if(a<i&&l.charCodeAt(a)!==10&&w)for(w="",a=m,s=g;a<i;){const _=l.charCodeAt(a);if(!Br(_))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const x=g_(l.slice(1,u));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:w,href:h}),e.line=s),!0):!1}const lpe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],cpe="[a-zA-Z_:][a-zA-Z0-9:._-]*",upe="[^\"'=<>`\\x00-\\x20]+",dpe="'[^']*'",fpe='"[^"]*"',hpe="(?:"+upe+"|"+dpe+"|"+fpe+")",ppe="(?:\\s+"+cpe+"(?:\\s*=\\s*"+hpe+")?)",ZB="<[A-Za-z][A-Za-z0-9\\-]*"+ppe+"*\\s*\\/?>",YB="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",mpe="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",gpe="<[?][\\s\\S]*?[?]>",ype="<![A-Za-z][^>]*>",bpe="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",vpe=new RegExp("^(?:"+ZB+"|"+YB+"|"+mpe+"|"+gpe+"|"+ype+"|"+bpe+")"),wpe=new RegExp("^(?:"+ZB+"|"+YB+")"),$h=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+lpe.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(wpe.source+"\\s*$"),/^$/,!1]];function xpe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let s=e.src.slice(a,i),o=0;for(;o<$h.length&&!$h[o][0].test(s);o++);if(o===$h.length)return!1;if(r)return $h[o][2];let l=t+1;if(!$h[o][1].test(s)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],s=e.src.slice(a,i),$h[o][1].test(s)){s.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function _pe(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let s=e.src.charCodeAt(a);if(s!==35||a>=i)return!1;let o=1;for(s=e.src.charCodeAt(++a);s===35&&a<i&&o<=6;)o++,s=e.src.charCodeAt(++a);if(o>6||a<i&&!Br(s))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&Br(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(o),1);u.markup="########".slice(0,o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(o),-1);return h.markup="########".slice(0,o),!0}function Spe(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,s,o=t+1;for(;o<n&&!e.isEmpty(o);o++){if(e.sCount[o]-e.blkIndent>3)continue;if(e.sCount[o]>=e.blkIndent){let g=e.bMarks[o]+e.tShift[o];const v=e.eMarks[o];if(g<v&&(s=e.src.charCodeAt(g),(s===45||s===61)&&(g=e.skipChars(g,s),g=e.skipSpaces(g),g>=v))){i=s===61?1:2;break}}if(e.sCount[o]<0)continue;let m=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,o,n,!0)){m=!0;break}if(m)break}if(!i)return!1;const l=e.getLines(t,o,e.blkIndent,!1).trim();e.line=o+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(s),e.parentType=a,!0}function Epe(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const s=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const o=e.push("paragraph_open","p",1);o.map=[t,e.line];const l=e.push("inline","",0);return l.content=s,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const bw=[["table",epe,["paragraph","reference"]],["code",tpe],["fence",npe,["paragraph","reference","blockquote","list"]],["blockquote",rpe,["paragraph","reference","blockquote","list"]],["hr",ape,["paragraph","reference","blockquote","list"]],["list",spe,["paragraph","reference","blockquote"]],["reference",ope],["html_block",xpe,["paragraph","reference","blockquote"]],["heading",_pe,["paragraph","reference","blockquote"]],["lheading",Spe],["paragraph",Epe]];function y_(){this.ruler=new ns;for(let e=0;e<bw.length;e++)this.ruler.push(bw[e][0],bw[e][1],{alt:(bw[e][2]||[]).slice()})}y_.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let s=t,o=!1;for(;s<n&&(e.line=s=e.skipEmptyLines(s),!(s>=n||e.sCount[s]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,s,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!o,e.isEmpty(e.line-1)&&(o=!0),s=e.line,s<n&&e.isEmpty(s)&&(o=!0,s++,e.line=s)}};y_.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};y_.prototype.State=Il;function eb(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}eb.prototype.pushPending=function(){const e=new $o("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};eb.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new $o(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};eb.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const s=i-e,o=i<n?this.src.charCodeAt(i):32,l=K0(a)||W0(String.fromCharCode(a)),u=K0(o)||W0(String.fromCharCode(o)),d=G0(a),h=G0(o),m=!h&&(!u||d||l),g=!d&&(!l||h||u);return{can_open:m&&(t||!g||l),can_close:g&&(t||!m||u),length:s}};eb.prototype.Token=$o;function Cpe(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Tpe(e,t){let n=e.pos;for(;n<e.posMax&&!Cpe(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const kpe=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Ape(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(kpe);if(!a)return!1;const i=a[1],s=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!s)return!1;let o=s.url;if(o.length<=i.length)return!1;o=o.replace(/\*+$/,"");const l=e.md.normalizeLink(o);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(o);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=o.length-i.length,!0}function Npe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&Br(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const BN=[];for(let e=0;e<256;e++)BN.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){BN[e.charCodeAt(0)]=1});function Rpe(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!Br(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const o=e.src.charCodeAt(n+1);o>=56320&&o<=57343&&(i+=e.src[n+1],n++)}const s="\\"+i;if(!t){const o=e.push("text_special","",0);a<256&&BN[a]!==0?o.content=i:o.content=s,o.markup=s,o.info="escape"}return e.pos=n+1,!0}function Ipe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const s=e.src.slice(a,n),o=s.length;if(e.backticksScanned&&(e.backticks[o]||0)<=a)return t||(e.pending+=s),e.pos+=o,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===o){if(!t){const h=e.push("code_inline","code",0);h.markup=s,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=s),e.pos+=o,!0}function jpe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const s=String.fromCharCode(r);if(i<2)return!1;let o;i%2&&(o=e.push("text","",0),o.content=s,i--);for(let l=0;l<i;l+=2)o=e.push("text","",0),o.content=s+s,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function FM(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const s=t[i];if(s.marker!==126||s.end===-1)continue;const o=t[s.end];n=e.tokens[s.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[o.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[o.token-1].type==="text"&&e.tokens[o.token-1].content==="~"&&r.push(o.token-1)}for(;r.length;){const i=r.pop();let s=i+1;for(;s<e.tokens.length&&e.tokens[s].type==="s_close";)s++;s--,i!==s&&(n=e.tokens[s],e.tokens[s]=e.tokens[i],e.tokens[i]=n)}}function Dpe(e){const t=e.tokens_meta,n=e.tokens_meta.length;FM(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&FM(e,t[r].delimiters)}const XB={tokenize:jpe,postProcess:Dpe};function Mpe(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const s=e.push("text","",0);s.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function LM(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],s=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,o=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=s?"strong_open":"em_open",l.tag=s?"strong":"em",l.nesting=1,l.markup=s?o+o:o,l.content="";const u=e.tokens[i.token];u.type=s?"strong_close":"em_close",u.tag=s?"strong":"em",u.nesting=-1,u.markup=s?o+o:o,u.content="",s&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function Ope(e){const t=e.tokens_meta,n=e.tokens_meta.length;LM(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&LM(e,t[r].delimiters)}const JB={tokenize:Mpe,postProcess:Ope};function Ppe(e,t){let n,r,a,i,s="",o="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,m=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(u=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!Br(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(s=e.md.normalizeLink(a.str),e.md.validateLink(s)?v=a.pos:s="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!Br(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(o=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!Br(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(u=!0),v++}if(u){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=g+1):v=g+1,r||(r=e.src.slice(m,g)),i=e.env.references[g_(r)],!i)return e.pos=d,!1;s=i.href,o=i.title}if(!t){e.pos=m,e.posMax=g;const b=e.push("link_open","a",1),w=[["href",s]];b.attrs=w,o&&w.push(["title",o]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function Fpe(e,t){let n,r,a,i,s,o,l,u,d="";const h=e.pos,m=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<m&&e.src.charCodeAt(i)===40){for(i++;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);if(i>=m)return!1;for(u=i,o=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),o.ok&&(d=e.md.normalizeLink(o.str),e.md.validateLink(d)?i=o.pos:d=""),u=i;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);if(o=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<m&&u!==i&&o.ok)for(l=o.str,i=o.pos;i<m&&(n=e.src.charCodeAt(i),!(!Br(n)&&n!==10));i++);else l="";if(i>=m||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<m&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),s=e.env.references[g_(a)],!s)return e.pos=h,!1;d=s.href,l=s.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const w=e.push("image","img",0),x=[["src",d],["alt",""]];w.attrs=x,w.children=b,w.content=r,l&&x.push(["title",l])}return e.pos=i,e.posMax=m,!0}const Lpe=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Bpe=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function $pe(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const s=e.src.charCodeAt(n);if(s===60)return!1;if(s===62)break}const i=e.src.slice(r+1,n);if(Bpe.test(i)){const s=e.md.normalizeLink(i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(Lpe.test(i)){const s=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(s))return!1;if(!t){const o=e.push("link_open","a",1);o.attrs=[["href",s]],o.markup="autolink",o.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function zpe(e){return/^<a[>\s]/i.test(e)}function Upe(e){return/^<\/a\s*>/i.test(e)}function Vpe(e){const t=e|32;return t>=97&&t<=122}function Hpe(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!Vpe(a))return!1;const i=e.src.slice(r).match(vpe);if(!i)return!1;if(!t){const s=e.push("html_inline","",0);s.content=i[0],zpe(s.content)&&e.linkLevel++,Upe(s.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const qpe=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Gpe=/^&([a-z][a-z0-9]{1,31});/i;function Wpe(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(qpe);if(i){if(!t){const s=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),o=e.push("text_special","",0);o.content=FN(s)?Wx(s):Wx(65533),o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(Gpe);if(i){const s=HB(i[0]);if(s!==i[0]){if(!t){const o=e.push("text_special","",0);o.content=s,o.markup=i[0],o.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function BM(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let s=0;s<n;s++){const o=e[s];if(i.push(0),(e[r].marker!==o.marker||a!==o.token-1)&&(r=s),a=o.token,o.length=o.length||0,!o.close)continue;t.hasOwnProperty(o.marker)||(t[o.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[o.marker][(o.open?3:0)+o.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===o.marker&&h.open&&h.end<0){let m=!1;if((h.close||o.open)&&(h.length+o.length)%3===0&&(h.length%3!==0||o.length%3!==0)&&(m=!0),!m){const g=u>0&&!e[u-1].open?i[u-1]+1:0;i[s]=s-u+g,i[u]=g,o.open=!1,h.end=s,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[o.marker][(o.open?3:0)+(o.length||0)%3]=d)}}function Kpe(e){const t=e.tokens_meta,n=e.tokens_meta.length;BM(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&BM(t[r].delimiters)}function Zpe(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const NC=[["text",Tpe],["linkify",Ape],["newline",Npe],["escape",Rpe],["backticks",Ipe],["strikethrough",XB.tokenize],["emphasis",JB.tokenize],["link",Ppe],["image",Fpe],["autolink",$pe],["html_inline",Hpe],["entity",Wpe]],RC=[["balance_pairs",Kpe],["strikethrough",XB.postProcess],["emphasis",JB.postProcess],["fragments_join",Zpe]];function tb(){this.ruler=new ns;for(let e=0;e<NC.length;e++)this.ruler.push(NC[e][0],NC[e][1]);this.ruler2=new ns;for(let e=0;e<RC.length;e++)this.ruler2.push(RC[e][0],RC[e][1])}tb.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let s=!1;if(e.level<a){for(let o=0;o<r;o++)if(e.level++,s=n[o](e,!0),e.level--,s){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;s||e.pos++,i[t]=e.pos};tb.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let s=!1;if(e.level<a){for(let o=0;o<n;o++)if(s=t[o](e,!1),s){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(s){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};tb.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),s=i.length;for(let o=0;o<s;o++)i[o](a)};tb.prototype.State=eb;function Ype(e){const t={};e=e||{},t.src_Any=BB.source,t.src_Cc=$B.source,t.src_Z=UB.source,t.src_P=ON.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function pk(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function b_(e){return Object.prototype.toString.call(e)}function Xpe(e){return b_(e)==="[object String]"}function Jpe(e){return b_(e)==="[object Object]"}function Qpe(e){return b_(e)==="[object RegExp]"}function $M(e){return b_(e)==="[object Function]"}function eme(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const QB={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function tme(e){return Object.keys(e||{}).reduce(function(t,n){return t||QB.hasOwnProperty(n)},!1)}const nme={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},rme="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",ame="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function ime(e){e.__index__=-1,e.__text_cache__=""}function sme(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function zM(){return function(e,t){t.normalize(e)}}function Kx(e){const t=e.re=Ype(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(rme),n.push(t.src_xn),t.src_tlds=n.join("|");function r(o){return o.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(o,l){throw new Error('(LinkifyIt) Invalid schema "'+o+'": '+l)}Object.keys(e.__schemas__).forEach(function(o){const l=e.__schemas__[o];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[o]=u,Jpe(l)){Qpe(l.validate)?u.validate=sme(l.validate):$M(l.validate)?u.validate=l.validate:i(o,l),$M(l.normalize)?u.normalize=l.normalize:l.normalize?i(o,l):u.normalize=zM();return}if(Xpe(l)){a.push(o);return}i(o,l)}),a.forEach(function(o){e.__compiled__[e.__schemas__[o]]&&(e.__compiled__[o].validate=e.__compiled__[e.__schemas__[o]].validate,e.__compiled__[o].normalize=e.__compiled__[e.__schemas__[o]].normalize)}),e.__compiled__[""]={validate:null,normalize:zM()};const s=Object.keys(e.__compiled__).filter(function(o){return o.length>0&&e.__compiled__[o]}).map(eme).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+s+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),ime(e)}function ome(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function mk(e,t){const n=new ome(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function Ss(e,t){if(!(this instanceof Ss))return new Ss(e,t);t||tme(e)&&(t=e,e={}),this.__opts__=pk({},QB,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=pk({},nme,e),this.__compiled__={},this.__tlds__=ame,this.__tlds_replaced__=!1,this.re={},Kx(this)}Ss.prototype.add=function(t,n){return this.__schemas__[t]=n,Kx(this),this};Ss.prototype.set=function(t){return this.__opts__=pk(this.__opts__,t),this};Ss.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,s,o,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(s=r.index+r[1].length,(this.__index__<0||s<this.__index__)&&(this.__schema__="",this.__index__=s,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(s=a.index+a[1].length,o=a.index+a[0].length,(this.__index__<0||s<this.__index__||s===this.__index__&&o>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=s,this.__last_index__=o))),this.__index__>=0};Ss.prototype.pretest=function(t){return this.re.pretest.test(t)};Ss.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};Ss.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(mk(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(mk(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};Ss.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,mk(this,0)):null};Ss.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Kx(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Kx(this),this)};Ss.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};Ss.prototype.onCompile=function(){};const cp=2147483647,yl=36,$N=1,Z0=26,lme=38,cme=700,e$=72,t$=128,n$="-",ume=/^xn--/,dme=/[^\0-\x7F]/,fme=/[\x2E\u3002\uFF0E\uFF61]/g,hme={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},IC=yl-$N,bl=Math.floor,jC=String.fromCharCode;function Au(e){throw new RangeError(hme[e])}function pme(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function r$(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(fme,".");const a=e.split("."),i=pme(a,t).join(".");return r+i}function a$(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const mme=e=>String.fromCodePoint(...e),gme=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:yl},UM=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},i$=function(e,t,n){let r=0;for(e=n?bl(e/cme):e>>1,e+=bl(e/t);e>IC*Z0>>1;r+=yl)e=bl(e/IC);return bl(r+(IC+1)*e/(e+lme))},s$=function(e){const t=[],n=e.length;let r=0,a=t$,i=e$,s=e.lastIndexOf(n$);s<0&&(s=0);for(let o=0;o<s;++o)e.charCodeAt(o)>=128&&Au("not-basic"),t.push(e.charCodeAt(o));for(let o=s>0?s+1:0;o<n;){const l=r;for(let d=1,h=yl;;h+=yl){o>=n&&Au("invalid-input");const m=gme(e.charCodeAt(o++));m>=yl&&Au("invalid-input"),m>bl((cp-r)/d)&&Au("overflow"),r+=m*d;const g=h<=i?$N:h>=i+Z0?Z0:h-i;if(m<g)break;const v=yl-g;d>bl(cp/v)&&Au("overflow"),d*=v}const u=t.length+1;i=i$(r-l,u,l==0),bl(r/u)>cp-a&&Au("overflow"),a+=bl(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},o$=function(e){const t=[];e=a$(e);const n=e.length;let r=t$,a=0,i=e$;for(const l of e)l<128&&t.push(jC(l));const s=t.length;let o=s;for(s&&t.push(n$);o<n;){let l=cp;for(const d of e)d>=r&&d<l&&(l=d);const u=o+1;l-r>bl((cp-a)/u)&&Au("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>cp&&Au("overflow"),d===r){let h=a;for(let m=yl;;m+=yl){const g=m<=i?$N:m>=i+Z0?Z0:m-i;if(h<g)break;const v=h-g,b=yl-g;t.push(jC(UM(g+v%b,0))),h=bl(v/b)}t.push(jC(UM(h,0))),i=i$(a,u,o===s),a=0,++o}++a,++r}return t.join("")},yme=function(e){return r$(e,function(t){return ume.test(t)?s$(t.slice(4).toLowerCase()):t})},bme=function(e){return r$(e,function(t){return dme.test(t)?"xn--"+o$(t):t})},l$={version:"2.3.1",ucs2:{decode:a$,encode:mme},decode:s$,encode:o$,toASCII:bme,toUnicode:yme},vme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},wme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},xme={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},_me={default:vme,zero:wme,commonmark:xme},Sme=/^(vbscript|javascript|file|data):/,Eme=/^data:image\/(gif|png|jpeg|webp);/;function Cme(e){const t=e.trim().toLowerCase();return Sme.test(t)?Eme.test(t):!0}const c$=["http:","https:","mailto:"];function Tme(e){const t=MN(e,!0);if(t.hostname&&(!t.protocol||c$.indexOf(t.protocol)>=0))try{t.hostname=l$.toASCII(t.hostname)}catch{}return Qy(DN(t))}function kme(e){const t=MN(e,!0);if(t.hostname&&(!t.protocol||c$.indexOf(t.protocol)>=0))try{t.hostname=l$.toUnicode(t.hostname)}catch{}return Dp(DN(t),Dp.defaultChars+"%")}function Ys(e,t){if(!(this instanceof Ys))return new Ys(e,t);t||PN(e)||(t=e||{},e="default"),this.inline=new tb,this.block=new y_,this.core=new LN,this.renderer=new um,this.linkify=new Ss,this.validateLink=Cme,this.normalizeLink=Tme,this.normalizeLinkText=kme,this.utils=Nhe,this.helpers=m_({},Dhe),this.options={},this.configure(e),t&&this.set(t)}Ys.prototype.set=function(e){return m_(this.options,e),this};Ys.prototype.configure=function(e){const t=this;if(PN(e)){const n=e;if(e=_me[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Ys.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Ys.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Ys.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Ys.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Ys.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Ys.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Ys.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const DC=new Ys({html:!1,linkify:!0,breaks:!0});function zN(e){return C.useMemo(()=>{var n;if(!e)return[];try{const r=DC.parse(e,{}),a=[];let i="",s=0;for(;s<r.length;){const o=r[s];if(o.type==="fence"){i&&(a.push(i),i="");const l=((n=o.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:o.content}),s++}else{const l=[];for(;s<r.length&&r[s].type!=="fence";)l.push(r[s]),s++;l.length>0&&(i+=DC.renderer.render(l,DC.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Ame=({markdownContent:e})=>{const t=zN(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(Yp,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},UN=gt.memo(({turnData:e,timestamp:t,className:n,isAssistantComplete:r=!0})=>{var b,w;const a=ar(x=>x.foldUserMessagesOnCompletion),[i,s]=C.useState(r&&a),[o,l]=C.useState(!1);C.useEffect(()=>{r&&a&&s(!0)},[r,a]);const u=t?LB(new Date(t),{addSuffix:!0}):"Sending...",d=((b=e.metadata)==null?void 0:b.attachedFiles)&&e.metadata.attachedFiles.length>0,h=e.content&&e.content.trim().length>0,m=C.useCallback(()=>s(x=>!x),[]),g=C.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),l(!0),qe.success("User prompt copied!"),setTimeout(()=>l(!1),1500)}catch(x){qe.error("Failed to copy prompt."),console.error("Clipboard copy failed:",x)}},[e.content]),v=C.useMemo(()=>{var _;let x="";return h&&(x+=`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`),h&&d&&(x+=" + "),d&&(x+=`${(_=e.metadata.attachedFiles)==null?void 0:_.length} file(s)`),x||"[Empty Prompt]"},[h,d,e.content,e.metadata]);return p.jsxs("div",{className:vt("user-prompt relative group/user overflow-wrap-anywhere",n),children:[p.jsxs("div",{className:vt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-center gap-1 mb-1 sm:mb-0",children:[p.jsx(BY,{className:"h-4 w-4 text-primary flex-shrink-0"}),p.jsx("span",{className:"text-xs font-semibold text-primary mr-1",children:"User"}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity",children:[h&&p.jsx(Sn,{tooltipText:"Copy Prompt",onClick:g,"aria-label":"Copy user prompt",icon:o?p.jsx(Ga,{className:"text-green-500"}):p.jsx(hp,{}),className:"h-5 w-5"}),(h||d)&&p.jsx(Sn,{tooltipText:i?"Unfold":"Fold",onClick:m,"aria-label":i?"Unfold prompt":"Fold prompt",icon:i?p.jsx(To,{}):p.jsx(Sc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground",children:u})})]}),!i&&p.jsxs(p.Fragment,{children:[d&&p.jsx("div",{className:"mb-2 space-y-1",children:(w=e.metadata.attachedFiles)==null?void 0:w.map(x=>p.jsx(jB,{fileMeta:x,isReadOnly:!0},x.id))}),p.jsx(Ame,{markdownContent:e.content})]}),i&&p.jsx("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:m,children:v})]})});UN.displayName="UserPromptDisplay";const VM=e=>e===void 0?"?":e<1e3?`${e}ms`:`${(e/1e3).toFixed(2)}s`,Nme=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i,promptTokens:s,completionTokens:o,timeToFirstToken:l,generationTime:u})=>{const[d,h]=C.useState(!1),m=C.useCallback(async()=>{if(!n||typeof n!="string"){qe.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),h(!0),qe.success("Assistant response copied!"),setTimeout(()=>h(!1),1500)}catch(v){qe.error("Failed to copy response."),console.error("Clipboard copy failed:",v)}},[n]),g=s!==void 0&&o!==void 0?s+o:void 0;return p.jsxs("div",{className:vt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(M8,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsxs("div",{className:"flex flex-col min-w-0",children:[p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",e,")"]}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[n&&typeof n=="string"&&p.jsx(Sn,{tooltipText:"Copy Response",onClick:m,"aria-label":"Copy assistant response",icon:d?p.jsx(Ga,{className:"text-green-500"}):p.jsx(hp,{}),className:"h-5 w-5"}),i&&p.jsx(Sn,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?p.jsx(To,{}):p.jsx(Sc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5 flex-wrap",children:[g!==void 0&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(oZ,{className:"h-3 w-3"}),p.jsx("span",{children:g.toLocaleString()})]}),p.jsxs(Yn,{side:"bottom",children:["Tokens: ",s??"?"," (Prompt) +"," ",o??"?"," (Completion) = ",g]})]})}),l!==void 0&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(GY,{className:"h-3 w-3"}),p.jsx("span",{children:VM(l)})]}),p.jsx(Yn,{side:"bottom",children:"Time to First Token"})]})}),u!==void 0&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsxs(Zn,{className:"flex items-center gap-0.5 cursor-default",children:[p.jsx(tZ,{className:"h-3 w-3"}),p.jsx("span",{children:VM(u)})]}),p.jsx(Yn,{side:"bottom",children:"Total Generation Time"})]})})]})]})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:t})})]})},Rme=({interactionId:e,currentRating:t})=>{const n=On(i=>i.rateInteraction),r=i=>{n(e,i===t?null:i)},a=Array.from({length:11},(i,s)=>s-5);return p.jsx("div",{className:"flex items-center gap-1",children:a.map(i=>{let s="";i===-5?s="Terrible":i===-4?s="Very Bad":i===-3?s="Bad":i===-2?s="Poor":i===-1?s="Below Average":i===0?s="Neutral":i===1?s="Above Average":i===2?s="Good":i===3?s="Very Good":i===4?s="Excellent":i===5&&(s="Perfect");let o="text-muted-foreground",l="hover:text-foreground",u="";i<0?(l="hover:text-red-500",t===i&&(o="text-red-500",u="fill-red-500")):i===0?(l="hover:text-gray-500",t===i&&(o="text-gray-500",u="fill-gray-500")):(l="hover:text-green-500",t===i&&(o="text-green-500",u="fill-green-500"));const d=t===i?"bg-muted":"";return p.jsx(Sn,{tooltipText:s,onClick:()=>r(i),"aria-label":`Rate response as ${s}`,icon:p.jsx(RY,{className:vt(u,t===i?"fill-current":"fill-none")}),variant:"ghost",className:vt("h-4 w-4 md:h-5 md:w-5 p-0",o,l,d)},i)})})},Ime=({interaction:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e.id)},i=()=>{t&&t(e.id)},s=()=>{r&&r(e.id)};return p.jsxs("div",{className:vt("absolute bottom-1 right-1 md:bottom-2 md:right-2 flex items-center space-x-0.5 md:space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200","bg-card/80 backdrop-blur-sm p-0.5 md:p-1 rounded-md shadow-md z-20"),children:[p.jsx(Rme,{interactionId:e.id,currentRating:e.rating}),r&&p.jsx(Sn,{tooltipText:"Edit",onClick:s,"aria-label":"Edit User Prompt",icon:p.jsx(Kg,{}),className:"h-5 w-5 md:h-6 md:w-6"}),t&&p.jsx(Sn,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:p.jsx(v1,{}),className:"h-5 w-5 md:h-6 md:w-6"}),n&&p.jsx(Sn,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:p.jsx(Yi,{}),className:"h-5 w-5 md:h-6 md:w-6 text-destructive hover:text-destructive/80"})]})},jme=({toolCall:e})=>{const[t,n]=C.useState(!0),r=()=>n(i=>!i),a=C.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return p.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Sn,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?p.jsx(To,{}):p.jsx(Sc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(Yp,{lang:"json",code:a})]})},Dme=({toolResult:e})=>{const[t,n]=C.useState(!0),r=()=>n(s=>!s),a=C.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return p.jsxs("div",{className:vt("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[p.jsxs("div",{className:"flex items-center justify-between mb-1",children:[p.jsxs("span",{className:vt("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",p.jsx("code",{className:"font-mono",children:e.toolName})]}),p.jsx(Sn,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?p.jsx(To,{}):p.jsx(Sc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&p.jsx(Yp,{lang:i?"text":"json",code:a})]})},Mme=({markdownContent:e})=>{const t=zN(e);return e!=null&&e.trim()?p.jsx("div",{className:"overflow-wrap-anywhere",children:t.map((n,r)=>{if(typeof n=="string")return p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return p.jsx(Yp,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},Ome=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:s,toggleFold:o})=>{const[l,u]=C.useState(!0),[d,h]=C.useState(!1),m=C.useCallback(()=>u(_=>!_),[]),g=C.useCallback(async()=>{if(r)try{await navigator.clipboard.writeText(r),h(!0),qe.success("Reasoning copied!"),setTimeout(()=>h(!1),1500)}catch(_){qe.error("Failed to copy reasoning."),console.error("Clipboard copy failed for reasoning:",_)}},[r]),v=!!r,b=e&&(typeof e!="string"||e.trim().length>0),w=t&&t.length>0,x=n&&n.length>0;return s?p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:o,children:[v?"[Reasoning] ":"",w?`[${t==null?void 0:t.length} Tool Call(s)] `:"",b&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:w||x||v?"":"[No text response]"]}):p.jsxs(p.Fragment,{children:[a&&i&&p.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[p.jsx("p",{className:"font-semibold",children:"Error:"}),p.jsx("p",{children:i})]}),v&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:m,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(zp,{className:"h-3.5 w-3.5"})," Reasoning"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Sn,{tooltipText:"Copy Reasoning",onClick:_=>{_.stopPropagation(),g()},"aria-label":"Copy reasoning",icon:d?p.jsx(Ga,{className:"text-green-500"}):p.jsx(hp,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(Sn,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:_=>{_.stopPropagation(),m()},"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?p.jsx(To,{}):p.jsx(Sc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!l&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:r})]}),t==null?void 0:t.map((_,E)=>{try{const T=JSON.parse(_);return p.jsx(jme,{toolCall:T},`call-${E}`)}catch(T){return console.error("Failed to parse tool call string:",T),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${E}`)}}),n==null?void 0:n.map((_,E)=>{try{const T=JSON.parse(_);return p.jsx(Dme,{toolResult:T},`res-${E}`)}catch(T){return console.error("Failed to parse tool result string:",T),p.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${E}`)}}),p.jsx(Mme,{markdownContent:e}),!b&&!w&&!x&&!v&&p.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},u$=gt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var T,k,R,j,I,P,O,U,M,W,V,ie;const[i,s]=C.useState(!1),{dbProviderConfigs:o,getAllAvailableModelDefsForProvider:l}=Hn(cn(ae=>({dbProviderConfigs:ae.dbProviderConfigs,getAllAvailableModelDefsForProvider:ae.getAllAvailableModelDefsForProvider}))),u=C.useCallback(()=>s(ae=>!ae),[]),d=e.endedAt?LB(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=C.useMemo(()=>{var se;const ae=(se=e.metadata)==null?void 0:se.modelId;if(!ae)return"Unknown Model";const{providerId:ne,modelId:q}=_o(ae);if(!ne||!q)return ae;const te=o.find(fe=>fe.id===ne),G=(te==null?void 0:te.name)??ne,Q=l(ne).find(fe=>fe.id===q);return`${(Q==null?void 0:Q.name)??q} (${G})`},[(T=e.metadata)==null?void 0:T.modelId,o,l]),m=e.status==="COMPLETED",g=m||e.status==="ERROR",v=e.status==="ERROR",b=e.response&&(typeof e.response!="string"||e.response.trim().length>0),w=((k=e.metadata)==null?void 0:k.toolCalls)&&e.metadata.toolCalls.length>0,x=((R=e.metadata)==null?void 0:R.toolResults)&&e.metadata.toolResults.length>0,_=!!((j=e.metadata)!=null&&j.reasoning),E=b||w||x||_;return p.jsxs("div",{className:vt("group/card relative rounded-lg border bg-card p-3 md:p-4 shadow-sm transition-colors hover:bg-muted/50","overflow-wrap-anywhere",v?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&p.jsx(UN,{turnData:e.prompt,timestamp:e.startedAt,isAssistantComplete:m}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[p.jsx(Nme,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:E,promptTokens:(I=e.metadata)==null?void 0:I.promptTokens,completionTokens:(P=e.metadata)==null?void 0:P.completionTokens,timeToFirstToken:(O=e.metadata)==null?void 0:O.timeToFirstToken,generationTime:(U=e.metadata)==null?void 0:U.generationTime}),p.jsx(Ome,{response:e.response,toolCalls:(M=e.metadata)==null?void 0:M.toolCalls,toolResults:(W=e.metadata)==null?void 0:W.toolResults,reasoning:(V=e.metadata)==null?void 0:V.reasoning,isError:v,errorMessage:(ie=e.metadata)==null?void 0:ie.error,isFolded:i,toggleFold:u})]}),g&&p.jsx(Ime,{interaction:e,onEdit:r,onRegenerate:t,onDelete:n})]})});u$.displayName="InteractionCard";const HM=(e,t,n,r)=>{if(typeof e=="string")return e.trim()?p.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:e}},`html-${t}`):null;if(e.type==="code"){const a=e,i=a.lang?`language-${a.lang}`:"language-plaintext";return n?p.jsx(Yp,{lang:a.lang,code:a.code,isStreaming:r},`code-${t}`):p.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[p.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:p.jsx("div",{className:"text-sm font-medium",children:a.lang?a.lang.toUpperCase():"CODE"})}),p.jsx("code",{className:vt(i,"block p-4 font-mono text-sm leading-relaxed"),children:a.code})]},`pre-${t}`)}return null},Pme=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=ar(cn(m=>({enableStreamingMarkdown:m.enableStreamingMarkdown,enableStreamingCodeBlockParsing:m.enableStreamingCodeBlockParsing}))),i=zN(r?e:null),[s,o]=C.useState([]),[l,u]=C.useState(null),d=C.useRef(0);C.useEffect(()=>{if(!r){o([]),u(e??null),d.current=0;return}const m=d.current,g=i.slice(m,i.length-1);if(g.length>0){const b=g.map((w,x)=>HM(w,m+x,a,!1)).filter(w=>w!==null);o(w=>[...w,...b]),d.current+=g.length}const v=i.length>0?i[i.length-1]:null;JSON.stringify(v)!==JSON.stringify(l)&&u(v),e||(o([]),u(null),d.current=0)},[i,r,a,l,e]);const h=C.useMemo(()=>!l||!r?null:HM(l,d.current,a,!0),[l,a,r]);return!(e!=null&&e.trim())&&s.length===0?p.jsx("div",{className:vt("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."}):r?p.jsxs("div",{className:vt(n),children:[s,h]}):p.jsx("pre",{className:vt("whitespace-pre-wrap text-sm",n),children:e})},Fme=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>p.jsx(Sn,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:p.jsx(AY,{}),variant:r,size:n,className:t}),gk=gt.memo(({interactionId:e,onStop:t,className:n})=>{var W;const{interaction:r,interactionStatus:a}=On(cn(V=>{const ie=V.interactions.find(ae=>ae.id===e);return{interaction:ie,interactionStatus:ie==null?void 0:ie.status}})),i=ar(V=>V.streamingRenderFPS),[s,o]=C.useState(""),[l,u]=C.useState(""),[d,h]=C.useState(!0),[m,g]=C.useState(!1),[v,b]=C.useState(!1),[w,x]=C.useState(!1),_=C.useRef(null),E=C.useRef(0);C.useEffect(()=>{const V=1e3/i;let ie=!0;const ae=ne=>{if(!ie)return;if(On.getState().streamingInteractionIds.includes(e)){if(ne-E.current>=V){const te=On.getState().activeStreamBuffers[e]??"",G=On.getState().activeReasoningBuffers[e]??"";o(te),u(G),E.current=ne}_.current=requestAnimationFrame(ae)}else{const te=On.getState().activeStreamBuffers[e]??"",G=On.getState().activeReasoningBuffers[e]??"";o(te),u(G),_.current=null}};return _.current=requestAnimationFrame(ae),()=>{ie=!1,_.current&&(cancelAnimationFrame(_.current),_.current=null)}},[e,i]),C.useEffect(()=>{if(a&&a!=="STREAMING"){const V=On.getState().activeStreamBuffers[e]??"",ie=On.getState().activeReasoningBuffers[e]??"";o(V),u(ie),_.current&&(cancelAnimationFrame(_.current),_.current=null)}},[a,e]);const{dbProviderConfigs:T,getAllAvailableModelDefsForProvider:k}=Hn(cn(V=>({dbProviderConfigs:V.dbProviderConfigs,getAllAvailableModelDefsForProvider:V.getAllAvailableModelDefsForProvider}))),R=C.useMemo(()=>{var J;const V=(J=r==null?void 0:r.metadata)==null?void 0:J.modelId;if(!V)return"Loading Model...";const{providerId:ie,modelId:ae}=_o(V);if(!ie||!ae)return V;const ne=T.find(Q=>Q.id===ie),q=(ne==null?void 0:ne.name)??ie,G=k(ie).find(Q=>Q.id===ae);return`${(G==null?void 0:G.name)??ae} (${q})`},[(W=r==null?void 0:r.metadata)==null?void 0:W.modelId,T,k]),j=C.useCallback(()=>h(V=>!V),[]),I=C.useCallback(()=>g(V=>!V),[]),P=C.useCallback(async()=>{if(l)try{await navigator.clipboard.writeText(l),b(!0),qe.success("Reasoning copied!"),setTimeout(()=>b(!1),1500)}catch{qe.error("Failed to copy reasoning.")}},[l]),O=C.useCallback(async()=>{if(s)try{await navigator.clipboard.writeText(s),x(!0),qe.success("Response copied!"),setTimeout(()=>x(!1),1500)}catch{qe.error("Failed to copy response.")}},[s]);if(!r)return p.jsxs("div",{className:vt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[p.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),p.jsx("div",{className:"h-16 bg-muted rounded w-full"})]})]});const U=()=>{t&&t(e)},M=s&&s.trim().length>0||l&&l.trim().length>0;return p.jsxs("div",{className:vt("group/card relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&p.jsx(UN,{turnData:r.prompt,timestamp:r.startedAt,isAssistantComplete:!1}),p.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[p.jsxs("div",{className:vt("flex flex-col sm:flex-row justify-between items-start mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-20 p-1 -m-1 rounded-t"),children:[p.jsxs("div",{className:"flex items-start gap-1 min-w-0 mb-1 sm:mb-0",children:[p.jsx(M8,{className:"h-4 w-4 text-secondary flex-shrink-0 mt-0.5"}),p.jsx("div",{className:"flex flex-col min-w-0",children:p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsxs("span",{className:"text-xs font-semibold text-secondary truncate mr-1",children:["Assistant (",R,")"]}),p.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity",children:[s&&p.jsx(Sn,{tooltipText:"Copy Response",onClick:O,"aria-label":"Copy assistant response",icon:w?p.jsx(Ga,{className:"text-green-500"}):p.jsx(hp,{}),className:"h-5 w-5"}),M&&p.jsx(Sn,{tooltipText:m?"Unfold":"Fold",onClick:I,"aria-label":m?"Unfold response":"Fold response",icon:m?p.jsx(To,{}):p.jsx(Sc,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5"})]})]})})]}),p.jsx("div",{className:"flex items-start flex-shrink-0 gap-1 self-end sm:self-start",children:p.jsx("span",{className:"text-xs text-muted-foreground mt-0.5",children:"Streaming..."})})]}),!m&&p.jsxs(p.Fragment,{children:[l&&p.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[p.jsxs("div",{className:"flex items-center justify-between mb-1 cursor-pointer group/reasoning",onClick:j,children:[p.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[p.jsx(zp,{className:"h-3.5 w-3.5"})," Reasoning (Streaming)"]}),p.jsxs("div",{className:"flex items-center opacity-0 group-hover/reasoning:opacity-100 focus-within:opacity-100 transition-opacity",children:[p.jsx(Sn,{tooltipText:"Copy Reasoning",onClick:V=>{V.stopPropagation(),P()},"aria-label":"Copy reasoning",icon:v?p.jsx(Ga,{className:"text-green-500"}):p.jsx(hp,{}),className:"h-5 w-5 text-muted-foreground"}),p.jsx(Sn,{tooltipText:d?"Show Reasoning":"Hide Reasoning",onClick:V=>{V.stopPropagation(),j()},"aria-label":d?"Show reasoning":"Hide reasoning",icon:d?p.jsx(To,{}):p.jsx(Sc,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]})]}),!d&&p.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1 overflow-wrap-anywhere",children:l})]}),p.jsx(Pme,{markdownContent:s,isStreaming:!0})]}),m&&p.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:I,children:[l?"[Reasoning] ":"",s&&typeof s=="string"?`"${s.substring(0,80)}${s.length>80?"...":""}"`:"[Streaming...]"]})]}),t&&p.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200",children:p.jsx(Fme,{onStop:U,"aria-label":"Stop Generation"})})]})});gk.displayName="StreamingInteractionCard";var Lme=C.createContext(void 0);function dm(e){const t=C.useContext(Lme);return e||t||"ltr"}function Y0(e,[t,n]){return Math.min(n,Math.max(t,e))}function Bme(e,t){return C.useReducer((n,r)=>t[n][r]??n,e)}var VN="ScrollArea",[d$,X3e]=_i(VN),[$me,ro]=d$(VN),f$=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...s}=e,[o,l]=C.useState(null),[u,d]=C.useState(null),[h,m]=C.useState(null),[g,v]=C.useState(null),[b,w]=C.useState(null),[x,_]=C.useState(0),[E,T]=C.useState(0),[k,R]=C.useState(!1),[j,I]=C.useState(!1),P=Nn(t,U=>l(U)),O=dm(a);return p.jsx($me,{scope:n,type:r,dir:O,scrollHideDelay:i,scrollArea:o,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:R,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:j,onScrollbarYEnabledChange:I,onCornerWidthChange:_,onCornerHeightChange:T,children:p.jsx(an.div,{dir:O,...s,ref:P,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});f$.displayName=VN;var h$="ScrollAreaViewport",p$=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,s=ro(h$,n),o=C.useRef(null),l=Nn(t,o,s.onViewportChange);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),p.jsx(an.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...e.style},children:p.jsx("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});p$.displayName=h$;var jl="ScrollAreaScrollbar",m$=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ro(jl,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:s}=a,o=e.orientation==="horizontal";return C.useEffect(()=>(o?i(!0):s(!0),()=>{o?i(!1):s(!1)}),[o,i,s]),a.type==="hover"?p.jsx(zme,{...r,ref:t,forceMount:n}):a.type==="scroll"?p.jsx(Ume,{...r,ref:t,forceMount:n}):a.type==="auto"?p.jsx(g$,{...r,ref:t,forceMount:n}):a.type==="always"?p.jsx(HN,{...r,ref:t}):null});m$.displayName=jl;var zme=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ro(jl,e.__scopeScrollArea),[i,s]=C.useState(!1);return C.useEffect(()=>{const o=a.scrollArea;let l=0;if(o){const u=()=>{window.clearTimeout(l),s(!0)},d=()=>{l=window.setTimeout(()=>s(!1),a.scrollHideDelay)};return o.addEventListener("pointerenter",u),o.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",u),o.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),p.jsx(Za,{present:n||i,children:p.jsx(g$,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Ume=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=ro(jl,e.__scopeScrollArea),i=e.orientation==="horizontal",s=w_(()=>l("SCROLL_END"),100),[o,l]=Bme("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return C.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,a.scrollHideDelay,l]),C.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(l("SCROLL"),s()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[a.viewport,i,l,s]),p.jsx(Za,{present:n||o!=="hidden",children:p.jsx(HN,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:Gt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:Gt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),g$=C.forwardRef((e,t)=>{const n=ro(jl,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,s]=C.useState(!1),o=e.orientation==="horizontal",l=w_(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;s(o?u:d)}},10);return Op(n.viewport,l),Op(n.content,l),p.jsx(Za,{present:r||i,children:p.jsx(HN,{"data-state":i?"visible":"hidden",...a,ref:t})})}),HN=C.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=ro(jl,e.__scopeScrollArea),i=C.useRef(null),s=C.useRef(0),[o,l]=C.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=x$(o.viewport,o.content),d={...r,sizes:o,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>s.current=0,onThumbPointerDown:m=>s.current=m};function h(m,g){return Kme(m,s.current,o,g)}return n==="horizontal"?p.jsx(Vme,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollLeft,g=qM(m,o,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollLeft=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollLeft=h(m,a.dir))}}):n==="vertical"?p.jsx(Hme,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const m=a.viewport.scrollTop,g=qM(m,o);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{a.viewport&&(a.viewport.scrollTop=m)},onDragScroll:m=>{a.viewport&&(a.viewport.scrollTop=h(m))}}):null}),Vme=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=ro(jl,e.__scopeScrollArea),[s,o]=C.useState(),l=C.useRef(null),u=Nn(t,l,i.onScrollbarXChange);return C.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(b$,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":v_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(m),S$(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Yx(s.paddingLeft),paddingEnd:Yx(s.paddingRight)}})}})}),Hme=C.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=ro(jl,e.__scopeScrollArea),[s,o]=C.useState(),l=C.useRef(null),u=Nn(t,l,i.onScrollbarYChange);return C.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),p.jsx(b$,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":v_(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const m=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(m),S$(m,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&s&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Yx(s.paddingTop),paddingEnd:Yx(s.paddingBottom)}})}})}),[qme,y$]=d$(jl),b$=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=e,g=ro(jl,n),[v,b]=C.useState(null),w=Nn(t,P=>b(P)),x=C.useRef(null),_=C.useRef(""),E=g.viewport,T=r.content-r.viewport,k=Ua(d),R=Ua(l),j=w_(h,10);function I(P){if(x.current){const O=P.clientX-x.current.left,U=P.clientY-x.current.top;u({x:O,y:U})}}return C.useEffect(()=>{const P=O=>{const U=O.target;(v==null?void 0:v.contains(U))&&k(O,T)};return document.addEventListener("wheel",P,{passive:!1}),()=>document.removeEventListener("wheel",P,{passive:!1})},[E,v,T,k]),C.useEffect(R,[r,R]),Op(v,j),Op(g.content,j),p.jsx(qme,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Ua(i),onThumbPointerUp:Ua(s),onThumbPositionChange:R,onThumbPointerDown:Ua(o),children:p.jsx(an.div,{...m,ref:w,style:{position:"absolute",...m.style},onPointerDown:Gt(e.onPointerDown,P=>{P.button===0&&(P.target.setPointerCapture(P.pointerId),x.current=v.getBoundingClientRect(),_.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),I(P))}),onPointerMove:Gt(e.onPointerMove,I),onPointerUp:Gt(e.onPointerUp,P=>{const O=P.target;O.hasPointerCapture(P.pointerId)&&O.releasePointerCapture(P.pointerId),document.body.style.webkitUserSelect=_.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Zx="ScrollAreaThumb",v$=C.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=y$(Zx,e.__scopeScrollArea);return p.jsx(Za,{present:n||a.hasThumb,children:p.jsx(Gme,{ref:t,...r})})}),Gme=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=ro(Zx,n),s=y$(Zx,n),{onThumbPositionChange:o}=s,l=Nn(t,h=>s.onThumbChange(h)),u=C.useRef(void 0),d=w_(()=>{u.current&&(u.current(),u.current=void 0)},100);return C.useEffect(()=>{const h=i.viewport;if(h){const m=()=>{if(d(),!u.current){const g=Zme(h,o);u.current=g,o()}};return o(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[i.viewport,d,o]),p.jsx(an.div,{"data-state":s.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Gt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;s.onThumbPointerDown({x:v,y:b})}),onPointerUp:Gt(e.onPointerUp,s.onThumbPointerUp)})});v$.displayName=Zx;var qN="ScrollAreaCorner",w$=C.forwardRef((e,t)=>{const n=ro(qN,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?p.jsx(Wme,{...e,ref:t}):null});w$.displayName=qN;var Wme=C.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=ro(qN,n),[i,s]=C.useState(0),[o,l]=C.useState(0),u=!!(i&&o);return Op(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),Op(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),s(d)}),u?p.jsx(an.div,{...r,ref:t,style:{width:i,height:o,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Yx(e){return e?parseInt(e,10):0}function x$(e,t){const n=e/t;return isNaN(n)?0:n}function v_(e){const t=x$(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Kme(e,t,n,r="ltr"){const a=v_(n),i=a/2,s=t||i,o=a-s,l=n.scrollbar.paddingStart+s,u=n.scrollbar.size-n.scrollbar.paddingEnd-o,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return _$([l,u],h)(e)}function qM(e,t,n="ltr"){const r=v_(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,s=t.content-t.viewport,o=i-r,l=n==="ltr"?[0,s]:[s*-1,0],u=Y0(e,l);return _$([0,s],[0,o])(u)}function _$(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function S$(e,t){return e>0&&e<t}var Zme=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},s=n.left!==i.left,o=n.top!==i.top;(s||o)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function w_(e,t){const n=Ua(e),r=C.useRef(0);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),C.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Op(e,t){const n=Ua(t);si(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Yme=f$,Xme=p$,Jme=w$;function Es({className:e,children:t,...n}){return p.jsxs(Yme,{"data-slot":"scroll-area",className:vt("relative",e),...n,children:[p.jsx(Xme,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),p.jsx(Qme,{}),p.jsx(Jme,{})]})}function Qme({className:e,orientation:t="vertical",...n}){return p.jsx(m$,{"data-slot":"scroll-area-scrollbar",orientation:t,className:vt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:p.jsx(v$,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function $n({className:e,...t}){return p.jsx("div",{"data-slot":"skeleton",className:vt("bg-accent animate-pulse rounded-md",e),...t})}const ege=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M4 12h16",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M12 5v16",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})};function E$({className:e,...t}){return p.jsx("div",{"data-slot":"card",className:vt("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...t})}function C$({className:e,...t}){return p.jsx("div",{"data-slot":"card-header",className:vt("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function T$({className:e,...t}){return p.jsx("div",{"data-slot":"card-title",className:vt("leading-none font-semibold",e),...t})}function tge({className:e,...t}){return p.jsx("div",{"data-slot":"card-description",className:vt("text-muted-foreground text-sm",e),...t})}function k$({className:e,...t}){return p.jsx("div",{"data-slot":"card-content",className:vt("px-6",e),...t})}const Qi=Js(Qs(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,isVfsModalOpen:!1,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})},toggleVfsModal:t=>{e(n=>{n.isVfsModalOpen=t??!n.isVfsModalOpen})}}))),nge=({title:e,description:t,icon:n,onClick:r})=>p.jsxs(E$,{className:"hover:border-primary/50 hover:bg-muted/30 transition-all cursor-pointer group",onClick:r,children:[p.jsxs(C$,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[p.jsxs(T$,{className:"text-sm font-medium flex items-center gap-2",children:[n," ",e]}),p.jsx(BK,{className:"h-4 w-4 text-muted-foreground group-hover:translate-x-1 transition-transform"})]}),p.jsx(k$,{children:p.jsx("p",{className:"text-xs text-muted-foreground",children:t})})]}),A$=()=>{const{toggleChatControlPanel:e,setInitialSettingsTabs:t,toggleVfsModal:n}=Qi(cn(s=>({toggleChatControlPanel:s.toggleChatControlPanel,setInitialSettingsTabs:s.setInitialSettingsTabs,toggleVfsModal:s.toggleVfsModal}))),r=(s,o)=>{t(s,o),e("settingsModal",!0)},a=()=>{n(!0)},i=[{title:"Configure Theme",description:"Customize colors, fonts, and code block appearance.",icon:p.jsx(nY,{className:"h-4 w-4 text-purple-500"}),onClick:()=>r("theme")},{title:"Manage Rules & Tags",description:"Define reusable prompt snippets and organize them.",icon:p.jsx(kT,{className:"h-4 w-4 text-blue-500"}),onClick:()=>r("rules-tags")},{title:"Add Files",description:"Upload or manage files in the virtual filesystem.",icon:p.jsx(pA,{className:"h-4 w-4 text-cyan-500"}),onClick:a},{title:"Add Provider",description:"Connect to AI services like OpenAI, Ollama, etc.",icon:p.jsx(Zw,{className:"h-4 w-4 text-green-500"}),onClick:()=>r("providers","providers-config")},{title:"Add API Key",description:"Store API keys securely in your browser.",icon:p.jsx(i0,{className:"h-4 w-4 text-amber-500"}),onClick:()=>r("providers","api-keys")}];return p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl w-full pt-4",children:i.map(s=>p.jsx(nge,{title:s.title,description:s.description,icon:s.icon,onClick:s.onClick},s.title))})},GM=()=>p.jsxs("div",{className:"flex h-full flex-col items-center justify-center text-center p-4",children:[p.jsx(ege,{className:"h-16 w-16 text-muted-foreground mb-4"}),p.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Start Chatting"}),p.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Select an existing conversation or project from the sidebar, or click the '+' button to start a new chat. You can also explore these setup options:"}),p.jsx(A$,{})]}),GN=C.createContext({});function WN(e){const t=C.useRef(null);return t.current===null&&(t.current=e()),t.current}const KN=typeof window<"u",N$=KN?C.useLayoutEffect:C.useEffect,x_=C.createContext(null),ZN=C.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class rge extends C.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=r instanceof HTMLElement&&r.offsetWidth||0,i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft,i.right=a-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function age({children:e,isPresent:t,anchorX:n}){const r=C.useId(),a=C.useRef(null),i=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:s}=C.useContext(ZN);return C.useInsertionEffect(()=>{const{width:o,height:l,top:u,left:d,right:h}=i.current;if(t||!a.current||!o||!l)return;const m=n==="left"?`left: ${d}`:`right: ${h}`;a.current.dataset.motionPopId=r;const g=document.createElement("style");return s&&(g.nonce=s),document.head.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            ${m}px !important;
            top: ${u}px !important;
          }
        `),()=>{document.head.contains(g)&&document.head.removeChild(g)}},[t]),p.jsx(rge,{isPresent:t,childRef:a,sizeRef:i,children:C.cloneElement(e,{ref:a})})}const ige=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:i,mode:s,anchorX:o})=>{const l=WN(sge),u=C.useId();let d=!0,h=C.useMemo(()=>(d=!1,{id:u,initial:t,isPresent:n,custom:a,onExitComplete:m=>{l.set(m,!0);for(const g of l.values())if(!g)return;r&&r()},register:m=>(l.set(m,!1),()=>l.delete(m))}),[n,l,r]);return i&&d&&(h={...h}),C.useMemo(()=>{l.forEach((m,g)=>l.set(g,!1))},[n]),C.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),s==="popLayout"&&(e=p.jsx(age,{isPresent:n,anchorX:o,children:e})),p.jsx(x_.Provider,{value:h,children:e})};function sge(){return new Map}function R$(e=!0){const t=C.useContext(x_);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,i=C.useId();C.useEffect(()=>{if(e)return a(i)},[e]);const s=C.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,s]:[!0]}const vw=e=>e.key||"";function WM(e){const t=[];return C.Children.forEach(e,n=>{C.isValidElement(n)&&t.push(n)}),t}const oge=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:i="sync",propagate:s=!1,anchorX:o="left"})=>{const[l,u]=R$(s),d=C.useMemo(()=>WM(e),[e]),h=s&&!l?[]:d.map(vw),m=C.useRef(!0),g=C.useRef(d),v=WN(()=>new Map),[b,w]=C.useState(d),[x,_]=C.useState(d);N$(()=>{m.current=!1,g.current=d;for(let k=0;k<x.length;k++){const R=vw(x[k]);h.includes(R)?v.delete(R):v.get(R)!==!0&&v.set(R,!1)}},[x,h.length,h.join("-")]);const E=[];if(d!==b){let k=[...d];for(let R=0;R<x.length;R++){const j=x[R],I=vw(j);h.includes(I)||(k.splice(R,0,j),E.push(j))}return i==="wait"&&E.length&&(k=E),_(WM(k)),w(d),null}const{forceRender:T}=C.useContext(GN);return p.jsx(p.Fragment,{children:x.map(k=>{const R=vw(k),j=s&&!l?!1:d===x||h.includes(R),I=()=>{if(v.has(R))v.set(R,!0);else return;let P=!0;v.forEach(O=>{O||(P=!1)}),P&&(T==null||T(),_(g.current),s&&(u==null||u()),r&&r())};return p.jsx(ige,{isPresent:j,initial:!m.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:i,onExitComplete:j?void 0:I,anchorX:o,children:k},R)})})},ww=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],KM={value:null};function lge(e,t){let n=new Set,r=new Set,a=!1,i=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1},l=0;function u(h){s.has(h)&&(d.schedule(h),e()),l++,h(o)}const d={schedule:(h,m=!1,g=!1)=>{const b=g&&a?n:r;return m&&s.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),s.delete(h)},process:h=>{if(o=h,a){i=!0;return}a=!0,[n,r]=[r,n],n.forEach(u),t&&KM.value&&KM.value.frameloop[t].push(l),l=0,n.clear(),a=!1,i&&(i=!1,d.process(h))}};return d}const Dc={},cge=40;function I$(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,s=ww.reduce((E,T)=>(E[T]=lge(i,t?T:void 0),E),{}),{setup:o,read:l,resolveKeyframes:u,preUpdate:d,update:h,preRender:m,render:g,postRender:v}=s,b=()=>{const E=Dc.useManualTiming?a.timestamp:performance.now();n=!1,Dc.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(E-a.timestamp,cge),1)),a.timestamp=E,a.isProcessing=!0,o.process(a),l.process(a),u.process(a),d.process(a),h.process(a),m.process(a),g.process(a),v.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(b))},w=()=>{n=!0,r=!0,a.isProcessing||e(b)};return{schedule:ww.reduce((E,T)=>{const k=s[T];return E[T]=(R,j=!1,I=!1)=>(n||w(),k.schedule(R,j,I)),E},{}),cancel:E=>{for(let T=0;T<ww.length;T++)s[ww[T]].cancel(E)},state:a,steps:s}}const Ks=e=>e,{schedule:ea,cancel:Qu,state:ni,steps:MC}=I$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ks,!0),j$=C.createContext({strict:!1}),ZM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Pp={};for(const e in ZM)Pp[e]={isEnabled:t=>ZM[e].some(n=>!!t[n])};function uge(e){for(const t in e)Pp[t]={...Pp[t],...e[t]}}const dge=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xx(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||dge.has(e)}let D$=e=>!Xx(e);function fge(e){e&&(D$=t=>t.startsWith("on")?!Xx(t):e(t))}try{fge(require("@emotion/is-prop-valid").default)}catch{}function hge(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(D$(a)||n===!0&&Xx(a)||!t&&!Xx(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}function pge(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}const __=C.createContext({});function S_(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function X0(e){return typeof e=="string"||Array.isArray(e)}const YN=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],XN=["initial",...YN];function E_(e){return S_(e.animate)||XN.some(t=>X0(e[t]))}function M$(e){return!!(E_(e)||e.variants)}function mge(e,t){if(E_(e)){const{initial:n,animate:r}=e;return{initial:n===!1||X0(n)?n:void 0,animate:X0(r)?r:void 0}}return e.inherit!==!1?t:{}}function gge(e){const{initial:t,animate:n}=mge(e,C.useContext(__));return C.useMemo(()=>({initial:t,animate:n}),[YM(t),YM(n)])}function YM(e){return Array.isArray(e)?e.join(" "):e}const yge=Symbol.for("motionComponentSymbol");function Xh(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function bge(e,t,n){return C.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xh(n)&&(n.current=r))},[t])}const JN=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),vge="framerAppearId",O$="data-"+JN(vge),P$=C.createContext({}),{schedule:QN}=I$(queueMicrotask,!1);function wge(e,t,n,r,a){var b,w;const{visualElement:i}=C.useContext(__),s=C.useContext(j$),o=C.useContext(x_),l=C.useContext(ZN).reducedMotion,u=C.useRef(null);r=r||s.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:i,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const d=u.current,h=C.useContext(P$);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&xge(u.current,n,a,h);const m=C.useRef(!1);C.useInsertionEffect(()=>{d&&m.current&&d.update(n,o)});const g=n[O$],v=C.useRef(!!g&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,g))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,g)));return N$(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),QN.render(d.render),v.current&&d.animationState&&d.animationState.animateChanges())}),C.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)==null||x.call(window,g)}),v.current=!1))}),d}function xge(e,t,n,r){const{layoutId:a,layout:i,drag:s,dragConstraints:o,layoutScroll:l,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:F$(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!s||o&&Xh(o),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:l,layoutRoot:u})}function F$(e){if(e)return e.options.allowProjection!==!1?e.projection:F$(e.parent)}let eR=()=>{};function _ge({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:a}){e&&uge(e);function i(o,l){let u;const d={...C.useContext(ZN),...o,layoutId:Sge(o)},{isStatic:h}=d,m=gge(o),g=r(o,h);if(!h&&KN){Ege();const v=Cge(d);u=v.MeasureLayout,m.visualElement=wge(a,g,d,t,v.ProjectionNode)}return p.jsxs(__.Provider,{value:m,children:[u&&m.visualElement?p.jsx(u,{visualElement:m.visualElement,...d}):null,n(a,o,bge(g,m.visualElement,l),g,h,m.visualElement)]})}i.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const s=C.forwardRef(i);return s[yge]=a,s}function Sge({layoutId:e}){const t=C.useContext(GN).id;return t&&e!==void 0?t+"-"+e:e}function Ege(e,t){C.useContext(j$).strict}function Cge(e){const{drag:t,layout:n}=Pp;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const L$=e=>t=>typeof t=="string"&&t.startsWith(e),tR=L$("--"),Tge=L$("var(--"),nR=e=>Tge(e)?kge.test(e.split("/*")[0].trim()):!1,kge=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,J0={};function Age(e){for(const t in e)J0[t]=e[t],tR(t)&&(J0[t].isCSSVariable=!0)}const fm=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],hm=new Set(fm);function B$(e,{layout:t,layoutId:n}){return hm.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!J0[e]||e==="opacity")}const gi=e=>!!(e&&e.getVelocity),$$=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Mc=(e,t,n)=>n>t?t:n<e?e:n,pm={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Q0={...pm,transform:e=>Mc(0,1,e)},xw={...pm,default:1},XM={...pm,transform:Math.round},nb=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Tu=nb("deg"),wl=nb("%"),Tn=nb("px"),Nge=nb("vh"),Rge=nb("vw"),JM={...wl,parse:e=>wl.parse(e)/100,transform:e=>wl.transform(e*100)},Ige={rotate:Tu,rotateX:Tu,rotateY:Tu,rotateZ:Tu,scale:xw,scaleX:xw,scaleY:xw,scaleZ:xw,skew:Tu,skewX:Tu,skewY:Tu,distance:Tn,translateX:Tn,translateY:Tn,translateZ:Tn,x:Tn,y:Tn,z:Tn,perspective:Tn,transformPerspective:Tn,opacity:Q0,originX:JM,originY:JM,originZ:Tn},rR={borderWidth:Tn,borderTopWidth:Tn,borderRightWidth:Tn,borderBottomWidth:Tn,borderLeftWidth:Tn,borderRadius:Tn,radius:Tn,borderTopLeftRadius:Tn,borderTopRightRadius:Tn,borderBottomRightRadius:Tn,borderBottomLeftRadius:Tn,width:Tn,maxWidth:Tn,height:Tn,maxHeight:Tn,top:Tn,right:Tn,bottom:Tn,left:Tn,padding:Tn,paddingTop:Tn,paddingRight:Tn,paddingBottom:Tn,paddingLeft:Tn,margin:Tn,marginTop:Tn,marginRight:Tn,marginBottom:Tn,marginLeft:Tn,backgroundPositionX:Tn,backgroundPositionY:Tn,...Ige,zIndex:XM,fillOpacity:Q0,strokeOpacity:Q0,numOctaves:XM},jge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Dge=fm.length;function Mge(e,t,n){let r="",a=!0;for(let i=0;i<Dge;i++){const s=fm[i],o=e[s];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(s.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||n){const u=$$(o,rR[s]);if(!l){a=!1;const d=jge[s]||s;r+=`${d}(${u}) `}n&&(t[s]=u)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function aR(e,t,n){const{style:r,vars:a,transformOrigin:i}=e;let s=!1,o=!1;for(const l in t){const u=t[l];if(hm.has(l)){s=!0;continue}else if(tR(l)){a[l]=u;continue}else{const d=$$(u,rR[l]);l.startsWith("origin")?(o=!0,i[l]=d):r[l]=d}}if(t.transform||(s||n?r.transform=Mge(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${l} ${u} ${d}`}}const iR=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function z$(e,t,n){for(const r in t)!gi(t[r])&&!B$(r,n)&&(e[r]=t[r])}function Oge({transformTemplate:e},t){return C.useMemo(()=>{const n=iR();return aR(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Pge(e,t){const n=e.style||{},r={};return z$(r,n,e),Object.assign(r,Oge(e,t)),r}function Fge(e,t){const n={},r=Pge(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const Lge=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sR(e){return typeof e!="string"||e.includes("-")?!1:!!(Lge.indexOf(e)>-1||/[A-Z]/u.test(e))}const Bge={offset:"stroke-dashoffset",array:"stroke-dasharray"},$ge={offset:"strokeDashoffset",array:"strokeDasharray"};function zge(e,t,n=1,r=0,a=!0){e.pathLength=1;const i=a?Bge:$ge;e[i.offset]=Tn.transform(-r);const s=Tn.transform(t),o=Tn.transform(n);e[i.array]=`${s} ${o}`}function U$(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:i=1,pathOffset:s=0,...o},l,u,d){if(aR(e,o,u),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m}=e;h.transform&&(m.transform=h.transform,delete h.transform),(m.transform||h.transformOrigin)&&(m.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),n!==void 0&&(h.y=n),r!==void 0&&(h.scale=r),a!==void 0&&zge(h,a,i,s,!1)}const V$=()=>({...iR(),attrs:{}}),H$=e=>typeof e=="string"&&e.toLowerCase()==="svg";function Uge(e,t,n,r){const a=C.useMemo(()=>{const i=V$();return U$(i,t,H$(r),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};z$(i,e.style,e),a.style={...i,...a.style}}return a}function Vge(e=!1){return(n,r,a,{latestValues:i},s)=>{const l=(sR(n)?Uge:Fge)(r,i,s,n),u=hge(r,typeof n=="string",e),d=n!==C.Fragment?{...u,...l,ref:a}:{},{children:h}=r,m=C.useMemo(()=>gi(h)?h.get():h,[h]);return C.createElement(n,{...d,children:m})}}function QM(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function oR(e,t,n,r){if(typeof t=="function"){const[a,i]=QM(r);t=t(n!==void 0?n:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=QM(r);t=t(n!==void 0?n:e.custom,a,i)}return t}function Uw(e){return gi(e)?e.get():e}function Hge({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:qge(n,r,a,e),renderState:t()}}const q$=e=>(t,n)=>{const r=C.useContext(__),a=C.useContext(x_),i=()=>Hge(e,t,r,a);return n?i():WN(i)};function qge(e,t,n,r){const a={},i=r(e,{});for(const m in i)a[m]=Uw(i[m]);let{initial:s,animate:o}=e;const l=E_(e),u=M$(e);t&&u&&!l&&e.inherit!==!1&&(s===void 0&&(s=t.initial),o===void 0&&(o=t.animate));let d=n?n.initial===!1:!1;d=d||s===!1;const h=d?o:s;if(h&&typeof h!="boolean"&&!S_(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const v=oR(e,m[g]);if(v){const{transitionEnd:b,transition:w,...x}=v;for(const _ in x){let E=x[_];if(Array.isArray(E)){const T=d?E.length-1:0;E=E[T]}E!==null&&(a[_]=E)}for(const _ in b)a[_]=b[_]}}}return a}function lR(e,t,n){var i;const{style:r}=e,a={};for(const s in r)(gi(r[s])||t.style&&gi(t.style[s])||B$(s,e)||((i=n==null?void 0:n.getValue(s))==null?void 0:i.liveStyle)!==void 0)&&(a[s]=r[s]);return a}const Gge={useVisualState:q$({scrapeMotionValuesFromProps:lR,createRenderState:iR})};function G$(e,t,n){const r=lR(e,t,n);for(const a in e)if(gi(e[a])||gi(t[a])){const i=fm.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[i]=e[a]}return r}const Wge={useVisualState:q$({scrapeMotionValuesFromProps:G$,createRenderState:V$})};function Kge(e,t){return function(r,{forwardMotionProps:a}={forwardMotionProps:!1}){const s={...sR(r)?Wge:Gge,preloadedFeatures:e,useRender:Vge(a),createVisualElement:t,Component:r};return _ge(s)}}function ey(e,t,n){const r=e.getProps();return oR(r,t,n!==void 0?n:r.custom,e)}const yk=e=>Array.isArray(e);let Vw;function Zge(){Vw=void 0}const Zi={now:()=>(Vw===void 0&&Zi.set(ni.isProcessing||Dc.useManualTiming?ni.timestamp:performance.now()),Vw),set:e=>{Vw=e,queueMicrotask(Zge)}};function cR(e,t){e.indexOf(t)===-1&&e.push(t)}function uR(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class dR{constructor(){this.subscriptions=[]}add(t){return cR(this.subscriptions,t),()=>uR(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let i=0;i<a;i++){const s=this.subscriptions[i];s&&s(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function W$(e,t){return t?e*(1e3/t):0}const eO=30,Yge=e=>!isNaN(parseFloat(e));class Xge{constructor(t,n={}){this.version="__VERSION__",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var s,o;const i=Zi.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current)),a&&((o=this.events.renderRequest)==null||o.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Zi.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Yge(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new dR);const r=this.events[t].add(n);return t==="change"?()=>{r(),ea.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>eO)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,eO);return W$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t;(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ty(e,t){return new Xge(e,t)}function Jge(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ty(n))}function Qge(e){return yk(e)?e[e.length-1]||0:e}function e0e(e,t){const n=ey(e,t);let{transitionEnd:r={},transition:a={},...i}=n||{};i={...i,...r};for(const s in i){const o=Qge(i[s]);Jge(e,s,o)}}function t0e(e){return!!(gi(e)&&e.add)}function bk(e,t){const n=e.getValue("willChange");if(t0e(n))return n.add(t);if(!n&&Dc.WillChange){const r=new Dc.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function K$(e){return e.props[O$]}const n0e=e=>e!==null;function r0e(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(n0e),i=t&&n!=="loop"&&t%2===1?0:a.length-1;return a[i]}const a0e={type:"spring",stiffness:500,damping:25,restSpeed:10},i0e=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),s0e={type:"keyframes",duration:.8},o0e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l0e=(e,{keyframes:t})=>t.length>2?s0e:hm.has(e)?e.startsWith("scale")?i0e(t[1]):a0e:o0e;function c0e({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:s,repeatDelay:o,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function fR(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const xl=e=>e*1e3,_l=e=>e/1e3,Yg=e=>Math.round(e*1e5)/1e5,hR=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function u0e(e){return e==null}const d0e=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pR=(e,t)=>n=>!!(typeof n=="string"&&d0e.test(n)&&n.startsWith(e)||t&&!u0e(n)&&Object.prototype.hasOwnProperty.call(n,t)),Z$=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,i,s,o]=r.match(hR);return{[e]:parseFloat(a),[t]:parseFloat(i),[n]:parseFloat(s),alpha:o!==void 0?parseFloat(o):1}},f0e=e=>Mc(0,255,e),OC={...pm,transform:e=>Math.round(f0e(e))},rf={test:pR("rgb","red"),parse:Z$("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+OC.transform(e)+", "+OC.transform(t)+", "+OC.transform(n)+", "+Yg(Q0.transform(r))+")"};function h0e(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const vk={test:pR("#"),parse:h0e,transform:rf.transform},Jh={test:pR("hsl","hue"),parse:Z$("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+wl.transform(Yg(t))+", "+wl.transform(Yg(n))+", "+Yg(Q0.transform(r))+")"},hi={test:e=>rf.test(e)||vk.test(e)||Jh.test(e),parse:e=>rf.test(e)?rf.parse(e):Jh.test(e)?Jh.parse(e):vk.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rf.transform(e):Jh.transform(e)},p0e=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function m0e(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(hR))==null?void 0:t.length)||0)+(((n=e.match(p0e))==null?void 0:n.length)||0)>0}const Y$="number",X$="color",g0e="var",y0e="var(",tO="${}",b0e=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ny(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let i=0;const o=t.replace(b0e,l=>(hi.test(l)?(r.color.push(i),a.push(X$),n.push(hi.parse(l))):l.startsWith(y0e)?(r.var.push(i),a.push(g0e),n.push(l)):(r.number.push(i),a.push(Y$),n.push(parseFloat(l))),++i,tO)).split(tO);return{values:n,split:o,indexes:r,types:a}}function J$(e){return ny(e).values}function Q$(e){const{split:t,types:n}=ny(e),r=t.length;return a=>{let i="";for(let s=0;s<r;s++)if(i+=t[s],a[s]!==void 0){const o=n[s];o===Y$?i+=Yg(a[s]):o===X$?i+=hi.transform(a[s]):i+=a[s]}return i}}const v0e=e=>typeof e=="number"?0:e;function w0e(e){const t=J$(e);return Q$(e)(t.map(v0e))}const ed={test:m0e,parse:J$,createTransformer:Q$,getAnimatableNone:w0e};function PC(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function x0e({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,i=0,s=0;if(!t)a=i=s=n;else{const o=n<.5?n*(1+t):n+t-n*t,l=2*n-o;a=PC(l,o,e+1/3),i=PC(l,o,e),s=PC(l,o,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(s*255),alpha:r}}function Jx(e,t){return n=>n>0?t:e}const Jr=(e,t,n)=>e+(t-e)*n,FC=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},_0e=[vk,rf,Jh],S0e=e=>_0e.find(t=>t.test(e));function nO(e){const t=S0e(e);if(!t)return!1;let n=t.parse(e);return t===Jh&&(n=x0e(n)),n}const rO=(e,t)=>{const n=nO(e),r=nO(t);if(!n||!r)return Jx(e,t);const a={...n};return i=>(a.red=FC(n.red,r.red,i),a.green=FC(n.green,r.green,i),a.blue=FC(n.blue,r.blue,i),a.alpha=Jr(n.alpha,r.alpha,i),rf.transform(a))},wk=new Set(["none","hidden"]);function E0e(e,t){return wk.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}const C0e=(e,t)=>n=>t(e(n)),rb=(...e)=>e.reduce(C0e);function T0e(e,t){return n=>Jr(e,t,n)}function mR(e){return typeof e=="number"?T0e:typeof e=="string"?nR(e)?Jx:hi.test(e)?rO:N0e:Array.isArray(e)?e7:typeof e=="object"?hi.test(e)?rO:k0e:Jx}function e7(e,t){const n=[...e],r=n.length,a=e.map((i,s)=>mR(i)(i,t[s]));return i=>{for(let s=0;s<r;s++)n[s]=a[s](i);return n}}function k0e(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=mR(e[a])(e[a],t[a]));return a=>{for(const i in r)n[i]=r[i](a);return n}}function A0e(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const i=t.types[a],s=e.indexes[i][r[i]],o=e.values[s]??0;n[a]=o,r[i]++}return n}const N0e=(e,t)=>{const n=ed.createTransformer(t),r=ny(e),a=ny(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?wk.has(e)&&!a.values.length||wk.has(t)&&!r.values.length?E0e(e,t):rb(e7(A0e(r,a),a.values),n):Jx(e,t)};function t7(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Jr(e,t,n):mR(e)(e,t)}const R0e=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ea.update(t,!0),stop:()=>Qu(t),now:()=>ni.isProcessing?ni.timestamp:Zi.now()}},n7=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let i=0;i<a;i++)r+=e(i/(a-1))+", ";return`linear(${r.substring(0,r.length-2)})`},Qx=2e4;function gR(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Qx;)t+=n,r=e.next(t);return t>=Qx?1/0:t}function I0e(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(gR(r),Qx);return{type:"keyframes",ease:i=>r.next(a*i).value/t,duration:_l(a)}}const j0e=5;function r7(e,t,n){const r=Math.max(t-j0e,0);return W$(n-e(r),t-r)}const ra={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},aO=.001;function D0e({duration:e=ra.duration,bounce:t=ra.bounce,velocity:n=ra.velocity,mass:r=ra.mass}){let a,i,s=1-t;s=Mc(ra.minDamping,ra.maxDamping,s),e=Mc(ra.minDuration,ra.maxDuration,_l(e)),s<1?(a=u=>{const d=u*s,h=d*e,m=d-n,g=xk(u,s),v=Math.exp(-h);return aO-m/g*v},i=u=>{const h=u*s*e,m=h*n+n,g=Math.pow(s,2)*Math.pow(u,2)*e,v=Math.exp(-h),b=xk(Math.pow(u,2),s);return(-a(u)+aO>0?-1:1)*((m-g)*v)/b}):(a=u=>{const d=Math.exp(-u*e),h=(u-n)*e+1;return-.001+d*h},i=u=>{const d=Math.exp(-u*e),h=(n-u)*(e*e);return d*h});const o=5/e,l=O0e(a,i,o);if(e=xl(e),isNaN(l))return{stiffness:ra.stiffness,damping:ra.damping,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:s*2*Math.sqrt(r*u),duration:e}}}const M0e=12;function O0e(e,t,n){let r=n;for(let a=1;a<M0e;a++)r=r-e(r)/t(r);return r}function xk(e,t){return e*Math.sqrt(1-t*t)}const P0e=["duration","bounce"],F0e=["stiffness","damping","mass"];function iO(e,t){return t.some(n=>e[n]!==void 0)}function L0e(e){let t={velocity:ra.velocity,stiffness:ra.stiffness,damping:ra.damping,mass:ra.mass,isResolvedFromDuration:!1,...e};if(!iO(e,F0e)&&iO(e,P0e))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,i=2*Mc(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:ra.mass,stiffness:a,damping:i}}else{const n=D0e(e);t={...t,...n,mass:ra.mass},t.isResolvedFromDuration=!0}return t}function e1(e=ra.visualDuration,t=ra.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const i=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],o={done:!1,value:i},{stiffness:l,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=L0e({...n,velocity:-_l(n.velocity||0)}),v=m||0,b=u/(2*Math.sqrt(l*d)),w=s-i,x=_l(Math.sqrt(l/d)),_=Math.abs(w)<5;r||(r=_?ra.restSpeed.granular:ra.restSpeed.default),a||(a=_?ra.restDelta.granular:ra.restDelta.default);let E;if(b<1){const k=xk(x,b);E=R=>{const j=Math.exp(-b*x*R);return s-j*((v+b*x*w)/k*Math.sin(k*R)+w*Math.cos(k*R))}}else if(b===1)E=k=>s-Math.exp(-x*k)*(w+(v+x*w)*k);else{const k=x*Math.sqrt(b*b-1);E=R=>{const j=Math.exp(-b*x*R),I=Math.min(k*R,300);return s-j*((v+b*x*w)*Math.sinh(I)+k*w*Math.cosh(I))/k}}const T={calculatedDuration:g&&h||null,next:k=>{const R=E(k);if(g)o.done=k>=h;else{let j=k===0?v:0;b<1&&(j=k===0?xl(v):r7(E,k,R));const I=Math.abs(j)<=r,P=Math.abs(s-R)<=a;o.done=I&&P}return o.value=o.done?s:R,o},toString:()=>{const k=Math.min(gR(T),Qx),R=n7(j=>T.next(k*j).value,k,30);return k+"ms "+R},toTransition:()=>{}};return T}e1.applyToOptions=e=>{const t=I0e(e,100,e1);return e.ease=t.ease,e.duration=xl(t.duration),e.type="keyframes",e};function _k({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:s,min:o,max:l,restDelta:u=.5,restSpeed:d}){const h=e[0],m={done:!1,value:h},g=I=>o!==void 0&&I<o||l!==void 0&&I>l,v=I=>o===void 0?l:l===void 0||Math.abs(o-I)<Math.abs(l-I)?o:l;let b=n*t;const w=h+b,x=s===void 0?w:s(w);x!==w&&(b=x-h);const _=I=>-b*Math.exp(-I/r),E=I=>x+_(I),T=I=>{const P=_(I),O=E(I);m.done=Math.abs(P)<=u,m.value=m.done?x:O};let k,R;const j=I=>{g(m.value)&&(k=I,R=e1({keyframes:[m.value,v(m.value)],velocity:r7(E,I,m.value),damping:a,stiffness:i,restDelta:u,restSpeed:d}))};return j(0),{calculatedDuration:null,next:I=>{let P=!1;return!R&&k===void 0&&(P=!0,T(I),j(I)),k!==void 0&&I>=k?R.next(I-k):(!P&&T(I),m)}}}const ry=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};function B0e(e,t,n){const r=[],a=n||Dc.mix||t7,i=e.length-1;for(let s=0;s<i;s++){let o=a(e[s],e[s+1]);if(t){const l=Array.isArray(t)?t[s]||Ks:t;o=rb(l,o)}r.push(o)}return r}function $0e(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const i=e.length;if(eR(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=B0e(t,r,a),l=o.length,u=d=>{if(s&&d<e[0])return t[0];let h=0;if(l>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const m=ry(e[h],e[h+1],d);return o[h](m)};return n?d=>u(Mc(e[0],e[i-1],d)):u}function z0e(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=ry(0,t,r);e.push(Jr(n,1,a))}}function U0e(e){const t=[0];return z0e(t,e.length-1),t}function V0e(e,t){return e.map(n=>n*t)}const a7=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,H0e=1e-7,q0e=12;function G0e(e,t,n,r,a){let i,s,o=0;do s=t+(n-t)/2,i=a7(s,r,a)-e,i>0?n=s:t=s;while(Math.abs(i)>H0e&&++o<q0e);return s}function ab(e,t,n,r){if(e===t&&n===r)return Ks;const a=i=>G0e(i,0,1,e,n);return i=>i===0||i===1?i:a7(a(i),t,r)}const W0e=ab(.42,0,1,1),K0e=ab(0,0,.58,1),i7=ab(.42,0,.58,1),Z0e=e=>Array.isArray(e)&&typeof e[0]!="number",s7=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,o7=e=>t=>1-e(1-t),l7=ab(.33,1.53,.69,.99),yR=o7(l7),c7=s7(yR),u7=e=>(e*=2)<1?.5*yR(e):.5*(2-Math.pow(2,-10*(e-1))),bR=e=>1-Math.sin(Math.acos(e)),d7=o7(bR),f7=s7(bR),h7=e=>Array.isArray(e)&&typeof e[0]=="number",Y0e={linear:Ks,easeIn:W0e,easeInOut:i7,easeOut:K0e,circIn:bR,circInOut:f7,circOut:d7,backIn:yR,backInOut:c7,backOut:l7,anticipate:u7},X0e=e=>typeof e=="string",sO=e=>{if(h7(e)){eR(e.length===4);const[t,n,r,a]=e;return ab(t,n,r,a)}else if(X0e(e))return Y0e[e];return e};function J0e(e,t){return e.map(()=>t||i7).splice(0,e.length-1)}function Xg({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=Z0e(r)?r.map(sO):sO(r),i={done:!1,value:t[0]},s=V0e(n&&n.length===t.length?n:U0e(t),e),o=$0e(s,t,{ease:Array.isArray(a)?a:J0e(t,a)});return{calculatedDuration:e,next:l=>(i.value=o(l),i.done=l>=e,i)}}const Q0e=e=>e!==null;function vR(e,{repeat:t,repeatType:n="loop"},r,a=1){const i=e.filter(Q0e),o=a<0||t&&n!=="loop"&&t%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const eye={decay:_k,inertia:_k,tween:Xg,keyframes:Xg,spring:e1};function p7(e){typeof e.type=="string"&&(e.type=eye[e.type])}class wR{constructor(){this.count=0,this.updateFinished()}get finished(){return this._finished}updateFinished(){this.count++,this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const tye=e=>e/100;class m7 extends wR{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;if(n&&n.updatedAt!==Zi.now()&&this.tick(Zi.now()),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:r}=this.options;r&&r()},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;p7(t);const{type:n=Xg,repeat:r=0,repeatDelay:a=0,repeatType:i,velocity:s=0}=t;let{keyframes:o}=t;const l=n||Xg;l!==Xg&&typeof o[0]!="number"&&(this.mixKeyframes=rb(tye,t7(o[0],o[1])),o=[0,100]);const u=l({...t,keyframes:o});i==="mirror"&&(this.mirroredGenerator=l({...t,keyframes:[...o].reverse(),velocity:-s})),u.calculatedDuration===null&&(u.calculatedDuration=gR(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:i,mirroredGenerator:s,resolvedDuration:o,calculatedDuration:l}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:m,repeatDelay:g,type:v,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const x=this.currentTime-u*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?x<0:x>a;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let E=this.currentTime,T=r;if(h){const I=Math.min(this.currentTime,a)/o;let P=Math.floor(I),O=I%1;!O&&I>=1&&(O=1),O===1&&P--,P=Math.min(P,h+1),!!(P%2)&&(m==="reverse"?(O=1-O,g&&(O-=g/o)):m==="mirror"&&(T=s)),E=Mc(0,1,O)*o}const k=_?{done:!1,value:d[0]}:T.next(E);i&&(k.value=i(k.value));let{done:R}=k;!_&&l!==null&&(R=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return j&&v!==_k&&(k.value=vR(d,this.options,w,this.speed)),b&&b(k.value),j&&this.finish(),k}then(t,n){return this.finished.then(t,n)}get duration(){return _l(this.calculatedDuration)}get time(){return _l(this.currentTime)}set time(t){t=xl(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Zi.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=_l(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=R0e,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const a=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=a):this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime||(this.startTime=r??a),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Zi.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown()}teardown(){this.notifyFinished(),this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),t.observe(this)}}function nye(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const af=e=>e*180/Math.PI,Sk=e=>{const t=af(Math.atan2(e[1],e[0]));return Ek(t)},rye={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Sk,rotateZ:Sk,skewX:e=>af(Math.atan(e[1])),skewY:e=>af(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Ek=e=>(e=e%360,e<0&&(e+=360),e),oO=Sk,lO=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),cO=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),aye={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lO,scaleY:cO,scale:e=>(lO(e)+cO(e))/2,rotateX:e=>Ek(af(Math.atan2(e[6],e[5]))),rotateY:e=>Ek(af(Math.atan2(-e[2],e[0]))),rotateZ:oO,rotate:oO,skewX:e=>af(Math.atan(e[4])),skewY:e=>af(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function uO(e){return e.includes("scale")?1:0}function Ck(e,t){if(!e||e==="none")return uO(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=aye,a=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=rye,a=o}if(!a)return uO(t);const i=r[t],s=a[1].split(",").map(sye);return typeof i=="function"?i(s):s[i]}const iye=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return Ck(n,t)};function sye(e){return parseFloat(e.trim())}const dO=e=>e===pm||e===Tn,oye=new Set(["x","y","z"]),lye=fm.filter(e=>!oye.has(e));function cye(e){const t=[];return lye.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const df={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Ck(t,"x"),y:(e,{transform:t})=>Ck(t,"y")};df.translateX=df.x;df.translateY=df.y;const ff=new Set;let Tk=!1,kk=!1,Ak=!1;function g7(){if(kk){const e=Array.from(ff).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=cye(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([i,s])=>{var o;(o=r.getValue(i))==null||o.set(s)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}kk=!1,Tk=!1,ff.forEach(e=>e.complete(Ak)),ff.clear()}function y7(){ff.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(kk=!0)})}function uye(){Ak=!0,y7(),g7(),Ak=!1}class xR{constructor(t,n,r,a,i,s=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=i,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ff.add(this),Tk||(Tk=!0,ea.read(y7),ea.resolveKeyframes(g7))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const i=a==null?void 0:a.get(),s=t[t.length-1];if(i!==void 0)t[0]=i;else if(r&&n){const o=r.readValue(n,s);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=s),a&&i===void 0&&a.set(t[0])}nye(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),ff.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ff.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const dye=e=>e.startsWith("--");function fye(e,t,n){dye(t)?e.style.setProperty(t,n):e.style[t]=n}function _R(e){let t;return()=>(t===void 0&&(t=e()),t)}const hye=_R(()=>window.ScrollTimeline!==void 0),pye={};function mye(e,t){const n=_R(e);return()=>pye[t]??n()}const b7=mye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zg=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,fO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zg([0,.65,.55,1]),circOut:zg([.55,0,1,.45]),backIn:zg([.31,.01,.66,-.59]),backOut:zg([.33,1.53,.69,.99])};function v7(e,t){if(e)return typeof e=="function"?b7()?n7(e,t):"ease-out":h7(e)?zg(e):Array.isArray(e)?e.map(n=>v7(n,t)||fO.easeOut):fO[e]}function gye(e,t,n,{delay:r=0,duration:a=300,repeat:i=0,repeatType:s="loop",ease:o="easeOut",times:l}={},u=void 0){const d={[t]:n};l&&(d.offset=l);const h=v7(o,a);Array.isArray(h)&&(d.easing=h);const m={delay:r,duration:a,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:s==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),e.animate(d,m)}function w7(e){return typeof e=="function"&&"applyToOptions"in e}function yye({type:e,...t}){return w7(e)&&b7()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class bye extends wR{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:i,allowFlatten:s=!1,finalKeyframe:o,onComplete:l}=t;this.isPseudoElement=!!i,this.allowFlatten=s,this.options=t,eR(typeof t.type!="string");const u=yye(t);this.animation=gye(n,r,a,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=vR(a,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(d):fye(n,r,d),this.animation.cancel()}l==null||l(),this.notifyFinished()},this.animation.oncancel=()=>this.notifyFinished()}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return _l(Number(t))}get time(){return _l(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=xl(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&hye()?(this.animation.timeline=t,Ks):n(this)}}const x7={anticipate:u7,backInOut:c7,circInOut:f7};function vye(e){return e in x7}function wye(e){typeof e.ease=="string"&&vye(e.ease)&&(e.ease=x7[e.ease])}const hO=10;class xye extends bye{constructor(t){wye(t),p7(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:i,...s}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new m7({...s,autoplay:!1}),l=xl(this.finishedTime??this.time);n.setWithVelocity(o.sample(l-hO).value,o.sample(l).value,hO),o.stop()}}const pO=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ed.test(e)||e==="0")&&!e.startsWith("url("));function _ye(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Sye(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],s=pO(a,t),o=pO(i,t);return!s||!o?!1:_ye(e)||(n==="spring"||w7(n))&&r}const Eye=new Set(["opacity","clipPath","filter","transform"]),Cye=_R(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function Tye(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:i,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return Cye()&&n&&Eye.has(n)&&(n!=="transform"||!l)&&!o&&!r&&a!=="mirror"&&i!==0&&s!=="inertia"}const kye=40;class Aye extends wR{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:s="loop",keyframes:o,name:l,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var b,w;this._animation?(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)):(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Zi.now();const m={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:i,repeatType:s,name:l,motionValue:u,element:d,...h},g=(d==null?void 0:d.KeyframeResolver)||xR;this.keyframeResolver=new g(o,(b,w,x)=>this.onKeyframesResolved(b,w,m,!x),l,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:i,type:s,velocity:o,delay:l,isHandoff:u,onUpdate:d}=r;this.resolvedAt=Zi.now(),Sye(t,i,s,o)||((Dc.instantAnimations||!l)&&(d==null||d(vR(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>kye?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},g=!u&&Tye(m)?new xye({...m,element:m.motionValue.owner.current}):new m7(m);g.finished.then(()=>this.notifyFinished()).catch(Ks),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||uye(),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this.animation.cancel()}}const SR=(e,t,n,r={},a,i)=>s=>{const o=fR(r,e)||{},l=o.delay||r.delay||0;let{elapsed:u=0}=r;u=u-xl(l);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-u,onUpdate:m=>{t.set(m),o.onUpdate&&o.onUpdate(m)},onComplete:()=>{s(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:i?void 0:a};c0e(o)||Object.assign(d,l0e(e,d)),d.duration&&(d.duration=xl(d.duration)),d.repeatDelay&&(d.repeatDelay=xl(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),(Dc.instantAnimations||Dc.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!i&&t.get()!==void 0){const m=r0e(d.keyframes,o);if(m!==void 0){ea.update(()=>{d.onUpdate(m),d.onComplete()});return}}return new Aye(d)},_7=new Set(["width","height","top","left","right","bottom",...fm]);function Nye({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function S7(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:s,...o}=t;r&&(i=r);const l=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const d in o){const h=e.getValue(d,e.latestValues[d]??null),m=o[d];if(m===void 0||u&&Nye(u,d))continue;const g={delay:n,...fR(i||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(m)&&m===v&&!g.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const x=K$(e);if(x){const _=window.MotionHandoffAnimation(x,d,ea);_!==null&&(g.startTime=_,b=!0)}}bk(e,d),h.start(SR(d,h,m,e.shouldReduceMotion&&_7.has(d)?{type:!1}:g,e,b));const w=h.animation;w&&l.push(w)}return s&&Promise.all(l).then(()=>{ea.update(()=>{s&&e0e(e,s)})}),l}function Nk(e,t,n={}){var l;const r=ey(e,t,n.type==="exit"?(l=e.presenceContext)==null?void 0:l.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const i=r?()=>Promise.all(S7(e,r,n)):()=>Promise.resolve(),s=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=a;return Rye(e,t,d+u,h,m,n)}:()=>Promise.resolve(),{when:o}=a;if(o){const[u,d]=o==="beforeChildren"?[i,s]:[s,i];return u().then(()=>d())}else return Promise.all([i(),s(n.delay)])}function Rye(e,t,n=0,r=0,a=1,i){const s=[],o=(e.variantChildren.size-1)*r,l=a===1?(u=0)=>u*r:(u=0)=>o-u*r;return Array.from(e.variantChildren).sort(Iye).forEach((u,d)=>{u.notify("AnimationStart",t),s.push(Nk(u,t,{...i,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(s)}function Iye(e,t){return e.sortNodePosition(t)}function jye(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(i=>Nk(e,i,n));r=Promise.all(a)}else if(typeof t=="string")r=Nk(e,t,n);else{const a=typeof t=="function"?ey(e,t,n.custom):t;r=Promise.all(S7(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function E7(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Dye=XN.length;function C7(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?C7(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Dye;n++){const r=XN[n],a=e.props[r];(X0(a)||a===!1)&&(t[r]=a)}return t}const Mye=[...YN].reverse(),Oye=YN.length;function Pye(e){return t=>Promise.all(t.map(({animation:n,options:r})=>jye(e,n,r)))}function Fye(e){let t=Pye(e),n=mO(),r=!0;const a=l=>(u,d)=>{var m;const h=ey(e,d,l==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(h){const{transition:g,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function i(l){t=l(e)}function s(l){const{props:u}=e,d=C7(e.parent)||{},h=[],m=new Set;let g={},v=1/0;for(let w=0;w<Oye;w++){const x=Mye[w],_=n[x],E=u[x]!==void 0?u[x]:d[x],T=X0(E),k=x===l?_.isActive:null;k===!1&&(v=w);let R=E===d[x]&&E!==u[x]&&T;if(R&&r&&e.manuallyAnimateOnMount&&(R=!1),_.protectedKeys={...g},!_.isActive&&k===null||!E&&!_.prevProp||S_(E)||typeof E=="boolean")continue;const j=Lye(_.prevProp,E);let I=j||x===l&&_.isActive&&!R&&T||w>v&&T,P=!1;const O=Array.isArray(E)?E:[E];let U=O.reduce(a(x),{});k===!1&&(U={});const{prevResolvedValues:M={}}=_,W={...M,...U},V=ne=>{I=!0,m.has(ne)&&(P=!0,m.delete(ne)),_.needsAnimating[ne]=!0;const q=e.getValue(ne);q&&(q.liveStyle=!1)};for(const ne in W){const q=U[ne],te=M[ne];if(g.hasOwnProperty(ne))continue;let G=!1;yk(q)&&yk(te)?G=!E7(q,te):G=q!==te,G?q!=null?V(ne):m.add(ne):q!==void 0&&m.has(ne)?V(ne):_.protectedKeys[ne]=!0}_.prevProp=E,_.prevResolvedValues=U,_.isActive&&(g={...g,...U}),r&&e.blockInitialAnimation&&(I=!1),I&&(!(R&&j)||P)&&h.push(...O.map(ne=>({animation:ne,options:{type:x}})))}if(m.size){const w={};if(typeof u.initial!="boolean"){const x=ey(e,Array.isArray(u.initial)?u.initial[0]:u.initial);x&&x.transition&&(w.transition=x.transition)}m.forEach(x=>{const _=e.getBaseTarget(x),E=e.getValue(x);E&&(E.liveStyle=!0),w[x]=_??null}),h.push({animation:w})}let b=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(b=!1),r=!1,b?t(h):Promise.resolve()}function o(l,u){var h;if(n[l].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(m=>{var g;return(g=m.animationState)==null?void 0:g.setActive(l,u)}),n[l].isActive=u;const d=s(l);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:s,setActive:o,setAnimateFunction:i,getState:()=>n,reset:()=>{n=mO(),r=!0}}}function Lye(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!E7(t,e):!1}function Wd(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function mO(){return{animate:Wd(!0),whileInView:Wd(),whileHover:Wd(),whileTap:Wd(),whileDrag:Wd(),whileFocus:Wd(),exit:Wd()}}class hd{constructor(t){this.isMounted=!1,this.node=t}update(){}}class Bye extends hd{constructor(t){super(t),t.animationState||(t.animationState=Fye(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();S_(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let $ye=0;class zye extends hd{constructor(){super(...arguments),this.id=$ye++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Uye={animation:{Feature:Bye},exit:{Feature:zye}};function ay(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const ER=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function ib(e){return{point:{x:e.pageX,y:e.pageY}}}const Vye=e=>t=>ER(t)&&e(t,ib(t));function Jg(e,t,n,r){return ay(e,t,Vye(n),r)}function T7({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Hye({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function qye(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const k7=1e-4,Gye=1-k7,Wye=1+k7,A7=.01,Kye=0-A7,Zye=0+A7;function Ii(e){return e.max-e.min}function Yye(e,t,n){return Math.abs(e-t)<=n}function gO(e,t,n,r=.5){e.origin=r,e.originPoint=Jr(t.min,t.max,e.origin),e.scale=Ii(n)/Ii(t),e.translate=Jr(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Gye&&e.scale<=Wye||isNaN(e.scale))&&(e.scale=1),(e.translate>=Kye&&e.translate<=Zye||isNaN(e.translate))&&(e.translate=0)}function Qg(e,t,n,r){gO(e.x,t.x,n.x,r?r.originX:void 0),gO(e.y,t.y,n.y,r?r.originY:void 0)}function yO(e,t,n){e.min=n.min+t.min,e.max=e.min+Ii(t)}function Xye(e,t,n){yO(e.x,t.x,n.x),yO(e.y,t.y,n.y)}function bO(e,t,n){e.min=t.min-n.min,e.max=e.min+Ii(t)}function e0(e,t,n){bO(e.x,t.x,n.x),bO(e.y,t.y,n.y)}const vO=()=>({translate:0,scale:1,origin:0,originPoint:0}),Qh=()=>({x:vO(),y:vO()}),wO=()=>({min:0,max:0}),ca=()=>({x:wO(),y:wO()});function $s(e){return[e("x"),e("y")]}function LC(e){return e===void 0||e===1}function Rk({scale:e,scaleX:t,scaleY:n}){return!LC(e)||!LC(t)||!LC(n)}function Zd(e){return Rk(e)||N7(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function N7(e){return xO(e.x)||xO(e.y)}function xO(e){return e&&e!=="0%"}function t1(e,t,n){const r=e-n,a=t*r;return n+a}function _O(e,t,n,r,a){return a!==void 0&&(e=t1(e,a,r)),t1(e,n,r)+t}function Ik(e,t=0,n=1,r,a){e.min=_O(e.min,t,n,r,a),e.max=_O(e.max,t,n,r,a)}function R7(e,{x:t,y:n}){Ik(e.x,t.translate,t.scale,t.originPoint),Ik(e.y,n.translate,n.scale,n.originPoint)}const SO=.999999999999,EO=1.0000000000001;function Jye(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let i,s;for(let o=0;o<a;o++){i=n[o],s=i.projectionDelta;const{visualElement:l}=i.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&tp(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,R7(e,s)),r&&Zd(i.latestValues)&&tp(e,i.latestValues))}t.x<EO&&t.x>SO&&(t.x=1),t.y<EO&&t.y>SO&&(t.y=1)}function ep(e,t){e.min=e.min+t,e.max=e.max+t}function CO(e,t,n,r,a=.5){const i=Jr(e.min,e.max,a);Ik(e,t,n,i,r)}function tp(e,t){CO(e.x,t.x,t.scaleX,t.scale,t.originX),CO(e.y,t.y,t.scaleY,t.scale,t.originY)}function I7(e,t){return T7(qye(e.getBoundingClientRect(),t))}function Qye(e,t,n){const r=I7(e,n),{scroll:a}=t;return a&&(ep(r.x,a.offset.x),ep(r.y,a.offset.y)),r}const j7=({current:e})=>e?e.ownerDocument.defaultView:null,TO=(e,t)=>Math.abs(e-t);function ebe(e,t){const n=TO(e.x,t.x),r=TO(e.y,t.y);return Math.sqrt(n**2+r**2)}class D7{constructor(t,n,{transformPagePoint:r,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=$C(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=ebe(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:v}=h,{timestamp:b}=ni;this.history.push({...v,timestamp:b});const{onStart:w,onMove:x}=this.handlers;m||(w&&w(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=BC(m,this.transformPagePoint),ea.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:v,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=$C(h.type==="pointercancel"?this.lastMoveEventInfo:BC(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,w),v&&v(h,w)},!ER(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=a||window;const s=ib(t),o=BC(s,this.transformPagePoint),{point:l}=o,{timestamp:u}=ni;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,$C(o,this.history)),this.removeListeners=rb(Jg(this.contextWindow,"pointermove",this.handlePointerMove),Jg(this.contextWindow,"pointerup",this.handlePointerUp),Jg(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Qu(this.updatePoint)}}function BC(e,t){return t?{point:t(e.point)}:e}function kO(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $C({point:e},t){return{point:e,delta:kO(e,M7(t)),offset:kO(e,tbe(t)),velocity:nbe(t,.1)}}function tbe(e){return e[0]}function M7(e){return e[e.length-1]}function nbe(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=M7(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>xl(t)));)n--;if(!r)return{x:0,y:0};const i=_l(a.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const s={x:(a.x-r.x)/i,y:(a.y-r.y)/i};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function rbe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Jr(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Jr(n,e,r.max):Math.min(e,n)),e}function AO(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function abe(e,{top:t,left:n,bottom:r,right:a}){return{x:AO(e.x,n,a),y:AO(e.y,t,r)}}function NO(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function ibe(e,t){return{x:NO(e.x,t.x),y:NO(e.y,t.y)}}function sbe(e,t){let n=.5;const r=Ii(e),a=Ii(t);return a>r?n=ry(t.min,t.max-r,e.min):r>a&&(n=ry(e.min,e.max-a,t.min)),Mc(0,1,n)}function obe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const jk=.35;function lbe(e=jk){return e===!1?e=0:e===!0&&(e=jk),{x:RO(e,"left","right"),y:RO(e,"top","bottom")}}function RO(e,t,n){return{min:IO(e,t),max:IO(e,n)}}function IO(e,t){return typeof e=="number"?e:e[t]||0}const ho={x:!1,y:!1};function O7(){return ho.x||ho.y}function cbe(e){return e==="x"||e==="y"?ho[e]?null:(ho[e]=!0,()=>{ho[e]=!1}):ho.x||ho.y?null:(ho.x=ho.y=!0,()=>{ho.x=ho.y=!1})}const ube=new WeakMap;class dbe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ca(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ib(d).point)},i=(d,h)=>{const{drag:m,dragPropagation:g,onDragStart:v}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=cbe(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$s(w=>{let x=this.getAxisMotionValue(w).get()||0;if(wl.test(x)){const{projection:_}=this.visualElement;if(_&&_.layout){const E=_.layout.layoutBox[w];E&&(x=Ii(E)*(parseFloat(x)/100))}}this.originPoint[w]=x}),v&&ea.postRender(()=>v(d,h)),bk(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},s=(d,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:v,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:w}=h;if(g&&this.currentDirection===null){this.currentDirection=fbe(w),this.currentDirection!==null&&v&&v(this.currentDirection);return}this.updateAxis("x",h.point,w),this.updateAxis("y",h.point,w),this.visualElement.render(),b&&b(d,h)},o=(d,h)=>this.stop(d,h),l=()=>$s(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)==null?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new D7(t,{onSessionStart:a,onStart:i,onMove:s,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:j7(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&ea.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!_w(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let s=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(s=rbe(s,this.constraints[t],this.elastic[t])),i.set(s)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,a=this.constraints;t&&Xh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=abe(r.layoutBox,t):this.constraints=!1,this.elastic=lbe(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$s(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=obe(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xh(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Qye(r,a.root,this.visualElement.getTransformPagePoint());let s=ibe(a.layout.layoutBox,i);if(n){const o=n(Hye(s));this.hasMutatedConstraints=!!o,o&&(s=T7(o))}return s}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=$s(d=>{if(!_w(d,n,this.currentDirection))return;let h=l&&l[d]||{};s&&(h={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,v={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return bk(this.visualElement,t),r.start(SR(t,r,0,n,this.visualElement,!1))}stopAnimation(){$s(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){$s(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){$s(n=>{const{drag:r}=this.getProps();if(!_w(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(n);if(a&&a.layout){const{min:s,max:o}=a.layout.layoutBox[n];i.set(t[n]-Jr(s,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xh(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};$s(s=>{const o=this.getAxisMotionValue(s);if(o&&this.constraints!==!1){const l=o.get();a[s]=sbe({min:l,max:l},this.constraints[s])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$s(s=>{if(!_w(s,t,null))return;const o=this.getAxisMotionValue(s),{min:l,max:u}=this.constraints[s];o.set(Jr(l,u,a[s]))})}addListeners(){if(!this.visualElement.current)return;ube.set(this.visualElement,this);const t=this.visualElement.current,n=Jg(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xh(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ea.read(r);const s=ay(window,"resize",()=>this.scalePositionWithinConstraints()),o=a.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&($s(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=l[d].translate,h.set(h.get()+l[d].translate))}),this.visualElement.render())});return()=>{s(),n(),i(),o&&o()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:s=jk,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:i,dragElastic:s,dragMomentum:o}}}function _w(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function fbe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class hbe extends hd{constructor(t){super(t),this.removeGroupControls=Ks,this.removeListeners=Ks,this.controls=new dbe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ks}unmount(){this.removeGroupControls(),this.removeListeners()}}const jO=e=>(t,n)=>{e&&ea.postRender(()=>e(t,n))};class pbe extends hd{constructor(){super(...arguments),this.removePointerDownListener=Ks}onPointerDown(t){this.session=new D7(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:j7(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:jO(t),onStart:jO(n),onMove:r,onEnd:(i,s)=>{delete this.session,a&&ea.postRender(()=>a(i,s))}}}mount(){this.removePointerDownListener=Jg(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function DO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Mg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Tn.test(e))e=parseFloat(e);else return e;const n=DO(e,t.target.x),r=DO(e,t.target.y);return`${n}% ${r}%`}},mbe={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=ed.parse(e);if(a.length>5)return r;const i=ed.createTransformer(e),s=typeof a[0]!="number"?1:0,o=n.x.scale*t.x,l=n.y.scale*t.y;a[0+s]/=o,a[1+s]/=l;const u=Jr(o,l,.5);return typeof a[2+s]=="number"&&(a[2+s]/=u),typeof a[3+s]=="number"&&(a[3+s]/=u),i(a)}};class gbe extends C.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:i}=t;Age(ybe),i&&(n.group&&n.group.add(i),r&&r.register&&a&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Hw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:i}=this.props,{projection:s}=r;return s&&(s.isPresent=i,a||t.layoutDependency!==n||n===void 0||t.isPresent!==i?s.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?s.promote():s.relegate()||ea.postRender(()=>{const o=s.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),QN.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function P7(e){const[t,n]=R$(),r=C.useContext(GN);return p.jsx(gbe,{...e,layoutGroup:r,switchLayoutGroup:C.useContext(P$),isPresent:t,safeToRemove:n})}const ybe={borderRadius:{...Mg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Mg,borderTopRightRadius:Mg,borderBottomLeftRadius:Mg,borderBottomRightRadius:Mg,boxShadow:mbe};function bbe(e,t,n){const r=gi(e)?e:ty(e);return r.start(SR("",r,t,n)),r.animation}function vbe(e){return e instanceof SVGElement&&e.tagName!=="svg"}const wbe=(e,t)=>e.depth-t.depth;class xbe{constructor(){this.children=[],this.isDirty=!1}add(t){cR(this.children,t),this.isDirty=!0}remove(t){uR(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(wbe),this.isDirty=!1,this.children.forEach(t)}}function _be(e,t){const n=Zi.now(),r=({timestamp:a})=>{const i=a-n;i>=t&&(Qu(r),e(i-t))};return ea.setup(r,!0),()=>Qu(r)}const F7=["TopLeft","TopRight","BottomLeft","BottomRight"],Sbe=F7.length,MO=e=>typeof e=="string"?parseFloat(e):e,OO=e=>typeof e=="number"||Tn.test(e);function Ebe(e,t,n,r,a,i){a?(e.opacity=Jr(0,n.opacity??1,Cbe(r)),e.opacityExit=Jr(t.opacity??1,0,Tbe(r))):i&&(e.opacity=Jr(t.opacity??1,n.opacity??1,r));for(let s=0;s<Sbe;s++){const o=`border${F7[s]}Radius`;let l=PO(t,o),u=PO(n,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||OO(l)===OO(u)?(e[o]=Math.max(Jr(MO(l),MO(u),r),0),(wl.test(u)||wl.test(l))&&(e[o]+="%")):e[o]=u}(t.rotate||n.rotate)&&(e.rotate=Jr(t.rotate||0,n.rotate||0,r))}function PO(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Cbe=L7(0,.5,d7),Tbe=L7(.5,.95,Ks);function L7(e,t,n){return r=>r<e?0:r>t?1:n(ry(e,t,r))}function FO(e,t){e.min=t.min,e.max=t.max}function Ls(e,t){FO(e.x,t.x),FO(e.y,t.y)}function LO(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function BO(e,t,n,r,a){return e-=t,e=t1(e,1/n,r),a!==void 0&&(e=t1(e,1/a,r)),e}function kbe(e,t=0,n=1,r=.5,a,i=e,s=e){if(wl.test(t)&&(t=parseFloat(t),t=Jr(s.min,s.max,t/100)-s.min),typeof t!="number")return;let o=Jr(i.min,i.max,r);e===i&&(o-=t),e.min=BO(e.min,t,n,o,a),e.max=BO(e.max,t,n,o,a)}function $O(e,t,[n,r,a],i,s){kbe(e,t[n],t[r],t[a],t.scale,i,s)}const Abe=["x","scaleX","originX"],Nbe=["y","scaleY","originY"];function zO(e,t,n,r){$O(e.x,t,Abe,n?n.x:void 0,r?r.x:void 0),$O(e.y,t,Nbe,n?n.y:void 0,r?r.y:void 0)}function UO(e){return e.translate===0&&e.scale===1}function B7(e){return UO(e.x)&&UO(e.y)}function VO(e,t){return e.min===t.min&&e.max===t.max}function Rbe(e,t){return VO(e.x,t.x)&&VO(e.y,t.y)}function HO(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $7(e,t){return HO(e.x,t.x)&&HO(e.y,t.y)}function qO(e){return Ii(e.x)/Ii(e.y)}function GO(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Ibe{constructor(){this.members=[]}add(t){cR(this.members,t),t.scheduleRender()}remove(t){if(uR(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jbe(e,t,n){let r="";const a=e.x.translate/t.x,i=e.y.translate/t.y,s=(n==null?void 0:n.z)||0;if((a||i||s)&&(r=`translate3d(${a}px, ${i}px, ${s}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:v}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),v&&(r+=`skewY(${v}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const zC=["","X","Y","Z"],Dbe={visibility:"hidden"},WO=1e3;let Mbe=0;function UC(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function z7(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=K$(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ea,!(a||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&z7(r)}function U7({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(s={},o=t==null?void 0:t()){this.id=Mbe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Fbe),this.nodes.forEach(Ube),this.nodes.forEach(Vbe),this.nodes.forEach(Lbe)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=s,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new xbe)}addEventListener(s,o){return this.eventHandlers.has(s)||this.eventHandlers.set(s,new dR),this.eventHandlers.get(s).add(o)}notifyListeners(s,...o){const l=this.eventHandlers.get(s);l&&l.notify(...o)}hasListeners(s){return this.eventHandlers.has(s)}mount(s){if(this.instance)return;this.isSVG=vbe(s),this.instance=s;const{layoutId:o,layout:l,visualElement:u}=this.options;if(u&&!u.current&&u.mount(s),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||o)&&(this.isLayoutDirty=!0),e){let d;const h=()=>this.root.updateBlockedByResize=!1;e(s,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=_be(h,250),Hw.hasAnimatedSinceResize&&(Hw.hasAnimatedSinceResize=!1,this.nodes.forEach(ZO))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&u&&(o||l)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||Kbe,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=u.getProps(),x=!this.targetLayout||!$7(this.targetLayout,g),_=!h&&m;if(this.options.layoutRoot||this.resumeFrom||_||h&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const E={...fR(v,"layout"),onPlay:b,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else h||ZO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const s=this.getStack();s&&s.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Qu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Hbe),this.animationId++)}getTransformTemplate(){const{visualElement:s}=this.options;return s&&s.getProps().transformTemplate}willUpdate(s=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&z7(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),s&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(KO);return}this.isUpdating||this.nodes.forEach($be),this.isUpdating=!1,this.nodes.forEach(zbe),this.nodes.forEach(Obe),this.nodes.forEach(Pbe),this.clearAllSnapshots();const o=Zi.now();ni.delta=Mc(0,1e3/60,o-ni.timestamp),ni.timestamp=o,ni.isProcessing=!0,MC.update.process(ni),MC.preRender.process(ni),MC.render.process(ni),ni.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,QN.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Bbe),this.sharedNodes.forEach(qbe)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ea.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ea.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ii(this.snapshot.measuredBox.x)&&!Ii(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const s=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ca(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,s?s.layoutBox:void 0)}updateScroll(s="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===s&&(o=!1),o&&this.instance){const l=r(this.instance);this.scroll={animationId:this.root.animationId,phase:s,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!a)return;const s=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!B7(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;s&&this.instance&&(o||Zd(this.latestValues)||d)&&(a(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(s=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return s&&(l=this.removeTransform(l)),Zbe(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:s}=this.options;if(!s)return ca();const o=s.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(Ybe))){const{scroll:d}=this.root;d&&(ep(o.x,d.offset.x),ep(o.y,d.offset.y))}return o}removeElementScroll(s){var l;const o=ca();if(Ls(o,s),(l=this.scroll)!=null&&l.wasRoot)return o;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&Ls(o,s),ep(o.x,h.offset.x),ep(o.y,h.offset.y))}return o}applyTransform(s,o=!1){const l=ca();Ls(l,s);for(let u=0;u<this.path.length;u++){const d=this.path[u];!o&&d.options.layoutScroll&&d.scroll&&d!==d.root&&tp(l,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Zd(d.latestValues)&&tp(l,d.latestValues)}return Zd(this.latestValues)&&tp(l,this.latestValues),l}removeTransform(s){const o=ca();Ls(o,s);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!Zd(u.latestValues))continue;Rk(u.latestValues)&&u.updateSnapshot();const d=ca(),h=u.measurePageBox();Ls(d,h),zO(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Zd(this.latestValues)&&zO(o,this.latestValues),o}setTargetDelta(s){this.targetDelta=s,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(s){this.options={...this.options,...s,crossfade:s.crossfade!==void 0?s.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ni.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(s=!1){var m;const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==o;if(!(s||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=ni.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ca(),this.relativeTargetOrigin=ca(),e0(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Ls(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ca(),this.targetWithTransforms=ca()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Xye(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ls(this.target,this.layout.layoutBox),R7(this.target,this.targetDelta)):Ls(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ca(),this.relativeTargetOrigin=ca(),e0(this.relativeTargetOrigin,this.target,g.target),Ls(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Rk(this.parent.latestValues)||N7(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const s=this.getLead(),o=!!this.resumingFrom||this!==s;let l=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(l=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===ni.timestamp&&(l=!1),l)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;Ls(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Jye(this.layoutCorrected,this.treeScale,this.path,o),s.layout&&!s.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(s.target=s.layout.layoutBox,s.targetWithTransforms=ca());const{target:g}=s;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LO(this.prevProjectionDelta.x,this.projectionDelta.x),LO(this.prevProjectionDelta.y,this.projectionDelta.y)),Qg(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!GO(this.projectionDelta.x,this.prevProjectionDelta.x)||!GO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(s=!0){var o;if((o=this.options.visualElement)==null||o.scheduleRender(),s){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Qh(),this.projectionDelta=Qh(),this.projectionDeltaWithTransform=Qh()}setAnimationOrigin(s,o=!1){const l=this.snapshot,u=l?l.latestValues:{},d={...this.latestValues},h=Qh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const m=ca(),g=l?l.source:void 0,v=this.layout?this.layout.source:void 0,b=g!==v,w=this.getStack(),x=!w||w.members.length<=1,_=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(Wbe));this.animationProgress=0;let E;this.mixTargetDelta=T=>{const k=T/1e3;YO(h.x,s.x,k),YO(h.y,s.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(e0(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Gbe(this.relativeTarget,this.relativeTargetOrigin,m,k),E&&Rbe(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ca()),Ls(E,this.relativeTarget)),b&&(this.animationValues=d,Ebe(d,u,this.latestValues,k,_,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(s){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ea.update(()=>{Hw.hasAnimatedSinceResize=!0,this.currentAnimation=bbe(0,WO,{...s,onUpdate:o=>{this.mixTargetDelta(o),s.onUpdate&&s.onUpdate(o)},onStop:()=>{},onComplete:()=>{s.onComplete&&s.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const s=this.getStack();s&&s.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(WO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const s=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:d}=s;if(!(!o||!l||!u)){if(this!==s&&this.layout&&u&&V7(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||ca();const h=Ii(this.layout.layoutBox.x);l.x.min=s.target.x.min,l.x.max=l.x.min+h;const m=Ii(this.layout.layoutBox.y);l.y.min=s.target.y.min,l.y.max=l.y.min+m}Ls(o,l),tp(o,d),Qg(this.projectionDeltaWithTransform,this.layoutCorrected,o,d)}}registerSharedNode(s,o){this.sharedNodes.has(s)||this.sharedNodes.set(s,new Ibe),this.sharedNodes.get(s).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const s=this.getStack();return s?s.lead===this:!0}getLead(){var o;const{layoutId:s}=this.options;return s?((o=this.getStack())==null?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:s}=this.options;return s?(o=this.getStack())==null?void 0:o.prevLead:void 0}getStack(){const{layoutId:s}=this.options;if(s)return this.root.sharedNodes.get(s)}promote({needsReset:s,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),s&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const s=this.getStack();return s?s.relegate(this):!1}resetSkewAndRotation(){const{visualElement:s}=this.options;if(!s)return;let o=!1;const{latestValues:l}=s;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&UC("z",s,u,this.animationValues);for(let d=0;d<zC.length;d++)UC(`rotate${zC[d]}`,s,u,this.animationValues),UC(`skew${zC[d]}`,s,u,this.animationValues);s.render();for(const d in u)s.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);s.scheduleRender()}getProjectionStyles(s){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Dbe;const o={visibility:""},l=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,o.opacity="",o.pointerEvents=Uw(s==null?void 0:s.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none",o;const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Uw(s==null?void 0:s.pointerEvents)||""),this.hasProjected&&!Zd(this.latestValues)&&(g.transform=l?l({},""):"none",this.hasProjected=!1),g}const d=u.animationValues||u.latestValues;this.applyTransformsToTarget(),o.transform=jbe(this.projectionDeltaWithTransform,this.treeScale,d),l&&(o.transform=l(d,o.transform));const{x:h,y:m}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${m.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const g in J0){if(d[g]===void 0)continue;const{correct:v,applyTo:b,isCSSVariable:w}=J0[g],x=o.transform==="none"?d[g]:v(d[g],u);if(b){const _=b.length;for(let E=0;E<_;E++)o[b[E]]=x}else w?this.options.visualElement.renderState.vars[g]=x:o[g]=x}return this.options.layoutId&&(o.pointerEvents=u===this?Uw(s==null?void 0:s.pointerEvents)||"":"none"),o}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(s=>{var o;return(o=s.currentAnimation)==null?void 0:o.stop()}),this.root.nodes.forEach(KO),this.root.sharedNodes.clear()}}}function Obe(e){e.updateLayout()}function Pbe(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?$s(h=>{const m=s?t.measuredBox[h]:t.layoutBox[h],g=Ii(m);m.min=r[h].min,m.max=m.min+g}):V7(i,t.layoutBox,r)&&$s(h=>{const m=s?t.measuredBox[h]:t.layoutBox[h],g=Ii(r[h]);m.max=m.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=Qh();Qg(o,r,t.layoutBox);const l=Qh();s?Qg(l,e.applyTransform(a,!0),t.measuredBox):Qg(l,r,t.layoutBox);const u=!B7(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const v=ca();e0(v,t.layoutBox,m.layoutBox);const b=ca();e0(b,r,g.layoutBox),$7(v,b)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function Fbe(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Lbe(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Bbe(e){e.clearSnapshot()}function KO(e){e.clearMeasurements()}function $be(e){e.isLayoutDirty=!1}function zbe(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ZO(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Ube(e){e.resolveTargetDelta()}function Vbe(e){e.calcProjection()}function Hbe(e){e.resetSkewAndRotation()}function qbe(e){e.removeLeadSnapshot()}function YO(e,t,n){e.translate=Jr(t.translate,0,n),e.scale=Jr(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function XO(e,t,n,r){e.min=Jr(t.min,n.min,r),e.max=Jr(t.max,n.max,r)}function Gbe(e,t,n,r){XO(e.x,t.x,n.x,r),XO(e.y,t.y,n.y,r)}function Wbe(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const Kbe={duration:.45,ease:[.4,0,.1,1]},JO=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),QO=JO("applewebkit/")&&!JO("chrome/")?Math.round:Ks;function eP(e){e.min=QO(e.min),e.max=QO(e.max)}function Zbe(e){eP(e.x),eP(e.y)}function V7(e,t,n){return e==="position"||e==="preserve-aspect"&&!Yye(qO(t),qO(n),.2)}function Ybe(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const Xbe=U7({attachResizeListener:(e,t)=>ay(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),VC={current:void 0},H7=U7({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!VC.current){const e=new Xbe({});e.mount(window),e.setOptions({layoutScroll:!0}),VC.current=e}return VC.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Jbe={pan:{Feature:pbe},drag:{Feature:hbe,ProjectionNode:H7,MeasureLayout:P7}};function Qbe(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const a=(n==null?void 0:n[e])??r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}function q7(e,t){const n=Qbe(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function tP(e){return!(e.pointerType==="touch"||O7())}function eve(e,t,n={}){const[r,a,i]=q7(e,n),s=o=>{if(!tP(o))return;const{target:l}=o,u=t(l,o);if(typeof u!="function"||!l)return;const d=h=>{tP(h)&&(u(h),l.removeEventListener("pointerleave",d))};l.addEventListener("pointerleave",d,a)};return r.forEach(o=>{o.addEventListener("pointerenter",s,a)}),i}function nP(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,i=r[a];i&&ea.postRender(()=>i(t,ib(t)))}class tve extends hd{mount(){const{current:t}=this.node;t&&(this.unmount=eve(t,(n,r)=>(nP(this.node,r,"Start"),a=>nP(this.node,a,"End"))))}unmount(){}}class nve extends hd{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rb(ay(this.node.current,"focus",()=>this.onFocus()),ay(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const G7=(e,t)=>t?e===t?!0:G7(e,t.parentElement):!1,rve=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ave(e){return rve.has(e.tagName)||e.tabIndex!==-1}const Ug=new WeakSet;function rP(e){return t=>{t.key==="Enter"&&e(t)}}function HC(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const ive=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=rP(()=>{if(Ug.has(n))return;HC(n,"down");const a=rP(()=>{HC(n,"up")}),i=()=>HC(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function aP(e){return ER(e)&&!O7()}function sve(e,t,n={}){const[r,a,i]=q7(e,n),s=o=>{const l=o.currentTarget;if(!aP(o)||Ug.has(l))return;Ug.add(l);const u=t(l,o),d=(g,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",m),!(!aP(g)||!Ug.has(l))&&(Ug.delete(l),typeof u=="function"&&u(g,{success:v}))},h=g=>{d(g,l===window||l===document||n.useGlobalTarget||G7(l,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",h,a),window.addEventListener("pointercancel",m,a)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",s,a),o instanceof HTMLElement&&(o.addEventListener("focus",u=>ive(u,a)),!ave(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),i}function iP(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),i=r[a];i&&ea.postRender(()=>i(t,ib(t)))}class ove extends hd{mount(){const{current:t}=this.node;t&&(this.unmount=sve(t,(n,r)=>(iP(this.node,r,"Start"),(a,{success:i})=>iP(this.node,a,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Dk=new WeakMap,qC=new WeakMap,lve=e=>{const t=Dk.get(e.target);t&&t(e)},cve=e=>{e.forEach(lve)};function uve({root:e,...t}){const n=e||document;qC.has(n)||qC.set(n,{});const r=qC.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(cve,{root:e,...t})),r[a]}function dve(e,t,n){const r=uve(t);return Dk.set(e,n),r.observe(e),()=>{Dk.delete(e),r.unobserve(e)}}const fve={some:0,all:1};class hve extends hd{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:i}=t,s={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:fve[a]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(l)};return dve(this.node.current,s,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(pve(t,n))&&this.startObserver()}unmount(){}}function pve({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const mve={inView:{Feature:hve},tap:{Feature:ove},focus:{Feature:nve},hover:{Feature:tve}},gve={layout:{ProjectionNode:H7,MeasureLayout:P7}},Mk={current:null},W7={current:!1};function yve(){if(W7.current=!0,!!KN)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Mk.current=e.matches;e.addListener(t),t()}else Mk.current=!1}const bve=new WeakMap;function vve(e,t,n){for(const r in t){const a=t[r],i=n[r];if(gi(a))e.addValue(r,a);else if(gi(i))e.addValue(r,ty(a,{owner:e}));else if(i!==a)if(e.hasValue(r)){const s=e.getValue(r);s.liveStyle===!0?s.jump(a):s.hasAnimated||s.set(a)}else{const s=e.getStaticValue(r);e.addValue(r,ty(s!==void 0?s:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const K7=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),Z7=e=>/^0[^.\s]+$/u.test(e),wve={test:e=>e==="auto",parse:e=>e},Y7=e=>t=>t.test(e),X7=[pm,Tn,wl,Tu,Rge,Nge,wve],sP=e=>X7.find(Y7(e)),xve=[...X7,hi,ed],_ve=e=>xve.find(Y7(e)),Sve=new Set(["brightness","contrast","saturate","opacity"]);function Eve(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(hR)||[];if(!r)return e;const a=n.replace(r,"");let i=Sve.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+a+")"}const Cve=/\b([a-z-]*)\(.*?\)/gu,Ok={...ed,getAnimatableNone:e=>{const t=e.match(Cve);return t?t.map(Eve).join(" "):e}},Tve={...rR,color:hi,backgroundColor:hi,outlineColor:hi,fill:hi,stroke:hi,borderColor:hi,borderTopColor:hi,borderRightColor:hi,borderBottomColor:hi,borderLeftColor:hi,filter:Ok,WebkitFilter:Ok},J7=e=>Tve[e];function Q7(e,t){let n=J7(e);return n!==Ok&&(n=ed),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const oP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class kve{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:i,visualState:s},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xR,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Zi.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ea.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=s;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=o,this.blockInitialAnimation=!!i,this.isControllingVariants=E_(n),this.isVariantNode=M$(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];l[m]!==void 0&&gi(g)&&g.set(l[m],!1)}}mount(t){this.current=t,bve.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),W7.current||yve(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Mk.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Qu(this.notifyUpdate),Qu(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=hm.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&ea.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Pp){const n=Pp[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ca()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<oP.length;r++){const a=oP[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,s=t[i];s&&(this.propEventSubscriptions[a]=this.on(a,s))}this.prevMotionValues=vve(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ty(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(K7(r)||Z7(r))?r=parseFloat(r):!_ve(r)&&ed.test(n)&&(r=Q7(t,n)),this.setBaseTarget(t,gi(r)?r.get():r)),gi(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=oR(this.props,n,(i=this.presenceContext)==null?void 0:i.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!gi(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new dR),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}const Ave=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Nve(e){const t=Ave.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function ez(e,t,n=1){const[r,a]=Nve(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const s=i.trim();return K7(s)?parseFloat(s):s}return nR(a)?ez(a,t,n+1):a}function Rve(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Z7(e):!0}const Ive=new Set(["auto","none","0"]);function jve(e,t,n){let r=0,a;for(;r<e.length&&!a;){const i=e[r];typeof i=="string"&&!Ive.has(i)&&ny(i).values.length&&(a=e[r]),r++}if(a&&n)for(const i of t)e[i]=Q7(n,a)}class Dve extends xR{constructor(t,n,r,a,i){super(t,n,r,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),nR(u))){const d=ez(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!_7.has(r)||t.length!==2)return;const[a,i]=t,s=sP(a),o=sP(i);if(s!==o)if(dO(s)&&dO(o))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else df[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||Rve(t[a]))&&r.push(a);r.length&&jve(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=df[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var o;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const i=r.length-1,s=r[i];r[i]=df[n](t.measureViewportBox(),window.getComputedStyle(t.current)),s!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=s),(o=this.removedTransforms)!=null&&o.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}class tz extends kve{constructor(){super(...arguments),this.KeyframeResolver=Dve}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;gi(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nz(e,{style:t,vars:n},r,a){Object.assign(e.style,t,a&&a.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}function Mve(e){return window.getComputedStyle(e)}class Ove extends tz{constructor(){super(...arguments),this.type="html",this.renderInstance=nz}readValueFromInstance(t,n){if(hm.has(n))return iye(t,n);{const r=Mve(t),a=(tR(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return I7(t,n)}build(t,n,r){aR(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return lR(t,n,r)}}const rz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Pve(e,t,n,r){nz(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(rz.has(a)?a:JN(a),t.attrs[a])}class Fve extends tz{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ca}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(hm.has(n)){const r=J7(n);return r&&r.default||0}return n=rz.has(n)?n:JN(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return G$(t,n,r)}build(t,n,r){U$(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){Pve(t,n,r,a)}mount(t){this.isSVGTag=H$(t.tagName),super.mount(t)}}const Lve=(e,t)=>sR(e)?new Fve(t):new Ove(t,{allowProjection:e!==C.Fragment}),Bve=Kge({...Uye,...mve,...Jbe,...gve},Lve),go=pge(Bve),$ve=".litechat/conversations",az="/synced_repos";async function zve(e,t,n){n(t.id,"syncing");const r=nr(`${az}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let s=!1;try{await e.promises.stat(kl(r,".git")),s=!0}catch(o){if(o.code==="ENOENT")s=!1;else throw o}s?(qe.info(`Pulling latest changes for "${t.name}"...`),await f_(r,i,a,{fsInstance:e}),qe.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(qe.info(`Cloning repository "${t.name}"...`),await TB(r,t.remoteUrl,i,a,{fsInstance:e}),qe.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(s){console.error(`Failed to initialize/sync repository ${t.name}:`,s),n(t.id,"error")}}async function Uve(e,t,n,r,a,i,s){var h,m;r(t.id,"syncing");const o=nr(`${az}/${n.id}`),l=kl(o,$ve,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(kl(o,".git"))}catch(x){if(x.code==="ENOENT"){qe.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}qe.info(`Pulling latest changes for "${n.name}"...`),await f_(o,d,u,{fsInstance:e});let g=null,v=null;try{const x=await fd(l,{fsInstance:e}),_=new TextDecoder().decode(x);g=JSON.parse(_),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),qe.warning(`Could not read remote version of conversation: ${x.message}`))}const b=t.updatedAt.getTime(),w=((m=t.lastSyncedAt)==null?void 0:m.getTime())??0;if(!g||b>(v??0)||b>w&&b>=(v??0)){qe.info("Local changes detected. Pushing to remote...");const x=await _t.loadInteractionsForConversation(t.id),{lastSyncedAt:_,...E}=t,T=JSON.stringify({conversation:E,interactions:x},null,2);await h_(l,T,{fsInstance:e}),await NN(o,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await RN(o,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),qe.success("Conversation synced successfully (pushed).")}else if(v&&v>b){qe.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await _t.saveConversation(x),await _t.deleteInteractionsForConversation(t.id);const _=g.interactions.map(E=>_t.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(_),i()===t.id&&s()==="conversation"&&await On.getState().loadInteractions(t.id),r(t.id,"idle"),qe.success("Conversation synced successfully (pulled).")}else qe.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const ri=Js(Qs((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{var l;const r=yi(),a=new Date,i=n.parentId?((l=t().getProjectById(n.parentId))==null?void 0:l.path)??"/":"/",s=nr(`${i}/${n.name.replace(/\s+/g,"-").toLowerCase()}-${r.substring(0,4)}`),o={id:r,path:s,createdAt:a,updatedAt:a,name:n.name,parentId:n.parentId??null,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,defaultTagIds:n.defaultTagIds??null,defaultRuleIds:n.defaultRuleIds??null,metadata:n.metadata??{}};try{return await _t.saveProject(o),e(u=>{u.projects.unshift(o),u.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())}),Et.emit(St.PROJECT_ADDED,{project:o}),r}catch(u){throw console.error("ProjectStore: Error adding project",u),e({error:"Failed to save new project"}),u}},updateProject:async(n,r)=>{var s;const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};if(r.name&&r.name!==a.name){const o=a.parentId?((s=t().getProjectById(a.parentId))==null?void 0:s.path)??"/":"/";i.path=nr(`${o}/${r.name.replace(/\s+/g,"-").toLowerCase()}-${n.substring(0,4)}`)}try{await _t.saveProject(i),e(o=>{const l=o.projects.findIndex(u=>u.id===n);l!==-1&&(o.projects[l]=i,o.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))}),Et.emit(St.PROJECT_UPDATED,{projectId:n,updates:i})}catch(o){throw console.error("ProjectStore: Error updating project",o),e({error:"Failed to save project update"}),o}},deleteProject:async n=>{const r=t().projects.find(s=>s.id===n);if(!r)return;const a=new Set,i=s=>{a.add(s),t().projects.filter(o=>o.parentId===s).forEach(o=>i(o.id))};i(n);try{await _t.deleteProject(n),e(s=>({projects:s.projects.filter(o=>!a.has(o.id))})),hn.getState()._unlinkConversationsFromProjects(Array.from(a)),Et.emit(St.PROJECT_DELETED,{projectId:n}),qe.success(`Project "${r.name}" and its contents deleted.`)}catch(s){throw console.error("ProjectStore: Error deleting project",s),e({error:"Failed to delete project"}),s}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getTopLevelProjectId:n=>{if(!n)return null;let r=t().getProjectById(n);if(!r)return null;for(;r.parentId;){const a=t().getProjectById(r.parentId);if(!a)break;r=a}return r.id},getEffectiveProjectSettings:n=>{const r=ar.getState(),a=Hn.getState().selectedModelId,i={systemPrompt:r.globalSystemPrompt,modelId:a,temperature:r.temperature,maxTokens:r.maxTokens,topP:r.topP,topK:r.topK,presencePenalty:r.presencePenalty,frequencyPenalty:r.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null};if(!n)return i;const s=t().getProjectById(n);if(!s)return i;const o=s.parentId?t().getEffectiveProjectSettings(s.parentId):i;return{systemPrompt:s.systemPrompt!==null&&s.systemPrompt!==void 0?s.systemPrompt:o.systemPrompt,modelId:s.modelId!==null&&s.modelId!==void 0?s.modelId:o.modelId,temperature:s.temperature!==null&&s.temperature!==void 0?s.temperature:o.temperature,maxTokens:s.maxTokens!==null&&s.maxTokens!==void 0?s.maxTokens:o.maxTokens,topP:s.topP!==null&&s.topP!==void 0?s.topP:o.topP,topK:s.topK!==null&&s.topK!==void 0?s.topK:o.topK,presencePenalty:s.presencePenalty!==null&&s.presencePenalty!==void 0?s.presencePenalty:o.presencePenalty,frequencyPenalty:s.frequencyPenalty!==null&&s.frequencyPenalty!==void 0?s.frequencyPenalty:o.frequencyPenalty,defaultTagIds:s.defaultTagIds!==null&&s.defaultTagIds!==void 0?s.defaultTagIds:o.defaultTagIds,defaultRuleIds:s.defaultRuleIds!==null&&s.defaultRuleIds!==void 0?s.defaultRuleIds:o.defaultRuleIds}}}))),Sw=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},Vve=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${fk(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${fk(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,s,o,l,u,d,h;((a=r.prompt)!=null&&a.content||(o=(s=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:s.attachedFiles)!=null&&o.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(m=>{n+=`- ${m.name} (${m.type}, ${P0(m.size)}) ${m.source==="vfs"?`(VFS: ${m.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class np{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const s=i.conversation,o=i.interactions;if(!s.id||!s.title||!s.createdAt||!s.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:s.title||"Imported Chat",metadata:s.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=o.map(d=>_t.saveInteraction({...d,conversationId:l,id:yi()}));await Promise.all(u),await r(l,"conversation"),qe.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),qe.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=hn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await _t.loadInteractionsForConversation(t);let i,s;const o=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.json`}else if(n==="md"){const l=Vve(r,a);i=new Blob([l],{type:"text/markdown"}),s=`litechat_conversation_${o}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");Sw(i,s),qe.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),qe.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=ri.getState(),{conversations:a}=hn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const s=async m=>{const g=n.find(x=>x.id===m);if(!g)throw new Error(`Project ${m} not found in state.`);const v=n.filter(x=>x.parentId===m),b=a.filter(x=>x.projectId===m),w=[];for(const x of v)w.push(await s(x.id));for(const x of b){const _=await _t.loadInteractionsForConversation(x.id);w.push({conversation:x,interactions:_})}return{project:g,children:w}},o=await s(t),l=JSON.stringify(o,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;Sw(u,h),qe.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),qe.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=hn.getState().conversations,n=[];for(const s of t){const o=await _t.loadInteractionsForConversation(s.id);n.push({conversation:s,interactions:o})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;Sw(a,i),qe.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),qe.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}static async exportFullConfiguration(t){try{const n=await _t.getAllDataForExport(t),r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_full_export_${new Date().toISOString().split("T")[0]}.json`;Sw(a,i),qe.success("Full configuration exported successfully.")}catch(n){throw console.error("ImportExportService: Error exporting full configuration",n),qe.error(`Full export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async importFullConfiguration(t,n){try{const r=await t.text(),a=JSON.parse(r);if(!a||typeof a!="object"||!a.version)throw new Error("Invalid import file format. Missing version or basic structure.");await _t.importAllData(a,n),qe.success("Configuration imported successfully. Reloading application..."),setTimeout(()=>window.location.reload(),1500)}catch(r){throw console.error("ImportExportService: Error importing full configuration",r),qe.error(`Full import failed: ${r instanceof Error?r.message:String(r)}`),r}}}const lP="sync_repos",Co=Js(Qs((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&qe.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const s=i.parentId??r.rootId??"";a[s]||(a[s]=r.childrenMap[s]?[...r.childrenMap[s]]:[]),a[s].includes(i.id)||a[s].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const s=i.parentId??r.rootId??"";if(r.childrenMap[s]&&(r.childrenMap[s]=r.childrenMap[s].filter(o=>o!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const o=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);o.length>0&&t()._removeNodes(o),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Et.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Et.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Et.emit(St.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:s,_addNodes:o,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),s(null));try{const d=await Ede(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const g=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${g}`),e({initializingKey:null,loading:!1}),new Error(g)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let m=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(g){if(g.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw g}if(!m||m.path!=="/"){const g=Date.now();m={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:g,lastModified:g},o([m]),console.log("[VfsStore] Root node added/updated in state.")}return e(g=>{g.rootId=m.id,g.currentParentId=m.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${m.id}`),await t().fetchNodes(m.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(s(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!s||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!s}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${u})`);const v=await IN(g,{fsInstance:s});console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const b=n??l??"",w=new Set(v.map(k=>k.path)),E=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!w.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const T=v.map(k=>{const R=Object.values(t().nodes).find(I=>I.path===k.path),j=Date.now();return{id:(R==null?void 0:R.id)||yi(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(R==null?void 0:R.createdAt)??j,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});T.length>0&&(console.log(`[VfsStore] Adding/Updating ${T.length} nodes.`),i(T)),e(k=>{const R=T.map(j=>j.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(R.sort()))&&(k.childrenMap[b]=R,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(m){console.error("Failed to fetch VFS nodes:",m),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=nr(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:s}=t();if(!s||t().vfsKey!==t().configuredVfsKey)return;const o=nr(n),l=r(o);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):o==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!s||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const m=n?o[n]:o[l||""],g=m?m.path:"/",v=sk(g,r.trim());try{throw await s.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(_){if(_.code!=="ENOENT")throw _}await NB(v,{fsInstance:s});const b=Date.now(),x={id:yi(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};u([x])}catch(m){console.error("Failed to create directory:",m),i(m.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:s,nodes:o,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!s||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?o[n]:o[l||""],m=h?h.path:"/";await RB(Array.from(r),m,{fsInstance:s}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:s,configuredVfsKey:o,vfsKey:l}=t();if(!s||o!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await jN(d.path,d.type==="folder",{fsInstance:s});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:s,nodes:o,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const m=o[n];if(!m){i("Item not found.");return}if(m.name!==r.trim()){a(!0);try{const g=m.parentId?o[m.parentId]:o[u||""],v=g?g.path:"/",b=sk(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await IB(m.path,b,{fsInstance:l});const w={name:r.trim(),path:b,lastModified:Date.now()};s(n,w)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:s,vfsKey:o}=t();if(!a||s!==o)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await fd(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),Hve="/synced_repos",hn=Js(Qs((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await Co.getState().initializeVFS(lP,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${lP}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),qe.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await ri.getState().loadProjects();const[n,r]=await Promise.all([_t.loadConversations(),_t.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const s=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,o=i.updatedAt instanceof Date?i.updatedAt.getTime():null;s?o&&o>s?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=yi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(s=>{s.conversations.some(o=>o.id===i.id)||(s.conversations.unshift(i),s.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const s=t().getConversationById(r);if(s)await _t.saveConversation(s),Et.emit(St.CONVERSATION_ADDED,{conversation:s});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(s){throw console.error("ConversationStore: Error adding conversation",s),e(o=>({error:"Failed to save new conversation",conversations:o.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([l])=>l!==r))})),s}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){const l=s.conversations[o].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(s.conversations[o],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),m=s.conversations[o].lastSyncedAt instanceof Date?s.conversations[o].lastSyncedAt.getTime():null,g=s.conversations[o].updatedAt.getTime();"syncRepoId"in r?s.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&s.conversations[o].syncRepoId&&s.conversationSyncStatus[n]==="idle"&&(!m||g>m)&&(s.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveConversation(s),Et.emit(St.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(s){throw console.error("ConversationStore: Error updating conversation",s),e(o=>{const l=o.conversations.findIndex(u=>u.id===n);if(l!==-1){o.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update"}),s}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(s=>{const o=s.conversations.findIndex(l=>l.id===n);if(o!==-1){s.conversations[o]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(s=>s.id===n);if(i){e(s=>({conversations:s.conversations.filter(o=>o.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([o])=>o!==n))}));try{await _t.deleteConversation(n),await _t.deleteInteractionsForConversation(n),Et.emit(St.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await On.getState().setCurrentConversationId(null),Et.emit(St.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(s){throw console.error("ConversationStore: Error deleting conversation",s),e(o=>{if(i){o.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();o.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(o.selectedItemId=n,o.selectedItemType="conversation"),o.error="Failed to delete conversation"}),s}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await On.getState().setCurrentConversationId(r==="conversation"?n:null),Et.emit(St.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?Et.emit(St.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?Et.emit(St.PROJECT_SELECTED,{projectId:n}):(Et.emit(St.CONVERSATION_SELECTED,{conversationId:null}),Et.emit(St.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await np.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await np.exportConversation(n,r)},exportProject:async n=>{await np.exportProject(n)},exportAllConversations:async()=>{await np.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await _t.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=yi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(s=>{s.syncRepos.push(i)});try{const s=t().syncRepos.find(o=>o.id===r);if(s){const o=JSON.parse(JSON.stringify(s));await _t.saveSyncRepo(o),Et.emit(St.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return qe.success(`Sync repository "${i.name}" added.`),r}catch(s){throw console.error("ConversationStore: Error adding sync repo",s),e(o=>({error:"Failed to save sync repository",syncRepos:o.syncRepos.filter(l=>l.id!==r)})),s}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(s=>s.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&Object.assign(s.syncRepos[o],{...r,branch:r.branch||s.syncRepos[o].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(s=>s.id===n);if(i)try{const s=JSON.parse(JSON.stringify(i));await _t.saveSyncRepo(s),Et.emit(St.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),qe.success(`Sync repository "${i.name}" updated.`)}catch(s){throw console.error("ConversationStore: Error updating sync repo",s),e(o=>{const l=o.syncRepos.findIndex(u=>u.id===n);l!==-1&&(o.syncRepos[l]=a),o.error="Failed to save sync repository update"}),s}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(s=>{const o=s.syncRepos.findIndex(l=>l.id===n);o!==-1&&(s.syncRepos[o]=a),s.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(s=>s.id===n);if(!r)return;const a=nr(`${Hve}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(s=>({syncRepos:s.syncRepos.filter(o=>o.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(s.repoInitializationStatus).filter(([o])=>o!==n))}));try{await _t.deleteSyncRepo(n),Et.emit(St.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),qe.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await jN(a,!0,{fsInstance:i}),qe.info(`Removed local sync folder for "${r.name}".`)}catch(s){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,s),s.code!=="ENOENT"&&qe.warning(`Failed to remove local sync folder: ${s.message}`)}}catch(s){throw console.error("ConversationStore: Error deleting sync repo",s),e(o=>{r&&o.syncRepos.push(r),o.error="Failed to delete sync repository"}),s}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),qe.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),Et.emit(St.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),Et.emit(St.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){qe.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await zve(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){qe.error("Conversation not found for syncing.");return}if(!r.syncRepoId){qe.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(o=>o.id===r.syncRepoId);if(!a){qe.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await Uve(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const s=t().getConversationById(n);s&&e(o=>{const l=o.conversations.findIndex(u=>u.id===n);l!==-1&&(o.conversations[l]=s)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const s=t().getConversationById(r);if(!s){console.warn("Cannot update tool settings: Selected conversation not found.");return}const o=s.metadata??{},l={...o};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(o)||!s.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}})));function xn({className:e,type:t,...n}){return p.jsx("input",{type:t,"data-slot":"input",className:vt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function C_(e){const t=e+"CollectionProvider",[n,r]=_i(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=b=>{const{scope:w,children:x}=b,_=gt.useRef(null),E=gt.useRef(new Map).current;return p.jsx(a,{scope:w,itemMap:E,collectionRef:_,children:x})};s.displayName=t;const o=e+"CollectionSlot",l=Pu(o),u=gt.forwardRef((b,w)=>{const{scope:x,children:_}=b,E=i(o,x),T=Nn(w,E.collectionRef);return p.jsx(l,{ref:T,children:_})});u.displayName=o;const d=e+"CollectionItemSlot",h="data-radix-collection-item",m=Pu(d),g=gt.forwardRef((b,w)=>{const{scope:x,children:_,...E}=b,T=gt.useRef(null),k=Nn(w,T),R=i(d,x);return gt.useEffect(()=>(R.itemMap.set(T,{ref:T,...E}),()=>void R.itemMap.delete(T))),p.jsx(m,{[h]:"",ref:k,children:_})});g.displayName=d;function v(b){const w=i(e+"CollectionConsumer",b);return gt.useCallback(()=>{const _=w.collectionRef.current;if(!_)return[];const E=Array.from(_.querySelectorAll(`[${h}]`));return Array.from(w.itemMap.values()).sort((R,j)=>E.indexOf(R.ref.current)-E.indexOf(j.ref.current))},[w.collectionRef,w.itemMap])}return[{Provider:s,Slot:u,ItemSlot:g},v,r]}var GC=0;function T_(){C.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??cP()),document.body.insertAdjacentElement("beforeend",e[1]??cP()),GC++,()=>{GC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),GC--}},[])}function cP(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var WC="focusScope.autoFocusOnMount",KC="focusScope.autoFocusOnUnmount",uP={bubbles:!1,cancelable:!0},qve="FocusScope",sb=C.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...s}=e,[o,l]=C.useState(null),u=Ua(a),d=Ua(i),h=C.useRef(null),m=Nn(t,b=>l(b)),g=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let b=function(E){if(g.paused||!o)return;const T=E.target;o.contains(T)?h.current=T:ku(h.current,{select:!0})},w=function(E){if(g.paused||!o)return;const T=E.relatedTarget;T!==null&&(o.contains(T)||ku(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&ku(o)};document.addEventListener("focusin",b),document.addEventListener("focusout",w);const _=new MutationObserver(x);return o&&_.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",w),_.disconnect()}}},[r,o,g.paused]),C.useEffect(()=>{if(o){fP.add(g);const b=document.activeElement;if(!o.contains(b)){const x=new CustomEvent(WC,uP);o.addEventListener(WC,u),o.dispatchEvent(x),x.defaultPrevented||(Gve(Xve(iz(o)),{select:!0}),document.activeElement===b&&ku(o))}return()=>{o.removeEventListener(WC,u),setTimeout(()=>{const x=new CustomEvent(KC,uP);o.addEventListener(KC,d),o.dispatchEvent(x),x.defaultPrevented||ku(b??document.body,{select:!0}),o.removeEventListener(KC,d),fP.remove(g)},0)}}},[o,u,d,g]);const v=C.useCallback(b=>{if(!n&&!r||g.paused)return;const w=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(w&&x){const _=b.currentTarget,[E,T]=Wve(_);E&&T?!b.shiftKey&&x===T?(b.preventDefault(),n&&ku(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&ku(T,{select:!0})):x===_&&b.preventDefault()}},[n,r,g.paused]);return p.jsx(an.div,{tabIndex:-1,...s,ref:m,onKeyDown:v})});sb.displayName=qve;function Gve(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ku(r,{select:t}),document.activeElement!==n)return}function Wve(e){const t=iz(e),n=dP(t,e),r=dP(t.reverse(),e);return[n,r]}function iz(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function dP(e,t){for(const n of e)if(!Kve(n,{upTo:t}))return n}function Kve(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Zve(e){return e instanceof HTMLInputElement&&"select"in e}function ku(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Zve(e)&&t&&e.select()}}var fP=Yve();function Yve(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=hP(e,t),e.unshift(t)},remove(t){var n;e=hP(e,t),(n=e[0])==null||n.resume()}}}function hP(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function Xve(e){return e.filter(t=>t.tagName!=="A")}function k_(e){const t=C.useRef({value:e,previous:e});return C.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Jve=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},zh=new WeakMap,Ew=new WeakMap,Cw={},ZC=0,sz=function(e){return e&&(e.host||sz(e.parentNode))},Qve=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=sz(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},ewe=function(e,t,n,r){var a=Qve(t,Array.isArray(e)?e:[e]);Cw[n]||(Cw[n]=new WeakMap);var i=Cw[n],s=[],o=new Set,l=new Set(a),u=function(h){!h||o.has(h)||(o.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(m){if(o.has(m))d(m);else try{var g=m.getAttribute(r),v=g!==null&&g!=="false",b=(zh.get(m)||0)+1,w=(i.get(m)||0)+1;zh.set(m,b),i.set(m,w),s.push(m),b===1&&v&&Ew.set(m,!0),w===1&&m.setAttribute(n,"true"),v||m.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",m,x)}})};return d(t),o.clear(),ZC++,function(){s.forEach(function(h){var m=zh.get(h)-1,g=i.get(h)-1;zh.set(h,m),i.set(h,g),m||(Ew.has(h)||h.removeAttribute(r),Ew.delete(h)),g||h.removeAttribute(n)}),ZC--,ZC||(zh=new WeakMap,zh=new WeakMap,Ew=new WeakMap,Cw={})}},A_=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Jve(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),ewe(r,a,n,"aria-hidden")):function(){return null}},pl=function(){return pl=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},pl.apply(this,arguments)};function oz(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function twe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var qw="right-scroll-bar-position",Gw="width-before-scroll-bar",nwe="with-scroll-bars-hidden",rwe="--removed-body-scroll-bar-size";function YC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function awe(e,t){var n=C.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var iwe=typeof window<"u"?C.useLayoutEffect:C.useEffect,pP=new WeakMap;function swe(e,t){var n=awe(null,function(r){return e.forEach(function(a){return YC(a,r)})});return iwe(function(){var r=pP.get(n);if(r){var a=new Set(r),i=new Set(e),s=n.current;a.forEach(function(o){i.has(o)||YC(o,null)}),i.forEach(function(o){a.has(o)||YC(o,s)})}pP.set(n,e)},[e]),n}function owe(e){return e}function lwe(e,t){t===void 0&&(t=owe);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var s=t(i,r);return n.push(s),function(){n=n.filter(function(o){return o!==s})}},assignSyncMedium:function(i){for(r=!0;n.length;){var s=n;n=[],s.forEach(i)}n={push:function(o){return i(o)},filter:function(){return n}}},assignMedium:function(i){r=!0;var s=[];if(n.length){var o=n;n=[],o.forEach(i),s=n}var l=function(){var d=s;s=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return a}function cwe(e){e===void 0&&(e={});var t=lwe(null);return t.options=pl({async:!0,ssr:!1},e),t}var lz=function(e){var t=e.sideCar,n=oz(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,pl({},n))};lz.isSideCarExport=!0;function uwe(e,t){return e.useMedium(t),lz}var cz=cwe(),XC=function(){},N_=C.forwardRef(function(e,t){var n=C.useRef(null),r=C.useState({onScrollCapture:XC,onWheelCapture:XC,onTouchMoveCapture:XC}),a=r[0],i=r[1],s=e.forwardProps,o=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,m=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,w=e.as,x=w===void 0?"div":w,_=e.gapMode,E=oz(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=m,k=swe([n,t]),R=pl(pl({},E),a);return C.createElement(C.Fragment,null,d&&C.createElement(T,{sideCar:cz,removeScrollBar:u,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:_}),s?C.cloneElement(C.Children.only(o),pl(pl({},R),{ref:k})):C.createElement(x,pl({},R,{className:l,ref:k}),o))});N_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};N_.classNames={fullWidth:Gw,zeroRight:qw};var dwe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function fwe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=dwe();return t&&e.setAttribute("nonce",t),e}function hwe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function pwe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var mwe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=fwe())&&(hwe(t,n),pwe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},gwe=function(){var e=mwe();return function(t,n){C.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},uz=function(){var e=gwe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},ywe={left:0,top:0,right:0,gap:0},JC=function(e){return parseInt(e||"",10)||0},bwe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[JC(n),JC(r),JC(a)]},vwe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ywe;var t=bwe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},wwe=uz(),up="data-scroll-locked",xwe=function(e,t,n,r){var a=e.left,i=e.top,s=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(nwe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(up,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(qw,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(Gw,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(qw," .").concat(qw,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Gw," .").concat(Gw,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(up,`] {
    `).concat(rwe,": ").concat(o,`px;
  }
`)},mP=function(){var e=parseInt(document.body.getAttribute(up)||"0",10);return isFinite(e)?e:0},_we=function(){C.useEffect(function(){return document.body.setAttribute(up,(mP()+1).toString()),function(){var e=mP()-1;e<=0?document.body.removeAttribute(up):document.body.setAttribute(up,e.toString())}},[])},Swe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;_we();var i=C.useMemo(function(){return vwe(a)},[a]);return C.createElement(wwe,{styles:xwe(i,!t,a,n?"":"!important")})},Pk=!1;if(typeof window<"u")try{var Tw=Object.defineProperty({},"passive",{get:function(){return Pk=!0,!0}});window.addEventListener("test",Tw,Tw),window.removeEventListener("test",Tw,Tw)}catch{Pk=!1}var Uh=Pk?{passive:!1}:!1,Ewe=function(e){return e.tagName==="TEXTAREA"},dz=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Ewe(e)&&n[t]==="visible")},Cwe=function(e){return dz(e,"overflowY")},Twe=function(e){return dz(e,"overflowX")},gP=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=fz(e,r);if(a){var i=hz(e,r),s=i[1],o=i[2];if(s>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},kwe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Awe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},fz=function(e,t){return e==="v"?Cwe(t):Twe(t)},hz=function(e,t){return e==="v"?kwe(t):Awe(t)},Nwe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Rwe=function(e,t,n,r,a){var i=Nwe(e,window.getComputedStyle(t).direction),s=i*r,o=n.target,l=t.contains(o),u=!1,d=s>0,h=0,m=0;do{var g=hz(e,o),v=g[0],b=g[1],w=g[2],x=b-w-i*v;(v||x)&&fz(e,o)&&(h+=x,m+=v),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(t.contains(o)||t===o));return(d&&Math.abs(h)<1||!d&&Math.abs(m)<1)&&(u=!0),u},kw=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},yP=function(e){return[e.deltaX,e.deltaY]},bP=function(e){return e&&"current"in e?e.current:e},Iwe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},jwe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Dwe=0,Vh=[];function Mwe(e){var t=C.useRef([]),n=C.useRef([0,0]),r=C.useRef(),a=C.useState(Dwe++)[0],i=C.useState(uz)[0],s=C.useRef(e);C.useEffect(function(){s.current=e},[e]),C.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=twe([e.lockRef.current],(e.shards||[]).map(bP),!0).filter(Boolean);return b.forEach(function(w){return w.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(w){return w.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=C.useCallback(function(b,w){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!s.current.allowPinchZoom;var x=kw(b),_=n.current,E="deltaX"in b?b.deltaX:_[0]-x[0],T="deltaY"in b?b.deltaY:_[1]-x[1],k,R=b.target,j=Math.abs(E)>Math.abs(T)?"h":"v";if("touches"in b&&j==="h"&&R.type==="range")return!1;var I=gP(j,R);if(!I)return!0;if(I?k=j:(k=j==="v"?"h":"v",I=gP(j,R)),!I)return!1;if(!r.current&&"changedTouches"in b&&(E||T)&&(r.current=k),!k)return!0;var P=r.current||k;return Rwe(P,w,b,P==="h"?E:T)},[]),l=C.useCallback(function(b){var w=b;if(!(!Vh.length||Vh[Vh.length-1]!==i)){var x="deltaY"in w?yP(w):kw(w),_=t.current.filter(function(k){return k.name===w.type&&(k.target===w.target||w.target===k.shadowParent)&&Iwe(k.delta,x)})[0];if(_&&_.should){w.cancelable&&w.preventDefault();return}if(!_){var E=(s.current.shards||[]).map(bP).filter(Boolean).filter(function(k){return k.contains(w.target)}),T=E.length>0?o(w,E[0]):!s.current.noIsolation;T&&w.cancelable&&w.preventDefault()}}},[]),u=C.useCallback(function(b,w,x,_){var E={name:b,delta:w,target:x,should:_,shadowParent:Owe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(T){return T!==E})},1)},[]),d=C.useCallback(function(b){n.current=kw(b),r.current=void 0},[]),h=C.useCallback(function(b){u(b.type,yP(b),b.target,o(b,e.lockRef.current))},[]),m=C.useCallback(function(b){u(b.type,kw(b),b.target,o(b,e.lockRef.current))},[]);C.useEffect(function(){return Vh.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",l,Uh),document.addEventListener("touchmove",l,Uh),document.addEventListener("touchstart",d,Uh),function(){Vh=Vh.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,Uh),document.removeEventListener("touchmove",l,Uh),document.removeEventListener("touchstart",d,Uh)}},[]);var g=e.removeScrollBar,v=e.inert;return C.createElement(C.Fragment,null,v?C.createElement(i,{styles:jwe(a)}):null,g?C.createElement(Swe,{gapMode:e.gapMode}):null)}function Owe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Pwe=uwe(cz,Mwe);var ob=C.forwardRef(function(e,t){return C.createElement(N_,pl({},e,{ref:t,sideCar:Pwe}))});ob.classNames=N_.classNames;var Fwe=[" ","Enter","ArrowUp","ArrowDown"],Lwe=[" ","Enter"],_f="Select",[R_,I_,Bwe]=C_(_f),[mm,Q3e]=_i(_f,[Bwe,rd]),j_=rd(),[$we,pd]=mm(_f),[zwe,Uwe]=mm(_f),pz=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:s,defaultValue:o,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:v}=e,b=j_(t),[w,x]=C.useState(null),[_,E]=C.useState(null),[T,k]=C.useState(!1),R=dm(u),[j,I]=Io({prop:r,defaultProp:a??!1,onChange:i,caller:_f}),[P,O]=Io({prop:s,defaultProp:o,onChange:l,caller:_f}),U=C.useRef(null),M=w?v||!!w.closest("form"):!0,[W,V]=C.useState(new Set),ie=Array.from(W).map(ae=>ae.props.value).join(";");return p.jsx(F1,{...b,children:p.jsxs($we,{required:g,scope:t,trigger:w,onTriggerChange:x,valueNode:_,onValueNodeChange:E,valueNodeHasChildren:T,onValueNodeHasChildrenChange:k,contentId:Ha(),value:P,onValueChange:O,open:j,onOpenChange:I,dir:R,triggerPointerDownPosRef:U,disabled:m,children:[p.jsx(R_.Provider,{scope:t,children:p.jsx(zwe,{scope:e.__scopeSelect,onNativeOptionAdd:C.useCallback(ae=>{V(ne=>new Set(ne).add(ae))},[]),onNativeOptionRemove:C.useCallback(ae=>{V(ne=>{const q=new Set(ne);return q.delete(ae),q})},[]),children:n})}),M?p.jsxs(Pz,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:P,onChange:ae=>O(ae.target.value),disabled:m,form:v,children:[P===void 0?p.jsx("option",{value:""}):null,Array.from(W)]},ie):null]})})};pz.displayName=_f;var mz="SelectTrigger",gz=C.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=j_(n),s=pd(mz,n),o=s.disabled||r,l=Nn(t,s.onTriggerChange),u=I_(n),d=C.useRef("touch"),[h,m,g]=Lz(b=>{const w=u().filter(E=>!E.disabled),x=w.find(E=>E.value===s.value),_=Bz(w,b,x);_!==void 0&&s.onValueChange(_.value)}),v=b=>{o||(s.onOpenChange(!0),g()),b&&(s.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return p.jsx(Ey,{asChild:!0,...i,children:p.jsx(an.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":Fz(s.value)?"":void 0,...a,ref:l,onClick:Gt(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:Gt(a.onPointerDown,b=>{d.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:Gt(a.onKeyDown,b=>{const w=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&m(b.key),!(w&&b.key===" ")&&Fwe.includes(b.key)&&(v(),b.preventDefault())})})})});gz.displayName=mz;var yz="SelectValue",bz=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:s="",...o}=e,l=pd(yz,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=Nn(t,l.onValueNodeChange);return si(()=>{u(d)},[u,d]),p.jsx(an.span,{...o,ref:h,style:{pointerEvents:"none"},children:Fz(l.value)?p.jsx(p.Fragment,{children:s}):i})});bz.displayName=yz;var Vwe="SelectIcon",vz=C.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return p.jsx(an.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});vz.displayName=Vwe;var Hwe="SelectPortal",wz=e=>p.jsx(Zp,{asChild:!0,...e});wz.displayName=Hwe;var Sf="SelectContent",xz=C.forwardRef((e,t)=>{const n=pd(Sf,e.__scopeSelect),[r,a]=C.useState();if(si(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?ml.createPortal(p.jsx(_z,{scope:e.__scopeSelect,children:p.jsx(R_.Slot,{scope:e.__scopeSelect,children:p.jsx("div",{children:e.children})})}),i):null}return p.jsx(Sz,{...e,ref:t})});xz.displayName=Sf;var po=10,[_z,md]=mm(Sf),qwe="SelectContentImpl",Gwe=Pu("SelectContent.RemoveScroll"),Sz=C.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:s,side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w,...x}=e,_=pd(Sf,n),[E,T]=C.useState(null),[k,R]=C.useState(null),j=Nn(t,Ne=>T(Ne)),[I,P]=C.useState(null),[O,U]=C.useState(null),M=I_(n),[W,V]=C.useState(!1),ie=C.useRef(!1);C.useEffect(()=>{if(E)return A_(E)},[E]),T_();const ae=C.useCallback(Ne=>{const[Se,...ye]=M().map(Le=>Le.ref.current),[Fe]=ye.slice(-1),Xe=document.activeElement;for(const Le of Ne)if(Le===Xe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Se&&k&&(k.scrollTop=0),Le===Fe&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==Xe))return},[M,k]),ne=C.useCallback(()=>ae([I,E]),[ae,I,E]);C.useEffect(()=>{W&&ne()},[W,ne]);const{onOpenChange:q,triggerPointerDownPosRef:te}=_;C.useEffect(()=>{if(E){let Ne={x:0,y:0};const Se=Fe=>{var Xe,Le;Ne={x:Math.abs(Math.round(Fe.pageX)-(((Xe=te.current)==null?void 0:Xe.x)??0)),y:Math.abs(Math.round(Fe.pageY)-(((Le=te.current)==null?void 0:Le.y)??0))}},ye=Fe=>{Ne.x<=10&&Ne.y<=10?Fe.preventDefault():E.contains(Fe.target)||q(!1),document.removeEventListener("pointermove",Se),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Se),document.addEventListener("pointerup",ye,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Se),document.removeEventListener("pointerup",ye,{capture:!0})}}},[E,q,te]),C.useEffect(()=>{const Ne=()=>q(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[q]);const[G,J]=Lz(Ne=>{const Se=M().filter(Xe=>!Xe.disabled),ye=Se.find(Xe=>Xe.ref.current===document.activeElement),Fe=Bz(Se,Ne,ye);Fe&&setTimeout(()=>Fe.ref.current.focus())}),Q=C.useCallback((Ne,Se,ye)=>{const Fe=!ie.current&&!ye;(_.value!==void 0&&_.value===Se||Fe)&&(P(Ne),Fe&&(ie.current=!0))},[_.value]),se=C.useCallback(()=>E==null?void 0:E.focus(),[E]),fe=C.useCallback((Ne,Se,ye)=>{const Fe=!ie.current&&!ye;(_.value!==void 0&&_.value===Se||Fe)&&U(Ne)},[_.value]),ve=r==="popper"?Fk:Ez,je=ve===Fk?{side:o,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w}:{};return p.jsx(_z,{scope:n,content:E,viewport:k,onViewportChange:R,itemRefCallback:Q,selectedItem:I,onItemLeave:se,itemTextRefCallback:fe,focusSelectedItem:ne,selectedItemText:O,position:r,isPositioned:W,searchRef:G,children:p.jsx(ob,{as:Gwe,allowPinchZoom:!0,children:p.jsx(sb,{asChild:!0,trapped:_.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:Gt(a,Ne=>{var Se;(Se=_.trigger)==null||Se.focus({preventScroll:!0}),Ne.preventDefault()}),children:p.jsx(Gp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:p.jsx(ve,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:Ne=>Ne.preventDefault(),...x,...je,onPlaced:()=>V(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:Gt(x.onKeyDown,Ne=>{const Se=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!Se&&Ne.key.length===1&&J(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let Fe=M().filter(Xe=>!Xe.disabled).map(Xe=>Xe.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const Xe=Ne.target,Le=Fe.indexOf(Xe);Fe=Fe.slice(Le+1)}setTimeout(()=>ae(Fe)),Ne.preventDefault()}})})})})})})});Sz.displayName=qwe;var Wwe="SelectItemAlignedPosition",Ez=C.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=pd(Sf,n),s=md(Sf,n),[o,l]=C.useState(null),[u,d]=C.useState(null),h=Nn(t,j=>d(j)),m=I_(n),g=C.useRef(!1),v=C.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:x,focusSelectedItem:_}=s,E=C.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&u&&b&&w&&x){const j=i.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),P=i.valueNode.getBoundingClientRect(),O=x.getBoundingClientRect();if(i.dir!=="rtl"){const Xe=O.left-I.left,Le=P.left-Xe,Ie=j.left-Le,B=j.width+Ie,Ce=Math.max(B,I.width),Ee=window.innerWidth-po,ce=Y0(Le,[po,Math.max(po,Ee-Ce)]);o.style.minWidth=B+"px",o.style.left=ce+"px"}else{const Xe=I.right-O.right,Le=window.innerWidth-P.right-Xe,Ie=window.innerWidth-j.right-Le,B=j.width+Ie,Ce=Math.max(B,I.width),Ee=window.innerWidth-po,ce=Y0(Le,[po,Math.max(po,Ee-Ce)]);o.style.minWidth=B+"px",o.style.right=ce+"px"}const U=m(),M=window.innerHeight-po*2,W=b.scrollHeight,V=window.getComputedStyle(u),ie=parseInt(V.borderTopWidth,10),ae=parseInt(V.paddingTop,10),ne=parseInt(V.borderBottomWidth,10),q=parseInt(V.paddingBottom,10),te=ie+ae+W+q+ne,G=Math.min(w.offsetHeight*5,te),J=window.getComputedStyle(b),Q=parseInt(J.paddingTop,10),se=parseInt(J.paddingBottom,10),fe=j.top+j.height/2-po,ve=M-fe,je=w.offsetHeight/2,Ne=w.offsetTop+je,Se=ie+ae+Ne,ye=te-Se;if(Se<=fe){const Xe=U.length>0&&w===U[U.length-1].ref.current;o.style.bottom="0px";const Le=u.clientHeight-b.offsetTop-b.offsetHeight,Ie=Math.max(ve,je+(Xe?se:0)+Le+ne),B=Se+Ie;o.style.height=B+"px"}else{const Xe=U.length>0&&w===U[0].ref.current;o.style.top="0px";const Ie=Math.max(fe,ie+b.offsetTop+(Xe?Q:0)+je)+ye;o.style.height=Ie+"px",b.scrollTop=Se-fe+b.offsetTop}o.style.margin=`${po}px 0`,o.style.minHeight=G+"px",o.style.maxHeight=M+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,i.trigger,i.valueNode,o,u,b,w,x,i.dir,r]);si(()=>E(),[E]);const[T,k]=C.useState();si(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const R=C.useCallback(j=>{j&&v.current===!0&&(E(),_==null||_(),v.current=!1)},[E,_]);return p.jsx(Zwe,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:p.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:T},children:p.jsx(an.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});Ez.displayName=Wwe;var Kwe="SelectPopperPosition",Fk=C.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=po,...i}=e,s=j_(n);return p.jsx(L1,{...s,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Fk.displayName=Kwe;var[Zwe,CR]=mm(Sf,{}),Lk="SelectViewport",Cz=C.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=md(Lk,n),s=CR(Lk,n),o=Nn(t,i.onViewportChange),l=C.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),p.jsx(R_.Slot,{scope:n,children:p.jsx(an.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:Gt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=s;if(m!=null&&m.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-po*2,b=parseFloat(h.style.minHeight),w=parseFloat(h.style.height),x=Math.max(b,w);if(x<v){const _=x+g,E=Math.min(v,_),T=_-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=T>0?T:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});Cz.displayName=Lk;var Tz="SelectGroup",[Ywe,Xwe]=mm(Tz),Jwe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Ha();return p.jsx(Ywe,{scope:n,id:a,children:p.jsx(an.div,{role:"group","aria-labelledby":a,...r,ref:t})})});Jwe.displayName=Tz;var kz="SelectLabel",Qwe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Xwe(kz,n);return p.jsx(an.div,{id:a.id,...r,ref:t})});Qwe.displayName=kz;var n1="SelectItem",[exe,Az]=mm(n1),Nz=C.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...s}=e,o=pd(n1,n),l=md(n1,n),u=o.value===r,[d,h]=C.useState(i??""),[m,g]=C.useState(!1),v=Nn(t,_=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,_,r,a)}),b=Ha(),w=C.useRef("touch"),x=()=>{a||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(exe,{scope:n,value:r,disabled:a,textId:b,isSelected:u,onItemTextChange:C.useCallback(_=>{h(E=>E||((_==null?void 0:_.textContent)??"").trim())},[]),children:p.jsx(R_.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:p.jsx(an.div,{role:"option","aria-labelledby":b,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...s,ref:v,onFocus:Gt(s.onFocus,()=>g(!0)),onBlur:Gt(s.onBlur,()=>g(!1)),onClick:Gt(s.onClick,()=>{w.current!=="mouse"&&x()}),onPointerUp:Gt(s.onPointerUp,()=>{w.current==="mouse"&&x()}),onPointerDown:Gt(s.onPointerDown,_=>{w.current=_.pointerType}),onPointerMove:Gt(s.onPointerMove,_=>{var E;w.current=_.pointerType,a?(E=l.onItemLeave)==null||E.call(l):w.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Gt(s.onPointerLeave,_=>{var E;_.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:Gt(s.onKeyDown,_=>{var T;((T=l.searchRef)==null?void 0:T.current)!==""&&_.key===" "||(Lwe.includes(_.key)&&x(),_.key===" "&&_.preventDefault())})})})})});Nz.displayName=n1;var Vg="SelectItemText",Rz=C.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,s=pd(Vg,n),o=md(Vg,n),l=Az(Vg,n),u=Uwe(Vg,n),[d,h]=C.useState(null),m=Nn(t,x=>h(x),l.onItemTextChange,x=>{var _;return(_=o.itemTextRefCallback)==null?void 0:_.call(o,x,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=C.useMemo(()=>p.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=u;return si(()=>(b(v),()=>w(v)),[b,w,v]),p.jsxs(p.Fragment,{children:[p.jsx(an.span,{id:l.textId,...i,ref:m}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?ml.createPortal(i.children,s.valueNode):null]})});Rz.displayName=Vg;var Iz="SelectItemIndicator",jz=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return Az(Iz,n).isSelected?p.jsx(an.span,{"aria-hidden":!0,...r,ref:t}):null});jz.displayName=Iz;var Bk="SelectScrollUpButton",Dz=C.forwardRef((e,t)=>{const n=md(Bk,e.__scopeSelect),r=CR(Bk,e.__scopeSelect),[a,i]=C.useState(!1),s=Nn(t,r.onScrollButtonChange);return si(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(Oz,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop-l.offsetHeight)}}):null});Dz.displayName=Bk;var $k="SelectScrollDownButton",Mz=C.forwardRef((e,t)=>{const n=md($k,e.__scopeSelect),r=CR($k,e.__scopeSelect),[a,i]=C.useState(!1),s=Nn(t,r.onScrollButtonChange);return si(()=>{if(n.viewport&&n.isPositioned){let o=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return o(),l.addEventListener("scroll",o),()=>l.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),a?p.jsx(Oz,{...e,ref:s,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=n;o&&l&&(o.scrollTop=o.scrollTop+l.offsetHeight)}}):null});Mz.displayName=$k;var Oz=C.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=md("SelectScrollButton",n),s=C.useRef(null),o=I_(n),l=C.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return C.useEffect(()=>()=>l(),[l]),si(()=>{var d;const u=o().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[o]),p.jsx(an.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:Gt(a.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:Gt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:Gt(a.onPointerLeave,()=>{l()})})}),txe="SelectSeparator",nxe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return p.jsx(an.div,{"aria-hidden":!0,...r,ref:t})});nxe.displayName=txe;var zk="SelectArrow",rxe=C.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=j_(n),i=pd(zk,n),s=md(zk,n);return i.open&&s.position==="popper"?p.jsx(B1,{...a,...r,ref:t}):null});rxe.displayName=zk;var axe="SelectBubbleInput",Pz=C.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=C.useRef(null),i=Nn(r,a),s=k_(t);return C.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("change",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(an.select,{...n,style:{...fL,...n.style},ref:i,defaultValue:t})});Pz.displayName=axe;function Fz(e){return e===""||e===void 0}function Lz(e){const t=Ua(e),n=C.useRef(""),r=C.useRef(0),a=C.useCallback(s=>{const o=n.current+s;t(o),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(o)},[t]),i=C.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function Bz(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=ixe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function ixe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var sxe=pz,oxe=gz,lxe=bz,cxe=vz,uxe=wz,dxe=xz,fxe=Cz,hxe=Nz,pxe=Rz,mxe=jz,gxe=Dz,yxe=Mz;function bc({...e}){return p.jsx(sxe,{"data-slot":"select",...e})}function vc({...e}){return p.jsx(lxe,{"data-slot":"select-value",...e})}function wc({className:e,size:t="default",children:n,...r}){return p.jsxs(oxe,{"data-slot":"select-trigger","data-size":t,className:vt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,p.jsx(cxe,{asChild:!0,children:p.jsx(To,{className:"size-4 opacity-50"})})]})}function xc({className:e,children:t,position:n="popper",...r}){return p.jsx(uxe,{children:p.jsxs(dxe,{"data-slot":"select-content",className:vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[p.jsx(bxe,{}),p.jsx(fxe,{className:vt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),p.jsx(vxe,{})]})})}function Sa({className:e,children:t,...n}){return p.jsxs(hxe,{"data-slot":"select-item",className:vt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[p.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:p.jsx(mxe,{children:p.jsx(Ga,{className:"size-4"})})}),p.jsx(pxe,{children:t})]})}function bxe({className:e,...t}){return p.jsx(gxe,{"data-slot":"select-scroll-up-button",className:vt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(Sc,{className:"size-4"})})}function vxe({className:e,...t}){return p.jsx(yxe,{"data-slot":"select-scroll-down-button",className:vt("flex cursor-default items-center justify-center py-1",e),...t,children:p.jsx(To,{className:"size-4"})})}var wxe="Label",$z=C.forwardRef((e,t)=>p.jsx(an.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));$z.displayName=wxe;var xxe=$z;function $t({className:e,...t}){return p.jsx(xxe,{"data-slot":"label",className:vt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}const zz=({initialProviderType:e=null,initialName:t="",initialValue:n="",initialApiKeyId:r=null,onSave:a,onCancel:i,isSaving:s,className:o})=>{const[l,u]=C.useState(t),[d,h]=C.useState(n),[m,g]=C.useState(e),v=C.useRef(null);C.useEffect(()=>{u(t),h(n),g(e)},[t,n,e,r]);const b=C.useCallback(x=>{var k,R;const _=x;g(_);const E=(k=hc.find(j=>j.value===_))==null?void 0:k.label,T=(R=hc.find(j=>j.value===m))==null?void 0:R.label;E&&(!l.trim()||l===`${T}`)&&u(`${E}`),requestAnimationFrame(()=>{var j;(j=v.current)==null||j.focus()})},[l,m]),w=C.useCallback(async()=>{if(!l.trim()||!d.trim()||!m){qe.error("Key Name, Provider Type, and API Key Value are required.");return}await a(l.trim(),m,d.trim())},[l,d,m,a]);return p.jsxs("div",{className:vt("space-y-4",o),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"api-key-provider",children:"Provider Type"}),p.jsxs(bc,{value:m??"",onValueChange:b,disabled:s,children:[p.jsx(wc,{id:"api-key-provider",children:p.jsx(vc,{placeholder:"Select Provider Type"})}),p.jsx(xc,{children:hc.map(x=>p.jsx(Sa,{value:x.value,children:x.label},x.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"api-key-name",children:"Key Name"}),p.jsx(xn,{id:"api-key-name",value:l,onChange:x=>u(x.target.value),placeholder:"e.g., My OpenAI Key",required:!0,disabled:s})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"api-key-value",children:"API Key Value"}),p.jsx(xn,{ref:v,id:"api-key-value",type:"password",value:d,onChange:x=>h(x.target.value),placeholder:"Enter your API key",required:!0,disabled:s,autoComplete:"new-password"})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:i,disabled:s,type:"button",children:[p.jsx(Di,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:w,disabled:s||!l.trim()||!d.trim()||!m,type:"button",children:[s&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(kf,{className:"h-4 w-4 mr-1"})," ",s?"Saving...":"Save API Key"]})]})]})};var D_="Switch",[_xe,eIe]=_i(D_),[Sxe,Exe]=_xe(D_),Uz=C.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,g]=C.useState(null),v=Nn(t,E=>g(E)),b=C.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,_]=Io({prop:a,defaultProp:i??!1,onChange:u,caller:D_});return p.jsxs(Sxe,{scope:n,checked:x,disabled:o,children:[p.jsx(an.button,{type:"button",role:"switch","aria-checked":x,"aria-required":s,"data-state":Gz(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onClick:Gt(e.onClick,E=>{_(T=>!T),w&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),w&&p.jsx(qz,{control:m,bubbles:!b.current,name:r,value:l,checked:x,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});Uz.displayName=D_;var Vz="SwitchThumb",Hz=C.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=Exe(Vz,n);return p.jsx(an.span,{"data-state":Gz(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});Hz.displayName=Vz;var Cxe="SwitchBubbleInput",qz=C.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const s=C.useRef(null),o=Nn(s,i),l=k_(n),u=P1(t);return C.useEffect(()=>{const d=s.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const v=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(v)}},[l,n,r]),p.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:o,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});qz.displayName=Cxe;function Gz(e){return e?"checked":"unchecked"}var Txe=Uz,kxe=Hz;function Ki({className:e,...t}){return p.jsx(Txe,{"data-slot":"switch",className:vt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(kxe,{"data-slot":"switch-thumb",className:vt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Axe=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const s=d=>{r(d==="none"?null:d)},o=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?o||`Key ID: ${n.substring(0,6)}...`:"None";return p.jsxs(bc,{value:n??"none",onValueChange:s,disabled:i||a.length===0,children:[p.jsx(wc,{className:vt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:p.jsx(vc,{asChild:!0,children:p.jsxs("div",{className:"flex items-center overflow-hidden",children:[p.jsx(i0,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),p.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&p.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?p.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),p.jsxs(xc,{className:"bg-popover border-border text-popover-foreground",children:[p.jsx(Sa,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>p.jsx(Sa,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},Wz=({formData:e,onChange:t,apiKeys:n,disabled:r=!1,className:a})=>{const i=E0(e.type??null),s=BF(e.type??null),o=tf(e.type??null),l=C.useCallback(d=>{var v,b,w;const h=d;t("type",h),t("apiKeyId",null),t("baseURL",null),t("autoFetchModels",tf(h));const m=(v=hc.find(x=>x.value===h))==null?void 0:v.label,g=(b=hc.find(x=>x.value===e.type))==null?void 0:b.label;m&&(!((w=e.name)!=null&&w.trim())||e.name===g)&&t("name",m)},[t,e.name,e.type]),u=(n||[]).filter(d=>!e.type||d.providerId===e.type);return p.jsxs("div",{className:vt("space-y-3",a),children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"provider-type",children:"Provider Type"}),p.jsxs(bc,{value:e.type??"",onValueChange:l,disabled:r,children:[p.jsx(wc,{id:"provider-type",children:p.jsx(vc,{placeholder:"Select Type"})}),p.jsx(xc,{children:hc.map(d=>p.jsx(Sa,{value:d.value,children:d.label},d.value))})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"provider-name",children:"Provider Name"}),p.jsx(xn,{id:"provider-name",value:e.name||"",onChange:d=>t("name",d.target.value),placeholder:"e.g., My Ollama",disabled:r,"aria-label":"Provider Name"})]}),i&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx($t,{children:"API Key"}),p.jsx(Axe,{label:"API Key",selectedKeyId:e.apiKeyId??null,onKeySelected:d=>t("apiKeyId",d),apiKeys:u,disabled:r||!e.type})]}),s&&p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx($t,{htmlFor:"provider-baseurl",children:"Base URL"}),p.jsx(xn,{id:"provider-baseurl",value:e.baseURL||"",onChange:d=>t("baseURL",d.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",disabled:r,"aria-label":"Base URL"})]})]}),p.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pt-2",children:[p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Ki,{id:"provider-enabled",checked:e.isEnabled??!0,onCheckedChange:d=>t("isEnabled",d),disabled:r,"aria-labelledby":"provider-enabled-label"}),p.jsx($t,{id:"provider-enabled-label",htmlFor:"provider-enabled",children:"Enabled"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Ki,{id:"provider-autofetch",checked:e.autoFetchModels??!1,onCheckedChange:d=>t("autoFetchModels",d),disabled:!o||r,"aria-labelledby":"provider-autofetch-label"}),p.jsxs($t,{id:"provider-autofetch-label",htmlFor:"provider-autofetch",className:vt("text-sm",o?"":"text-muted-foreground"),children:["Auto-fetch models ",o?"":"(Not Supported)"]})]})]})]})},Kz=({apiKeys:e,onAddProvider:t,onCancel:n,initialType:r="openai",initialName:a="",initialApiKeyId:i=null})=>{var m;const[s,o]=C.useState(!1),[l,u]=C.useState({name:a,type:r,isEnabled:!0,apiKeyId:i,baseURL:null,autoFetchModels:tf(r)});C.useEffect(()=>{u(g=>({...g,name:a||g.name||"",type:r||g.type||null,apiKeyId:i||g.apiKeyId||null,autoFetchModels:r?tf(r):g.autoFetchModels}))},[a,r,i]);const d=C.useCallback((g,v)=>{u(b=>{var _,E;const w={...b,[g]:v},x=b.name||"";if(g==="type"){const T=v,k=(_=hc.find(j=>j.value===b.type))==null?void 0:_.label;w.apiKeyId=null,w.baseURL=null,w.autoFetchModels=T?tf(T):!1;const R=(E=hc.find(j=>j.value===T))==null?void 0:E.label;if(R&&(!x.trim()||x===k)&&(w.name=R),T&&E0(T)){const j=(e||[]).filter(I=>I.providerId===T);j.length>0&&(w.apiKeyId=j[0].id)}}return w})},[e]),h=C.useCallback(async()=>{var g,v;if(!((g=l.name)!=null&&g.trim())||!l.type){qe.error("Provider Name and Type are required.");return}o(!0);try{const b=l.type,w=l.autoFetchModels??tf(b),x={name:l.name.trim(),type:b,isEnabled:l.isEnabled??!0,apiKeyId:l.apiKeyId??null,baseURL:((v=l.baseURL)==null?void 0:v.trim())||null,enabledModels:null,autoFetchModels:w,fetchedModels:null,modelsLastFetchedAt:null};await t(x),n()}catch(b){console.error("Failed to add provider (from form component):",b)}finally{o(!1)}},[l,t,n]);return p.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),p.jsx(Wz,{formData:l,onChange:d,apiKeys:e,disabled:s}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:n,disabled:s,type:"button",children:[p.jsx(Di,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:h,disabled:s||!((m=l.name)!=null&&m.trim())||!l.type,type:"button",children:[s&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(kf,{className:"h-4 w-4 mr-1"})," ",s?"Adding...":"Add Provider"]})]})]})};var M_="Popover",[Zz,tIe]=_i(M_,[rd]),lb=rd(),[Nxe,gd]=Zz(M_),Yz=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!1}=e,o=lb(t),l=C.useRef(null),[u,d]=C.useState(!1),[h,m]=Io({prop:r,defaultProp:a??!1,onChange:i,caller:M_});return p.jsx(F1,{...o,children:p.jsx(Nxe,{scope:t,contentId:Ha(),triggerRef:l,open:h,onOpenChange:m,onOpenToggle:C.useCallback(()=>m(g=>!g),[m]),hasCustomAnchor:u,onCustomAnchorAdd:C.useCallback(()=>d(!0),[]),onCustomAnchorRemove:C.useCallback(()=>d(!1),[]),modal:s,children:n})})};Yz.displayName=M_;var Xz="PopoverAnchor",Rxe=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=gd(Xz,n),i=lb(n),{onCustomAnchorAdd:s,onCustomAnchorRemove:o}=a;return C.useEffect(()=>(s(),()=>o()),[s,o]),p.jsx(Ey,{...i,...r,ref:t})});Rxe.displayName=Xz;var Jz="PopoverTrigger",Qz=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=gd(Jz,n),i=lb(n),s=Nn(t,a.triggerRef),o=p.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":aU(a.open),...r,ref:s,onClick:Gt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?o:p.jsx(Ey,{asChild:!0,...i,children:o})});Qz.displayName=Jz;var TR="PopoverPortal",[Ixe,jxe]=Zz(TR,{forceMount:void 0}),eU=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=gd(TR,t);return p.jsx(Ixe,{scope:t,forceMount:n,children:p.jsx(Za,{present:n||i.open,children:p.jsx(Zp,{asChild:!0,container:a,children:r})})})};eU.displayName=TR;var Fp="PopoverContent",tU=C.forwardRef((e,t)=>{const n=jxe(Fp,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=gd(Fp,e.__scopePopover);return p.jsx(Za,{present:r||i.open,children:i.modal?p.jsx(Mxe,{...a,ref:t}):p.jsx(Oxe,{...a,ref:t})})});tU.displayName=Fp;var Dxe=Pu("PopoverContent.RemoveScroll"),Mxe=C.forwardRef((e,t)=>{const n=gd(Fp,e.__scopePopover),r=C.useRef(null),a=Nn(t,r),i=C.useRef(!1);return C.useEffect(()=>{const s=r.current;if(s)return A_(s)},[]),p.jsx(ob,{as:Dxe,allowPinchZoom:!0,children:p.jsx(nU,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(e.onCloseAutoFocus,s=>{var o;s.preventDefault(),i.current||(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Gt(e.onPointerDownOutside,s=>{const o=s.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,u=o.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:Gt(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1})})})}),Oxe=C.forwardRef((e,t)=>{const n=gd(Fp,e.__scopePopover),r=C.useRef(!1),a=C.useRef(!1);return p.jsx(nU,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),nU=C.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:s,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,m=gd(Fp,n),g=lb(n);return T_(),p.jsx(sb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(Gp,{asChild:!0,disableOutsidePointerEvents:s,onInteractOutside:d,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:p.jsx(L1,{"data-state":aU(m.open),role:"dialog",id:m.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),rU="PopoverClose",Pxe=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=gd(rU,n);return p.jsx(an.button,{type:"button",...r,ref:t,onClick:Gt(e.onClick,()=>a.onOpenChange(!1))})});Pxe.displayName=rU;var Fxe="PopoverArrow",Lxe=C.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=lb(n);return p.jsx(B1,{...a,...r,ref:t})});Lxe.displayName=Fxe;function aU(e){return e?"open":"closed"}var Bxe=Yz,$xe=Qz,zxe=eU,Uxe=tU;function Mo({...e}){return p.jsx(Bxe,{"data-slot":"popover",...e})}function Oo({...e}){return p.jsx($xe,{"data-slot":"popover-trigger",...e})}function Po({className:e,align:t="center",sideOffset:n=4,...r}){return p.jsx(zxe,{children:p.jsx(Uxe,{"data-slot":"popover-content",align:t,sideOffset:n,className:vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const vP=e=>{if(!e)return null;const t=parseFloat(e);return isNaN(t)?null:t/1e6},kR=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:s="h-48",onModelClick:o})=>{const[l,u]=C.useState(""),[d,h]=C.useState(!1),[m,g]=C.useState("all"),[v,b]=C.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),[w,x]=C.useState(""),[_,E]=C.useState(""),[T,k]=C.useState(""),[R,j]=C.useState(""),I=C.useMemo(()=>{let U=t;if(m==="enabled"?U=U.filter(J=>n.has(J.id)):m==="disabled"&&(U=U.filter(J=>!n.has(J.id))),l.trim()){const J=l.toLowerCase();U=U.filter(Q=>Q.name.toLowerCase().includes(J)||Q.id.toLowerCase().includes(J))}const M=Object.entries(v).filter(([,J])=>J).map(([J])=>J);M.length>0&&(U=U.filter(J=>{var fe;const Q=new Set(J.supported_parameters??[]),se=new Set(((fe=J.architecture)==null?void 0:fe.input_modalities)??[]);return M.every(ve=>{switch(ve){case"reasoning":return Q.has("reasoning");case"webSearch":return Q.has("web_search")||Q.has("web_search_options");case"tools":return Q.has("tools");case"multimodal":return Array.from(se).some(je=>je!=="text");default:return!0}})}));const W=parseFloat(w),V=parseFloat(_),ie=parseFloat(T),ae=parseFloat(R),ne=!isNaN(W),q=!isNaN(V),te=!isNaN(ie),G=!isNaN(ae);return(ne||q||te||G)&&(U=U.filter(J=>{var Xe,Le;const Q=vP((Xe=J.pricing)==null?void 0:Xe.prompt),se=vP((Le=J.pricing)==null?void 0:Le.completion),fe=ne?W/1e6:-1/0,ve=q?V/1e6:1/0,je=te?ie/1e6:-1/0,Ne=G?ae/1e6:1/0,Se=Q!==null&&Q>=fe&&Q<=ve,ye=se!==null&&se>=je&&se<=Ne;let Fe=!0;return(ne||q)&&Fe&&(Fe=Se),(te||G)&&Fe&&(Fe=ye),Fe})),U},[t,l,m,n,v,w,_,T,R]),P=U=>{b(M=>({...M,[U]:!M[U]}))},O=(m!=="all"?1:0)+Object.values(v).filter(Boolean).length+(w||_||T||R?1:0);return a?p.jsxs("div",{className:`space-y-2 ${s}`,children:[p.jsx($n,{className:"h-8 w-full"}),p.jsx($n,{className:"h-8 w-full"}),p.jsx($n,{className:"h-8 w-full"})]}):t.length===0?p.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):p.jsxs("div",{className:"space-y-2",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{value:l,onChange:U=>u(U.target.value),placeholder:"Filter models by name...",className:"pl-8 h-9 w-full text-xs",type:"text",disabled:i})]}),p.jsxs(Mo,{open:d,onOpenChange:h,children:[p.jsx(Oo,{asChild:!0,children:p.jsxs(Rt,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:i,children:[p.jsx(fA,{className:"h-4 w-4 mr-1"}),"Filters",O>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:O})]})}),p.jsxs(Po,{className:"w-72 p-4 space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx($t,{className:"text-xs font-semibold",children:"Status"}),p.jsxs("div",{className:"flex gap-1",children:[p.jsx(Rt,{variant:m==="all"?"secondary":"outline",size:"sm",onClick:()=>g("all"),children:"All"}),p.jsxs(Rt,{variant:m==="enabled"?"secondary":"outline",size:"sm",onClick:()=>g("enabled"),children:[p.jsx(Ga,{className:"h-3 w-3 mr-1"})," Enabled"]}),p.jsxs(Rt,{variant:m==="disabled"?"secondary":"outline",size:"sm",onClick:()=>g("disabled"),children:[p.jsx(zK,{className:"h-3 w-3 mr-1"})," Disabled"]})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx($t,{className:"text-xs font-semibold",children:"Capabilities"}),p.jsxs("div",{className:"flex flex-wrap gap-1",children:[p.jsx(Sn,{tooltipText:"Reasoning","aria-label":"Reasoning",icon:p.jsx(zp,{}),onClick:()=>P("reasoning"),variant:v.reasoning?"secondary":"outline",className:vt(v.reasoning&&"text-primary")}),p.jsx(Sn,{tooltipText:"Web Search","aria-label":"Web Search",icon:p.jsx(es,{}),onClick:()=>P("webSearch"),variant:v.webSearch?"secondary":"outline",className:vt(v.webSearch&&"text-primary")}),p.jsx(Sn,{tooltipText:"Tools","aria-label":"Tools",icon:p.jsx(vA,{}),onClick:()=>P("tools"),variant:v.tools?"secondary":"outline",className:vt(v.tools&&"text-primary")}),p.jsx(Sn,{tooltipText:"Multimodal","aria-label":"Multimodal",icon:p.jsx(mA,{}),onClick:()=>P("multimodal"),variant:v.multimodal?"secondary":"outline",className:vt(v.multimodal&&"text-primary")})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs($t,{className:"text-xs font-semibold flex items-center gap-1",children:[p.jsx(dZ,{className:"h-3 w-3"})," Price Range ($ / 1M Tokens)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsx(xn,{type:"number",min:"0",step:"0.01",placeholder:"Min Input",value:w,onChange:U=>x(U.target.value),className:"h-8 text-xs"}),p.jsx(xn,{type:"number",min:"0",step:"0.01",placeholder:"Max Input",value:_,onChange:U=>E(U.target.value),className:"h-8 text-xs"}),p.jsx(xn,{type:"number",min:"0",step:"0.01",placeholder:"Min Output",value:T,onChange:U=>k(U.target.value),className:"h-8 text-xs"}),p.jsx(xn,{type:"number",min:"0",step:"0.01",placeholder:"Max Output",value:R,onChange:U=>j(U.target.value),className:"h-8 text-xs"})]})]})]})]})]}),p.jsx(Es,{className:`${s} w-full rounded-md border border-border p-3 bg-background/50`,children:p.jsxs("div",{className:"space-y-2",children:[I.map(U=>p.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[p.jsx(Ki,{id:`enable-model-${e}-${U.id}`,checked:n.has(U.id),onCheckedChange:M=>r(U.id,M),disabled:i,"aria-label":`Enable model ${U.name||U.id}`,className:"flex-shrink-0",onClick:M=>M.stopPropagation()}),p.jsx($t,{htmlFor:`enable-model-${e}-${U.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate pl-2",title:U.name||U.id,onClick:o?()=>o(U.id):void 0,children:U.name||U.id})]},U.id)),I.length===0&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No models match the current filters."})]})})]})},Yd=gt.forwardRef(({className:e,href:t,children:n,...r},a)=>p.jsx("a",{ref:a,href:t,target:"_blank",rel:"noopener noreferrer",className:vt("font-medium text-primary underline-offset-4 hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...r,children:n}));Yd.displayName="Lnk";const Vxe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",fill:"none",stroke:n,strokeWidth:"4"}),p.jsx("circle",{cx:"12",cy:"12",r:"3",fill:"none",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1999 c-26 -15 -48 -65 -41 -94 15 -61 181 -167 304 -196 30 -7
100 -12 155 -12 81 1 115 6 178 27 135 45 247 133 249 194 2 60 -48 103 -104
88 -13 -3 -50 -25 -83 -50 -85 -64 -172 -90 -280 -84 -92 6 -165 35 -259 103
-49 35 -86 43 -119 24z`})})]})},Hxe=cA("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function dp({className:e,variant:t,asChild:n=!1,...r}){const a=n?v8:"span";return p.jsx(a,{"data-slot":"badge",className:vt(Hxe({variant:t}),e),...r})}const qxe=()=>{const[e,t]=C.useState(!1);C.useEffect(()=>{t(!0)},[]);const n={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.2,delayChildren:.3}}},r={hidden:{opacity:0,y:20},show:{opacity:1,y:0,transition:{duration:.5}}},a=[{word:"LiteChat",color:"bg-gradient-to-tr from-lime-500 via-amber-400 to-red-600 bg-clip-text text-transparent"},{word:"library",color:"text-emerald-500"},{word:"browser",color:"text-violet-500"},{word:"local",color:"text-amber-500"},{word:"remote",color:"text-sky-500"},{word:"providers",color:"text-purple-500"},{word:" AI ",color:"bg-gradient-to-b from-amber-300 to-rose-700 bg-clip-text text-transparent"},{word:"Open Source",color:"bg-gradient-to-r from-lime-500 to-yellow-500 bg-clip-text text-transparent"}],i=o=>{let l=[o];return a.forEach(({word:u,color:d})=>{l=l.reduce((h,m)=>typeof m!="string"?(h.push(m),h):(m.split(new RegExp(`(${u})`,"gi")).forEach((v,b)=>{v.toLowerCase()===u.toLowerCase()?h.push(p.jsx("span",{className:`${d} font-medium`,children:v},`${v}-${b}`)):h.push(v)}),h),[])}),l=l.reduce((u,d,h)=>{if(typeof d!="string")return u.push(d),u;const m=/(\([^)]*\))/g;return d.split(m).forEach((v,b)=>{m.test(v)?u.push(p.jsx("span",{className:"text-sm text-muted",children:v},`paren-${h}-${b}`)):u.push(v)}),u},[]),l},s=["Oh, hey?! Hi there!! How are you doing!?","Nice of you to pop by to checkout LiteChat!","What'd you mean you don't know what LiteChat is? Oh Boy hey, you in for a treat!","To start with, it's an(other) AI chat app (yes...shocker, right ?) and it's Open Source ! ","But, it is also an extensible library, so you can go on and create your own, AI chat app! With your own functionnalities !","(are AI chat apps the new JS frameworks?)","And cause I might be a wee bit on the reluctant side when it comes to parting with my coins, it doesn't require no servers! It all stays in your browser.","(that means I couldn't snoop on what you do here, even if I wanted to!)","While able to run LLM both local (did I tell you I ain't liking throwing coins out?) and from remote providers","(but sometimes you have to :(..)","To cap things off, there is no fancy/crazy tech involved, I just glued bricks together with AI","(kids call it vibing apparently ^^)","Enough of this interminable babble! Go setup your future chat to prompt your brains out!"];return p.jsxs(go.div,{className:"text-center max-w-4xl mx-auto space-y-3 my-6",initial:"hidden",animate:e?"show":"hidden",variants:n,children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsxs(dp,{variant:"outline",className:"px-3 py-1 bg-black/5 dark:bg-white/10 backdrop-blur-sm border-none",children:[p.jsx(V8,{className:"w-4 h-4 mr-2 text-yellow-500"}),p.jsx("span",{className:"text-sm",children:"Welcome to your future AI chat"})]})}),s.map((o,l)=>p.jsx(go.p,{className:`text-sm md:text-base ${l===0?"font-medium":""} leading-relaxed`,variants:r,children:i(o)},l)),p.jsxs(go.div,{variants:r,className:"pt-2",children:[p.jsx(dp,{className:"bg-gradient-to-r from-violet-600 to-primary border-none",children:"No server required!"}),p.jsx(dp,{className:"ml-2 bg-gradient-to-r from-amber-500 to-emerald-500 border-none",children:"100% in-browser"})]})]})};var AR="Progress",NR=100,[Gxe,nIe]=_i(AR),[Wxe,Kxe]=Gxe(AR),iU=C.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:a,getValueLabel:i=Zxe,...s}=e;(a||a===0)&&!wP(a)&&console.error(Yxe(`${a}`,"Progress"));const o=wP(a)?a:NR;r!==null&&!xP(r,o)&&console.error(Xxe(`${r}`,"Progress"));const l=xP(r,o)?r:null,u=r1(l)?i(l,o):void 0;return p.jsx(Wxe,{scope:n,value:l,max:o,children:p.jsx(an.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":r1(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":lU(l,o),"data-value":l??void 0,"data-max":o,...s,ref:t})})});iU.displayName=AR;var sU="ProgressIndicator",oU=C.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,a=Kxe(sU,n);return p.jsx(an.div,{"data-state":lU(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...r,ref:t})});oU.displayName=sU;function Zxe(e,t){return`${Math.round(e/t*100)}%`}function lU(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function r1(e){return typeof e=="number"}function wP(e){return r1(e)&&!isNaN(e)&&e>0}function xP(e,t){return r1(e)&&!isNaN(e)&&e<=t&&e>=0}function Yxe(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${NR}\`.`}function Xxe(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${NR} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var cU=iU,Jxe=oU;const Uk=C.forwardRef(({className:e,value:t,...n},r)=>p.jsx(cU,{ref:r,className:vt("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...n,children:p.jsx(Jxe,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Uk.displayName=cU.displayName;const Qxe=({stepNumber:e,title:t,description:n,isComplete:r,isActive:a,openOnComplete:i=!1,contentClassName:s="",icon:o,children:l})=>{const[u,d]=C.useState(!1);return C.useEffect(()=>{d(a||r&&i)},[a,r,i]),p.jsxs(E$,{className:`border border-border/40 bg-card/50 backdrop-blur-sm shadow-lg ${r?"border-l-4 border-l-green-500/70":a?"border-l-4 border-l-primary/70":""}`,children:[p.jsx(C$,{className:"pb-2",children:p.jsxs("div",{className:"flex items-center space-x-3",children:[p.jsx("div",{className:`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${r?"bg-green-500/20 text-green-500":a?"bg-primary/20 text-primary":"bg-muted text-muted-foreground"}`,children:r?p.jsx(b1,{className:"h-5 w-5"}):p.jsx("div",{className:"flex items-center justify-center",children:o})}),p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>d(!u),children:[p.jsxs(T$,{className:"text-base",children:[p.jsxs("span",{className:"opacity-60 mr-2",children:[e,"."]}),t]}),p.jsx("button",{className:`p-1 rounded-full transition-all ${u?"rotate-90":""} hover:bg-muted/60`,children:p.jsx(O8,{className:"h-4 w-4"})})]}),!u&&p.jsx(tge,{className:"text-xs mt-1",children:typeof n=="string"?n.substring(0,60)+(n.length>60?"...":""):"Click to expand"})]})]})}),p.jsx(oge,{children:u&&p.jsx(go.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden",children:p.jsxs(k$,{className:"pt-2",children:[typeof n=="string"?p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}):p.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:n}),p.jsx("div",{className:s,children:l})]})})})]})},e1e=()=>{const{apiKeys:e,addApiKey:t,providers:n,addProviderConfig:r,updateProviderConfig:a,getAllAvailableModelDefsForProvider:i,isLoading:s,enableApiKeyManagement:o}=Hn(cn(ve=>({apiKeys:ve.dbApiKeys,addApiKey:ve.addApiKey,providers:ve.dbProviderConfigs,addProviderConfig:ve.addProviderConfig,updateProviderConfig:ve.updateProviderConfig,getAllAvailableModelDefsForProvider:ve.getAllAvailableModelDefsForProvider,isLoading:ve.isLoading,enableApiKeyManagement:ve.enableApiKeyManagement}))),{toggleChatControlPanel:l,setInitialSettingsTabs:u}=Qi(cn(ve=>({toggleChatControlPanel:ve.toggleChatControlPanel,setInitialSettingsTabs:ve.setInitialSettingsTabs}))),{addConversation:d,selectItem:h}=hn(cn(ve=>({addConversation:ve.addConversation,selectItem:ve.selectItem}))),[m,g]=C.useState(!1),[v,b]=C.useState(!1),[w,x]=C.useState(!1),[_,E]=C.useState(!1),[T,k]=C.useState(!1),R=C.useMemo(()=>!o||e.length>0,[o,e]),j=C.useMemo(()=>n.length>0,[n]),I=C.useMemo(()=>n.some(ve=>ve.isEnabled&&ve.enabledModels&&ve.enabledModels.length>0),[n]),P=C.useMemo(()=>{const ve=[...n].sort((je,Ne)=>Ne.createdAt.getTime()-je.createdAt.getTime());return ve.length>0?ve[0]:null},[n]),O=C.useMemo(()=>P?i(P.id):[],[P,i]),U=C.useMemo(()=>new Set((P==null?void 0:P.enabledModels)??[]),[P]),{initialProviderTypeForForm:M,initialProviderNameForForm:W,initialApiKeyIdForForm:V}=C.useMemo(()=>{var ve;if(j)return{type:void 0,name:void 0,keyId:void 0};if(e.length>0){const Ne=[...e].sort((Se,ye)=>ye.createdAt.getTime()-Se.createdAt.getTime()).find(Se=>E0(Se.providerId));if(Ne){const Se=Ne.providerId,ye=((ve=hc.find(Fe=>Fe.value===Se))==null?void 0:ve.label)||Se;return{initialProviderTypeForForm:Se,initialProviderNameForForm:ye,initialApiKeyIdForForm:Ne.id}}}return{initialProviderTypeForForm:void 0,initialProviderNameForForm:void 0,initialApiKeyIdForForm:void 0}},[e,j]),ie=C.useCallback(async(ve,je,Ne)=>{g(!0);try{await t(ve,je,Ne),qe.success("API key added successfully!")}finally{g(!1)}},[t]),ae=C.useCallback(async ve=>{b(!0);try{const je={...ve,apiKeyId:ve.apiKeyId??(E0(ve.type)?V:null)},Ne=await r(je);return qe.success("Provider added successfully!"),Ne}finally{b(!1)}},[r,V]),ne=C.useCallback(async(ve,je)=>{if(!P)return;E(!0);const Ne=new Set(P.enabledModels??[]);je?Ne.add(ve):Ne.delete(ve);const Se=Array.from(Ne);try{await a(P.id,{enabledModels:Se}),qe.success(je?"Model enabled successfully!":"Model disabled successfully!")}catch(ye){qe.error("Failed to update model status."),console.error("Failed to save model toggle:",ye)}finally{E(!1)}},[P,a]),q=C.useCallback(async()=>{x(!0),k(!0);try{await new Promise(je=>setTimeout(je,800));const ve=await d({title:"New Chat"});await h(ve,"conversation"),qe.success("Welcome to your first chat!")}catch(ve){qe.error("Failed to start your first chat."),console.error("Failed to start first chat:",ve),x(!1),k(!1)}},[d,h]),te=(ve,je)=>{u(ve,je),l("settingsModal",!0)},G=[R,j,I].filter(Boolean).length,J=o?3:2,Q=G/J*100,se=[...o?[{id:"api-key",title:"Add API Key",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["To use providers like"," ",p.jsx(Yd,{href:"https://platform.openai.com/api-keys",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"OpenAI"}),","," ",p.jsx(Yd,{href:"https://aistudio.google.com/app/apikey",className:"text-green-600 hover:text-green-700 transition-colors",children:"Google"}),","," ",p.jsx(Yd,{href:"https://console.anthropic.com/settings/keys",className:"text-purple-500 hover:text-purple-700 transition-colors",children:"Anthropic (Claude)"}),", or"," ",p.jsx(Yd,{href:"https://openrouter.ai/keys",className:"text-orange-500 hover:text-orange-700 transition-colors",children:"OpenRouter"})," ","or any OpenAI API compatible provider, add an API key. Keys are stored securely in your browser."]}),p.jsxs("p",{children:['If you want truly local AI, "no internet required", you can setup'," ",p.jsx(Yd,{href:"https://www.ollama.com/",className:"text-teal-500 hover:text-teal-700 transition-colors",children:"Ollama"})," ","or,"," ",p.jsx(Yd,{href:"https://lmstudio.ai/",className:"text-indigo-500 hover:text-indigo-700 transition-colors",children:"LMStudio"})," ","(or any other local LLM solution with an OpenAI compatible API). These typically don't require API keys so see you in step 2."]})]}),isComplete:R,content:p.jsx(zz,{onSave:ie,onCancel:()=>{},isSaving:m,className:"border-none shadow-none p-0",initialProviderType:M}),icon:p.jsx(i0,{className:"h-4 w-4"})}]:[],{id:"add-provider",title:"Add AI Provider",description:p.jsxs("div",{className:"space-y-2",children:[p.jsx("p",{children:"Connect to an AI provider you configured the key for..."}),p.jsx("p",{children:"This might look redundant, but it allows you to have multiple keys for the same provider (personal, professional, etc.)"})]}),isComplete:j,content:p.jsx(Kz,{apiKeys:e,onAddProvider:ae,onCancel:()=>{},initialType:M,initialName:W,initialApiKeyId:V}),icon:p.jsx(Zw,{className:"h-4 w-4"})},{id:"enable-models",title:"Enable Models",description:p.jsxs("div",{className:"space-y-2",children:[p.jsxs("p",{children:["Enable models for the provider you just added (",p.jsx("span",{className:"font-medium text-primary",children:(P==null?void 0:P.name)||"..."}),")."]}),p.jsx("p",{children:"Enabling specific models improves the UI by reducing clutter and choice paralysis. You can enable more later in Settings."}),p.jsx("p",{children:"And just like before, you can choose to activate a model for a certain combination of key/provider!"})]}),isComplete:I,content:P?p.jsx("div",{className:"bg-card/40 rounded-lg p-3 border border-border/30 shadow-inner",children:p.jsx(kR,{providerId:P.id,allAvailableModels:O,enabledModelIds:U,onToggleModel:ne,isLoading:s||_,listHeightClass:"h-48"})}):p.jsxs("p",{className:"text-sm text-muted-foreground italic flex items-center",children:[p.jsx(Ec,{className:"h-4 w-4 mr-2 text-amber-500"}),"Add a provider in Step ",o?"2":"1"," first."]}),icon:p.jsx(zp,{className:"h-4 w-4"})},{id:"start-chat",title:"Start Chatting",description:"You're all set! Click below to start your first chat.",isComplete:!1,content:p.jsxs("div",{children:[T&&p.jsx(go.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-4",children:p.jsx(Uk,{value:w?void 0:100,className:"h-2"})}),p.jsxs(Rt,{onClick:q,disabled:w||!I,className:"w-full bg-gradient-to-r from-indigo-500 to-primary hover:opacity-90 transition-all",children:[p.jsx(XZ,{className:"mr-2 h-4 w-4"}),w?"Launching...":"Start First Chat"]}),p.jsx(A$,{})]}),contentClassName:"p-4",icon:p.jsx(hY,{className:"h-4 w-4"})}],fe=se.findIndex(ve=>!ve.isComplete);return s?p.jsx("div",{className:"flex h-full flex-col items-center justify-center p-4 space-y-4 max-w-4xl mx-auto w-full",children:p.jsxs(go.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"w-full",children:[p.jsx($n,{className:"h-12 w-1/2 mx-auto mb-6"}),p.jsx($n,{className:"h-8 w-3/4 mx-auto mb-2"}),p.jsx($n,{className:"h-4 w-1/2 mx-auto mb-8"}),p.jsx($n,{className:"h-20 w-full mb-6"}),p.jsx($n,{className:"h-20 w-full mb-6"}),p.jsx($n,{className:"h-20 w-full"})]})}):p.jsx(go.div,{className:"flex h-full flex-col items-center justify-center p-4 bg-gradient-to-b from-background to-background/80",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:p.jsxs("div",{className:"w-full max-w-4xl space-y-6",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(go.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",stiffness:500,damping:30},children:p.jsxs("div",{className:"relative mx-auto w-16 h-16 mb-4",children:[p.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full blur-xl"}),p.jsx("div",{className:"relative bg-gradient-to-br from-primary to-indigo-600 p-3 rounded-full",children:p.jsx(Vxe,{className:"h-10 w-10 text-white"})})]})}),p.jsx("h2",{className:"text-3xl font-bold mb-3 bg-gradient-to-r from-primary to-indigo-500 bg-clip-text text-transparent",children:"Welcome to LiteChat"}),p.jsx("div",{className:"relative",children:p.jsx(qxe,{})}),p.jsx(Un,{children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs("div",{className:"mt-6 bg-card/40 backdrop-blur-sm border border-border/30 rounded-xl p-3 w-3/4 mx-auto",children:[p.jsx(Uk,{value:Q,className:"h-1.5"}),p.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Setup Progress: ",Math.round(Q),"%"]})]})}),p.jsx(Yn,{children:p.jsxs("p",{children:["Steps completed: ",G," of ",J]})})]})})]}),p.jsx(go.div,{className:"space-y-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:se.map((ve,je)=>{const Ne=je===fe;return p.jsx(go.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:je*.1},children:p.jsx(Qxe,{stepNumber:je+1,title:ve.title,description:ve.description,isComplete:ve.id!=="start-chat"&&ve.isComplete,isActive:Ne,openOnComplete:ve.id==="enable-models",contentClassName:ve.id==="add-provider"||ve.id==="api-key"?"p-0 border-none shadow-none bg-transparent":ve.contentClassName,icon:ve.icon,children:ve.content})},ve.id)})}),!s&&!j&&fe===-1&&p.jsxs(go.div,{className:"text-center mt-6 p-4 bg-red-500/10 rounded-lg border border-red-500/30",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:[p.jsx(Ec,{className:"h-8 w-8 text-red-500 mx-auto mb-2"}),p.jsx("p",{className:"text-sm mb-3",children:"Configuration issue detected. Please review provider settings."}),p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>te("providers"),className:"border-red-500/50 hover:bg-red-500/20 transition-colors",children:"Open Provider Settings"})]})]})})},t1e=["conversation.title_generation"],n1e=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:s})=>{const o=C.useRef(null),l=C.useRef(null),[u,d]=C.useState(!1),h=C.useRef(null),m=On(O=>O.streamingInteractionIds),{chatMaxWidth:g,autoScrollInterval:v,enableAutoScrollOnStream:b}=ar(cn(O=>({chatMaxWidth:O.chatMaxWidth,autoScrollInterval:O.autoScrollInterval,enableAutoScrollOnStream:O.enableAutoScrollOnStream}))),{isLoading:w}=Hn(cn(O=>({isLoading:O.isLoading}))),{conversationCount:x,isConversationLoading:_}=hn(cn(O=>({conversationCount:O.conversations.length,isConversationLoading:O.isLoading}))),{projectCount:E,isProjectLoading:T}=ri(cn(O=>({projectCount:O.projects.length,isProjectLoading:O.isLoading}))),k=C.useMemo(()=>w||_||T?!1:x===0&&E===0,[x,E,w,_,T]),R=C.useMemo(()=>{const O=[],U=new Set;return[...t].sort((W,V)=>W.index-V.index).forEach(W=>{if(!U.has(W.id)&&!t1e.includes(W.type)){const V=[W];U.add(W.id),O.push(V)}}),O},[t]),j=(O="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:O})};C.useEffect(()=>{if(l.current){const{scrollHeight:O,clientHeight:U,scrollTop:M}=l.current;(O-U<=M+150||n!=="streaming")&&requestAnimationFrame(()=>{j(n==="streaming"?"smooth":"auto")})}},[R.length,n]),C.useEffect(()=>(n==="streaming"&&b?(h.current&&clearInterval(h.current),h.current=setInterval(()=>{j("smooth")},v)):h.current&&(clearInterval(h.current),h.current=null),()=>{h.current&&clearInterval(h.current)}),[n,v,b]),C.useEffect(()=>{const O=l.current;if(!O)return;const U=()=>{const{scrollHeight:M,clientHeight:W,scrollTop:V}=O,ie=V<M-W-W*.5;d(ie)};return O.addEventListener("scroll",U,{passive:!0}),U(),()=>{O.removeEventListener("scroll",U)}},[]),C.useEffect(()=>{o.current&&(l.current=o.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const I=()=>w||_||T?p.jsxs("div",{className:"space-y-4 p-2 md:p-4",children:[p.jsx($n,{className:"h-24 w-full"}),p.jsx($n,{className:"h-32 w-full"}),p.jsx($n,{className:"h-20 w-full"})]}):k?p.jsx(e1e,{}):e?R.length===0&&n!=="streaming"?p.jsx(GM,{}):p.jsxs("div",{className:"space-y-4 p-2 md:p-4 break-words",children:[R.map(O=>{const U=O[0];return m.includes(U.id)?p.jsx(gk,{interactionId:U.id,onStop:s},`${U.id}-streaming`):p.jsx(u$,{interaction:U,onEdit:i,onRegenerate:a,onDelete:void 0},U.id)}),n==="streaming"&&m.filter(O=>!t.some(U=>U.id===O)).map(O=>p.jsx(gk,{interactionId:O,onStop:s},`${O}-streaming-new`))]}):p.jsx(GM,{}),P=g||"max-w-7xl";return p.jsxs("div",{className:vt("flex-grow relative",r),children:[p.jsx(Es,{className:"h-full w-full",ref:o,children:p.jsx("div",{className:vt("chat-canvas-container mx-auto",P),children:I()})}),u&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>j(),"aria-label":"Scroll to bottom",children:p.jsx(FK,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"left",children:"Scroll to Bottom"})]})})]})},Hh=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:p.jsx("div",{className:vt(r),children:a.map(i=>{const s=n==="icon"?i.iconRenderer:i.renderer;return p.jsx(gt.Fragment,{children:s?s():null},i.id)})})},r1e=Symbol("Let zodToJsonSchema decide on which parser to use"),_P={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},a1e=e=>typeof e=="string"?{..._P,name:e}:{..._P,...e},i1e=e=>{const t=a1e(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function uU(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function _r(e,t,n,r,a){e[t]=n,uU(e,t,r,a)}function s1e(){return{}}function o1e(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==qt.ZodAny&&(n.items=pr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&_r(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&_r(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(_r(n,"minItems",e.exactLength.value,e.exactLength.message,t),_r(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function l1e(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?_r(n,"minimum",r.value,r.message,t):_r(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),_r(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?_r(n,"maximum",r.value,r.message,t):_r(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),_r(n,"maximum",r.value,r.message,t));break;case"multipleOf":_r(n,"multipleOf",r.value,r.message,t);break}return n}function c1e(){return{type:"boolean"}}function dU(e,t){return pr(e.type._def,t)}const u1e=(e,t)=>pr(e.innerType._def,t);function fU(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>fU(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return d1e(e,t)}}const d1e=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":_r(n,"minimum",r.value,r.message,t);break;case"max":_r(n,"maximum",r.value,r.message,t);break}return n};function f1e(e,t){return{...pr(e.innerType._def,t),default:e.defaultValue()}}function h1e(e,t){return t.effectStrategy==="input"?pr(e.schema._def,t):{}}function p1e(e){return{type:"string",enum:Array.from(e.values)}}const m1e=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function g1e(e,t){const n=[pr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),pr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(m1e(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let s=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:o,...l}=i;s=l}else r=void 0;a.push(s)}}),a.length?{allOf:a,...r}:void 0}function y1e(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let QC;const uo={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(QC===void 0&&(QC=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),QC),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function hU(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":_r(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":_r(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":fo(n,"email",r.message,t);break;case"format:idn-email":fo(n,"idn-email",r.message,t);break;case"pattern:zod":Ri(n,uo.email,r.message,t);break}break;case"url":fo(n,"uri",r.message,t);break;case"uuid":fo(n,"uuid",r.message,t);break;case"regex":Ri(n,r.regex,r.message,t);break;case"cuid":Ri(n,uo.cuid,r.message,t);break;case"cuid2":Ri(n,uo.cuid2,r.message,t);break;case"startsWith":Ri(n,RegExp(`^${eT(r.value,t)}`),r.message,t);break;case"endsWith":Ri(n,RegExp(`${eT(r.value,t)}$`),r.message,t);break;case"datetime":fo(n,"date-time",r.message,t);break;case"date":fo(n,"date",r.message,t);break;case"time":fo(n,"time",r.message,t);break;case"duration":fo(n,"duration",r.message,t);break;case"length":_r(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),_r(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{Ri(n,RegExp(eT(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&fo(n,"ipv4",r.message,t),r.version!=="v4"&&fo(n,"ipv6",r.message,t);break}case"base64url":Ri(n,uo.base64url,r.message,t);break;case"jwt":Ri(n,uo.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&Ri(n,uo.ipv4Cidr,r.message,t),r.version!=="v4"&&Ri(n,uo.ipv6Cidr,r.message,t);break}case"emoji":Ri(n,uo.emoji(),r.message,t);break;case"ulid":{Ri(n,uo.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{fo(n,"binary",r.message,t);break}case"contentEncoding:base64":{_r(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{Ri(n,uo.base64,r.message,t);break}}break}case"nanoid":Ri(n,uo.nanoid,r.message,t)}return n}function eT(e,t){return t.patternStrategy==="escape"?v1e(e):e}const b1e=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function v1e(e){let t="";for(let n=0;n<e.length;n++)b1e.has(e[n])||(t+="\\"),t+=e[n];return t}function fo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):_r(e,"format",t,n,r)}function Ri(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:SP(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):_r(e,"pattern",SP(t,r),n,r)}function SP(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,s=!1,o=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(s){if(r[u].match(/[a-z]/)){o?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),o=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],o=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=s?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:s&&r[u]==="]"?s=!1:!s&&r[u]==="["&&(s=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function pU(e,t){var r,a,i,s,o,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===qt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===qt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=hU(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((s=e.keyType)==null?void 0:s._def.typeName)===qt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((o=e.keyType)==null?void 0:o._def.typeName)===qt.ZodBranded&&e.keyType._def.type._def.typeName===qt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=dU(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function w1e(e,t){if(t.mapStrategy==="record")return pU(e,t);const n=pr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function x1e(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function _1e(){return{not:{}}}function S1e(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const a1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function E1e(e,t){if(t.target==="openApi3")return EP(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in a1&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const s=a1[i._def.typeName];return s&&!a.includes(s)?[...a,s]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const s=typeof i._def.value;switch(s){case"string":case"number":case"boolean":return[...a,s];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,s,o)=>o.indexOf(i)===s);return{type:a.length>1?a:a[0],enum:n.reduce((i,s)=>i.includes(s._def.value)?i:[...i,s._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return EP(e,t)}const EP=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>pr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function C1e(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:a1[e.innerType._def.typeName],nullable:!0}:{type:[a1[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=pr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function T1e(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",uU(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?_r(n,"minimum",r.value,r.message,t):_r(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),_r(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?_r(n,"maximum",r.value,r.message,t):_r(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),_r(n,"maximum",r.value,r.message,t));break;case"multipleOf":_r(n,"multipleOf",r.value,r.message,t);break}return n}function k1e(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const o in i){let l=i[o];if(l===void 0||l._def===void 0)continue;let u=N1e(l);u&&n&&(l instanceof xo&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=pr(l._def,{...t,currentPath:[...t.currentPath,"properties",o],propertyPath:[...t.currentPath,"properties",o]});d!==void 0&&(r.properties[o]=d,u||a.push(o))}a.length&&(r.required=a);const s=A1e(e,t);return s!==void 0&&(r.additionalProperties=s),r}function A1e(e,t){if(e.catchall._def.typeName!=="ZodNever")return pr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function N1e(e){try{return e.isOptional()}catch{return!0}}const R1e=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return pr(e.innerType._def,t);const n=pr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},I1e=(e,t)=>{if(t.pipeStrategy==="input")return pr(e.in._def,t);if(t.pipeStrategy==="output")return pr(e.out._def,t);const n=pr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=pr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function j1e(e,t){return pr(e.type._def,t)}function D1e(e,t){const r={type:"array",uniqueItems:!0,items:pr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&_r(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&_r(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function M1e(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>pr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:pr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>pr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function O1e(){return{not:{}}}function P1e(){return{}}const F1e=(e,t)=>pr(e.innerType._def,t),L1e=(e,t,n)=>{switch(t){case qt.ZodString:return hU(e,n);case qt.ZodNumber:return T1e(e,n);case qt.ZodObject:return k1e(e,n);case qt.ZodBigInt:return l1e(e,n);case qt.ZodBoolean:return c1e();case qt.ZodDate:return fU(e,n);case qt.ZodUndefined:return O1e();case qt.ZodNull:return S1e(n);case qt.ZodArray:return o1e(e,n);case qt.ZodUnion:case qt.ZodDiscriminatedUnion:return E1e(e,n);case qt.ZodIntersection:return g1e(e,n);case qt.ZodTuple:return M1e(e,n);case qt.ZodRecord:return pU(e,n);case qt.ZodLiteral:return y1e(e,n);case qt.ZodEnum:return p1e(e);case qt.ZodNativeEnum:return x1e(e);case qt.ZodNullable:return C1e(e,n);case qt.ZodOptional:return R1e(e,n);case qt.ZodMap:return w1e(e,n);case qt.ZodSet:return D1e(e,n);case qt.ZodLazy:return()=>e.getter()._def;case qt.ZodPromise:return j1e(e,n);case qt.ZodNaN:case qt.ZodNever:return _1e();case qt.ZodEffects:return h1e(e,n);case qt.ZodAny:return s1e();case qt.ZodUnknown:return P1e();case qt.ZodDefault:return f1e(e,n);case qt.ZodBranded:return dU(e,n);case qt.ZodReadonly:return F1e(e,n);case qt.ZodCatch:return u1e(e,n);case qt.ZodPipeline:return I1e(e,n);case qt.ZodFunction:case qt.ZodVoid:case qt.ZodSymbol:return;default:return(r=>{})()}};function pr(e,t,n=!1){var o;const r=t.seen.get(e);if(t.override){const l=(o=t.override)==null?void 0:o.call(t,e,t,r,n);if(l!==r1e)return l}if(r&&!n){const l=B1e(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=L1e(e,e.typeName,t),s=typeof i=="function"?pr(i(),t):i;if(s&&z1e(e,t,s),t.postProcess){const l=t.postProcess(s,e,t);return a.jsonSchema=s,l}return a.jsonSchema=s,s}const B1e=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:$1e(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},$1e=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},z1e=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),U1e=(e,t)=>{const n=i1e(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:pr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=pr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},s=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;s!==void 0&&(i.title=s);const o=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?o.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(o.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in o||"oneOf"in o||"allOf"in o||"type"in o&&Array.isArray(o.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),o};var iy={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},sy={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},oy={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},ly={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},cy={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},V1e=[iy,sy,oy,ly,cy];iy.code+"",sy.code+"",oy.code+"",ly.code+"",cy.code+"";iy.name+"",iy.code,sy.name+"",sy.code,oy.name+"",oy.code,ly.name+"",ly.code,cy.name+"",cy.code;V1e.map(e=>e.code);function H1e(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function s(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&s(u,l)):n=l;break}}}let o=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{o+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{o+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{o+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?o+="true".slice(d.length):"false".startsWith(d)?o+="false".slice(d.length):"null".startsWith(d)&&(o+="null".slice(d.length))}}return o}function q1e(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=mf({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=mf({text:H1e(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var G1e={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},W1e={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},K1e={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},Z1e={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},Y1e={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},X1e={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},J1e={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},Q1e={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},e_e={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},t_e={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},n_e={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},r_e={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},a_e={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},i_e={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},s_e={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},o_e={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},O_=[G1e,W1e,K1e,Z1e,Y1e,X1e,J1e,Q1e,e_e,t_e,n_e,r_e,a_e,i_e,s_e,o_e];Object.fromEntries(O_.map(e=>[e.code,e]));Object.fromEntries(O_.map(e=>[e.name,e.code]));O_.map(e=>e.code);function fi(e,t){const n=O_.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function l_e(e,t){var n;const r=(n=void 0)!=null?n:!1;return c_e(U1e(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var Vk=Symbol.for("vercel.ai.schema");function c_e(e,{validate:t}={}){return{[Vk]:!0,_type:void 0,[nx]:!0,jsonSchema:e,validate:t}}function u_e(e){return typeof e=="object"&&e!==null&&Vk in e&&e[Vk]===!0&&"jsonSchema"in e&&"validate"in e}function P_(e){return u_e(e)?e:l_e(e)}const CP=globalThis||void 0||self;var d_e=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof CP=="object"?CP:{},sf="1.9.0",TP=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function f_e(e){var t=new Set([e]),n=new Set,r=e.match(TP);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(o){return n.add(o),!1}function s(o){return t.add(o),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(TP);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?s(l):i(l):a.minor<=d.minor?s(l):i(l)}}var h_e=f_e(sf),p_e=sf.split(".")[0],uy=Symbol.for("opentelemetry.js.api."+p_e),dy=d_e;function RR(e,t,n,r){var a;r===void 0&&(r=!1);var i=dy[uy]=(a=dy[uy])!==null&&a!==void 0?a:{version:sf};if(!r&&i[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(s.stack||s.message),!1}if(i.version!==sf){var s=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+sf);return n.error(s.stack||s.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+sf+"."),!0}function fy(e){var t,n,r=(t=dy[uy])===null||t===void 0?void 0:t.version;if(!(!r||!h_e(r)))return(n=dy[uy])===null||n===void 0?void 0:n[e]}function IR(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+sf+".");var n=dy[uy];n&&delete n[e]}var m_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},g_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},y_e=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Og("verbose",this._namespace,t)},e}();function Og(e,t,n){var r=fy("diag");if(r)return n.unshift(t),r[e].apply(r,g_e([],m_e(n),!1))}var ys;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(ys||(ys={}));function b_e(e,t){e<ys.NONE?e=ys.NONE:e>ys.ALL&&(e=ys.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",ys.ERROR),warn:n("warn",ys.WARN),info:n("info",ys.INFO),debug:n("debug",ys.DEBUG),verbose:n("verbose",ys.VERBOSE)}}var v_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},w_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},x_e="diag",i1=function(){function e(){function t(a){return function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var o=fy("diag");if(o)return o[a].apply(o,w_e([],v_e(i),!1))}}var n=this,r=function(a,i){var s,o,l;if(i===void 0&&(i={logLevel:ys.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((s=u.stack)!==null&&s!==void 0?s:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=fy("diag"),h=b_e((o=i.logLevel)!==null&&o!==void 0?o:ys.INFO,a);if(d&&!i.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),h.warn("Current logger will overwrite one already registered from "+m)}return RR("diag",h,n,!0)};n.setLogger=r,n.disable=function(){IR(x_e,n)},n.createComponentLogger=function(a){return new y_e(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function __e(e){return Symbol.for(e)}var S_e=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),E_e=new S_e,C_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},T_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},k_e=function(){function e(){}return e.prototype.active=function(){return E_e},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,T_e([r],C_e(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),A_e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],s;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(o){s={error:o}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i},N_e=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},tT="context",R_e=new k_e,mU=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return RR(tT,t,i1.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(a=this._getContextManager()).with.apply(a,N_e([t,n,r],A_e(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return fy(tT)||R_e},e.prototype.disable=function(){this._getContextManager().disable(),IR(tT,i1.instance())},e}(),Hk;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(Hk||(Hk={}));var gU="0000000000000000",yU="00000000000000000000000000000000",I_e={traceId:yU,spanId:gU,traceFlags:Hk.NONE},t0=function(){function e(t){t===void 0&&(t=I_e),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),jR=__e("OpenTelemetry Context Key SPAN");function DR(e){return e.getValue(jR)||void 0}function j_e(){return DR(mU.getInstance().active())}function MR(e,t){return e.setValue(jR,t)}function D_e(e){return e.deleteValue(jR)}function M_e(e,t){return MR(e,new t0(t))}function bU(e){var t;return(t=DR(e))===null||t===void 0?void 0:t.spanContext()}var O_e=/^([0-9a-f]{32})$/i,P_e=/^[0-9a-f]{16}$/i;function F_e(e){return O_e.test(e)&&e!==yU}function L_e(e){return P_e.test(e)&&e!==gU}function vU(e){return F_e(e.traceId)&&L_e(e.spanId)}function B_e(e){return new t0(e)}var nT=mU.getInstance(),wU=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=nT.active());var a=!!(n!=null&&n.root);if(a)return new t0;var i=r&&bU(r);return $_e(i)&&vU(i)?new t0(i):new t0},e.prototype.startActiveSpan=function(t,n,r,a){var i,s,o;if(!(arguments.length<2)){arguments.length===2?o=n:arguments.length===3?(i=n,o=r):(i=n,s=r,o=a);var l=s??nT.active(),u=this.startSpan(t,i,l),d=MR(l,u);return nT.with(d,o,void 0,u)}},e}();function $_e(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var z_e=new wU,U_e=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):z_e},e}(),V_e=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new wU},e}(),H_e=new V_e,kP=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new U_e(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:H_e},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),s1;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(s1||(s1={}));var rT="trace",q_e=function(){function e(){this._proxyTracerProvider=new kP,this.wrapSpanContext=B_e,this.isSpanContextValid=vU,this.deleteSpan=D_e,this.getSpan=DR,this.getActiveSpan=j_e,this.getSpanContext=bU,this.setSpan=MR,this.setSpanContext=M_e}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=RR(rT,this._proxyTracerProvider,i1.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return fy(rT)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){IR(rT,i1.instance()),this._proxyTracerProvider=new kP},e}(),G_e=q_e.getInstance(),W_e=Object.defineProperty,OR=(e,t)=>{for(var n in t)W_e(e,n,{get:t[n],enumerable:!0})};function o1(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function AP(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function NP({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:o,value:l}=await i.read();if(o)break;e.write(l)}}catch(o){throw o}finally{e.end()}})()}var xU="AI_InvalidArgumentError",_U=`vercel.ai.error.${xU}`,K_e=Symbol.for(_U),SU,mo=class extends Rn{constructor({parameter:e,value:t,message:n}){super({name:xU,message:`Invalid argument for parameter ${e}: ${n}`}),this[SU]=!0,this.parameter=e,this.value=t}static isInstance(e){return Rn.hasMarker(e,_U)}};SU=K_e;var EU="AI_RetryError",CU=`vercel.ai.error.${EU}`,Z_e=Symbol.for(CU),TU,RP=class extends Rn{constructor({message:e,reason:t,errors:n}){super({name:EU,message:e}),this[TU]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Rn.hasMarker(e,CU)}};TU=Z_e;var Y_e=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>kU(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function kU(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Pw(i)||t===0)throw i;const s=yJ(i),o=[...a,i],l=o.length;if(l>t)throw new RP({message:`Failed after ${l} attempts. Last error: ${s}`,reason:"maxRetriesExceeded",errors:o});if(i instanceof Error&&Gs.isInstance(i)&&i.isRetryable===!0&&l<=t)return await pJ(n),kU(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},o);throw l===1?i:new RP({message:`Failed after ${l} attempts with non-retryable error: '${s}'`,reason:"errorNotRetryable",errors:o})}}function X_e({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new mo({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new mo({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:Y_e({maxRetries:t})}}function qk({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function J_e({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[s,o])=>(i[`ai.settings.${s}`]=o,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[s,o])=>(i[`ai.telemetry.metadata.${s}`]=o,i),{}),...Object.entries(r??{}).reduce((i,[s,o])=>(o!==void 0&&(i[`ai.request.headers.${s}`]=o),i),{})}}var Q_e={startSpan(){return Aw},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Aw);if(typeof n=="function")return n(Aw);if(typeof r=="function")return r(Aw)}},Aw={spanContext(){return eSe},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},eSe={traceId:"",spanId:"",traceFlags:0};function tSe({isEnabled:e=!1,tracer:t}={}){return e?t||G_e.getTracer("ai"):Q_e}function Gk({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const s=await r(i);return a&&i.end(),s}catch(s){try{s instanceof Error?(i.recordException({name:s.name,message:s.message,stack:s.stack}),i.setStatus({code:s1.ERROR,message:s.message})):i.setStatus({code:s1.ERROR})}finally{i.end()}throw s}})}function rp({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var nSe=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=Lu(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=A1(this.base64Data)),this.uint8ArrayData}},rSe=class extends nSe{constructor(e){super(e),this.type="file"}},aSe=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}],iSe=e=>{const t=typeof e=="string"?A1(e):e,n=(t[6]&127)<<21|(t[7]&127)<<14|(t[8]&127)<<7|t[9]&127;return t.slice(n+10)};function sSe(e){return typeof e=="string"&&e.startsWith("SUQz")||typeof e!="string"&&e.length>10&&e[0]===73&&e[1]===68&&e[2]===51?iSe(e):e}function oSe({data:e,signatures:t}){const n=sSe(e);for(const r of t)if(typeof n=="string"?n.startsWith(r.base64Prefix):n.length>=r.bytesPrefix.length&&r.bytesPrefix.every((a,i)=>n[i]===a))return r.mimeType}var AU="AI_NoObjectGeneratedError",NU=`vercel.ai.error.${AU}`,lSe=Symbol.for(NU),RU,IP=class extends Rn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a,finishReason:i}){super({name:AU,message:e,cause:t}),this[RU]=!0,this.text=n,this.response=r,this.usage=a,this.finishReason=i}static isInstance(e){return Rn.hasMarker(e,NU)}};RU=lSe;var IU="AI_DownloadError",jU=`vercel.ai.error.${IU}`,cSe=Symbol.for(jU),DU,aT=class extends Rn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:IU,message:a,cause:r}),this[DU]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Rn.hasMarker(e,jU)}};DU=cSe;async function uSe({url:e}){var t;const n=e.toString();try{const r=await fetch(n);if(!r.ok)throw new aT({url:n,statusCode:r.status,statusText:r.statusText});return{data:new Uint8Array(await r.arrayBuffer()),mimeType:(t=r.headers.get("content-type"))!=null?t:void 0}}catch(r){throw aT.isInstance(r)?r:new aT({url:n,cause:r})}}var MU="AI_InvalidDataContentError",OU=`vercel.ai.error.${MU}`,dSe=Symbol.for(OU),PU,jP=class extends Rn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:MU,message:n,cause:t}),this[PU]=!0,this.content=e}static isInstance(e){return Rn.hasMarker(e,OU)}};PU=dSe;var FU=z.union([z.string(),z.instanceof(Uint8Array),z.instanceof(ArrayBuffer),z.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function LU(e){return typeof e=="string"?e:e instanceof ArrayBuffer?Lu(new Uint8Array(e)):Lu(e)}function l1(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return A1(e)}catch(t){throw new jP({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new jP({content:e})}function fSe(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var BU="AI_InvalidMessageRoleError",$U=`vercel.ai.error.${BU}`,hSe=Symbol.for($U),zU,pSe=class extends Rn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:BU,message:t}),this[zU]=!0,this.role=e}static isInstance(e){return Rn.hasMarker(e,$U)}};zU=hSe;function mSe(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function gSe({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=uSe}){const a=await bSe(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>ySe(i,a))]}function ySe(e,t){var n,r,a,i,s,o;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>vSe(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:LU(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};default:{const u=l;throw new pSe({role:u})}}}async function bSe(e,t,n,r){const a=e.filter(s=>s.role==="user").map(s=>s.content).filter(s=>Array.isArray(s)).flat().filter(s=>s.type==="image"||s.type==="file").filter(s=>!(s.type==="image"&&n===!0)).map(s=>s.type==="image"?s.image:s.data).map(s=>typeof s=="string"&&(s.startsWith("http:")||s.startsWith("https:"))?new URL(s):s).filter(s=>s instanceof URL).filter(s=>!r(s)),i=await Promise.all(a.map(async s=>({url:s,data:await t({url:s})})));return Object.fromEntries(i.map(({url:s,data:o})=>[s.toString(),o]))}function vSe(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let s=e.mimeType,o,l,u;const d=e.type;switch(d){case"image":o=e.image;break;case"file":o=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof o=="string"?new URL(o):o}catch{l=o}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:m}=mSe(l.toString());if(h==null||m==null)throw new Error(`Invalid data URL format in part ${d}`);s=h,u=l1(m)}else{const h=t[l.toString()];h?(u=h.data,s??(s=h.mimeType)):u=l}else u=l1(l);switch(d){case"image":return u instanceof Uint8Array&&(s=(r=oSe({data:u,signatures:aSe}))!=null?r:s),{type:"image",image:u,mimeType:s,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(s==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?LU(u):u,filename:e.filename,mimeType:s,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function wSe({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s,seed:o}){if(e!=null){if(!Number.isInteger(e))throw new mo({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new mo({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new mo({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new mo({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new mo({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new mo({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new mo({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(o!=null&&!Number.isInteger(o))throw new mo({parameter:"seed",value:o,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:s!=null&&s.length>0?s:void 0,seed:o}}function DP(e){var t,n,r;const a=[];for(const i of e){let s;try{s=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(s.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:s});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:s,mimeType:i.contentType})}break}case"data:":{let o,l,u;try{[o,l]=i.url.split(","),u=o.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:l1(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:fSe(l1(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${s.protocol}`)}}return a}var UU="AI_MessageConversionError",VU=`vercel.ai.error.${UU}`,xSe=Symbol.for(VU),HU,iT=class extends Rn{constructor({originalMessage:e,message:t}){super({name:UU,message:t}),this[HU]=!0,this.originalMessage=e}static isInstance(e){return Rn.hasMarker(e,VU)}};HU=xSe;function _Se(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let s=0;s<e.length;s++){const o=e[s],l=s===e.length-1,{role:u,content:d,experimental_attachments:h}=o;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(o.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...DP(h)]:d});else{const m=o.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...m,...DP(h)]:m})}break}case"assistant":{if(o.parts!=null){let v=function(){const _=[];for(const T of x)switch(T.type){case"file":case"text":{_.push(T);break}case"reasoning":{for(const k of T.details)switch(k.type){case"text":_.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":_.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":_.push({type:"tool-call",toolCallId:T.toolInvocation.toolCallId,toolName:T.toolInvocation.toolName,args:T.toolInvocation.args});break;default:{const k=T;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:_});const E=x.filter(T=>T.type==="tool-invocation").map(T=>T.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(T=>{if(!("result"in T))throw new iT({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(T)});const{toolCallId:k,toolName:R,result:j}=T,I=a[R];return(I==null?void 0:I.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:R,result:I.experimental_toToolResultContent(j),experimental_content:I.experimental_toToolResultContent(j)}:{type:"tool-result",toolCallId:k,toolName:R,result:j}})}),x=[],w=!1,b++},b=0,w=!1,x=[];for(const _ of o.parts)switch(_.type){case"text":{w&&v(),x.push(_);break}case"file":case"reasoning":{x.push(_);break}case"tool-invocation":{((r=_.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(_),w=!0;break}}v();break}const m=o.toolInvocations;if(m==null||m.length===0){i.push({role:"assistant",content:d});break}const g=m.reduce((v,b)=>{var w;return Math.max(v,(w=b.step)!=null?w:0)},0);for(let v=0;v<=g;v++){const b=m.filter(w=>{var x;return((x=w.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:w,toolName:x,args:_})=>({type:"tool-call",toolCallId:w,toolName:x,args:_}))]}),i.push({role:"tool",content:b.map(w=>{if(!("result"in w))throw new iT({originalMessage:o,message:"ToolInvocation must have a result: "+JSON.stringify(w)});const{toolCallId:x,toolName:_,result:E}=w,T=a[_];return(T==null?void 0:T.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:_,result:T.experimental_toToolResultContent(E),experimental_content:T.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:_,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const m=u;throw new iT({originalMessage:o,message:`Unsupported role: ${m}`})}}}return i}function SSe(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(ESe);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function ESe(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var Wk=z.lazy(()=>z.union([z.null(),z.string(),z.number(),z.boolean(),z.record(z.string(),Wk),z.array(Wk)])),ia=z.record(z.string(),z.record(z.string(),Wk)),CSe=z.array(z.union([z.object({type:z.literal("text"),text:z.string()}),z.object({type:z.literal("image"),data:z.string(),mimeType:z.string().optional()})])),qU=z.object({type:z.literal("text"),text:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),TSe=z.object({type:z.literal("image"),image:z.union([FU,z.instanceof(URL)]),mimeType:z.string().optional(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),GU=z.object({type:z.literal("file"),data:z.union([FU,z.instanceof(URL)]),filename:z.string().optional(),mimeType:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),kSe=z.object({type:z.literal("reasoning"),text:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),ASe=z.object({type:z.literal("redacted-reasoning"),data:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),NSe=z.object({type:z.literal("tool-call"),toolCallId:z.string(),toolName:z.string(),args:z.unknown(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),RSe=z.object({type:z.literal("tool-result"),toolCallId:z.string(),toolName:z.string(),result:z.unknown(),content:CSe.optional(),isError:z.boolean().optional(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),ISe=z.object({role:z.literal("system"),content:z.string(),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),jSe=z.object({role:z.literal("user"),content:z.union([z.string(),z.array(z.union([qU,TSe,GU]))]),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),DSe=z.object({role:z.literal("assistant"),content:z.union([z.string(),z.array(z.union([qU,GU,kSe,ASe,NSe]))]),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),MSe=z.object({role:z.literal("tool"),content:z.array(RSe),providerOptions:ia.optional(),experimental_providerMetadata:ia.optional()}),OSe=z.union([ISe,jSe,DSe,MSe]);function PSe({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new sc({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new sc({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new sc({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new sc({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=SSe(e.messages);if(n==="other")throw new sc({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?_Se(e.messages,{tools:t}):e.messages;if(r.length===0)throw new sc({prompt:e,message:"messages must not be empty"});const a=Hp({value:r,schema:z.array(OSe)});if(!a.success)throw new sc({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function FSe({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function LSe(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var BSe="JSON schema:",$Se="You MUST answer with a JSON object that matches the JSON schema above.",zSe="You MUST answer with JSON.";function USe({prompt:e,schema:t,schemaPrefix:n=t!=null?BSe:void 0,schemaSuffix:r=t!=null?$Se:zSe}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function sT(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}Af({prefix:"aiobj",size:24});var Vi=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function MP(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function VSe(){let e=[],t=null,n=!1,r=MP();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=MP(),await r.promise,a();try{const{value:i,done:s}=await e[0].read();s?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function HSe(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}Af({prefix:"aiobj",size:24});var WU="AI_NoOutputSpecifiedError",KU=`vercel.ai.error.${WU}`,qSe=Symbol.for(KU),ZU,GSe=class extends Rn{constructor({message:e="No output specified."}={}){super({name:WU,message:e}),this[ZU]=!0}static isInstance(e){return Rn.hasMarker(e,KU)}};ZU=qSe;var YU="AI_ToolExecutionError",XU=`vercel.ai.error.${YU}`,WSe=Symbol.for(XU),JU,KSe=class extends Rn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${xy(r)}`}){super({name:YU,message:a,cause:r}),this[JU]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Rn.hasMarker(e,XU)}};JU=WSe;function ZSe(e){return e!=null&&Object.keys(e).length>0}function YSe({tools:e,toolChoice:t,activeTools:n}){return ZSe(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const s=i.type;switch(s){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:P_(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const o=s;throw new Error(`Unsupported tool type: ${o}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var XSe=/^([\s\S]*?)(\s+)(\S*)$/;function JSe(e){const t=e.match(XSe);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var QU="AI_InvalidToolArgumentsError",eV=`vercel.ai.error.${QU}`,QSe=Symbol.for(eV),tV,nV=class extends Rn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${xy(n)}`}){super({name:QU,message:r,cause:n}),this[tV]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Rn.hasMarker(e,eV)}};tV=QSe;var rV="AI_NoSuchToolError",aV=`vercel.ai.error.${rV}`,e2e=Symbol.for(aV),iV,Kk=class extends Rn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:rV,message:n}),this[iV]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Rn.hasMarker(e,aV)}};iV=e2e;var sV="AI_ToolCallRepairError",oV=`vercel.ai.error.${sV}`,t2e=Symbol.for(oV),lV,n2e=class extends Rn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${xy(e)}`}){super({name:sV,message:n,cause:e}),this[lV]=!0,this.originalError=t}static isInstance(e){return Rn.hasMarker(e,oV)}};lV=t2e;async function r2e({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new Kk({toolName:e.toolName});try{return await OP({toolCall:e,tools:t})}catch(i){if(n==null||!(Kk.isInstance(i)||nV.isInstance(i)))throw i;let s=null;try{s=await n({toolCall:e,tools:t,parameterSchema:({toolName:o})=>P_(t[o].parameters).jsonSchema,system:r,messages:a,error:i})}catch(o){throw new n2e({cause:o,originalError:i})}if(s==null)throw i;return await OP({toolCall:s,tools:t})}}async function OP({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new Kk({toolName:e.toolName,availableTools:Object.keys(t)});const a=P_(r.parameters),i=e.args.trim()===""?Hp({value:{},schema:a}):mf({text:e.args,schema:a});if(i.success===!1)throw new nV({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function a2e(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function PP({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:s,generateMessageId:o}){const l=[],u=[];return n.length>0&&u.push(...n.map(d=>d.type==="text"?{...d,type:"reasoning"}:{...d,type:"redacted-reasoning"})),t.length>0&&u.push(...t.map(d=>({type:"file",data:d.base64,mimeType:d.mimeType}))),e.length>0&&u.push({type:"text",text:e}),a.length>0&&u.push(...a),u.length>0&&l.push({role:"assistant",content:u,id:s}),i.length>0&&l.push({role:"tool",id:o(),content:i.map(d=>{const h=r[d.toolName];return(h==null?void 0:h.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:h.experimental_toToolResultContent(d.result),experimental_content:h.experimental_toToolResultContent(d.result)}:{type:"tool-result",toolCallId:d.toolCallId,toolName:d.toolName,result:d.result}})}),l}Af({prefix:"aitxt",size:24});Af({prefix:"msg",size:24});var i2e={};OR(i2e,{object:()=>c2e,text:()=>l2e});var cV="AI_InvalidStreamPartError",uV=`vercel.ai.error.${cV}`,s2e=Symbol.for(uV),dV,o2e=class extends Rn{constructor({chunk:e,message:t}){super({name:cV,message:t}),this[dV]=!0,this.chunk=e}static isInstance(e){return Rn.hasMarker(e,uV)}};dV=s2e;var l2e=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),c2e=({schema:e})=>{const t=P_(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:USe({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=q1e(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=mf({text:n});if(!a.success)throw new IP({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});const i=Hp({value:a.value,schema:t});if(!i.success)throw new IP({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage,finishReason:r.finishReason});return i.value}}};function u2e(e){return e===void 0?[]:Array.isArray(e)?e:[e]}async function d2e({stream:e,onError:t}){const n=e.getReader();try{for(;;){const{done:r}=await n.read();if(r)break}}catch(r){t==null||t(r)}finally{n.releaseLock()}}function PR(e,t){const n=e.getReader(),r=t.getReader();let a,i,s=!1,o=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(s){await u(d);return}if(o){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:m}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||d.enqueue(h.value),m===n?(a=void 0,h.done&&(await u(d),s=!0)):(i=void 0,h.done&&(o=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function f2e({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:s,abortSignal:o,repairToolCall:l}){let u=null;const d=new ReadableStream({start(x){u=x}}),h={},m=new Set;let g=!1,v;function b(){g&&m.size===0&&(v!=null&&u.enqueue(v),u.close())}const w=new TransformStream({async transform(x,_){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{_.enqueue(x);break}case"file":{_.enqueue(new rSe({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(_.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),_.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const T=await r2e({toolCall:x,tools:e,repairToolCall:l,system:i,messages:s});_.enqueue(T);const k=e[T.toolName];if(k.execute!=null){const R=qi();m.add(R),Gk({name:"ai.toolCall",attributes:rp({telemetry:a,attributes:{...qk({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":T.toolName,"ai.toolCall.id":T.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(T.args)}}}),tracer:r,fn:async j=>k.execute(T.args,{toolCallId:T.toolCallId,messages:s,abortSignal:o}).then(I=>{u.enqueue({...T,type:"tool-result",result:I}),m.delete(R),b();try{j.setAttributes(rp({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(I)}}}))}catch{}},I=>{u.enqueue({type:"error",error:new KSe({toolCallId:T.toolCallId,toolName:T.toolName,toolArgs:T.args,cause:I})}),m.delete(R),b()})})}}catch(T){u.enqueue({type:"error",error:T})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:FSe(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const T=E;throw new Error(`Unhandled chunk type: ${T}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(w).pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){}})),d.pipeTo(new WritableStream({write(_){x.enqueue(_)},close(){x.close()}}))])}})}var h2e=Af({prefix:"aitxt",size:24}),p2e=Af({prefix:"msg",size:24});function m2e({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:s,abortSignal:o,headers:l,maxSteps:u=1,experimental_generateMessageId:d=p2e,experimental_output:h,experimental_continueSteps:m=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:w=!1,toolCallStreaming:x=w,experimental_activeTools:_,experimental_repairToolCall:E,experimental_transform:T,onChunk:k,onError:R,onFinish:j,onStepFinish:I,_internal:{now:P=HSe,generateId:O=h2e,currentDate:U=()=>new Date}={},...M}){return new y2e({model:e,telemetry:g,headers:l,settings:M,maxRetries:s,abortSignal:o,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:u2e(T),activeTools:_,repairToolCall:E,maxSteps:u,output:h,continueSteps:m,providerOptions:b,onChunk:k,onError:R,onFinish:j,onStepFinish:I,now:P,currentDate:U,generateId:O,generateMessageId:d})}function g2e(e){if(!e)return new TransformStream({transform(i,s){s.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:s=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:s}),n=""}return new TransformStream({transform(i,s){if(i.type==="step-finish"&&a({controller:s}),i.type!=="text-delta"){s.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const o=e.parsePartial({text:t});if(o!=null){const l=JSON.stringify(o.partial);l!==r&&(a({controller:s,partialOutput:o.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var y2e=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:s,prompt:o,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:m,activeTools:g,repairToolCall:v,maxSteps:b,output:w,continueSteps:x,providerOptions:_,now:E,currentDate:T,generateId:k,generateMessageId:R,onChunk:j,onError:I,onFinish:P,onStepFinish:O}){this.warningsPromise=new Vi,this.usagePromise=new Vi,this.finishReasonPromise=new Vi,this.providerMetadataPromise=new Vi,this.textPromise=new Vi,this.reasoningPromise=new Vi,this.reasoningDetailsPromise=new Vi,this.sourcesPromise=new Vi,this.filesPromise=new Vi,this.toolCallsPromise=new Vi,this.toolResultsPromise=new Vi,this.requestPromise=new Vi,this.responsePromise=new Vi,this.stepsPromise=new Vi;var U;if(b<1)throw new mo({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=w;let M="",W="",V="",ie=[],ae=[],ne,q=[];const te=[],G={id:k(),timestamp:T(),modelId:e.modelId,messages:[]};let J=[],Q=[],se,fe,ve="initial";const je=[];let Ne;const Se=new TransformStream({async transform(ce,oe){oe.enqueue(ce);const{part:ee}=ce;if((ee.type==="text-delta"||ee.type==="reasoning"||ee.type==="source"||ee.type==="tool-call"||ee.type==="tool-result"||ee.type==="tool-call-streaming-start"||ee.type==="tool-call-delta")&&await(j==null?void 0:j({chunk:ee})),ee.type==="error"&&await(I==null?void 0:I({error:ee.error})),ee.type==="text-delta"&&(M+=ee.textDelta,W+=ee.textDelta,V+=ee.textDelta),ee.type==="reasoning"&&(ne==null?(ne={type:"text",text:ee.textDelta},ie.push(ne)):ne.text+=ee.textDelta),ee.type==="reasoning-signature"){if(ne==null)throw new Rn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});ne.signature=ee.signature,ne=void 0}if(ee.type==="redacted-reasoning"&&ie.push({type:"redacted",data:ee.data}),ee.type==="file"&&ae.push(ee),ee.type==="source"&&(te.push(ee.source),q.push(ee.source)),ee.type==="tool-call"&&J.push(ee),ee.type==="tool-result"&&Q.push(ee),ee.type==="step-finish"){const _e=PP({text:W,files:ae,reasoning:ie,tools:u??{},toolCalls:J,toolResults:Q,messageId:ee.messageId,generateMessageId:R}),Pe=je.length;let ke="done";Pe+1<b&&(x&&ee.finishReason==="length"&&J.length===0?ke="continue":J.length>0&&Q.length===J.length&&(ke="tool-result"));const We={stepType:ve,text:M,reasoning:a2e(ie),reasoningDetails:ie,files:ae,sources:q,toolCalls:J,toolResults:Q,finishReason:ee.finishReason,usage:ee.usage,warnings:ee.warnings,logprobs:ee.logprobs,request:ee.request,response:{...ee.response,messages:[...G.messages,..._e]},providerMetadata:ee.experimental_providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,isContinued:ee.isContinued};await(O==null?void 0:O(We)),je.push(We),J=[],Q=[],M="",q=[],ie=[],ae=[],ne=void 0,ke!=="done"&&(ve=ke),ke!=="continue"&&(G.messages.push(..._e),W="")}ee.type==="finish"&&(G.id=ee.response.id,G.timestamp=ee.response.timestamp,G.modelId=ee.response.modelId,G.headers=ee.response.headers,fe=ee.usage,se=ee.finishReason)},async flush(ce){var oe;try{if(je.length===0)return;const ee=je[je.length-1];Ee.warningsPromise.resolve(ee.warnings),Ee.requestPromise.resolve(ee.request),Ee.responsePromise.resolve(ee.response),Ee.toolCallsPromise.resolve(ee.toolCalls),Ee.toolResultsPromise.resolve(ee.toolResults),Ee.providerMetadataPromise.resolve(ee.experimental_providerMetadata),Ee.reasoningPromise.resolve(ee.reasoning),Ee.reasoningDetailsPromise.resolve(ee.reasoningDetails);const _e=se??"unknown",Pe=fe??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Ee.finishReasonPromise.resolve(_e),Ee.usagePromise.resolve(Pe),Ee.textPromise.resolve(V),Ee.sourcesPromise.resolve(te),Ee.filesPromise.resolve(ee.files),Ee.stepsPromise.resolve(je),await(P==null?void 0:P({finishReason:_e,logprobs:void 0,usage:Pe,text:V,reasoning:ee.reasoning,reasoningDetails:ee.reasoningDetails,files:ee.files,sources:ee.sources,toolCalls:ee.toolCalls,toolResults:ee.toolResults,request:(oe=ee.request)!=null?oe:{},response:ee.response,warnings:ee.warnings,providerMetadata:ee.providerMetadata,experimental_providerMetadata:ee.experimental_providerMetadata,steps:je})),Ne.setAttributes(rp({telemetry:t,attributes:{"ai.response.finishReason":_e,"ai.response.text":{output:()=>V},"ai.response.toolCalls":{output:()=>{var ke;return(ke=ee.toolCalls)!=null&&ke.length?JSON.stringify(ee.toolCalls):void 0}},"ai.usage.promptTokens":Pe.promptTokens,"ai.usage.completionTokens":Pe.completionTokens}}))}catch(ee){ce.error(ee)}finally{Ne.end()}}}),ye=VSe();this.addStream=ye.addStream,this.closeStream=ye.close;let Fe=ye.stream;for(const ce of m)Fe=Fe.pipeThrough(ce({tools:u,stopStream(){ye.terminate()}}));this.baseStream=Fe.pipeThrough(g2e(w)).pipeThrough(Se);const{maxRetries:Xe,retry:Le}=X_e({maxRetries:a}),Ie=tSe(t),B=J_e({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Xe}}),Ce=PSe({prompt:{system:(U=w==null?void 0:w.injectIntoSystemPrompt({system:s,model:e}))!=null?U:s,prompt:o,messages:l},tools:u}),Ee=this;Gk({name:"ai.streamText",attributes:rp({telemetry:t,attributes:{...qk({operationId:"ai.streamText",telemetry:t}),...B,"ai.prompt":{input:()=>JSON.stringify({system:s,prompt:o,messages:l})},"ai.settings.maxSteps":b}}),tracer:Ie,endWhenDone:!1,fn:async ce=>{Ne=ce;async function oe({currentStep:ee,responseMessages:_e,usage:Pe,stepType:ke,previousStepText:We,hasLeadingWhitespace:Nt,messageId:it}){var Ct;const Ft=_e.length===0?Ce.type:"messages",Mt=[...Ce.messages,..._e],Zt=await gSe({prompt:{type:Ft,system:Ce.system,messages:Mt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(Ct=e.supportsUrl)==null?void 0:Ct.bind(e)}),be={type:"regular",...YSe({tools:u,toolChoice:d,activeTools:g})},{result:{stream:D,warnings:Z,rawResponse:he,request:De},doStreamSpan:we,startTimestampMs:Ae}=await Le(()=>Gk({name:"ai.streamText.doStream",attributes:rp({telemetry:t,attributes:{...qk({operationId:"ai.streamText.doStream",telemetry:t}),...B,"ai.prompt.format":{input:()=>Ft},"ai.prompt.messages":{input:()=>JSON.stringify(Zt)},"ai.prompt.tools":{input:()=>{var It;return(It=be.tools)==null?void 0:It.map(Lt=>JSON.stringify(Lt))}},"ai.prompt.toolChoice":{input:()=>be.toolChoice!=null?JSON.stringify(be.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ie,endWhenDone:!1,fn:async It=>({startTimestampMs:E(),doStreamSpan:It,result:await e.doStream({mode:be,...wSe(r),inputFormat:Ft,responseFormat:w==null?void 0:w.responseFormat({model:e}),prompt:Zt,providerMetadata:_,abortSignal:i,headers:n})})})),ue=f2e({tools:u,generatorStream:D,toolCallStreaming:h,tracer:Ie,telemetry:t,system:s,messages:Mt,repairToolCall:v,abortSignal:i}),ft=De??{},wt=[],L=[],$e=[],nt=[];let ge,Me="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Dt,me=!0,K="",H=ke==="continue"?We:"",Y,pe={id:k(),timestamp:T(),modelId:e.modelId},Re="",Ve=!1,pt=!0,Kt=!1;async function ut({controller:It,chunk:Lt}){It.enqueue(Lt),K+=Lt.textDelta,H+=Lt.textDelta,Ve=!0,Kt=Lt.textDelta.trimEnd()!==Lt.textDelta}Ee.addStream(ue.pipeThrough(new TransformStream({async transform(It,Lt){var en,In,Jn;if(me){const Cr=E()-Ae;me=!1,we.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":Cr}),we.setAttributes({"ai.response.msToFirstChunk":Cr}),Lt.enqueue({type:"step-start",messageId:it,request:ft,warnings:Z??[]})}if(It.type==="text-delta"&&It.textDelta.length===0)return;const Er=It.type;switch(Er){case"text-delta":{if(x){const Cr=pt&&Nt?It.textDelta.trimStart():It.textDelta;if(Cr.length===0)break;pt=!1,Re+=Cr;const zn=JSe(Re);zn!=null&&(Re=zn.suffix,await ut({controller:Lt,chunk:{type:"text-delta",textDelta:zn.prefix+zn.whitespace}}))}else await ut({controller:Lt,chunk:It});break}case"reasoning":{Lt.enqueue(It),ge==null?(ge={type:"text",text:It.textDelta},$e.push(ge)):ge.text+=It.textDelta;break}case"reasoning-signature":{if(Lt.enqueue(It),ge==null)throw new o2e({chunk:It,message:"reasoning-signature without reasoning"});ge.signature=It.signature,ge=void 0;break}case"redacted-reasoning":{Lt.enqueue(It),$e.push({type:"redacted",data:It.data});break}case"tool-call":{Lt.enqueue(It),wt.push(It);break}case"tool-result":{Lt.enqueue(It),L.push(It);break}case"response-metadata":{pe={id:(en=It.id)!=null?en:pe.id,timestamp:(In=It.timestamp)!=null?In:pe.timestamp,modelId:(Jn=It.modelId)!=null?Jn:pe.modelId};break}case"finish":{Ke=It.usage,Me=It.finishReason,Dt=It.experimental_providerMetadata,Y=It.logprobs;const Cr=E()-Ae;we.addEvent("ai.stream.finish"),we.setAttributes({"ai.response.msToFinish":Cr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/Cr});break}case"file":{nt.push(It),Lt.enqueue(It);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Lt.enqueue(It);break}case"error":{Lt.enqueue(It),Me="error";break}default:{const Cr=Er;throw new Error(`Unknown chunk type: ${Cr}`)}}},async flush(It){const Lt=wt.length>0?JSON.stringify(wt):void 0;let en="done";ee+1<b&&(x&&Me==="length"&&wt.length===0?en="continue":wt.length>0&&L.length===wt.length&&(en="tool-result")),x&&Re.length>0&&(en!=="continue"||ke==="continue"&&!Ve)&&(await ut({controller:It,chunk:{type:"text-delta",textDelta:Re}}),Re="");try{we.setAttributes(rp({telemetry:t,attributes:{"ai.response.finishReason":Me,"ai.response.text":{output:()=>K},"ai.response.toolCalls":{output:()=>Lt},"ai.response.id":pe.id,"ai.response.model":pe.modelId,"ai.response.timestamp":pe.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[Me],"gen_ai.response.id":pe.id,"gen_ai.response.model":pe.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{we.end()}It.enqueue({type:"step-finish",finishReason:Me,usage:Ke,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:Y,request:ft,response:{...pe,headers:he==null?void 0:he.headers},warnings:Z,isContinued:en==="continue",messageId:it});const In=LSe(Pe,Ke);if(en==="done")It.enqueue({type:"finish",finishReason:Me,usage:In,providerMetadata:Dt,experimental_providerMetadata:Dt,logprobs:Y,response:{...pe,headers:he==null?void 0:he.headers}}),Ee.closeStream();else{if(ke==="continue"){const Jn=_e[_e.length-1];typeof Jn.content=="string"?Jn.content+=K:Jn.content.push({text:K,type:"text"})}else _e.push(...PP({text:K,files:nt,reasoning:$e,tools:u??{},toolCalls:wt,toolResults:L,messageId:it,generateMessageId:R}));await oe({currentStep:ee+1,responseMessages:_e,usage:In,stepType:en,previousStepText:H,hasLeadingWhitespace:Kt,messageId:en==="continue"?it:R()})}}})))}await oe({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:R()})}}).catch(ce=>{Ee.addStream(new ReadableStream({start(oe){oe.enqueue({type:"error",error:ce}),oe.close()}})),Ee.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return sT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return sT(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(e){var t;try{await d2e({stream:this.fullStream,onError:e==null?void 0:e.onError})}catch(n){(t=e==null?void 0:e.onError)==null||t.call(e,n)}}get experimental_partialOutputStream(){if(this.output==null)throw new GSe;return sT(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,s)=>{const o=i.type;switch(o){case"text-delta":{s.enqueue(fi("text",i.textDelta));break}case"reasoning":{n&&s.enqueue(fi("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&s.enqueue(fi("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&s.enqueue(fi("reasoning_signature",{signature:i.signature}));break}case"file":{s.enqueue(fi("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&s.enqueue(fi("source",i.source));break}case"tool-call-streaming-start":{s.enqueue(fi("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{s.enqueue(fi("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{s.enqueue(fi("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{s.enqueue(fi("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{s.enqueue(fi("error",e(i.error)));break}case"step-start":{s.enqueue(fi("start_step",{messageId:i.messageId}));break}case"step-finish":{s.enqueue(fi("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&s.enqueue(fi("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=o;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u}={}){NP({response:e,status:t,statusText:n,headers:AP(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:s,sendReasoning:o,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){NP({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:AP(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?PR(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:s,sendSources:o,experimental_sendFinish:l}),{status:t,statusText:n,headers:o1(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:o1(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}},b2e=z.object({name:z.string(),version:z.string()}).passthrough(),FR=z.object({_meta:z.optional(z.object({}).passthrough())}).passthrough(),hy=FR,v2e=z.object({method:z.string(),params:z.optional(FR)}),w2e=z.object({experimental:z.optional(z.object({}).passthrough()),logging:z.optional(z.object({}).passthrough()),prompts:z.optional(z.object({listChanged:z.optional(z.boolean())}).passthrough()),resources:z.optional(z.object({subscribe:z.optional(z.boolean()),listChanged:z.optional(z.boolean())}).passthrough()),tools:z.optional(z.object({listChanged:z.optional(z.boolean())}).passthrough())}).passthrough();hy.extend({protocolVersion:z.string(),capabilities:w2e,serverInfo:b2e,instructions:z.optional(z.string())});var x2e=hy.extend({nextCursor:z.optional(z.string())}),_2e=z.object({name:z.string(),description:z.optional(z.string()),inputSchema:z.object({type:z.literal("object"),properties:z.optional(z.object({}).passthrough())}).passthrough()}).passthrough();x2e.extend({tools:z.array(_2e)});var S2e=z.object({type:z.literal("text"),text:z.string()}).passthrough(),E2e=z.object({type:z.literal("image"),data:z.string().base64(),mimeType:z.string()}).passthrough(),fV=z.object({uri:z.string(),mimeType:z.optional(z.string())}).passthrough(),C2e=fV.extend({text:z.string()}),T2e=fV.extend({blob:z.string().base64()}),k2e=z.object({type:z.literal("resource"),resource:z.union([C2e,T2e])}).passthrough();hy.extend({content:z.array(z.union([S2e,E2e,k2e])),isError:z.boolean().default(!1).optional()}).or(hy.extend({toolResult:z.unknown()}));var F_="2.0",A2e=z.object({jsonrpc:z.literal(F_),id:z.union([z.string(),z.number().int()])}).merge(v2e).strict(),N2e=z.object({jsonrpc:z.literal(F_),id:z.union([z.string(),z.number().int()]),result:hy}).strict(),R2e=z.object({jsonrpc:z.literal(F_),id:z.union([z.string(),z.number().int()]),error:z.object({code:z.number().int(),message:z.string(),data:z.optional(z.unknown())})}).strict(),I2e=z.object({jsonrpc:z.literal(F_)}).merge(z.object({method:z.string(),params:z.optional(FR)})).strict();z.union([A2e,I2e,N2e,R2e]);var j2e={};OR(j2e,{mergeIntoDataStream:()=>O2e,toDataStream:()=>D2e,toDataStreamResponse:()=>M2e});function hV(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function LR(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&FP((a=n.data)==null?void 0:a.chunk,r);return}FP(n,r)}})).pipeThrough(hV(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(fi("text",n))}}))}function D2e(e,t){return LR(e,t).pipeThrough(new TextEncoderStream)}function M2e(e,t){var n;const r=LR(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,s=a?PR(a.stream,r):r;return new Response(s,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:o1(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function O2e(e,t){t.dataStream.merge(LR(e,t.callbacks))}function FP(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var P2e={};OR(P2e,{mergeIntoDataStream:()=>B2e,toDataStream:()=>F2e,toDataStreamResponse:()=>L2e});function BR(e,t){const n=$2e();return hJ(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(hV(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(fi("text",r))}}))}function F2e(e,t){return BR(e,t).pipeThrough(new TextEncoderStream)}function L2e(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,s=BR(e,i).pipeThrough(new TextEncoderStream),o=a?PR(a.stream,s):s;return new Response(o,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:o1(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function B2e(e,t){t.dataStream.merge(BR(e,t.callbacks))}function $2e(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class z2e{static async executeInteraction(t,n,r){let a,i=!1,s=null,o,l,u;try{a=await m2e(n);for await(const d of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(d.type){case"text-delta":r.onChunk(d.textDelta);break;case"reasoning":r.onReasoningChunk(d.textDelta);break;case"tool-call":r.onToolCall(d);break;case"tool-result":r.onToolResult(d);break;case"finish":i=!0,s=d.finishReason,o=d.usage,l=d.providerMetadata;break;case"error":r.onError(new Error(`AI Stream Error Part: ${d.error instanceof Error?d.error.message:d.error}`));return;default:console.warn(`[AIService] Received unexpected stream part type: ${d.type}`,d);break}}a!=null&&a.reasoning?(u=await a.reasoning,console.log(`[AIService] Extracted final reasoning for ${t}`)):console.log(`[AIService] No final reasoning found in stream result for ${t}.`),!n.abortSignal.aborted&&i?r.onFinish({finishReason:s,usage:o,providerMetadata:l,reasoning:u}):!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(d){console.error(`[AIService] Error during streamText call for ${t}:`,d),d instanceof Error&&d.name==="AbortError"||r.onError(d instanceof Error?d:new Error(String(d)))}finally{console.log(`[AIService] Stream processing finished for ${t}.`)}}}const Ww={_activeControllers:new Map,_streamingToolData:new Map,_firstChunkTimestamps:new Map,_interactionStartTimes:new Map,async startInteraction(e,t,n,r="message.user_assistant"){var P,O,U,M,W,V,ie,ae,ne;console.log(`[InteractionService] startInteraction called (Type: ${r})`,e,t,n);const a=await Sx(u0.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(a===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const i=a&&typeof a=="object"?a.prompt:e,s=yi(),o=new AbortController;this._activeControllers.set(s,o),this._streamingToolData.set(s,{calls:[],results:[]}),this._firstChunkTimestamps.delete(s),this._interactionStartTimes.delete(s);const l=On.getState(),d=l.interactions.filter(q=>q.conversationId===t),h=r==="conversation.title_generation"?-1:d.reduce((q,te)=>Math.max(q,te.index),-1)+1,m=r==="conversation.title_generation"?null:d.length>0?d[d.length-1].id:null,g=performance.now();this._interactionStartTimes.set(s,g);const v={id:s,conversationId:t,type:r,prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...i.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0,timeToFirstToken:void 0,generationTime:void 0,isTitleGeneration:r==="conversation.title_generation"},index:h,parentId:m};r!=="conversation.title_generation"?(l._addInteractionToState(v),l._addStreamingId(s)):(l._addInteractionToState(v),l._addStreamingId(s),console.log(`[InteractionService] Added title generation interaction ${s} to state.`)),_t.saveInteraction({...v}).catch(q=>{console.error(`[InteractionService] Failed initial persistence for ${s}`,q)}),Et.emit(St.INTERACTION_STARTED,{interactionId:s,conversationId:t,type:v.type});const b=(P=i.metadata)==null?void 0:P.modelId;if(!b)return this._finalizeInteraction(s,"ERROR",new Error("No model ID specified in prompt metadata."),r),null;const{providerId:w,modelId:x}=_o(b);if(!w||!x)return this._finalizeInteraction(s,"ERROR",new Error(`Invalid combined model ID format: ${b}`),r),null;const _=Hn.getState().dbProviderConfigs.find(q=>q.id===w);if(!_)return this._finalizeInteraction(s,"ERROR",new Error(`Provider configuration not found for ID: ${w}`),r),null;const E=Hn.getState().getApiKeyForProvider(w),T=kA(_,x,E);if(!T)return this._finalizeInteraction(s,"ERROR",new Error(`Failed to instantiate model instance for ${b} from provider ${_.name}`),r),null;console.log(`[InteractionService] Using model instance for ${b}`);const k=r!=="conversation.title_generation"?(((O=i.metadata)==null?void 0:O.enabledTools)??[]).reduce((q,te)=>{const J=Sr.getState().getRegisteredTools()[te];if(J!=null&&J.implementation){const Q={...J.definition};Q.execute=async se=>{const fe=On.getState().currentConversationId,ve=fe?hn.getState().getConversationById(fe):null,je=(ve==null?void 0:ve.projectId)??"orphan";let Ne;try{Ne=await Co.getState().initializeVFS(je,{force:!0})}catch(Se){return{_isError:!0,error:`Filesystem error: ${Se.message}`}}try{const Se=mne(),ye=J.definition.parameters.parse(se),Fe=J.implementation,Xe={...Se,fsInstance:Ne};return await Fe(ye,Xe)}catch(Se){const ye=Se instanceof Error?Se.message:String(Se);return Se instanceof z.ZodError?{_isError:!0,error:`Invalid arguments: ${Se.errors.map(Fe=>`${Fe.path.join(".")} (${Fe.message})`).join(", ")}`}:{_isError:!0,error:ye}}},q[te]=Q}return q},{}):void 0,R=((U=i.parameters)==null?void 0:U.maxSteps)??ar.getState().toolMaxSteps,j={model:T,messages:i.messages,abortSignal:o.signal,system:i.system,temperature:(M=i.parameters)==null?void 0:M.temperature,maxTokens:(W=i.parameters)==null?void 0:W.max_tokens,topP:(V=i.parameters)==null?void 0:V.top_p,topK:(ie=i.parameters)==null?void 0:ie.top_k,presencePenalty:(ae=i.parameters)==null?void 0:ae.presence_penalty,frequencyPenalty:(ne=i.parameters)==null?void 0:ne.frequency_penalty,maxSteps:R,...k&&Object.keys(k).length>0&&{tools:k},toolChoice:i.toolChoice??(k&&Object.keys(k).length>0?"auto":"none")},I={onChunk:q=>this._handleChunk(s,q),onReasoningChunk:q=>this._handleReasoningChunk(s,q),onToolCall:q=>this._handleToolCall(s,q),onToolResult:q=>this._handleToolResult(s,q),onFinish:q=>this._handleFinish(s,q,r),onError:q=>this._handleError(s,q,r)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${s}`),z2e.executeInteraction(s,j,I).catch(q=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${s}:`,q),this._handleError(s,q instanceof Error?q:new Error("Failed to start AI execution"),r)}),s},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);if(t&&!t.signal.aborted)t.abort(),qe.info("Interaction cancelled.");else{console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`);const n=On.getState(),r=n.interactions.find(a=>a.id===e);n.streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"),(r==null?void 0:r.type)??"message.user_assistant"))}},async _handleChunk(e,t){this._firstChunkTimestamps.has(e)||this._firstChunkTimestamps.set(e,performance.now());const n={interactionId:e,chunk:t},r=await Sx(u0.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;On.getState().appendInteractionResponseChunk(e,a),Et.emit(St.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleReasoningChunk(e,t){On.getState().appendReasoningChunk(e,t)},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),On.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),On.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t,n){console.log(`[InteractionService] Finishing interaction ${e} (Type: ${n}). Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,n,t)},_handleError(e,t,n){console.error(`[InteractionService] Handling error for interaction ${e} (Type: ${n}):`,t);const r=t.name==="AbortError";this._finalizeInteraction(e,r?"CANCELLED":"ERROR",r?void 0:t,n)},_finalizeInteraction(e,t,n,r="message.user_assistant",a){var k;const i=On.getState(),s=i.interactions.find(R=>R.id===e);if(!s||s.status!=="STREAMING"&&r!=="conversation.title_generation"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e);return}const o=i.activeStreamBuffers[e]??"",l=i.activeReasoningBuffers[e]??"",u=this._streamingToolData.get(e)||{calls:[],results:[]},d=(s==null?void 0:s.metadata)||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}, Reasoning Length: ${l.length}`);const h=performance.now(),m=this._interactionStartTimes.get(e),g=this._firstChunkTimestamps.get(e),v=m?Math.round(h-m):void 0,b=m&&g?Math.round(g-m):void 0,w=(a==null?void 0:a.reasoning)??l,x={status:t,endedAt:new Date,response:o||null,metadata:{...d,...(a==null?void 0:a.usage)&&{promptTokens:a.usage.promptTokens,completionTokens:a.usage.completionTokens,totalTokens:a.usage.totalTokens},...(a==null?void 0:a.providerMetadata)&&{providerMetadata:a.providerMetadata},toolCalls:u.calls,toolResults:u.results,reasoning:w||void 0,timeToFirstToken:b,generationTime:v,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};if(r==="conversation.title_generation"&&t==="COMPLETED"&&x.response&&typeof x.response=="string"){const R=x.response.trim().replace(/^"|"$/g,"");R&&s&&(console.log(`[InteractionService] Updating conversation ${s.conversationId} title to: "${R}"`),hn.getState().updateConversation(s.conversationId,{title:R}).catch(j=>console.error("Failed to update conversation title:",j)))}i._updateInteractionInState(e,x),i._removeStreamingId(e);const _=On.getState().interactions.find(R=>R.id===e);_?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((k=_.response)==null?void 0:k.length)??0}`),_t.saveInteraction({..._}).catch(R=>{console.error(`[InteractionService] Failed final persistence for ${e}`,R)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let E=[],T=[];try{E=u.calls.map(R=>JSON.parse(R)),T=u.results.map(R=>JSON.parse(R))}catch(R){console.error("[InteractionService] Failed to parse tool strings for event emitter:",R)}Et.emit(St.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:E,toolResults:T}),this._activeControllers.delete(e),this._streamingToolData.delete(e),this._interactionStartTimes.delete(e),this._firstChunkTimestamps.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},sl=(e,t)=>{Et.emit(St.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},ii=Js(Qs((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),sl("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),sl("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),sl("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),sl("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),sl("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),sl("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),sl("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),sl("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),sl("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),sl("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),Et.emit(St.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),Et.emit(St.PROMPT_PARAMS_CHANGED,{params:r}))}}))),Xs=Js(Qs((e,t)=>({rules:[],tags:[],tagRuleLinks:[],isLoading:!1,error:null,loadRulesAndTags:async()=>{e({isLoading:!0,error:null});try{const[n,r,a]=await Promise.all([_t.loadRules(),_t.loadTags(),_t.loadTagRuleLinks()]);e({rules:n,tags:r,tagRuleLinks:a,isLoading:!1})}catch(n){console.error("RulesStore: Error loading rules and tags",n),e({error:"Failed load rules/tags",isLoading:!1}),qe.error("Failed to load rules and tags.")}},addRule:async n=>{const r=yi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.rules.push(i),s.rules.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveRule(i),qe.success(`Rule "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding rule",s),e(o=>({error:"Failed to save new rule",rules:o.rules.filter(l=>l.id!==r)})),qe.error("Failed to save new rule."),s}},updateRule:async(n,r)=>{const a=t().rules.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.rules.findIndex(l=>l.id===n);o!==-1&&(s.rules[o]=i,s.rules.sort((l,u)=>l.name.localeCompare(u.name)))});try{await _t.saveRule(i),qe.success(`Rule "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating rule",s),e(o=>{const l=o.rules.findIndex(u=>u.id===n);l!==-1&&(o.rules[l]=a,o.rules.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save rule update"}),qe.error("Failed to save rule update."),s}},deleteRule:async n=>{const r=t().rules.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.ruleId===n);e(i=>({rules:i.rules.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.ruleId!==n)}));try{await _t.deleteRule(n),qe.success(`Rule "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting rule",i),e(s=>{s.rules.push(r),s.rules.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete rule"}),qe.error("Failed to delete rule."),i}},addTag:async n=>{const r=yi(),a=new Date,i={id:r,createdAt:a,updatedAt:a,...n};e(s=>{s.tags.push(i),s.tags.sort((o,l)=>o.name.localeCompare(l.name))});try{return await _t.saveTag(i),qe.success(`Tag "${i.name}" added.`),r}catch(s){throw console.error("RulesStore: Error adding tag",s),e(o=>({error:"Failed to save new tag",tags:o.tags.filter(l=>l.id!==r)})),qe.error("Failed to save new tag."),s}},updateTag:async(n,r)=>{const a=t().tags.find(s=>s.id===n);if(!a)return;const i={...a,...r,updatedAt:new Date};e(s=>{const o=s.tags.findIndex(l=>l.id===n);o!==-1&&(s.tags[o]=i,s.tags.sort((l,u)=>l.name.localeCompare(u.name)))});try{await _t.saveTag(i),qe.success(`Tag "${i.name}" updated.`)}catch(s){throw console.error("RulesStore: Error updating tag",s),e(o=>{const l=o.tags.findIndex(u=>u.id===n);l!==-1&&(o.tags[l]=a,o.tags.sort((u,d)=>u.name.localeCompare(d.name))),o.error="Failed to save tag update"}),qe.error("Failed to save tag update."),s}},deleteTag:async n=>{const r=t().tags.find(i=>i.id===n);if(!r)return;const a=t().tagRuleLinks.filter(i=>i.tagId===n);e(i=>({tags:i.tags.filter(s=>s.id!==n),tagRuleLinks:i.tagRuleLinks.filter(s=>s.tagId!==n)}));try{await _t.deleteTag(n),qe.success(`Tag "${r.name}" deleted.`)}catch(i){throw console.error("RulesStore: Error deleting tag",i),e(s=>{s.tags.push(r),s.tags.sort((o,l)=>o.name.localeCompare(l.name)),s.tagRuleLinks.push(...a),s.error="Failed to delete tag"}),qe.error("Failed to delete tag."),i}},linkTagToRule:async(n,r)=>{const a=`${n}-${r}`;if(t().tagRuleLinks.find(o=>o.id===a))return;const s={id:a,tagId:n,ruleId:r};e(o=>{o.tagRuleLinks.push(s)});try{await _t.saveTagRuleLink(s)}catch(o){throw console.error("RulesStore: Error linking tag to rule",o),e(l=>({error:"Failed to link tag and rule",tagRuleLinks:l.tagRuleLinks.filter(u=>u.id!==a)})),qe.error("Failed to link tag and rule."),o}},unlinkTagFromRule:async(n,r)=>{const a=`${n}-${r}`,i=t().tagRuleLinks.find(s=>s.id===a);if(i){e(s=>({tagRuleLinks:s.tagRuleLinks.filter(o=>o.id!==a)}));try{await _t.deleteTagRuleLink(a)}catch(s){throw console.error("RulesStore: Error unlinking tag from rule",s),e(o=>{o.tagRuleLinks.push(i),o.error="Failed to unlink tag and rule"}),qe.error("Failed to unlink tag and rule."),s}}},getRulesForTag:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.tagId===n).map(i=>i.ruleId));return r.rules.filter(i=>a.has(i.id))},getTagsForRule:n=>{const r=t(),a=new Set(r.tagRuleLinks.filter(i=>i.ruleId===n).map(i=>i.tagId));return r.tags.filter(i=>a.has(i.id))},getRuleById:n=>t().rules.find(r=>r.id===n),getTagById:n=>t().tags.find(r=>r.id===n),getRulesByIds:n=>{const r=new Set(n);return t().rules.filter(a=>r.has(a.id))}}))),oT={async submitPrompt(e){var q,te,G,J,Q,se;console.log("[ConversationService] submitPrompt called",e);const t=On.getState(),n=ri.getState(),r=ii.getState(),a=hn.getState(),i=Xs.getState(),s=ar.getState(),o=t.currentConversationId;if(!o){qe.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const l=a.getConversationById(o),u=(l==null?void 0:l.projectId)??null,d=n.getEffectiveProjectSettings(u),m=t.interactions.filter(fe=>fe.conversationId===o).length===0&&s.autoTitleEnabled&&((q=e.metadata)==null?void 0:q.autoTitleEnabledForTurn)===!0&&s.autoTitleModelId,v=t.interactions.filter(fe=>fe.status==="COMPLETED"&&fe.type==="message.user_assistant"),b=l6(v);let w=e.content;const x=[],_=d.defaultTagIds??[],E=d.defaultRuleIds??[],T=((te=e.metadata)==null?void 0:te.activeTagIds)??[],k=((G=e.metadata)==null?void 0:G.activeRuleIds)??[],R=Array.from(new Set([..._,...T])),j=Array.from(new Set([...E,...k])),I=new Set(j);R.forEach(fe=>{i.getRulesForTag(fe).forEach(ve=>I.add(ve.id))});const P=i.getRulesByIds(Array.from(I))||[],O=P.filter(fe=>fe.type==="system").map(fe=>fe.content),U=P.filter(fe=>fe.type==="before").map(fe=>fe.content),M=P.filter(fe=>fe.type==="after").map(fe=>fe.content);U.length>0&&(w=`${U.join(`
`)}

${w}`),M.length>0&&(w=`${w}

    ${M.join(`
`)}`),w&&x.push({type:"text",text:w});const W=((J=e.metadata)==null?void 0:J.attachedFiles)??[];if(W.length>0){const fe=await this._processFilesForPrompt(W,o);x.unshift(...fe)}x.length>0?b.push({role:"user",content:x}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");let ie=((Q=e.metadata)==null?void 0:Q.turnSystemPrompt)??d.systemPrompt??void 0;O.length>0&&(ie=`${ie?`${ie}

        `:""}${O.join(`
`)}`);const ae={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(ae).forEach(fe=>{(ae[fe]===null||ae[fe]===void 0)&&delete ae[fe]});const ne={system:ie,messages:b,parameters:ae,metadata:{...(({turnSystemPrompt:fe,activeTagIds:ve,activeRuleIds:je,autoTitleEnabledForTurn:Ne,...Se})=>({...Se,effectivelyAppliedTagIds:R,effectivelyAppliedRuleIds:Array.from(I)}))(e.metadata??{}),modelId:r.modelId??void 0,attachedFiles:(se=e.metadata.attachedFiles)==null?void 0:se.map(({contentBase64:fe,contentText:ve,...je})=>je)}};try{const fe=Ww.startInteraction(ne,o,e);m&&(console.log("[ConversationService] Triggering asynchronous title generation."),this.generateConversationTitle(o,e,P).catch(ve=>{console.error("[ConversationService] Background title generation failed:",ve)})),await fe}catch(fe){throw console.error("[ConversationService] Error starting interaction:",fe),qe.error(`Failed to start interaction: ${fe instanceof Error?fe.message:String(fe)}`),fe}},async generateConversationTitle(e,t,n){var o,l;const r=ar.getState();if(!r.autoTitleModelId){console.warn("[ConversationService] Auto-title generation skipped: No model selected in settings.");return}let a=t.content;if(a.length>r.autoTitlePromptMaxLength&&(a=a.substring(0,r.autoTitlePromptMaxLength)+"..."),r.autoTitleIncludeFiles&&((l=(o=t.metadata)==null?void 0:o.attachedFiles)!=null&&l.length)){const u=t.metadata.attachedFiles.map(d=>d.name).join(", ");a+=`

[Attached files: ${u}]`}if(r.autoTitleIncludeRules&&n.length>0){const u=n.map(d=>d.name).join(", ");a+=`

[Active rules: ${u}]`}const i={system:"Generate a concise, descriptive title (max 8-10 words) for the following user prompt. Output ONLY the title text, nothing else.",messages:[{role:"user",content:a}],parameters:{temperature:.5,max_tokens:20},metadata:{modelId:r.autoTitleModelId,isTitleGeneration:!0},tools:void 0,toolChoice:"none"},s={id:yi(),content:`[Generate title based on: ${t.content.substring(0,50)}...]`,parameters:i.parameters,metadata:{...i.metadata,originalTurnId:t.id}};try{await Ww.startInteraction(i,e,s,"conversation.title_generation")}catch(u){console.error("[ConversationService] Error starting title generation interaction:",u)}},async regenerateInteraction(e){var W,V,ie,ae,ne,q;console.log("[ConversationService] regenerateInteraction called",e);const t=On.getState(),n=ri.getState(),r=ii.getState(),a=hn.getState(),i=Xs.getState(),s=t.interactions.find(te=>te.id===e);if(!s||!s.prompt){qe.error("Cannot regenerate: Original interaction data missing.");return}const o=s.prompt,l=s.conversationId,u=a.getConversationById(l),d=(u==null?void 0:u.projectId)??null,h=n.getEffectiveProjectSettings(d),m=s.index,g=t.interactions.filter(te=>te.conversationId===l&&te.index<m&&te.status==="COMPLETED"&&te.type==="message.user_assistant").sort((te,G)=>te.index-G.index),v=l6(g);let b=o.content;const w=[],x=((W=s.metadata)==null?void 0:W.effectivelyAppliedTagIds)??((V=o.metadata)==null?void 0:V.activeTagIds)??[],_=((ie=s.metadata)==null?void 0:ie.effectivelyAppliedRuleIds)??((ae=o.metadata)==null?void 0:ae.activeRuleIds)??[],E=new Set(_);x.forEach(te=>{i.getRulesForTag(te).forEach(G=>E.add(G.id))});const T=i.getRulesByIds(Array.from(E))||[],k=T.filter(te=>te.type==="before").map(te=>te.content),R=T.filter(te=>te.type==="after").map(te=>te.content);k.length>0&&(b=`${k.join(`
`)}

${b}`),R.length>0&&(b=`${b}

    ${R.join(`
`)}`),b&&w.push({type:"text",text:b});const j=((ne=o.metadata)==null?void 0:ne.attachedFiles)??[];if(j.length>0){const te=await this._processFilesForPrompt(j,l);w.unshift(...te)}w.length>0?v.push({role:"user",content:w}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");let P=((q=o.metadata)==null?void 0:q.turnSystemPrompt)??h.systemPrompt??void 0;const O=T.filter(te=>te.type==="system").map(te=>te.content);O.length>0&&(P=`${P?`${P}

        `:""}${O.join(`
`)}`);const U={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(U).forEach(te=>{(U[te]===null||U[te]===void 0)&&delete U[te]});const M={system:P,messages:v,parameters:U,metadata:{...(({turnSystemPrompt:te,activeTagIds:G,activeRuleIds:J,autoTitleEnabledForTurn:Q,effectivelyAppliedTagIds:se,effectivelyAppliedRuleIds:fe,...ve})=>({...ve,effectivelyAppliedTagIds:x,effectivelyAppliedRuleIds:Array.from(E)}))(o.metadata??{}),modelId:r.modelId??void 0,regeneratedFromId:e,attachedFiles:j.map(({contentBase64:te,contentText:G,...J})=>J)}};try{await Ww.startInteraction(M,l,o,"message.assistant_regen")}catch(te){throw console.error("[ConversationService] Error starting regeneration interaction:",te),qe.error(`Failed to start regeneration: ${te instanceof Error?te.message:String(te)}`),te}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=hn.getState().getConversationById(t),s=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(s)}catch{qe.error(`Filesystem unavailable for key ${s}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let s=null;try{if(i.source==="direct")s=o6(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const o=await fd(i.path,{fsInstance:a});s=o6({...i,contentBytes:o})}else if(i.source==="vfs"&&!a)continue;s&&n.push(s)}catch(o){console.error(`[ConversationService] Error processing file ${i.name}:`,o),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await Co.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}};var U2e=(e,t,n,r,a,i,s,o)=>{let l=document.documentElement,u=["light","dark"];function d(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",w=b&&i?a.map(x=>i[x]||x):a;b?(l.classList.remove(...w),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(v,g)}),h(g)}function h(g){o&&u.includes(g)&&(l.style.colorScheme=g)}function m(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(t)||n,v=s&&g==="system"?m():g;d(v)}catch{}},V2e=C.createContext(void 0),H2e={setTheme:e=>{},themes:[]},q2e=()=>{var e;return(e=C.useContext(V2e))!=null?e:H2e};C.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:s,themes:o,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,o,s,r,a]).slice(1,-1);return C.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${U2e.toString()})(${d})`}})});const G2e=({...e})=>{const{theme:t="system"}=q2e();return p.jsx($X,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function yd({className:e,...t}){return p.jsx("textarea",{"data-slot":"textarea",className:vt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const pV=C.memo(C.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...s},o)=>{const l=C.useRef(null),[u,d]=C.useState(e);C.useImperativeHandle(o,()=>({getValue:()=>u,setValue:g=>{d(g),i&&i(g),Et.emit(St.PROMPT_INPUT_CHANGE,{value:g}),requestAnimationFrame(()=>{const v=l.current;v&&(v.style.height="auto",v.style.height=`${v.scrollHeight}px`,v.style.overflowY=v.scrollHeight>250?"auto":"hidden")})},focus:()=>{var g;return(g=l.current)==null?void 0:g.focus()},clearValue:()=>{d(""),i&&i(""),Et.emit(St.PROMPT_INPUT_CHANGE,{value:""}),requestAnimationFrame(()=>{const g=l.current;g&&(g.style.height="auto",g.style.height=`${g.scrollHeight}px`,g.style.overflowY="hidden")})}}));const h=g=>{var v;if(g.key==="Enter"&&!g.shiftKey&&!n){g.preventDefault();const b=ko.getState().attachedFilesMetadata.length>0;(u.trim().length>0||b)&&(t(),(v=o==null?void 0:o.current)==null||v.clearValue())}},m=g=>{const v=g.target.value;d(v),i&&i(v),Et.emit(St.PROMPT_INPUT_CHANGE,{value:v})};return C.useEffect(()=>{const g=l.current;if(g){g.style.height="auto";const v=g.scrollHeight,b=250;g.style.height=`${Math.min(v,b)}px`,g.style.overflowY=v>b?"auto":"hidden"}},[u]),C.useEffect(()=>{e!==u&&(d(e),i&&i(e))},[e,i]),p.jsx(yd,{ref:l,value:u,onChange:m,onKeyDown:h,disabled:n,placeholder:r,rows:1,className:vt("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...s})}));pV.displayName="InputArea";function W2e(){const e=new URLSearchParams(window.location.search),t=e.get("q")??void 0,n=e.get("m")??void 0,r=e.getAll("vfs").filter(Boolean),a=e.get("s")??"1";return{query:t,modelId:n,vfsFiles:r.length>0?r:void 0,submit:a}}const Lp=Js(Qs((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await _t.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),qe.error(r)}},addDbMod:async n=>{const r=yi(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((s,o)=>s.loadOrder-o.loadOrder)});try{return await _t.saveMod(a),qe.success(`Mod "${a.name}" added.`),r}catch(i){const s="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(o=>{o.dbMods=o.dbMods.filter(l=>l.id!==r),o.error=s}),qe.error(s),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(o=>{i=o.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...o.dbMods[i]},o.dbMods[i]={...o.dbMods[i],...r},r.loadOrder!==void 0&&o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const s=i!==-1?t().dbMods[i]:void 0;if(s)try{await _t.saveMod(s),qe.success(`Mod "${s.name}" updated.`)}catch(o){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",o),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,m)=>h.loadOrder-m.loadOrder)),u.error=l}),qe.error(l),o}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(s=>s.id!==n)}));try{await _t.deleteMod(n),qe.success(`Mod "${a}" deleted.`)}catch(i){const s="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(o=>{o.dbMods.push(r),o.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),o.error=s}),qe.error(s),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function LP(e){const t=e.id,n=e.name,r=Sr.getState(),a=Lp.getState();return{modId:t,modName:n,registerPromptControl:s=>r.registerPromptControl(s),registerChatControl:s=>{const o={...s,status:s.status??(()=>"ready")};return r.registerChatControl(o)},registerTool:(s,o,l)=>(console.log(`[${n}] Registering tool: ${s}`),r.registerTool(t,s,o,l)),on:(s,o)=>(Et.on(s,o),()=>Et.off(s,o)),addMiddleware:(s,o)=>r.registerMiddleware(s,t,o),registerSettingsTab:s=>(a._addSettingsTab(s),()=>a._removeSettingsTab(s.id)),getContextSnapshot:()=>{const s=On.getState(),o=hn.getState(),l=ar.getState(),u=Hn.getState(),{providerId:d}=_o(u.selectedModelId),h=o.selectedItemType==="conversation"?o.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(s.currentConversationId===h?s.interactions.map(m=>Object.freeze({...m})):[]),isStreaming:s.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(s,o)=>{qe[s](`[${n}] ${o}`)},log:(s,...o)=>{console[s](`[Mod: ${n}]`,...o)}}}async function K2e(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,s=null;try{if(i=LP(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){s=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),qe.error(`Error loading mod "${r.name}": ${s instanceof Error?s.message:s}`)}i||(i=LP(r));const o={id:r.id,name:r.name,api:i,error:s??void 0};return Et.emit(o.error?St.MOD_ERROR:St.MOD_LOADED,{id:r.id,name:r.name,error:o.error}),o}));return Et.emit(St.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}async function Z2e(e){console.log("LiteChat Init: Loading core data..."),await e.loadSettings(),console.log("LiteChat Init: Settings loaded."),await e.loadProviderData(),console.log("LiteChat Init: Provider data loaded."),await e.loadRulesAndTags(),console.log("LiteChat Init: Rules and Tags loaded."),await e.loadSidebarItems(),console.log("LiteChat Init: Sidebar items loaded.")}function Y2e(e){console.log("LiteChat Init: Registering core controls and tools..."),e.forEach(t=>{try{t()}catch(n){console.error("LiteChat Init: Error running registration function:",n),qe.error(`Control registration error: ${n instanceof Error?n.message:String(n)}`)}}),console.log("LiteChat Init: Core controls and tools registered.")}async function X2e(e){console.log("LiteChat Init: Loading mods..."),await e.loadDbMods(),console.log("LiteChat Init: DB Mods loaded.");const t=Lp.getState().dbMods;console.log(`LiteChat Init: Processing ${t.length} mods...`);const n=await K2e(t);e.setLoadedMods(n),console.log(`LiteChat Init: ${n.length} mods processed.`)}function J2e(e){var i;console.log("LiteChat Init: Initializing core UI states...");const t=e.selectedItemId,n=e.selectedItemType,r=n==="project"?t:n==="conversation"?((i=e.getConversationById(t))==null?void 0:i.projectId)??null:null,a=e.getEffectiveProjectSettings(r);e.initializePromptState(a),console.log("LiteChat Init: Initial prompt state initialized.",a)}async function Q2e(e){const t={loadSettings:ar.getState().loadSettings,loadProviderData:Hn.getState().loadInitialData,loadRulesAndTags:Xs.getState().loadRulesAndTags,loadSidebarItems:hn.getState().loadSidebarItems,loadDbMods:Lp.getState().loadDbMods,setLoadedMods:Lp.getState().setLoadedMods,getConversationById:hn.getState().getConversationById,getEffectiveProjectSettings:ri.getState().getEffectiveProjectSettings,initializePromptState:ii.getState().initializePromptState,selectedItemId:hn.getState().selectedItemId,selectedItemType:hn.getState().selectedItemType};try{await Z2e(t),Y2e(e),await X2e(t),J2e(t)}catch(n){throw console.error("LiteChat: Full initialization sequence failed:",n),qe.error(`Initialization sequence failed: ${n instanceof Error?n.message:String(n)}`),Qi.getState().setGlobalError("Initialization sequence failed."),n}}const eEe=({controls:e=[]})=>{const[t,n]=C.useState(!0),[r,a]=C.useState(!1),i=C.useRef(null),s=hn(q=>q.selectedItemId),o=hn(q=>q.selectedItemType),l=hn(q=>q.getConversationById),{getEffectiveProjectSettings:u}=ri(cn(q=>({getEffectiveProjectSettings:q.getEffectiveProjectSettings}))),{interactions:d,status:h}=On(cn(q=>({interactions:q.interactions,status:q.status}))),{globalError:m,isSidebarCollapsed:g,isChatControlPanelOpen:v,isProjectSettingsModalOpen:b,isVfsModalOpen:w}=Qi(cn(q=>({globalError:q.globalError,isSidebarCollapsed:q.isSidebarCollapsed,isChatControlPanelOpen:q.isChatControlPanelOpen,isProjectSettingsModalOpen:q.isProjectSettingsModalOpen,isVfsModalOpen:q.isVfsModalOpen}))),x=Sr(cn(q=>Object.values(q.chatControls))),{initializePromptState:_}=ii(cn(q=>({initializePromptState:q.initializePromptState}))),{setVfsKey:E}=Co(cn(q=>({setVfsKey:q.setVfsKey}))),T=C.useCallback(()=>{a(q=>!q)},[]);C.useEffect(()=>{r&&a(!1)},[s,o,r]);const k=C.useCallback(()=>{requestAnimationFrame(()=>{var q;(q=i.current)==null||q.focus()})},[]),R=C.useCallback(async()=>{var ve,je,Ne;const q=W2e();if(!q.query&&!q.modelId&&!((ve=q.vfsFiles)!=null&&ve.length))return;qe.info("Processing parameters from URL...");const{addConversation:te,selectItem:G}=hn.getState(),{setModelId:J}=ii.getState(),{addAttachedFile:Q}=ko.getState(),{getAvailableModelListItems:se}=Hn.getState(),{initializeVFS:fe}=Co.getState();try{const Se=await te({title:q.query?`From URL: ${q.query.substring(0,30)}...`:"From URL Parameters"});if(await G(Se,"conversation"),q.modelId){const ye=se();let Fe=null;const Xe=q.modelId.toLowerCase();if(q.modelId.includes(":")){const Le=ye.find(Ie=>Ie.id===q.modelId);Le&&(Fe=Le.id)}if(!Fe){const Le=ye.find(Ie=>Ie.name.toLowerCase()===Xe);Le&&(Fe=Le.id)}if(!Fe){const Le=ye.find(Ie=>Ie.name.toLowerCase().startsWith(Xe));Le&&(Fe=Le.id)}if(!Fe){const Le=ye.find(Ie=>{const B=Ie.id.toLowerCase().split("/");if(console.log(B),B.length>1)return B[1].startsWith(Xe)});Le&&(Fe=Le.id)}if(Fe){J(Fe);const Le=ye.find(Ie=>Ie.id===Fe);qe.success(`Model set to: ${Le==null?void 0:Le.name} (${Le==null?void 0:Le.providerName})`)}else qe.warning(`Model matching "${q.modelId}" not found or not enabled. Using default.`)}if(q.vfsFiles&&q.vfsFiles.length>0){const ye="orphan";let Fe;try{Fe=await fe(ye,{force:!0})}catch(Xe){qe.error(`Failed to initialize VFS for URL files: ${Xe instanceof Error?Xe.message:String(Xe)}`)}if(Fe)for(const Xe of q.vfsFiles)try{const Le=await fd(Xe,{fsInstance:Fe}),Ie=await Fe.promises.stat(Xe),B=fa(Xe),Ce="application/octet-stream",Ee=E1(B,Ce);let ce={};if(Ee)ce.contentText=new TextDecoder().decode(Le);else{let oe="";const ee=Le.byteLength;for(let _e=0;_e<ee;_e++)oe+=String.fromCharCode(Le[_e]);ce.contentBase64=window.btoa(oe)}Q({source:"vfs",name:B,type:Ce,size:Ie.size,path:Xe,...ce}),qe.success(`Attached VFS file: ${B}`)}catch(Le){Le.code==="ENOENT"?qe.warning(`VFS file not found: ${Xe}`):qe.warning(`Failed to attach VFS file "${Xe}": ${Le.message}`),console.error(`Error processing VFS file ${Xe}:`,Le)}}if(q.query)if(q.submit==="0")(je=i.current)==null||je.setValue(q.query),k(),qe.info("Query from URL loaded into input area."),window.history.replaceState({},document.title,window.location.pathname);else{let ye={},Fe={};const Xe=Object.values(Sr.getState().promptControls).filter(Ee=>Ee.show?Ee.show():!0);for(const Ee of Xe){if(Ee.getParameters){const ce=await Ee.getParameters();ce&&(ye={...ye,...ce})}if(Ee.getMetadata){const ce=await Ee.getMetadata();ce&&(Fe={...Fe,...ce})}}const Le=ko.getState().attachedFilesMetadata;Le.length>0&&(Fe.attachedFiles=[...Le]);let Ie={id:yi(),content:q.query,parameters:ye,metadata:Fe};Et.emit(St.PROMPT_SUBMITTED,{turnData:Ie});const B=await Sx(u0.PROMPT_TURN_FINALIZE,{turnData:Ie});if(B===!1){qe.warning("Prompt submission from URL cancelled by middleware.");return}const Ce=B&&typeof B=="object"?B.turnData:Ie;await oT.submitPrompt(Ce),window.history.replaceState({},document.title,window.location.pathname)}else(q.modelId||(Ne=q.vfsFiles)!=null&&Ne.length)&&(qe.info("Model and/or VFS files from URL applied. Type your message."),window.history.replaceState({},document.title,window.location.pathname))}catch(Se){qe.error(`Failed to process URL parameters: ${Se instanceof Error?Se.message:String(Se)}`),console.error("Error processing URL parameters:",Se)}},[k]);C.useEffect(()=>{let q=!0;return(async()=>{console.log("LiteChat: Starting initialization..."),n(!0);try{await Q2e(e),await R()}catch(G){console.error("LiteChat: Top-level initialization error:",G)}finally{q&&(console.log("LiteChat: Initialization complete."),n(!1))}})(),()=>{q=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[e,R]);const j=C.useRef({itemId:null,itemType:null});C.useEffect(()=>{var te;if(t)return;const q={itemId:s,itemType:o};if(q.itemId!==j.current.itemId||q.itemType!==j.current.itemType){const G=o==="project"?s:o==="conversation"?((te=l(s))==null?void 0:te.projectId)??null:null,J=u(G);_(J),j.current=q,q.itemType==="conversation"&&k()}},[s,o,l,u,_,t,k]),C.useEffect(()=>{let q=null;if(w||o==="project")if(o==="project")q=s;else if(o==="conversation"){const te=hn.getState().getConversationById(s);q=(te==null?void 0:te.projectId)??"orphan"}else q="orphan";Co.getState().vfsKey!==q&&E(q)},[w,s,o,E]);const I=C.useCallback(async q=>{var Q;const te=hn.getState();let G=te.selectedItemType==="conversation"?te.selectedItemId:null;const J=te.selectedItemType==="project"?te.selectedItemId:te.selectedItemType==="conversation"?((Q=te.getConversationById(te.selectedItemId))==null?void 0:Q.projectId)??null:null;if(!G)try{const se=await te.addConversation({title:"New Chat",projectId:J});await te.selectItem(se,"conversation"),G=hn.getState().selectedItemId}catch(se){console.error("LiteChat: Failed to create new conversation",se),qe.error("Failed to start new chat.");return}try{const se=ii.getState(),fe={...q,metadata:{...q.metadata,modelId:se.modelId}};await oT.submitPrompt(fe),k()}catch(se){console.error("LiteChat: Error submitting prompt:",se),k()}},[k]),P=C.useCallback(async q=>{try{await oT.regenerateInteraction(q),k()}catch(te){console.error("LiteChat: Error regenerating interaction:",te),k()}},[k]),O=C.useCallback(q=>{Ww.abortInteraction(q),k()},[k]),U=C.useMemo(()=>x.filter(q=>(q.panel??"main")==="sidebar"&&(q.show?q.show():!0)),[x]),M=C.useMemo(()=>x.filter(q=>q.panel==="sidebar-footer"&&(q.show?q.show():!0)),[x]),W=C.useMemo(()=>x.filter(q=>q.panel==="header"&&(q.show?q.show():!0)),[x]),V=C.useMemo(()=>{var q;return(q=x.find(te=>te.id==="core-settings-trigger"))==null?void 0:q.settingsRenderer},[x]),ie=C.useMemo(()=>{var q;return(q=x.find(te=>te.id==="core-project-settings-trigger"))==null?void 0:q.settingsRenderer},[x]),ae=C.useMemo(()=>{var q;return(q=x.find(te=>te.id==="core-vfs-modal-panel"))==null?void 0:q.renderer},[x]),ne=o==="conversation"?s:null;return t?p.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:p.jsxs("div",{className:"flex flex-col items-center gap-4",children:[p.jsx(Fn,{className:"h-12 w-12 animate-spin text-primary"}),p.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"flex h-full w-full border border-border rounded-lg overflow-hidden bg-background text-foreground",children:[p.jsxs("div",{className:vt("hidden md:flex flex-col border-r border-border bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",g?"w-16":"w-64"),children:[p.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:[p.jsx("div",{className:vt(g?"hidden":"block"),children:p.jsx(Hh,{controls:U,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:vt(g?"block":"hidden"),children:p.jsx(Hh,{controls:U,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),p.jsx("div",{className:vt("flex-shrink-0 border-t border-border p-2",g?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:p.jsx(Hh,{controls:M,panelId:"sidebar-footer",renderMode:g?"icon":"full",className:vt("flex",g?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),r&&p.jsxs("div",{className:"md:hidden fixed inset-0 z-50 flex",children:[p.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm animate-fadeIn",onClick:T}),p.jsxs("div",{className:"relative w-4/5 max-w-xs bg-card border-r border-border h-full flex flex-col animate-slideInFromLeft",children:[p.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[p.jsx("h2",{className:"font-semibold",children:"LiteChat Menu"}),p.jsx("button",{onClick:T,className:"p-1 rounded-md hover:bg-muted","aria-label":"Close menu",children:p.jsx(Di,{className:"h-5 w-5"})})]}),p.jsx("div",{className:"flex-grow overflow-y-auto overflow-x-hidden",children:p.jsx(Hh,{controls:U,panelId:"sidebar",renderMode:"full",className:"h-full"})}),p.jsx("div",{className:"flex-shrink-0 border-t border-border p-4",children:p.jsx(Hh,{controls:M,panelId:"sidebar-footer",renderMode:"full",className:"flex items-center justify-between"})})]})]}),p.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[p.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-border bg-card flex-shrink-0",children:[p.jsx("button",{className:"md:hidden p-2 rounded-md hover:bg-muted",onClick:T,"aria-label":"Open menu",children:p.jsx(ZZ,{className:"h-5 w-5"})}),p.jsx(Hh,{controls:W,panelId:"header",className:"flex items-center justify-end gap-1 flex-grow"})]}),p.jsx(n1e,{conversationId:ne,interactions:d,onRegenerateInteraction:P,onStopInteraction:O,status:h,className:"flex-grow overflow-y-hidden"}),m&&p.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",m]}),p.jsx(vne,{InputAreaRenderer:pV,onSubmit:I,className:"border-t border-border bg-card flex-shrink-0",inputAreaRef:i})]})]}),v.settingsModal&&V&&V(),b&&ie&&ie(),w&&ae&&ae(),p.jsx(G2e,{richColors:!0,position:"bottom-right",closeButton:!0})]})},tEe="prism-theme-link",nEe="prism-default-light-theme-link",rEe="prism-default-dark-theme-link",aEe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css",iEe="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css",lT=e=>{let t=document.getElementById(e);return t||(t=document.createElement("link"),t.id=e,t.rel="stylesheet",document.head.appendChild(t)),t},sEe=()=>{const{prismThemeUrl:e,theme:t}=ar(cn(a=>({prismThemeUrl:a.prismThemeUrl,theme:a.theme}))),n=C.useMemo(()=>typeof window>"u"?"light":window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),r=C.useMemo(()=>{const a=t==="system"?n:t;return a==="dark"||a==="TijuDark"?"dark":"light"},[t,n]);return C.useEffect(()=>{if(typeof window>"u")return;const a=lT(nEe),i=lT(rEe),s=lT(tEe);return a.disabled=!0,i.disabled=!0,s.disabled=!0,a.href=aEe,i.href=iEe,e?(s.href=e,s.disabled=!1):(console.log(r),r==="dark"?i.disabled=!1:a.disabled=!1),()=>{}},[e,r]),null},cT=e=>e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase(),uT=["background","foreground","card","cardForeground","popover","popoverForeground","primary","primaryForeground","secondary","secondaryForeground","muted","mutedForeground","accent","accentForeground","destructive","destructiveForeground","border","input","ring","chart1","chart2","chart3","chart4","chart5","sidebar","sidebarForeground","sidebarPrimary","sidebarPrimaryForeground","sidebarAccent","sidebarAccentForeground","sidebarBorder","sidebarRing"],oEe=()=>{const{theme:e,customFontFamily:t,customFontSize:n,customThemeColors:r}=ar(cn(a=>({theme:a.theme,customFontFamily:a.customFontFamily,customFontSize:a.customFontSize,customThemeColors:a.customThemeColors})));return C.useEffect(()=>{const a=document.body,i=document.documentElement;a.classList.remove("light","dark","TijuLight","TijuDark","custom"),uT.forEach(s=>{i.style.removeProperty(`--${cT(s)}`)}),i.style.removeProperty("--custom-font-family"),i.style.removeProperty("--custom-font-size"),e==="light"?a.classList.add("light"):e==="dark"?a.classList.add("dark"):e==="TijuLight"?a.classList.add("TijuLight"):e==="TijuDark"?a.classList.add("TijuDark"):e==="custom"?(a.classList.add("custom"),t?i.style.setProperty("--custom-font-family",t):i.style.removeProperty("--custom-font-family"),n?i.style.setProperty("--custom-font-size",`${n}px`):i.style.removeProperty("--custom-font-size"),r&&Object.entries(r).forEach(([s,o])=>{if(o&&uT.includes(s)){const l=`--${cT(s)}`;i.style.setProperty(l,o)}else if(uT.includes(s)){const l=`--${cT(s)}`;i.style.removeProperty(l)}})):window.matchMedia("(prefers-color-scheme: dark)").matches?a.classList.add("dark"):a.classList.add("light")},[e,t,n,r]),null},lEe=e=>{const{size:t=24,color:n="currentColor",...r}=e;return p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 512 512",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...r,children:[p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2310 5053 c-1035 -101 -1883 -794 -2159 -1764 -55 -194 -79 -338
-91 -552 -18 -323 20 -620 117 -907 92 -272 238 -543 404 -747 33 -39 59 -75
59 -78 0 -4 -49 -129 -109 -279 -252 -624 -251 -621 -196 -676 57 -56 73 -53
351 58 137 55 349 143 472 195 l223 95 77 -38 c221 -109 437 -179 680 -219
132 -23 411 -44 475 -37 23 3 85 8 137 11 404 26 806 168 1180 417 282 188
571 489 759 792 400 642 467 1498 174 2216 -179 439 -495 826 -888 1088 -361
239 -743 378 -1165 422 -88 9 -419 11 -500 3z m404 -463 c-1 -30 -17 -128 -36
-217 l-34 -163 137 0 c128 0 139 -1 149 -20 11 -21 4 -44 -22 -72 -7 -7 -68
-75 -135 -150 l-123 -136 0 -175 0 -175 238 -4 c265 -5 329 -16 469 -82 220
-105 414 -311 486 -519 l24 -68 86 -4 c129 -7 195 -43 236 -130 20 -42 21 -61
21 -300 0 -240 -1 -258 -21 -297 -46 -90 -115 -127 -235 -128 l-82 0 -11 -47
c-17 -66 -71 -179 -119 -250 -108 -159 -276 -293 -452 -361 -174 -66 -251 -72
-830 -63 l-475 8 -89 27 c-303 91 -554 328 -650 614 l-23 67 -89 5 c-98 6
-131 20 -180 72 -63 66 -64 72 -64 354 0 240 1 261 21 301 40 84 105 119 232
129 l84 7 32 80 c84 215 291 424 513 519 126 53 225 68 466 68 l212 0 0 268 0
267 -126 -3 c-108 -3 -129 -1 -145 14 -10 9 -19 25 -19 35 0 9 111 146 246
304 234 273 247 286 277 283 32 -3 32 -3 31 -58z`})}),p.jsxs("g",{transform:"translate(165, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsxs("g",{transform:"translate(290, 220) scale(2.5)",children:[p.jsx("path",{d:"M5 5l14 14",stroke:n,strokeWidth:"4"}),p.jsx("path",{d:"M18 5l-14 14",stroke:n,strokeWidth:"4"})]}),p.jsx("g",{transform:"translate(0.000000,512.000000) scale(0.100000,-0.100000)",fill:n,stroke:"none",children:p.jsx("path",{d:`M2147 1750 c-26 15 -48 65 -41 94
             15 61 181 167 304 196
             30 7 100 12 155 12
             81 -1 115 -6 178 -27
             135 -45 247 -133 249 -194
             2 -60 -48 -103 -104 -88
             -13 3 -50 25 -83 50
             -85 64 -172 90 -280 84
             -92 -6 -165 -35 -259 -103
             -49 -35 -86 -43 -119 -24z`})})]})},BP="0.1.0-dev",$P="https://github.com/DimitriGilbert/LiteChat",zP=({textToCopy:e,label:t,className:n})=>{const[r,a]=C.useState(!1),i=async()=>{try{await navigator.clipboard.writeText(e),a(!0),qe.success(`${t} copied to clipboard!`),setTimeout(()=>a(!1),2e3)}catch(s){qe.error(`Failed to copy ${t.toLowerCase()}.`),console.error(`Clipboard copy failed for ${t}:`,s)}};return p.jsxs(Rt,{variant:"outline",onClick:i,className:n,children:[r?p.jsx(Ga,{className:"mr-2 h-4 w-4 text-green-500"}):p.jsx(cZ,{className:"mr-2 h-4 w-4"}),r?"Copied!":`Copy ${t}`]})};class cEe extends C.Component{constructor(){super(...arguments);wa(this,"state",{hasError:!1,error:null,errorInfo:null});wa(this,"handleReportOnGitHub",async()=>{const n=this.generateErrorReport(!0);try{await navigator.clipboard.writeText(n),qe.success("Error report copied to clipboard. Paste it into the GitHub issue body.");const r=`${$P}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(r,"_blank","noopener,noreferrer")}catch(r){qe.error("Failed to copy error report. Please copy manually."),console.error("Clipboard copy failed for GitHub report:",r);const a=`${$P}/issues/new?title=${encodeURIComponent(this.getGitHubIssueTitle())}`;window.open(a,"_blank","noopener,noreferrer")}})}static getDerivedStateFromError(n){return{hasError:!0,error:n,errorInfo:null}}componentDidCatch(n,r){console.error("Uncaught error:",n,r),this.setState({errorInfo:r})}getGitHubIssueTitle(){var i;const{error:n,errorInfo:r}=this.state;let a="Crash Report: ";if(r!=null&&r.componentStack){const s=(i=r.componentStack.trim().split(/\s+at\s+/)[1])==null?void 0:i.split(" ")[0];s&&(a+=`Error in <${s}> - `)}return a+=(n==null?void 0:n.message.substring(0,70))??"Unknown Error",n&&n.message.length>70&&(a+="..."),a}generateErrorReport(n=!1){const{error:r,errorInfo:a}=this.state,i=`
`,s=n?"```":"";let o=`## LiteChat Error Report${i}${i}`;return o+=`**Version:** ${BP}${i}`,o+=`**Timestamp:** ${new Date().toISOString()}${i}`,o+=`**User Agent:** ${typeof navigator<"u"?navigator.userAgent:"N/A"}${i}${i}`,r?o+=`**Error Message:**${i}${s}${i}${r.message}${i}${s}${i}${i}`:o+=`**Error Message:** Unknown Error${i}${i}`,a!=null&&a.componentStack&&(o+=`**Component Stack:**${i}${s}text${i}${a.componentStack.trim()}${i}${s}${i}${i}`),r!=null&&r.stack&&(o+=`**Error Stack Trace:**${i}${s}text${i}${r.stack.trim()}${i}${s}${i}${i}`),o+=`**Steps to Reproduce (Please Describe):**${i}1. ...${i}2. ...${i}${i}`,o+=`**Expected Behavior:**${i}...${i}${i}`,o+=`**Actual Behavior:**${i}...${i}`,o}generateAIPrompt(){var i,s;const{error:n,errorInfo:r}=this.state;return`I encountered an error in a React application (LiteChat v${BP}). Please help me debug it.

Error Message:
\`\`\`
${(n==null?void 0:n.message)??"Unknown Error"}
\`\`\`

Component Stack (if available):
\`\`\`
${((i=r==null?void 0:r.componentStack)==null?void 0:i.trim())??"Not available"}
\`\`\`

Error Stack Trace (if available):
\`\`\`
${((s=n==null?void 0:n.stack)==null?void 0:s.trim())??"Not available"}
\`\`\`

Based on this information, what are the likely causes and potential solutions? Focus on React-specific issues if the component stack is present.`}render(){var n;return this.state.hasError?this.props.fallback?this.props.fallback:p.jsx("div",{role:"alert",className:"flex flex-col items-center justify-center h-screen w-screen p-4 bg-background text-foreground",children:p.jsxs("div",{className:"max-w-2xl w-full border border-destructive bg-destructive/10 rounded-lg p-6 text-center shadow-lg",children:[p.jsx(lEe,{className:"h-24 w-24 text-destructive mx-auto mb-4"}),p.jsx("h1",{className:"text-2xl font-semibold text-destructive mb-2",children:"Oops! Something went wrong."}),p.jsx("p",{className:"text-destructive/90 mb-4",children:"LiteChat encountered an unexpected error. Please try refreshing the page. If the problem persists, consider reporting the issue. Copy the details and paste them into the GitHub issue."}),p.jsx("pre",{className:"text-left text-xs bg-destructive/10 border border-destructive/30 rounded p-3 max-h-32 overflow-auto mb-4 font-mono text-destructive/80",children:((n=this.state.error)==null?void 0:n.message)??"Unknown Error"}),p.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[p.jsx(Rt,{variant:"destructive",onClick:()=>window.location.reload(),children:"Refresh Page"}),p.jsx(zP,{textToCopy:this.generateErrorReport(),label:"Details"}),p.jsx(zP,{textToCopy:this.generateAIPrompt(),label:"AI Debug Prompt"}),p.jsxs(Rt,{variant:"outline",onClick:this.handleReportOnGitHub,children:[p.jsx(F8,{className:"mr-2 h-4 w-4"})," Report on GitHub"]})]})]})}):this.props.children}}const mV=(e,t)=>{if(!t)return null;let n=Fu,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Fn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=Ec,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=bA,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=b1,r="text-green-500",a=`Synced with ${t}`;break;default:n=Fu,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(n,{className:vt("h-3 w-3 ml-1 flex-shrink-0",r)})}),p.jsx(Yn,{side:"right",children:a})]})})},c1=C.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:T,handleCancelEdit:k,isSavingEdit:R,editInputRef:j})=>{const I=e.id===n,P=e.itemType==="project",O=e.id===v&&e.itemType===b,U=P&&d.has(e.id),{projects:M,conversations:W}=P?m(e.id,g):{projects:[],conversations:[]},V=M.length>0||W.length>0,ie=!P&&e.syncRepoId?r[e.id]:void 0,ae=!P&&e.syncRepoId?a.get(e.syncRepoId):void 0,ne=!P&&ae?mV(ie,ae):null,q=Qi(Ne=>Ne.openProjectSettingsModal),te=()=>{O||(P&&V&&h(e.id),i(e.id,e.itemType))},G=Ne=>{Ne.stopPropagation(),P?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&o(e.id,Ne):s(e.id,Ne)},J=Ne=>{Ne.stopPropagation(),E(e)},Q=Ne=>{Ne.stopPropagation(),P&&q(e.id)},se=Ne=>{Ne.key==="Enter"?(Ne.preventDefault(),T()):Ne.key==="Escape"&&k()},fe=P?e.name:e.title,ve=R?Fn:Ga,je=R?"h-3 w-3 animate-spin":"h-3 w-3";return p.jsxs(p.Fragment,{children:[p.jsxs("li",{className:vt("relative flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!O&&"hover:bg-muted/50 hover:text-primary/80",I&&!O?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",O&&"bg-muted ring-1 ring-primary",!O&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:te,title:O?"":fe,children:[p.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[P&&V&&p.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Ne=>{Ne.stopPropagation(),h(e.id)},children:U?p.jsx(To,{className:"h-3 w-3 text-muted-foreground"}):p.jsx(O8,{className:"h-3 w-3 text-muted-foreground"})}),P&&!V&&p.jsx("span",{className:"w-3 flex-shrink-0"}),P?p.jsx(hf,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):p.jsx(CT,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),O?p.jsx(xn,{ref:j,value:x,onChange:Ne=>_(Ne.target.value),onKeyDown:se,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Ne=>Ne.stopPropagation(),disabled:R}):p.jsx("span",{className:"truncate min-w-0 flex-1",children:fe}),ne]}),p.jsx("div",{className:vt("items-center flex-shrink-0 ml-1",O?"flex":"hidden group-hover:flex transition-all duration-150"),onClick:Ne=>Ne.stopPropagation(),children:O?p.jsxs(p.Fragment,{children:[p.jsx(Sn,{tooltipText:"Save (Enter)",onClick:Ne=>{Ne.stopPropagation(),T()},disabled:R||!x.trim(),"aria-label":"Save changes",icon:p.jsx(ve,{}),iconClassName:je,className:"h-5 w-5 text-green-500 hover:text-green-600"}),p.jsx(Sn,{tooltipText:"Cancel (Esc)",onClick:Ne=>{Ne.stopPropagation(),k()},disabled:R,"aria-label":"Cancel edit",icon:p.jsx(Di,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[P&&p.jsx(Sn,{tooltipText:"Project Settings",onClick:Q,"aria-label":`Settings for ${fe}`,icon:p.jsx(iZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),p.jsx(Sn,{tooltipText:"Edit",onClick:J,"aria-label":`Edit ${fe}`,icon:p.jsx(wy,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),P?p.jsx(Sn,{tooltipText:"Export Project (JSON)",onClick:Ne=>u(e.id,Ne),"aria-label":`Export project ${fe}`,icon:p.jsx(wZ,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):p.jsxs("div",{className:"relative group/export",children:[p.jsx(Sn,{tooltipText:"Export Conversation","aria-label":`Export ${fe}`,icon:p.jsx(cf,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),p.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Ne=>Ne.stopPropagation(),children:[p.jsx(Rt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ne=>l(e.id,"json",Ne),children:"JSON"}),p.jsx(Rt,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ne=>l(e.id,"md",Ne),children:"MD"})]})]}),p.jsx(Sn,{tooltipText:"Delete",onClick:G,"aria-label":`Delete ${fe}`,icon:p.jsx(Yi,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),P&&U&&p.jsxs(p.Fragment,{children:[M.sort((Ne,Se)=>Se.updatedAt.getTime()-Ne.updatedAt.getTime()).map(Ne=>p.jsx(c1,{item:{...Ne,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:T,handleCancelEdit:k,isSavingEdit:R,editInputRef:j},Ne.id)),W.sort((Ne,Se)=>Se.updatedAt.getTime()-Ne.updatedAt.getTime()).map(Ne=>p.jsx(c1,{item:{...Ne,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:s,onDeleteProject:o,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:m,filterText:g,editingItemId:v,editingItemType:b,originalName:w,localEditingName:x,setLocalEditingName:_,handleStartEditing:E,handleSaveEdit:T,handleCancelEdit:k,isSavingEdit:R,editInputRef:j},Ne.id))]})]})});c1.displayName="ConversationItemRenderer";function uEe({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=C.useState(null),[i,s]=C.useState(null),[o,l]=C.useState(""),[u,d]=C.useState(""),[h,m]=C.useState(!1),g=C.useRef(null),v=C.useCallback(x=>{a(x.id),s(x.itemType);const _=x.itemType==="project"?x.name:x.title;l(_),d(_),m(!1)},[]),b=C.useCallback(x=>{const _=r,E=x??(i==="project"&&o==="New Project");a(null),s(null),l(""),d(""),m(!1),E&&_&&(console.log(`Cancelling edit for new project ${_}, deleting...`),n(_).catch(T=>{console.error("Failed to delete new project on cancel:",T),qe.error("Failed to clean up cancelled new project.")}))},[r,i,o,n]),w=C.useCallback(async()=>{var E;if(!r||!i||h)return;const x=u.trim(),_=i==="project"&&o==="New Project";if(!x){qe.error("Name cannot be empty."),(E=g.current)==null||E.focus();return}if(x===o&&!_){b();return}m(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),qe.success("Item renamed successfully."),a(null),s(null),l(""),d("")}catch(T){console.error("Failed to save item name:",T),qe.error(`Failed to rename item: ${T instanceof Error?T.message:String(T)}`)}finally{m(!1)}},[r,i,u,o,h,e,t,b]);return C.useEffect(()=>{r&&g.current&&(g.current.focus(),g.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:o,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:w,handleCancelEdit:b}}const Zk=(e,t,n,r,a,i,s,o,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const m=o.get(e)||[],g=s.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of m)if(Zk(v.id,"project",n,r,a,i,s,o,l)){d=!0;break}}}}return l[u]=d,d},dEe=()=>{const e=hn(B=>B.selectedItemId),t=hn(B=>B.selectedItemType),n=hn(B=>B.isLoading),r=ri(B=>B.isLoading),{conversations:a,syncRepos:i,conversationSyncStatus:s}=hn(cn(B=>({conversations:B.conversations,syncRepos:B.syncRepos,conversationSyncStatus:B.conversationSyncStatus}))),o=ri(B=>B.projects),l=hn(B=>B.selectItem),u=hn(B=>B.addConversation),d=hn(B=>B.updateConversation),h=hn(B=>B.deleteConversation),m=hn(B=>B.exportConversation),g=hn(B=>B.exportProject),v=hn(B=>B.getConversationById),b=ri(B=>B.addProject),w=ri(B=>B.updateProject),x=ri(B=>B.deleteProject),_=ri(B=>B.getProjectById),[E,T]=gt.useState(new Set),[k,R]=C.useState(""),j=n||r,I=uEe({updateProject:w,updateConversation:d,deleteProject:x,getProjectById:_,getConversationById:v}),{editingItemId:P,editingItemType:O,originalName:U,localEditingName:M,setLocalEditingName:W,isSavingEdit:V,editInputRef:ie,handleStartEditing:ae,handleSaveEdit:ne,handleCancelEdit:q}=I,te=C.useCallback(B=>{T(Ce=>{const Ee=new Set(Ce);return Ee.has(B)?Ee.delete(B):Ee.add(B),Ee})},[]),G=C.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const B=v(e);return(B==null?void 0:B.projectId)??null}return null},[e,t,v]),J=C.useCallback(async()=>{if(!P)try{const B=G(),Ce=await u({title:"New Chat",projectId:B});l(Ce,"conversation")}catch(B){console.error("Failed to create new chat:",B),qe.error("Failed to create new chat.")}},[P,G,u,l]),Q=C.useCallback(async()=>{if(!P)try{const B=G(),Ce=await b({name:"New Project",parentId:B});l(Ce,"project"),B&&T(Ee=>new Set(Ee).add(B)),setTimeout(()=>{const Ee=_(Ce);Ee?ae({...Ee,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(B){console.error("Failed to create new project:",B)}},[P,G,b,l,_,ae]),se=C.useCallback((B,Ce)=>{B!==P&&(P&&B!==P&&(M.trim()&&M.trim()!==U?ne():q()),(B!==e||Ce!==t)&&l(B,Ce))},[P,M,U,e,t,ne,q,l]),fe=C.useCallback((B,Ce)=>{Ce.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&h(B).catch(Ee=>{console.error("Failed to delete conversation:",Ee),qe.error("Failed to delete conversation.")})},[h]),ve=C.useCallback((B,Ce)=>{Ce.stopPropagation(),x(B).catch(Ee=>{console.error("Failed to delete project:",Ee),qe.error("Failed to delete project.")})},[x]),je=C.useCallback(async(B,Ce,Ee)=>{Ee.stopPropagation();try{await m(B,Ce)}catch(ce){console.error(`Failed to export conversation as ${Ce}:`,ce)}},[m]),Ne=C.useCallback(async(B,Ce)=>{Ce.stopPropagation();try{await g(B)}catch(Ee){console.error("Failed to export project:",Ee)}},[g]),Se=C.useMemo(()=>new Map((i||[]).map(B=>[B.id,B.name])),[i]),{projectsById:ye,conversationsByProjectId:Fe,projectsByParentId:Xe}=C.useMemo(()=>{const B=new Map(o.map(ce=>[ce.id,ce])),Ce=new Map;a.forEach(ce=>{const oe=ce.projectId??null;Ce.has(oe)||Ce.set(oe,[]),Ce.get(oe).push(ce)});const Ee=new Map;return o.forEach(ce=>{const oe=ce.parentId??null;Ee.has(oe)||Ee.set(oe,[]),Ee.get(oe).push(ce)}),{projectsById:B,conversationsByProjectId:Ce,projectsByParentId:Ee}},[o,a]),Le=C.useCallback((B,Ce)=>{const Ee=Ce.toLowerCase(),ce={},oe=(Xe.get(B)||[]).filter(_e=>Zk(_e.id,"project",Ee,o,a,ye,Fe,Xe,ce)),ee=(Fe.get(B)||[]).filter(_e=>_e.title.toLowerCase().includes(Ee));return oe.sort((_e,Pe)=>Pe.updatedAt.getTime()-_e.updatedAt.getTime()),ee.sort((_e,Pe)=>Pe.updatedAt.getTime()-_e.updatedAt.getTime()),{projects:oe,conversations:ee}},[o,a,ye,Fe,Xe]),Ie=C.useMemo(()=>{const B=k.toLowerCase(),Ce={},Ee=(Xe.get(null)||[]).filter(ee=>Zk(ee.id,"project",B,o,a,ye,Fe,Xe,Ce)),ce=(Fe.get(null)||[]).filter(ee=>ee.title.toLowerCase().includes(B)),oe=[...Ee.map(ee=>({...ee,itemType:"project"})),...ce.map(ee=>({...ee,itemType:"conversation"}))];return oe.sort((ee,_e)=>_e.updatedAt.getTime()-ee.updatedAt.getTime()),oe},[o,a,k,ye,Fe,Xe]);return p.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[p.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{size:"sm",variant:"ghost",onClick:Q,"aria-label":"New Project",disabled:j||!!P,className:"h-7 w-7 p-0",children:p.jsx(dA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"bottom",children:"New Project"})]})}),p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{size:"sm",variant:"ghost",onClick:J,"aria-label":"New Chat",disabled:j||!!P,className:"h-7 w-7 p-0",children:p.jsx(Tf,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"bottom",children:"New Chat"})]})})]})]}),p.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[p.jsx(es,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter...",value:k,onChange:B=>R(B.target.value),className:"h-8 text-xs pl-8",disabled:j})]}),p.jsx("div",{className:"flex-grow",children:j?p.jsxs("div",{className:"space-y-1 p-1",children:[p.jsx($n,{className:"h-8 w-full"}),p.jsx($n,{className:"h-8 w-full"}),p.jsx($n,{className:"h-8 w-full"})]}):Ie.length===0?p.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:k.trim()!==""?"No items match your filter.":"Workspace is empty."}):p.jsx("ul",{className:"space-y-0.5 p-1",children:Ie.map(B=>p.jsx(c1,{item:B,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Se,onSelectItem:se,onDeleteConversation:fe,onDeleteProject:ve,onExportConversation:je,onExportProject:Ne,expandedProjects:E,toggleProjectExpansion:te,getChildren:Le,filterText:k,editingItemId:P,editingItemType:O,originalName:U,localEditingName:M,setLocalEditingName:W,handleStartEditing:ae,handleSaveEdit:ne,handleCancelEdit:q,isSavingEdit:V,editInputRef:ie},B.id))})})]})},fEe=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=hn(cn(l=>({addConversation:l.addConversation,selectItem:l.selectItem,selectedItemId:l.selectedItemId,selectedItemType:l.selectedItemType,getConversationById:l.getConversationById}))),{addProject:a}=ri(cn(l=>({addProject:l.addProject,getProjectById:l.getProjectById}))),i=()=>{if(r==="project")return n;if(r==="conversation"&&n){const l=hn.getState().getConversationById(n);return(l==null?void 0:l.projectId)??null}return null},s=async()=>{try{const l=i(),u=await e({title:"New Chat",projectId:l});t(u,"conversation")}catch(l){console.error("Failed to create new chat:",l)}},o=async()=>{try{const l=i(),u=await a({name:"New Project",parentId:l});t(u,"project")}catch(l){console.error("Failed to create new project:",l)}};return p.jsxs("div",{className:"flex flex-col items-center gap-2",children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:o,className:"h-8 w-8","aria-label":"New Project",children:p.jsx(dA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"right",children:"New Project"})]})}),p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:p.jsx(Tf,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"right",children:"New Chat"})]})})]})};function hEe(){const e=Sr.getState().registerChatControl,t=hn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>gt.createElement(dEe),iconRenderer:()=>gt.createElement(fEe),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var L_="Dialog",[gV,rIe]=_i(L_),[pEe,zo]=gV(L_),yV=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:s=!0}=e,o=C.useRef(null),l=C.useRef(null),[u,d]=Io({prop:r,defaultProp:a??!1,onChange:i,caller:L_});return p.jsx(pEe,{scope:t,triggerRef:o,contentRef:l,contentId:Ha(),titleId:Ha(),descriptionId:Ha(),open:u,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(h=>!h),[d]),modal:s,children:n})};yV.displayName=L_;var bV="DialogTrigger",mEe=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=zo(bV,n),i=Nn(t,a.triggerRef);return p.jsx(an.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":UR(a.open),...r,ref:i,onClick:Gt(e.onClick,a.onOpenToggle)})});mEe.displayName=bV;var $R="DialogPortal",[gEe,vV]=gV($R,{forceMount:void 0}),wV=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=zo($R,t);return p.jsx(gEe,{scope:t,forceMount:n,children:C.Children.map(r,s=>p.jsx(Za,{present:n||i.open,children:p.jsx(Zp,{asChild:!0,container:a,children:s})}))})};wV.displayName=$R;var u1="DialogOverlay",xV=C.forwardRef((e,t)=>{const n=vV(u1,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=zo(u1,e.__scopeDialog);return i.modal?p.jsx(Za,{present:r||i.open,children:p.jsx(bEe,{...a,ref:t})}):null});xV.displayName=u1;var yEe=Pu("DialogOverlay.RemoveScroll"),bEe=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=zo(u1,n);return p.jsx(ob,{as:yEe,allowPinchZoom:!0,shards:[a.contentRef],children:p.jsx(an.div,{"data-state":UR(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Ef="DialogContent",_V=C.forwardRef((e,t)=>{const n=vV(Ef,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=zo(Ef,e.__scopeDialog);return p.jsx(Za,{present:r||i.open,children:i.modal?p.jsx(vEe,{...a,ref:t}):p.jsx(wEe,{...a,ref:t})})});_V.displayName=Ef;var vEe=C.forwardRef((e,t)=>{const n=zo(Ef,e.__scopeDialog),r=C.useRef(null),a=Nn(t,n.contentRef,r);return C.useEffect(()=>{const i=r.current;if(i)return A_(i)},[]),p.jsx(SV,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Gt(e.onCloseAutoFocus,i=>{var s;i.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:Gt(e.onPointerDownOutside,i=>{const s=i.detail.originalEvent,o=s.button===0&&s.ctrlKey===!0;(s.button===2||o)&&i.preventDefault()}),onFocusOutside:Gt(e.onFocusOutside,i=>i.preventDefault())})}),wEe=C.forwardRef((e,t)=>{const n=zo(Ef,e.__scopeDialog),r=C.useRef(!1),a=C.useRef(!1);return p.jsx(SV,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var s,o;(s=e.onCloseAutoFocus)==null||s.call(e,i),i.defaultPrevented||(r.current||(o=n.triggerRef.current)==null||o.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const s=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),SV=C.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...s}=e,o=zo(Ef,n),l=C.useRef(null),u=Nn(t,l);return T_(),p.jsxs(p.Fragment,{children:[p.jsx(sb,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:p.jsx(Gp,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":UR(o.open),...s,ref:u,onDismiss:()=>o.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(xEe,{titleId:o.titleId}),p.jsx(SEe,{contentRef:l,descriptionId:o.descriptionId})]})]})}),zR="DialogTitle",EV=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=zo(zR,n);return p.jsx(an.h2,{id:a.titleId,...r,ref:t})});EV.displayName=zR;var CV="DialogDescription",TV=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=zo(CV,n);return p.jsx(an.p,{id:a.descriptionId,...r,ref:t})});TV.displayName=CV;var kV="DialogClose",AV=C.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=zo(kV,n);return p.jsx(an.button,{type:"button",...r,ref:t,onClick:Gt(e.onClick,()=>a.onOpenChange(!1))})});AV.displayName=kV;function UR(e){return e?"open":"closed"}var NV="DialogTitleWarning",[aIe,RV]=wne(NV,{contentName:Ef,titleName:zR,docsSlug:"dialog"}),xEe=({titleId:e})=>{const t=RV(NV),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return C.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},_Ee="DialogDescriptionWarning",SEe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${RV(_Ee).contentName}}.`;return C.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},IV=yV,jV=wV,DV=xV,MV=_V,EEe=EV,CEe=TV,OV=AV;function B_({...e}){return p.jsx(IV,{"data-slot":"dialog",...e})}function TEe({...e}){return p.jsx(jV,{"data-slot":"dialog-portal",...e})}function kEe({...e}){return p.jsx(OV,{"data-slot":"dialog-close",...e})}function AEe({className:e,...t}){return p.jsx(DV,{"data-slot":"dialog-overlay",className:vt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function $_({className:e,children:t,...n}){return p.jsxs(TEe,{"data-slot":"dialog-portal",children:[p.jsx(AEe,{}),p.jsxs(MV,{"data-slot":"dialog-content",className:vt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,p.jsxs(OV,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[p.jsx(Di,{}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function z_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-header",className:vt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function U_({className:e,...t}){return p.jsx("div",{"data-slot":"dialog-footer",className:vt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function V_({className:e,...t}){return p.jsx(EEe,{"data-slot":"dialog-title",className:vt("text-lg leading-none font-semibold",e),...t})}function H_({className:e,...t}){return p.jsx(CEe,{"data-slot":"dialog-description",className:vt("text-muted-foreground text-sm",e),...t})}var PV=["PageUp","PageDown"],FV=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],LV={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},gm="Slider",[Yk,NEe,REe]=C_(gm),[BV,iIe]=_i(gm,[REe]),[IEe,q_]=BV(gm),$V=C.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:s="horizontal",disabled:o=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:v,...b}=e,w=C.useRef(new Set),x=C.useRef(0),E=s==="horizontal"?jEe:DEe,[T=[],k]=Io({prop:d,defaultProp:u,onChange:U=>{var W;(W=[...w.current][x.current])==null||W.focus(),h(U)}}),R=C.useRef(T);function j(U){const M=LEe(T,U);O(U,M)}function I(U){O(U,x.current)}function P(){const U=R.current[x.current];T[x.current]!==U&&m(T)}function O(U,M,{commit:W}={commit:!1}){const V=UEe(i),ie=VEe(Math.round((U-r)/i)*i+r,V),ae=Y0(ie,[r,a]);k((ne=[])=>{const q=PEe(ne,ae,M);if(zEe(q,l*i)){x.current=q.indexOf(ae);const te=String(q)!==String(ne);return te&&W&&m(q),te?q:ne}else return ne})}return p.jsx(IEe,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:a,valueIndexToChangeRef:x,thumbs:w.current,values:T,orientation:s,form:v,children:p.jsx(Yk.Provider,{scope:e.__scopeSlider,children:p.jsx(Yk.Slot,{scope:e.__scopeSlider,children:p.jsx(E,{"aria-disabled":o,"data-disabled":o?"":void 0,...b,ref:t,onPointerDown:Gt(b.onPointerDown,()=>{o||(R.current=T)}),min:r,max:a,inverted:g,onSlideStart:o?void 0:j,onSlideMove:o?void 0:I,onSlideEnd:o?void 0:P,onHomeKeyDown:()=>!o&&O(r,0,{commit:!0}),onEndKeyDown:()=>!o&&O(a,T.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:M})=>{if(!o){const ie=PV.includes(U.key)||U.shiftKey&&FV.includes(U.key)?10:1,ae=x.current,ne=T[ae],q=i*ie*M;O(ne+q,ae,{commit:!0})}}})})})})});$V.displayName=gm;var[zV,UV]=BV(gm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),jEe=C.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,m]=C.useState(null),g=Nn(t,E=>m(E)),v=C.useRef(void 0),b=dm(a),w=b==="ltr",x=w&&!i||!w&&i;function _(E){const T=v.current||h.getBoundingClientRect(),k=[0,T.width],j=VR(k,x?[n,r]:[r,n]);return v.current=T,j(E-T.left)}return p.jsx(zV,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:p.jsx(VV,{dir:b,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const T=_(E.clientX);s==null||s(T)},onSlideMove:E=>{const T=_(E.clientX);o==null||o(T)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=LV[x?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:k?-1:1})}})})}),DEe=C.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:s,onSlideEnd:o,onStepKeyDown:l,...u}=e,d=C.useRef(null),h=Nn(t,d),m=C.useRef(void 0),g=!a;function v(b){const w=m.current||d.current.getBoundingClientRect(),x=[0,w.height],E=VR(x,g?[r,n]:[n,r]);return m.current=w,E(b-w.top)}return p.jsx(zV,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:p.jsx(VV,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const w=v(b.clientY);i==null||i(w)},onSlideMove:b=>{const w=v(b.clientY);s==null||s(w)},onSlideEnd:()=>{m.current=void 0,o==null||o()},onStepKeyDown:b=>{const x=LV[g?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),VV=C.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:s,onEndKeyDown:o,onStepKeyDown:l,...u}=e,d=q_(gm,n);return p.jsx(an.span,{...u,ref:t,onKeyDown:Gt(e.onKeyDown,h=>{h.key==="Home"?(s(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):PV.concat(FV).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:Gt(e.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:Gt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:Gt(e.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),i(h))})})}),HV="SliderTrack",qV=C.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=q_(HV,n);return p.jsx(an.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});qV.displayName=HV;var Xk="SliderRange",GV=C.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=q_(Xk,n),i=UV(Xk,n),s=C.useRef(null),o=Nn(t,s),l=a.values.length,u=a.values.map(m=>ZV(m,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return p.jsx(an.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:o,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});GV.displayName=Xk;var Jk="SliderThumb",WV=C.forwardRef((e,t)=>{const n=NEe(e.__scopeSlider),[r,a]=C.useState(null),i=Nn(t,o=>a(o)),s=C.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return p.jsx(MEe,{...e,ref:i,index:s})}),MEe=C.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,s=q_(Jk,n),o=UV(Jk,n),[l,u]=C.useState(null),d=Nn(t,_=>u(_)),h=l?s.form||!!l.closest("form"):!0,m=P1(l),g=s.values[r],v=g===void 0?0:ZV(g,s.min,s.max),b=FEe(r,s.values.length),w=m==null?void 0:m[o.size],x=w?BEe(w,v,o.direction):0;return C.useEffect(()=>{if(l)return s.thumbs.add(l),()=>{s.thumbs.delete(l)}},[l,s.thumbs]),p.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${v}% + ${x}px)`},children:[p.jsx(Yk.ItemSlot,{scope:e.__scopeSlider,children:p.jsx(an.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":s.min,"aria-valuenow":g,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:Gt(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),h&&p.jsx(KV,{name:a??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:g},r)]})});WV.displayName=Jk;var OEe="RadioBubbleInput",KV=C.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=C.useRef(null),i=Nn(a,r),s=k_(t);return C.useEffect(()=>{const o=a.current;if(!o)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==t&&d){const h=new Event("input",{bubbles:!0});d.call(o,t),o.dispatchEvent(h)}},[s,t]),p.jsx(an.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});KV.displayName=OEe;function PEe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function ZV(e,t,n){const i=100/(n-t)*(e-t);return Y0(i,[0,100])}function FEe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function LEe(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function BEe(e,t,n){const r=e/2,i=VR([0,50],[0,r]);return(r-i(t)*n)*n}function $Ee(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function zEe(e,t){if(t>0){const n=$Ee(e);return Math.min(...n)>=t}return!0}function VR(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function UEe(e){return(String(e).split(".")[1]||"").length}function VEe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var HEe=$V,qEe=qV,GEe=GV,WEe=WV;function vo({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const s=C.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return p.jsxs(HEe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:vt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[p.jsx(qEe,{"data-slot":"slider-track",className:vt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:p.jsx(GEe,{"data-slot":"slider-range",className:vt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:s.length},(o,l)=>p.jsx(WEe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var KEe="Separator",UP="horizontal",ZEe=["horizontal","vertical"],YV=C.forwardRef((e,t)=>{const{decorative:n,orientation:r=UP,...a}=e,i=YEe(r)?r:UP,o=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return p.jsx(an.div,{"data-orientation":i,...o,...a,ref:t})});YV.displayName=KEe;function YEe(e){return ZEe.includes(e)}var XEe=YV;function td({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return p.jsx(XEe,{"data-slot":"separator-root",decorative:n,orientation:t,className:vt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const JEe=()=>{const{enableStreamingMarkdown:e,setEnableStreamingMarkdown:t,enableStreamingCodeBlockParsing:n,setEnableStreamingCodeBlockParsing:r,foldStreamingCodeBlocks:a,setFoldStreamingCodeBlocks:i,foldUserMessagesOnCompletion:s,setFoldUserMessagesOnCompletion:o,streamingRenderFPS:l,setStreamingRenderFPS:u,autoScrollInterval:d,setAutoScrollInterval:h,enableAutoScrollOnStream:m,setEnableAutoScrollOnStream:g,resetGeneralSettings:v}=ar(cn(O=>({enableStreamingMarkdown:O.enableStreamingMarkdown,setEnableStreamingMarkdown:O.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:O.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:O.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:O.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:O.setFoldStreamingCodeBlocks,foldUserMessagesOnCompletion:O.foldUserMessagesOnCompletion,setFoldUserMessagesOnCompletion:O.setFoldUserMessagesOnCompletion,streamingRenderFPS:O.streamingRenderFPS,setStreamingRenderFPS:O.setStreamingRenderFPS,autoScrollInterval:O.autoScrollInterval,setAutoScrollInterval:O.setAutoScrollInterval,enableAutoScrollOnStream:O.enableAutoScrollOnStream,setEnableAutoScrollOnStream:O.setEnableAutoScrollOnStream,resetGeneralSettings:O.resetGeneralSettings}))),[b,w]=C.useState(l),[x,_]=C.useState(d),E=C.useCallback(O=>{w(O[0])},[]),T=C.useCallback(O=>{u(O[0])},[u]),k=C.useCallback(O=>{const U=O.target.value,M=U===""?15:parseInt(U.replace(/[^0-9]/g,""),10);if(!isNaN(M)){const W=Math.max(3,Math.min(60,M));u(W),w(W)}},[u]),R=C.useCallback(O=>{_(O[0])},[]),j=C.useCallback(O=>{h(O[0])},[h]),I=C.useCallback(O=>{const U=O.target.value,M=U===""?1e3:parseInt(U.replace(/[^0-9]/g,""),10);if(!isNaN(M)){const W=Math.max(50,M);h(W),_(W)}},[h]);C.useEffect(()=>{w(l)},[l]),C.useEffect(()=>{_(d)},[d]);const P=()=>{window.confirm("Are you sure you want to reset Streaming & Display settings to their defaults?")&&v()};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Streaming & Display"}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),p.jsx(Ki,{id:"streaming-markdown-switch",checked:e??!0,onCheckedChange:t})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),p.jsx(Ki,{id:"streaming-codeblock-switch",checked:n??!1,onCheckedChange:r})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),p.jsx(Ki,{id:"fold-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"fold-user-message-switch",className:"font-medium",children:"Fold User Messages After Response"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse the user's prompt message once the assistant finishes responding."})]}),p.jsx(Ki,{id:"fold-user-message-switch",checked:s??!1,onCheckedChange:o})]}),p.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"enable-auto-scroll-switch",className:"font-medium",children:"Auto-Scroll While Streaming"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically scroll to the bottom as new content arrives."})]}),p.jsx(Ki,{id:"enable-auto-scroll-switch",checked:m??!0,onCheckedChange:g})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs($t,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",b," FPS)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(vo,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[b],onValueChange:E,onValueCommit:T,className:"flex-grow"}),p.jsx(xn,{type:"number",min:3,max:60,step:1,value:b,onChange:k,className:"w-20 h-8 text-xs"}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]}),p.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[p.jsxs("div",{children:[p.jsxs($t,{htmlFor:"auto-scroll-interval-slider",className:"font-medium",children:["Auto-Scroll Interval (",x," ms)"]}),p.jsx("p",{className:"text-xs text-muted-foreground",children:'How often to scroll to the bottom during streaming (50-5000 ms). Only active if "Auto-Scroll While Streaming" is enabled. (Default: 1000ms)'})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx(vo,{id:"auto-scroll-interval-slider",min:50,max:5e3,step:50,value:[x],onValueChange:R,onValueCommit:j,className:"flex-grow",disabled:!m}),p.jsx(xn,{type:"number",min:50,max:5e3,step:50,value:x,onChange:I,className:"w-20 h-8 text-xs",disabled:!m}),p.jsx("span",{className:"text-xs text-muted-foreground",children:"ms"})]})]})]}),p.jsx(td,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:P,children:[p.jsx(yA,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},QEe=gt.memo(JEe);var dT="rovingFocusGroup.onEntryFocus",eCe={bubbles:!1,cancelable:!0},cb="RovingFocusGroup",[Qk,XV,tCe]=C_(cb),[nCe,G_]=_i(cb,[tCe]),[rCe,aCe]=nCe(cb),JV=C.forwardRef((e,t)=>p.jsx(Qk.Provider,{scope:e.__scopeRovingFocusGroup,children:p.jsx(Qk.Slot,{scope:e.__scopeRovingFocusGroup,children:p.jsx(iCe,{...e,ref:t})})}));JV.displayName=cb;var iCe=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:s,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,m=C.useRef(null),g=Nn(t,m),v=dm(i),[b,w]=Io({prop:s,defaultProp:o??null,onChange:l,caller:cb}),[x,_]=C.useState(!1),E=Ua(u),T=XV(n),k=C.useRef(!1),[R,j]=C.useState(0);return C.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(dT,E),()=>I.removeEventListener(dT,E)},[E]),p.jsx(rCe,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:C.useCallback(I=>w(I),[w]),onItemShiftTab:C.useCallback(()=>_(!0),[]),onFocusableItemAdd:C.useCallback(()=>j(I=>I+1),[]),onFocusableItemRemove:C.useCallback(()=>j(I=>I-1),[]),children:p.jsx(an.div,{tabIndex:x||R===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:Gt(e.onMouseDown,()=>{k.current=!0}),onFocus:Gt(e.onFocus,I=>{const P=!k.current;if(I.target===I.currentTarget&&P&&!x){const O=new CustomEvent(dT,eCe);if(I.currentTarget.dispatchEvent(O),!O.defaultPrevented){const U=T().filter(ae=>ae.focusable),M=U.find(ae=>ae.active),W=U.find(ae=>ae.id===b),ie=[M,W,...U].filter(Boolean).map(ae=>ae.ref.current);tH(ie,d)}}k.current=!1}),onBlur:Gt(e.onBlur,()=>_(!1))})})}),QV="RovingFocusGroupItem",eH=C.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:s,...o}=e,l=Ha(),u=i||l,d=aCe(QV,n),h=d.currentTabStopId===u,m=XV(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=d;return C.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),p.jsx(Qk.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:p.jsx(an.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:Gt(e.onMouseDown,w=>{r?d.onItemFocus(u):w.preventDefault()}),onFocus:Gt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:Gt(e.onKeyDown,w=>{if(w.key==="Tab"&&w.shiftKey){d.onItemShiftTab();return}if(w.target!==w.currentTarget)return;const x=lCe(w,d.orientation,d.dir);if(x!==void 0){if(w.metaKey||w.ctrlKey||w.altKey||w.shiftKey)return;w.preventDefault();let E=m().filter(T=>T.focusable).map(T=>T.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const T=E.indexOf(w.currentTarget);E=d.loop?cCe(E,T+1):E.slice(T+1)}setTimeout(()=>tH(E))}}),children:typeof s=="function"?s({isCurrentTabStop:h,hasTabStop:b!=null}):s})})});eH.displayName=QV;var sCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function oCe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function lCe(e,t,n){const r=oCe(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return sCe[r]}function tH(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function cCe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var nH=JV,rH=eH,W_="Tabs",[uCe,sIe]=_i(W_,[G_]),aH=G_(),[dCe,HR]=uCe(W_),iH=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:s="horizontal",dir:o,activationMode:l="automatic",...u}=e,d=dm(o),[h,m]=Io({prop:r,onChange:a,defaultProp:i??"",caller:W_});return p.jsx(dCe,{scope:n,baseId:Ha(),value:h,onValueChange:m,orientation:s,dir:d,activationMode:l,children:p.jsx(an.div,{dir:d,"data-orientation":s,...u,ref:t})})});iH.displayName=W_;var sH="TabsList",oH=C.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=HR(sH,n),s=aH(n);return p.jsx(nH,{asChild:!0,...s,orientation:i.orientation,dir:i.dir,loop:r,children:p.jsx(an.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});oH.displayName=sH;var lH="TabsTrigger",cH=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,s=HR(lH,n),o=aH(n),l=fH(s.baseId,r),u=hH(s.baseId,r),d=r===s.value;return p.jsx(rH,{asChild:!0,...o,focusable:!a,active:d,children:p.jsx(an.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:Gt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?s.onValueChange(r):h.preventDefault()}),onKeyDown:Gt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&s.onValueChange(r)}),onFocus:Gt(e.onFocus,()=>{const h=s.activationMode!=="manual";!d&&!a&&h&&s.onValueChange(r)})})})});cH.displayName=lH;var uH="TabsContent",dH=C.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...s}=e,o=HR(uH,n),l=fH(o.baseId,r),u=hH(o.baseId,r),d=r===o.value,h=C.useRef(d);return C.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),p.jsx(Za,{present:a||d,children:({present:m})=>p.jsx(an.div,{"data-state":d?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...s,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:m&&i})})});dH.displayName=uH;function fH(e,t){return`${e}-trigger-${t}`}function hH(e,t){return`${e}-content-${t}`}var fCe=iH,hCe=oH,pCe=cH,mCe=dH;function gCe({className:e,...t}){return p.jsx(fCe,{"data-slot":"tabs",className:vt("flex flex-col gap-2",e),...t})}function yCe({className:e,...t}){return p.jsx(hCe,{"data-slot":"tabs-list",className:vt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function bCe({className:e,...t}){return p.jsx(pCe,{"data-slot":"tabs-trigger",className:vt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function vCe({className:e,...t}){return p.jsx(mCe,{"data-slot":"tabs-content",className:vt("flex-1 outline-none",e),...t})}const $c=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:s,scrollable:o})=>{var g;const[l,u]=C.useState(n??t??((g=e[0])==null?void 0:g.value));C.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=v=>{u(v),r&&r(v)},h=vt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),m=({children:v})=>{const b=vt("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",s);return o?p.jsx(Es,{className:b,children:v}):p.jsx("div",{className:b,children:v})};return p.jsxs(gCe,{value:l,onValueChange:d,defaultValue:t,className:vt("flex flex-col h-full",a),children:[p.jsx(yCe,{className:vt("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>p.jsx(bCe,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),p.jsx(m,{children:e.map(v=>p.jsx(vCe,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})},wCe=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t}=ar(cn(n=>({globalSystemPrompt:n.globalSystemPrompt,setGlobalSystemPrompt:n.setGlobalSystemPrompt})));return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx($t,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),p.jsx(yd,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:n=>t(n.target.value),rows:6})]})})},pH=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:m=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:w=0,defaultFrequencyPenalty:x=0,className:_})=>{const{selectedModelId:E,dbProviderConfigs:T,dbApiKeys:k}=Hn(cn(G=>({selectedModelId:G.selectedModelId,dbProviderConfigs:G.dbProviderConfigs,dbApiKeys:G.dbApiKeys}))),R=C.useMemo(()=>{if(!E)return;const{providerId:G,modelId:J}=_o(E);if(!G||!J)return;const Q=T.find(fe=>fe.id===G);if(!Q)return;const se=k.find(fe=>fe.id===Q.apiKeyId);return zF(Q,J,se==null?void 0:se.value)},[E,T,k]),j=C.useMemo(()=>{var G;return new Set(((G=R==null?void 0:R.metadata)==null?void 0:G.supported_parameters)??[])},[R]),[I,P]=C.useState(e??m),[O,U]=C.useState(n??g??1),[M,W]=C.useState(l??w??0),[V,ie]=C.useState(d??x??0);C.useEffect(()=>{P(e??m)},[e,m]),C.useEffect(()=>{U(n??g??1)},[n,g]),C.useEffect(()=>{W(l??w??0)},[l,w]),C.useEffect(()=>{ie(d??x??0)},[d,x]);const ae=C.useCallback((G,J)=>{const Q=J.target.value,se=Q===""?null:parseInt(Q,10);(Q===""||!isNaN(se)&&se!==null)&&G(se)},[]),ne=C.useCallback((G,J)=>{G(J[0])},[]),q=C.useCallback(G=>{G(null)},[]),te=m!==void 0||g!==void 0||v!==void 0||b!==void 0||w!==void 0||x!==void 0;return p.jsxs("div",{className:vt("space-y-4 p-4",_),children:[j.has("temperature")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",I.toFixed(2),")"]}),p.jsx(vo,{id:"param-temperature",min:0,max:1,step:.01,value:[I],onValueChange:G=>P(G[0]),onValueCommit:G=>ne(t,G)}),te&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>q(t),disabled:e===null,children:["Use Default (",(m==null?void 0:m.toFixed(2))??"N/A",")"]})]}),j.has("top_p")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(O??0).toFixed(2),")"]}),p.jsx(vo,{id:"param-top-p",min:0,max:1,step:.01,value:[O??1],onValueChange:G=>U(G[0]),onValueCommit:G=>ne(r,G)}),te&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>q(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[j.has("max_tokens")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(xn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:G=>ae(i,G),min:"1",className:"h-8 text-xs"}),te&&p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>q(i),disabled:a===null,children:"Use Default"})]}),j.has("top_k")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),p.jsx(xn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:s??"",onChange:G=>ae(o,G),min:"1",className:"h-8 text-xs"}),te&&p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>q(o),disabled:s===null,children:"Use Default"})]})]}),j.has("presence_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(M??0).toFixed(2),")"]}),p.jsx(vo,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[M??0],onValueChange:G=>W(G[0]),onValueCommit:G=>ne(u,G)}),te&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>q(u),disabled:l===null,children:["Use Default (",(w==null?void 0:w.toFixed(2))??"N/A",")"]})]}),j.has("frequency_penalty")&&p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(V??0).toFixed(2),")"]}),p.jsx(vo,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[V??0],onValueChange:G=>ie(G[0]),onValueCommit:G=>ne(h,G)}),te&&p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>q(h),disabled:d===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})},xCe=()=>{const{temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h}=ar(cn(w=>({temperature:w.temperature,setTemperature:w.setTemperature,topP:w.topP,setTopP:w.setTopP,maxTokens:w.maxTokens,setMaxTokens:w.setMaxTokens,topK:w.topK,setTopK:w.setTopK,presencePenalty:w.presencePenalty,setPresencePenalty:w.setPresencePenalty,frequencyPenalty:w.frequencyPenalty,setFrequencyPenalty:w.setFrequencyPenalty}))),m=w=>{w!==null&&t(w)},g=w=>{w!==null&&r(w)},v=w=>{w!==null&&u(w)},b=w=>{w!==null&&h(w)};return p.jsxs("div",{className:"space-y-4",children:[p.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),p.jsx(pH,{temperature:e,setTemperature:m,topP:n,setTopP:g,maxTokens:a,setMaxTokens:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:v,frequencyPenalty:d,setFrequencyPenalty:b,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]})},_Ce=()=>{const{toolMaxSteps:e,setToolMaxSteps:t}=ar(cn(r=>({toolMaxSteps:r.toolMaxSteps,setToolMaxSteps:r.setToolMaxSteps}))),n=r=>{const a=r.target.value,i=a===""?5:parseInt(a,10);isNaN(i)||t(i)};return p.jsxs("div",{className:"space-y-4",children:[p.jsx($t,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),p.jsx(xn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:e,onChange:n,className:"w-24"})]})};var VP=1,SCe=.9,ECe=.8,CCe=.17,fT=.1,hT=.999,TCe=.9999,kCe=.99,ACe=/[\\\/_+.#"@\[\(\{&]/,NCe=/[\\\/_+.#"@\[\(\{&]/g,RCe=/[\s-]/,mH=/[\s-]/g;function eA(e,t,n,r,a,i,s){if(i===t.length)return a===e.length?VP:kCe;var o=`${a},${i}`;if(s[o]!==void 0)return s[o];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,m,g,v;u>=0;)h=eA(e,t,n,r,u+1,i+1,s),h>d&&(u===a?h*=VP:ACe.test(e.charAt(u-1))?(h*=ECe,g=e.slice(a,u-1).match(NCe),g&&a>0&&(h*=Math.pow(hT,g.length))):RCe.test(e.charAt(u-1))?(h*=SCe,v=e.slice(a,u-1).match(mH),v&&a>0&&(h*=Math.pow(hT,v.length))):(h*=CCe,a>0&&(h*=Math.pow(hT,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=TCe)),(h<fT&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(m=eA(e,t,n,r,u+1,i+2,s),m*fT>h&&(h=m*fT)),h>d&&(d=h),u=n.indexOf(l,u+1);return s[o]=d,d}function HP(e){return e.toLowerCase().replace(mH," ")}function ICe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,eA(e,t,HP(e),HP(t),0,0,{})}var Pg='[cmdk-group=""]',pT='[cmdk-group-items=""]',jCe='[cmdk-group-heading=""]',gH='[cmdk-item=""]',qP=`${gH}:not([aria-disabled="true"])`,tA="cmdk-item-select",Gh="data-value",DCe=(e,t,n)=>ICe(e,t,n),yH=C.createContext(void 0),ub=()=>C.useContext(yH),bH=C.createContext(void 0),qR=()=>C.useContext(bH),vH=C.createContext(void 0),wH=C.forwardRef((e,t)=>{let n=Wh(()=>{var Q,se;return{search:"",value:(se=(Q=e.value)!=null?Q:e.defaultValue)!=null?se:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Wh(()=>new Set),a=Wh(()=>new Map),i=Wh(()=>new Map),s=Wh(()=>new Set),o=xH(e),{label:l,children:u,value:d,onValueChange:h,filter:m,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:w=!0,...x}=e,_=Ha(),E=Ha(),T=Ha(),k=C.useRef(null),R=HCe();Cf(()=>{if(d!==void 0){let Q=d.trim();n.current.value=Q,j.emit()}},[d]),Cf(()=>{R(6,W)},[]);let j=C.useMemo(()=>({subscribe:Q=>(s.current.add(Q),()=>s.current.delete(Q)),snapshot:()=>n.current,setState:(Q,se,fe)=>{var ve,je,Ne,Se;if(!Object.is(n.current[Q],se)){if(n.current[Q]=se,Q==="search")M(),O(),R(1,U);else if(Q==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ye=document.getElementById(T);ye?ye.focus():(ve=document.getElementById(_))==null||ve.focus()}if(R(7,()=>{var ye;n.current.selectedItemId=(ye=V())==null?void 0:ye.id,j.emit()}),fe||R(5,W),((je=o.current)==null?void 0:je.value)!==void 0){let ye=se??"";(Se=(Ne=o.current).onValueChange)==null||Se.call(Ne,ye);return}}j.emit()}},emit:()=>{s.current.forEach(Q=>Q())}}),[]),I=C.useMemo(()=>({value:(Q,se,fe)=>{var ve;se!==((ve=i.current.get(Q))==null?void 0:ve.value)&&(i.current.set(Q,{value:se,keywords:fe}),n.current.filtered.items.set(Q,P(se,fe)),R(2,()=>{O(),j.emit()}))},item:(Q,se)=>(r.current.add(Q),se&&(a.current.has(se)?a.current.get(se).add(Q):a.current.set(se,new Set([Q]))),R(3,()=>{M(),O(),n.current.value||U(),j.emit()}),()=>{i.current.delete(Q),r.current.delete(Q),n.current.filtered.items.delete(Q);let fe=V();R(4,()=>{M(),(fe==null?void 0:fe.getAttribute("id"))===Q&&U(),j.emit()})}),group:Q=>(a.current.has(Q)||a.current.set(Q,new Set),()=>{i.current.delete(Q),a.current.delete(Q)}),filter:()=>o.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:_,inputId:T,labelId:E,listInnerRef:k}),[]);function P(Q,se){var fe,ve;let je=(ve=(fe=o.current)==null?void 0:fe.filter)!=null?ve:DCe;return Q?je(Q,n.current.search,se):0}function O(){if(!n.current.search||o.current.shouldFilter===!1)return;let Q=n.current.filtered.items,se=[];n.current.filtered.groups.forEach(ve=>{let je=a.current.get(ve),Ne=0;je.forEach(Se=>{let ye=Q.get(Se);Ne=Math.max(ye,Ne)}),se.push([ve,Ne])});let fe=k.current;ie().sort((ve,je)=>{var Ne,Se;let ye=ve.getAttribute("id"),Fe=je.getAttribute("id");return((Ne=Q.get(Fe))!=null?Ne:0)-((Se=Q.get(ye))!=null?Se:0)}).forEach(ve=>{let je=ve.closest(pT);je?je.appendChild(ve.parentElement===je?ve:ve.closest(`${pT} > *`)):fe.appendChild(ve.parentElement===fe?ve:ve.closest(`${pT} > *`))}),se.sort((ve,je)=>je[1]-ve[1]).forEach(ve=>{var je;let Ne=(je=k.current)==null?void 0:je.querySelector(`${Pg}[${Gh}="${encodeURIComponent(ve[0])}"]`);Ne==null||Ne.parentElement.appendChild(Ne)})}function U(){let Q=ie().find(fe=>fe.getAttribute("aria-disabled")!=="true"),se=Q==null?void 0:Q.getAttribute(Gh);j.setState("value",se||void 0)}function M(){var Q,se,fe,ve;if(!n.current.search||o.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let je=0;for(let Ne of r.current){let Se=(se=(Q=i.current.get(Ne))==null?void 0:Q.value)!=null?se:"",ye=(ve=(fe=i.current.get(Ne))==null?void 0:fe.keywords)!=null?ve:[],Fe=P(Se,ye);n.current.filtered.items.set(Ne,Fe),Fe>0&&je++}for(let[Ne,Se]of a.current)for(let ye of Se)if(n.current.filtered.items.get(ye)>0){n.current.filtered.groups.add(Ne);break}n.current.filtered.count=je}function W(){var Q,se,fe;let ve=V();ve&&(((Q=ve.parentElement)==null?void 0:Q.firstChild)===ve&&((fe=(se=ve.closest(Pg))==null?void 0:se.querySelector(jCe))==null||fe.scrollIntoView({block:"nearest"})),ve.scrollIntoView({block:"nearest"}))}function V(){var Q;return(Q=k.current)==null?void 0:Q.querySelector(`${gH}[aria-selected="true"]`)}function ie(){var Q;return Array.from(((Q=k.current)==null?void 0:Q.querySelectorAll(qP))||[])}function ae(Q){let se=ie()[Q];se&&j.setState("value",se.getAttribute(Gh))}function ne(Q){var se;let fe=V(),ve=ie(),je=ve.findIndex(Se=>Se===fe),Ne=ve[je+Q];(se=o.current)!=null&&se.loop&&(Ne=je+Q<0?ve[ve.length-1]:je+Q===ve.length?ve[0]:ve[je+Q]),Ne&&j.setState("value",Ne.getAttribute(Gh))}function q(Q){let se=V(),fe=se==null?void 0:se.closest(Pg),ve;for(;fe&&!ve;)fe=Q>0?UCe(fe,Pg):VCe(fe,Pg),ve=fe==null?void 0:fe.querySelector(qP);ve?j.setState("value",ve.getAttribute(Gh)):ne(Q)}let te=()=>ae(ie().length-1),G=Q=>{Q.preventDefault(),Q.metaKey?te():Q.altKey?q(1):ne(1)},J=Q=>{Q.preventDefault(),Q.metaKey?ae(0):Q.altKey?q(-1):ne(-1)};return C.createElement(an.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:Q=>{var se;(se=x.onKeyDown)==null||se.call(x,Q);let fe=Q.nativeEvent.isComposing||Q.keyCode===229;if(!(Q.defaultPrevented||fe))switch(Q.key){case"n":case"j":{w&&Q.ctrlKey&&G(Q);break}case"ArrowDown":{G(Q);break}case"p":case"k":{w&&Q.ctrlKey&&J(Q);break}case"ArrowUp":{J(Q);break}case"Home":{Q.preventDefault(),ae(0);break}case"End":{Q.preventDefault(),te();break}case"Enter":{Q.preventDefault();let ve=V();if(ve){let je=new Event(tA);ve.dispatchEvent(je)}}}}},C.createElement("label",{"cmdk-label":"",htmlFor:I.inputId,id:I.labelId,style:GCe},l),K_(e,Q=>C.createElement(bH.Provider,{value:j},C.createElement(yH.Provider,{value:I},Q))))}),MCe=C.forwardRef((e,t)=>{var n,r;let a=Ha(),i=C.useRef(null),s=C.useContext(vH),o=ub(),l=xH(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:s==null?void 0:s.forceMount;Cf(()=>{if(!u)return o.item(a,s==null?void 0:s.id)},[u]);let d=_H(a,i,[e.value,e.children,i],e.keywords),h=qR(),m=nd(R=>R.value&&R.value===d.current),g=nd(R=>u||o.filter()===!1?!0:R.search?R.filtered.items.get(a)>0:!0);C.useEffect(()=>{let R=i.current;if(!(!R||e.disabled))return R.addEventListener(tA,v),()=>R.removeEventListener(tA,v)},[g,e.onSelect,e.disabled]);function v(){var R,j;b(),(j=(R=l.current).onSelect)==null||j.call(R,d.current)}function b(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:w,value:x,onSelect:_,forceMount:E,keywords:T,...k}=e;return C.createElement(an.div,{ref:_c(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!w,"aria-selected":!!m,"data-disabled":!!w,"data-selected":!!m,onPointerMove:w||o.getDisablePointerSelection()?void 0:b,onClick:w?void 0:v},e.children)}),OCe=C.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,s=Ha(),o=C.useRef(null),l=C.useRef(null),u=Ha(),d=ub(),h=nd(g=>a||d.filter()===!1?!0:g.search?g.filtered.groups.has(s):!0);Cf(()=>d.group(s),[]),_H(s,o,[e.value,e.heading,l]);let m=C.useMemo(()=>({id:s,forceMount:a}),[a]);return C.createElement(an.div,{ref:_c(o,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&C.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),K_(e,g=>C.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},C.createElement(vH.Provider,{value:m},g))))}),PCe=C.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=C.useRef(null),i=nd(s=>!s.search);return!n&&!i?null:C.createElement(an.div,{ref:_c(a,t),...r,"cmdk-separator":"",role:"separator"})}),FCe=C.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=qR(),s=nd(u=>u.search),o=nd(u=>u.selectedItemId),l=ub();return C.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),C.createElement(an.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":o,id:l.inputId,type:"text",value:a?e.value:s,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),LCe=C.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=C.useRef(null),s=C.useRef(null),o=nd(u=>u.selectedItemId),l=ub();return C.useEffect(()=>{if(s.current&&i.current){let u=s.current,d=i.current,h,m=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=u.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return m.observe(u),()=>{cancelAnimationFrame(h),m.unobserve(u)}}},[]),C.createElement(an.div,{ref:_c(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:l.listId},K_(e,u=>C.createElement("div",{ref:_c(s,l.listInnerRef),"cmdk-list-sizer":""},u)))}),BCe=C.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:s,...o}=e;return C.createElement(IV,{open:n,onOpenChange:r},C.createElement(jV,{container:s},C.createElement(DV,{"cmdk-overlay":"",className:a}),C.createElement(MV,{"aria-label":e.label,"cmdk-dialog":"",className:i},C.createElement(wH,{ref:t,...o}))))}),$Ce=C.forwardRef((e,t)=>nd(n=>n.filtered.count===0)?C.createElement(an.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),zCe=C.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return C.createElement(an.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},K_(e,s=>C.createElement("div",{"aria-hidden":!0},s)))}),ym=Object.assign(wH,{List:LCe,Item:MCe,Input:FCe,Group:OCe,Separator:PCe,Dialog:BCe,Empty:$Ce,Loading:zCe});function UCe(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function VCe(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function xH(e){let t=C.useRef(e);return Cf(()=>{t.current=e}),t}var Cf=typeof window>"u"?C.useEffect:C.useLayoutEffect;function Wh(e){let t=C.useRef();return t.current===void 0&&(t.current=e()),t}function nd(e){let t=qR(),n=()=>e(t.snapshot());return C.useSyncExternalStore(t.subscribe,n,n)}function _H(e,t,n,r=[]){let a=C.useRef(),i=ub();return Cf(()=>{var s;let o=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,o,l),(s=t.current)==null||s.setAttribute(Gh,o),a.current=o}),a}var HCe=()=>{let[e,t]=C.useState(),n=Wh(()=>new Map);return Cf(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function qCe(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function K_({asChild:e,children:t},n){return e&&C.isValidElement(t)?C.cloneElement(qCe(t),{ref:t.ref},n(t.props.children)):n(t)}var GCe={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function SH({className:e,...t}){return p.jsx(ym,{"data-slot":"command",className:vt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function EH({className:e,...t}){return p.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[p.jsx(es,{className:"size-4 shrink-0 opacity-50"}),p.jsx(ym.Input,{"data-slot":"command-input",className:vt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function CH({className:e,...t}){return p.jsx(ym.List,{"data-slot":"command-list",className:vt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function TH({...e}){return p.jsx(ym.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function kH({className:e,...t}){return p.jsx(ym.Group,{"data-slot":"command-group",className:vt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function AH({className:e,...t}){return p.jsx(ym.Item,{"data-slot":"command-item",className:vt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}var Z_="Checkbox",[WCe,oIe]=_i(Z_),[KCe,ZCe]=WCe(Z_),NH=C.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:s,disabled:o,value:l="on",onCheckedChange:u,form:d,...h}=e,[m,g]=C.useState(null),v=Nn(t,T=>g(T)),b=C.useRef(!1),w=m?d||!!m.closest("form"):!0,[x,_]=Io({prop:a,defaultProp:i??!1,onChange:u,caller:Z_}),E=C.useRef(x);return C.useEffect(()=>{const T=m==null?void 0:m.form;if(T){const k=()=>_(E.current);return T.addEventListener("reset",k),()=>T.removeEventListener("reset",k)}},[m,_]),p.jsxs(KCe,{scope:n,state:x,disabled:o,children:[p.jsx(an.button,{type:"button",role:"checkbox","aria-checked":Ou(x)?"mixed":x,"aria-required":s,"data-state":DH(x),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:v,onKeyDown:Gt(e.onKeyDown,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:Gt(e.onClick,T=>{_(k=>Ou(k)?!0:!k),w&&(b.current=T.isPropagationStopped(),b.current||T.stopPropagation())})}),w&&p.jsx(jH,{control:m,bubbles:!b.current,name:r,value:l,checked:x,required:s,disabled:o,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Ou(i)?!1:i})]})});NH.displayName=Z_;var RH="CheckboxIndicator",IH=C.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=ZCe(RH,n);return p.jsx(Za,{present:r||Ou(i.state)||i.state===!0,children:p.jsx(an.span,{"data-state":DH(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});IH.displayName=RH;var YCe="CheckboxBubbleInput",jH=C.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},s)=>{const o=C.useRef(null),l=Nn(o,s),u=k_(n),d=P1(t);C.useEffect(()=>{const m=o.current;if(!m)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(u!==n&&b){const w=new Event("click",{bubbles:r});m.indeterminate=Ou(n),b.call(m,Ou(n)?!1:n),m.dispatchEvent(w)}},[u,n,r]);const h=C.useRef(Ou(n)?!1:n);return p.jsx(an.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});jH.displayName=YCe;function Ou(e){return e==="indeterminate"}function DH(e){return Ou(e)?"indeterminate":e?"checked":"unchecked"}var XCe=NH,JCe=IH;function Oc({className:e,...t}){return p.jsx(XCe,{"data-slot":"checkbox",className:vt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:p.jsx(JCe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:p.jsx(Ga,{className:"size-3.5"})})})}const Y_=gt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=C.useState(!1),[s,o]=C.useState(!1),[l,u]=C.useState(""),[d,h]=C.useState({reasoning:!1,webSearch:!1,tools:!1,multimodal:!1}),{dbProviderConfigs:m,globalModelSortOrder:g,isLoading:v,getAvailableModelListItems:b}=Hn(cn(U=>({dbProviderConfigs:U.dbProviderConfigs,globalModelSortOrder:U.globalModelSortOrder,isLoading:U.isLoading,getAvailableModelListItems:U.getAvailableModelListItems}))),[w,x]=C.useState(()=>new Set(m.map(U=>U.id)));C.useEffect(()=>{x(new Set(m.map(U=>U.id)))},[m]);const _=C.useMemo(()=>{const U=b(),M=new Map(U.map(ne=>[ne.id,ne])),W=new Set;m.forEach(ne=>{ne.isEnabled&&ne.enabledModels&&ne.enabledModels.forEach(q=>{W.add(dl(ne.id,q))})});const V=U.filter(ne=>W.has(ne.id)),ie=[],ae=new Set;return g.forEach(ne=>{if(W.has(ne)){const q=M.get(ne);q&&!ae.has(ne)&&(ie.push(q),ae.add(ne))}}),V.forEach(ne=>{ae.has(ne.id)||ie.push(ne)}),ie},[m,g,b]),E=C.useMemo(()=>{let U=_;w.size!==m.length&&(U=_.filter(V=>w.has(V.providerId)));let M=U;if(l.trim()){const V=l.toLowerCase();M=U.filter(ie=>ie.name.toLowerCase().includes(V)||ie.providerName.toLowerCase().includes(V)||ie.id.toLowerCase().includes(V))}const W=Object.entries(d).filter(([,V])=>V).map(([V])=>V);return W.length===0?M:M.filter(V=>{var ne,q;const ie=new Set(((ne=V.metadataSummary)==null?void 0:ne.supported_parameters)??[]),ae=new Set(((q=V.metadataSummary)==null?void 0:q.input_modalities)??[]);return W.every(te=>{switch(te){case"reasoning":return ie.has("reasoning");case"webSearch":return ie.has("web_search")||ie.has("web_search_options");case"tools":return ie.has("tools");case"multimodal":return Array.from(ae).some(G=>G!=="text");default:return!0}})})},[_,l,d,w,m.length]),T=C.useMemo(()=>_.find(U=>U.id===e),[_,e]),k=C.useCallback(U=>{t(U===e?null:U),i(!1),u("")},[t,e]),R=U=>{h(M=>({...M,[U]:!M[U]}))},j=C.useCallback((U,M)=>{x(W=>{const V=new Set(W);return M?V.add(U):V.delete(U),V})},[]);if(v)return p.jsx($n,{className:vt("h-9 w-[250px]",r)});const I=Object.values(d).filter(Boolean).length,P=w.size!==m.length?1:0,O=I+P;return p.jsxs(Mo,{open:a,onOpenChange:i,children:[p.jsx(Oo,{asChild:!0,children:p.jsxs(Rt,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||_.length===0,className:vt("w-auto justify-between h-9 text-sm font-normal relative",r),children:[p.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:T?`${T.name} (${T.providerName})`:"Select Model..."}),p.jsx(y1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"}),O>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:O})]})}),p.jsx(Po,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:p.jsxs(SH,{shouldFilter:!1,children:[p.jsxs("div",{className:"flex items-center border-b px-3",children:[p.jsx(es,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),p.jsx(EH,{placeholder:"Search model...",value:l,onValueChange:u,className:"flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 border-0 focus-visible:ring-0 focus-visible:ring-offset-0"}),p.jsxs("div",{className:"flex items-center gap-0.5 ml-auto pl-2",children:[p.jsxs(Mo,{open:s,onOpenChange:o,children:[p.jsx(Oo,{asChild:!0,children:p.jsx(Sn,{tooltipText:"Filter by Provider",icon:p.jsx(fA,{}),variant:P>0?"secondary":"ghost",className:vt("h-7 w-7 relative",P>0&&"text-primary"),"aria-label":"Filter by provider",children:P>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1 text-[10px] font-semibold leading-none text-white bg-primary rounded-full",children:w.size})})}),p.jsx(Po,{className:"w-60 p-0",children:p.jsxs("div",{className:"p-2 space-y-1",children:[p.jsx($t,{className:"text-xs px-2 font-semibold",children:"Filter by Provider"}),p.jsx(Es,{className:"h-48",children:m.map(U=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(Oc,{id:`popover-provider-filter-${U.id}`,checked:w.has(U.id),onCheckedChange:M=>j(U.id,!!M)}),p.jsxs($t,{htmlFor:`popover-provider-filter-${U.id}`,className:"text-sm font-normal cursor-pointer",children:[U.name," (",U.type,")"]})]},U.id))})]})})]}),p.jsx(Sn,{tooltipText:"Filter: Reasoning",icon:p.jsx(zp,{}),onClick:()=>R("reasoning"),variant:d.reasoning?"secondary":"ghost",className:vt("h-7 w-7",d.reasoning&&"text-primary"),"aria-label":"Filter by reasoning capability"}),p.jsx(Sn,{tooltipText:"Filter: Web Search",icon:p.jsx(es,{}),onClick:()=>R("webSearch"),variant:d.webSearch?"secondary":"ghost",className:vt("h-7 w-7",d.webSearch&&"text-primary"),"aria-label":"Filter by web search capability"}),p.jsx(Sn,{tooltipText:"Filter: Tools",icon:p.jsx(vA,{}),onClick:()=>R("tools"),variant:d.tools?"secondary":"ghost",className:vt("h-7 w-7",d.tools&&"text-primary"),"aria-label":"Filter by tool usage capability"}),p.jsx(Sn,{tooltipText:"Filter: Multimodal",icon:p.jsx(mA,{}),onClick:()=>R("multimodal"),variant:d.multimodal?"secondary":"ghost",className:vt("h-7 w-7",d.multimodal&&"text-primary"),"aria-label":"Filter by multimodal capability"})]})]}),p.jsxs(CH,{children:[p.jsx(TH,{children:O>0?"No models match all active filters.":"No model found."}),p.jsx(kH,{children:E.map(U=>p.jsxs(AH,{value:U.id,onSelect:k,children:[p.jsx(Ga,{className:vt("mr-2 h-4 w-4",e===U.id?"opacity-100":"opacity-0")}),p.jsxs("span",{className:"truncate",children:[U.name," (",U.providerName,")"]})]},U.id))})]})]})})]})});Y_.displayName="GlobalModelSelector";const QCe=()=>{const{autoTitleEnabled:e,setAutoTitleEnabled:t,autoTitleModelId:n,setAutoTitleModelId:r,autoTitlePromptMaxLength:a,setAutoTitlePromptMaxLength:i,autoTitleIncludeFiles:s,setAutoTitleIncludeFiles:o,autoTitleIncludeRules:l,setAutoTitleIncludeRules:u}=ar(cn(h=>({autoTitleEnabled:h.autoTitleEnabled,setAutoTitleEnabled:h.setAutoTitleEnabled,autoTitleModelId:h.autoTitleModelId,setAutoTitleModelId:h.setAutoTitleModelId,autoTitlePromptMaxLength:h.autoTitlePromptMaxLength,setAutoTitlePromptMaxLength:h.setAutoTitlePromptMaxLength,autoTitleIncludeFiles:h.autoTitleIncludeFiles,setAutoTitleIncludeFiles:h.setAutoTitleIncludeFiles,autoTitleIncludeRules:h.autoTitleIncludeRules,setAutoTitleIncludeRules:h.setAutoTitleIncludeRules}))),d=h=>{const m=h.target.value,g=m===""?768:parseInt(m,10);isNaN(g)||i(g)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[p.jsx(Ki,{id:"auto-title-enabled",checked:e,onCheckedChange:t,"aria-labelledby":"auto-title-enabled-label"}),p.jsx($t,{id:"auto-title-enabled-label",htmlFor:"auto-title-enabled",children:"Enable Auto-Title for New Chats"})]}),e&&p.jsxs("div",{className:"space-y-4 pl-6 border-l-2 border-muted ml-2",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"auto-title-model",children:"Model for Title Generation"}),p.jsx(Y_,{value:n,onChange:r,className:"w-full"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select a fast and capable model for generating concise titles."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"auto-title-max-length",children:"Max Prompt Length for Title Generation (Chars)"}),p.jsx(xn,{id:"auto-title-max-length",type:"number",min:"100",max:"4000",step:"10",value:a,onChange:d,className:"w-24"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Limits the initial prompt length sent for title generation (100-4000)."})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Ki,{id:"auto-title-include-files",checked:s,onCheckedChange:o,"aria-labelledby":"auto-title-include-files-label"}),p.jsx($t,{id:"auto-title-include-files-label",htmlFor:"auto-title-include-files",children:"Include file names/types in title prompt"})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Ki,{id:"auto-title-include-rules",checked:l,onCheckedChange:u,"aria-labelledby":"auto-title-include-rules-label"}),p.jsx($t,{id:"auto-title-include-rules-label",htmlFor:"auto-title-include-rules",children:"Include active rules in title prompt"})]})]})]})},eTe=()=>{const{resetAssistantSettings:e}=ar(cn(r=>({resetAssistantSettings:r.resetAssistantSettings}))),t=()=>{window.confirm("Are you sure you want to reset all Assistant settings (Prompt, Parameters, Tools, Auto-Title) to their defaults?")&&e()},n=C.useMemo(()=>[{value:"prompt",label:"System Prompt",content:p.jsx(wCe,{})},{value:"parameters",label:"Parameters",content:p.jsx(xCe,{})},{value:"tools",label:"Tools",content:p.jsx(_Ce,{})},{value:"titles",label:"Auto-Titles",content:p.jsx(QCe,{})}],[]);return p.jsxs("div",{className:"space-y-6 p-1 h-full flex flex-col",children:[p.jsx($c,{tabs:n,defaultValue:"prompt",className:"flex-grow",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"}),p.jsx(td,{className:"mt-auto"}),p.jsx("div",{className:"flex justify-end pt-4 flex-shrink-0",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:t,children:[p.jsx(yA,{className:"mr-2 h-4 w-4"}),"Reset All Assistant Settings"]})})]})},tTe=gt.memo(eTe),nTe=()=>{const{importConversation:e,exportAllConversations:t}=hn(cn(M=>({importConversation:M.importConversation,exportAllConversations:M.exportAllConversations}))),n=C.useRef(null),r=C.useRef(null),[a,i]=C.useState(!1),[s,o]=C.useState(!1),[l,u]=C.useState(!1),[d,h]=C.useState(!1),[m,g]=C.useState(!1),[v,b]=C.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),[w,x]=C.useState({importSettings:!0,importApiKeys:!0,importProviderConfigs:!0,importProjects:!0,importConversations:!0,importRulesAndTags:!0,importMods:!0,importSyncRepos:!0}),_=()=>{var M;(M=n.current)==null||M.click()},E=()=>{var M;(M=r.current)==null||M.click()},T=C.useCallback(async M=>{var V;const W=(V=M.target.files)==null?void 0:V[0];if(W){i(!0);try{await e(W)}catch(ie){console.error("Import failed (from component):",ie)}finally{n.current&&(n.current.value=""),i(!1)}}},[e]),k=C.useCallback(async M=>{var V;const W=(V=M.target.files)==null?void 0:V[0];if(W){if(!window.confirm("Importing this file will OVERWRITE existing data for the selected categories. Are you sure you want to proceed?")){r.current&&(r.current.value="");return}g(!0);try{await np.importFullConfiguration(W,v)}catch(ie){console.error("Full import failed (from component):",ie)}finally{r.current&&(r.current.value=""),g(!1)}}},[v]),R=C.useCallback(async()=>{o(!0);try{await t()}catch(M){console.error("Export all failed (from component):",M)}finally{o(!1)}},[t]),j=C.useCallback(async()=>{h(!0);try{await np.exportFullConfiguration(w)}catch(M){console.error("Full export failed (from component):",M)}finally{h(!1)}},[w]),I=C.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){u(!0);try{await _t.clearAllData(),qe.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(M){const W="Failed to clear all data";console.error(W,M),qe.error(`${W}: ${M instanceof Error?M.message:String(M)}`),u(!1)}}},[]),P=(M,W)=>{b(V=>({...V,[M]:W}))},O=(M,W)=>{x(V=>({...V,[M]:W}))},U=(M,W,V,ie)=>{const ae=M==="import"?v:w,ne=M==="import"?P:O,q=M==="import"?m:d;return p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx(Oc,{id:`${M}-${W}`,checked:ae[W],onCheckedChange:te=>ne(W,!!te),disabled:q}),p.jsxs($t,{htmlFor:`${M}-${W}`,className:"text-sm font-normal flex items-center gap-1.5",children:[p.jsx(ie,{className:"h-4 w-4 text-muted-foreground"})," ",V]})]},`${M}-${W}`)};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Single Conversation"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx($t,{className:"font-semibold",children:"Import Conversation"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Import a previously exported single conversation (.json file)."}),p.jsx("input",{type:"file",ref:n,onChange:T,accept:".json",className:"hidden",id:"import-file-input",disabled:a}),p.jsxs(Rt,{onClick:_,variant:"outline",size:"sm",disabled:a,children:[a?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(FY,{className:"mr-2 h-4 w-4"}),a?"Importing...":"Select File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[p.jsx($t,{className:"font-semibold",children:"Export All Conversations"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all conversations and messages into a single JSON file."}),p.jsxs(Rt,{onClick:R,variant:"outline",size:"sm",disabled:s,children:[s?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(cf,{className:"mr-2 h-4 w-4"}),s?"Exporting...":"Export All Chats"]})]})]})]}),p.jsx(td,{}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium mb-2",children:"Full Configuration"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx($t,{className:"font-semibold",children:"Import Full Configuration"}),p.jsxs("p",{className:"text-xs text-muted-foreground",children:["Import a full configuration backup (.json). Select which data types to import below."," ",p.jsx("strong",{className:"text-destructive",children:"This will overwrite existing data for selected types."})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[U("import","importSettings","Settings",TT),U("import","importApiKeys","API Keys",i0),U("import","importProviderConfigs","Providers",Zw),U("import","importProjects","Projects",w4),U("import","importConversations","Conversations",CT),U("import","importRulesAndTags","Rules & Tags",kT),U("import","importMods","Mods",x4),U("import","importSyncRepos","Sync Repos",Fu)]}),p.jsx("input",{type:"file",ref:r,onChange:k,accept:".json",className:"hidden",id:"full-import-file-input",disabled:m}),p.jsxs(Rt,{onClick:E,variant:"outline",size:"sm",disabled:m,className:"mt-2",children:[m?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(TZ,{className:"mr-2 h-4 w-4"}),m?"Importing...":"Select Full Backup File..."]})]}),p.jsxs("div",{className:"border p-4 rounded-md space-y-3",children:[p.jsx($t,{className:"font-semibold",children:"Export Full Configuration"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Export all settings, providers, keys, projects, conversations, rules, tags, mods, etc., into a single backup file. Select which data types to include."}),p.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 pt-2",children:[U("export","importSettings","Settings",TT),U("export","importApiKeys","API Keys",i0),U("export","importProviderConfigs","Providers",Zw),U("export","importProjects","Projects",w4),U("export","importConversations","Conversations",CT),U("export","importRulesAndTags","Rules & Tags",kT),U("export","importMods","Mods",x4),U("export","importSyncRepos","Sync Repos",Fu)]}),p.jsxs(Rt,{onClick:j,variant:"outline",size:"sm",disabled:d,className:"mt-2",children:[d?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(bZ,{className:"mr-2 h-4 w-4"}),d?"Exporting...":"Export Full Backup"]})]})]})]}),p.jsx(td,{}),p.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[p.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),p.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),p.jsxs(Rt,{onClick:I,variant:"destructive",disabled:l,children:[l?p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}):p.jsx(Yi,{className:"mr-2 h-4 w-4"}),l?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},rTe=gt.memo(nTe),aTe=cA("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function MH({className:e,variant:t,...n}){return p.jsx("div",{"data-slot":"alert",role:"alert",className:vt(aTe({variant:t}),e),...n})}function OH({className:e,...t}){return p.jsx("div",{"data-slot":"alert-title",className:vt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function PH({className:e,...t}){return p.jsx("div",{"data-slot":"alert-description",className:vt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function Uf({className:e,...t}){return p.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:p.jsx("table",{"data-slot":"table",className:vt("w-full caption-bottom text-sm",e),...t})})}function bm({className:e,...t}){return p.jsx("thead",{"data-slot":"table-header",className:vt("[&_tr]:border-b",e),...t})}function Vf({className:e,...t}){return p.jsx("tbody",{"data-slot":"table-body",className:vt("[&_tr:last-child]:border-0",e),...t})}function Wr({className:e,...t}){return p.jsx("tr",{"data-slot":"table-row",className:vt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Rr({className:e,...t}){return p.jsx("th",{"data-slot":"table-head",className:vt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function Mn({className:e,...t}){return p.jsx("td",{"data-slot":"table-cell",className:vt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function iTe({className:e,...t}){return p.jsx("caption",{"data-slot":"table-caption",className:vt("text-muted-foreground mt-4 text-sm",e),...t})}const sTe=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=Lp(cn(R=>({loadedMods:R.loadedMods,addDbMod:R.addDbMod,updateDbMod:R.updateDbMod,deleteDbMod:R.deleteDbMod,dbMods:R.dbMods,isLoading:R.isLoading}))),[s,o]=C.useState(""),[l,u]=C.useState(""),[d,h]=C.useState(""),[m,g]=C.useState(!1),[v,b]=C.useState({}),[w,x]=C.useState({}),_=C.useCallback(async()=>{if(!s.trim()){qe.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){qe.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){qe.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const R={name:s.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(R),o(""),u(""),h(""),qe.info("Mod added. Reload required for changes to take effect.")}catch(R){console.error("Failed to add mod (from component):",R)}finally{g(!1)}},[s,l,d,t,a==null?void 0:a.length]),E=C.useCallback(async R=>{b(j=>({...j,[R.id]:!0}));try{await n(R.id,{enabled:!R.enabled}),qe.info(`Mod "${R.name}" ${R.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(j){console.error("Failed to update mod (from component):",j)}finally{b(j=>({...j,[R.id]:!1}))}},[n]),T=C.useCallback(async R=>{if(window.confirm(`Are you sure you want to delete the mod "${R.name}"? This cannot be undone.`)){x(j=>({...j,[R.id]:!0}));try{await r(R.id),qe.info("Mod deleted. Reload required for changes to take effect.")}catch(j){console.error("Failed to delete mod (from component):",j)}finally{x(j=>({...j,[R.id]:!1}))}}},[r]),k=C.useCallback(R=>{const j=e.find(P=>P.id===R);if(j)if(j.error){const P=j.error instanceof Error?j.error.message:String(j.error);return{status:"Error",error:j.error,tooltip:P}}else return{status:"Loaded"};const I=(a||[]).find(P=>P.id===R);return I?I.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs(MH,{variant:"destructive",className:"border-destructive/50",children:[p.jsx(bA,{className:"h-4 w-4"}),p.jsx(OH,{children:"Security Warning"}),p.jsx(PH,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),p.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),p.jsxs("div",{className:"space-y-2",children:[p.jsx($t,{htmlFor:"mod-name",children:"Mod Name"}),p.jsx(xn,{id:"mod-name",value:s,onChange:R=>o(R.target.value),placeholder:"My Awesome Mod",disabled:m})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx($t,{htmlFor:"mod-url",children:"Source URL (Optional)"}),p.jsx(xn,{id:"mod-url",type:"url",value:l,onChange:R=>u(R.target.value),placeholder:"https://example.com/my-mod.js",disabled:m||!!d.trim()})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx($t,{htmlFor:"mod-script",children:"Script Content (Optional)"}),p.jsx(yd,{id:"mod-script",value:d,onChange:R=>h(R.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:m||!!l.trim()})]}),p.jsxs(Rt,{onClick:_,disabled:m,children:[m&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),m?"Adding...":"Add Mod"]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),p.jsx("div",{className:"rounded-md border",children:p.jsx(Un,{delayDuration:100,children:p.jsxs(Uf,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Rr,{children:"Name"}),p.jsx(Rr,{children:"Source"}),p.jsx(Rr,{children:"Status"}),p.jsx(Rr,{className:"text-center",children:"Enabled"}),p.jsx(Rr,{className:"text-right",children:"Actions"})]})}),p.jsx(Vf,{children:i?p.jsxs(p.Fragment,{children:[p.jsx(Wr,{children:p.jsx(Mn,{colSpan:5,children:p.jsx($n,{className:"h-10 w-full"})})}),p.jsx(Wr,{children:p.jsx(Mn,{colSpan:5,children:p.jsx($n,{className:"h-10 w-full"})})})]}):(a||[]).length===0?p.jsx(Wr,{children:p.jsx(Mn,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(R=>{const{status:j,error:I,tooltip:P}=k(R.id),O=R.sourceUrl?new URL(R.sourceUrl).hostname:"Direct Script",U=v[R.id],M=w[R.id],W=U||M,V=j==="Error";return p.jsxs(Wr,{children:[p.jsx(Mn,{className:"font-medium",children:R.name}),p.jsx(Mn,{className:"text-muted-foreground",children:O}),p.jsxs(Mn,{children:[p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx("span",{className:V?"text-destructive font-semibold cursor-help":"",children:j})}),P&&p.jsx(Yn,{className:"max-w-xs break-words",children:p.jsx("p",{children:P})})]}),V&&I&&p.jsx("p",{className:"text-xs text-destructive truncate",children:I instanceof Error?I.message:String(I)})]}),p.jsxs(Mn,{className:"text-center",children:[p.jsx(Ki,{checked:R.enabled??!1,onCheckedChange:()=>E(R),disabled:W,"aria-label":`Enable ${R.name}`}),U&&p.jsx(Fn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),p.jsx(Mn,{className:"text-right",children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:()=>T(R),disabled:W,"aria-label":`Delete ${R.name}`,className:"text-destructive hover:text-destructive/80",children:M?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Yi,{className:"h-4 w-4"})})})]},R.id)})})]})})})]})]})},oTe=gt.memo(sTe),lTe=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:s,isDeleting:o,onSelectModelForDetails:l,allAvailableModelsForView:u})=>{var O,U;const[d,h]=C.useState(!0),m=E0(e.type),g=BF(e.type),v=tf(e.type),b=s==="fetching"||o,w=o||s==="fetching",x=o||s==="fetching",_=C.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),E=e.apiKeyId?t.some(M=>M.id===e.apiKeyId):!1,T=m&&!E,k=C.useCallback(async(M,W)=>{const V=new Set(e.enabledModels??[]);W?V.add(M):V.delete(M);const ie=Array.from(V);try{await i(e.id,{enabledModels:ie})}catch(ae){qe.error("Failed to update model status."),console.error("Failed to save model toggle:",ae)}},[e.enabledModels,e.id,i]),R=()=>h(M=>!M),j=((O=e.enabledModels)==null?void 0:O.length)??0,I=u.length,P=M=>{const W=dl(e.id,M);l(W)};return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{children:p.jsx("span",{className:vt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",s==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),p.jsx(Yn,{side:"top",children:s==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),p.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),p.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),T&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{children:p.jsx(Ec,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),p.jsx(Yn,{side:"top",children:p.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),p.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[p.jsx(Sn,{tooltipText:"Edit",onClick:n,disabled:w,"aria-label":"Edit provider",icon:p.jsx(wy,{}),className:"h-8 w-8"}),p.jsx(Sn,{tooltipText:"Delete",onClick:r,disabled:x,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:o?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Yi,{})})]})]}),p.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[m&&p.jsxs("div",{children:["API Key:"," ",e.apiKeyId?E?p.jsx("span",{className:"text-green-400",children:((U=t.find(M=>M.id===e.apiKeyId))==null?void 0:U.name)||"Linked (Unnamed Key)"}):p.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):p.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),g&&p.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),p.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?p.jsx("span",{className:"text-green-400",children:"Enabled"}):p.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&p.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),v&&p.jsx("div",{className:"pt-1",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:a,disabled:b,className:"text-xs h-7 px-2",children:[s==="fetching"&&p.jsx(Fn,{className:"h-3 w-3 mr-1 animate-spin"}),s==="success"&&p.jsx(Ga,{className:"h-3 w-3 mr-1 text-green-500"}),s==="error"&&p.jsx(Ec,{className:"h-3 w-3 mr-1 text-destructive"}),s==="idle"&&p.jsx(v1,{className:"h-3 w-3 mr-1"}),s==="fetching"?"Fetching...":s==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),p.jsxs("div",{className:"space-y-1 pt-2",children:[p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",j," / ",I," enabled)"]}),p.jsx(Sn,{tooltipText:d?"Show Models":"Hide Models",onClick:R,"aria-label":d?"Show model list":"Hide model list",icon:d?p.jsx(To,{}):p.jsx(Sc,{}),className:"h-6 w-6"})]}),!d&&p.jsx(kR,{providerId:e.id,allAvailableModels:u,enabledModelIds:_,onToggleModel:k,isLoading:s==="fetching",disabled:o,listHeightClass:"h-64",onModelClick:P})]})]})},cTe=gt.memo(lTe),uTe=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:s,onChange:o})=>{const l=C.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),u=C.useCallback((h,m)=>{const g=new Set(t.enabledModels??[]);m?g.add(h):g.delete(h);const v=Array.from(g);o("enabledModels",v)},[t.enabledModels,o]),d=C.useCallback((h,m)=>{o(h,m)},[o]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),p.jsx(Wz,{formData:t,onChange:d,apiKeys:n,disabled:a})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),p.jsx(kR,{providerId:e,allAvailableModels:r,enabledModelIds:l,onToggleModel:u,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),p.jsx(td,{className:"my-4"}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[p.jsx(Di,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:s,disabled:a,type:"button",children:[a&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(kf,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},dTe=gt.memo(uTe),fTe=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:s})=>{const[o,l]=C.useState(!1),[u,d]=C.useState(!1),[h,m]=C.useState(!1),[g,v]=C.useState({}),b=Hn(P=>P.getAllAvailableModelDefsForProvider),[w,x]=C.useState([]),_=C.useMemo(()=>[...b(e.id)].sort((O,U)=>(O.name||O.id).localeCompare(U.name||U.id)),[e.id,b]);C.useEffect(()=>{if(o){const P=b(e.id);x([...P].sort((O,U)=>(O.name||O.id).localeCompare(U.name||U.id))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[o,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),T=()=>{l(!1),v({}),d(!1)},k=C.useCallback(async()=>{d(!0);try{const P=g.enabledModels&&g.enabledModels.length>0?g.enabledModels:null,O={name:g.name,type:g.type,isEnabled:g.isEnabled,apiKeyId:g.apiKeyId,baseURL:g.baseURL,autoFetchModels:g.autoFetchModels,enabledModels:P};Object.keys(O).forEach(U=>{O[U]===void 0&&delete O[U]}),await n(e.id,O),l(!1),v({}),qe.success(`Provider "${O.name||e.name}" updated.`)}catch(P){console.error("Failed to save provider update:",P),qe.error("Failed to save provider configuration.")}finally{d(!1)}},[g,n,e.id,e.name]),R=C.useCallback((P,O)=>{v(U=>({...U,[P]:O}))},[]),j=C.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){m(!0);try{await r(e.id)}catch(P){console.error("Failed to delete provider:",P),m(!1)}}},[r,e.id,e.name]),I=C.useCallback(async()=>{if(await a(e.id),o){const P=b(e.id);x([...P].sort((O,U)=>(O.name||O.id).localeCompare(U.name||U.id)))}},[a,e.id,o,b]);return p.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:o?p.jsx(dTe,{providerId:e.id,editData:g,apiKeys:t,allAvailableModels:w,isSaving:u,onCancel:T,onSave:k,onChange:R}):p.jsx(cTe,{provider:e,apiKeys:t,onEdit:E,onDelete:j,onFetchModels:I,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:s,allAvailableModelsForView:_})})},hTe=gt.memo(fTe);function pTe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const X_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function vm(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function GR(e){return"nodeType"in e}function is(e){var t,n;return e?vm(e)?e:GR(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function WR(e){const{Document:t}=is(e);return e instanceof t}function db(e){return vm(e)?!1:e instanceof is(e).HTMLElement}function FH(e){return e instanceof is(e).SVGElement}function wm(e){return e?vm(e)?e.document:GR(e)?WR(e)?e:db(e)||FH(e)?e.ownerDocument:document:document:document}const Al=X_?C.useLayoutEffect:C.useEffect;function KR(e){const t=C.useRef(e);return Al(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function mTe(){const e=C.useRef(null),t=C.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=C.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function py(e,t){t===void 0&&(t=[e]);const n=C.useRef(e);return Al(()=>{n.current!==e&&(n.current=e)},t),n}function fb(e,t){const n=C.useRef();return C.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function d1(e){const t=KR(e),n=C.useRef(null),r=C.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function nA(e){const t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}let mT={};function hb(e,t){return C.useMemo(()=>{if(t)return t;const n=mT[e]==null?0:mT[e]+1;return mT[e]=n,e+"-"+n},[e,t])}function LH(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,s)=>{const o=Object.entries(s);for(const[l,u]of o){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const fp=LH(1),my=LH(-1);function gTe(e){return"clientX"in e&&"clientY"in e}function ZR(e){if(!e)return!1;const{KeyboardEvent:t}=is(e.target);return t&&e instanceof t}function yTe(e){if(!e)return!1;const{TouchEvent:t}=is(e.target);return t&&e instanceof t}function rA(e){if(yTe(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return gTe(e)?{x:e.clientX,y:e.clientY}:null}const gy=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[gy.Translate.toString(e),gy.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),GP="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function bTe(e){return e.matches(GP)?e:e.querySelector(GP)}const vTe={display:"none"};function wTe(e){let{id:t,value:n}=e;return gt.createElement("div",{id:t,style:vTe},n)}function xTe(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return gt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function _Te(){const[e,t]=C.useState("");return{announce:C.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const BH=C.createContext(null);function STe(e){const t=C.useContext(BH);C.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ETe(){const[e]=C.useState(()=>new Set),t=C.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[C.useCallback(r=>{let{type:a,event:i}=r;e.forEach(s=>{var o;return(o=s[a])==null?void 0:o.call(s,i)})},[e]),t]}const CTe={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},TTe={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function kTe(e){let{announcements:t=TTe,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=CTe}=e;const{announce:i,announcement:s}=_Te(),o=hb("DndLiveRegion"),[l,u]=C.useState(!1);if(C.useEffect(()=>{u(!0)},[]),STe(C.useMemo(()=>({onDragStart(h){let{active:m}=h;i(t.onDragStart({active:m}))},onDragMove(h){let{active:m,over:g}=h;t.onDragMove&&i(t.onDragMove({active:m,over:g}))},onDragOver(h){let{active:m,over:g}=h;i(t.onDragOver({active:m,over:g}))},onDragEnd(h){let{active:m,over:g}=h;i(t.onDragEnd({active:m,over:g}))},onDragCancel(h){let{active:m,over:g}=h;i(t.onDragCancel({active:m,over:g}))}}),[i,t])),!l)return null;const d=gt.createElement(gt.Fragment,null,gt.createElement(wTe,{id:r,value:a.draggable}),gt.createElement(xTe,{id:o,announcement:s}));return n?ml.createPortal(d,n):d}var Aa;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Aa||(Aa={}));function f1(){}function WP(e,t){return C.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function ATe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Fo=Object.freeze({x:0,y:0});function $H(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function zH(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function NTe(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function KP(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function UH(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function ZP(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const RTe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=ZP(t,t.left,t.top),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=$H(ZP(l),a);i.push({id:o,data:{droppableContainer:s,value:u}})}}return i.sort(zH)},ITe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=KP(t),i=[];for(const s of r){const{id:o}=s,l=n.get(o);if(l){const u=KP(l),d=a.reduce((m,g,v)=>m+$H(u[v],g),0),h=Number((d/4).toFixed(4));i.push({id:o,data:{droppableContainer:s,value:h}})}}return i.sort(zH)};function jTe(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),s=a-r,o=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=s*o,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const DTe=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:s}=i,o=n.get(s);if(o){const l=jTe(o,t);l>0&&a.push({id:s,data:{droppableContainer:i,value:l}})}}return a.sort(NTe)};function MTe(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function VH(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Fo}function OTe(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((s,o)=>({...s,top:s.top+e*o.y,bottom:s.bottom+e*o.y,left:s.left+e*o.x,right:s.right+e*o.x}),{...n})}}const PTe=OTe(1);function FTe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function LTe(e,t,n){const r=FTe(t);if(!r)return e;const{scaleX:a,scaleY:i,x:s,y:o}=r,l=e.left-s-(1-a)*parseFloat(n),u=e.top-o-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const BTe={ignoreTransform:!1};function xm(e,t){t===void 0&&(t=BTe);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=is(e).getComputedStyle(e);u&&(n=LTe(n,u,d))}const{top:r,left:a,width:i,height:s,bottom:o,right:l}=n;return{top:r,left:a,width:i,height:s,bottom:o,right:l}}function YP(e){return xm(e,{ignoreTransform:!0})}function $Te(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function zTe(e,t){return t===void 0&&(t=is(e).getComputedStyle(e)),t.position==="fixed"}function UTe(e,t){t===void 0&&(t=is(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function J_(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(WR(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!db(a)||FH(a)||n.includes(a))return n;const i=is(e).getComputedStyle(a);return a!==e&&UTe(a,i)&&n.push(a),zTe(a,i)?n:r(a.parentNode)}return e?r(e):n}function HH(e){const[t]=J_(e,1);return t??null}function gT(e){return!X_||!e?null:vm(e)?e:GR(e)?WR(e)||e===wm(e).scrollingElement?window:db(e)?e:null:null}function qH(e){return vm(e)?e.scrollX:e.scrollLeft}function GH(e){return vm(e)?e.scrollY:e.scrollTop}function aA(e){return{x:qH(e),y:GH(e)}}var za;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(za||(za={}));function WH(e){return!X_||!e?!1:e===document.scrollingElement}function KH(e){const t={x:0,y:0},n=WH(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,s=e.scrollTop>=r.y,o=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:s,isRight:o,maxScroll:r,minScroll:t}}const VTe={x:.2,y:.2};function HTe(e,t,n,r,a){let{top:i,left:s,right:o,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=VTe);const{isTop:u,isBottom:d,isLeft:h,isRight:m}=KH(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(g.y=za.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(g.y=za.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!m&&o>=t.right-b.width?(g.x=za.Forward,v.x=r*Math.abs((t.right-b.width-o)/b.width)):!h&&s<=t.left+b.width&&(g.x=za.Backward,v.x=r*Math.abs((t.left+b.width-s)/b.width)),{direction:g,speed:v}}function qTe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function ZH(e){return e.reduce((t,n)=>fp(t,aA(n)),Fo)}function GTe(e){return e.reduce((t,n)=>t+qH(n),0)}function WTe(e){return e.reduce((t,n)=>t+GH(n),0)}function KTe(e,t){if(t===void 0&&(t=xm),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);HH(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ZTe=[["x",["left","right"],GTe],["y",["top","bottom"],WTe]];class YR{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=J_(n),a=ZH(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,s,o]of ZTe)for(const l of s)Object.defineProperty(this,l,{get:()=>{const u=o(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class n0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function YTe(e){const{EventTarget:t}=is(e);return e instanceof t?e:wm(e)}function yT(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Vs;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Vs||(Vs={}));function XP(e){e.preventDefault()}function XTe(e){e.stopPropagation()}var rr;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(rr||(rr={}));const YH={start:[rr.Space,rr.Enter],cancel:[rr.Esc],end:[rr.Space,rr.Enter,rr.Tab]},JTe=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case rr.Right:return{...n,x:n.x+25};case rr.Left:return{...n,x:n.x-25};case rr.Down:return{...n,y:n.y+25};case rr.Up:return{...n,y:n.y-25}}};class XR{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new n0(wm(n)),this.windowListeners=new n0(is(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vs.Resize,this.handleCancel),this.windowListeners.add(Vs.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vs.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&KTe(r),n(Fo)}handleKeyDown(t){if(ZR(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=YH,coordinateGetter:s=JTe,scrollBehavior:o="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Fo;this.referenceCoordinates||(this.referenceCoordinates=d);const h=s(t,{active:n,context:r.current,currentCoordinates:d});if(h){const m=my(h,d),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const w=t.code,{isTop:x,isRight:_,isLeft:E,isBottom:T,maxScroll:k,minScroll:R}=KH(b),j=qTe(b),I={x:Math.min(w===rr.Right?j.right-j.width/2:j.right,Math.max(w===rr.Right?j.left:j.left+j.width/2,h.x)),y:Math.min(w===rr.Down?j.bottom-j.height/2:j.bottom,Math.max(w===rr.Down?j.top:j.top+j.height/2,h.y))},P=w===rr.Right&&!_||w===rr.Left&&!E,O=w===rr.Down&&!T||w===rr.Up&&!x;if(P&&I.x!==h.x){const U=b.scrollLeft+m.x,M=w===rr.Right&&U<=k.x||w===rr.Left&&U>=R.x;if(M&&!m.y){b.scrollTo({left:U,behavior:o});return}M?g.x=b.scrollLeft-U:g.x=w===rr.Right?b.scrollLeft-k.x:b.scrollLeft-R.x,g.x&&b.scrollBy({left:-g.x,behavior:o});break}else if(O&&I.y!==h.y){const U=b.scrollTop+m.y,M=w===rr.Down&&U<=k.y||w===rr.Up&&U>=R.y;if(M&&!m.x){b.scrollTo({top:U,behavior:o});return}M?g.y=b.scrollTop-U:g.y=w===rr.Down?b.scrollTop-k.y:b.scrollTop-R.y,g.y&&b.scrollBy({top:-g.y,behavior:o});break}}this.handleMove(t,fp(my(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}XR.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=YH,onActivation:a}=t,{active:i}=n;const{code:s}=e.nativeEvent;if(r.start.includes(s)){const o=i.activatorNode.current;return o&&e.target!==o?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function JP(e){return!!(e&&"distance"in e)}function QP(e){return!!(e&&"delay"in e)}class JR{constructor(t,n,r){var a;r===void 0&&(r=YTe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:s}=i;this.props=t,this.events=n,this.document=wm(s),this.documentListeners=new n0(this.document),this.listeners=new n0(r),this.windowListeners=new n0(is(s)),this.initialCoordinates=(a=rA(i))!=null?a:Fo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Vs.Resize,this.handleCancel),this.windowListeners.add(Vs.DragStart,XP),this.windowListeners.add(Vs.VisibilityChange,this.handleCancel),this.windowListeners.add(Vs.ContextMenu,XP),this.documentListeners.add(Vs.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(QP(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(JP(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Vs.Click,XTe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vs.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:s,options:{activationConstraint:o}}=i;if(!a)return;const l=(n=rA(t))!=null?n:Fo,u=my(a,l);if(!r&&o){if(JP(o)){if(o.tolerance!=null&&yT(u,o.tolerance))return this.handleCancel();if(yT(u,o.distance))return this.handleStart()}if(QP(o)&&yT(u,o.tolerance))return this.handleCancel();this.handlePending(o,u);return}t.cancelable&&t.preventDefault(),s(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===rr.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const QTe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class QR extends JR{constructor(t){const{event:n}=t,r=wm(n.target);super(t,QTe,r)}}QR.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const eke={move:{name:"mousemove"},end:{name:"mouseup"}};var iA;(function(e){e[e.RightClick=2]="RightClick"})(iA||(iA={}));class tke extends JR{constructor(t){super(t,eke,wm(t.event.target))}}tke.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===iA.RightClick?!1:(r==null||r({event:n}),!0)}}];const bT={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class nke extends JR{constructor(t){super(t,bT)}static setup(){return window.addEventListener(bT.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(bT.move.name,t)};function t(){}}}nke.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var r0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(r0||(r0={}));var h1;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(h1||(h1={}));function rke(e){let{acceleration:t,activator:n=r0.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:s=5,order:o=h1.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:m}=e;const g=ike({delta:h,disabled:!i}),[v,b]=mTe(),w=C.useRef({x:0,y:0}),x=C.useRef({x:0,y:0}),_=C.useMemo(()=>{switch(n){case r0.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case r0.DraggableRect:return a}},[n,a,l]),E=C.useRef(null),T=C.useCallback(()=>{const R=E.current;if(!R)return;const j=w.current.x*x.current.x,I=w.current.y*x.current.y;R.scrollBy(j,I)},[]),k=C.useMemo(()=>o===h1.TreeOrder?[...u].reverse():u,[o,u]);C.useEffect(()=>{if(!i||!u.length||!_){b();return}for(const R of k){if((r==null?void 0:r(R))===!1)continue;const j=u.indexOf(R),I=d[j];if(!I)continue;const{direction:P,speed:O}=HTe(R,I,_,t,m);for(const U of["x","y"])g[U][P[U]]||(O[U]=0,P[U]=0);if(O.x>0||O.y>0){b(),E.current=R,v(T,s),w.current=O,x.current=P;return}}w.current={x:0,y:0},x.current={x:0,y:0},b()},[t,T,r,b,i,s,JSON.stringify(_),JSON.stringify(g),v,u,k,d,JSON.stringify(m)])}const ake={x:{[za.Backward]:!1,[za.Forward]:!1},y:{[za.Backward]:!1,[za.Forward]:!1}};function ike(e){let{delta:t,disabled:n}=e;const r=nA(t);return fb(a=>{if(n||!r||!a)return ake;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[za.Backward]:a.x[za.Backward]||i.x===-1,[za.Forward]:a.x[za.Forward]||i.x===1},y:{[za.Backward]:a.y[za.Backward]||i.y===-1,[za.Forward]:a.y[za.Forward]||i.y===1}}},[n,t,r])}function ske(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return fb(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function oke(e,t){return C.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(s=>({eventName:s.eventName,handler:t(s.handler,r)}));return[...n,...i]},[]),[e,t])}var yy;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(yy||(yy={}));var sA;(function(e){e.Optimized="optimized"})(sA||(sA={}));const e8=new Map;function lke(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,s]=C.useState(null),{frequency:o,measure:l,strategy:u}=a,d=C.useRef(e),h=w(),m=py(h),g=C.useCallback(function(x){x===void 0&&(x=[]),!m.current&&s(_=>_===null?x:_.concat(x.filter(E=>!_.includes(E))))},[m]),v=C.useRef(null),b=fb(x=>{if(h&&!n)return e8;if(!x||x===e8||d.current!==e||i!=null){const _=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){_.set(E.id,E.rect.current);continue}const T=E.node.current,k=T?new YR(l(T),T):null;E.rect.current=k,k&&_.set(E.id,k)}return _}return x},[e,i,n,h,l]);return C.useEffect(()=>{d.current=e},[e]),C.useEffect(()=>{h||g()},[n,h]),C.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),C.useEffect(()=>{h||typeof o!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},o))},[o,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function w(){switch(u){case yy.Always:return!1;case yy.BeforeDragging:return n;default:return!n}}}function XH(e,t){return fb(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function cke(e,t){return XH(e,t)}function uke(e){let{callback:t,disabled:n}=e;const r=KR(t),a=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return C.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Q_(e){let{callback:t,disabled:n}=e;const r=KR(t),a=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return C.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function dke(e){return new YR(xm(e),e)}function t8(e,t,n){t===void 0&&(t=dke);const[r,a]=C.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const s=uke({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),o=Q_({callback:i});return Al(()=>{i(),e?(o==null||o.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(o==null||o.disconnect(),s==null||s.disconnect())},[e]),r}function fke(e){const t=XH(e);return VH(e,t)}const n8=[];function hke(e){const t=C.useRef(e),n=fb(r=>e?r&&r!==n8&&e&&t.current&&e.parentNode===t.current.parentNode?r:J_(e):n8,[e]);return C.useEffect(()=>{t.current=e},[e]),n}function pke(e){const[t,n]=C.useState(null),r=C.useRef(e),a=C.useCallback(i=>{const s=gT(i.target);s&&n(o=>o?(o.set(s,aA(s)),new Map(o)):null)},[]);return C.useEffect(()=>{const i=r.current;if(e!==i){s(i);const o=e.map(l=>{const u=gT(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,aA(u)]):null}).filter(l=>l!=null);n(o.length?new Map(o):null),r.current=e}return()=>{s(e),s(i)};function s(o){o.forEach(l=>{const u=gT(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),C.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,s)=>fp(i,s),Fo):ZH(e):Fo,[e,t])}function r8(e,t){t===void 0&&(t=[]);const n=C.useRef(null);return C.useEffect(()=>{n.current=null},t),C.useEffect(()=>{const r=e!==Fo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?my(e,n.current):Fo}function mke(e){C.useEffect(()=>{if(!X_)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function gke(e,t){return C.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=s=>{i(s,t)},n},{}),[e,t])}function JH(e){return C.useMemo(()=>e?$Te(e):null,[e])}const a8=[];function yke(e,t){t===void 0&&(t=xm);const[n]=e,r=JH(n?is(n):null),[a,i]=C.useState(a8);function s(){i(()=>e.length?e.map(l=>WH(l)?r:new YR(t(l),l)):a8)}const o=Q_({callback:s});return Al(()=>{o==null||o.disconnect(),s(),e.forEach(l=>o==null?void 0:o.observe(l))},[e]),a}function bke(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return db(t)?t:e}function vke(e){let{measure:t}=e;const[n,r]=C.useState(null),a=C.useCallback(u=>{for(const{target:d}of u)if(db(d)){r(h=>{const m=t(d);return h?{...h,width:m.width,height:m.height}:m});break}},[t]),i=Q_({callback:a}),s=C.useCallback(u=>{const d=bke(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[o,l]=d1(s);return C.useMemo(()=>({nodeRef:o,rect:n,setRef:l}),[n,o,l])}const wke=[{sensor:QR,options:{}},{sensor:XR,options:{}}],xke={current:{}},Kw={draggable:{measure:YP},droppable:{measure:YP,strategy:yy.WhileDragging,frequency:sA.Optimized},dragOverlay:{measure:xm}};class a0 extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const _ke={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new a0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:f1},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Kw,measureDroppableContainers:f1,windowRect:null,measuringScheduled:!1},Ske={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:f1,draggableNodes:new Map,over:null,measureDroppableContainers:f1},eS=C.createContext(Ske),QH=C.createContext(_ke);function Eke(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new a0}}}function Cke(e,t){switch(t.type){case Aa.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Aa.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Aa.DragEnd:case Aa.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Aa.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new a0(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Aa.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const s=new a0(e.droppable.containers);return s.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:s}}}case Aa.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new a0(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function Tke(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=C.useContext(eS),i=nA(r),s=nA(n==null?void 0:n.id);return C.useEffect(()=>{if(!t&&!r&&i&&s!=null){if(!ZR(i)||document.activeElement===i.target)return;const o=a.get(s);if(!o)return;const{activatorNode:l,node:u}=o;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=bTe(d);if(h){h.focus();break}}})}},[r,t,a,s,i]),null}function kke(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function Ake(e){return C.useMemo(()=>({draggable:{...Kw.draggable,...e==null?void 0:e.draggable},droppable:{...Kw.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Kw.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Nke(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=C.useRef(!1),{x:s,y:o}=typeof a=="boolean"?{x:a,y:a}:a;Al(()=>{if(!s&&!o||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=VH(d,r);if(s||(h.x=0),o||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const m=HH(u);m&&m.scrollBy({top:h.y,left:h.x})}},[t,s,o,r,n])}const eq=C.createContext({...Fo,scaleX:1,scaleY:1});var Nu;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Nu||(Nu={}));const Rke=C.memo(function(t){var n,r,a,i;let{id:s,accessibility:o,autoScroll:l=!0,children:u,sensors:d=wke,collisionDetection:h=DTe,measuring:m,modifiers:g,...v}=t;const b=C.useReducer(Cke,void 0,Eke),[w,x]=b,[_,E]=ETe(),[T,k]=C.useState(Nu.Uninitialized),R=T===Nu.Initialized,{draggable:{active:j,nodes:I,translate:P},droppable:{containers:O}}=w,U=j!=null?I.get(j):null,M=C.useRef({initial:null,translated:null}),W=C.useMemo(()=>{var nt;return j!=null?{id:j,data:(nt=U==null?void 0:U.data)!=null?nt:xke,rect:M}:null},[j,U]),V=C.useRef(null),[ie,ae]=C.useState(null),[ne,q]=C.useState(null),te=py(v,Object.values(v)),G=hb("DndDescribedBy",s),J=C.useMemo(()=>O.getEnabled(),[O]),Q=Ake(m),{droppableRects:se,measureDroppableContainers:fe,measuringScheduled:ve}=lke(J,{dragging:R,dependencies:[P.x,P.y],config:Q.droppable}),je=ske(I,j),Ne=C.useMemo(()=>ne?rA(ne):null,[ne]),Se=$e(),ye=cke(je,Q.draggable.measure);Nke({activeNode:j!=null?I.get(j):null,config:Se.layoutShiftCompensation,initialRect:ye,measure:Q.draggable.measure});const Fe=t8(je,Q.draggable.measure,ye),Xe=t8(je?je.parentElement:null),Le=C.useRef({activatorEvent:null,active:null,activeNode:je,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=O.getNodeFor((n=Le.current.over)==null?void 0:n.id),B=vke({measure:Q.dragOverlay.measure}),Ce=(r=B.nodeRef.current)!=null?r:je,Ee=R?(a=B.rect)!=null?a:Fe:null,ce=!!(B.nodeRef.current&&B.rect),oe=fke(ce?null:Fe),ee=JH(Ce?is(Ce):null),_e=hke(R?Ie??je:null),Pe=yke(_e),ke=kke(g,{transform:{x:P.x-oe.x,y:P.y-oe.y,scaleX:1,scaleY:1},activatorEvent:ne,active:W,activeNodeRect:Fe,containerNodeRect:Xe,draggingNodeRect:Ee,over:Le.current.over,overlayNodeRect:B.rect,scrollableAncestors:_e,scrollableAncestorRects:Pe,windowRect:ee}),We=Ne?fp(Ne,P):null,Nt=pke(_e),it=r8(Nt),Ct=r8(Nt,[Fe]),Ft=fp(ke,it),Mt=Ee?PTe(Ee,ke):null,Zt=W&&Mt?h({active:W,collisionRect:Mt,droppableRects:se,droppableContainers:J,pointerCoordinates:We}):null,be=UH(Zt,"id"),[D,Z]=C.useState(null),he=ce?ke:fp(ke,Ct),De=MTe(he,(i=D==null?void 0:D.rect)!=null?i:null,Fe),we=C.useRef(null),Ae=C.useCallback((nt,ge)=>{let{sensor:Me,options:Ke}=ge;if(V.current==null)return;const Dt=I.get(V.current);if(!Dt)return;const me=nt.nativeEvent,K=new Me({active:V.current,activeNode:Dt,event:me,options:Ke,context:Le,onAbort(Y){if(!I.get(Y))return;const{onDragAbort:Re}=te.current,Ve={id:Y};Re==null||Re(Ve),_({type:"onDragAbort",event:Ve})},onPending(Y,pe,Re,Ve){if(!I.get(Y))return;const{onDragPending:Kt}=te.current,ut={id:Y,constraint:pe,initialCoordinates:Re,offset:Ve};Kt==null||Kt(ut),_({type:"onDragPending",event:ut})},onStart(Y){const pe=V.current;if(pe==null)return;const Re=I.get(pe);if(!Re)return;const{onDragStart:Ve}=te.current,pt={activatorEvent:me,active:{id:pe,data:Re.data,rect:M}};ml.unstable_batchedUpdates(()=>{Ve==null||Ve(pt),k(Nu.Initializing),x({type:Aa.DragStart,initialCoordinates:Y,active:pe}),_({type:"onDragStart",event:pt}),ae(we.current),q(me)})},onMove(Y){x({type:Aa.DragMove,coordinates:Y})},onEnd:H(Aa.DragEnd),onCancel:H(Aa.DragCancel)});we.current=K;function H(Y){return async function(){const{active:Re,collisions:Ve,over:pt,scrollAdjustedTranslate:Kt}=Le.current;let ut=null;if(Re&&Kt){const{cancelDrop:It}=te.current;ut={activatorEvent:me,active:Re,collisions:Ve,delta:Kt,over:pt},Y===Aa.DragEnd&&typeof It=="function"&&await Promise.resolve(It(ut))&&(Y=Aa.DragCancel)}V.current=null,ml.unstable_batchedUpdates(()=>{x({type:Y}),k(Nu.Uninitialized),Z(null),ae(null),q(null),we.current=null;const It=Y===Aa.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Lt=te.current[It];Lt==null||Lt(ut),_({type:It,event:ut})}})}}},[I]),ue=C.useCallback((nt,ge)=>(Me,Ke)=>{const Dt=Me.nativeEvent,me=I.get(Ke);if(V.current!==null||!me||Dt.dndKit||Dt.defaultPrevented)return;const K={active:me};nt(Me,ge.options,K)===!0&&(Dt.dndKit={capturedBy:ge.sensor},V.current=Ke,Ae(Me,ge))},[I,Ae]),ft=oke(d,ue);mke(d),Al(()=>{Fe&&T===Nu.Initializing&&k(Nu.Initialized)},[Fe,T]),C.useEffect(()=>{const{onDragMove:nt}=te.current,{active:ge,activatorEvent:Me,collisions:Ke,over:Dt}=Le.current;if(!ge||!Me)return;const me={active:ge,activatorEvent:Me,collisions:Ke,delta:{x:Ft.x,y:Ft.y},over:Dt};ml.unstable_batchedUpdates(()=>{nt==null||nt(me),_({type:"onDragMove",event:me})})},[Ft.x,Ft.y]),C.useEffect(()=>{const{active:nt,activatorEvent:ge,collisions:Me,droppableContainers:Ke,scrollAdjustedTranslate:Dt}=Le.current;if(!nt||V.current==null||!ge||!Dt)return;const{onDragOver:me}=te.current,K=Ke.get(be),H=K&&K.rect.current?{id:K.id,rect:K.rect.current,data:K.data,disabled:K.disabled}:null,Y={active:nt,activatorEvent:ge,collisions:Me,delta:{x:Dt.x,y:Dt.y},over:H};ml.unstable_batchedUpdates(()=>{Z(H),me==null||me(Y),_({type:"onDragOver",event:Y})})},[be]),Al(()=>{Le.current={activatorEvent:ne,active:W,activeNode:je,collisionRect:Mt,collisions:Zt,droppableRects:se,draggableNodes:I,draggingNode:Ce,draggingNodeRect:Ee,droppableContainers:O,over:D,scrollableAncestors:_e,scrollAdjustedTranslate:Ft},M.current={initial:Ee,translated:Mt}},[W,je,Zt,Mt,I,Ce,Ee,se,O,D,_e,Ft]),rke({...Se,delta:P,draggingRect:Mt,pointerCoordinates:We,scrollableAncestors:_e,scrollableAncestorRects:Pe});const wt=C.useMemo(()=>({active:W,activeNode:je,activeNodeRect:Fe,activatorEvent:ne,collisions:Zt,containerNodeRect:Xe,dragOverlay:B,draggableNodes:I,droppableContainers:O,droppableRects:se,over:D,measureDroppableContainers:fe,scrollableAncestors:_e,scrollableAncestorRects:Pe,measuringConfiguration:Q,measuringScheduled:ve,windowRect:ee}),[W,je,Fe,ne,Zt,Xe,B,I,O,se,D,fe,_e,Pe,Q,ve,ee]),L=C.useMemo(()=>({activatorEvent:ne,activators:ft,active:W,activeNodeRect:Fe,ariaDescribedById:{draggable:G},dispatch:x,draggableNodes:I,over:D,measureDroppableContainers:fe}),[ne,ft,W,Fe,x,G,I,D,fe]);return gt.createElement(BH.Provider,{value:E},gt.createElement(eS.Provider,{value:L},gt.createElement(QH.Provider,{value:wt},gt.createElement(eq.Provider,{value:De},u)),gt.createElement(Tke,{disabled:(o==null?void 0:o.restoreFocus)===!1})),gt.createElement(kTe,{...o,hiddenTextDescribedById:G}));function $e(){const nt=(ie==null?void 0:ie.autoScrollEnabled)===!1,ge=typeof l=="object"?l.enabled===!1:l===!1,Me=R&&!nt&&!ge;return typeof l=="object"?{...l,enabled:Me}:{enabled:Me}}}),Ike=C.createContext(null),i8="button",jke="Draggable";function Dke(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=hb(jke),{activators:s,activatorEvent:o,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:m}=C.useContext(eS),{role:g=i8,roleDescription:v="draggable",tabIndex:b=0}=a??{},w=(l==null?void 0:l.id)===t,x=C.useContext(w?eq:Ike),[_,E]=d1(),[T,k]=d1(),R=gke(s,t),j=py(n);Al(()=>(h.set(t,{id:t,key:i,node:_,activatorNode:T,data:j}),()=>{const P=h.get(t);P&&P.key===i&&h.delete(t)}),[h,t]);const I=C.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":w&&g===i8?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,g,b,w,v,d.draggable]);return{active:l,activatorEvent:o,activeNodeRect:u,attributes:I,isDragging:w,listeners:r?void 0:R,node:_,over:m,setNodeRef:E,setActivatorNodeRef:k,transform:x}}function Mke(){return C.useContext(QH)}const Oke="Droppable",Pke={timeout:25};function Fke(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=hb(Oke),{active:s,dispatch:o,over:l,measureDroppableContainers:u}=C.useContext(eS),d=C.useRef({disabled:n}),h=C.useRef(!1),m=C.useRef(null),g=C.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...Pke,...a},x=py(b??r),_=C.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),g.current=null},w)},[w]),E=Q_({callback:_,disabled:v||!s}),T=C.useCallback((I,P)=>{E&&(P&&(E.unobserve(P),h.current=!1),I&&E.observe(I))},[E]),[k,R]=d1(T),j=py(t);return C.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),C.useEffect(()=>(o({type:Aa.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:m,data:j}}),()=>o({type:Aa.UnregisterDroppable,key:i,id:r})),[r]),C.useEffect(()=>{n!==d.current.disabled&&(o({type:Aa.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,o]),{active:s,rect:m,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:R}}function e3(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Lke(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function Nw(e){return e!==null&&e>=0}function Bke(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function $ke(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const tq=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=e3(t,r,n),s=t[a],o=i[a];return!o||!s?null:{x:o.left-s.left,y:o.top-s.top,scaleX:o.width/s.width,scaleY:o.height/s.height}},Rw={scaleX:1,scaleY:1},zke=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:s}=e;const o=(t=i[n])!=null?t:r;if(!o)return null;if(a===n){const u=i[s];return u?{x:0,y:n<s?u.top+u.height-(o.top+o.height):u.top-o.top,...Rw}:null}const l=Uke(i,a,n);return a>n&&a<=s?{x:0,y:-o.height-l,...Rw}:a<n&&a>=s?{x:0,y:o.height+l,...Rw}:{x:0,y:0,...Rw}};function Uke(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const nq="Sortable",rq=gt.createContext({activeIndex:-1,containerId:nq,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:tq,disabled:{draggable:!1,droppable:!1}});function Vke(e){let{children:t,id:n,items:r,strategy:a=tq,disabled:i=!1}=e;const{active:s,dragOverlay:o,droppableRects:l,over:u,measureDroppableContainers:d}=Mke(),h=hb(nq,n),m=o.rect!==null,g=C.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),v=s!=null,b=s?g.indexOf(s.id):-1,w=u?g.indexOf(u.id):-1,x=C.useRef(g),_=!Bke(g,x.current),E=w!==-1&&b===-1||_,T=$ke(i);Al(()=>{_&&v&&d(g)},[_,g,v,d]),C.useEffect(()=>{x.current=g},[g]);const k=C.useMemo(()=>({activeIndex:b,containerId:h,disabled:T,disableTransforms:E,items:g,overIndex:w,useDragOverlay:m,sortedRects:Lke(g,l),strategy:a}),[b,h,T.draggable,T.droppable,E,g,w,l,m,a]);return gt.createElement(rq.Provider,{value:k},t)}const Hke=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return e3(n,r,a).indexOf(t)},qke=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:s,previousItems:o,previousContainerId:l,transition:u}=e;return!u||!r||o!==i&&a===s?!1:n?!0:s!==a&&t===l},Gke={duration:200,easing:"ease"},aq="transform",Wke=gy.Transition.toString({property:aq,duration:0,easing:"linear"}),Kke={roleDescription:"sortable"};function Zke(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,s]=C.useState(null),o=C.useRef(n);return Al(()=>{if(!t&&n!==o.current&&r.current){const l=a.current;if(l){const u=xm(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&s(d)}}n!==o.current&&(o.current=n)},[t,n,r,a]),C.useEffect(()=>{i&&s(null)},[i]),i}function Yke(e){let{animateLayoutChanges:t=qke,attributes:n,disabled:r,data:a,getNewIndex:i=Hke,id:s,strategy:o,resizeObserverConfig:l,transition:u=Gke}=e;const{items:d,containerId:h,activeIndex:m,disabled:g,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:x,strategy:_}=C.useContext(rq),E=Xke(r,g),T=d.indexOf(s),k=C.useMemo(()=>({sortable:{containerId:h,index:T,items:d},...a}),[h,a,T,d]),R=C.useMemo(()=>d.slice(d.indexOf(s)),[d,s]),{rect:j,node:I,isOver:P,setNodeRef:O}=Fke({id:s,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...l}}),{active:U,activatorEvent:M,activeNodeRect:W,attributes:V,setNodeRef:ie,listeners:ae,isDragging:ne,over:q,setActivatorNodeRef:te,transform:G}=Dke({id:s,data:k,attributes:{...Kke,...n},disabled:E.draggable}),J=pTe(O,ie),Q=!!U,se=Q&&!v&&Nw(m)&&Nw(w),fe=!x&&ne,ve=fe&&se?G:null,Ne=se?ve??(o??_)({rects:b,activeNodeRect:W,activeIndex:m,overIndex:w,index:T}):null,Se=Nw(m)&&Nw(w)?i({id:s,items:d,activeIndex:m,overIndex:w}):T,ye=U==null?void 0:U.id,Fe=C.useRef({activeId:ye,items:d,newIndex:Se,containerId:h}),Xe=d!==Fe.current.items,Le=t({active:U,containerId:h,isDragging:ne,isSorting:Q,id:s,index:T,items:d,newIndex:Fe.current.newIndex,previousItems:Fe.current.items,previousContainerId:Fe.current.containerId,transition:u,wasDragging:Fe.current.activeId!=null}),Ie=Zke({disabled:!Le,index:T,node:I,rect:j});return C.useEffect(()=>{Q&&Fe.current.newIndex!==Se&&(Fe.current.newIndex=Se),h!==Fe.current.containerId&&(Fe.current.containerId=h),d!==Fe.current.items&&(Fe.current.items=d)},[Q,Se,h,d]),C.useEffect(()=>{if(ye===Fe.current.activeId)return;if(ye!=null&&Fe.current.activeId==null){Fe.current.activeId=ye;return}const Ce=setTimeout(()=>{Fe.current.activeId=ye},50);return()=>clearTimeout(Ce)},[ye]),{active:U,activeIndex:m,attributes:V,data:k,rect:j,index:T,newIndex:Se,items:d,isOver:P,isSorting:Q,isDragging:ne,listeners:ae,node:I,overIndex:w,over:q,setNodeRef:J,setActivatorNodeRef:te,setDroppableNodeRef:O,setDraggableNodeRef:ie,transform:Ie??Ne,transition:B()};function B(){if(Ie||Xe&&Fe.current.newIndex===T)return Wke;if(!(fe&&!ZR(M)||!u)&&(Q||Le))return gy.Transition.toString({...u,property:aq})}}function Xke(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function p1(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Jke=[rr.Down,rr.Right,rr.Up,rr.Left],Qke=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:s,scrollableAncestors:o}}=t;if(Jke.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const m=a.get(h.id);if(m)switch(e.code){case rr.Down:r.top<m.top&&l.push(h);break;case rr.Up:r.top>m.top&&l.push(h);break;case rr.Left:r.left>m.left&&l.push(h);break;case rr.Right:r.left<m.left&&l.push(h);break}});const u=ITe({collisionRect:r,droppableRects:a,droppableContainers:l});let d=UH(u,"id");if(d===(s==null?void 0:s.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),m=i.get(d),g=m?a.get(m.id):null,v=m==null?void 0:m.node.current;if(v&&g&&h&&m){const w=J_(v).some((R,j)=>o[j]!==R),x=iq(h,m),_=eAe(h,m),E=w||!x?{x:0,y:0}:{x:_?r.width-g.width:0,y:_?r.height-g.height:0},T={x:g.left,y:g.top};return E.x&&E.y?T:my(T,E)}}}};function iq(e,t){return!p1(e)||!p1(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function eAe(e,t){return!p1(e)||!p1(t)||!iq(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const tAe=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:s,transition:o,isDragging:l}=Yke({id:e,disabled:n}),u={transform:gy.Transform.toString(s),transition:o,zIndex:l?10:void 0,opacity:n?.5:1};return p.jsxs("div",{ref:i,style:u,...r,...a,className:vt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[p.jsx($Z,{className:vt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),p.jsx($t,{className:vt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},nAe=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAvailableModelListItems:a}=Hn(cn(m=>({setGlobalModelSortOrder:m.setGlobalModelSortOrder,dbProviderConfigs:m.dbProviderConfigs,globalModelSortOrder:m.globalModelSortOrder,isLoading:m.isLoading,getAvailableModelListItems:m.getAvailableModelListItems}))),[i,s]=C.useState(""),o=C.useMemo(()=>{const m=a(),g=new Map(m.map(_=>[_.id,_])),v=new Set;t.forEach(_=>{_.isEnabled&&_.enabledModels&&_.enabledModels.forEach(E=>{v.add(dl(_.id,E))})});const b=m.filter(_=>v.has(_.id)),w=[],x=new Set;return n.forEach(_=>{if(v.has(_)){const E=g.get(_);E&&!x.has(_)&&(w.push(E),x.add(_))}}),b.forEach(_=>{x.has(_.id)||(w.push(_),x.add(_.id))}),w},[t,n,a]),l=C.useMemo(()=>{if(!i.trim())return o;const m=i.toLowerCase();return o.filter(g=>g.name.toLowerCase().includes(m)||g.providerName.toLowerCase().includes(m)||g.id.toLowerCase().includes(m))},[o,i]),u=C.useMemo(()=>l.map(m=>m.id),[l]),d=C.useCallback(m=>{const{active:g,over:v}=m;if(v&&g.id!==v.id){const b=o.map(T=>T.id),w=g.id,x=v.id,_=b.indexOf(w),E=b.indexOf(x);if(_!==-1&&E!==-1){const T=e3(b,_,E);e(T)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[o,e]),h=ATe(WP(QR),WP(XR,{coordinateGetter:Qke}));return r?p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx($n,{className:"h-8 w-1/3"}),p.jsx($n,{className:"h-6 w-1/2"}),p.jsx($n,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),p.jsx(td,{}),p.jsxs("div",{className:"space-y-3",children:[p.jsx($t,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),p.jsxs("div",{className:"relative",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:m=>s(m.target.value),className:"pl-8 w-full",disabled:r})]}),p.jsx(Es,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?p.jsx(Rke,{sensors:h,collisionDetection:RTe,onDragEnd:d,children:p.jsx(Vke,{items:u,strategy:zke,children:l.map(m=>p.jsx(tAe,{id:m.id,name:`${m.name} (${m.providerName})`},m.id))})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},Iw=e=>{if(!e)return"N/A";const t=parseFloat(e);return isNaN(t)?"N/A":`$${(t/1e3).toFixed(4)} / 1K tokens`},Bs=(e,t,n=!1,r="secondary")=>t==null||String(t).trim()===""?null:p.jsxs(Wr,{children:[p.jsx(Mn,{className:"font-medium text-xs w-1/3 py-1.5 px-3",children:e}),p.jsx(Mn,{className:"text-xs py-1.5 px-3 break-all",children:n?p.jsx(dp,{variant:r,className:"text-xs",children:String(t)}):Array.isArray(t)?p.jsx("div",{className:"flex flex-wrap gap-1",children:t.map((a,i)=>p.jsx(dp,{variant:"outline",className:"text-xs",children:String(a)},i))}):String(t)})]}),rAe=({modelId:e})=>{var g,v,b,w,x,_,E,T,k,R,j,I;const{createAiModelConfig:t,dbProviderConfigs:n,dbApiKeys:r,updateProviderConfig:a,isLoading:i}=Hn(cn(P=>({createAiModelConfig:P.createAiModelConfig,dbProviderConfigs:P.dbProviderConfigs,dbApiKeys:P.dbApiKeys,updateProviderConfig:P.updateProviderConfig,isLoading:P.isLoading}))),s=C.useMemo(()=>{if(!e)return;const{providerId:P,modelId:O}=_o(e);if(!P||!O)return;const U=n.find(W=>W.id===P);if(!U)return;const M=r.find(W=>W.id===U.apiKeyId);return t(U,O,M==null?void 0:M.value)},[e,n,r,t]),o=s==null?void 0:s.metadata,l=C.useCallback(async()=>{if(!s||!e)return;const{providerId:P,modelId:O}=_o(e);if(!P||!O)return;const U=n.find(ie=>ie.id===P);if(!U){qe.error("Provider configuration not found.");return}const M=new Set(U.enabledModels??[]),W=M.has(O);W?M.delete(O):M.add(O);const V=Array.from(M);try{await a(U.id,{enabledModels:V}),qe.success(`Model "${s.name}" ${W?"disabled":"enabled"}.`)}catch{qe.error("Failed to update model status.")}},[s,e,n,a]);if(i)return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsx($n,{className:"h-8 w-3/4 flex-shrink-0"}),p.jsx($n,{className:"h-4 w-1/2 flex-shrink-0"}),p.jsxs("div",{className:"flex-grow space-y-2",children:[p.jsx($n,{className:"h-10 w-full"}),p.jsx($n,{className:"h-10 w-full"}),p.jsx($n,{className:"h-10 w-full"}),p.jsx($n,{className:"h-10 w-full"})]})]});if(!e)return p.jsxs("div",{className:"p-4 text-center text-muted-foreground h-full flex flex-col items-center justify-center",children:[p.jsx(Ec,{className:"mx-auto h-10 w-10 mb-2 text-amber-500"}),p.jsx("p",{className:"text-sm",children:'No model selected. Click a model in the "Configuration" or "Browse Models" tab to view its details.'})]});if(!s||!o)return p.jsxs("div",{className:"p-4 text-center text-destructive h-full flex flex-col items-center justify-center",children:[p.jsx(Ec,{className:"mx-auto h-10 w-10 mb-2"}),p.jsxs("p",{className:"text-sm",children:["Details not available for model: ",e,". It might be misconfigured or no longer available."]})]});const{providerId:u,modelId:d}=_o(e),h=n.find(P=>P.id===u),m=d!=null&&(h==null?void 0:h.isEnabled)&&((g=h==null?void 0:h.enabledModels)==null?void 0:g.includes(d))===!0;return p.jsxs("div",{className:"space-y-4 p-1 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center justify-between flex-shrink-0",children:[p.jsxs("h4",{className:"text-lg font-semibold text-card-foreground truncate",children:[s.name,p.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",s.providerName,")"]})]}),p.jsxs("div",{className:"flex items-center space-x-2",children:[p.jsx($t,{htmlFor:`enable-details-${d}`,className:"text-xs",children:m?"Enabled":"Disabled"}),p.jsx(Ki,{id:`enable-details-${d}`,checked:m,onCheckedChange:l,disabled:!(h!=null&&h.isEnabled),"aria-label":`Enable model ${s.name}`})]})]}),o.description&&p.jsx("p",{className:"text-xs text-muted-foreground flex-shrink-0",children:o.description}),p.jsx(Es,{className:"flex-grow border rounded-md bg-background/30",children:p.jsxs(Uf,{children:[p.jsxs(iTe,{className:"py-2 text-xs",children:["Model ID: ",o.id]}),p.jsxs(Vf,{children:[Bs("Context Length",((v=o.top_provider)==null?void 0:v.context_length)??o.context_length),Bs("Max Completion Tokens",(b=o.top_provider)==null?void 0:b.max_completion_tokens),Bs("Input Modalities",(w=o.architecture)==null?void 0:w.input_modalities),Bs("Output Modalities",(x=o.architecture)==null?void 0:x.output_modalities),Bs("Tokenizer",(_=o.architecture)==null?void 0:_.tokenizer,!0),Bs("Instruct Type",(E=o.architecture)==null?void 0:E.instruct_type,!0),Bs("Pricing (Prompt)",Iw((T=o.pricing)==null?void 0:T.prompt)),Bs("Pricing (Completion)",Iw((k=o.pricing)==null?void 0:k.completion)),Bs("Pricing (Image)",Iw((R=o.pricing)==null?void 0:R.image)),Bs("Pricing (Request)",Iw((j=o.pricing)==null?void 0:j.request)),Bs("Supported Parameters",o.supported_parameters),Bs("Moderated",(I=o.top_provider)!=null&&I.is_moderated?p.jsx(b1,{className:"h-4 w-4 text-green-500"}):"No")]})]})})]})},aAe=()=>{const{apiKeys:e,addApiKey:t,deleteApiKey:n,isLoading:r}=Hn(cn(m=>({apiKeys:m.dbApiKeys,addApiKey:m.addApiKey,deleteApiKey:m.deleteApiKey,isLoading:m.isLoading}))),[a,i]=C.useState(!1),[s,o]=C.useState(!1),[l,u]=C.useState({}),d=C.useCallback(async(m,g,v)=>{o(!0);try{await t(m,g,v),i(!1)}catch(b){console.error("Failed to add API key (from component):",b)}finally{o(!1)}},[t]),h=C.useCallback(async(m,g)=>{if(window.confirm(`Are you sure you want to delete the API key "${g}"? This will unlink it from any providers using it.`)){u(v=>({...v,[m]:!0}));try{await n(m)}catch(v){console.error("Failed to delete API key (from component):",v)}finally{u(v=>({...v,[m]:!1}))}}},[n]);return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"API Key Management"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Manage API keys for different providers. Keys are stored securely in your browser's local storage and never sent to any server other than the intended AI provider."})]}),!a&&p.jsxs(Rt,{onClick:()=>i(!0),variant:"outline",className:"w-full mb-4",disabled:r,children:[p.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add New API Key"]}),a&&p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Key"}),p.jsx(zz,{onSave:d,onCancel:()=>i(!1),isSaving:s})]}),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Stored API Keys"}),r&&!a?p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{className:"h-10 w-full"}),p.jsx($n,{className:"h-10 w-full"})]}):(e||[]).length===0&&!a?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No API keys stored yet."}):p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Uf,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Rr,{children:"Name"}),p.jsx(Rr,{children:"Provider Type"}),p.jsx(Rr,{children:"Created"}),p.jsx(Rr,{className:"text-right",children:"Actions"})]})}),p.jsx(Vf,{children:(e||[]).map(m=>{const g=l[m.id];return p.jsxs(Wr,{className:g?"opacity-50":"",children:[p.jsx(Mn,{className:"font-medium",children:m.name||"Unnamed Key"}),p.jsx(Mn,{children:m.providerId||"Unknown"}),p.jsx(Mn,{className:"text-xs text-muted-foreground",children:fk(new Date(m.createdAt),"PPp")}),p.jsx(Mn,{className:"text-right",children:p.jsx(Sn,{tooltipText:"Delete Key",onClick:()=>h(m.id,m.name||"Unnamed Key"),disabled:g,"aria-label":`Delete key ${m.name||"Unnamed Key"}`,icon:g?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Yi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})})]},m.id)})})]})})]})]})},iAe=gt.memo(aAe),sAe=({onSelectModelForDetails:e})=>{const{getAvailableModelListItems:t,isLoading:n,dbProviderConfigs:r}=Hn(cn(b=>({getAvailableModelListItems:b.getAvailableModelListItems,isLoading:b.isLoading,dbProviderConfigs:b.dbProviderConfigs}))),[a,i]=C.useState(""),[s,o]=C.useState(!1),[l,u]=C.useState(()=>new Set(r.map(b=>b.id))),d=C.useMemo(()=>t(),[t]);C.useEffect(()=>{u(new Set(r.map(b=>b.id)))},[r]);const h=C.useMemo(()=>{let b=d;if(l.size!==r.length&&(b=b.filter(w=>l.has(w.providerId))),a.trim()){const w=a.toLowerCase();b=b.filter(x=>x.name.toLowerCase().includes(w)||x.providerName.toLowerCase().includes(w)||x.id.toLowerCase().includes(w))}return b.sort((w,x)=>{const _=w.providerName.localeCompare(x.providerName);return _!==0?_:w.name.localeCompare(x.name)})},[d,a,l,r.length]),m=C.useCallback((b,w)=>{u(x=>{const _=new Set(x);return w?_.add(b):_.delete(b),_})},[]),g=b=>{e(b)},v=l.size!==r.length?1:0;return n?p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{className:"h-9 w-full"}),p.jsx($n,{className:"h-64 w-full"})]}):p.jsxs("div",{className:"space-y-3 h-full flex flex-col",children:[p.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[p.jsxs("div",{className:"relative flex-grow",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter models by name or provider...",value:a,onChange:b=>i(b.target.value),className:"pl-8 w-full h-9",disabled:n})]}),p.jsxs(Mo,{open:s,onOpenChange:o,children:[p.jsx(Oo,{asChild:!0,children:p.jsxs(Rt,{variant:"outline",size:"sm",className:"h-9 px-3 relative",disabled:n||r.length===0,children:[p.jsx(fA,{className:"h-4 w-4 mr-1"}),"Providers",v>0&&p.jsx("span",{className:"absolute -top-1 -right-1 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-semibold leading-none text-white bg-primary rounded-full",children:v})]})}),p.jsx(Po,{className:"w-60 p-0",children:p.jsxs("div",{className:"p-2 space-y-1",children:[p.jsx($t,{className:"text-xs px-2 font-semibold",children:"Filter by Provider"}),p.jsx(Es,{className:"h-48",children:r.map(b=>p.jsxs("div",{className:"flex items-center space-x-2 p-1.5 rounded hover:bg-muted",children:[p.jsx(Oc,{id:`provider-filter-${b.id}`,checked:l.has(b.id),onCheckedChange:w=>m(b.id,!!w)}),p.jsxs($t,{htmlFor:`provider-filter-${b.id}`,className:"text-sm font-normal cursor-pointer",children:[b.name," (",b.type,")"]})]},b.id))})]})})]})]}),p.jsx(Es,{className:"flex-grow border rounded-md",children:h.length>0?p.jsx("ul",{className:"p-1",children:h.map(b=>{var w;return p.jsx("li",{children:p.jsx(Un,{delayDuration:300,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx("button",{className:vt("w-full text-left p-1.5 rounded hover:bg-muted/50 flex justify-between items-center"),onClick:()=>g(b.id),children:p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm font-medium",children:b.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:b.providerName})]})})}),((w=b.metadataSummary)==null?void 0:w.description)&&p.jsx(Yn,{side:"bottom",align:"start",className:"max-w-xs",children:p.jsx("p",{children:b.metadataSummary.description})})]})})},b.id)})}):p.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground p-4",children:"No models match your filters."})})]})},oAe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:s,apiKeys:o,isLoading:l}=Hn(cn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[u,d]=C.useState(!1),h=()=>d(!0),m=C.useCallback(()=>d(!1),[]),g=C.useCallback(async b=>{await a(b)},[a]),v=C.useMemo(()=>s||[],[s]);return p.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),p.jsx("div",{className:"flex-shrink-0",children:u?p.jsx(Kz,{apiKeys:o||[],onAddProvider:t,onCancel:m}):p.jsxs(Rt,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[p.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),p.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:p.jsxs("div",{className:"space-y-2",children:[l&&!u?p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[p.jsx($n,{className:"h-24 w-full"}),p.jsx($n,{className:"h-24 w-full"}),p.jsx($n,{className:"h-24 w-full"})]}):p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>p.jsx(hTe,{provider:b,apiKeys:o||[],onUpdate:n,onDelete:r,onFetchModels:g,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!u&&p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},lAe=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=Hn(cn(s=>({selectedModelForDetails:s._selectedModelForDetails,setSelectedModelForDetails:s.setSelectedModelForDetails}))),[n,r]=C.useState("providers-config"),a=C.useCallback(s=>{t(s),s&&r("providers-details-current")},[t,r]),i=C.useMemo(()=>[{value:"providers-config",label:"Configuration",content:p.jsx(oAe,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:p.jsx(nAe,{})},{value:"api-keys",label:"API Keys",content:p.jsx(iAe,{})},{value:"providers-details-current",label:"Selected Model",content:p.jsx(rAe,{modelId:e})},{value:"providers-browse-all",label:"Browse Models",content:p.jsx(sAe,{onSelectModelForDetails:a})}],[e,a]);return p.jsx($c,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},cAe=gt.memo(lAe),Hg=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:s})=>p.jsxs("div",{className:vt("space-y-3",r),children:[p.jsxs("div",{children:[p.jsx("h3",{className:vt("text-lg font-medium",a),children:e}),t&&p.jsx("p",{className:vt("text-sm text-muted-foreground",i),children:t})]}),p.jsx("div",{className:vt(s),children:n})]}),uAe=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=ar(cn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return p.jsx("div",{className:"space-y-6 p-1",children:p.jsx(Hg,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"git-user-name",children:"Git User Name"}),p.jsx(xn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"git-user-email",children:"Git User Email"}),p.jsx(xn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},dAe=gt.memo(uAe),fAe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:s}=hn(cn(I=>({syncRepos:I.syncRepos,addSyncRepo:I.addSyncRepo,updateSyncRepo:I.updateSyncRepo,deleteSyncRepo:I.deleteSyncRepo,initializeOrSyncRepo:I.initializeOrSyncRepo,repoInitializationStatus:I.repoInitializationStatus,isLoading:I.isLoading}))),[o,l]=C.useState(!1),[u,d]=C.useState(null),[h,m]=C.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=C.useState(!1),[b,w]=C.useState({}),x=C.useCallback(()=>{m({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),_=C.useCallback((I,P)=>{m(O=>({...O,[I]:P}))},[]),E=C.useCallback(async()=>{var I,P,O,U;if(!((I=h.name)!=null&&I.trim())||!((P=h.remoteUrl)!=null&&P.trim())){qe.error("Repository Name and Remote URL are required.");return}v(!0);try{const M={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((O=h.branch)==null?void 0:O.trim())||"main",username:((U=h.username)==null?void 0:U.trim())||null,password:h.password||null};u?await n(u,M):await t(M),x()}catch(M){console.error("Failed to save sync repo:",M)}finally{v(!1)}},[h,u,t,n,x]),T=I=>{d(I.id),m({name:I.name,remoteUrl:I.remoteUrl,branch:I.branch||"main",username:I.username??"",password:I.password??""}),l(!1)},k=C.useCallback(async(I,P)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${P}"? This will unlink it from any conversations and remove the local copy.`)){w(O=>({...O,[I]:!0}));try{await r(I),u===I&&x()}catch(O){console.error("Failed to delete sync repo:",O)}finally{w(O=>({...O,[I]:!1}))}}},[r,u,x]),R=C.useCallback(async I=>{await a(I)},[a]),j=()=>{var I,P;return p.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx($t,{htmlFor:"repo-name",children:"Name"}),p.jsx(xn,{id:"repo-name",value:h.name||"",onChange:O=>_("name",O.target.value),placeholder:"e.g., My Backup",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-2",children:[p.jsx($t,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),p.jsx(xn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:O=>_("remoteUrl",O.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),p.jsxs("div",{className:"sm:col-span-1",children:[p.jsx($t,{htmlFor:"repo-branch",children:"Branch"}),p.jsx(xn,{id:"repo-branch",value:h.branch||"",onChange:O=>_("branch",O.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),p.jsxs("div",{className:"pt-2",children:[p.jsx($t,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),p.jsxs(MH,{variant:"destructive",className:"mt-2 mb-3",children:[p.jsx(bA,{className:"h-4 w-4"}),p.jsx(OH,{children:"Security Warning"}),p.jsx(PH,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"repo-username",children:"Username"}),p.jsx(xn,{id:"repo-username",value:h.username||"",onChange:O=>_("username",O.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),p.jsxs("div",{children:[p.jsx($t,{htmlFor:"repo-password",children:"Password / Token"}),p.jsx(xn,{id:"repo-password",type:"password",value:h.password||"",onChange:O=>_("password",O.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[p.jsx(Di,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((I=h.name)!=null&&I.trim())||!((P=h.remoteUrl)!=null&&P.trim()),type:"button",children:[g&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(kf,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),p.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!o&&!u&&p.jsxs(Rt,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:s,children:[p.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(o||u)&&j(),p.jsxs("div",{children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),s&&!o&&!u?p.jsxs("div",{className:"space-y-2",children:[p.jsx($n,{className:"h-10 w-full"}),p.jsx($n,{className:"h-10 w-full"}),p.jsx($n,{className:"h-10 w-full"})]}):e.length===0&&!o&&!u?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):p.jsxs("div",{className:"border rounded-md overflow-x-auto",children:[" ",p.jsxs(Uf,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Rr,{children:"Name"}),p.jsx(Rr,{className:"hidden md:table-cell",children:"Remote URL"})," ",p.jsx(Rr,{className:"hidden lg:table-cell",children:"Branch"})," ",p.jsx(Rr,{className:"hidden lg:table-cell",children:"Auth"})," ",p.jsx(Rr,{className:"text-right",children:"Actions"})]})}),p.jsx(Vf,{children:e.map(I=>{const P=b[I.id],O=u===I.id,U=!!I.username||!!I.password,M=i[I.id]||"idle",V=P||g||!!u||M==="syncing";let ie=null,ae="Initialize/Sync Repository";return M==="syncing"?(ie=p.jsx(Fn,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):M==="idle"?(ie=p.jsx(b1,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):M==="error"?(ie=p.jsx(Ec,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):ie=p.jsx(v1,{className:"h-4 w-4 mr-1"}),p.jsxs(Wr,{className:vt(O?"bg-muted/50":"",V&&!O?"opacity-70":""),children:[p.jsx(Mn,{className:"font-medium truncate max-w-[100px] sm:max-w-xs",children:I.name}),p.jsx(Mn,{className:"text-xs truncate max-w-[100px] sm:max-w-xs hidden md:table-cell",children:I.remoteUrl}),p.jsx(Mn,{className:"hidden lg:table-cell",children:I.branch||"main"}),p.jsx(Mn,{className:"text-xs hidden lg:table-cell",children:U?"Configured":"None"}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Sn,{tooltipText:ae,onClick:()=>R(I.id),"aria-label":`Initialize or Sync repo ${I.name}`,disabled:V,icon:ie,variant:"outline",className:"h-8 w-8"}),p.jsx(Sn,{tooltipText:"Edit",onClick:()=>T(I),"aria-label":`Edit repo ${I.name}`,disabled:V,icon:p.jsx(wy,{}),className:"h-8 w-8"}),p.jsx(Sn,{tooltipText:"Delete",onClick:()=>k(I.id,I.name),"aria-label":`Delete repo ${I.name}`,disabled:V,icon:P?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Yi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},I.id)})})]})]})]})]})},hAe=gt.memo(fAe),pAe=()=>{const e=C.useMemo(()=>[{value:"config",label:"User Config",content:p.jsx(dAe,{})},{value:"sync",label:"Sync Repositories",content:p.jsx(hAe,{})}],[]);return p.jsx($c,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},mAe=gt.memo(pAe),gAe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=C.useState((e==null?void 0:e.name)||""),[s,o]=C.useState((e==null?void 0:e.content)||""),[l,u]=C.useState((e==null?void 0:e.type)||"before");C.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.content)||""),u((e==null?void 0:e.type)||"before")},[e]);const d=C.useCallback(async()=>{if(!a.trim()||!s.trim()){qe.error("Rule Name and Content are required.");return}await n({name:a.trim(),content:s.trim(),type:l})},[a,s,l,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Rule":"Add New Rule"}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[p.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[p.jsx($t,{htmlFor:"rule-name",children:"Rule Name"}),p.jsx(xn,{id:"rule-name",value:a,onChange:h=>i(h.target.value),placeholder:"e.g., Always respond in JSON",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"rule-type",children:"Rule Type"}),p.jsxs(bc,{value:l,onValueChange:h=>u(h),disabled:t,children:[p.jsx(wc,{id:"rule-type",children:p.jsx(vc,{placeholder:"Select Type"})}),p.jsxs(xc,{children:[p.jsx(Sa,{value:"system",children:"System Prompt"}),p.jsx(Sa,{value:"before",children:"Before User Prompt"}),p.jsx(Sa,{value:"after",children:"After User Prompt"})]})]})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"rule-content",children:"Rule Content"}),p.jsx(yd,{id:"rule-content",value:s,onChange:h=>o(h.target.value),placeholder:"Enter the rule text to be injected...",required:!0,rows:4,disabled:t,className:"font-mono text-xs"})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(Di,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:d,disabled:t||!a.trim()||!s.trim(),type:"button",children:[t&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(kf,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Rule"]})]})]})},yAe=({rules:e,isLoading:t,isDeleting:n,onEdit:r,onDelete:a})=>{const i=s=>{window.confirm(`Are you sure you want to delete the rule "${s.name}"? This will also remove it from any tags.`)&&a(s.id,s.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Uf,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Rr,{children:"Name"}),p.jsx(Rr,{children:"Type"}),p.jsx(Rr,{children:"Content Preview"}),p.jsx(Rr,{className:"text-right",children:"Actions"})]})}),p.jsx(Vf,{children:t?p.jsxs(p.Fragment,{children:[p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx($n,{className:"h-10 w-full"})})}),p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx($n,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No rules defined yet."})}):e.map(s=>{const o=n[s.id];return p.jsxs(Wr,{children:[p.jsx(Mn,{className:"font-medium",children:s.name}),p.jsx(Mn,{className:"capitalize",children:s.type}),p.jsx(Mn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:s.content}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Sn,{tooltipText:"Edit Rule",onClick:()=>r(s),disabled:o,icon:p.jsx(wy,{}),className:"h-8 w-8","aria-label":`Edit rule ${s.name}`}),p.jsx(Sn,{tooltipText:"Delete Rule",onClick:()=>i(s),disabled:o,icon:o?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Yi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete rule ${s.name}`})]})]},s.id)})})]})})},bAe=()=>{const{rules:e,addRule:t,updateRule:n,deleteRule:r,isLoading:a}=Xs(cn(_=>({rules:_.rules,addRule:_.addRule,updateRule:_.updateRule,deleteRule:_.deleteRule,isLoading:_.isLoading}))),[i,s]=C.useState(!1),[o,l]=C.useState(null),[u,d]=C.useState(!1),[h,m]=C.useState({}),g=()=>{l(null),s(!0)},v=_=>{l(_),s(!0)},b=C.useCallback(()=>{s(!1),l(null),d(!1)},[]),w=C.useCallback(async _=>{d(!0);try{o?await n(o.id,_):await t(_),b()}catch{}finally{d(!1)}},[t,n,o,b]),x=C.useCallback(async _=>{m(E=>({...E,[_]:!0}));try{await r(_),(o==null?void 0:o.id)===_&&b()}catch{}finally{m(E=>({...E,[_]:!1}))}},[r,o,b]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Rules"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create reusable text snippets (rules) that can be automatically injected into prompts based on assigned tags. Rules can modify the system prompt, or be added before/after the user's input."})]}),!i&&p.jsxs(Rt,{onClick:g,variant:"outline",className:"w-full",disabled:a,children:[p.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add New Rule"]}),i&&p.jsx(gAe,{initialData:o??void 0,isSaving:u,onSave:w,onCancel:b}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Rules"}),p.jsx(yAe,{rules:e,isLoading:a,isDeleting:h,onEdit:v,onDelete:x})]})]})},vAe=({initialData:e,isSaving:t,onSave:n,onCancel:r})=>{const[a,i]=C.useState((e==null?void 0:e.name)||""),[s,o]=C.useState((e==null?void 0:e.description)||"");C.useEffect(()=>{i((e==null?void 0:e.name)||""),o((e==null?void 0:e.description)||"")},[e]);const l=C.useCallback(async()=>{if(!a.trim()){qe.error("Tag Name is required.");return}await n({name:a.trim(),description:(s==null?void 0:s.trim())||null})},[a,s,n]);return p.jsxs("div",{className:"space-y-4 border rounded-md p-4 bg-card shadow-md",children:[p.jsx("h4",{className:"font-semibold text-card-foreground",children:e!=null&&e.id?"Edit Tag":"Add New Tag"}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"tag-name",children:"Tag Name"}),p.jsx(xn,{id:"tag-name",value:a,onChange:u=>i(u.target.value),placeholder:"e.g., Code Generation, Summarization",required:!0,disabled:t})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"tag-description",children:"Description (Optional)"}),p.jsx(yd,{id:"tag-description",value:s||"",onChange:u=>o(u.target.value),placeholder:"Describe when to use this tag...",rows:2,disabled:t})]}),p.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[p.jsxs(Rt,{variant:"ghost",size:"sm",onClick:r,disabled:t,type:"button",children:[p.jsx(Di,{className:"h-4 w-4 mr-1"})," Cancel"]}),p.jsxs(Rt,{variant:"secondary",size:"sm",onClick:l,disabled:t||!a.trim(),type:"button",children:[t&&p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}),p.jsx(kf,{className:"h-4 w-4 mr-1"})," ",t?"Saving...":"Save Tag"]})]})]})},wAe=({tags:e,rulesByTagId:t,isLoading:n,isDeleting:r,onEdit:a,onDelete:i})=>{const s=o=>{window.confirm(`Are you sure you want to delete the tag "${o.name}"? This will remove it from all rules.`)&&i(o.id,o.name)};return p.jsx("div",{className:"border rounded-md overflow-hidden",children:p.jsxs(Uf,{children:[p.jsx(bm,{children:p.jsxs(Wr,{children:[p.jsx(Rr,{children:"Name"}),p.jsx(Rr,{children:"Description"}),p.jsx(Rr,{children:"Linked Rules"}),p.jsx(Rr,{className:"text-right",children:"Actions"})]})}),p.jsx(Vf,{children:n?p.jsxs(p.Fragment,{children:[p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx($n,{className:"h-10 w-full"})})}),p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,children:p.jsx($n,{className:"h-10 w-full"})})})]}):e.length===0?p.jsx(Wr,{children:p.jsx(Mn,{colSpan:4,className:"h-24 text-center text-muted-foreground",children:"No tags defined yet."})}):e.map(o=>{const l=r[o.id],u=t.get(o.id)||[];return p.jsxs(Wr,{children:[p.jsx(Mn,{className:"font-medium",children:o.name}),p.jsx(Mn,{className:"text-xs text-muted-foreground truncate max-w-xs",children:o.description||"-"}),p.jsx(Mn,{className:"text-xs",children:u.length>0?u.map(d=>d.name).join(", "):"None"}),p.jsxs(Mn,{className:"text-right space-x-1",children:[p.jsx(Sn,{tooltipText:"Edit Tag & Rules",onClick:()=>a(o),disabled:l,icon:p.jsx(wy,{}),className:"h-8 w-8","aria-label":`Edit tag ${o.name}`}),p.jsx(Sn,{tooltipText:"Delete Tag",onClick:()=>s(o),disabled:l,icon:l?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Yi,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":`Delete tag ${o.name}`})]})]},o.id)})})]})})},xAe=({tag:e,allRules:t,linkedRuleIds:n,onLinkChange:r,disabled:a=!1})=>{const[i,s]=C.useState(!1),[o,l]=C.useState(""),u=C.useMemo(()=>[...t].sort((v,b)=>v.name.localeCompare(b.name)),[t]),d=C.useMemo(()=>{const v=o.toLowerCase();return v?u.filter(b=>b.name.toLowerCase().includes(v)||b.content.toLowerCase().includes(v)||b.type.toLowerCase().includes(v)):u},[u,o]),h=C.useCallback(v=>{const b=n.has(v);r(e.id,v,!b),l("")},[n,r,e.id]),m=C.useCallback((v,b)=>{b.stopPropagation(),r(e.id,v,!1)},[r,e.id]),g=C.useMemo(()=>u.filter(v=>n.has(v.id)),[u,n]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs($t,{className:"font-medium",children:['Associated Rules for "',e.name,'"']}),p.jsxs(Mo,{open:i,onOpenChange:s,children:[p.jsx(Oo,{asChild:!0,children:p.jsxs(Rt,{variant:"outline",role:"combobox","aria-expanded":i,className:"w-full justify-between h-9",disabled:a||t.length===0,children:[p.jsx("span",{className:"truncate",children:g.length>0?`${g.length} rule(s) selected`:"Select rules..."}),p.jsx(y1,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),p.jsx(Po,{className:"w-[--radix-popover-trigger-width] p-0",children:p.jsxs(SH,{shouldFilter:!1,children:[p.jsx(EH,{placeholder:"Search rules...",value:o,onValueChange:l}),p.jsxs(CH,{children:[p.jsx(TH,{children:t.length===0?"No rules defined.":"No rules found."}),p.jsx(kH,{children:d.map(v=>{const b=n.has(v.id);return p.jsxs(AH,{value:v.id,onSelect:()=>h(v.id),className:"cursor-pointer",children:[p.jsx(Ga,{className:vt("mr-2 h-4 w-4",b?"opacity-100":"opacity-0")}),p.jsx("span",{className:"truncate",children:v.name}),p.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",v.type,")"]})]},v.id)})})]})]})})]}),g.length>0&&p.jsx("div",{className:"flex flex-wrap gap-1 pt-2",children:g.map(v=>p.jsxs(dp,{variant:"secondary",className:"flex items-center gap-1",children:[p.jsx("span",{className:"truncate",children:v.name}),p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-4 w-4 p-0 text-muted-foreground hover:text-destructive hover:bg-transparent",onClick:b=>m(v.id,b),disabled:a,"aria-label":`Unlink rule ${v.name}`,children:p.jsx(Di,{className:"h-3 w-3"})})]},v.id))})]})},_Ae=()=>{const{tags:e,rules:t,tagRuleLinks:n,addTag:r,updateTag:a,deleteTag:i,linkTagToRule:s,unlinkTagFromRule:o,getRulesForTag:l,isLoading:u}=Xs(cn(O=>({tags:O.tags,rules:O.rules,tagRuleLinks:O.tagRuleLinks,addTag:O.addTag,updateTag:O.updateTag,deleteTag:O.deleteTag,linkTagToRule:O.linkTagToRule,unlinkTagFromRule:O.unlinkTagFromRule,getRulesForTag:O.getRulesForTag,isLoading:O.isLoading}))),[d,h]=C.useState(!1),[m,g]=C.useState(null),[v,b]=C.useState(!1),[w,x]=C.useState({}),_=()=>{g(null),h(!0)},E=O=>{g(O),h(!0)},T=C.useCallback(()=>{h(!1),g(null),b(!1)},[]),k=C.useCallback(async O=>{b(!0);try{m?await a(m.id,O):await r(O),m||T()}catch{}finally{b(!1)}},[r,a,m,T]),R=C.useCallback(async O=>{x(U=>({...U,[O]:!0}));try{await i(O),(m==null?void 0:m.id)===O&&T()}catch{}finally{x(U=>({...U,[O]:!1}))}},[i,m,T]),j=C.useCallback(async(O,U,M)=>{try{M?await s(O,U):await o(O,U)}catch{}},[s,o]),I=C.useMemo(()=>{const O=new Map;return e.forEach(U=>{O.set(U.id,l(U.id))}),O},[e,l]),P=C.useMemo(()=>m?new Set(n.filter(O=>O.tagId===m.id).map(O=>O.ruleId)):new Set,[m,n]);return p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Manage Tags"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Create tags to group related rules. You can activate tags before sending a prompt to apply their associated rules."})]}),!d&&p.jsxs(Rt,{onClick:_,variant:"outline",className:"w-full",disabled:u,children:[p.jsx(Tf,{className:"h-4 w-4 mr-1"})," Add New Tag"]}),d&&p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p.jsx(vAe,{initialData:m??void 0,isSaving:v,onSave:k,onCancel:T}),m&&p.jsx(xAe,{tag:m,allRules:t,linkedRuleIds:P,onLinkChange:j,disabled:v})]}),p.jsx(td,{}),p.jsxs("div",{className:"pt-4",children:[p.jsx("h4",{className:"text-md font-medium mb-2",children:"Existing Tags"}),p.jsx(wAe,{tags:e,rulesByTagId:I,isLoading:u,isDeleting:w,onEdit:E,onDelete:R})]})]})},SAe=()=>{const e=C.useMemo(()=>[{value:"rules",label:"Rules",content:p.jsx(bAe,{})},{value:"tags",label:"Tags",content:p.jsx(_Ae,{})}],[]);return p.jsx($c,{tabs:e,defaultValue:"rules",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},EAe=({label:e,colorKey:t,value:n,onChange:r})=>{const[a,i]=C.useState(n??"");C.useEffect(()=>{i(n??"")},[n]);const s=()=>{r(t,a.trim()||null)},o=l=>{i(l.target.value)};return p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx($t,{htmlFor:`color-${t}`,className:"text-xs w-28 shrink-0",children:e}),p.jsx(xn,{id:`color-${t}`,type:"text",value:a,onChange:o,onBlur:s,className:"h-8 text-xs flex-grow",placeholder:"e.g., #ffffff or oklch(0.5 0.2 180)"}),p.jsx(xn,{type:"color",value:a!=null&&a.startsWith("#")?a:"#000000",onChange:l=>{i(l.target.value),r(t,l.target.value)},className:"h-8 w-10 p-1 border-none cursor-pointer bg-transparent","aria-label":`Pick ${e} color`})]})},jw=[{name:"Default Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-light.min.css"},{name:"A11y Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-a11y-dark.min.css"},{name:"Atom Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-atom-dark.min.css"},{name:"Atelier Sulphurpool Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-base16-ateliersulphurpool.light.min.css"},{name:"CB",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-cb.min.css"},{name:"Coldark Cold",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-cold.min.css"},{name:"Coldark Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coldark-dark.min.css"},{name:"Coy (No Shadow)",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-coy-without-shadows.min.css"},{name:"Darcula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-darcula.min.css"},{name:"Dracula",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-dracula.min.css"},{name:"Duotone Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-dark.min.css"},{name:"Duotone Earth",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-earth.min.css"},{name:"Duotone Forest",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-forest.min.css"},{name:"Duotone Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-light.min.css"},{name:"Duotone Sea",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-sea.min.css"},{name:"Duotone Space",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-duotone-space.min.css"},{name:"GH Colors",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-ghcolors.min.css"},{name:"Gruvbox Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-dark.min.css"},{name:"Gruvbox Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-gruvbox-light.min.css"},{name:"Holi",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-holi-theme.min.css"},{name:"Hopscotch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-hopscotch.min.css"},{name:"Lucario",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-lucario.min.css"},{name:"Material Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-dark.min.css"},{name:"Material Oceanic",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-material-oceanic.min.css"},{name:"Night Owl",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-night-owl.min.css"},{name:"Nord",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-nord.min.css"},{name:"One Dark",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-dark.min.css"},{name:"One Light",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-one-light.min.css"},{name:"Pojoaque",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-pojoaque.min.css"},{name:"Shades of Purple",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-shades-of-purple.min.css"},{name:"Solarized Dark Atom",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-solarized-dark-atom.min.css"},{name:"Synthwave '84",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-synthwave84.min.css"},{name:"VS",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vs.min.css"},{name:"VSC Dark Plus",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css"},{name:"Xonokai",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-xonokai.min.css"},{name:"Z-Touch",url:"https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.9.0/prism-z-touch.min.css"}],CAe=()=>{const{theme:e,setTheme:t,prismThemeUrl:n,setPrismThemeUrl:r,customFontFamily:a,setCustomFontFamily:i,customFontSize:s,setCustomFontSize:o,chatMaxWidth:l,setChatMaxWidth:u,customThemeColors:d,setCustomThemeColor:h,resetThemeSettings:m}=ar(cn(I=>({theme:I.theme,setTheme:I.setTheme,prismThemeUrl:I.prismThemeUrl,setPrismThemeUrl:I.setPrismThemeUrl,customFontFamily:I.customFontFamily,setCustomFontFamily:I.setCustomFontFamily,customFontSize:I.customFontSize,setCustomFontSize:I.setCustomFontSize,chatMaxWidth:I.chatMaxWidth,setChatMaxWidth:I.setChatMaxWidth,customThemeColors:I.customThemeColors,setCustomThemeColor:I.setCustomThemeColor,resetThemeSettings:I.resetThemeSettings}))),[g,v]=C.useState(s??16),[b,w]=C.useState(jw.some(I=>I.url===n)?"":n??"");C.useEffect(()=>{v(s??16)},[s]),C.useEffect(()=>{jw.some(I=>I.url===n)?w(""):w(n??"")},[n]);const x=C.useCallback(I=>{o(I[0])},[o]),_=()=>{window.confirm("Are you sure you want to reset all Theme settings to their defaults?")&&m()},E=I=>{r(I==="default"?null:I),I==="default"||!jw.some(O=>O.url===I)?w(I==="default"?"":I):w("")},T=I=>{const P=I.target.value.trim();w(P),r(P||null)},k=[{value:"max-w-3xl",label:"Very Small (3xl)"},{value:"max-w-4xl",label:"Small (4xl)"},{value:"max-w-5xl",label:"Medium (5xl)"},{value:"max-w-6xl",label:"Large (6xl)"},{value:"max-w-7xl",label:"Very Large (7xl)"},{value:"max-w-full",label:"Full Width"}],R=[{key:"background",label:"Background"},{key:"foreground",label:"Foreground"},{key:"card",label:"Card BG"},{key:"cardForeground",label:"Card FG"},{key:"popover",label:"Popover BG"},{key:"popoverForeground",label:"Popover FG"},{key:"primary",label:"Primary"},{key:"primaryForeground",label:"Primary FG"},{key:"secondary",label:"Secondary"},{key:"secondaryForeground",label:"Secondary FG"},{key:"muted",label:"Muted BG"},{key:"mutedForeground",label:"Muted FG"},{key:"accent",label:"Accent"},{key:"accentForeground",label:"Accent FG"},{key:"destructive",label:"Destructive"},{key:"destructiveForeground",label:"Destructive FG"},{key:"border",label:"Border"},{key:"input",label:"Input BG"},{key:"ring",label:"Ring (Focus)"},{key:"sidebar",label:"Sidebar BG"},{key:"sidebarForeground",label:"Sidebar FG"},{key:"sidebarPrimary",label:"Sidebar Primary"},{key:"sidebarPrimaryForeground",label:"Sidebar Primary FG"},{key:"sidebarAccent",label:"Sidebar Accent"},{key:"sidebarAccentForeground",label:"Sidebar Accent FG"},{key:"sidebarBorder",label:"Sidebar Border"},{key:"sidebarRing",label:"Sidebar Ring"},{key:"chart1",label:"Chart 1"},{key:"chart2",label:"Chart 2"},{key:"chart3",label:"Chart 3"},{key:"chart4",label:"Chart 4"},{key:"chart5",label:"Chart 5"}],j=n===null?"default":n;return p.jsxs("div",{className:"space-y-6 p-1",children:[p.jsx(Hg,{title:"Base Theme",description:"Select the overall look and feel.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx($t,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),p.jsxs(bc,{value:e??"system",onValueChange:I=>t(I),children:[p.jsx(wc,{id:"theme-select",className:"w-[180px]",children:p.jsx(vc,{placeholder:"Select theme"})}),p.jsxs(xc,{children:[p.jsx(Sa,{value:"light",children:"Default Light"}),p.jsx(Sa,{value:"dark",children:"Default Dark"}),p.jsx(Sa,{value:"system",children:"System"}),p.jsx(Sa,{value:"TijuLight",children:"Tiju Light"}),p.jsx(Sa,{value:"TijuDark",children:"Tiju Dark"}),p.jsx(Sa,{value:"custom",children:"User Custom"})]})]})]})}),p.jsxs(Hg,{title:"Font & Layout",description:"Customize typography and content width.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-4",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"custom-font-family",children:"Custom Font Family"}),p.jsx(xn,{id:"custom-font-family",value:a??"",onChange:I=>i(I.target.value||null),placeholder:"e.g., 'Inter', sans-serif (Leave blank for default)",className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Applies only when 'User Custom' theme is selected. Ensure the font is available (system or web font)."})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"custom-font-size",children:["Base Font Size (",g,"px)"]}),p.jsx(vo,{id:"custom-font-size",min:12,max:20,step:1,value:[g],onValueChange:I=>v(I[0]),onValueCommit:x}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Applies only when 'User Custom' theme is selected. Affects base text size (Default: 16px)."})]}),p.jsxs("div",{children:[p.jsx($t,{htmlFor:"chat-max-width",children:"Chat Content Max Width"}),p.jsxs(bc,{value:l??"max-w-7xl",onValueChange:I=>u(I||null),children:[p.jsx(wc,{id:"chat-max-width",className:"w-full mt-1",children:p.jsx(vc,{placeholder:"Select max width"})}),p.jsx(xc,{children:k.map(I=>p.jsx(Sa,{value:I.value,children:I.label},I.value))})]}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Controls the maximum width of the main chat message area."})]})]}),p.jsxs(Hg,{title:"Code Block Theme",description:"Customize syntax highlighting appearance.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card space-y-3",children:[p.jsx($t,{htmlFor:"prism-theme-select",children:"Select Theme or Enter URL"}),p.jsxs(bc,{value:j,onValueChange:E,children:[p.jsx(wc,{id:"prism-theme-select",className:"w-full",children:p.jsx(vc,{placeholder:"Select code theme..."})}),p.jsxs(xc,{children:[p.jsx(Sa,{value:"default",children:"Default (Matches Theme)"}),jw.map(I=>p.jsx(Sa,{value:I.url,children:I.name},I.url))]})]}),p.jsx(xn,{id:"prism-theme-url-custom",type:"url",placeholder:"Or paste custom theme URL here...",value:b,onChange:T,className:"mt-1"}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Select a preset theme or paste a URL to a PrismJS CSS file. Leave blank or select 'Default' to use themes matching light/dark mode."})]}),p.jsx(Hg,{title:"Custom Theme Colors",description:"Define custom colors. Applies only when 'User Custom' theme is selected. Use valid CSS color values (hex, rgb, oklch, etc.). Leave blank to use default light/dark theme colors.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-4 gap-y-2",children:R.map(({key:I,label:P})=>p.jsx(EAe,{label:P,colorKey:I,value:d==null?void 0:d[I],onChange:h},I))})}),p.jsx(td,{}),p.jsx("div",{className:"flex justify-end pt-4",children:p.jsxs(Rt,{variant:"outline",size:"sm",onClick:_,children:[p.jsx(yA,{className:"mr-2 h-4 w-4"}),"Reset Theme Settings"]})})]})},TAe=gt.memo(CAe),sq=C.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=ar(cn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=Lp(cn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=Qi(cn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[s,o]=C.useState(a||"general");C.useEffect(()=>{e&&o(a||"general")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{o(h)},d=C.useMemo(()=>{const h=[{value:"general",label:"General",content:p.jsx(QEe,{})},{value:"theme",label:"Theme",content:p.jsx(TAe,{})},{value:"providers",label:"Providers & Models",content:p.jsx(cAe,{})},...n?[{value:"assistant",label:"Assistant",content:p.jsx(tTe,{})}]:[],{value:"rules-tags",label:"Rules & Tags",content:p.jsx(SAe,{})},{value:"git",label:"Git",content:p.jsx(mAe,{})},{value:"data",label:"Data",content:p.jsx(rTe,{})},{value:"mods",label:"Mods",content:p.jsx(oTe,{})}],m=r.map(g=>({value:g.id,label:g.title,content:gt.isValidElement(g.component)?g.component:typeof g.component=="function"?p.jsx(g.component,{}):null}));return[...h,...m]},[n,r]);return p.jsx(B_,{open:e,onOpenChange:l,children:p.jsxs($_,{className:vt("w-[95vw] h-[90vh] flex flex-col p-0","sm:w-[90vw] sm:h-[85vh]","md:w-[85vw] md:max-w-[1200px] md:h-[80vh]","lg:w-[75vw]","min-h-[500px] max-h-[95vh]"),children:[p.jsxs(z_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsx(V_,{children:"Settings"}),p.jsx(H_,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),p.jsx($c,{tabs:d,initialValue:s,onValueChange:u,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"flex-grow overflow-y-auto pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsx(U_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:p.jsx(Rt,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});sq.displayName="SettingsModalComponent";const kAe=sq;function AAe(){const e=Sr.getState().registerChatControl,t=Qi.getState().toggleChatControlPanel,n=Qi.getState().setInitialSettingsTabs,r=()=>{const i=(s,o)=>{n(null,null),t("settingsModal",!0)};return p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:p.jsx(TT,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Settings"})]})})},a=()=>{const i=Qi.getState().isChatControlPanelOpen.settingsModal??!1,s=()=>t("settingsModal",!1);return p.jsx(kAe,{isOpen:i,onClose:s})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(r),iconRenderer:()=>gt.createElement(r),settingsRenderer:()=>gt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function NAe(){const e=Sr.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=Qi.getState();return p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?p.jsx(sY,{className:"h-4 w-4"}):p.jsx(aY,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>gt.createElement(t),iconRenderer:()=>gt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}const RAe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=ii(cn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),s=ar.getState(),[o,l]=C.useState(()=>ii.getState());C.useEffect(()=>{const d=h=>{l(m=>({...m,...h.params}))};return Et.on(St.PROMPT_PARAMS_CHANGED,d),()=>{Et.off(St.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:o.temperature??null,setTemperature:e,topP:o.topP??null,setTopP:t,maxTokens:o.maxTokens??null,setMaxTokens:n,topK:o.topK??null,setTopK:r,presencePenalty:o.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:o.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:s.temperature,defaultTopP:s.topP,defaultMaxTokens:s.maxTokens,defaultTopK:s.topK,defaultPresencePenalty:s.presencePenalty,defaultFrequencyPenalty:s.frequencyPenalty};return p.jsx(pH,{...u})},IAe=()=>{const[e,t]=C.useState(()=>On.getState().status==="streaming"),[n,r]=C.useState(!0);return C.useEffect(()=>{const a=o=>{t(o.status==="streaming")},i=o=>{var g;if(!o.modelId){r(!1);return}const{getSelectedModel:l}=Hn.getState(),u=l(),d=((g=u==null?void 0:u.metadata)==null?void 0:g.supported_parameters)??[],h=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],m=ar.getState().enableAdvancedSettings;r(m&&d.some(v=>h.includes(v)))},s=o=>{o.key==="enableAdvancedSettings"&&i({modelId:Hn.getState().selectedModelId})};return i({modelId:Hn.getState().selectedModelId}),Et.on(St.INTERACTION_STATUS_CHANGED,a),Et.on(St.MODEL_SELECTION_CHANGED,i),Et.on(St.SETTINGS_CHANGED,s),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,a),Et.off(St.MODEL_SELECTION_CHANGED,i),Et.off(St.SETTINGS_CHANGED,s)}},[]),n?p.jsxs(Mo,{children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oo,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-8 w-8",disabled:e,"aria-label":"Adjust Advanced Parameters",children:p.jsx(EY,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:"Advanced Parameters"})]})}),p.jsx(Po,{className:"w-auto p-0",align:"start",children:p.jsx(RAe,{})})]}):null};function jAe(){const e=Sr.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>gt.createElement(IAe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:s}=ii.getState(),o=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return o(l,"temperature",t),o(l,"top_p",n),o(l,"max_tokens",r),o(l,"top_k",a),o(l,"presence_penalty",i),o(l,"frequency_penalty",s),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const oq=20,DAe=oq*1024*1024,MAe=()=>{const e=C.useRef(null),t=ko.getState().addAttachedFile,[n,r]=C.useState(()=>On.getState().status==="streaming"),[a,i]=C.useState(!0);C.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var b,w;if(!h.modelId){i(!1);return}const{getSelectedModel:m}=Hn.getState(),g=m(),v=(w=(b=g==null?void 0:g.metadata)==null?void 0:b.architecture)==null?void 0:w.input_modalities;i(!v||v.some(x=>x!=="text"))};return d({modelId:Hn.getState().selectedModelId}),Et.on(St.INTERACTION_STATUS_CHANGED,u),Et.on(St.MODEL_SELECTION_CHANGED,d),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,u),Et.off(St.MODEL_SELECTION_CHANGED,d)}},[]);const s=C.useCallback(async u=>{const d=u.target.files;if(!d)return;const h=a;for(const m of Array.from(d)){if(m.size>DAe){qe.error(`File "${m.name}" exceeds the ${oq}MB limit.`);continue}const g=E1(m.name,m.type),v=m.type.startsWith("image/");if(!g&&!h){qe.warning(`File "${m.name}" (${m.type}) cannot be uploaded. The current model only supports text input.`);continue}try{let b={};if(g)b.contentText=await m.text();else if(v){const w=new FileReader,x=new Promise((E,T)=>{w.onload=()=>E(w.result),w.onerror=k=>T(k)});w.readAsDataURL(m);const _=await x;_&&_.includes(",")?b.contentBase64=_.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${m.name}`)}else h&&console.log(`File type ${m.type} (Name: ${m.name}) not directly processed for content storage, but model supports non-text.`);t({source:"direct",name:m.name,type:m.type||"application/octet-stream",size:m.size,...b})}catch(b){console.error(`Error processing file ${m.name}:`,b),qe.error(`Failed to process file "${m.name}": ${b instanceof Error?b.message:String(b)}`)}}u.target&&(u.target.value="")},[t,a]),o=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files (Text, Images, etc.)":"Attach Text Files";return p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:e,onChange:s,multiple:!0,className:"hidden",disabled:n}),p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{type:"button",variant:"ghost",size:"icon",onClick:o,disabled:n,className:"h-8 w-8","aria-label":l,children:p.jsx(gA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:l})]})})]})},OAe=()=>{const e=ko.getState().removeAttachedFile,[t,n]=C.useState(()=>ko.getState().attachedFilesMetadata),[r,a]=C.useState(()=>On.getState().status==="streaming");return C.useEffect(()=>{const i=o=>{n(o.files)},s=o=>{a(o.status==="streaming")};return Et.on(St.ATTACHED_FILES_CHANGED,i),Et.on(St.INTERACTION_STATUS_CHANGED,s),()=>{Et.off(St.ATTACHED_FILES_CHANGED,i),Et.off(St.INTERACTION_STATUS_CHANGED,s)}},[]),t.length===0?null:p.jsx("div",{className:vt("max-h-40 overflow-y-auto pr-1","flex flex-wrap gap-1"),children:t.map(i=>p.jsx(jB,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function PAe(){const e=Sr.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>gt.createElement(MAe),renderer:()=>gt.createElement(OAe)}),console.log("[Function] Registered Core File Attachment Control")}const FAe=()=>{const{toggleVfsModal:e,isVfsModalOpen:t}=Qi(cn(l=>({toggleVfsModal:l.toggleVfsModal,isVfsModalOpen:l.isVfsModalOpen}))),{enableVfs:n,selectedFileIds:r,nodes:a,clearSelection:i}=Co(cn(l=>({enableVfs:l.enableVfs,selectedFileIds:l.selectedFileIds,nodes:l.nodes,clearSelection:l.clearSelection}))),s=ko.getState().addAttachedFile,o=()=>{if(r.size===0){qe.info("No files selected in VFS to attach.");return}let l=0;r.forEach(u=>{const d=a[u];d&&d.type==="file"&&(s({source:"vfs",name:d.name,type:d.mimeType||"application/octet-stream",size:d.size,path:d.path}),l++)}),l>0&&(qe.success(`Attached ${l} file(s) from VFS to the next prompt.`),i(),e(!1))};return n?p.jsxs("div",{className:"flex items-center gap-1",children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:vt("h-8 w-8",t&&"bg-muted text-primary"),onClick:()=>e(),"aria-label":"Toggle Virtual File System",children:p.jsx(pA,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Virtual Filesystem"})]})}),r.size>0&&p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsxs(Rt,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:o,"aria-label":`Attach ${r.size} selected VFS file(s)`,children:[p.jsx(gA,{className:"h-4 w-4 mr-1"}),"Attach (",r.size,")"]})}),p.jsx(Yn,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},lq=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i,isMobile:s=!1})=>{const o=l=>{l.key==="Enter"?n():l.key==="Escape"&&r()};return s?p.jsxs("div",{className:"flex items-center gap-2 p-1",children:[p.jsx(hf,{className:"h-5 w-5 text-yellow-400 flex-shrink-0"}),p.jsx(xn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary flex-grow",placeholder:"New folder name",disabled:i}),p.jsxs("div",{className:"flex items-center gap-0.5 flex-shrink-0",children:[p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{className:"h-4 w-4"})}),p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(Di,{className:"h-4 w-4"})})]})]}):p.jsxs(Wr,{className:"bg-muted/30",children:[p.jsx(Mn,{className:"px-2 py-1"}),p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(hf,{className:"h-5 w-5 text-yellow-400"})}),p.jsx(Mn,{className:"py-1 px-2",colSpan:3,children:p.jsx(xn,{ref:a,value:e,onChange:l=>t(l.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),p.jsx(Mn,{className:"text-right pr-4 py-1",children:p.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Create (Enter)"})]})}),p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:p.jsx(Di,{className:"h-4 w-4"})})}),p.jsx(Yn,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var oA=["Enter"," "],LAe=["ArrowDown","PageUp","Home"],cq=["ArrowUp","PageDown","End"],BAe=[...LAe,...cq],$Ae={ltr:[...oA,"ArrowRight"],rtl:[...oA,"ArrowLeft"]},zAe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pb="Menu",[by,UAe,VAe]=C_(pb),[Hf,tS]=_i(pb,[VAe,rd,G_]),nS=rd(),uq=G_(),[HAe,qf]=Hf(pb),[qAe,mb]=Hf(pb),dq=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:s=!0}=e,o=nS(t),[l,u]=C.useState(null),d=C.useRef(!1),h=Ua(i),m=dm(a);return C.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),p.jsx(F1,{...o,children:p.jsx(HAe,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:p.jsx(qAe,{scope:t,onClose:C.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:s,children:r})})})};dq.displayName=pb;var GAe="MenuAnchor",t3=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=nS(n);return p.jsx(Ey,{...a,...r,ref:t})});t3.displayName=GAe;var n3="MenuPortal",[WAe,fq]=Hf(n3,{forceMount:void 0}),hq=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=qf(n3,t);return p.jsx(WAe,{scope:t,forceMount:n,children:p.jsx(Za,{present:n||i.open,children:p.jsx(Zp,{asChild:!0,container:a,children:r})})})};hq.displayName=n3;var Zs="MenuContent",[KAe,r3]=Hf(Zs),pq=C.forwardRef((e,t)=>{const n=fq(Zs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=qf(Zs,e.__scopeMenu),s=mb(Zs,e.__scopeMenu);return p.jsx(by.Provider,{scope:e.__scopeMenu,children:p.jsx(Za,{present:r||i.open,children:p.jsx(by.Slot,{scope:e.__scopeMenu,children:s.modal?p.jsx(ZAe,{...a,ref:t}):p.jsx(YAe,{...a,ref:t})})})})}),ZAe=C.forwardRef((e,t)=>{const n=qf(Zs,e.__scopeMenu),r=C.useRef(null),a=Nn(t,r);return C.useEffect(()=>{const i=r.current;if(i)return A_(i)},[]),p.jsx(a3,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Gt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),YAe=C.forwardRef((e,t)=>{const n=qf(Zs,e.__scopeMenu);return p.jsx(a3,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),XAe=Pu("MenuContent.ScrollLock"),a3=C.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:v,...b}=e,w=qf(Zs,n),x=mb(Zs,n),_=nS(n),E=uq(n),T=UAe(n),[k,R]=C.useState(null),j=C.useRef(null),I=Nn(t,j,w.onContentChange),P=C.useRef(0),O=C.useRef(""),U=C.useRef(0),M=C.useRef(null),W=C.useRef("right"),V=C.useRef(0),ie=v?ob:C.Fragment,ae=v?{as:XAe,allowPinchZoom:!0}:void 0,ne=te=>{var Ne,Se;const G=O.current+te,J=T().filter(ye=>!ye.disabled),Q=document.activeElement,se=(Ne=J.find(ye=>ye.ref.current===Q))==null?void 0:Ne.textValue,fe=J.map(ye=>ye.textValue),ve=cNe(fe,G,se),je=(Se=J.find(ye=>ye.textValue===ve))==null?void 0:Se.ref.current;(function ye(Fe){O.current=Fe,window.clearTimeout(P.current),Fe!==""&&(P.current=window.setTimeout(()=>ye(""),1e3))})(G),je&&setTimeout(()=>je.focus())};C.useEffect(()=>()=>window.clearTimeout(P.current),[]),T_();const q=C.useCallback(te=>{var J,Q;return W.current===((J=M.current)==null?void 0:J.side)&&dNe(te,(Q=M.current)==null?void 0:Q.area)},[]);return p.jsx(KAe,{scope:n,searchRef:O,onItemEnter:C.useCallback(te=>{q(te)&&te.preventDefault()},[q]),onItemLeave:C.useCallback(te=>{var G;q(te)||((G=j.current)==null||G.focus(),R(null))},[q]),onTriggerLeave:C.useCallback(te=>{q(te)&&te.preventDefault()},[q]),pointerGraceTimerRef:U,onPointerGraceIntentChange:C.useCallback(te=>{M.current=te},[]),children:p.jsx(ie,{...ae,children:p.jsx(sb,{asChild:!0,trapped:a,onMountAutoFocus:Gt(i,te=>{var G;te.preventDefault(),(G=j.current)==null||G.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:p.jsx(Gp,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:p.jsx(nH,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:R,onEntryFocus:Gt(l,te=>{x.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:p.jsx(L1,{role:"menu","aria-orientation":"vertical","data-state":Rq(w.open),"data-radix-menu-content":"",dir:x.dir,..._,...b,ref:I,style:{outline:"none",...b.style},onKeyDown:Gt(b.onKeyDown,te=>{const J=te.target.closest("[data-radix-menu-content]")===te.currentTarget,Q=te.ctrlKey||te.altKey||te.metaKey,se=te.key.length===1;J&&(te.key==="Tab"&&te.preventDefault(),!Q&&se&&ne(te.key));const fe=j.current;if(te.target!==fe||!BAe.includes(te.key))return;te.preventDefault();const je=T().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);cq.includes(te.key)&&je.reverse(),oNe(je)}),onBlur:Gt(e.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(P.current),O.current="")}),onPointerMove:Gt(e.onPointerMove,vy(te=>{const G=te.target,J=V.current!==te.clientX;if(te.currentTarget.contains(G)&&J){const Q=te.clientX>V.current?"right":"left";W.current=Q,V.current=te.clientX}}))})})})})})})});pq.displayName=Zs;var JAe="MenuGroup",i3=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{role:"group",...r,ref:t})});i3.displayName=JAe;var QAe="MenuLabel",mq=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{...r,ref:t})});mq.displayName=QAe;var m1="MenuItem",s8="menu.itemSelect",rS=C.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=C.useRef(null),s=mb(m1,e.__scopeMenu),o=r3(m1,e.__scopeMenu),l=Nn(t,i),u=C.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const m=new CustomEvent(s8,{bubbles:!0,cancelable:!0});h.addEventListener(s8,g=>r==null?void 0:r(g),{once:!0}),VF(h,m),m.defaultPrevented?u.current=!1:s.onClose()}};return p.jsx(gq,{...a,ref:l,disabled:n,onClick:Gt(e.onClick,d),onPointerDown:h=>{var m;(m=e.onPointerDown)==null||m.call(e,h),u.current=!0},onPointerUp:Gt(e.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:Gt(e.onKeyDown,h=>{const m=o.searchRef.current!=="";n||m&&h.key===" "||oA.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});rS.displayName=m1;var gq=C.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,s=r3(m1,n),o=uq(n),l=C.useRef(null),u=Nn(t,l),[d,h]=C.useState(!1),[m,g]=C.useState("");return C.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),p.jsx(by.ItemSlot,{scope:n,disabled:r,textValue:a??m,children:p.jsx(rH,{asChild:!0,...o,focusable:!r,children:p.jsx(an.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:Gt(e.onPointerMove,vy(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Gt(e.onPointerLeave,vy(v=>s.onItemLeave(v))),onFocus:Gt(e.onFocus,()=>h(!0)),onBlur:Gt(e.onBlur,()=>h(!1))})})})}),eNe="MenuCheckboxItem",yq=C.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return p.jsx(_q,{scope:e.__scopeMenu,checked:n,children:p.jsx(rS,{role:"menuitemcheckbox","aria-checked":g1(n)?"mixed":n,...a,ref:t,"data-state":o3(n),onSelect:Gt(a.onSelect,()=>r==null?void 0:r(g1(n)?!0:!n),{checkForDefaultPrevented:!1})})})});yq.displayName=eNe;var bq="MenuRadioGroup",[tNe,nNe]=Hf(bq,{value:void 0,onValueChange:()=>{}}),vq=C.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Ua(r);return p.jsx(tNe,{scope:e.__scopeMenu,value:n,onValueChange:i,children:p.jsx(i3,{...a,ref:t})})});vq.displayName=bq;var wq="MenuRadioItem",xq=C.forwardRef((e,t)=>{const{value:n,...r}=e,a=nNe(wq,e.__scopeMenu),i=n===a.value;return p.jsx(_q,{scope:e.__scopeMenu,checked:i,children:p.jsx(rS,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":o3(i),onSelect:Gt(r.onSelect,()=>{var s;return(s=a.onValueChange)==null?void 0:s.call(a,n)},{checkForDefaultPrevented:!1})})})});xq.displayName=wq;var s3="MenuItemIndicator",[_q,rNe]=Hf(s3,{checked:!1}),Sq=C.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=rNe(s3,n);return p.jsx(Za,{present:r||g1(i.checked)||i.checked===!0,children:p.jsx(an.span,{...a,ref:t,"data-state":o3(i.checked)})})});Sq.displayName=s3;var aNe="MenuSeparator",Eq=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return p.jsx(an.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Eq.displayName=aNe;var iNe="MenuArrow",Cq=C.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=nS(n);return p.jsx(B1,{...a,...r,ref:t})});Cq.displayName=iNe;var sNe="MenuSub",[lIe,Tq]=Hf(sNe),qg="MenuSubTrigger",kq=C.forwardRef((e,t)=>{const n=qf(qg,e.__scopeMenu),r=mb(qg,e.__scopeMenu),a=Tq(qg,e.__scopeMenu),i=r3(qg,e.__scopeMenu),s=C.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=C.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return C.useEffect(()=>d,[d]),C.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),l(null)}},[o,l]),p.jsx(t3,{asChild:!0,...u,children:p.jsx(gq,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":Rq(n.open),...e,ref:_c(t,a.onTriggerChange),onClick:h=>{var m;(m=e.onClick)==null||m.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Gt(e.onPointerMove,vy(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(i.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:Gt(e.onPointerLeave,vy(h=>{var g,v;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const b=(v=n.content)==null?void 0:v.dataset.side,w=b==="right",x=w?-5:5,_=m[w?"left":"right"],E=m[w?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:_,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x:_,y:m.bottom}],side:b}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:Gt(e.onKeyDown,h=>{var g;const m=i.searchRef.current!=="";e.disabled||m&&h.key===" "||$Ae[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});kq.displayName=qg;var Aq="MenuSubContent",Nq=C.forwardRef((e,t)=>{const n=fq(Zs,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=qf(Zs,e.__scopeMenu),s=mb(Zs,e.__scopeMenu),o=Tq(Aq,e.__scopeMenu),l=C.useRef(null),u=Nn(t,l);return p.jsx(by.Provider,{scope:e.__scopeMenu,children:p.jsx(Za,{present:r||i.open,children:p.jsx(by.Slot,{scope:e.__scopeMenu,children:p.jsx(a3,{id:o.contentId,"aria-labelledby":o.triggerId,...a,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;s.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:Gt(e.onFocusOutside,d=>{d.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:Gt(e.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:Gt(e.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=zAe[s.dir].includes(d.key);h&&m&&(i.onOpenChange(!1),(g=o.trigger)==null||g.focus(),d.preventDefault())})})})})})});Nq.displayName=Aq;function Rq(e){return e?"open":"closed"}function g1(e){return e==="indeterminate"}function o3(e){return g1(e)?"indeterminate":e?"checked":"unchecked"}function oNe(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function lNe(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function cNe(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let s=lNe(e,Math.max(i,0));a.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function uNe(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,s=t.length-1;i<t.length;s=i++){const o=t[i],l=t[s],u=o.x,d=o.y,h=l.x,m=l.y;d>r!=m>r&&n<(h-u)*(r-d)/(m-d)+u&&(a=!a)}return a}function dNe(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return uNe(n,t)}function vy(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Iq=dq,jq=t3,Dq=hq,Mq=pq,Oq=i3,Pq=mq,Fq=rS,Lq=yq,Bq=vq,$q=xq,zq=Sq,Uq=Eq,Vq=Cq,Hq=kq,qq=Nq,l3="ContextMenu",[fNe,cIe]=_i(l3,[tS]),Li=tS(),[hNe,Gq]=fNe(l3),Wq=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[s,o]=C.useState(!1),l=Li(t),u=Ua(r),d=C.useCallback(h=>{o(h),u(h)},[u]);return p.jsx(hNe,{scope:t,open:s,onOpenChange:d,modal:i,children:p.jsx(Iq,{...l,dir:a,open:s,onOpenChange:d,modal:i,children:n})})};Wq.displayName=l3;var Kq="ContextMenuTrigger",Zq=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=Gq(Kq,n),s=Li(n),o=C.useRef({x:0,y:0}),l=C.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...o.current})}),u=C.useRef(0),d=C.useCallback(()=>window.clearTimeout(u.current),[]),h=m=>{o.current={x:m.clientX,y:m.clientY},i.onOpenChange(!0)};return C.useEffect(()=>d,[d]),C.useEffect(()=>void(r&&d()),[r,d]),p.jsxs(p.Fragment,{children:[p.jsx(jq,{...s,virtualRef:l}),p.jsx(an.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Gt(e.onContextMenu,m=>{d(),h(m),m.preventDefault()}),onPointerDown:r?e.onPointerDown:Gt(e.onPointerDown,Dw(m=>{d(),u.current=window.setTimeout(()=>h(m),700)})),onPointerMove:r?e.onPointerMove:Gt(e.onPointerMove,Dw(d)),onPointerCancel:r?e.onPointerCancel:Gt(e.onPointerCancel,Dw(d)),onPointerUp:r?e.onPointerUp:Gt(e.onPointerUp,Dw(d))})]})});Zq.displayName=Kq;var pNe="ContextMenuPortal",Yq=e=>{const{__scopeContextMenu:t,...n}=e,r=Li(t);return p.jsx(Dq,{...r,...n})};Yq.displayName=pNe;var Xq="ContextMenuContent",Jq=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Gq(Xq,n),i=Li(n),s=C.useRef(!1);return p.jsx(Mq,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:o=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,o),!o.defaultPrevented&&s.current&&o.preventDefault(),s.current=!1},onInteractOutside:o=>{var l;(l=e.onInteractOutside)==null||l.call(e,o),!o.defaultPrevented&&!a.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Jq.displayName=Xq;var mNe="ContextMenuGroup",gNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Oq,{...a,...r,ref:t})});gNe.displayName=mNe;var yNe="ContextMenuLabel",bNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Pq,{...a,...r,ref:t})});bNe.displayName=yNe;var vNe="ContextMenuItem",Qq=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Fq,{...a,...r,ref:t})});Qq.displayName=vNe;var wNe="ContextMenuCheckboxItem",xNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Lq,{...a,...r,ref:t})});xNe.displayName=wNe;var _Ne="ContextMenuRadioGroup",SNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Bq,{...a,...r,ref:t})});SNe.displayName=_Ne;var ENe="ContextMenuRadioItem",CNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx($q,{...a,...r,ref:t})});CNe.displayName=ENe;var TNe="ContextMenuItemIndicator",kNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(zq,{...a,...r,ref:t})});kNe.displayName=TNe;var ANe="ContextMenuSeparator",eG=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Uq,{...a,...r,ref:t})});eG.displayName=ANe;var NNe="ContextMenuArrow",RNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Vq,{...a,...r,ref:t})});RNe.displayName=NNe;var INe="ContextMenuSubTrigger",jNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(Hq,{...a,...r,ref:t})});jNe.displayName=INe;var DNe="ContextMenuSubContent",MNe=C.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Li(n);return p.jsx(qq,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});MNe.displayName=DNe;function Dw(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var ONe=Wq,PNe=Zq,FNe=Yq,LNe=Jq,BNe=Qq,$Ne=eG;function o8({...e}){return p.jsx(ONe,{"data-slot":"context-menu",...e})}function l8({...e}){return p.jsx(PNe,{"data-slot":"context-menu-trigger",...e})}function c8({className:e,...t}){return p.jsx(FNe,{children:p.jsx(LNe,{"data-slot":"context-menu-content",className:vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function gs({className:e,inset:t,variant:n="default",...r}){return p.jsx(BNe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:vt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function u8({className:e,...t}){return p.jsx($Ne,{"data-slot":"context-menu-separator",className:vt("bg-border -mx-1 my-1 h-px",e),...t})}const zNe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:m,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:w,handleGitPull:x,handleGitCommit:_,handleGitPush:E,handleGitStatus:T})=>{const k=e.type==="folder",R=U=>{U.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||t||i||(k?o(e):l(!n,e.id))},j=U=>{U.key==="Enter"?h():U.key==="Escape"&&d()},I=k?r?B8:hf:L8,P=k?r?"text-green-400":"text-yellow-400":"text-blue-400",O=p.jsxs(Wr,{className:vt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed",!k&&"cursor-pointer"),onClick:R,onDoubleClick:()=>!i&&!t&&o(e),children:[p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(Oc,{checked:n,onCheckedChange:U=>l(!!U,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||k})}),p.jsx(Mn,{className:"px-2 py-1",children:p.jsx(I,{className:vt("h-5 w-5",P)})}),p.jsx(Mn,{className:"py-1 px-2",children:t?p.jsx(xn,{ref:b,value:a,onChange:U=>v(U.target.value),onBlur:h,onKeyDown:j,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:U=>U.stopPropagation(),disabled:i}):p.jsx("span",{className:vt("truncate",k&&"cursor-pointer hover:underline"),title:e.name,onClick:U=>{k&&(U.stopPropagation(),o(e))},children:e.name})}),p.jsx(Mn,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?P0(e.size):""}),p.jsx(Mn,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),p.jsx(Mn,{className:"text-right pr-4 py-1",children:p.jsx("div",{className:vt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?p.jsxs(p.Fragment,{children:[p.jsx(Sn,{tooltipText:"Save (Enter)",onClick:U=>{U.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),p.jsx(Sn,{tooltipText:"Cancel (Esc)",onClick:U=>{U.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:p.jsx(Di,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):p.jsxs(p.Fragment,{children:[p.jsx(Sn,{tooltipText:"Rename",onClick:U=>{U.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||s,icon:p.jsx(Kg,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Sn,{tooltipText:k?"Download folder (.zip)":"Download file",onClick:U=>{U.stopPropagation(),m(e)},"aria-label":k?"Download folder as ZIP":"Download file",disabled:i,icon:p.jsx(cf,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),p.jsx(Sn,{tooltipText:"Delete",onClick:U=>{U.stopPropagation(),g(e)},"aria-label":`Delete ${k?"folder":"file"}`,disabled:i,icon:p.jsx(Yi,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return k?p.jsxs(o8,{children:[p.jsx(l8,{disabled:t||i,asChild:!0,children:O}),p.jsxs(c8,{children:[p.jsx(gs,{onSelect:()=>o(e),disabled:t||i,children:"Open Folder"}),p.jsx(u8,{}),r?p.jsxs(p.Fragment,{children:[p.jsxs(gs,{onSelect:()=>x(e.path),disabled:i,children:[p.jsx(z8,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),p.jsxs(gs,{onSelect:()=>_(e.path),disabled:i,children:[p.jsx($8,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),p.jsxs(gs,{onSelect:()=>E(e.path),disabled:i,children:[p.jsx(hA,{className:"mr-2 h-4 w-4"}),"Git Push"]}),p.jsxs(gs,{onSelect:()=>T(e.path),disabled:i,children:[p.jsx(U8,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):p.jsxs(gs,{onSelect:()=>w(e.path),disabled:i,children:[p.jsx(Fu,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),p.jsx(u8,{}),p.jsxs(gs,{onSelect:()=>u(e),disabled:i,children:[p.jsx(Kg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(gs,{onSelect:()=>m(e),disabled:i,children:[p.jsx(cf,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),p.jsxs(gs,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(Yi,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):p.jsxs(o8,{children:[p.jsx(l8,{disabled:t||i,asChild:!0,children:O}),p.jsxs(c8,{children:[p.jsxs(gs,{onSelect:()=>l(!n,e.id),disabled:i,children:[n?"Deselect":"Select"," File"]}),p.jsxs(gs,{onSelect:()=>u(e),disabled:i,children:[p.jsx(Kg,{className:"mr-2 h-4 w-4"}),"Rename"]}),p.jsxs(gs,{onSelect:()=>m(e),disabled:i,children:[p.jsx(cf,{className:"mr-2 h-4 w-4"}),"Download File"]}),p.jsxs(gs,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[p.jsx(Yi,{className:"mr-2 h-4 w-4"}),"Delete File"]})]})]},e.id)},UNe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:w,setNewFolderName:x,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:T,handleGitInit:k,handleGitPull:R,handleGitCommit:j,handleGitPush:I,handleGitStatus:P})=>{const O=C.useMemo(()=>e,[e]);return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):p.jsx("div",{className:"relative h-full",children:p.jsxs(Uf,{className:"w-full text-sm",children:[p.jsx(bm,{className:"sticky top-0 bg-card z-10",children:p.jsxs(Wr,{className:"hover:bg-card",children:[p.jsx(Rr,{className:"w-[40px] px-2"}),p.jsx(Rr,{className:"w-[40px] px-2"}),p.jsx(Rr,{children:"Name"}),p.jsx(Rr,{className:"w-[100px] text-right",children:"Size"}),p.jsx(Rr,{className:"w-[150px] text-right",children:"Modified"}),p.jsx(Rr,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),p.jsxs(Vf,{children:[r&&p.jsx(lq,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s}),O.map(U=>{const M=t===U.path,W=i.has(U.id),V=T[U.path]??!1;return p.jsx(zNe,{entry:U,isEditingThis:M,isChecked:W,isGitRepo:V,newName:M?n:"",isOperationLoading:s,creatingFolder:r,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:w,renameInputRef:_,handleGitInit:k,handleGitPull:R,handleGitCommit:j,handleGitPush:I,handleGitStatus:P},U.id)}),e.length===0&&!r&&!s&&p.jsx(Wr,{children:p.jsx(Mn,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},VNe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:s,handleNavigateUp:o,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:m,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:w,archiveInputRef:x,handleFileChange:_,handleArchiveChange:E})=>p.jsxs(p.Fragment,{children:[p.jsx("input",{type:"file",ref:b,onChange:_,className:"hidden",multiple:!0,disabled:t}),p.jsx("input",{type:"file",ref:w,onChange:_,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),p.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),p.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[p.jsx(Rt,{variant:"ghost",size:"icon",onClick:T=>{T.preventDefault(),T.stopPropagation(),s()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:p.jsx(VZ,{className:"h-4 w-4"})}),p.jsx(Rt,{variant:"ghost",size:"icon",onClick:T=>{T.preventDefault(),T.stopPropagation(),o()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:p.jsx(jZ,{className:"h-4 w-4"})}),p.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[150px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),p.jsx("div",{className:"flex-grow"}),p.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap justify-end",children:[" ",p.jsx(Rt,{variant:"ghost",size:"icon",onClick:T=>{T.preventDefault(),T.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(v1,{className:"h-4 w-4"})}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:T=>{T.preventDefault(),T.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(dA,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:T=>{T.preventDefault(),T.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(P8,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Files"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:T=>{T.preventDefault(),T.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(hf,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Folder"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:T=>{T.preventDefault(),T.stopPropagation(),m()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(gZ,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"ZIP"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:T=>{T.preventDefault(),T.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(Fu,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Clone"})," "]}),p.jsxs(Rt,{variant:"outline",size:"sm",onClick:T=>{T.preventDefault(),T.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(OK,{className:"h-4 w-4 mr-1"}),p.jsx("span",{className:"hidden sm:inline",children:"Export"})," "]})]})]})]}),tG=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:s,isSubmitting:o,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async m=>{m==null||m.preventDefault(),!(o||l)&&await s()};return p.jsx(B_,{open:e,onOpenChange:t,children:p.jsxs($_,{className:vt(u),children:[p.jsxs(z_,{children:[p.jsx(V_,{children:n}),r&&p.jsx(H_,{children:r})]}),p.jsx("div",{className:vt("py-4",d),children:a}),p.jsxs(U_,{children:[p.jsx(kEe,{asChild:!0,children:p.jsx(Rt,{variant:"outline",disabled:o,children:"Cancel"})}),p.jsxs(Rt,{onClick:h,disabled:o||l,children:[o&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Submitting...":i]})]})]})})},HNe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:s,onSubmitClone:o,currentPath:l})=>p.jsx(tG,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:p.jsxs(p.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",p.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:o,isSubmitting:s,submitDisabled:!n.trim(),children:p.jsxs("div",{className:"grid gap-4",children:[p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx($t,{htmlFor:"clone-url",className:"text-right",children:"URL"}),p.jsx(xn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:s})]}),p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx($t,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),p.jsx(xn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:s})]})]})}),qNe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:s})=>p.jsx(tG,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:p.jsxs(p.Fragment,{children:["Enter a commit message for the changes in ",p.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:s,isSubmitting:i,submitDisabled:!r.trim(),children:p.jsx("div",{className:"grid gap-4",children:p.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[p.jsx($t,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),p.jsx(xn,{id:"commit-msg",value:r,onChange:o=>a(o.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})});var aS="DropdownMenu",[GNe,uIe]=_i(aS,[tS]),Bi=tS(),[WNe,nG]=GNe(aS),rG=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:a,defaultOpen:i,onOpenChange:s,modal:o=!0}=e,l=Bi(t),u=C.useRef(null),[d,h]=Io({prop:a,defaultProp:i??!1,onChange:s,caller:aS});return p.jsx(WNe,{scope:t,triggerId:Ha(),triggerRef:u,contentId:Ha(),open:d,onOpenChange:h,onOpenToggle:C.useCallback(()=>h(m=>!m),[h]),modal:o,children:p.jsx(Iq,{...l,open:d,onOpenChange:h,dir:r,modal:o,children:n})})};rG.displayName=aS;var aG="DropdownMenuTrigger",iG=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...a}=e,i=nG(aG,n),s=Bi(n);return p.jsx(jq,{asChild:!0,...s,children:p.jsx(an.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...a,ref:_c(t,i.triggerRef),onPointerDown:Gt(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:Gt(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});iG.displayName=aG;var KNe="DropdownMenuPortal",sG=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Bi(t);return p.jsx(Dq,{...r,...n})};sG.displayName=KNe;var oG="DropdownMenuContent",lG=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=nG(oG,n),i=Bi(n),s=C.useRef(!1);return p.jsx(Mq,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...r,ref:t,onCloseAutoFocus:Gt(e.onCloseAutoFocus,o=>{var l;s.current||(l=a.triggerRef.current)==null||l.focus(),s.current=!1,o.preventDefault()}),onInteractOutside:Gt(e.onInteractOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!a.modal||d)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lG.displayName=oG;var ZNe="DropdownMenuGroup",YNe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Oq,{...a,...r,ref:t})});YNe.displayName=ZNe;var XNe="DropdownMenuLabel",JNe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Pq,{...a,...r,ref:t})});JNe.displayName=XNe;var QNe="DropdownMenuItem",cG=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Fq,{...a,...r,ref:t})});cG.displayName=QNe;var eRe="DropdownMenuCheckboxItem",tRe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Lq,{...a,...r,ref:t})});tRe.displayName=eRe;var nRe="DropdownMenuRadioGroup",rRe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Bq,{...a,...r,ref:t})});rRe.displayName=nRe;var aRe="DropdownMenuRadioItem",iRe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx($q,{...a,...r,ref:t})});iRe.displayName=aRe;var sRe="DropdownMenuItemIndicator",oRe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(zq,{...a,...r,ref:t})});oRe.displayName=sRe;var lRe="DropdownMenuSeparator",uG=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Uq,{...a,...r,ref:t})});uG.displayName=lRe;var cRe="DropdownMenuArrow",uRe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Vq,{...a,...r,ref:t})});uRe.displayName=cRe;var dRe="DropdownMenuSubTrigger",fRe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(Hq,{...a,...r,ref:t})});fRe.displayName=dRe;var hRe="DropdownMenuSubContent",pRe=C.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,a=Bi(n);return p.jsx(qq,{...a,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pRe.displayName=hRe;var mRe=rG,gRe=iG,yRe=sG,bRe=lG,vRe=cG,wRe=uG;function xRe({...e}){return p.jsx(mRe,{"data-slot":"dropdown-menu",...e})}function _Re({...e}){return p.jsx(gRe,{"data-slot":"dropdown-menu-trigger",...e})}function SRe({className:e,sideOffset:t=4,...n}){return p.jsx(yRe,{children:p.jsx(bRe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:vt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function ol({className:e,inset:t,variant:n="default",...r}){return p.jsx(vRe,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:vt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function d8({className:e,...t}){return p.jsx(wRe,{"data-slot":"dropdown-menu-separator",className:vt("bg-border -mx-1 my-1 h-px",e),...t})}const ERe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:s,handleNavigate:o,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:m,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:w,setNewFolderName:x,renameInputRef:_,newFolderInputRef:E,gitRepoStatus:T,handleGitInit:k,handleGitPull:R,handleGitCommit:j,handleGitPush:I,handleGitStatus:P})=>{const O=U=>{U.key==="Enter"?h():U.key==="Escape"&&d()};return s&&e.length===0&&!r?p.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground p-4",children:"Loading..."}):p.jsxs("div",{className:"p-2 space-y-1",children:[r&&p.jsx("div",{className:"border rounded-md p-2 bg-muted/30",children:p.jsx(lq,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:m,newFolderInputRef:E,isOperationLoading:s,isMobile:!0})}),e.map(U=>{const M=t===U.path,W=i.has(U.id),V=T[U.path]??!1,ie=U.type==="folder",ae=ie?V?B8:hf:L8,ne=ie?V?"text-green-400":"text-yellow-400":"text-blue-400";return p.jsxs("div",{className:vt("flex items-center justify-between p-2 border rounded-md",M&&"bg-muted ring-1 ring-primary",s&&"opacity-70 cursor-not-allowed",!M&&"hover:bg-muted/50",!M&&"cursor-pointer"),onClick:()=>{M||s||(ie?o(U):l(!W,U.id))},children:[p.jsxs("div",{className:"flex items-center gap-2 flex-grow min-w-0",children:[!ie&&p.jsx(Oc,{checked:W,onCheckedChange:q=>l(!!q,U.id),"aria-label":`Select ${U.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground flex-shrink-0",disabled:s,onClick:q=>q.stopPropagation()}),ie&&p.jsx("div",{className:"w-6 flex-shrink-0"}),p.jsx(ae,{className:vt("h-5 w-5 flex-shrink-0",ne)}),p.jsxs("div",{className:"flex flex-col min-w-0 flex-grow",children:[M?p.jsx(xn,{ref:_,value:n,onChange:q=>w(q.target.value),onBlur:h,onKeyDown:O,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:q=>q.stopPropagation(),disabled:s}):p.jsx("span",{className:"text-sm font-medium truncate",title:U.name,children:U.name}),p.jsx("span",{className:"text-xs text-muted-foreground",children:U.type==="file"&&U.size!==void 0?P0(U.size):U.type==="folder"?V?"Git Repository":"Folder":""})]})]}),p.jsx("div",{className:"flex items-center flex-shrink-0 ml-2",children:M?p.jsxs(p.Fragment,{children:[p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-green-500 hover:text-green-600",onClick:q=>{q.stopPropagation(),h()},disabled:s||!n.trim(),"aria-label":"Save name",children:s?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Ga,{className:"h-4 w-4"})}),p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7 text-muted-foreground hover:text-foreground",onClick:q=>{q.stopPropagation(),d()},disabled:s,"aria-label":"Cancel edit",children:p.jsx(Di,{className:"h-4 w-4"})})]}):p.jsxs(xRe,{children:[p.jsx(_Re,{asChild:!0,children:p.jsx(Rt,{variant:"ghost",size:"icon",className:"h-7 w-7",onClick:q=>q.stopPropagation(),disabled:s,"aria-label":"More actions",children:p.jsx(pZ,{className:"h-4 w-4"})})}),p.jsxs(SRe,{align:"end",onClick:q=>q.stopPropagation(),children:[ie&&p.jsx(ol,{onSelect:()=>o(U),children:"Open Folder"}),!ie&&p.jsxs(ol,{onSelect:()=>l(!W,U.id),children:[W?"Deselect":"Select"," File"]}),p.jsxs(ol,{onSelect:()=>u(U),children:[p.jsx(Kg,{className:"mr-2 h-4 w-4"})," Rename"]}),p.jsxs(ol,{onSelect:()=>v(U),children:[p.jsx(cf,{className:"mr-2 h-4 w-4"})," Download"," ",ie?"as ZIP":""]}),ie&&p.jsx(d8,{}),ie&&V&&p.jsxs(p.Fragment,{children:[p.jsxs(ol,{onSelect:()=>R(U.path),children:[p.jsx(z8,{className:"mr-2 h-4 w-4"})," Git Pull"]}),p.jsxs(ol,{onSelect:()=>j(U.path),children:[p.jsx($8,{className:"mr-2 h-4 w-4"})," Git Commit..."]}),p.jsxs(ol,{onSelect:()=>I(U.path),children:[p.jsx(hA,{className:"mr-2 h-4 w-4"})," Git Push"]}),p.jsxs(ol,{onSelect:()=>P(U.path),children:[p.jsx(U8,{className:"mr-2 h-4 w-4"})," Git Status"]})]}),ie&&!V&&p.jsxs(ol,{onSelect:()=>k(U.path),children:[p.jsx(Fu,{className:"mr-2 h-4 w-4"})," Initialize Git Repo"]}),p.jsx(d8,{}),p.jsxs(ol,{className:"text-red-600 focus:text-red-600",onSelect:()=>b(U),children:[p.jsx(Yi,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})})]},U.id)}),e.length===0&&!r&&!s&&p.jsx("div",{className:"p-4 text-center text-sm text-muted-foreground",children:"Folder is empty"})]})},c3=C.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:s,createDirectory:o,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:m,selectFile:g,deselectFile:v,selectedFileIds:b,vfsKey:w,configuredVfsKey:x,initializingKey:_,_setError:E,_setOperationLoading:T,findNodeByPath:k,initializeVFS:R}=Co(cn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[j,I]=C.useState(""),[P,O]=C.useState(null),[U,M]=C.useState(!1),[W,V]=C.useState(""),[ie,ae]=C.useState({}),[ne,q]=C.useState(!1),[te,G]=C.useState(""),[J,Q]=C.useState(""),[se,fe]=C.useState(!1),[ve,je]=C.useState(!1),[Ne,Se]=C.useState(null),[ye,Fe]=C.useState(""),[Xe,Le]=C.useState(!1),[Ie,B]=C.useState({}),Ce=C.useRef(null),Ee=C.useRef(null),ce=C.useRef(null),oe=C.useRef(null),ee=C.useRef(null),_e=n?e[n]:null,Pe=_e?_e.path:"/",We=(t[n||m||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,It)=>ut.type==="folder"&&It.type==="file"?-1:ut.type==="file"&&It.type==="folder"?1:ut.name.localeCompare(It.name)),Nt=C.useMemo(()=>We.filter(ut=>ut.type==="folder").map(ut=>ut.path),[We]),it=r||_!==null||w!==x,Ct=a||se||Xe||Object.values(Ie).some(Boolean);C.useEffect(()=>{n!==null&&!t[n]&&!it&&x===w?s(n):n===null&&m&&!t[m]&&!it&&x===w&&s(m)},[n,t,m,it,s,x,w]),C.useEffect(()=>{var ut,It;P&&((ut=oe.current)==null||ut.focus(),(It=oe.current)==null||It.select())},[P]),C.useEffect(()=>{var ut;U&&((ut=ee.current)==null||ut.focus())},[U]),C.useEffect(()=>{(async()=>{if(it||Nt.length===0)return;const It={};let Lt=!1;for(const en of Nt)try{const In=await Sde(en);ie[en]!==In&&(It[en]=In,Lt=!0)}catch(In){console.error(`Error checking git status for ${en}:`,In),ie[en]!==!1&&(It[en]=!1,Lt=!0)}Lt&&ae(en=>({...en,...It}))})()},[Nt,it,ie]);const Ft=C.useCallback(async(ut,It)=>{if(!(Ct||it)){It!==!1&&T(!0),E(null);try{await ut()}catch(Lt){console.error("[FileManager Operation Error]:",Lt)}finally{It!==!1&&T(!1)}}},[Ct,it,E,T]),Mt=C.useCallback(ut=>{Ct||it||P||ut.type==="folder"&&Ft(()=>h(ut.path),!1)},[Ct,it,P,h,Ft]),Zt=C.useCallback(()=>{if(Ct||it||Pe==="/")return;const ut=s_(Pe);Ft(()=>h(ut),!1)},[Ct,it,Pe,h,Ft]),be=C.useCallback(()=>{Ct||it||Pe==="/"||Ft(()=>h("/"),!1)},[Ct,it,Pe,h,Ft]),D=C.useCallback(()=>{it||Ft(()=>s(n),!1)},[Ft,s,n,it]),Z=C.useCallback((ut,It)=>{const Lt=e[It];Lt&&Lt.type==="file"?ut?g(It):v(It):Lt&&Lt.type==="folder"&&qe.info("Folders cannot be attached to the prompt.")},[g,v,e]),he=C.useCallback(ut=>{Ct||it||U||(O(ut.path),I(ut.name),M(!1))},[Ct,it,U]),De=C.useCallback(()=>{O(null),I("")},[]),we=C.useCallback(async()=>{if(!P||!j.trim()){De();return}const ut=k(P);ut&&ut.name!==j.trim()&&await Ft(()=>d(ut.id,j.trim())),De()},[P,j,d,De,k,Ft]),Ae=C.useCallback(()=>{Ct||it||P||(M(!0),V(""),O(null))},[Ct,it,P]),ue=C.useCallback(()=>{M(!1),V("")},[]),ft=C.useCallback(async()=>{if(!W.trim()){ue();return}await Ft(()=>o(n,W.trim())),ue()},[W,o,n,ue,Ft]),wt=()=>{var ut;return(ut=Ce.current)==null?void 0:ut.click()},L=()=>{var ut;return(ut=Ee.current)==null?void 0:ut.click()},$e=()=>{var ut;return(ut=ce.current)==null?void 0:ut.click()},nt=C.useCallback(async ut=>{const It=ut.target.files;It&&It.length>0&&(await Ft(()=>l(n,It)),ut.target&&(ut.target.value=""))},[l,n,Ft]),ge=C.useCallback(async ut=>{var Lt;const It=(Lt=ut.target.files)==null?void 0:Lt[0];It&&(await Ft(async()=>{await Tde(It,Pe),await s(n)}),ut.target&&(ut.target.value=""))},[Pe,s,n,Ft]),Me=C.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await Ft(()=>u([ut.id]))},[u,Ft]),Ke=C.useCallback(async ut=>{await Ft(async()=>{ut.type==="file"?await Cde(ut.path):await gM(`${ut.name}.zip`,ut.path)})},[Ft]),Dt=C.useCallback(async()=>{We.length!==0&&await Ft(async()=>{const ut=fa(Pe)||"root";await gM(`${ut}_export.zip`,Pe)})},[Pe,We.length,Ft]),me=C.useCallback(async(ut,It)=>{if(!(Ie[ut]||it||a)){B(Lt=>({...Lt,[ut]:!0})),E(null);try{await It()}catch(Lt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Lt)}finally{B(Lt=>({...Lt,[ut]:!1}))}}},[E,Ie,it,a]),K=C.useCallback(ut=>{me(ut,async()=>{await kB(ut),ae(It=>({...It,[ut]:!0}))})},[me]),H=C.useCallback(ut=>{qe.info("Pulling default branch (auth not implemented yet)..."),me(ut,()=>f_(ut,"main"))},[me]),Y=C.useCallback(ut=>{Se(ut),Fe(""),je(!0)},[]),pe=C.useCallback(ut=>{qe.info("Pushing default branch (auth not implemented yet)..."),me(ut,()=>RN(ut,"main"))},[me]),Re=C.useCallback(ut=>{me(ut,()=>AB(ut))},[me]),Ve=C.useCallback(()=>{G(""),Q(""),q(!0)},[]),pt=C.useCallback(async()=>{if(!te.trim()){qe.error("Repository URL cannot be empty.");return}fe(!0),E(null);try{const ut=fa(te.trim().replace(/\.git$/,""))||"cloned_repo",It=sk(Pe,ut);await TB(It,te.trim(),J.trim()||void 0),q(!1),await D()}catch{}finally{fe(!1)}},[te,J,Pe,E,D]),Kt=C.useCallback(async()=>{if(!Ne||!ye.trim()){qe.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await NN(Ne,ye.trim()),je(!1)}catch{}finally{Le(!1)}},[Ne,ye,E]);return it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[p.jsx(Fn,{className:"h-8 w-8 animate-spin mb-2"}),p.jsx("p",{children:_?`Initializing filesystem: ${_}`:"Loading filesystem..."}),i&&p.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!it?p.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[p.jsxs("p",{children:["Error loading filesystem: ",i]}),p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>R(w||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):p.jsxs("div",{className:vt("flex h-full flex-col bg-card text-card-foreground"),children:[p.jsx(VNe,{currentPath:Pe,isAnyLoading:Ct||it,isOperationLoading:a,entries:We,editingPath:P,creatingFolder:U,handleNavigateHome:be,handleNavigateUp:Zt,handleRefresh:D,startCreatingFolder:Ae,handleUploadClick:wt,handleFolderUploadClick:L,handleArchiveUploadClick:$e,handleDownloadAll:Dt,handleCloneClick:Ve,fileInputRef:Ce,folderInputRef:Ee,archiveInputRef:ce,handleFileChange:nt,handleArchiveChange:ge}),p.jsx("div",{className:"flex-grow overflow-auto hidden md:block",children:p.jsx(UNe,{entries:We,editingPath:P,newName:j,creatingFolder:U,newFolderName:W,selectedFileIds:b,isOperationLoading:Ct,handleNavigate:Mt,handleCheckboxChange:Z,startEditing:he,cancelEditing:De,handleRename:we,cancelCreatingFolder:ue,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:I,setNewFolderName:V,renameInputRef:oe,newFolderInputRef:ee,gitRepoStatus:ie,handleGitInit:K,handleGitPull:H,handleGitCommit:Y,handleGitPush:pe,handleGitStatus:Re})}),p.jsx("div",{className:"flex-grow overflow-auto block md:hidden",children:p.jsx(ERe,{entries:We,editingPath:P,newName:j,creatingFolder:U,newFolderName:W,selectedFileIds:b,isOperationLoading:Ct,handleNavigate:Mt,handleCheckboxChange:Z,startEditing:he,cancelEditing:De,handleRename:we,cancelCreatingFolder:ue,handleCreateFolder:ft,handleDownload:Ke,handleDelete:Me,setNewName:I,setNewFolderName:V,renameInputRef:oe,newFolderInputRef:ee,gitRepoStatus:ie,handleGitInit:K,handleGitPull:H,handleGitCommit:Y,handleGitPush:pe,handleGitStatus:Re})}),p.jsx(HNe,{isOpen:ne,onOpenChange:q,cloneRepoUrl:te,setCloneRepoUrl:G,cloneBranch:J,setCloneBranch:Q,isCloning:se,onSubmitClone:pt,currentPath:Pe}),p.jsx(qNe,{isOpen:ve,onOpenChange:je,commitPath:Ne,commitMessage:ye,setCommitMessage:Fe,isCommitting:Xe,onSubmitCommit:Kt})]})});c3.displayName="FileManager";const CRe=({vfsKey:e,selectedItemType:t})=>e==="orphan"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(_4,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Shared VFS:"})," All chats ",p.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(_4,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?p.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[p.jsx(hf,{className:"h-4 w-4"}),p.jsxs("span",{children:[p.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null,TRe=()=>{const{isVfsModalOpen:e,toggleVfsModal:t}=Qi(cn(d=>({isVfsModalOpen:d.isVfsModalOpen,toggleVfsModal:d.toggleVfsModal}))),{vfsKey:n,selectedFileIds:r,clearSelection:a,nodes:i}=Co(cn(d=>({vfsKey:d.vfsKey,selectedFileIds:d.selectedFileIds,clearSelection:d.clearSelection,nodes:d.nodes}))),s=hn(d=>d.selectedItemType),o=ko.getState().addAttachedFile,l=()=>{if(r.size===0){qe.info("No files selected in VFS to attach.");return}let d=0;r.forEach(h=>{const m=i[h];m&&m.type==="file"&&(o({source:"vfs",name:m.name,type:m.mimeType||"application/octet-stream",size:m.size,path:m.path}),d++)}),d>0?(qe.success(`Attached ${d} file(s) from VFS to the next prompt.`),a(),t(!1)):qe.warning("No valid files were selected to attach.")},u=()=>{a(),t(!1)};return p.jsx(B_,{open:e,onOpenChange:u,children:p.jsxs($_,{className:"sm:max-w-[90vw] md:max-w-[80vw] lg:max-w-[70vw] w-[90vw] h-[80vh] min-h-[500px] max-h-[90vh] flex flex-col p-0 gap-0",children:[p.jsxs(z_,{className:"p-4 pb-2 border-b flex-shrink-0",children:[p.jsx(V_,{children:"Virtual Filesystem"}),p.jsx(H_,{children:"Manage files associated with the current context. Select files to attach them to your next prompt."}),p.jsx(CRe,{vfsKey:n,selectedItemType:s})]}),p.jsx("div",{className:"flex-grow overflow-hidden",children:p.jsx(c3,{})}),p.jsxs(U_,{className:"p-4 pt-2 border-t flex-shrink-0",children:[p.jsx(Rt,{variant:"outline",onClick:u,children:"Close"}),p.jsxs(Rt,{onClick:l,disabled:r.size===0,children:[p.jsx(gA,{className:"h-4 w-4 mr-2"}),"Attach Selected (",r.size,")"]})]})]})})};function kRe(){const e=Sr.getState().registerPromptControl,t=Sr.getState().registerChatControl;e({id:"core-vfs-prompt-trigger",show:()=>Co.getState().enableVfs,triggerRenderer:()=>gt.createElement(FAe)}),t({id:"core-vfs-modal-panel",panel:void 0,show:()=>Qi.getState().isVfsModalOpen,renderer:()=>gt.createElement(TRe),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control (Prompt Trigger & Modal)")}const ARe=()=>{const{linkConversationToRepo:e,syncConversation:t}=hn(cn(O=>({linkConversationToRepo:O.linkConversationToRepo,syncConversation:O.syncConversation}))),[n,r]=C.useState(()=>hn.getState().selectedItemId),[a,i]=C.useState(()=>hn.getState().selectedItemType),[s,o]=C.useState(()=>hn.getState().syncRepos),[l,u]=C.useState(()=>hn.getState().conversationSyncStatus),[d,h]=C.useState(()=>On.getState().status==="streaming"),[m,g]=C.useState(null),[v,b]=C.useState("idle"),[w,x]=C.useState(!1),[_,E]=C.useState(!1);C.useEffect(()=>{const O=ae=>{r(ae.selectedItemId),i(ae.selectedItemType)},U=()=>{o(hn.getState().syncRepos)},M=ae=>{u(ne=>({...ne,[ae.conversationId]:ae.status}))},W=ae=>{h(ae.status==="streaming")},V=ae=>{ae.conversationId===n&&ae.updates.syncRepoId!==void 0&&g(ae.updates.syncRepoId)},ie=hn.getState();return r(ie.selectedItemId),i(ie.selectedItemType),o(ie.syncRepos),u(ie.conversationSyncStatus),Et.on(St.CONTEXT_CHANGED,O),Et.on(St.SYNC_REPO_CHANGED,U),Et.on(St.CONVERSATION_SYNC_STATUS_CHANGED,M),Et.on(St.INTERACTION_STATUS_CHANGED,W),Et.on(St.CONVERSATION_UPDATED,V),()=>{Et.off(St.CONTEXT_CHANGED,O),Et.off(St.SYNC_REPO_CHANGED,U),Et.off(St.CONVERSATION_SYNC_STATUS_CHANGED,M),Et.off(St.INTERACTION_STATUS_CHANGED,W),Et.off(St.CONVERSATION_UPDATED,V)}},[n]),C.useEffect(()=>{if(a==="conversation"&&n){const O=hn.getState().getConversationById(n);g((O==null?void 0:O.syncRepoId)??null),b(l[n]??"idle")}else g(null),b("idle")},[n,a,l]);const T=gt.useMemo(()=>new Map(s.map(O=>[O.id,O.name])),[s]),k=m?T.get(m):void 0,R=C.useCallback(async O=>{if(!n||a!=="conversation")return;x(!0),await e(n,O==="none"?null:O),x(!1)},[n,a,e]),j=C.useCallback(async()=>{!n||!m||(E(!0),await t(n),E(!1))},[n,m,t]),I=mV(v,k),P=!m||_||w||d||v==="syncing";return a!=="conversation"||s.length===0?null:p.jsxs(Mo,{children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oo,{asChild:!0,children:p.jsx(Rt,{variant:m?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||w||_,"aria-label":"Configure Git Sync",children:v==="syncing"||_||w?p.jsx(Fn,{className:"h-4 w-4 animate-spin"}):p.jsx(Fu,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:m?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),p.jsxs(Po,{className:"w-64 p-4 space-y-3",align:"start",children:[p.jsx($t,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),p.jsxs(bc,{value:m??"none",onValueChange:R,disabled:w||_||d,children:[p.jsx(wc,{id:"sync-repo-select",className:"w-full h-9",children:p.jsx(vc,{placeholder:"Select repository..."})}),p.jsxs(xc,{children:[p.jsx(Sa,{value:"none",children:p.jsx("span",{className:"text-muted-foreground",children:"None"})}),s.map(O=>p.jsx(Sa,{value:O.id,children:O.name},O.id))]})]}),p.jsxs("div",{className:"flex items-center justify-between pt-2",children:[p.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",I||"Not Linked"]}),p.jsxs(Rt,{size:"sm",variant:"outline",onClick:j,disabled:P,className:"h-8",children:[_||v==="syncing"?p.jsx(Fn,{className:"h-4 w-4 mr-1 animate-spin"}):p.jsx(hA,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function NRe(){const e=Sr.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>gt.createElement(ARe)}),console.log("[Function] Registered Core Git Sync Control")}const RRe=z.object({path:z.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),IRe=z.object({path:z.string().describe("The path of the file to read within the VFS."),encoding:z.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),jRe=z.object({path:z.string().describe("The path where the file should be written."),content:z.string().describe("The content to write to the file."),encoding:z.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),DRe=z.object({path:z.string().describe("The path of the file or directory to delete."),recursive:z.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),MRe=z.object({path:z.string().describe("The path of the directory to create (including parents).")}),ORe=z.object({oldPath:z.string().describe("The current path of the item to rename."),newName:z.string().describe("The new name for the item.")});function PRe(){const e=Sr.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:RRe},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=nr(o||"/");try{const h=await IN(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(m=>({name:m.name,type:m.isDirectory?"folder":"file",size:m.size,lastModified:m.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:IRe},async({path:o,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=nr(o);try{const m=await fd(h,{fsInstance:d});let g;return l==="base64"?g=btoa(String.fromCharCode(...m)):g=new TextDecoder().decode(m),{success:!0,path:h,content:g,encoding:l}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:jRe},async({path:o,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const m=nr(o);try{let g;if(u==="base64"){const v=atob(l),b=v.length,w=new Uint8Array(b);for(let x=0;x<b;x++)w[x]=v.charCodeAt(x);g=w}else g=l;return await h_(m,g,{fsInstance:h}),{success:!0,path:m}}catch(g){return{success:!1,path:m,error:g.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:DRe},async({path:o,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=nr(o);try{return await jN(h,l,{fsInstance:d}),{success:!0,path:h}}catch(m){return{success:!1,path:h,error:m.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:MRe},async({path:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=nr(o);try{return await NB(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:ORe},async({oldPath:o,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=nr(o),m=nr(h.substring(0,h.lastIndexOf("/"))||"/"),g=kl(m,l);try{return await IB(h,g,{fsInstance:d}),{success:!0,oldPath:h,newPath:g}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const FRe=z.object({path:z.string().describe("The directory path within the VFS to initialize as a Git repository.")}),LRe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to commit."),message:z.string().describe("The commit message.")}),BRe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:z.string().optional().describe("The branch name to pull.")}),$Re=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to push."),branch:z.string().optional().describe("The branch name to push.")}),zRe=z.object({path:z.string().describe("The directory path of the Git repository within the VFS to check status.")});function URe(){const e=Sr.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:FRe},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await kB(s,{fsInstance:l}),{success:!0,message:`Repository initialized at ${s}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:LRe},async({path:s,message:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=ar.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await NN(s,o,{fsInstance:u}),{success:!0,message:`Changes committed in ${s}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:BRe},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await f_(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:$Re},async({path:s,branch:o},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await RN(s,o||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${s}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:zRe},async({path:s},o)=>{const l=o==null?void 0:o.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await AB(s,{fsInstance:l}),{success:!0,message:`Status checked for ${s}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const VRe=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:s})=>{const o=Sr(_=>_.tools),l=ar(_=>_.toolMaxSteps),[u,d]=C.useState(""),h=C.useMemo(()=>Object.entries(o).map(([_,{definition:E,modId:T}])=>({name:_,description:E.description??"No description provided.",modId:T})).sort((_,E)=>_.name.localeCompare(E.name)),[o]),m=C.useMemo(()=>{const _=u.trim().toLowerCase();return _?h.filter(E=>E.name.toLowerCase().includes(_)||E.description.toLowerCase().includes(_)||E.modId.toLowerCase().includes(_)):h},[h,u]),g=C.useCallback((_,E)=>{n(T=>{const k=new Set(T);return E?k.add(_):k.delete(_),k})},[n]),v=C.useCallback(_=>{n(()=>_?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=_=>{const E=_.target.value;if(E===""){a(null);return}const T=parseInt(E,10);if(isNaN(T))a(null);else{const k=Math.max(1,Math.min(20,T));a(k)}},w=r===null?"":String(r),x=s!=="conversation"||!i;return p.jsxs("div",{className:vt("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[p.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),p.jsxs("div",{className:"relative",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter tools...",value:u,onChange:_=>d(_.target.value),className:"pl-8 h-9",disabled:x})]}),p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs($t,{className:"text-xs text-muted-foreground",children:[m.length," tools shown (",t.size," enabled)"]}),p.jsxs("div",{className:"space-x-2",children:[p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:x||h.length===0,children:"Enable All"}),p.jsx(Rt,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:x||h.length===0||t.size===0,children:"Disable All"})]})]}),p.jsx(Es,{className:"h-56 border rounded-md p-2 bg-background/50",children:x?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[p.jsx(Ki,{id:`tool-switch-${_.name}`,checked:t.has(_.name),onCheckedChange:E=>g(_.name,E),className:"flex-shrink-0",disabled:x}),p.jsxs($t,{htmlFor:`tool-switch-${_.name}`,className:vt("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${_.name} (from ${_.modId})`,children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:_.description})]})]},_.name))})}),p.jsxs("div",{className:"pt-2",children:[p.jsx($t,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),p.jsx(xn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:w,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:x}),p.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let Mu=new Set,dc=null,Gg=()=>{};const HRe=()=>{const[e,t]=C.useState({enabledTools:Mu,maxStepsOverride:dc}),[n,r]=C.useState(e.maxStepsOverride),[a,i]=C.useState(!1),[s,o]=C.useState(()=>On.getState().status==="streaming"),[l,u]=C.useState(!0),[d,h]=C.useState(()=>hn.getState().selectedItemType),[m,g]=C.useState(()=>hn.getState().selectedItemId),v=Object.keys(Sr.getState().tools).length;C.useEffect(()=>(Gg=E=>{const T=E({enabledTools:Mu,maxStepsOverride:dc});Mu=T.enabledTools,dc=T.maxStepsOverride,t(T)},t({enabledTools:Mu,maxStepsOverride:dc}),()=>{Gg=()=>{}}),[]),C.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),C.useEffect(()=>{const E=R=>{o(R.status==="streaming")},T=R=>{var O,U;if(!R.modelId){u(!1);return}const{getSelectedModel:j}=Hn.getState(),I=j(),P=Object.keys(Sr.getState().tools).length>0;u(P&&(((U=(O=I==null?void 0:I.metadata)==null?void 0:O.supported_parameters)==null?void 0:U.includes("tools"))??!1))},k=R=>{h(R.selectedItemType),g(R.selectedItemId)};return T({modelId:Hn.getState().selectedModelId}),k({selectedItemId:hn.getState().selectedItemId,selectedItemType:hn.getState().selectedItemType}),Et.on(St.INTERACTION_STATUS_CHANGED,E),Et.on(St.MODEL_SELECTION_CHANGED,T),Et.on(St.CONTEXT_CHANGED,k),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,E),Et.off(St.MODEL_SELECTION_CHANGED,T),Et.off(St.CONTEXT_CHANGED,k)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&Gg(T=>({...T,maxStepsOverride:n}))},w=C.useCallback(E=>{Gg(T=>({...T,enabledTools:E(T.enabledTools)}))},[]),x=e.enabledTools.size>0||e.maxStepsOverride!==null,_=s||v===0||d!=="conversation";return l?p.jsxs(Mo,{open:a,onOpenChange:b,children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oo,{asChild:!0,children:p.jsx(Rt,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:_,"aria-label":"Configure Tools",children:p.jsx(vA,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:_?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),p.jsx(Po,{className:"w-auto p-0",align:"start",children:p.jsx(VRe,{enabledTools:e.enabledTools,setEnabledTools:w,localMaxSteps:n,setLocalMaxSteps:r,conversationId:m,conversationType:d})})]}):null};function qRe(){const e=Sr.getState().registerPromptControl;Mu=new Set,dc=null,e({id:"core-tool-selector",triggerRenderer:()=>gt.createElement(HRe),getMetadata:()=>{if(Mu.size>0||dc!==null)return{enabledTools:Array.from(Mu),...dc!==null&&{maxSteps:dc}}},clearOnSubmit:()=>{Mu=new Set,dc=null,Gg(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}const GRe=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:s})=>p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx($t,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),p.jsx(yd,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:o=>t(o.target.value||null),rows:6,disabled:s,className:"mt-1"}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:s||e===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{children:[p.jsx($t,{children:"Default Model (Overrides Parent/Global)"}),p.jsx(Y_,{value:n??i,onChange:r,disabled:s}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:s||n===null,children:"Use Inherited/Default"})]})]}),WRe=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:s,setTopK:o,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:m,setLocalTemp:g,localTopP:v,setLocalTopP:b,localPresence:w,setLocalPresence:x,localFrequency:_,setLocalFrequency:E,effectiveTemperature:T,effectiveMaxTokens:k,effectiveTopP:R,effectiveTopK:j,effectivePresencePenalty:I,effectiveFrequencyPenalty:P,isSaving:O})=>{const U=C.useCallback((W,V)=>{const ie=V.target.value,ae=ie===""?null:parseInt(ie,10);(ie===""||!isNaN(ae)&&ae!==null)&&W(ae)},[]),M=C.useCallback((W,V)=>{W(V[0])},[]);return p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",m.toFixed(2),")"]}),p.jsx(vo,{id:"project-temperature",min:0,max:1,step:.01,value:[m],onValueChange:W=>g(W[0]),onValueCommit:W=>M(t,W),disabled:O}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:O||e===null,children:["Use Inherited/Default (",(T==null?void 0:T.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),p.jsx(vo,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:W=>b(W[0]),onValueCommit:W=>M(i,W),disabled:O}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:O||a===null,children:["Use Inherited/Default (",(R==null?void 0:R.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),p.jsx(xn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:W=>U(r,W),min:"1",className:"h-8 text-xs",disabled:O}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:O||n===null,children:"Use Inherited/Default"})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsx($t,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),p.jsx(xn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${j??"Default"}`,value:s??"",onChange:W=>U(o,W),min:"1",className:"h-8 text-xs",disabled:O}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>o(null),disabled:O||s===null,children:"Use Inherited/Default"})]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",w.toFixed(2),")"]}),p.jsx(vo,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[w],onValueChange:W=>x(W[0]),onValueCommit:W=>M(u,W),disabled:O}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:O||l===null,children:["Use Inherited/Default (",(I==null?void 0:I.toFixed(2))??"N/A",")"]})]}),p.jsxs("div",{className:"space-y-1.5",children:[p.jsxs($t,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",_.toFixed(2),")"]}),p.jsx(vo,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:W=>E(W[0]),onValueCommit:W=>M(h,W),disabled:O}),p.jsxs(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:O||d===null,children:["Use Inherited/Default (",(P==null?void 0:P.toFixed(2))??"N/A",")"]})]})]})},KRe=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var s;const i=((s=r.find(o=>o.id===n))==null?void 0:s.name)??"None";return p.jsx("div",{className:"space-y-4",children:p.jsxs("div",{children:[p.jsx($t,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),p.jsxs(bc,{value:e??"none",onValueChange:o=>t(o==="none"?null:o),disabled:a||r.length===0,children:[p.jsx(wc,{id:"project-sync-repo",children:p.jsx(vc,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),p.jsxs(xc,{children:[p.jsx(Sa,{value:"none",children:p.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(o=>p.jsx(Sa,{value:o.id,children:o.name},o.id))]})]}),p.jsx(Rt,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},ZRe=({projectId:e})=>{const t=C.useMemo(()=>[{value:"manage",label:"Manage Files",content:p.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?p.jsx(c3,{}):p.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings",content:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx($t,{children:"Project Filesystem Info"}),p.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),p.jsxs("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2 break-all",children:[" ",p.jsxs("p",{children:[p.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",p.jsx("code",{className:"text-xs",children:e||"N/A"})]})]})]}),p.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[p.jsx($t,{className:"text-destructive",children:"Danger Zone"}),p.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."})]})]})}],[e]);return p.jsx($c,{tabs:t,defaultValue:"manage",className:"h-full flex flex-col",listClassName:vt("bg-muted/50 rounded-md","flex-wrap justify-start h-auto","p-1 gap-1"),contentContainerClassName:"mt-3 flex-grow flex flex-col overflow-y-auto"})},YRe=({allRules:e,selectedRuleIds:t,onSelectionChange:n,disabled:r=!1})=>{const[a,i]=C.useState(""),s=C.useMemo(()=>{const o=a.toLowerCase();return o?e.filter(l=>l.name.toLowerCase().includes(o)||l.content.toLowerCase().includes(o)||l.type.toLowerCase().includes(o)):e},[e,a]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter rules...",value:a,onChange:o=>i(o.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(Es,{className:"h-48 border rounded-md p-2 bg-background/50",children:s.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No rules defined globally.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:s.map(o=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Oc,{id:`project-default-rule-${o.id}`,checked:t.has(o.id),onCheckedChange:l=>n(o.id,!!l),className:"mt-0.5",disabled:r}),p.jsxs($t,{htmlFor:`project-default-rule-${o.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:o.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",o.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",o.content]})]})]})},o.id))})})]})},XRe=({defaultRuleIds:e,setDefaultRuleIds:t,isSaving:n})=>{const r=Xs(s=>s.rules),a=C.useMemo(()=>new Set(e??[]),[e]),i=C.useCallback((s,o)=>{const l=new Set(a);o?l.add(s):l.delete(s);const u=Array.from(l);t(u.length>0?u:null)},[a,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx($t,{children:"Default Rules for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select rules that will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(YRe,{allRules:r,selectedRuleIds:a,onSelectionChange:i,disabled:n})]})},JRe=({allTags:e,selectedTagIds:t,onSelectionChange:n,disabled:r=!1})=>{const[a,i]=C.useState(""),s=Xs(l=>l.getRulesForTag),o=C.useMemo(()=>{const l=a.toLowerCase();return l?e.filter(u=>{var d;return u.name.toLowerCase().includes(l)||((d=u.description)==null?void 0:d.toLowerCase().includes(l))}):e},[e,a]);return p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter tags...",value:a,onChange:l=>i(l.target.value),className:"pl-8 h-9",disabled:r})]}),p.jsx(Es,{className:"h-48 border rounded-md p-2 bg-background/50",children:o.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:e.length===0?"No tags defined globally.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:o.map(l=>{const u=s(l.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Oc,{id:`project-default-tag-${l.id}`,checked:t.has(l.id),onCheckedChange:d=>n(l.id,!!d),className:"mt-0.5",disabled:r}),p.jsxs($t,{htmlFor:`project-default-tag-${l.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:l.name}),l.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:l.description}),u.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",u.map(d=>d.name).join(", ")]})]})]})},l.id)})})})]})},QRe=({defaultTagIds:e,setDefaultTagIds:t,isSaving:n})=>{const r=Xs(s=>s.tags),a=C.useMemo(()=>new Set(e??[]),[e]),i=C.useCallback((s,o)=>{const l=new Set(a);o?l.add(s):l.delete(s);const u=Array.from(l);t(u.length>0?u:null)},[a,t]);return p.jsxs("div",{className:"space-y-4",children:[p.jsx($t,{children:"Default Tags for this Project"}),p.jsx("p",{className:"text-xs text-muted-foreground",children:"Select tags whose rules will be automatically applied to new conversations within this project. These can be overridden per-conversation or per-turn."}),p.jsx(JRe,{allTags:r,selectedTagIds:a,onSelectionChange:i,disabled:n})]})},e3e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=ri(cn(B=>({getProjectById:B.getProjectById,updateProject:B.updateProject}))),i=ri(B=>B.getEffectiveProjectSettings),s=hn(B=>B.syncRepos),o=ar(cn(B=>({globalSystemPrompt:B.globalSystemPrompt,temperature:B.temperature,maxTokens:B.maxTokens,topP:B.topP,topK:B.topK,presencePenalty:B.presencePenalty,frequencyPenalty:B.frequencyPenalty}))),l=Hn(B=>B.selectedModelId),u=Co(B=>B.setVfsKey),[d,h]=C.useState(null),[m,g]=C.useState(null),[v,b]=C.useState(null),[w,x]=C.useState(null),[_,E]=C.useState(null),[T,k]=C.useState(null),[R,j]=C.useState(null),[I,P]=C.useState(null),[O,U]=C.useState(null),[M,W]=C.useState(null),[V,ie]=C.useState(null),[ae,ne]=C.useState(.7),[q,te]=C.useState(1),[G,J]=C.useState(0),[Q,se]=C.useState(0),[fe,ve]=C.useState(!1),[je,Ne]=C.useState("prompt"),{project:Se,effectiveSettings:ye}=C.useMemo(()=>{const B=n?r(n):null,Ce=n?i(n):null;return{project:B,effectiveSettings:Ce}},[n,r,i]),Fe=C.useCallback(B=>{var Ee;if(!B)return null;const Ce=r(B);return Ce?((Ee=Ce.metadata)==null?void 0:Ee.syncRepoId)!==void 0?Ce.metadata.syncRepoId:Fe(Ce.parentId):null},[r]),Xe=n?Fe(n):null;C.useEffect(()=>{var B;e&&n&&Se&&ye?(u(n),h(Se.systemPrompt??null),g(Se.modelId??null),b(Se.temperature??null),x(Se.maxTokens??null),E(Se.topP??null),k(Se.topK??null),j(Se.presencePenalty??null),P(Se.frequencyPenalty??null),U(((B=Se.metadata)==null?void 0:B.syncRepoId)??null),W(Se.defaultTagIds??null),ie(Se.defaultRuleIds??null),ne(ye.temperature??o.temperature),te(ye.topP??o.topP??1),J(ye.presencePenalty??o.presencePenalty??0),se(ye.frequencyPenalty??o.frequencyPenalty??0),Ne("prompt")):e||(u(null),h(null),g(null),b(null),x(null),E(null),k(null),j(null),P(null),U(null),W(null),ie(null))},[e,n,Se,ye,o,u]),C.useEffect(()=>ne(v??(ye==null?void 0:ye.temperature)??o.temperature),[v,ye,o.temperature]),C.useEffect(()=>te(_??(ye==null?void 0:ye.topP)??o.topP??1),[_,ye,o.topP]),C.useEffect(()=>J(R??(ye==null?void 0:ye.presencePenalty)??o.presencePenalty??0),[R,ye,o.presencePenalty]),C.useEffect(()=>se(I??(ye==null?void 0:ye.frequencyPenalty)??o.frequencyPenalty??0),[I,ye,o.frequencyPenalty]);const Le=async()=>{if(!(!n||!Se)){ve(!0);try{const B=Se.parentId?i(Se.parentId):{systemPrompt:o.globalSystemPrompt,modelId:l,temperature:o.temperature,maxTokens:o.maxTokens,topP:o.topP,topK:o.topK,presencePenalty:o.presencePenalty,frequencyPenalty:o.frequencyPenalty,defaultTagIds:null,defaultRuleIds:null},Ce=Se.parentId?Fe(Se.parentId):null,Ee={},ce={...Se.metadata??{}};d!==B.systemPrompt?Ee.systemPrompt=d:Ee.systemPrompt=void 0,m!==B.modelId?Ee.modelId=m:Ee.modelId=void 0,v!==B.temperature?Ee.temperature=v:Ee.temperature=void 0,w!==B.maxTokens?Ee.maxTokens=w:Ee.maxTokens=void 0,_!==B.topP?Ee.topP=_:Ee.topP=void 0,T!==B.topK?Ee.topK=T:Ee.topK=void 0,R!==B.presencePenalty?Ee.presencePenalty=R:Ee.presencePenalty=void 0,I!==B.frequencyPenalty?Ee.frequencyPenalty=I:Ee.frequencyPenalty=void 0,O!==Ce?ce.syncRepoId=O:delete ce.syncRepoId,JSON.stringify(M)!==JSON.stringify(B.defaultTagIds)?Ee.defaultTagIds=M:Ee.defaultTagIds=void 0,JSON.stringify(V)!==JSON.stringify(B.defaultRuleIds)?Ee.defaultRuleIds=V:Ee.defaultRuleIds=void 0,Ee.metadata=ce,await a(n,Ee),qe.success(`Project "${Se.name}" settings updated.`),t()}catch(B){qe.error("Failed to save project settings."),console.error("Failed to save project settings:",B)}finally{ve(!1)}}},Ie=C.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:p.jsx(GRe,{systemPrompt:d,setSystemPrompt:h,modelId:m,setModelId:g,effectiveSystemPrompt:(ye==null?void 0:ye.systemPrompt)??o.globalSystemPrompt,effectiveModelId:(ye==null?void 0:ye.modelId)??l,isSaving:fe})},{value:"params",label:"Parameters",content:p.jsx(WRe,{temperature:v,setTemperature:b,maxTokens:w,setMaxTokens:x,topP:_,setTopP:E,topK:T,setTopK:k,presencePenalty:R,setPresencePenalty:j,frequencyPenalty:I,setFrequencyPenalty:P,localTemp:ae,setLocalTemp:ne,localTopP:q,setLocalTopP:te,localPresence:G,setLocalPresence:J,localFrequency:Q,setLocalFrequency:se,effectiveTemperature:(ye==null?void 0:ye.temperature)??o.temperature,effectiveMaxTokens:(ye==null?void 0:ye.maxTokens)??o.maxTokens,effectiveTopP:(ye==null?void 0:ye.topP)??o.topP,effectiveTopK:(ye==null?void 0:ye.topK)??o.topK,effectivePresencePenalty:(ye==null?void 0:ye.presencePenalty)??o.presencePenalty,effectiveFrequencyPenalty:(ye==null?void 0:ye.frequencyPenalty)??o.frequencyPenalty,isSaving:fe})},{value:"rules-tags",label:"Rules & Tags",content:p.jsxs("div",{className:"space-y-6",children:[p.jsx(XRe,{defaultRuleIds:V,setDefaultRuleIds:ie,isSaving:fe}),p.jsx(QRe,{defaultTagIds:M,setDefaultTagIds:W,isSaving:fe})]})},{value:"sync",label:"Sync",content:p.jsx(KRe,{syncRepoId:O,setSyncRepoId:U,effectiveSyncRepoId:Xe,syncRepos:s,isSaving:fe})},{value:"vfs",label:"Filesystem",content:p.jsx(ZRe,{projectId:n,projectName:(Se==null?void 0:Se.name)??null,isSaving:fe})}],[d,m,v,w,_,T,R,I,O,M,V,ye,o,l,fe,ae,q,G,Q,Xe,s,n,Se==null?void 0:Se.name]);return p.jsx(B_,{open:e,onOpenChange:t,children:p.jsxs($_,{className:vt("w-[95vw] h-[85vh] flex flex-col p-0","sm:w-[90vw] sm:max-w-[800px]","md:h-[75vh]","min-h-[500px] max-h-[90vh]"),children:[p.jsxs(z_,{className:"p-4 md:p-6 pb-2 md:pb-4 flex-shrink-0",children:[p.jsxs(V_,{children:["Project Settings: ",Se==null?void 0:Se.name]}),p.jsx(H_,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),p.jsx($c,{tabs:Ie,initialValue:je,onValueChange:Ne,className:"flex-grow overflow-hidden px-4 md:px-6",listClassName:"-mx-4 md:-mx-6 px-2 md:px-6 py-1 md:py-0",contentContainerClassName:"pb-4 md:pb-6 pr-1 md:pr-2 -mr-1 md:-mr-2",scrollable:!0}),p.jsxs(U_,{className:"flex-shrink-0 border-t p-4 md:p-6 pt-3 md:pt-4 mt-auto",children:[p.jsx(Rt,{variant:"outline",onClick:t,disabled:fe,children:"Cancel"}),p.jsxs(Rt,{onClick:Le,disabled:fe,children:[fe&&p.jsx(Fn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function t3e(){const e=Sr.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=Qi.getState();return p.jsx(e3e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>gt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const n3e=()=>{const{selectedModelId:e,selectModel:t}=Hn(cn(l=>({selectedModelId:l.selectedModelId,selectModel:l.selectModel}))),n=ii(l=>l.setModelId),[r,a]=C.useState(()=>On.getState().status==="streaming"),[i,s]=C.useState(e);C.useEffect(()=>{const l=h=>{a(h.status==="streaming")},u=h=>{s(h.modelId),n(h.modelId)},d=Hn.getState().selectedModelId;return s(d),n(d),Et.on(St.INTERACTION_STATUS_CHANGED,l),Et.on(St.MODEL_SELECTION_CHANGED,u),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,l),Et.off(St.MODEL_SELECTION_CHANGED,u)}},[n]);const o=l=>{t(l),n(l)};return p.jsx(Y_,{value:i,onChange:o,disabled:r})};function r3e(){const e=Sr.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>Hn.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(n3e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}const a3e=({initialPromptValue:e,onPromptChange:t})=>{const[n,r]=C.useState(e),[a,i]=C.useState(!1),[s,o]=C.useState(null),[l,u]=C.useState(()=>On.getState().status==="streaming");C.useEffect(()=>{r(e)},[e]),C.useEffect(()=>{const v=T=>{u(T.status==="streaming")},b=(T,k)=>{var O;const{getConversationById:R}=hn.getState(),{getEffectiveProjectSettings:j}=ri.getState(),I=ar.getState().globalSystemPrompt,P=k==="project"?T:k==="conversation"?((O=R(T))==null?void 0:O.projectId)??null:null;o(j(P).systemPrompt??I)},w=T=>{b(T.selectedItemId,T.selectedItemType)},x=T=>{var j;const k=hn.getState();(k.selectedItemType==="project"?k.selectedItemId:k.selectedItemType==="conversation"?((j=k.getConversationById(k.selectedItemId))==null?void 0:j.projectId)??null:null)===T.projectId&&b(k.selectedItemId,k.selectedItemType)},_=T=>{if(T.key==="globalSystemPrompt"){const k=hn.getState();b(k.selectedItemId,k.selectedItemType)}},E=hn.getState();return b(E.selectedItemId,E.selectedItemType),Et.on(St.INTERACTION_STATUS_CHANGED,v),Et.on(St.CONTEXT_CHANGED,w),Et.on(St.PROJECT_UPDATED,x),Et.on(St.SETTINGS_CHANGED,_),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,v),Et.off(St.CONTEXT_CHANGED,w),Et.off(St.PROJECT_UPDATED,x),Et.off(St.SETTINGS_CHANGED,_)}},[]);const d=C.useCallback(()=>{t(n.trim()),i(!1)},[n,t]),h=C.useCallback(()=>{r(""),t(""),i(!1)},[t]),m=v=>{v&&r(e),i(v)},g=e.trim().length>0;return p.jsxs(Mo,{open:a,onOpenChange:m,children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oo,{asChild:!0,children:p.jsx(Rt,{variant:g?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:l,"aria-label":"Set System Prompt for Next Turn",children:p.jsx(DY,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:g?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),p.jsxs(Po,{className:"w-80 p-4 space-y-3",align:"start",children:[p.jsx($t,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),p.jsx(yd,{id:"turn-system-prompt",placeholder:`Inherited: ${(s==null?void 0:s.substring(0,50))||"Default"}${s&&s.length>50?"...":""}`,value:n,onChange:v=>r(v.target.value),rows:5,className:"text-sm"}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx(Rt,{variant:"outline",size:"sm",onClick:h,disabled:!n.trim(),children:"Clear Override"}),p.jsx(Rt,{size:"sm",onClick:d,children:"Set for Next Turn"})]})]})]})};let Fg="";function i3e(){const e=Sr.getState().registerPromptControl;Fg="";const t=n=>{Fg=n};e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>gt.createElement(a3e,{initialPromptValue:Fg,onPromptChange:t}),getMetadata:()=>{const n=Fg.trim();return n?{turnSystemPrompt:n}:void 0},clearOnSubmit:()=>{Fg=""}}),console.log("[Function] Registered Core System Prompt Control")}const s3e=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=ii(cn(x=>({structuredOutputJson:x.structuredOutputJson,setStructuredOutputJson:x.setStructuredOutputJson}))),[n,r]=C.useState(!1),[a,i]=C.useState(e??""),[s,o]=C.useState(""),[l,u]=C.useState([]),d=C.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),qe.success("Structured output applied for next turn.")}catch{qe.error("Invalid JSON format.")}},[a,t]),h=C.useCallback(()=>{i(""),t(null),r(!1),qe.info("Structured output cleared.")},[t]),m=C.useCallback(()=>{if(!s.trim()){qe.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const x={id:Date.now().toString(),name:s.trim(),json:a};u(_=>[..._,x]),o(""),qe.success(`"${x.name}" saved to library.`)}catch{qe.error("Cannot save invalid JSON to library.")}},[a,s]),g=C.useCallback(x=>{i(x.json),t(x.json),r(!1),qe.success(`Loaded "${x.name}" from library.`)},[t]),v=C.useCallback(x=>{u(_=>_.filter(E=>E.id!==x)),qe.info("Item removed from library.")},[]);C.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:p.jsxs("div",{className:"space-y-3 p-1",children:[p.jsx($t,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),p.jsx(yd,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:x=>i(x.target.value),rows:8,className:"font-mono text-xs"}),p.jsxs("div",{className:"flex justify-between items-end gap-2",children:[p.jsxs("div",{className:"flex-grow space-y-1",children:[p.jsx($t,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),p.jsx(xn,{id:"structured-output-name",value:s,onChange:x=>o(x.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),p.jsxs(Rt,{size:"sm",variant:"outline",onClick:m,disabled:!s.trim()||!a.trim(),className:"h-8",children:[p.jsx(kf,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),p.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[p.jsx(Rt,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),p.jsx(Rt,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:p.jsx("div",{className:"space-y-2 p-1",children:l.length===0?p.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(x=>p.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[p.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:x.name}),p.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[p.jsx(Rt,{size:"sm",variant:"outline",onClick:()=>g(x),className:"h-7 px-2 text-xs",children:"Use"}),p.jsx(Rt,{size:"icon",variant:"ghost",onClick:()=>v(x.id),className:"h-7 w-7 text-destructive",children:p.jsx(Yi,{className:"h-3.5 w-3.5"})})]})]},x.id))})}],w=!!e;return p.jsxs(Mo,{open:n,onOpenChange:r,children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oo,{asChild:!0,children:p.jsx(Rt,{variant:w?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:p.jsx(F8,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:w?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),p.jsx(Po,{className:"w-[450px] p-0",align:"start",children:p.jsx($c,{tabs:b,defaultValue:"entry"})})]})},o3e=()=>{const[e,t]=C.useState(!0);return C.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=Hn.getState(),i=a(),s=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,o=Array.isArray(s)&&s.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${o}`),t(o)};return n({modelId:Hn.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${St.MODEL_SELECTION_CHANGED}`),Et.on(St.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),Et.off(St.MODEL_SELECTION_CHANGED,n)}},[]),e?p.jsx(s3e,{}):null};function l3e(){const e=Sr.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>gt.createElement(o3e),getParameters:()=>{const{structuredOutputJson:t}=ii.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{ii.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const dG=4,vT=e=>{let t=0;return e.forEach(n=>{var r,a,i,s;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(s=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||s.forEach(o=>{t+=o.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/dG)},c3e=()=>{const[e,t]=C.useState(""),[n,r]=C.useState(0),[a,i]=C.useState([]),[s,o]=C.useState(null),[l,u]=C.useState(0);C.useEffect(()=>{const b=ko.getState(),w=Hn.getState(),x=On.getState();if(i(b.attachedFilesMetadata),o(w.selectedModelId),x.currentConversationId){const j=x.interactions.filter(I=>I.status==="COMPLETED");r(vT(j))}else r(0);const _=j=>{t(j.value)},E=j=>{i(j.files)},T=j=>{console.log(j),o(j.modelId)},k=()=>{const j=On.getState();if(j.currentConversationId){const I=j.interactions.filter(P=>P.status==="COMPLETED");r(vT(I))}},R=()=>{const j=On.getState();if(j.currentConversationId){const I=j.interactions.filter(P=>P.status==="COMPLETED");r(vT(I))}else r(0)};return Et.on(St.PROMPT_INPUT_CHANGE,_),Et.on(St.ATTACHED_FILES_CHANGED,E),Et.on(St.MODEL_SELECTION_CHANGED,T),Et.on(St.INTERACTION_COMPLETED,k),Et.on(St.CONTEXT_CHANGED,R),()=>{Et.off(St.PROMPT_INPUT_CHANGE,_),Et.off(St.ATTACHED_FILES_CHANGED,E),Et.off(St.MODEL_SELECTION_CHANGED,T),Et.off(St.INTERACTION_COMPLETED,k),Et.off(St.CONTEXT_CHANGED,R)}},[]),C.useEffect(()=>{var I;if(!s){u(0);return}const{dbProviderConfigs:b,dbApiKeys:w}=Hn.getState(),{providerId:x,modelId:_}=_o(s);if(!x||!_){u(0);return}const E=b.find(P=>P.id===x);if(!E){u(0);return}const T=w.find(P=>P.id===E.apiKeyId),k=zF(E,_,T==null?void 0:T.value),R=k==null?void 0:k.metadata,j=((I=R==null?void 0:R.top_provider)==null?void 0:I.context_length)??(R==null?void 0:R.context_length)??0;u(j)},[s]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:m}=C.useMemo(()=>{const b=new TextEncoder().encode(e).length,w=a.reduce((T,k)=>T+k.size,0),x=Math.ceil((b+w)/dG),_=n+x,E=l?Math.min(100,Math.round(_/l*100)):0;return{estimatedInputTokens:x,totalEstimatedTokens:_,contextPercentage:E}},[e,a,n,l]),g=C.useMemo(()=>m>85?"text-red-600 dark:text-red-500":m>70?"text-orange-500 dark:text-orange-400":m>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[m]);if(!s||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${m}%) [History: ${n}, Input: ${d}]`;return p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:p.jsx(JK,{className:vt("h-3 w-3 fill-current",g)})})}),p.jsx(Yn,{side:"top",children:v})]})})};function u3e(){const e=Sr.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>gt.createElement(c3e),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const d3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=C.useState(e),[a,i]=C.useState(()=>On.getState().status==="streaming"),[s,o]=C.useState(!0);C.useEffect(()=>{r(e)},[e]),C.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var b,w;if(!m.modelId){o(!1);return}const{getSelectedModel:g}=Hn.getState(),v=g();o(((w=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:w.includes("reasoning"))??!1)};return h({modelId:Hn.getState().selectedModelId}),Et.on(St.INTERACTION_STATUS_CHANGED,d),Et.on(St.MODEL_SELECTION_CHANGED,h),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,d),Et.off(St.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:p.jsx(zp,{className:vt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:l?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function f3e(){const e=Sr.getState().registerPromptControl,t=ii.getState(),n=r=>{t.setReasoningEnabled(r)};e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>gt.createElement(d3e,{initialEnabled:t.reasoningEnabled,onToggle:n}),getMetadata:()=>{const{reasoningEnabled:r}=ii.getState();return r===!0?{reasoningEnabled:!0}:void 0},clearOnSubmit:()=>{t.setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const h3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=C.useState(e),[a,i]=C.useState(()=>On.getState().status==="streaming"),[s,o]=C.useState(!0);C.useEffect(()=>{r(e)},[e]),C.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=m=>{var w;if(!m.modelId){o(!1);return}const{getSelectedModel:g}=Hn.getState(),v=g(),b=((w=v==null?void 0:v.metadata)==null?void 0:w.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:Hn.getState().selectedModelId}),Et.on(St.INTERACTION_STATUS_CHANGED,d),Et.on(St.MODEL_SELECTION_CHANGED,h),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,d),Et.off(St.MODEL_SELECTION_CHANGED,h)}},[]);const l=n===!0,u=()=>{const d=l?null:!0;r(d),t(d)};return s?p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:l?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":l?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:p.jsx(es,{className:vt("h-4 w-4",l?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:l?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function p3e(){const e=Sr.getState().registerPromptControl,t=ii.getState(),n=r=>{t.setWebSearchEnabled(r)};e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>gt.createElement(h3e,{initialEnabled:t.webSearchEnabled,onToggle:n}),getParameters:()=>{const{webSearchEnabled:r}=ii.getState();return r===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{t.setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const m3e=({activeTagIds:e,activeRuleIds:t,onToggleTag:n,onToggleRule:r})=>{const{rules:a,tags:i,getRulesForTag:s}=Xs(cn(_=>({rules:_.rules,tags:_.tags,getRulesForTag:_.getRulesForTag}))),[o,l]=C.useState(""),[u,d]=C.useState(""),h=C.useMemo(()=>{const _=o.toLowerCase();return _?i.filter(E=>{var T;return E.name.toLowerCase().includes(_)||((T=E.description)==null?void 0:T.toLowerCase().includes(_))}):i},[i,o]),m=C.useMemo(()=>{const _=u.toLowerCase();return _?a.filter(E=>E.name.toLowerCase().includes(_)||E.content.toLowerCase().includes(_)||E.type.toLowerCase().includes(_)):a},[a,u]),g=C.useCallback((_,E)=>{n(_,E)},[n]),v=C.useCallback((_,E)=>{r(_,E)},[r]),b=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter tags...",value:o,onChange:_=>l(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Es,{className:"h-64 border rounded-md p-2 bg-background/50",children:h.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:i.length===0?"No tags defined.":"No tags match filter."}):p.jsx("div",{className:"space-y-1",children:h.map(_=>{const E=s(_.id);return p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Oc,{id:`tag-activate-${_.id}`,checked:e.has(_.id),onCheckedChange:T=>g(_.id,!!T),className:"mt-0.5"}),p.jsxs($t,{htmlFor:`tag-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),_.description&&p.jsx("span",{className:"block text-xs text-muted-foreground",children:_.description}),E.length>0&&p.jsxs("span",{className:"block text-xs text-blue-500 dark:text-blue-400",children:["Includes: ",E.map(T=>T.name).join(", ")]})]})]})},_.id)})})})]}),w=()=>p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"relative",children:[p.jsx(es,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),p.jsx(xn,{type:"search",placeholder:"Filter rules...",value:u,onChange:_=>d(_.target.value),className:"pl-8 h-9"})]}),p.jsx(Es,{className:"h-64 border rounded-md p-2 bg-background/50",children:m.length===0?p.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:a.length===0?"No rules defined.":"No rules match filter."}):p.jsx("div",{className:"space-y-1",children:m.map(_=>p.jsx("div",{className:"flex items-start justify-between p-1.5 rounded hover:bg-muted",children:p.jsxs("div",{className:"flex items-center space-x-2 flex-grow mr-2",children:[p.jsx(Oc,{id:`rule-activate-${_.id}`,checked:t.has(_.id),onCheckedChange:E=>v(_.id,!!E),className:"mt-0.5"}),p.jsxs($t,{htmlFor:`rule-activate-${_.id}`,className:"text-sm font-normal cursor-pointer space-y-0.5",children:[p.jsx("span",{className:"block font-medium",children:_.name}),p.jsxs("span",{className:"block text-xs text-muted-foreground",children:["Type: ",_.type]}),p.jsxs("span",{className:"block text-xs text-muted-foreground truncate max-w-xs",children:["Content: ",_.content]})]})]})},_.id))})})]}),x=[{value:"tags",label:"Activate Tags",content:b()},{value:"rules",label:"Activate Rules",content:w()}];return p.jsx("div",{className:"p-0 h-[28rem] max-w-lg",children:p.jsx($c,{tabs:x,defaultValue:"tags"})})};let of=new Set,lf=new Set,Wg=()=>{};const g3e=()=>{const[e,t]=C.useState({activeTagIds:of,activeRuleIds:lf}),[n,r]=C.useState(!1),[a,i]=C.useState(()=>On.getState().status==="streaming"),s=Xs(h=>h.rules.length>0||h.tags.length>0);C.useEffect(()=>(Wg=h=>{const m=h({activeTagIds:of,activeRuleIds:lf});of=m.activeTagIds,lf=m.activeRuleIds,t(m)},t({activeTagIds:of,activeRuleIds:lf}),()=>{Wg=()=>{}}),[]),C.useEffect(()=>{const h=m=>{i(m.status==="streaming")};return Et.on(St.INTERACTION_STATUS_CHANGED,h),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,h)}},[]);const o=C.useCallback((h,m)=>{Wg(g=>{const v=new Set(g.activeTagIds);return m?v.add(h):v.delete(h),{...g,activeTagIds:v}})},[]),l=C.useCallback((h,m)=>{Wg(g=>{const v=new Set(g.activeRuleIds);return m?v.add(h):v.delete(h),{...g,activeRuleIds:v}})},[]),u=e.activeTagIds.size>0||e.activeRuleIds.size>0,d=a||!s;return s?p.jsxs(Mo,{open:n,onOpenChange:r,children:[p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Oo,{asChild:!0,children:p.jsx(Rt,{variant:u?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d,"aria-label":"Configure Rules & Tags for Next Turn",children:p.jsx(_Y,{className:"h-4 w-4"})})})}),p.jsx(Yn,{side:"top",children:u?`Rules/Tags Active (${e.activeTagIds.size} tags, ${e.activeRuleIds.size} rules)`:"Activate Rules/Tags (Next Turn)"})]})}),p.jsx(Po,{className:"w-auto p-0",align:"start",children:p.jsx(m3e,{activeTagIds:e.activeTagIds,activeRuleIds:e.activeRuleIds,onToggleTag:o,onToggleRule:l})})]}):null};function y3e(){const e=Sr.getState().registerPromptControl;of=new Set,lf=new Set,e({id:"core-rules-tags",status:()=>Xs.getState().isLoading?"loading":"ready",triggerRenderer:()=>gt.createElement(g3e),getMetadata:()=>{const t=Array.from(of),n=Array.from(lf);if(t.length>0||n.length>0)return{activeTagIds:t,activeRuleIds:n}},clearOnSubmit:()=>{of=new Set,lf=new Set,Wg(()=>({activeTagIds:new Set,activeRuleIds:new Set}))},show:()=>Xs.getState().rules.length>0}),console.log("[Function] Registered Core Rules & Tags Control")}const b3e=({initialEnabled:e,onToggle:t})=>{const[n,r]=C.useState(e),[a,i]=C.useState(()=>On.getState().status==="streaming"),[s,o]=C.useState(!1),l=ar(d=>d.autoTitleEnabled);C.useEffect(()=>{r(e)},[e]),C.useEffect(()=>{const d=m=>{i(m.status==="streaming")},h=()=>{const m=On.getState(),g=m.currentConversationId!==null&&m.interactions.filter(v=>v.conversationId===m.currentConversationId).length===0;o(g),!g&&n&&u()};return h(),Et.on(St.INTERACTION_STATUS_CHANGED,d),Et.on(St.CONTEXT_CHANGED,h),Et.on(St.INTERACTION_COMPLETED,h),()=>{Et.off(St.INTERACTION_STATUS_CHANGED,d),Et.off(St.CONTEXT_CHANGED,h),Et.off(St.INTERACTION_COMPLETED,h)}},[n]);const u=()=>{const d=!n;r(d),t(d)};return!l||!s?null:p.jsx(Un,{delayDuration:100,children:p.jsxs(Kn,{children:[p.jsx(Zn,{asChild:!0,children:p.jsx(Rt,{variant:n?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:u,disabled:a,"aria-label":n?"Disable Auto-Title for this Chat":"Enable Auto-Title for this Chat",children:p.jsx(V8,{className:vt("h-4 w-4",n?"text-primary":"text-muted-foreground")})})}),p.jsx(Yn,{side:"top",children:n?"Auto-Title Enabled (Click to Disable)":"Auto-Title Disabled (Click to Enable)"})]})})};let Lg=!1;function v3e(){const e=Sr.getState().registerPromptControl;Lg=!1;const t=n=>{Lg=n};e({id:"core-auto-title",status:()=>"ready",triggerRenderer:()=>gt.createElement(b3e,{initialEnabled:Lg,onToggle:t}),getMetadata:()=>Lg?{autoTitleEnabledForTurn:!0}:void 0,clearOnSubmit:()=>{Lg=!1}}),console.log("[Function] Registered Core Auto-Title Control")}const w3e=[hEe,NAe,AAe,t3e,r3e,v3e,u3e,f3e,p3e,PAe,kRe,y3e,i3e,qRe,jAe,l3e,NRe,PRe,URe];function x3e(){return p.jsxs(cEe,{children:[p.jsx(oEe,{}),p.jsx(sEe,{}),p.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:p.jsx("main",{className:"flex-grow overflow-hidden",children:p.jsx(eEe,{controls:w3e})})})]})}sX();VW.createRoot(document.getElementById("root")).render(p.jsx(gt.StrictMode,{children:p.jsx(x3e,{})}));
