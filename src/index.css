/* src/index.css */
@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));
@tailwind utilities;

/* Base Layers */
@layer base {
    :root {
        --background: oklch(0.98 0.02 100);
        --foreground: oklch(0.2 0.05 230);
        --card: oklch(1 0 0);
        --card-foreground: oklch(0.2 0.05 230);
        --popover: oklch(1 0 0);
        --popover-foreground: oklch(0.2 0.05 230);
        --primary: oklch(0.7 0.2 140);
        --primary-foreground: oklch(0.98 0.02 100);
        --secondary: oklch(0.5 0.2 180);
        --secondary-foreground: oklch(0.98 0.02 100);
        --muted: oklch(0.9 0.05 100);
        --muted-foreground: oklch(0.4 0.05 230);
        --accent: oklch(0.8 0.15 110);
        --accent-foreground: oklch(0.2 0.05 230);
        --destructive: oklch(0.577 0.245 27.325);
        --destructive-foreground: oklch(0.98 0.02 100);
        --border: oklch(0.8 0.03 230);
        --input: oklch(0.8 0.03 230);
        --ring: oklch(0.7 0.2 140); /* Ring color */
        --radius: 0.625rem;
        --chart-1: oklch(0.5 0.2 180);
        --chart-2: oklch(0.6 0.2 160);
        --chart-3: oklch(0.7 0.2 140);
        --chart-4: oklch(0.8 0.15 110);
        --chart-5: oklch(0.9 0.1 90);
        --sidebar: oklch(0.98 0.02 100);
        --sidebar-foreground: oklch(0.2 0.05 230);
        --sidebar-primary: oklch(0.7 0.2 140);
        --sidebar-primary-foreground: oklch(0.98 0.02 100);
        --sidebar-accent: oklch(0.8 0.15 110);
        --sidebar-accent-foreground: oklch(0.2 0.05 230);
        --sidebar-border: oklch(0.8 0.03 230);
        --sidebar-ring: oklch(0.7 0.2 140);
        --code-bg: oklch(0.15 0.05 230);

        /* Selection Colors */
        --selection-background: oklch(
            0.7 0.2 140 / 0.2
        ); /* Primary with alpha */
        --selection-foreground: oklch(0.7 0.2 140); /* Primary */
        --selection-border: oklch(0.7 0.2 140); /* Primary */
        --selection-muted-background: oklch(
            0.7 0.2 140 / 0.1
        ); /* Primary with less alpha */
    }

    .dark {
        --background: oklch(0.15 0.05 230);
        --foreground: oklch(0.9 0.05 90);
        --card: oklch(0.2 0.05 230);
        --card-foreground: oklch(0.9 0.05 90);
        --popover: oklch(0.2 0.05 230);
        --popover-foreground: oklch(0.9 0.05 90);
        --primary: oklch(0.7 0.2 140);
        --primary-foreground: oklch(0.15 0.05 230);
        --secondary: oklch(0.5 0.2 180);
        --secondary-foreground: oklch(0.9 0.05 90);
        --muted: oklch(0.25 0.05 230);
        --muted-foreground: oklch(0.7 0.05 90);
        --accent: oklch(0.8 0.15 110);
        --accent-foreground: oklch(0.15 0.05 230);
        --destructive: oklch(0.5 0.2 20);
        --destructive-foreground: oklch(0.9 0.05 90);
        --border: oklch(0.3 0.05 230);
        --input: oklch(0.3 0.05 230);
        --ring: oklch(0.7 0.2 140); /* Ring color */
        --chart-1: oklch(0.5 0.2 180);
        --chart-2: oklch(0.6 0.2 160);
        --chart-3: oklch(0.7 0.2 140);
        --chart-4: oklch(0.8 0.15 110);
        --chart-5: oklch(0.9 0.1 90);
        --sidebar: oklch(0.2 0.05 230);
        --sidebar-foreground: oklch(0.9 0.05 90);
        --sidebar-primary: oklch(0.7 0.2 140);
        --sidebar-primary-foreground: oklch(0.15 0.05 230);
        --sidebar-accent: oklch(0.8 0.15 110);
        --sidebar-accent-foreground: oklch(0.15 0.05 230);
        --sidebar-border: oklch(0.3 0.05 230);
        --sidebar-ring: oklch(0.7 0.2 140);
        --code-bg: oklch(0.1 0.02 230);

        /* Selection Colors */
        --selection-background: oklch(
            0.7 0.2 140 / 0.3
        ); /* Primary with alpha */
        --selection-foreground: oklch(0.8 0.15 110); /* Accent */
        --selection-border: oklch(0.7 0.2 140); /* Primary */
        --selection-muted-background: oklch(
            0.7 0.2 140 / 0.15
        ); /* Primary with less alpha */
    }
}

@layer base {
    * {
        /* Use CSS variable for border color */
        border-color: var(--border);
        /* Use CSS variable for outline color */
        outline-color: var(--ring);
    }
    body {
        @apply bg-background text-foreground;
    }
}

/* --- STYLES FOR MARKDOWN CONTENT --- */
@layer utilities {
    .markdown-content {
        @apply text-base leading-relaxed;
    }
    .markdown-content h1 {
        @apply text-3xl font-bold my-4 text-foreground;
    }
    .markdown-content h2 {
        @apply text-2xl font-semibold my-3 text-foreground;
    }
    .markdown-content h3 {
        @apply text-xl font-semibold my-2 text-foreground;
    }
    .markdown-content p {
        @apply my-4 text-foreground;
    }
    /* Inline code */
    .markdown-content code:not(pre > code) {
        @apply bg-muted text-muted-foreground px-1.5 py-0.5 rounded
      text-[0.9em] font-mono;
    }

    /* Markdown code blocks (not using CodeBlock component) */
    .markdown-content pre:not(.code-block-content) {
        /* Use CSS variable */
        @apply border border-[--border] rounded-md overflow-x-auto;
    }
    .markdown-content pre:not(.code-block-content) > code.hljs {
        @apply font-mono text-sm leading-relaxed block p-4;
    }
    .markdown-content blockquote {
        /* Use CSS variable */
        @apply border-l-4 border-[--border] pl-4 italic
      text-muted-foreground my-4;
    }
    .markdown-content ul {
        @apply list-disc list-outside pl-6 my-4;
    }
    .markdown-content ol {
        @apply list-decimal list-outside pl-6 my-4;
    }
    .markdown-content li {
        @apply my-1;
    }
    .markdown-content table {
        @apply border-collapse w-full my-4 text-sm;
    }
    .markdown-content th,
    .markdown-content td {
        /* Use CSS variable */
        @apply border border-[--border] px-3 py-2 text-left;
    }
    .markdown-content th {
        @apply bg-muted/80 dark:bg-muted/50 font-semibold;
    }
    .markdown-content a {
        @apply text-primary underline hover:text-primary/80;
    }

    /* --- THEMED CODEBLOCK STYLING (Container/Header) --- */
    .code-block-container {
        /* Use CSS variable */
        @apply relative my-4 overflow-hidden border border-[--border] rounded-lg;
    }
    .code-block-header {
        /* Use CSS variable */
        @apply flex items-center justify-between px-4 py-2
      border-b border-[--border];
        background-color: var(--card);
    }
    .code-block-content {
        @apply overflow-x-auto text-sm;
    }
    .code-block-content code {
        @apply p-4 block;
    }

    /* --- INTERACTION CARD STYLES --- */
    .interaction-card-actions {
        /* Use CSS variable */
        @apply absolute bottom-1 right-1 flex items-center space-x-1 p-1
      bg-card/80 backdrop-blur-sm rounded border border-[--border]
      opacity-0 group-hover:opacity-100 transition-opacity duration-200;
    }
    /* Sticky actions within the card */
    .interaction-card-actions-sticky {
        /* Use CSS variable */
        @apply sticky bottom-1 right-1 z-10 float-right /* Use float to keep it right */
      flex items-center space-x-1 p-1
      bg-card/80 backdrop-blur-sm rounded border border-[--border]
      opacity-0 group-hover:opacity-100 transition-opacity duration-200;
    }

    /* Folded content preview */
    .folded-content-preview {
        @apply relative max-h-20 overflow-hidden cursor-pointer;
        /* Fade-out effect */
        mask-image: linear-gradient(to bottom, black 50%, transparent 100%);
        -webkit-mask-image: linear-gradient(
            to bottom,
            black 50%,
            transparent 100%
        );
    }
    .folded-content-preview:hover {
        @apply bg-muted/50 rounded;
    }
} /* End @layer utilities */

/* Custom scrollbar styles */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}
::-webkit-scrollbar-track {
    @apply bg-muted/30 rounded-full;
}
::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/50 rounded-full;
}
::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/70;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}
.animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
}
@keyframes slideInFromTop {
    from {
        transform: translateY(-10px);
        opacity: 0;
    }
    to {
        transform: translateY(0);
        opacity: 1;
    }
}
.animate-slideInFromTop {
    animation: slideInFromTop 0.3s ease-out forwards;
}
