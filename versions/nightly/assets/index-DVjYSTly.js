var l7=Object.defineProperty;var c7=(e,t,n)=>t in e?l7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var pi=(e,t,n)=>c7(e,typeof t!="symbol"?t+"":t,n);function u7(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(r,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var ld=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function si(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Tx={exports:{}},bm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $R;function d7(){if($R)return bm;$R=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var s in a)s!=="key"&&(i[s]=a[s])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return bm.Fragment=t,bm.jsx=n,bm.jsxs=n,bm}var BR;function f7(){return BR||(BR=1,Tx.exports=d7()),Tx.exports}var y=f7(),Ax={exports:{}};function h7(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var D6={exports:{}},oa=D6.exports={},Ts,As;function GE(){throw new Error("setTimeout has not been defined")}function WE(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?Ts=setTimeout:Ts=GE}catch{Ts=GE}try{typeof clearTimeout=="function"?As=clearTimeout:As=WE}catch{As=WE}})();function j6(e){if(Ts===setTimeout)return setTimeout(e,0);if((Ts===GE||!Ts)&&setTimeout)return Ts=setTimeout,setTimeout(e,0);try{return Ts(e,0)}catch{try{return Ts.call(null,e,0)}catch{return Ts.call(this,e,0)}}}function p7(e){if(As===clearTimeout)return clearTimeout(e);if((As===WE||!As)&&clearTimeout)return As=clearTimeout,clearTimeout(e);try{return As(e)}catch{try{return As.call(null,e)}catch{return As.call(this,e)}}}var Dl=[],eh=!1,cd,Lb=-1;function m7(){!eh||!cd||(eh=!1,cd.length?Dl=cd.concat(Dl):Lb=-1,Dl.length&&M6())}function M6(){if(!eh){var e=j6(m7);eh=!0;for(var t=Dl.length;t;){for(cd=Dl,Dl=[];++Lb<t;)cd&&cd[Lb].run();Lb=-1,t=Dl.length}cd=null,eh=!1,p7(e)}}oa.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];Dl.push(new P6(e,t)),Dl.length===1&&!eh&&j6(M6)};function P6(e,t){this.fun=e,this.array=t}P6.prototype.run=function(){this.fun.apply(null,this.array)};oa.title="browser";oa.browser=!0;oa.env={};oa.argv=[];oa.version="";oa.versions={};function Wl(){}oa.on=Wl;oa.addListener=Wl;oa.once=Wl;oa.off=Wl;oa.removeListener=Wl;oa.removeAllListeners=Wl;oa.emit=Wl;oa.prependListener=Wl;oa.prependOnceListener=Wl;oa.listeners=function(e){return[]};oa.binding=function(e){throw new Error("process.binding is not supported")};oa.cwd=function(){return"/"};oa.chdir=function(e){throw new Error("process.chdir is not supported")};oa.umask=function(){return 0};var g7=D6.exports;const Xr=h7(g7);var Dn={},zR;function y7(){if(zR)return Dn;zR=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(U){return U===null||typeof U!="object"?null:(U=h&&U[h]||U["@@iterator"],typeof U=="function"?U:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function _(U,Q,X){this.props=U,this.context=Q,this.refs=b,this.updater=X||g}_.prototype.isReactComponent={},_.prototype.setState=function(U,Q){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Q,"setState")},_.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function x(){}x.prototype=_.prototype;function S(U,Q,X){this.props=U,this.context=Q,this.refs=b,this.updater=X||g}var E=S.prototype=new x;E.constructor=S,v(E,_.prototype),E.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},R=Object.prototype.hasOwnProperty;function D(U,Q,X,de,be,_e){return X=_e.ref,{$$typeof:e,type:U,key:Q,ref:X!==void 0?X:null,props:_e}}function O(U,Q){return D(U.type,Q,void 0,void 0,void 0,U.props)}function L(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function B(U){var Q={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(X){return Q[X]})}var Y=/\/+/g;function F(U,Q){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):Q.toString(36)}function Z(){}function q(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(Z,Z):(U.status="pending",U.then(function(Q){U.status==="pending"&&(U.status="fulfilled",U.value=Q)},function(Q){U.status==="pending"&&(U.status="rejected",U.reason=Q)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function ne(U,Q,X,de,be){var _e=typeof U;(_e==="undefined"||_e==="boolean")&&(U=null);var Pe=!1;if(U===null)Pe=!0;else switch(_e){case"bigint":case"string":case"number":Pe=!0;break;case"object":switch(U.$$typeof){case e:case t:Pe=!0;break;case d:return Pe=U._init,ne(Pe(U._payload),Q,X,de,be)}}if(Pe)return be=be(U),Pe=de===""?"."+F(U,0):de,C(be)?(X="",Pe!=null&&(X=Pe.replace(Y,"$&/")+"/"),ne(be,Q,X,"",function(Ce){return Ce})):be!=null&&(L(be)&&(be=O(be,X+(be.key==null||U&&U.key===be.key?"":(""+be.key).replace(Y,"$&/")+"/")+Pe)),Q.push(be)),1;Pe=0;var Ne=de===""?".":de+":";if(C(U))for(var Re=0;Re<U.length;Re++)de=U[Re],_e=Ne+F(de,Re),Pe+=ne(de,Q,X,_e,be);else if(Re=p(U),typeof Re=="function")for(U=Re.call(U),Re=0;!(de=U.next()).done;)de=de.value,_e=Ne+F(de,Re++),Pe+=ne(de,Q,X,_e,be);else if(_e==="object"){if(typeof U.then=="function")return ne(q(U),Q,X,de,be);throw Q=String(U),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Pe}function ae(U,Q,X){if(U==null)return U;var de=[],be=0;return ne(U,de,"","",function(_e){return Q.call(X,_e,be++)}),de}function re(U){if(U._status===-1){var Q=U._result;Q=Q(),Q.then(function(X){(U._status===0||U._status===-1)&&(U._status=1,U._result=X)},function(X){(U._status===0||U._status===-1)&&(U._status=2,U._result=X)}),U._status===-1&&(U._status=0,U._result=Q)}if(U._status===1)return U._result.default;throw U._result}var ee=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Q))return}else if(typeof Xr=="object"&&typeof Xr.emit=="function"){Xr.emit("uncaughtException",U);return}console.error(U)};function ie(){}return Dn.Children={map:ae,forEach:function(U,Q,X){ae(U,function(){Q.apply(this,arguments)},X)},count:function(U){var Q=0;return ae(U,function(){Q++}),Q},toArray:function(U){return ae(U,function(Q){return Q})||[]},only:function(U){if(!L(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Dn.Component=_,Dn.Fragment=n,Dn.Profiler=a,Dn.PureComponent=S,Dn.StrictMode=r,Dn.Suspense=l,Dn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,Dn.__COMPILER_RUNTIME={__proto__:null,c:function(U){return k.H.useMemoCache(U)}},Dn.cache=function(U){return function(){return U.apply(null,arguments)}},Dn.cloneElement=function(U,Q,X){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var de=v({},U.props),be=U.key,_e=void 0;if(Q!=null)for(Pe in Q.ref!==void 0&&(_e=void 0),Q.key!==void 0&&(be=""+Q.key),Q)!R.call(Q,Pe)||Pe==="key"||Pe==="__self"||Pe==="__source"||Pe==="ref"&&Q.ref===void 0||(de[Pe]=Q[Pe]);var Pe=arguments.length-2;if(Pe===1)de.children=X;else if(1<Pe){for(var Ne=Array(Pe),Re=0;Re<Pe;Re++)Ne[Re]=arguments[Re+2];de.children=Ne}return D(U.type,be,void 0,void 0,_e,de)},Dn.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:i,_context:U},U},Dn.createElement=function(U,Q,X){var de,be={},_e=null;if(Q!=null)for(de in Q.key!==void 0&&(_e=""+Q.key),Q)R.call(Q,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(be[de]=Q[de]);var Pe=arguments.length-2;if(Pe===1)be.children=X;else if(1<Pe){for(var Ne=Array(Pe),Re=0;Re<Pe;Re++)Ne[Re]=arguments[Re+2];be.children=Ne}if(U&&U.defaultProps)for(de in Pe=U.defaultProps,Pe)be[de]===void 0&&(be[de]=Pe[de]);return D(U,_e,void 0,void 0,null,be)},Dn.createRef=function(){return{current:null}},Dn.forwardRef=function(U){return{$$typeof:s,render:U}},Dn.isValidElement=L,Dn.lazy=function(U){return{$$typeof:d,_payload:{_status:-1,_result:U},_init:re}},Dn.memo=function(U,Q){return{$$typeof:u,type:U,compare:Q===void 0?null:Q}},Dn.startTransition=function(U){var Q=k.T,X={};k.T=X;try{var de=U(),be=k.S;be!==null&&be(X,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(ie,ee)}catch(_e){ee(_e)}finally{k.T=Q}},Dn.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},Dn.use=function(U){return k.H.use(U)},Dn.useActionState=function(U,Q,X){return k.H.useActionState(U,Q,X)},Dn.useCallback=function(U,Q){return k.H.useCallback(U,Q)},Dn.useContext=function(U){return k.H.useContext(U)},Dn.useDebugValue=function(){},Dn.useDeferredValue=function(U,Q){return k.H.useDeferredValue(U,Q)},Dn.useEffect=function(U,Q,X){var de=k.H;if(typeof X=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return de.useEffect(U,Q)},Dn.useId=function(){return k.H.useId()},Dn.useImperativeHandle=function(U,Q,X){return k.H.useImperativeHandle(U,Q,X)},Dn.useInsertionEffect=function(U,Q){return k.H.useInsertionEffect(U,Q)},Dn.useLayoutEffect=function(U,Q){return k.H.useLayoutEffect(U,Q)},Dn.useMemo=function(U,Q){return k.H.useMemo(U,Q)},Dn.useOptimistic=function(U,Q){return k.H.useOptimistic(U,Q)},Dn.useReducer=function(U,Q,X){return k.H.useReducer(U,Q,X)},Dn.useRef=function(U){return k.H.useRef(U)},Dn.useState=function(U){return k.H.useState(U)},Dn.useSyncExternalStore=function(U,Q,X){return k.H.useSyncExternalStore(U,Q,X)},Dn.useTransition=function(){return k.H.useTransition()},Dn.version="19.1.0",Dn}var UR;function yC(){return UR||(UR=1,Ax.exports=y7()),Ax.exports}var N=yC();const yt=si(N),F6=u7({__proto__:null,default:yt},[N]);var Nx={exports:{}},vm={},Rx={exports:{}},Ix={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HR;function b7(){return HR||(HR=1,function(e){function t(ae,re){var ee=ae.length;ae.push(re);e:for(;0<ee;){var ie=ee-1>>>1,U=ae[ie];if(0<a(U,re))ae[ie]=re,ae[ee]=U,ee=ie;else break e}}function n(ae){return ae.length===0?null:ae[0]}function r(ae){if(ae.length===0)return null;var re=ae[0],ee=ae.pop();if(ee!==re){ae[0]=ee;e:for(var ie=0,U=ae.length,Q=U>>>1;ie<Q;){var X=2*(ie+1)-1,de=ae[X],be=X+1,_e=ae[be];if(0>a(de,ee))be<U&&0>a(_e,de)?(ae[ie]=_e,ae[be]=ee,ie=be):(ae[ie]=de,ae[X]=ee,ie=X);else if(be<U&&0>a(_e,ee))ae[ie]=_e,ae[be]=ee,ie=be;else break e}}return re}function a(ae,re){var ee=ae.sortIndex-re.sortIndex;return ee!==0?ee:ae.id-re.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],d=1,h=null,p=3,g=!1,v=!1,b=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function C(ae){for(var re=n(u);re!==null;){if(re.callback===null)r(u);else if(re.startTime<=ae)r(u),re.sortIndex=re.expirationTime,t(l,re);else break;re=n(u)}}function k(ae){if(b=!1,C(ae),!v)if(n(l)!==null)v=!0,R||(R=!0,F());else{var re=n(u);re!==null&&ne(k,re.startTime-ae)}}var R=!1,D=-1,O=5,L=-1;function B(){return _?!0:!(e.unstable_now()-L<O)}function Y(){if(_=!1,R){var ae=e.unstable_now();L=ae;var re=!0;try{e:{v=!1,b&&(b=!1,S(D),D=-1),g=!0;var ee=p;try{t:{for(C(ae),h=n(l);h!==null&&!(h.expirationTime>ae&&B());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,p=h.priorityLevel;var U=ie(h.expirationTime<=ae);if(ae=e.unstable_now(),typeof U=="function"){h.callback=U,C(ae),re=!0;break t}h===n(l)&&r(l),C(ae)}else r(l);h=n(l)}if(h!==null)re=!0;else{var Q=n(u);Q!==null&&ne(k,Q.startTime-ae),re=!1}}break e}finally{h=null,p=ee,g=!1}re=void 0}}finally{re?F():R=!1}}}var F;if(typeof E=="function")F=function(){E(Y)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,q=Z.port2;Z.port1.onmessage=Y,F=function(){q.postMessage(null)}}else F=function(){x(Y,0)};function ne(ae,re){D=x(function(){ae(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ae){ae.callback=null},e.unstable_forceFrameRate=function(ae){0>ae||125<ae?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<ae?Math.floor(1e3/ae):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(ae){switch(p){case 1:case 2:case 3:var re=3;break;default:re=p}var ee=p;p=re;try{return ae()}finally{p=ee}},e.unstable_requestPaint=function(){_=!0},e.unstable_runWithPriority=function(ae,re){switch(ae){case 1:case 2:case 3:case 4:case 5:break;default:ae=3}var ee=p;p=ae;try{return re()}finally{p=ee}},e.unstable_scheduleCallback=function(ae,re,ee){var ie=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?ie+ee:ie):ee=ie,ae){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ee+U,ae={id:d++,callback:re,priorityLevel:ae,startTime:ee,expirationTime:U,sortIndex:-1},ee>ie?(ae.sortIndex=ee,t(u,ae),n(l)===null&&ae===n(u)&&(b?(S(D),D=-1):b=!0,ne(k,ee-ie))):(ae.sortIndex=U,t(l,ae),v||g||(v=!0,R||(R=!0,F()))),ae},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(ae){var re=p;return function(){var ee=p;p=re;try{return ae.apply(this,arguments)}finally{p=ee}}}}(Ix)),Ix}var qR;function v7(){return qR||(qR=1,Rx.exports=b7()),Rx.exports}var Ox={exports:{}},Ja={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VR;function w7(){if(VR)return Ja;VR=1;var e=yC();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function i(l,u,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:h==null?null:""+h,children:l,containerInfo:u,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Ja.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Ja.createPortal=function(l,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return i(l,u,null,d)},Ja.flushSync=function(l){var u=o.T,d=r.p;try{if(o.T=null,r.p=2,l)return l()}finally{o.T=u,r.p=d,r.d.f()}},Ja.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},Ja.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Ja.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var d=u.as,h=s(d,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:g}):d==="script"&&r.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Ja.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=s(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},Ja.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,h=s(d,u.crossOrigin);r.d.L(l,d,{crossOrigin:h,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Ja.preloadModule=function(l,u){if(typeof l=="string")if(u){var d=s(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},Ja.requestFormReset=function(l){r.d.r(l)},Ja.unstable_batchedUpdates=function(l,u){return l(u)},Ja.useFormState=function(l,u,d){return o.H.useFormState(l,u,d)},Ja.useFormStatus=function(){return o.H.useHostTransitionStatus()},Ja.version="19.1.0",Ja}var GR;function L6(){if(GR)return Ox.exports;GR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Ox.exports=w7(),Ox.exports}var WR;function _7(){if(WR)return vm;WR=1;var e=v7(),t=yC(),n=L6();function r(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)f+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function i(c){var f=c,m=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,(f.flags&4098)!==0&&(m=f.return),c=f.return;while(c)}return f.tag===3?m:null}function o(c){if(c.tag===13){var f=c.memoizedState;if(f===null&&(c=c.alternate,c!==null&&(f=c.memoizedState)),f!==null)return f.dehydrated}return null}function s(c){if(i(c)!==c)throw Error(r(188))}function l(c){var f=c.alternate;if(!f){if(f=i(c),f===null)throw Error(r(188));return f!==c?null:c}for(var m=c,w=f;;){var A=m.return;if(A===null)break;var P=A.alternate;if(P===null){if(w=A.return,w!==null){m=w;continue}break}if(A.child===P.child){for(P=A.child;P;){if(P===m)return s(A),c;if(P===w)return s(A),f;P=P.sibling}throw Error(r(188))}if(m.return!==w.return)m=A,w=P;else{for(var se=!1,Se=A.child;Se;){if(Se===m){se=!0,m=A,w=P;break}if(Se===w){se=!0,w=A,m=P;break}Se=Se.sibling}if(!se){for(Se=P.child;Se;){if(Se===m){se=!0,m=P,w=A;break}if(Se===w){se=!0,w=P,m=A;break}Se=Se.sibling}if(!se)throw Error(r(189))}}if(m.alternate!==w)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:f}function u(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c;for(c=c.child;c!==null;){if(f=u(c),f!==null)return f;c=c.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function F(c){return c===null||typeof c!="object"?null:(c=Y&&c[Y]||c["@@iterator"],typeof c=="function"?c:null)}var Z=Symbol.for("react.client.reference");function q(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===Z?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case v:return"Fragment";case _:return"Profiler";case b:return"StrictMode";case k:return"Suspense";case R:return"SuspenseList";case L:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case E:return(c.displayName||"Context")+".Provider";case S:return(c._context.displayName||"Context")+".Consumer";case C:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case D:return f=c.displayName||null,f!==null?f:q(c.type)||"Memo";case O:f=c._payload,c=c._init;try{return q(c(f))}catch{}}return null}var ne=Array.isArray,ae=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},ie=[],U=-1;function Q(c){return{current:c}}function X(c){0>U||(c.current=ie[U],ie[U]=null,U--)}function de(c,f){U++,ie[U]=c.current,c.current=f}var be=Q(null),_e=Q(null),Pe=Q(null),Ne=Q(null);function Re(c,f){switch(de(Pe,f),de(_e,c),de(be,null),f.nodeType){case 9:case 11:c=(c=f.documentElement)&&(c=c.namespaceURI)?hR(c):0;break;default:if(c=f.tagName,f=f.namespaceURI)f=hR(f),c=pR(f,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}X(be),de(be,c)}function Ce(){X(be),X(_e),X(Pe)}function Fe(c){c.memoizedState!==null&&de(Ne,c);var f=be.current,m=pR(f,c.type);f!==m&&(de(_e,c),de(be,m))}function Qe(c){_e.current===c&&(X(be),X(_e)),Ne.current===c&&(X(Ne),hm._currentValue=ee)}var Le=Object.prototype.hasOwnProperty,Ie=e.unstable_scheduleCallback,V=e.unstable_cancelCallback,me=e.unstable_shouldYield,Te=e.unstable_requestPaint,le=e.unstable_now,oe=e.unstable_getCurrentPriorityLevel,J=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,Me=e.unstable_NormalPriority,Ee=e.unstable_LowPriority,We=e.unstable_IdlePriority,kt=e.log,at=e.unstable_setDisableYieldValue,_t=null,jt=null;function Dt(c){if(typeof kt=="function"&&at(c),jt&&typeof jt.setStrictMode=="function")try{jt.setStrictMode(_t,c)}catch{}}var Gt=Math.clz32?Math.clz32:G,ye=Math.log,I=Math.LN2;function G(c){return c>>>=0,c===0?32:31-(ye(c)/I|0)|0}var fe=256,Oe=4194304;function ve(c){var f=c&42;if(f!==0)return f;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function ke(c,f,m){var w=c.pendingLanes;if(w===0)return 0;var A=0,P=c.suspendedLanes,se=c.pingedLanes;c=c.warmLanes;var Se=w&134217727;return Se!==0?(w=Se&~P,w!==0?A=ve(w):(se&=Se,se!==0?A=ve(se):m||(m=Se&~c,m!==0&&(A=ve(m))))):(Se=w&~P,Se!==0?A=ve(Se):se!==0?A=ve(se):m||(m=w&~c,m!==0&&(A=ve(m)))),A===0?0:f!==0&&f!==A&&(f&P)===0&&(P=A&-A,m=f&-f,P>=m||P===32&&(m&4194048)!==0)?f:A}function ce(c,f){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&f)===0}function ft(c,f){switch(c){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vt(){var c=fe;return fe<<=1,(fe&4194048)===0&&(fe=256),c}function M(){var c=Oe;return Oe<<=1,(Oe&62914560)===0&&(Oe=4194304),c}function Be(c){for(var f=[],m=0;31>m;m++)f.push(c);return f}function tt(c,f){c.pendingLanes|=f,f!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function ge(c,f,m,w,A,P){var se=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var Se=c.entanglements,ze=c.expirationTimes,dt=c.hiddenUpdates;for(m=se&~m;0<m;){var Et=31-Gt(m),It=1<<Et;Se[Et]=0,ze[Et]=-1;var mt=dt[Et];if(mt!==null)for(dt[Et]=null,Et=0;Et<mt.length;Et++){var gt=mt[Et];gt!==null&&(gt.lane&=-536870913)}m&=~It}w!==0&&De(c,w,0),P!==0&&A===0&&c.tag!==0&&(c.suspendedLanes|=P&~(se&~f))}function De(c,f,m){c.pendingLanes|=f,c.suspendedLanes&=~f;var w=31-Gt(f);c.entangledLanes|=f,c.entanglements[w]=c.entanglements[w]|1073741824|m&4194090}function Ke(c,f){var m=c.entangledLanes|=f;for(c=c.entanglements;m;){var w=31-Gt(m),A=1<<w;A&f|c[w]&f&&(c[w]|=f),m&=~A}}function Nt(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function pe(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function H(){var c=re.p;return c!==0?c:(c=window.event,c===void 0?32:DR(c.type))}function z(c,f){var m=re.p;try{return re.p=c,f()}finally{re.p=m}}var W=Math.random().toString(36).slice(2),he="__reactFiber$"+W,Ae="__reactProps$"+W,He="__reactContainer$"+W,pt="__reactEvents$"+W,Vt="__reactListeners$"+W,ut="__reactHandles$"+W,Tt="__reactResources$"+W,Mt="__reactMarker$"+W;function Xt(c){delete c[he],delete c[Ae],delete c[pt],delete c[Vt],delete c[ut]}function An(c){var f=c[he];if(f)return f;for(var m=c.parentNode;m;){if(f=m[He]||m[he]){if(m=f.alternate,f.child!==null||m!==null&&m.child!==null)for(c=bR(c);c!==null;){if(m=c[he])return m;c=bR(c)}return f}c=m,m=c.parentNode}return null}function zn(c){if(c=c[he]||c[He]){var f=c.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return c}return null}function vr(c){var f=c.tag;if(f===5||f===26||f===27||f===6)return c.stateNode;throw Error(r(33))}function wr(c){var f=c[Tt];return f||(f=c[Tt]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function jn(c){c[Mt]=!0}var ci=new Set,ss={};function ls(c,f){cs(c,f),cs(c+"Capture",f)}function cs(c,f){for(ss[c]=f,c=0;c<f.length;c++)ci.add(f[c])}var qr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),us={},ro={};function Vg(c){return Le.call(ro,c)?!0:Le.call(us,c)?!1:qr.test(c)?ro[c]=!0:(us[c]=!0,!1)}function Ro(c,f,m){if(Vg(f))if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(f);return;case"boolean":var w=f.toLowerCase().slice(0,5);if(w!=="data-"&&w!=="aria-"){c.removeAttribute(f);return}}c.setAttribute(f,""+m)}}function Js(c,f,m){if(m===null)c.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(f);return}c.setAttribute(f,""+m)}}function $i(c,f,m,w){if(w===null)c.removeAttribute(m);else{switch(typeof w){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(f,m,""+w)}}var Nu,ds;function Qs(c){if(Nu===void 0)try{throw Error()}catch(m){var f=m.stack.trim().match(/\n( *(at )?)/);Nu=f&&f[1]||"",ds=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Nu+c+ds}var Ql=!1;function Kd(c,f){if(!c||Ql)return"";Ql=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var w={DetermineComponentFrameRoot:function(){try{if(f){var It=function(){throw Error()};if(Object.defineProperty(It.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(It,[])}catch(gt){var mt=gt}Reflect.construct(c,[],It)}else{try{It.call()}catch(gt){mt=gt}c.call(It.prototype)}}else{try{throw Error()}catch(gt){mt=gt}(It=c())&&typeof It.catch=="function"&&It.catch(function(){})}}catch(gt){if(gt&&mt&&typeof gt.stack=="string")return[gt.stack,mt.stack]}return[null,null]}};w.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(w.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(w.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var P=w.DetermineComponentFrameRoot(),se=P[0],Se=P[1];if(se&&Se){var ze=se.split(`
`),dt=Se.split(`
`);for(A=w=0;w<ze.length&&!ze[w].includes("DetermineComponentFrameRoot");)w++;for(;A<dt.length&&!dt[A].includes("DetermineComponentFrameRoot");)A++;if(w===ze.length||A===dt.length)for(w=ze.length-1,A=dt.length-1;1<=w&&0<=A&&ze[w]!==dt[A];)A--;for(;1<=w&&0<=A;w--,A--)if(ze[w]!==dt[A]){if(w!==1||A!==1)do if(w--,A--,0>A||ze[w]!==dt[A]){var Et=`
`+ze[w].replace(" at new "," at ");return c.displayName&&Et.includes("<anonymous>")&&(Et=Et.replace("<anonymous>",c.displayName)),Et}while(1<=w&&0<=A);break}}}finally{Ql=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?Qs(m):""}function Un(c){switch(c.tag){case 26:case 27:case 5:return Qs(c.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 15:return Kd(c.type,!1);case 11:return Kd(c.type.render,!1);case 1:return Kd(c.type,!0);case 31:return Qs("Activity");default:return""}}function mp(c){try{var f="";do f+=Un(c),c=c.return;while(c);return f}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function ui(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function gp(c){var f=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function Tr(c){var f=gp(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,f),w=""+c[f];if(!c.hasOwnProperty(f)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,P=m.set;return Object.defineProperty(c,f,{configurable:!0,get:function(){return A.call(this)},set:function(se){w=""+se,P.call(this,se)}}),Object.defineProperty(c,f,{enumerable:m.enumerable}),{getValue:function(){return w},setValue:function(se){w=""+se},stopTracking:function(){c._valueTracker=null,delete c[f]}}}}function fs(c){c._valueTracker||(c._valueTracker=Tr(c))}function ec(c){if(!c)return!1;var f=c._valueTracker;if(!f)return!0;var m=f.getValue(),w="";return c&&(w=gp(c)?c.checked?"true":"false":c.value),c=w,c!==m?(f.setValue(c),!0):!1}function Io(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var yp=/[\n"\\]/g;function Ka(c){return c.replace(yp,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function tc(c,f,m,w,A,P,se,Se){c.name="",se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?c.type=se:c.removeAttribute("type"),f!=null?se==="number"?(f===0&&c.value===""||c.value!=f)&&(c.value=""+ui(f)):c.value!==""+ui(f)&&(c.value=""+ui(f)):se!=="submit"&&se!=="reset"||c.removeAttribute("value"),f!=null?nc(c,se,ui(f)):m!=null?nc(c,se,ui(m)):w!=null&&c.removeAttribute("value"),A==null&&P!=null&&(c.defaultChecked=!!P),A!=null&&(c.checked=A&&typeof A!="function"&&typeof A!="symbol"),Se!=null&&typeof Se!="function"&&typeof Se!="symbol"&&typeof Se!="boolean"?c.name=""+ui(Se):c.removeAttribute("name")}function bp(c,f,m,w,A,P,se,Se){if(P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"&&(c.type=P),f!=null||m!=null){if(!(P!=="submit"&&P!=="reset"||f!=null))return;m=m!=null?""+ui(m):"",f=f!=null?""+ui(f):m,Se||f===c.value||(c.value=f),c.defaultValue=f}w=w??A,w=typeof w!="function"&&typeof w!="symbol"&&!!w,c.checked=Se?c.checked:!!w,c.defaultChecked=!!w,se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"&&(c.name=se)}function nc(c,f,m){f==="number"&&Io(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function el(c,f,m,w){if(c=c.options,f){f={};for(var A=0;A<m.length;A++)f["$"+m[A]]=!0;for(m=0;m<c.length;m++)A=f.hasOwnProperty("$"+c[m].value),c[m].selected!==A&&(c[m].selected=A),A&&w&&(c[m].defaultSelected=!0)}else{for(m=""+ui(m),f=null,A=0;A<c.length;A++){if(c[A].value===m){c[A].selected=!0,w&&(c[A].defaultSelected=!0);return}f!==null||c[A].disabled||(f=c[A])}f!==null&&(f.selected=!0)}}function rc(c,f,m){if(f!=null&&(f=""+ui(f),f!==c.value&&(c.value=f),m==null)){c.defaultValue!==f&&(c.defaultValue=f);return}c.defaultValue=m!=null?""+ui(m):""}function vp(c,f,m,w){if(f==null){if(w!=null){if(m!=null)throw Error(r(92));if(ne(w)){if(1<w.length)throw Error(r(93));w=w[0]}m=w}m==null&&(m=""),f=m}m=ui(f),c.defaultValue=m,w=c.textContent,w===m&&w!==""&&w!==null&&(c.value=w)}function ac(c,f){if(f){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=f;return}}c.textContent=f}var Wn=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Zd(c,f,m){var w=f.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?w?c.setProperty(f,""):f==="float"?c.cssFloat="":c[f]="":w?c.setProperty(f,m):typeof m!="number"||m===0||Wn.has(f)?f==="float"?c.cssFloat=m:c[f]=(""+m).trim():c[f]=m+"px"}function Gg(c,f,m){if(f!=null&&typeof f!="object")throw Error(r(62));if(c=c.style,m!=null){for(var w in m)!m.hasOwnProperty(w)||f!=null&&f.hasOwnProperty(w)||(w.indexOf("--")===0?c.setProperty(w,""):w==="float"?c.cssFloat="":c[w]="");for(var A in f)w=f[A],f.hasOwnProperty(A)&&m[A]!==w&&Zd(c,A,w)}else for(var P in f)f.hasOwnProperty(P)&&Zd(c,P,f[P])}function wp(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var di=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tl(c){return ic.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var ao=null;function Yd(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var nl=null,Pr=null;function Bi(c){var f=zn(c);if(f&&(c=f.stateNode)){var m=c[Ae]||null;e:switch(c=f.stateNode,f.type){case"input":if(tc(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),f=m.name,m.type==="radio"&&f!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+Ka(""+f)+'"][type="radio"]'),f=0;f<m.length;f++){var w=m[f];if(w!==c&&w.form===c.form){var A=w[Ae]||null;if(!A)throw Error(r(90));tc(w,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(f=0;f<m.length;f++)w=m[f],w.form===c.form&&ec(w)}break e;case"textarea":rc(c,m.value,m.defaultValue);break e;case"select":f=m.value,f!=null&&el(c,!!m.multiple,f,!1)}}}var rl=!1;function oc(c,f,m){if(rl)return c(f,m);rl=!0;try{var w=c(f);return w}finally{if(rl=!1,(nl!==null||Pr!==null)&&(jy(),nl&&(f=nl,c=Pr,Pr=nl=null,Bi(f),c)))for(f=0;f<c.length;f++)Bi(c[f])}}function al(c,f){var m=c.stateNode;if(m===null)return null;var w=m[Ae]||null;if(w===null)return null;m=w[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(c=c.type,w=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!w;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,f,typeof m));return m}var Ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_p=!1;if(Ea)try{var Za={};Object.defineProperty(Za,"passive",{get:function(){_p=!0}}),window.addEventListener("test",Za,Za),window.removeEventListener("test",Za,Za)}catch{_p=!1}var io=null,Xd=null,sc=null;function lc(){if(sc)return sc;var c,f=Xd,m=f.length,w,A="value"in io?io.value:io.textContent,P=A.length;for(c=0;c<m&&f[c]===A[c];c++);var se=m-c;for(w=1;w<=se&&f[m-w]===A[P-w];w++);return sc=A.slice(c,1<w?1-w:void 0)}function cc(c){var f=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&f===13&&(c=13)):c=f,c===10&&(c=13),32<=c||c===13?c:0}function Ru(){return!0}function Wg(){return!1}function sa(c){function f(m,w,A,P,se){this._reactName=m,this._targetInst=A,this.type=w,this.nativeEvent=P,this.target=se,this.currentTarget=null;for(var Se in c)c.hasOwnProperty(Se)&&(m=c[Se],this[Se]=m?m(P):P[Se]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?Ru:Wg,this.isPropagationStopped=Wg,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Ru)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Ru)},persist:function(){},isPersistent:Ru}),f}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jd=sa(il),hs=d({},il,{view:0,detail:0}),Qd=sa(hs),Iu,xp,Ou,ef=d({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ol,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ou&&(Ou&&c.type==="mousemove"?(Iu=c.screenX-Ou.screenX,xp=c.screenY-Ou.screenY):xp=Iu=0,Ou=c),Iu)},movementY:function(c){return"movementY"in c?c.movementY:xp}}),tf=sa(ef),Sp=d({},ef,{dataTransfer:0}),Kg=sa(Sp),nf=d({},hs,{relatedTarget:0}),uc=sa(nf),rf=d({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),Zg=sa(rf),z1=d({},il,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),af=sa(z1),Ep=d({},il,{data:0}),of=sa(Ep),Cp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ca={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Du(c){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(c):(c=Ca[c])?!!f[c]:!1}function ol(){return Du}var Yg=d({},hs,{key:function(c){if(c.key){var f=Cp[c.key]||c.key;if(f!=="Unidentified")return f}return c.type==="keypress"?(c=cc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?kp[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ol,charCode:function(c){return c.type==="keypress"?cc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?cc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),sf=sa(Yg),Xg=d({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tp=sa(Xg),lf=d({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ol}),Ap=sa(lf),sl=d({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),Np=sa(sl),Rp=d({},ef,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),cf=sa(Rp),Ip=d({},il,{newState:0,oldState:0}),Jg=sa(Ip),U1=[9,13,27,32],ju=Ea&&"CompositionEvent"in window,ps=null;Ea&&"documentMode"in document&&(ps=document.documentMode);var H1=Ea&&"TextEvent"in window&&!ps,uf=Ea&&(!ju||ps&&8<ps&&11>=ps),df=" ",Qg=!1;function Op(c,f){switch(c){case"keyup":return U1.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ey(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ll=!1;function ty(c,f){switch(c){case"compositionend":return ey(f);case"keypress":return f.which!==32?null:(Qg=!0,df);case"textInput":return c=f.data,c===df&&Qg?null:c;default:return null}}function q1(c,f){if(ll)return c==="compositionend"||!ju&&Op(c,f)?(c=lc(),sc=Xd=io=null,ll=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return uf&&f.locale!=="ko"?null:f.data;default:return null}}var ny={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ff(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f==="input"?!!ny[c.type]:f==="textarea"}function Dp(c,f,m,w){nl?Pr?Pr.push(w):Pr=[w]:nl=w,f=By(f,"onChange"),0<f.length&&(m=new Jd("onChange","change",null,m,w),c.push({event:m,listeners:f}))}var dc=null,Mu=null;function V1(c){lR(c,0)}function hf(c){var f=vr(c);if(ec(f))return c}function Pu(c,f){if(c==="change")return f}var oo=!1;if(Ea){var Fr;if(Ea){var fc="oninput"in document;if(!fc){var fi=document.createElement("div");fi.setAttribute("oninput","return;"),fc=typeof fi.oninput=="function"}Fr=fc}else Fr=!1;oo=Fr&&(!document.documentMode||9<document.documentMode)}function ry(){dc&&(dc.detachEvent("onpropertychange",pf),Mu=dc=null)}function pf(c){if(c.propertyName==="value"&&hf(Mu)){var f=[];Dp(f,Mu,c,Yd(c)),oc(V1,f)}}function ay(c,f,m){c==="focusin"?(ry(),dc=f,Mu=m,dc.attachEvent("onpropertychange",pf)):c==="focusout"&&ry()}function cl(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return hf(Mu)}function jp(c,f){if(c==="click")return hf(f)}function hc(c,f){if(c==="input"||c==="change")return hf(f)}function ms(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var Ya=typeof Object.is=="function"?Object.is:ms;function T(c,f){if(Ya(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var m=Object.keys(c),w=Object.keys(f);if(m.length!==w.length)return!1;for(w=0;w<m.length;w++){var A=m[w];if(!Le.call(f,A)||!Ya(c[A],f[A]))return!1}return!0}function j(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function K(c,f){var m=j(c);c=0;for(var w;m;){if(m.nodeType===3){if(w=c+m.textContent.length,c<=f&&w>=f)return{node:m,offset:f-c};c=w}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=j(m)}}function te(c,f){return c&&f?c===f?!0:c&&c.nodeType===3?!1:f&&f.nodeType===3?te(c,f.parentNode):"contains"in c?c.contains(f):c.compareDocumentPosition?!!(c.compareDocumentPosition(f)&16):!1:!1}function ue(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var f=Io(c.document);f instanceof c.HTMLIFrameElement;){try{var m=typeof f.contentWindow.location.href=="string"}catch{m=!1}if(m)c=f.contentWindow;else break;f=Io(c.document)}return f}function we(c){var f=c&&c.nodeName&&c.nodeName.toLowerCase();return f&&(f==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||f==="textarea"||c.contentEditable==="true")}var je=Ea&&"documentMode"in document&&11>=document.documentMode,$e=null,Ge=null,Ye=null,nt=!1;function qe(c,f,m){var w=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;nt||$e==null||$e!==Io(w)||(w=$e,"selectionStart"in w&&we(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),Ye&&T(Ye,w)||(Ye=w,w=By(Ge,"onSelect"),0<w.length&&(f=new Jd("onSelect","select",null,f,m),c.push({event:f,listeners:w}),f.target=$e)))}function it(c,f){var m={};return m[c.toLowerCase()]=f.toLowerCase(),m["Webkit"+c]="webkit"+f,m["Moz"+c]="moz"+f,m}var Ve={animationend:it("Animation","AnimationEnd"),animationiteration:it("Animation","AnimationIteration"),animationstart:it("Animation","AnimationStart"),transitionrun:it("Transition","TransitionRun"),transitionstart:it("Transition","TransitionStart"),transitioncancel:it("Transition","TransitionCancel"),transitionend:it("Transition","TransitionEnd")},et={},ot={};Ea&&(ot=document.createElement("div").style,"AnimationEvent"in window||(delete Ve.animationend.animation,delete Ve.animationiteration.animation,delete Ve.animationstart.animation),"TransitionEvent"in window||delete Ve.transitionend.transition);function Xe(c){if(et[c])return et[c];if(!Ve[c])return c;var f=Ve[c],m;for(m in f)if(f.hasOwnProperty(m)&&m in ot)return et[c]=f[m];return c}var ht=Xe("animationend"),bt=Xe("animationiteration"),wt=Xe("animationstart"),St=Xe("transitionrun"),Bt=Xe("transitionstart"),Kt=Xe("transitioncancel"),Ft=Xe("transitionend"),Ut=new Map,Zt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zt.push("scrollEnd");function Lt(c,f){Ut.set(c,f),ls(f,[c])}var Qt=new WeakMap;function hn(c,f){if(typeof c=="object"&&c!==null){var m=Qt.get(c);return m!==void 0?m:(f={value:c,source:f,stack:mp(f)},Qt.set(c,f),f)}return{value:c,source:f,stack:mp(f)}}var pn=[],Nn=0,Ba=0;function _n(){for(var c=Nn,f=Ba=Nn=0;f<c;){var m=pn[f];pn[f++]=null;var w=pn[f];pn[f++]=null;var A=pn[f];pn[f++]=null;var P=pn[f];if(pn[f++]=null,w!==null&&A!==null){var se=w.pending;se===null?A.next=A:(A.next=se.next,se.next=A),w.pending=A}P!==0&&ka(m,A,P)}}function ta(c,f,m,w){pn[Nn++]=c,pn[Nn++]=f,pn[Nn++]=m,pn[Nn++]=w,Ba|=w,c.lanes|=w,c=c.alternate,c!==null&&(c.lanes|=w)}function la(c,f,m,w){return ta(c,f,m,w),so(c)}function Oo(c,f){return ta(c,null,null,f),so(c)}function ka(c,f,m){c.lanes|=m;var w=c.alternate;w!==null&&(w.lanes|=m);for(var A=!1,P=c.return;P!==null;)P.childLanes|=m,w=P.alternate,w!==null&&(w.childLanes|=m),P.tag===22&&(c=P.stateNode,c===null||c._visibility&1||(A=!0)),c=P,P=P.return;return c.tag===3?(P=c.stateNode,A&&f!==null&&(A=31-Gt(m),c=P.hiddenUpdates,w=c[A],w===null?c[A]=[f]:w.push(f),f.lane=m|536870912),P):null}function so(c){if(50<im)throw im=0,X_=null,Error(r(185));for(var f=c.return;f!==null;)c=f,f=c.return;return c.tag===3?c.stateNode:null}var gs={};function WB(c,f,m,w){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zi(c,f,m,w){return new WB(c,f,m,w)}function G1(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ul(c,f){var m=c.alternate;return m===null?(m=zi(c.tag,f,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=f,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,f=c.dependencies,m.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function WT(c,f){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=f,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,f=m.dependencies,c.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),c}function iy(c,f,m,w,A,P){var se=0;if(w=c,typeof c=="function")G1(c)&&(se=1);else if(typeof c=="string")se=Zz(c,m,be.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case L:return c=zi(31,m,f,A),c.elementType=L,c.lanes=P,c;case v:return Fu(m.children,A,P,f);case b:se=8,A|=24;break;case _:return c=zi(12,m,f,A|2),c.elementType=_,c.lanes=P,c;case k:return c=zi(13,m,f,A),c.elementType=k,c.lanes=P,c;case R:return c=zi(19,m,f,A),c.elementType=R,c.lanes=P,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:case E:se=10;break e;case S:se=9;break e;case C:se=11;break e;case D:se=14;break e;case O:se=16,w=null;break e}se=29,m=Error(r(130,c===null?"null":typeof c,"")),w=null}return f=zi(se,m,f,A),f.elementType=c,f.type=w,f.lanes=P,f}function Fu(c,f,m,w){return c=zi(7,c,w,f),c.lanes=m,c}function W1(c,f,m){return c=zi(6,c,null,f),c.lanes=m,c}function K1(c,f,m){return f=zi(4,c.children!==null?c.children:[],c.key,f),f.lanes=m,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}var mf=[],gf=0,oy=null,sy=0,lo=[],co=0,Lu=null,dl=1,fl="";function $u(c,f){mf[gf++]=sy,mf[gf++]=oy,oy=c,sy=f}function KT(c,f,m){lo[co++]=dl,lo[co++]=fl,lo[co++]=Lu,Lu=c;var w=dl;c=fl;var A=32-Gt(w)-1;w&=~(1<<A),m+=1;var P=32-Gt(f)+A;if(30<P){var se=A-A%5;P=(w&(1<<se)-1).toString(32),w>>=se,A-=se,dl=1<<32-Gt(f)+A|m<<A|w,fl=P+c}else dl=1<<P|m<<A|w,fl=c}function Z1(c){c.return!==null&&($u(c,1),KT(c,1,0))}function Y1(c){for(;c===oy;)oy=mf[--gf],mf[gf]=null,sy=mf[--gf],mf[gf]=null;for(;c===Lu;)Lu=lo[--co],lo[co]=null,fl=lo[--co],lo[co]=null,dl=lo[--co],lo[co]=null}var hi=null,Zr=null,ir=!1,Bu=null,ys=!1,X1=Error(r(519));function zu(c){var f=Error(r(418,""));throw Fp(hn(f,c)),X1}function ZT(c){var f=c.stateNode,m=c.type,w=c.memoizedProps;switch(f[he]=c,f[Ae]=w,m){case"dialog":qn("cancel",f),qn("close",f);break;case"iframe":case"object":case"embed":qn("load",f);break;case"video":case"audio":for(m=0;m<sm.length;m++)qn(sm[m],f);break;case"source":qn("error",f);break;case"img":case"image":case"link":qn("error",f),qn("load",f);break;case"details":qn("toggle",f);break;case"input":qn("invalid",f),bp(f,w.value,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name,!0),fs(f);break;case"select":qn("invalid",f);break;case"textarea":qn("invalid",f),vp(f,w.value,w.defaultValue,w.children),fs(f)}m=w.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||f.textContent===""+m||w.suppressHydrationWarning===!0||fR(f.textContent,m)?(w.popover!=null&&(qn("beforetoggle",f),qn("toggle",f)),w.onScroll!=null&&qn("scroll",f),w.onScrollEnd!=null&&qn("scrollend",f),w.onClick!=null&&(f.onclick=zy),f=!0):f=!1,f||zu(c)}function YT(c){for(hi=c.return;hi;)switch(hi.tag){case 5:case 13:ys=!1;return;case 27:case 3:ys=!0;return;default:hi=hi.return}}function Mp(c){if(c!==hi)return!1;if(!ir)return YT(c),ir=!0,!1;var f=c.tag,m;if((m=f!==3&&f!==27)&&((m=f===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||hx(c.type,c.memoizedProps)),m=!m),m&&Zr&&zu(c),YT(c),f===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,f=0;c;){if(c.nodeType===8)if(m=c.data,m==="/$"){if(f===0){Zr=jo(c.nextSibling);break e}f--}else m!=="$"&&m!=="$!"&&m!=="$?"||f++;c=c.nextSibling}Zr=null}}else f===27?(f=Zr,Nc(c.type)?(c=yx,yx=null,Zr=c):Zr=f):Zr=hi?jo(c.stateNode.nextSibling):null;return!0}function Pp(){Zr=hi=null,ir=!1}function XT(){var c=Bu;return c!==null&&(Ti===null?Ti=c:Ti.push.apply(Ti,c),Bu=null),c}function Fp(c){Bu===null?Bu=[c]:Bu.push(c)}var J1=Q(null),Uu=null,hl=null;function pc(c,f,m){de(J1,f._currentValue),f._currentValue=m}function pl(c){c._currentValue=J1.current,X(J1)}function Q1(c,f,m){for(;c!==null;){var w=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,w!==null&&(w.childLanes|=f)):w!==null&&(w.childLanes&f)!==f&&(w.childLanes|=f),c===m)break;c=c.return}}function e_(c,f,m,w){var A=c.child;for(A!==null&&(A.return=c);A!==null;){var P=A.dependencies;if(P!==null){var se=A.child;P=P.firstContext;e:for(;P!==null;){var Se=P;P=A;for(var ze=0;ze<f.length;ze++)if(Se.context===f[ze]){P.lanes|=m,Se=P.alternate,Se!==null&&(Se.lanes|=m),Q1(P.return,m,c),w||(se=null);break e}P=Se.next}}else if(A.tag===18){if(se=A.return,se===null)throw Error(r(341));se.lanes|=m,P=se.alternate,P!==null&&(P.lanes|=m),Q1(se,m,c),se=null}else se=A.child;if(se!==null)se.return=A;else for(se=A;se!==null;){if(se===c){se=null;break}if(A=se.sibling,A!==null){A.return=se.return,se=A;break}se=se.return}A=se}}function Lp(c,f,m,w){c=null;for(var A=f,P=!1;A!==null;){if(!P){if((A.flags&524288)!==0)P=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var se=A.alternate;if(se===null)throw Error(r(387));if(se=se.memoizedProps,se!==null){var Se=A.type;Ya(A.pendingProps.value,se.value)||(c!==null?c.push(Se):c=[Se])}}else if(A===Ne.current){if(se=A.alternate,se===null)throw Error(r(387));se.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(c!==null?c.push(hm):c=[hm])}A=A.return}c!==null&&e_(f,c,m,w),f.flags|=262144}function ly(c){for(c=c.firstContext;c!==null;){if(!Ya(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Hu(c){Uu=c,hl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Xa(c){return JT(Uu,c)}function cy(c,f){return Uu===null&&Hu(c),JT(c,f)}function JT(c,f){var m=f._currentValue;if(f={context:f,memoizedValue:m,next:null},hl===null){if(c===null)throw Error(r(308));hl=f,c.dependencies={lanes:0,firstContext:f},c.flags|=524288}else hl=hl.next=f;return m}var KB=typeof AbortController<"u"?AbortController:function(){var c=[],f=this.signal={aborted:!1,addEventListener:function(m,w){c.push(w)}};this.abort=function(){f.aborted=!0,c.forEach(function(m){return m()})}},ZB=e.unstable_scheduleCallback,YB=e.unstable_NormalPriority,ma={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function t_(){return{controller:new KB,data:new Map,refCount:0}}function $p(c){c.refCount--,c.refCount===0&&ZB(YB,function(){c.controller.abort()})}var Bp=null,n_=0,yf=0,bf=null;function XB(c,f){if(Bp===null){var m=Bp=[];n_=0,yf=ax(),bf={status:"pending",value:void 0,then:function(w){m.push(w)}}}return n_++,f.then(QT,QT),f}function QT(){if(--n_===0&&Bp!==null){bf!==null&&(bf.status="fulfilled");var c=Bp;Bp=null,yf=0,bf=null;for(var f=0;f<c.length;f++)(0,c[f])()}}function JB(c,f){var m=[],w={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return c.then(function(){w.status="fulfilled",w.value=f;for(var A=0;A<m.length;A++)(0,m[A])(f)},function(A){for(w.status="rejected",w.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),w}var eA=ae.S;ae.S=function(c,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&XB(c,f),eA!==null&&eA(c,f)};var qu=Q(null);function r_(){var c=qu.current;return c!==null?c:Or.pooledCache}function uy(c,f){f===null?de(qu,qu.current):de(qu,f.pool)}function tA(){var c=r_();return c===null?null:{parent:ma._currentValue,pool:c}}var zp=Error(r(460)),nA=Error(r(474)),dy=Error(r(542)),a_={then:function(){}};function rA(c){return c=c.status,c==="fulfilled"||c==="rejected"}function fy(){}function aA(c,f,m){switch(m=c[m],m===void 0?c.push(f):m!==f&&(f.then(fy,fy),f=m),f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,oA(c),c;default:if(typeof f.status=="string")f.then(fy,fy);else{if(c=Or,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=f,c.status="pending",c.then(function(w){if(f.status==="pending"){var A=f;A.status="fulfilled",A.value=w}},function(w){if(f.status==="pending"){var A=f;A.status="rejected",A.reason=w}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw c=f.reason,oA(c),c}throw Up=f,zp}}var Up=null;function iA(){if(Up===null)throw Error(r(459));var c=Up;return Up=null,c}function oA(c){if(c===zp||c===dy)throw Error(r(483))}var mc=!1;function i_(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function o_(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function gc(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function yc(c,f,m){var w=c.updateQueue;if(w===null)return null;if(w=w.shared,(hr&2)!==0){var A=w.pending;return A===null?f.next=f:(f.next=A.next,A.next=f),w.pending=f,f=so(c),ka(c,null,m),f}return ta(c,w,f,m),so(c)}function Hp(c,f,m){if(f=f.updateQueue,f!==null&&(f=f.shared,(m&4194048)!==0)){var w=f.lanes;w&=c.pendingLanes,m|=w,f.lanes=m,Ke(c,m)}}function s_(c,f){var m=c.updateQueue,w=c.alternate;if(w!==null&&(w=w.updateQueue,m===w)){var A=null,P=null;if(m=m.firstBaseUpdate,m!==null){do{var se={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};P===null?A=P=se:P=P.next=se,m=m.next}while(m!==null);P===null?A=P=f:P=P.next=f}else A=P=f;m={baseState:w.baseState,firstBaseUpdate:A,lastBaseUpdate:P,shared:w.shared,callbacks:w.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=f:c.next=f,m.lastBaseUpdate=f}var l_=!1;function qp(){if(l_){var c=bf;if(c!==null)throw c}}function Vp(c,f,m,w){l_=!1;var A=c.updateQueue;mc=!1;var P=A.firstBaseUpdate,se=A.lastBaseUpdate,Se=A.shared.pending;if(Se!==null){A.shared.pending=null;var ze=Se,dt=ze.next;ze.next=null,se===null?P=dt:se.next=dt,se=ze;var Et=c.alternate;Et!==null&&(Et=Et.updateQueue,Se=Et.lastBaseUpdate,Se!==se&&(Se===null?Et.firstBaseUpdate=dt:Se.next=dt,Et.lastBaseUpdate=ze))}if(P!==null){var It=A.baseState;se=0,Et=dt=ze=null,Se=P;do{var mt=Se.lane&-536870913,gt=mt!==Se.lane;if(gt?(Kn&mt)===mt:(w&mt)===mt){mt!==0&&mt===yf&&(l_=!0),Et!==null&&(Et=Et.next={lane:0,tag:Se.tag,payload:Se.payload,callback:null,next:null});e:{var xn=c,mn=Se;mt=f;var Sr=m;switch(mn.tag){case 1:if(xn=mn.payload,typeof xn=="function"){It=xn.call(Sr,It,mt);break e}It=xn;break e;case 3:xn.flags=xn.flags&-65537|128;case 0:if(xn=mn.payload,mt=typeof xn=="function"?xn.call(Sr,It,mt):xn,mt==null)break e;It=d({},It,mt);break e;case 2:mc=!0}}mt=Se.callback,mt!==null&&(c.flags|=64,gt&&(c.flags|=8192),gt=A.callbacks,gt===null?A.callbacks=[mt]:gt.push(mt))}else gt={lane:mt,tag:Se.tag,payload:Se.payload,callback:Se.callback,next:null},Et===null?(dt=Et=gt,ze=It):Et=Et.next=gt,se|=mt;if(Se=Se.next,Se===null){if(Se=A.shared.pending,Se===null)break;gt=Se,Se=gt.next,gt.next=null,A.lastBaseUpdate=gt,A.shared.pending=null}}while(!0);Et===null&&(ze=It),A.baseState=ze,A.firstBaseUpdate=dt,A.lastBaseUpdate=Et,P===null&&(A.shared.lanes=0),Cc|=se,c.lanes=se,c.memoizedState=It}}function sA(c,f){if(typeof c!="function")throw Error(r(191,c));c.call(f)}function lA(c,f){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)sA(m[c],f)}var vf=Q(null),hy=Q(0);function cA(c,f){c=_l,de(hy,c),de(vf,f),_l=c|f.baseLanes}function c_(){de(hy,_l),de(vf,vf.current)}function u_(){_l=hy.current,X(vf),X(hy)}var bc=0,Fn=null,_r=null,ca=null,py=!1,wf=!1,Vu=!1,my=0,Gp=0,_f=null,QB=0;function na(){throw Error(r(321))}function d_(c,f){if(f===null)return!1;for(var m=0;m<f.length&&m<c.length;m++)if(!Ya(c[m],f[m]))return!1;return!0}function f_(c,f,m,w,A,P){return bc=P,Fn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,ae.H=c===null||c.memoizedState===null?GA:WA,Vu=!1,P=m(w,A),Vu=!1,wf&&(P=dA(f,m,w,A)),uA(c),P}function uA(c){ae.H=_y;var f=_r!==null&&_r.next!==null;if(bc=0,ca=_r=Fn=null,py=!1,Gp=0,_f=null,f)throw Error(r(300));c===null||Ta||(c=c.dependencies,c!==null&&ly(c)&&(Ta=!0))}function dA(c,f,m,w){Fn=c;var A=0;do{if(wf&&(_f=null),Gp=0,wf=!1,25<=A)throw Error(r(301));if(A+=1,ca=_r=null,c.updateQueue!=null){var P=c.updateQueue;P.lastEffect=null,P.events=null,P.stores=null,P.memoCache!=null&&(P.memoCache.index=0)}ae.H=oz,P=f(m,w)}while(wf);return P}function ez(){var c=ae.H,f=c.useState()[0];return f=typeof f.then=="function"?Wp(f):f,c=c.useState()[0],(_r!==null?_r.memoizedState:null)!==c&&(Fn.flags|=1024),f}function h_(){var c=my!==0;return my=0,c}function p_(c,f,m){f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~m}function m_(c){if(py){for(c=c.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}py=!1}bc=0,ca=_r=Fn=null,wf=!1,Gp=my=0,_f=null}function Ci(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ca===null?Fn.memoizedState=ca=c:ca=ca.next=c,ca}function ua(){if(_r===null){var c=Fn.alternate;c=c!==null?c.memoizedState:null}else c=_r.next;var f=ca===null?Fn.memoizedState:ca.next;if(f!==null)ca=f,_r=c;else{if(c===null)throw Fn.alternate===null?Error(r(467)):Error(r(310));_r=c,c={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},ca===null?Fn.memoizedState=ca=c:ca=ca.next=c}return ca}function g_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wp(c){var f=Gp;return Gp+=1,_f===null&&(_f=[]),c=aA(_f,c,f),f=Fn,(ca===null?f.memoizedState:ca.next)===null&&(f=f.alternate,ae.H=f===null||f.memoizedState===null?GA:WA),c}function gy(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Wp(c);if(c.$$typeof===E)return Xa(c)}throw Error(r(438,String(c)))}function y_(c){var f=null,m=Fn.updateQueue;if(m!==null&&(f=m.memoCache),f==null){var w=Fn.alternate;w!==null&&(w=w.updateQueue,w!==null&&(w=w.memoCache,w!=null&&(f={data:w.data.map(function(A){return A.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),m===null&&(m=g_(),Fn.updateQueue=m),m.memoCache=f,m=f.data[f.index],m===void 0)for(m=f.data[f.index]=Array(c),w=0;w<c;w++)m[w]=B;return f.index++,m}function ml(c,f){return typeof f=="function"?f(c):f}function yy(c){var f=ua();return b_(f,_r,c)}function b_(c,f,m){var w=c.queue;if(w===null)throw Error(r(311));w.lastRenderedReducer=m;var A=c.baseQueue,P=w.pending;if(P!==null){if(A!==null){var se=A.next;A.next=P.next,P.next=se}f.baseQueue=A=P,w.pending=null}if(P=c.baseState,A===null)c.memoizedState=P;else{f=A.next;var Se=se=null,ze=null,dt=f,Et=!1;do{var It=dt.lane&-536870913;if(It!==dt.lane?(Kn&It)===It:(bc&It)===It){var mt=dt.revertLane;if(mt===0)ze!==null&&(ze=ze.next={lane:0,revertLane:0,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null}),It===yf&&(Et=!0);else if((bc&mt)===mt){dt=dt.next,mt===yf&&(Et=!0);continue}else It={lane:0,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(Se=ze=It,se=P):ze=ze.next=It,Fn.lanes|=mt,Cc|=mt;It=dt.action,Vu&&m(P,It),P=dt.hasEagerState?dt.eagerState:m(P,It)}else mt={lane:It,revertLane:dt.revertLane,action:dt.action,hasEagerState:dt.hasEagerState,eagerState:dt.eagerState,next:null},ze===null?(Se=ze=mt,se=P):ze=ze.next=mt,Fn.lanes|=It,Cc|=It;dt=dt.next}while(dt!==null&&dt!==f);if(ze===null?se=P:ze.next=Se,!Ya(P,c.memoizedState)&&(Ta=!0,Et&&(m=bf,m!==null)))throw m;c.memoizedState=P,c.baseState=se,c.baseQueue=ze,w.lastRenderedState=P}return A===null&&(w.lanes=0),[c.memoizedState,w.dispatch]}function v_(c){var f=ua(),m=f.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var w=m.dispatch,A=m.pending,P=f.memoizedState;if(A!==null){m.pending=null;var se=A=A.next;do P=c(P,se.action),se=se.next;while(se!==A);Ya(P,f.memoizedState)||(Ta=!0),f.memoizedState=P,f.baseQueue===null&&(f.baseState=P),m.lastRenderedState=P}return[P,w]}function fA(c,f,m){var w=Fn,A=ua(),P=ir;if(P){if(m===void 0)throw Error(r(407));m=m()}else m=f();var se=!Ya((_r||A).memoizedState,m);se&&(A.memoizedState=m,Ta=!0),A=A.queue;var Se=mA.bind(null,w,A,c);if(Kp(2048,8,Se,[c]),A.getSnapshot!==f||se||ca!==null&&ca.memoizedState.tag&1){if(w.flags|=2048,xf(9,by(),pA.bind(null,w,A,m,f),null),Or===null)throw Error(r(349));P||(bc&124)!==0||hA(w,f,m)}return m}function hA(c,f,m){c.flags|=16384,c={getSnapshot:f,value:m},f=Fn.updateQueue,f===null?(f=g_(),Fn.updateQueue=f,f.stores=[c]):(m=f.stores,m===null?f.stores=[c]:m.push(c))}function pA(c,f,m,w){f.value=m,f.getSnapshot=w,gA(f)&&yA(c)}function mA(c,f,m){return m(function(){gA(f)&&yA(c)})}function gA(c){var f=c.getSnapshot;c=c.value;try{var m=f();return!Ya(c,m)}catch{return!0}}function yA(c){var f=Oo(c,2);f!==null&&Gi(f,c,2)}function w_(c){var f=Ci();if(typeof c=="function"){var m=c;if(c=m(),Vu){Dt(!0);try{m()}finally{Dt(!1)}}}return f.memoizedState=f.baseState=c,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:c},f}function bA(c,f,m,w){return c.baseState=m,b_(c,_r,typeof w=="function"?w:ml)}function tz(c,f,m,w,A){if(wy(c))throw Error(r(485));if(c=f.action,c!==null){var P={payload:A,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(se){P.listeners.push(se)}};ae.T!==null?m(!0):P.isTransition=!1,w(P),m=f.pending,m===null?(P.next=f.pending=P,vA(f,P)):(P.next=m.next,f.pending=m.next=P)}}function vA(c,f){var m=f.action,w=f.payload,A=c.state;if(f.isTransition){var P=ae.T,se={};ae.T=se;try{var Se=m(A,w),ze=ae.S;ze!==null&&ze(se,Se),wA(c,f,Se)}catch(dt){__(c,f,dt)}finally{ae.T=P}}else try{P=m(A,w),wA(c,f,P)}catch(dt){__(c,f,dt)}}function wA(c,f,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(w){_A(c,f,w)},function(w){return __(c,f,w)}):_A(c,f,m)}function _A(c,f,m){f.status="fulfilled",f.value=m,xA(f),c.state=m,f=c.pending,f!==null&&(m=f.next,m===f?c.pending=null:(m=m.next,f.next=m,vA(c,m)))}function __(c,f,m){var w=c.pending;if(c.pending=null,w!==null){w=w.next;do f.status="rejected",f.reason=m,xA(f),f=f.next;while(f!==w)}c.action=null}function xA(c){c=c.listeners;for(var f=0;f<c.length;f++)(0,c[f])()}function SA(c,f){return f}function EA(c,f){if(ir){var m=Or.formState;if(m!==null){e:{var w=Fn;if(ir){if(Zr){t:{for(var A=Zr,P=ys;A.nodeType!==8;){if(!P){A=null;break t}if(A=jo(A.nextSibling),A===null){A=null;break t}}P=A.data,A=P==="F!"||P==="F"?A:null}if(A){Zr=jo(A.nextSibling),w=A.data==="F!";break e}}zu(w)}w=!1}w&&(f=m[0])}}return m=Ci(),m.memoizedState=m.baseState=f,w={pending:null,lanes:0,dispatch:null,lastRenderedReducer:SA,lastRenderedState:f},m.queue=w,m=HA.bind(null,Fn,w),w.dispatch=m,w=w_(!1),P=k_.bind(null,Fn,!1,w.queue),w=Ci(),A={state:f,dispatch:null,action:c,pending:null},w.queue=A,m=tz.bind(null,Fn,A,P,m),A.dispatch=m,w.memoizedState=c,[f,m,!1]}function CA(c){var f=ua();return kA(f,_r,c)}function kA(c,f,m){if(f=b_(c,f,SA)[0],c=yy(ml)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var w=Wp(f)}catch(se){throw se===zp?dy:se}else w=f;f=ua();var A=f.queue,P=A.dispatch;return m!==f.memoizedState&&(Fn.flags|=2048,xf(9,by(),nz.bind(null,A,m),null)),[w,P,c]}function nz(c,f){c.action=f}function TA(c){var f=ua(),m=_r;if(m!==null)return kA(f,m,c);ua(),f=f.memoizedState,m=ua();var w=m.queue.dispatch;return m.memoizedState=c,[f,w,!1]}function xf(c,f,m,w){return c={tag:c,create:m,deps:w,inst:f,next:null},f=Fn.updateQueue,f===null&&(f=g_(),Fn.updateQueue=f),m=f.lastEffect,m===null?f.lastEffect=c.next=c:(w=m.next,m.next=c,c.next=w,f.lastEffect=c),c}function by(){return{destroy:void 0,resource:void 0}}function AA(){return ua().memoizedState}function vy(c,f,m,w){var A=Ci();w=w===void 0?null:w,Fn.flags|=c,A.memoizedState=xf(1|f,by(),m,w)}function Kp(c,f,m,w){var A=ua();w=w===void 0?null:w;var P=A.memoizedState.inst;_r!==null&&w!==null&&d_(w,_r.memoizedState.deps)?A.memoizedState=xf(f,P,m,w):(Fn.flags|=c,A.memoizedState=xf(1|f,P,m,w))}function NA(c,f){vy(8390656,8,c,f)}function RA(c,f){Kp(2048,8,c,f)}function IA(c,f){return Kp(4,2,c,f)}function OA(c,f){return Kp(4,4,c,f)}function DA(c,f){if(typeof f=="function"){c=c();var m=f(c);return function(){typeof m=="function"?m():f(null)}}if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function jA(c,f,m){m=m!=null?m.concat([c]):null,Kp(4,4,DA.bind(null,f,c),m)}function x_(){}function MA(c,f){var m=ua();f=f===void 0?null:f;var w=m.memoizedState;return f!==null&&d_(f,w[1])?w[0]:(m.memoizedState=[c,f],c)}function PA(c,f){var m=ua();f=f===void 0?null:f;var w=m.memoizedState;if(f!==null&&d_(f,w[1]))return w[0];if(w=c(),Vu){Dt(!0);try{c()}finally{Dt(!1)}}return m.memoizedState=[w,f],w}function S_(c,f,m){return m===void 0||(bc&1073741824)!==0?c.memoizedState=f:(c.memoizedState=m,c=$N(),Fn.lanes|=c,Cc|=c,m)}function FA(c,f,m,w){return Ya(m,f)?m:vf.current!==null?(c=S_(c,m,w),Ya(c,f)||(Ta=!0),c):(bc&42)===0?(Ta=!0,c.memoizedState=m):(c=$N(),Fn.lanes|=c,Cc|=c,f)}function LA(c,f,m,w,A){var P=re.p;re.p=P!==0&&8>P?P:8;var se=ae.T,Se={};ae.T=Se,k_(c,!1,f,m);try{var ze=A(),dt=ae.S;if(dt!==null&&dt(Se,ze),ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var Et=JB(ze,w);Zp(c,f,Et,Vi(c))}else Zp(c,f,w,Vi(c))}catch(It){Zp(c,f,{then:function(){},status:"rejected",reason:It},Vi())}finally{re.p=P,ae.T=se}}function rz(){}function E_(c,f,m,w){if(c.tag!==5)throw Error(r(476));var A=$A(c).queue;LA(c,A,f,ee,m===null?rz:function(){return BA(c),m(w)})}function $A(c){var f=c.memoizedState;if(f!==null)return f;f={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:ee},next:null};var m={};return f.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:m},next:null},c.memoizedState=f,c=c.alternate,c!==null&&(c.memoizedState=f),f}function BA(c){var f=$A(c).next.queue;Zp(c,f,{},Vi())}function C_(){return Xa(hm)}function zA(){return ua().memoizedState}function UA(){return ua().memoizedState}function az(c){for(var f=c.return;f!==null;){switch(f.tag){case 24:case 3:var m=Vi();c=gc(m);var w=yc(f,c,m);w!==null&&(Gi(w,f,m),Hp(w,f,m)),f={cache:t_()},c.payload=f;return}f=f.return}}function iz(c,f,m){var w=Vi();m={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},wy(c)?qA(f,m):(m=la(c,f,m,w),m!==null&&(Gi(m,c,w),VA(m,f,w)))}function HA(c,f,m){var w=Vi();Zp(c,f,m,w)}function Zp(c,f,m,w){var A={lane:w,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(wy(c))qA(f,A);else{var P=c.alternate;if(c.lanes===0&&(P===null||P.lanes===0)&&(P=f.lastRenderedReducer,P!==null))try{var se=f.lastRenderedState,Se=P(se,m);if(A.hasEagerState=!0,A.eagerState=Se,Ya(Se,se))return ta(c,f,A,0),Or===null&&_n(),!1}catch{}finally{}if(m=la(c,f,A,w),m!==null)return Gi(m,c,w),VA(m,f,w),!0}return!1}function k_(c,f,m,w){if(w={lane:2,revertLane:ax(),action:w,hasEagerState:!1,eagerState:null,next:null},wy(c)){if(f)throw Error(r(479))}else f=la(c,m,w,2),f!==null&&Gi(f,c,2)}function wy(c){var f=c.alternate;return c===Fn||f!==null&&f===Fn}function qA(c,f){wf=py=!0;var m=c.pending;m===null?f.next=f:(f.next=m.next,m.next=f),c.pending=f}function VA(c,f,m){if((m&4194048)!==0){var w=f.lanes;w&=c.pendingLanes,m|=w,f.lanes=m,Ke(c,m)}}var _y={readContext:Xa,use:gy,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useInsertionEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useSyncExternalStore:na,useId:na,useHostTransitionStatus:na,useFormState:na,useActionState:na,useOptimistic:na,useMemoCache:na,useCacheRefresh:na},GA={readContext:Xa,use:gy,useCallback:function(c,f){return Ci().memoizedState=[c,f===void 0?null:f],c},useContext:Xa,useEffect:NA,useImperativeHandle:function(c,f,m){m=m!=null?m.concat([c]):null,vy(4194308,4,DA.bind(null,f,c),m)},useLayoutEffect:function(c,f){return vy(4194308,4,c,f)},useInsertionEffect:function(c,f){vy(4,2,c,f)},useMemo:function(c,f){var m=Ci();f=f===void 0?null:f;var w=c();if(Vu){Dt(!0);try{c()}finally{Dt(!1)}}return m.memoizedState=[w,f],w},useReducer:function(c,f,m){var w=Ci();if(m!==void 0){var A=m(f);if(Vu){Dt(!0);try{m(f)}finally{Dt(!1)}}}else A=f;return w.memoizedState=w.baseState=A,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:A},w.queue=c,c=c.dispatch=iz.bind(null,Fn,c),[w.memoizedState,c]},useRef:function(c){var f=Ci();return c={current:c},f.memoizedState=c},useState:function(c){c=w_(c);var f=c.queue,m=HA.bind(null,Fn,f);return f.dispatch=m,[c.memoizedState,m]},useDebugValue:x_,useDeferredValue:function(c,f){var m=Ci();return S_(m,c,f)},useTransition:function(){var c=w_(!1);return c=LA.bind(null,Fn,c.queue,!0,!1),Ci().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,f,m){var w=Fn,A=Ci();if(ir){if(m===void 0)throw Error(r(407));m=m()}else{if(m=f(),Or===null)throw Error(r(349));(Kn&124)!==0||hA(w,f,m)}A.memoizedState=m;var P={value:m,getSnapshot:f};return A.queue=P,NA(mA.bind(null,w,P,c),[c]),w.flags|=2048,xf(9,by(),pA.bind(null,w,P,m,f),null),m},useId:function(){var c=Ci(),f=Or.identifierPrefix;if(ir){var m=fl,w=dl;m=(w&~(1<<32-Gt(w)-1)).toString(32)+m,f=""+f+"R"+m,m=my++,0<m&&(f+="H"+m.toString(32)),f+=""}else m=QB++,f=""+f+"r"+m.toString(32)+"";return c.memoizedState=f},useHostTransitionStatus:C_,useFormState:EA,useActionState:EA,useOptimistic:function(c){var f=Ci();f.memoizedState=f.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=m,f=k_.bind(null,Fn,!0,m),m.dispatch=f,[c,f]},useMemoCache:y_,useCacheRefresh:function(){return Ci().memoizedState=az.bind(null,Fn)}},WA={readContext:Xa,use:gy,useCallback:MA,useContext:Xa,useEffect:RA,useImperativeHandle:jA,useInsertionEffect:IA,useLayoutEffect:OA,useMemo:PA,useReducer:yy,useRef:AA,useState:function(){return yy(ml)},useDebugValue:x_,useDeferredValue:function(c,f){var m=ua();return FA(m,_r.memoizedState,c,f)},useTransition:function(){var c=yy(ml)[0],f=ua().memoizedState;return[typeof c=="boolean"?c:Wp(c),f]},useSyncExternalStore:fA,useId:zA,useHostTransitionStatus:C_,useFormState:CA,useActionState:CA,useOptimistic:function(c,f){var m=ua();return bA(m,_r,c,f)},useMemoCache:y_,useCacheRefresh:UA},oz={readContext:Xa,use:gy,useCallback:MA,useContext:Xa,useEffect:RA,useImperativeHandle:jA,useInsertionEffect:IA,useLayoutEffect:OA,useMemo:PA,useReducer:v_,useRef:AA,useState:function(){return v_(ml)},useDebugValue:x_,useDeferredValue:function(c,f){var m=ua();return _r===null?S_(m,c,f):FA(m,_r.memoizedState,c,f)},useTransition:function(){var c=v_(ml)[0],f=ua().memoizedState;return[typeof c=="boolean"?c:Wp(c),f]},useSyncExternalStore:fA,useId:zA,useHostTransitionStatus:C_,useFormState:TA,useActionState:TA,useOptimistic:function(c,f){var m=ua();return _r!==null?bA(m,_r,c,f):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:y_,useCacheRefresh:UA},Sf=null,Yp=0;function xy(c){var f=Yp;return Yp+=1,Sf===null&&(Sf=[]),aA(Sf,c,f)}function Xp(c,f){f=f.props.ref,c.ref=f!==void 0?f:null}function Sy(c,f){throw f.$$typeof===h?Error(r(525)):(c=Object.prototype.toString.call(f),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c)))}function KA(c){var f=c._init;return f(c._payload)}function ZA(c){function f(rt,Ze){if(c){var ct=rt.deletions;ct===null?(rt.deletions=[Ze],rt.flags|=16):ct.push(Ze)}}function m(rt,Ze){if(!c)return null;for(;Ze!==null;)f(rt,Ze),Ze=Ze.sibling;return null}function w(rt){for(var Ze=new Map;rt!==null;)rt.key!==null?Ze.set(rt.key,rt):Ze.set(rt.index,rt),rt=rt.sibling;return Ze}function A(rt,Ze){return rt=ul(rt,Ze),rt.index=0,rt.sibling=null,rt}function P(rt,Ze,ct){return rt.index=ct,c?(ct=rt.alternate,ct!==null?(ct=ct.index,ct<Ze?(rt.flags|=67108866,Ze):ct):(rt.flags|=67108866,Ze)):(rt.flags|=1048576,Ze)}function se(rt){return c&&rt.alternate===null&&(rt.flags|=67108866),rt}function Se(rt,Ze,ct,At){return Ze===null||Ze.tag!==6?(Ze=W1(ct,rt.mode,At),Ze.return=rt,Ze):(Ze=A(Ze,ct),Ze.return=rt,Ze)}function ze(rt,Ze,ct,At){var nn=ct.type;return nn===v?Et(rt,Ze,ct.props.children,At,ct.key):Ze!==null&&(Ze.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===O&&KA(nn)===Ze.type)?(Ze=A(Ze,ct.props),Xp(Ze,ct),Ze.return=rt,Ze):(Ze=iy(ct.type,ct.key,ct.props,null,rt.mode,At),Xp(Ze,ct),Ze.return=rt,Ze)}function dt(rt,Ze,ct,At){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==ct.containerInfo||Ze.stateNode.implementation!==ct.implementation?(Ze=K1(ct,rt.mode,At),Ze.return=rt,Ze):(Ze=A(Ze,ct.children||[]),Ze.return=rt,Ze)}function Et(rt,Ze,ct,At,nn){return Ze===null||Ze.tag!==7?(Ze=Fu(ct,rt.mode,At,nn),Ze.return=rt,Ze):(Ze=A(Ze,ct),Ze.return=rt,Ze)}function It(rt,Ze,ct){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=W1(""+Ze,rt.mode,ct),Ze.return=rt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:return ct=iy(Ze.type,Ze.key,Ze.props,null,rt.mode,ct),Xp(ct,Ze),ct.return=rt,ct;case g:return Ze=K1(Ze,rt.mode,ct),Ze.return=rt,Ze;case O:var At=Ze._init;return Ze=At(Ze._payload),It(rt,Ze,ct)}if(ne(Ze)||F(Ze))return Ze=Fu(Ze,rt.mode,ct,null),Ze.return=rt,Ze;if(typeof Ze.then=="function")return It(rt,xy(Ze),ct);if(Ze.$$typeof===E)return It(rt,cy(rt,Ze),ct);Sy(rt,Ze)}return null}function mt(rt,Ze,ct,At){var nn=Ze!==null?Ze.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return nn!==null?null:Se(rt,Ze,""+ct,At);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:return ct.key===nn?ze(rt,Ze,ct,At):null;case g:return ct.key===nn?dt(rt,Ze,ct,At):null;case O:return nn=ct._init,ct=nn(ct._payload),mt(rt,Ze,ct,At)}if(ne(ct)||F(ct))return nn!==null?null:Et(rt,Ze,ct,At,null);if(typeof ct.then=="function")return mt(rt,Ze,xy(ct),At);if(ct.$$typeof===E)return mt(rt,Ze,cy(rt,ct),At);Sy(rt,ct)}return null}function gt(rt,Ze,ct,At,nn){if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return rt=rt.get(ct)||null,Se(Ze,rt,""+At,nn);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case p:return rt=rt.get(At.key===null?ct:At.key)||null,ze(Ze,rt,At,nn);case g:return rt=rt.get(At.key===null?ct:At.key)||null,dt(Ze,rt,At,nn);case O:var $n=At._init;return At=$n(At._payload),gt(rt,Ze,ct,At,nn)}if(ne(At)||F(At))return rt=rt.get(ct)||null,Et(Ze,rt,At,nn,null);if(typeof At.then=="function")return gt(rt,Ze,ct,xy(At),nn);if(At.$$typeof===E)return gt(rt,Ze,ct,cy(Ze,At),nn);Sy(Ze,At)}return null}function xn(rt,Ze,ct,At){for(var nn=null,$n=null,un=Ze,bn=Ze=0,Na=null;un!==null&&bn<ct.length;bn++){un.index>bn?(Na=un,un=null):Na=un.sibling;var tr=mt(rt,un,ct[bn],At);if(tr===null){un===null&&(un=Na);break}c&&un&&tr.alternate===null&&f(rt,un),Ze=P(tr,Ze,bn),$n===null?nn=tr:$n.sibling=tr,$n=tr,un=Na}if(bn===ct.length)return m(rt,un),ir&&$u(rt,bn),nn;if(un===null){for(;bn<ct.length;bn++)un=It(rt,ct[bn],At),un!==null&&(Ze=P(un,Ze,bn),$n===null?nn=un:$n.sibling=un,$n=un);return ir&&$u(rt,bn),nn}for(un=w(un);bn<ct.length;bn++)Na=gt(un,rt,bn,ct[bn],At),Na!==null&&(c&&Na.alternate!==null&&un.delete(Na.key===null?bn:Na.key),Ze=P(Na,Ze,bn),$n===null?nn=Na:$n.sibling=Na,$n=Na);return c&&un.forEach(function(jc){return f(rt,jc)}),ir&&$u(rt,bn),nn}function mn(rt,Ze,ct,At){if(ct==null)throw Error(r(151));for(var nn=null,$n=null,un=Ze,bn=Ze=0,Na=null,tr=ct.next();un!==null&&!tr.done;bn++,tr=ct.next()){un.index>bn?(Na=un,un=null):Na=un.sibling;var jc=mt(rt,un,tr.value,At);if(jc===null){un===null&&(un=Na);break}c&&un&&jc.alternate===null&&f(rt,un),Ze=P(jc,Ze,bn),$n===null?nn=jc:$n.sibling=jc,$n=jc,un=Na}if(tr.done)return m(rt,un),ir&&$u(rt,bn),nn;if(un===null){for(;!tr.done;bn++,tr=ct.next())tr=It(rt,tr.value,At),tr!==null&&(Ze=P(tr,Ze,bn),$n===null?nn=tr:$n.sibling=tr,$n=tr);return ir&&$u(rt,bn),nn}for(un=w(un);!tr.done;bn++,tr=ct.next())tr=gt(un,rt,bn,tr.value,At),tr!==null&&(c&&tr.alternate!==null&&un.delete(tr.key===null?bn:tr.key),Ze=P(tr,Ze,bn),$n===null?nn=tr:$n.sibling=tr,$n=tr);return c&&un.forEach(function(s7){return f(rt,s7)}),ir&&$u(rt,bn),nn}function Sr(rt,Ze,ct,At){if(typeof ct=="object"&&ct!==null&&ct.type===v&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case p:e:{for(var nn=ct.key;Ze!==null;){if(Ze.key===nn){if(nn=ct.type,nn===v){if(Ze.tag===7){m(rt,Ze.sibling),At=A(Ze,ct.props.children),At.return=rt,rt=At;break e}}else if(Ze.elementType===nn||typeof nn=="object"&&nn!==null&&nn.$$typeof===O&&KA(nn)===Ze.type){m(rt,Ze.sibling),At=A(Ze,ct.props),Xp(At,ct),At.return=rt,rt=At;break e}m(rt,Ze);break}else f(rt,Ze);Ze=Ze.sibling}ct.type===v?(At=Fu(ct.props.children,rt.mode,At,ct.key),At.return=rt,rt=At):(At=iy(ct.type,ct.key,ct.props,null,rt.mode,At),Xp(At,ct),At.return=rt,rt=At)}return se(rt);case g:e:{for(nn=ct.key;Ze!==null;){if(Ze.key===nn)if(Ze.tag===4&&Ze.stateNode.containerInfo===ct.containerInfo&&Ze.stateNode.implementation===ct.implementation){m(rt,Ze.sibling),At=A(Ze,ct.children||[]),At.return=rt,rt=At;break e}else{m(rt,Ze);break}else f(rt,Ze);Ze=Ze.sibling}At=K1(ct,rt.mode,At),At.return=rt,rt=At}return se(rt);case O:return nn=ct._init,ct=nn(ct._payload),Sr(rt,Ze,ct,At)}if(ne(ct))return xn(rt,Ze,ct,At);if(F(ct)){if(nn=F(ct),typeof nn!="function")throw Error(r(150));return ct=nn.call(ct),mn(rt,Ze,ct,At)}if(typeof ct.then=="function")return Sr(rt,Ze,xy(ct),At);if(ct.$$typeof===E)return Sr(rt,Ze,cy(rt,ct),At);Sy(rt,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint"?(ct=""+ct,Ze!==null&&Ze.tag===6?(m(rt,Ze.sibling),At=A(Ze,ct),At.return=rt,rt=At):(m(rt,Ze),At=W1(ct,rt.mode,At),At.return=rt,rt=At),se(rt)):m(rt,Ze)}return function(rt,Ze,ct,At){try{Yp=0;var nn=Sr(rt,Ze,ct,At);return Sf=null,nn}catch(un){if(un===zp||un===dy)throw un;var $n=zi(29,un,null,rt.mode);return $n.lanes=At,$n.return=rt,$n}finally{}}}var Ef=ZA(!0),YA=ZA(!1),uo=Q(null),bs=null;function vc(c){var f=c.alternate;de(ga,ga.current&1),de(uo,c),bs===null&&(f===null||vf.current!==null||f.memoizedState!==null)&&(bs=c)}function XA(c){if(c.tag===22){if(de(ga,ga.current),de(uo,c),bs===null){var f=c.alternate;f!==null&&f.memoizedState!==null&&(bs=c)}}else wc()}function wc(){de(ga,ga.current),de(uo,uo.current)}function gl(c){X(uo),bs===c&&(bs=null),X(ga)}var ga=Q(0);function Ey(c){for(var f=c;f!==null;){if(f.tag===13){var m=f.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||gx(m)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function T_(c,f,m,w){f=c.memoizedState,m=m(w,f),m=m==null?f:d({},f,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var A_={enqueueSetState:function(c,f,m){c=c._reactInternals;var w=Vi(),A=gc(w);A.payload=f,m!=null&&(A.callback=m),f=yc(c,A,w),f!==null&&(Gi(f,c,w),Hp(f,c,w))},enqueueReplaceState:function(c,f,m){c=c._reactInternals;var w=Vi(),A=gc(w);A.tag=1,A.payload=f,m!=null&&(A.callback=m),f=yc(c,A,w),f!==null&&(Gi(f,c,w),Hp(f,c,w))},enqueueForceUpdate:function(c,f){c=c._reactInternals;var m=Vi(),w=gc(m);w.tag=2,f!=null&&(w.callback=f),f=yc(c,w,m),f!==null&&(Gi(f,c,m),Hp(f,c,m))}};function JA(c,f,m,w,A,P,se){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(w,P,se):f.prototype&&f.prototype.isPureReactComponent?!T(m,w)||!T(A,P):!0}function QA(c,f,m,w){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(m,w),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(m,w),f.state!==c&&A_.enqueueReplaceState(f,f.state,null)}function Gu(c,f){var m=f;if("ref"in f){m={};for(var w in f)w!=="ref"&&(m[w]=f[w])}if(c=c.defaultProps){m===f&&(m=d({},m));for(var A in c)m[A]===void 0&&(m[A]=c[A])}return m}var Cy=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(f))return}else if(typeof Xr=="object"&&typeof Xr.emit=="function"){Xr.emit("uncaughtException",c);return}console.error(c)};function eN(c){Cy(c)}function tN(c){console.error(c)}function nN(c){Cy(c)}function ky(c,f){try{var m=c.onUncaughtError;m(f.value,{componentStack:f.stack})}catch(w){setTimeout(function(){throw w})}}function rN(c,f,m){try{var w=c.onCaughtError;w(m.value,{componentStack:m.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function N_(c,f,m){return m=gc(m),m.tag=3,m.payload={element:null},m.callback=function(){ky(c,f)},m}function aN(c){return c=gc(c),c.tag=3,c}function iN(c,f,m,w){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var P=w.value;c.payload=function(){return A(P)},c.callback=function(){rN(f,m,w)}}var se=m.stateNode;se!==null&&typeof se.componentDidCatch=="function"&&(c.callback=function(){rN(f,m,w),typeof A!="function"&&(kc===null?kc=new Set([this]):kc.add(this));var Se=w.stack;this.componentDidCatch(w.value,{componentStack:Se!==null?Se:""})})}function sz(c,f,m,w,A){if(m.flags|=32768,w!==null&&typeof w=="object"&&typeof w.then=="function"){if(f=m.alternate,f!==null&&Lp(f,m,A,!0),m=uo.current,m!==null){switch(m.tag){case 13:return bs===null?Q_():m.alternate===null&&Yr===0&&(Yr=3),m.flags&=-257,m.flags|=65536,m.lanes=A,w===a_?m.flags|=16384:(f=m.updateQueue,f===null?m.updateQueue=new Set([w]):f.add(w),tx(c,w,A)),!1;case 22:return m.flags|=65536,w===a_?m.flags|=16384:(f=m.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([w])},m.updateQueue=f):(m=f.retryQueue,m===null?f.retryQueue=new Set([w]):m.add(w)),tx(c,w,A)),!1}throw Error(r(435,m.tag))}return tx(c,w,A),Q_(),!1}if(ir)return f=uo.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=A,w!==X1&&(c=Error(r(422),{cause:w}),Fp(hn(c,m)))):(w!==X1&&(f=Error(r(423),{cause:w}),Fp(hn(f,m))),c=c.current.alternate,c.flags|=65536,A&=-A,c.lanes|=A,w=hn(w,m),A=N_(c.stateNode,w,A),s_(c,A),Yr!==4&&(Yr=2)),!1;var P=Error(r(520),{cause:w});if(P=hn(P,m),am===null?am=[P]:am.push(P),Yr!==4&&(Yr=2),f===null)return!0;w=hn(w,m),m=f;do{switch(m.tag){case 3:return m.flags|=65536,c=A&-A,m.lanes|=c,c=N_(m.stateNode,w,c),s_(m,c),!1;case 1:if(f=m.type,P=m.stateNode,(m.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(kc===null||!kc.has(P))))return m.flags|=65536,A&=-A,m.lanes|=A,A=aN(A),iN(A,c,m,w),s_(m,A),!1}m=m.return}while(m!==null);return!1}var oN=Error(r(461)),Ta=!1;function za(c,f,m,w){f.child=c===null?YA(f,null,m,w):Ef(f,c.child,m,w)}function sN(c,f,m,w,A){m=m.render;var P=f.ref;if("ref"in w){var se={};for(var Se in w)Se!=="ref"&&(se[Se]=w[Se])}else se=w;return Hu(f),w=f_(c,f,m,se,P,A),Se=h_(),c!==null&&!Ta?(p_(c,f,A),yl(c,f,A)):(ir&&Se&&Z1(f),f.flags|=1,za(c,f,w,A),f.child)}function lN(c,f,m,w,A){if(c===null){var P=m.type;return typeof P=="function"&&!G1(P)&&P.defaultProps===void 0&&m.compare===null?(f.tag=15,f.type=P,cN(c,f,P,w,A)):(c=iy(m.type,null,w,f,f.mode,A),c.ref=f.ref,c.return=f,f.child=c)}if(P=c.child,!F_(c,A)){var se=P.memoizedProps;if(m=m.compare,m=m!==null?m:T,m(se,w)&&c.ref===f.ref)return yl(c,f,A)}return f.flags|=1,c=ul(P,w),c.ref=f.ref,c.return=f,f.child=c}function cN(c,f,m,w,A){if(c!==null){var P=c.memoizedProps;if(T(P,w)&&c.ref===f.ref)if(Ta=!1,f.pendingProps=w=P,F_(c,A))(c.flags&131072)!==0&&(Ta=!0);else return f.lanes=c.lanes,yl(c,f,A)}return R_(c,f,m,w,A)}function uN(c,f,m){var w=f.pendingProps,A=w.children,P=c!==null?c.memoizedState:null;if(w.mode==="hidden"){if((f.flags&128)!==0){if(w=P!==null?P.baseLanes|m:m,c!==null){for(A=f.child=c.child,P=0;A!==null;)P=P|A.lanes|A.childLanes,A=A.sibling;f.childLanes=P&~w}else f.childLanes=0,f.child=null;return dN(c,f,w,m)}if((m&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},c!==null&&uy(f,P!==null?P.cachePool:null),P!==null?cA(f,P):c_(),XA(f);else return f.lanes=f.childLanes=536870912,dN(c,f,P!==null?P.baseLanes|m:m,m)}else P!==null?(uy(f,P.cachePool),cA(f,P),wc(),f.memoizedState=null):(c!==null&&uy(f,null),c_(),wc());return za(c,f,A,m),f.child}function dN(c,f,m,w){var A=r_();return A=A===null?null:{parent:ma._currentValue,pool:A},f.memoizedState={baseLanes:m,cachePool:A},c!==null&&uy(f,null),c_(),XA(f),c!==null&&Lp(c,f,w,!0),null}function Ty(c,f){var m=f.ref;if(m===null)c!==null&&c.ref!==null&&(f.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(f.flags|=4194816)}}function R_(c,f,m,w,A){return Hu(f),m=f_(c,f,m,w,void 0,A),w=h_(),c!==null&&!Ta?(p_(c,f,A),yl(c,f,A)):(ir&&w&&Z1(f),f.flags|=1,za(c,f,m,A),f.child)}function fN(c,f,m,w,A,P){return Hu(f),f.updateQueue=null,m=dA(f,w,m,A),uA(c),w=h_(),c!==null&&!Ta?(p_(c,f,P),yl(c,f,P)):(ir&&w&&Z1(f),f.flags|=1,za(c,f,m,P),f.child)}function hN(c,f,m,w,A){if(Hu(f),f.stateNode===null){var P=gs,se=m.contextType;typeof se=="object"&&se!==null&&(P=Xa(se)),P=new m(w,P),f.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,P.updater=A_,f.stateNode=P,P._reactInternals=f,P=f.stateNode,P.props=w,P.state=f.memoizedState,P.refs={},i_(f),se=m.contextType,P.context=typeof se=="object"&&se!==null?Xa(se):gs,P.state=f.memoizedState,se=m.getDerivedStateFromProps,typeof se=="function"&&(T_(f,m,se,w),P.state=f.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(se=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),se!==P.state&&A_.enqueueReplaceState(P,P.state,null),Vp(f,w,P,A),qp(),P.state=f.memoizedState),typeof P.componentDidMount=="function"&&(f.flags|=4194308),w=!0}else if(c===null){P=f.stateNode;var Se=f.memoizedProps,ze=Gu(m,Se);P.props=ze;var dt=P.context,Et=m.contextType;se=gs,typeof Et=="object"&&Et!==null&&(se=Xa(Et));var It=m.getDerivedStateFromProps;Et=typeof It=="function"||typeof P.getSnapshotBeforeUpdate=="function",Se=f.pendingProps!==Se,Et||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(Se||dt!==se)&&QA(f,P,w,se),mc=!1;var mt=f.memoizedState;P.state=mt,Vp(f,w,P,A),qp(),dt=f.memoizedState,Se||mt!==dt||mc?(typeof It=="function"&&(T_(f,m,It,w),dt=f.memoizedState),(ze=mc||JA(f,m,ze,w,mt,dt,se))?(Et||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(f.flags|=4194308)):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=w,f.memoizedState=dt),P.props=w,P.state=dt,P.context=se,w=ze):(typeof P.componentDidMount=="function"&&(f.flags|=4194308),w=!1)}else{P=f.stateNode,o_(c,f),se=f.memoizedProps,Et=Gu(m,se),P.props=Et,It=f.pendingProps,mt=P.context,dt=m.contextType,ze=gs,typeof dt=="object"&&dt!==null&&(ze=Xa(dt)),Se=m.getDerivedStateFromProps,(dt=typeof Se=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(se!==It||mt!==ze)&&QA(f,P,w,ze),mc=!1,mt=f.memoizedState,P.state=mt,Vp(f,w,P,A),qp();var gt=f.memoizedState;se!==It||mt!==gt||mc||c!==null&&c.dependencies!==null&&ly(c.dependencies)?(typeof Se=="function"&&(T_(f,m,Se,w),gt=f.memoizedState),(Et=mc||JA(f,m,Et,w,mt,gt,ze)||c!==null&&c.dependencies!==null&&ly(c.dependencies))?(dt||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(w,gt,ze),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(w,gt,ze)),typeof P.componentDidUpdate=="function"&&(f.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof P.componentDidUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),f.memoizedProps=w,f.memoizedState=gt),P.props=w,P.state=gt,P.context=ze,w=Et):(typeof P.componentDidUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||se===c.memoizedProps&&mt===c.memoizedState||(f.flags|=1024),w=!1)}return P=w,Ty(c,f),w=(f.flags&128)!==0,P||w?(P=f.stateNode,m=w&&typeof m.getDerivedStateFromError!="function"?null:P.render(),f.flags|=1,c!==null&&w?(f.child=Ef(f,c.child,null,A),f.child=Ef(f,null,m,A)):za(c,f,m,A),f.memoizedState=P.state,c=f.child):c=yl(c,f,A),c}function pN(c,f,m,w){return Pp(),f.flags|=256,za(c,f,m,w),f.child}var I_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function O_(c){return{baseLanes:c,cachePool:tA()}}function D_(c,f,m){return c=c!==null?c.childLanes&~m:0,f&&(c|=fo),c}function mN(c,f,m){var w=f.pendingProps,A=!1,P=(f.flags&128)!==0,se;if((se=P)||(se=c!==null&&c.memoizedState===null?!1:(ga.current&2)!==0),se&&(A=!0,f.flags&=-129),se=(f.flags&32)!==0,f.flags&=-33,c===null){if(ir){if(A?vc(f):wc(),ir){var Se=Zr,ze;if(ze=Se){e:{for(ze=Se,Se=ys;ze.nodeType!==8;){if(!Se){Se=null;break e}if(ze=jo(ze.nextSibling),ze===null){Se=null;break e}}Se=ze}Se!==null?(f.memoizedState={dehydrated:Se,treeContext:Lu!==null?{id:dl,overflow:fl}:null,retryLane:536870912,hydrationErrors:null},ze=zi(18,null,null,0),ze.stateNode=Se,ze.return=f,f.child=ze,hi=f,Zr=null,ze=!0):ze=!1}ze||zu(f)}if(Se=f.memoizedState,Se!==null&&(Se=Se.dehydrated,Se!==null))return gx(Se)?f.lanes=32:f.lanes=536870912,null;gl(f)}return Se=w.children,w=w.fallback,A?(wc(),A=f.mode,Se=Ay({mode:"hidden",children:Se},A),w=Fu(w,A,m,null),Se.return=f,w.return=f,Se.sibling=w,f.child=Se,A=f.child,A.memoizedState=O_(m),A.childLanes=D_(c,se,m),f.memoizedState=I_,w):(vc(f),j_(f,Se))}if(ze=c.memoizedState,ze!==null&&(Se=ze.dehydrated,Se!==null)){if(P)f.flags&256?(vc(f),f.flags&=-257,f=M_(c,f,m)):f.memoizedState!==null?(wc(),f.child=c.child,f.flags|=128,f=null):(wc(),A=w.fallback,Se=f.mode,w=Ay({mode:"visible",children:w.children},Se),A=Fu(A,Se,m,null),A.flags|=2,w.return=f,A.return=f,w.sibling=A,f.child=w,Ef(f,c.child,null,m),w=f.child,w.memoizedState=O_(m),w.childLanes=D_(c,se,m),f.memoizedState=I_,f=A);else if(vc(f),gx(Se)){if(se=Se.nextSibling&&Se.nextSibling.dataset,se)var dt=se.dgst;se=dt,w=Error(r(419)),w.stack="",w.digest=se,Fp({value:w,source:null,stack:null}),f=M_(c,f,m)}else if(Ta||Lp(c,f,m,!1),se=(m&c.childLanes)!==0,Ta||se){if(se=Or,se!==null&&(w=m&-m,w=(w&42)!==0?1:Nt(w),w=(w&(se.suspendedLanes|m))!==0?0:w,w!==0&&w!==ze.retryLane))throw ze.retryLane=w,Oo(c,w),Gi(se,c,w),oN;Se.data==="$?"||Q_(),f=M_(c,f,m)}else Se.data==="$?"?(f.flags|=192,f.child=c.child,f=null):(c=ze.treeContext,Zr=jo(Se.nextSibling),hi=f,ir=!0,Bu=null,ys=!1,c!==null&&(lo[co++]=dl,lo[co++]=fl,lo[co++]=Lu,dl=c.id,fl=c.overflow,Lu=f),f=j_(f,w.children),f.flags|=4096);return f}return A?(wc(),A=w.fallback,Se=f.mode,ze=c.child,dt=ze.sibling,w=ul(ze,{mode:"hidden",children:w.children}),w.subtreeFlags=ze.subtreeFlags&65011712,dt!==null?A=ul(dt,A):(A=Fu(A,Se,m,null),A.flags|=2),A.return=f,w.return=f,w.sibling=A,f.child=w,w=A,A=f.child,Se=c.child.memoizedState,Se===null?Se=O_(m):(ze=Se.cachePool,ze!==null?(dt=ma._currentValue,ze=ze.parent!==dt?{parent:dt,pool:dt}:ze):ze=tA(),Se={baseLanes:Se.baseLanes|m,cachePool:ze}),A.memoizedState=Se,A.childLanes=D_(c,se,m),f.memoizedState=I_,w):(vc(f),m=c.child,c=m.sibling,m=ul(m,{mode:"visible",children:w.children}),m.return=f,m.sibling=null,c!==null&&(se=f.deletions,se===null?(f.deletions=[c],f.flags|=16):se.push(c)),f.child=m,f.memoizedState=null,m)}function j_(c,f){return f=Ay({mode:"visible",children:f},c.mode),f.return=c,c.child=f}function Ay(c,f){return c=zi(22,c,null,f),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function M_(c,f,m){return Ef(f,c.child,null,m),c=j_(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function gN(c,f,m){c.lanes|=f;var w=c.alternate;w!==null&&(w.lanes|=f),Q1(c.return,f,m)}function P_(c,f,m,w,A){var P=c.memoizedState;P===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:w,tail:m,tailMode:A}:(P.isBackwards=f,P.rendering=null,P.renderingStartTime=0,P.last=w,P.tail=m,P.tailMode=A)}function yN(c,f,m){var w=f.pendingProps,A=w.revealOrder,P=w.tail;if(za(c,f,w.children,m),w=ga.current,(w&2)!==0)w=w&1|2,f.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&gN(c,m,f);else if(c.tag===19)gN(c,m,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}w&=1}switch(de(ga,w),A){case"forwards":for(m=f.child,A=null;m!==null;)c=m.alternate,c!==null&&Ey(c)===null&&(A=m),m=m.sibling;m=A,m===null?(A=f.child,f.child=null):(A=m.sibling,m.sibling=null),P_(f,!1,A,m,P);break;case"backwards":for(m=null,A=f.child,f.child=null;A!==null;){if(c=A.alternate,c!==null&&Ey(c)===null){f.child=A;break}c=A.sibling,A.sibling=m,m=A,A=c}P_(f,!0,m,null,P);break;case"together":P_(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function yl(c,f,m){if(c!==null&&(f.dependencies=c.dependencies),Cc|=f.lanes,(m&f.childLanes)===0)if(c!==null){if(Lp(c,f,m,!1),(m&f.childLanes)===0)return null}else return null;if(c!==null&&f.child!==c.child)throw Error(r(153));if(f.child!==null){for(c=f.child,m=ul(c,c.pendingProps),f.child=m,m.return=f;c.sibling!==null;)c=c.sibling,m=m.sibling=ul(c,c.pendingProps),m.return=f;m.sibling=null}return f.child}function F_(c,f){return(c.lanes&f)!==0?!0:(c=c.dependencies,!!(c!==null&&ly(c)))}function lz(c,f,m){switch(f.tag){case 3:Re(f,f.stateNode.containerInfo),pc(f,ma,c.memoizedState.cache),Pp();break;case 27:case 5:Fe(f);break;case 4:Re(f,f.stateNode.containerInfo);break;case 10:pc(f,f.type,f.memoizedProps.value);break;case 13:var w=f.memoizedState;if(w!==null)return w.dehydrated!==null?(vc(f),f.flags|=128,null):(m&f.child.childLanes)!==0?mN(c,f,m):(vc(f),c=yl(c,f,m),c!==null?c.sibling:null);vc(f);break;case 19:var A=(c.flags&128)!==0;if(w=(m&f.childLanes)!==0,w||(Lp(c,f,m,!1),w=(m&f.childLanes)!==0),A){if(w)return yN(c,f,m);f.flags|=128}if(A=f.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),de(ga,ga.current),w)break;return null;case 22:case 23:return f.lanes=0,uN(c,f,m);case 24:pc(f,ma,c.memoizedState.cache)}return yl(c,f,m)}function bN(c,f,m){if(c!==null)if(c.memoizedProps!==f.pendingProps)Ta=!0;else{if(!F_(c,m)&&(f.flags&128)===0)return Ta=!1,lz(c,f,m);Ta=(c.flags&131072)!==0}else Ta=!1,ir&&(f.flags&1048576)!==0&&KT(f,sy,f.index);switch(f.lanes=0,f.tag){case 16:e:{c=f.pendingProps;var w=f.elementType,A=w._init;if(w=A(w._payload),f.type=w,typeof w=="function")G1(w)?(c=Gu(w,c),f.tag=1,f=hN(null,f,w,c,m)):(f.tag=0,f=R_(null,f,w,c,m));else{if(w!=null){if(A=w.$$typeof,A===C){f.tag=11,f=sN(null,f,w,c,m);break e}else if(A===D){f.tag=14,f=lN(null,f,w,c,m);break e}}throw f=q(w)||w,Error(r(306,f,""))}}return f;case 0:return R_(c,f,f.type,f.pendingProps,m);case 1:return w=f.type,A=Gu(w,f.pendingProps),hN(c,f,w,A,m);case 3:e:{if(Re(f,f.stateNode.containerInfo),c===null)throw Error(r(387));w=f.pendingProps;var P=f.memoizedState;A=P.element,o_(c,f),Vp(f,w,null,m);var se=f.memoizedState;if(w=se.cache,pc(f,ma,w),w!==P.cache&&e_(f,[ma],m,!0),qp(),w=se.element,P.isDehydrated)if(P={element:w,isDehydrated:!1,cache:se.cache},f.updateQueue.baseState=P,f.memoizedState=P,f.flags&256){f=pN(c,f,w,m);break e}else if(w!==A){A=hn(Error(r(424)),f),Fp(A),f=pN(c,f,w,m);break e}else{switch(c=f.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Zr=jo(c.firstChild),hi=f,ir=!0,Bu=null,ys=!0,m=YA(f,null,w,m),f.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Pp(),w===A){f=yl(c,f,m);break e}za(c,f,w,m)}f=f.child}return f;case 26:return Ty(c,f),c===null?(m=xR(f.type,null,f.pendingProps,null))?f.memoizedState=m:ir||(m=f.type,c=f.pendingProps,w=Uy(Pe.current).createElement(m),w[he]=f,w[Ae]=c,Ha(w,m,c),jn(w),f.stateNode=w):f.memoizedState=xR(f.type,c.memoizedProps,f.pendingProps,c.memoizedState),null;case 27:return Fe(f),c===null&&ir&&(w=f.stateNode=vR(f.type,f.pendingProps,Pe.current),hi=f,ys=!0,A=Zr,Nc(f.type)?(yx=A,Zr=jo(w.firstChild)):Zr=A),za(c,f,f.pendingProps.children,m),Ty(c,f),c===null&&(f.flags|=4194304),f.child;case 5:return c===null&&ir&&((A=w=Zr)&&(w=Pz(w,f.type,f.pendingProps,ys),w!==null?(f.stateNode=w,hi=f,Zr=jo(w.firstChild),ys=!1,A=!0):A=!1),A||zu(f)),Fe(f),A=f.type,P=f.pendingProps,se=c!==null?c.memoizedProps:null,w=P.children,hx(A,P)?w=null:se!==null&&hx(A,se)&&(f.flags|=32),f.memoizedState!==null&&(A=f_(c,f,ez,null,null,m),hm._currentValue=A),Ty(c,f),za(c,f,w,m),f.child;case 6:return c===null&&ir&&((c=m=Zr)&&(m=Fz(m,f.pendingProps,ys),m!==null?(f.stateNode=m,hi=f,Zr=null,c=!0):c=!1),c||zu(f)),null;case 13:return mN(c,f,m);case 4:return Re(f,f.stateNode.containerInfo),w=f.pendingProps,c===null?f.child=Ef(f,null,w,m):za(c,f,w,m),f.child;case 11:return sN(c,f,f.type,f.pendingProps,m);case 7:return za(c,f,f.pendingProps,m),f.child;case 8:return za(c,f,f.pendingProps.children,m),f.child;case 12:return za(c,f,f.pendingProps.children,m),f.child;case 10:return w=f.pendingProps,pc(f,f.type,w.value),za(c,f,w.children,m),f.child;case 9:return A=f.type._context,w=f.pendingProps.children,Hu(f),A=Xa(A),w=w(A),f.flags|=1,za(c,f,w,m),f.child;case 14:return lN(c,f,f.type,f.pendingProps,m);case 15:return cN(c,f,f.type,f.pendingProps,m);case 19:return yN(c,f,m);case 31:return w=f.pendingProps,m=f.mode,w={mode:w.mode,children:w.children},c===null?(m=Ay(w,m),m.ref=f.ref,f.child=m,m.return=f,f=m):(m=ul(c.child,w),m.ref=f.ref,f.child=m,m.return=f,f=m),f;case 22:return uN(c,f,m);case 24:return Hu(f),w=Xa(ma),c===null?(A=r_(),A===null&&(A=Or,P=t_(),A.pooledCache=P,P.refCount++,P!==null&&(A.pooledCacheLanes|=m),A=P),f.memoizedState={parent:w,cache:A},i_(f),pc(f,ma,A)):((c.lanes&m)!==0&&(o_(c,f),Vp(f,null,null,m),qp()),A=c.memoizedState,P=f.memoizedState,A.parent!==w?(A={parent:w,cache:w},f.memoizedState=A,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=A),pc(f,ma,w)):(w=P.cache,pc(f,ma,w),w!==A.cache&&e_(f,[ma],m,!0))),za(c,f,f.pendingProps.children,m),f.child;case 29:throw f.pendingProps}throw Error(r(156,f.tag))}function bl(c){c.flags|=4}function vN(c,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!TR(f)){if(f=uo.current,f!==null&&((Kn&4194048)===Kn?bs!==null:(Kn&62914560)!==Kn&&(Kn&536870912)===0||f!==bs))throw Up=a_,nA;c.flags|=8192}}function Ny(c,f){f!==null&&(c.flags|=4),c.flags&16384&&(f=c.tag!==22?M():536870912,c.lanes|=f,Af|=f)}function Jp(c,f){if(!ir)switch(c.tailMode){case"hidden":f=c.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var w=null;m!==null;)m.alternate!==null&&(w=m),m=m.sibling;w===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:w.sibling=null}}function Vr(c){var f=c.alternate!==null&&c.alternate.child===c.child,m=0,w=0;if(f)for(var A=c.child;A!==null;)m|=A.lanes|A.childLanes,w|=A.subtreeFlags&65011712,w|=A.flags&65011712,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)m|=A.lanes|A.childLanes,w|=A.subtreeFlags,w|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=w,c.childLanes=m,f}function cz(c,f,m){var w=f.pendingProps;switch(Y1(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vr(f),null;case 1:return Vr(f),null;case 3:return m=f.stateNode,w=null,c!==null&&(w=c.memoizedState.cache),f.memoizedState.cache!==w&&(f.flags|=2048),pl(ma),Ce(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(Mp(f)?bl(f):c===null||c.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,XT())),Vr(f),null;case 26:return m=f.memoizedState,c===null?(bl(f),m!==null?(Vr(f),vN(f,m)):(Vr(f),f.flags&=-16777217)):m?m!==c.memoizedState?(bl(f),Vr(f),vN(f,m)):(Vr(f),f.flags&=-16777217):(c.memoizedProps!==w&&bl(f),Vr(f),f.flags&=-16777217),null;case 27:Qe(f),m=Pe.current;var A=f.type;if(c!==null&&f.stateNode!=null)c.memoizedProps!==w&&bl(f);else{if(!w){if(f.stateNode===null)throw Error(r(166));return Vr(f),null}c=be.current,Mp(f)?ZT(f):(c=vR(A,w,m),f.stateNode=c,bl(f))}return Vr(f),null;case 5:if(Qe(f),m=f.type,c!==null&&f.stateNode!=null)c.memoizedProps!==w&&bl(f);else{if(!w){if(f.stateNode===null)throw Error(r(166));return Vr(f),null}if(c=be.current,Mp(f))ZT(f);else{switch(A=Uy(Pe.current),c){case 1:c=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:c=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":c=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":c=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":c=A.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof w.is=="string"?A.createElement("select",{is:w.is}):A.createElement("select"),w.multiple?c.multiple=!0:w.size&&(c.size=w.size);break;default:c=typeof w.is=="string"?A.createElement(m,{is:w.is}):A.createElement(m)}}c[he]=f,c[Ae]=w;e:for(A=f.child;A!==null;){if(A.tag===5||A.tag===6)c.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===f)break e;for(;A.sibling===null;){if(A.return===null||A.return===f)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}f.stateNode=c;e:switch(Ha(c,m,w),m){case"button":case"input":case"select":case"textarea":c=!!w.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&bl(f)}}return Vr(f),f.flags&=-16777217,null;case 6:if(c&&f.stateNode!=null)c.memoizedProps!==w&&bl(f);else{if(typeof w!="string"&&f.stateNode===null)throw Error(r(166));if(c=Pe.current,Mp(f)){if(c=f.stateNode,m=f.memoizedProps,w=null,A=hi,A!==null)switch(A.tag){case 27:case 5:w=A.memoizedProps}c[he]=f,c=!!(c.nodeValue===m||w!==null&&w.suppressHydrationWarning===!0||fR(c.nodeValue,m)),c||zu(f)}else c=Uy(c).createTextNode(w),c[he]=f,f.stateNode=c}return Vr(f),null;case 13:if(w=f.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(A=Mp(f),w!==null&&w.dehydrated!==null){if(c===null){if(!A)throw Error(r(318));if(A=f.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(r(317));A[he]=f}else Pp(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;Vr(f),A=!1}else A=XT(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=A),A=!0;if(!A)return f.flags&256?(gl(f),f):(gl(f),null)}if(gl(f),(f.flags&128)!==0)return f.lanes=m,f;if(m=w!==null,c=c!==null&&c.memoizedState!==null,m){w=f.child,A=null,w.alternate!==null&&w.alternate.memoizedState!==null&&w.alternate.memoizedState.cachePool!==null&&(A=w.alternate.memoizedState.cachePool.pool);var P=null;w.memoizedState!==null&&w.memoizedState.cachePool!==null&&(P=w.memoizedState.cachePool.pool),P!==A&&(w.flags|=2048)}return m!==c&&m&&(f.child.flags|=8192),Ny(f,f.updateQueue),Vr(f),null;case 4:return Ce(),c===null&&lx(f.stateNode.containerInfo),Vr(f),null;case 10:return pl(f.type),Vr(f),null;case 19:if(X(ga),A=f.memoizedState,A===null)return Vr(f),null;if(w=(f.flags&128)!==0,P=A.rendering,P===null)if(w)Jp(A,!1);else{if(Yr!==0||c!==null&&(c.flags&128)!==0)for(c=f.child;c!==null;){if(P=Ey(c),P!==null){for(f.flags|=128,Jp(A,!1),c=P.updateQueue,f.updateQueue=c,Ny(f,c),f.subtreeFlags=0,c=m,m=f.child;m!==null;)WT(m,c),m=m.sibling;return de(ga,ga.current&1|2),f.child}c=c.sibling}A.tail!==null&&le()>Oy&&(f.flags|=128,w=!0,Jp(A,!1),f.lanes=4194304)}else{if(!w)if(c=Ey(P),c!==null){if(f.flags|=128,w=!0,c=c.updateQueue,f.updateQueue=c,Ny(f,c),Jp(A,!0),A.tail===null&&A.tailMode==="hidden"&&!P.alternate&&!ir)return Vr(f),null}else 2*le()-A.renderingStartTime>Oy&&m!==536870912&&(f.flags|=128,w=!0,Jp(A,!1),f.lanes=4194304);A.isBackwards?(P.sibling=f.child,f.child=P):(c=A.last,c!==null?c.sibling=P:f.child=P,A.last=P)}return A.tail!==null?(f=A.tail,A.rendering=f,A.tail=f.sibling,A.renderingStartTime=le(),f.sibling=null,c=ga.current,de(ga,w?c&1|2:c&1),f):(Vr(f),null);case 22:case 23:return gl(f),u_(),w=f.memoizedState!==null,c!==null?c.memoizedState!==null!==w&&(f.flags|=8192):w&&(f.flags|=8192),w?(m&536870912)!==0&&(f.flags&128)===0&&(Vr(f),f.subtreeFlags&6&&(f.flags|=8192)):Vr(f),m=f.updateQueue,m!==null&&Ny(f,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),w=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(w=f.memoizedState.cachePool.pool),w!==m&&(f.flags|=2048),c!==null&&X(qu),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),pl(ma),Vr(f),null;case 25:return null;case 30:return null}throw Error(r(156,f.tag))}function uz(c,f){switch(Y1(f),f.tag){case 1:return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return pl(ma),Ce(),c=f.flags,(c&65536)!==0&&(c&128)===0?(f.flags=c&-65537|128,f):null;case 26:case 27:case 5:return Qe(f),null;case 13:if(gl(f),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(r(340));Pp()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return X(ga),null;case 4:return Ce(),null;case 10:return pl(f.type),null;case 22:case 23:return gl(f),u_(),c!==null&&X(qu),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 24:return pl(ma),null;case 25:return null;default:return null}}function wN(c,f){switch(Y1(f),f.tag){case 3:pl(ma),Ce();break;case 26:case 27:case 5:Qe(f);break;case 4:Ce();break;case 13:gl(f);break;case 19:X(ga);break;case 10:pl(f.type);break;case 22:case 23:gl(f),u_(),c!==null&&X(qu);break;case 24:pl(ma)}}function Qp(c,f){try{var m=f.updateQueue,w=m!==null?m.lastEffect:null;if(w!==null){var A=w.next;m=A;do{if((m.tag&c)===c){w=void 0;var P=m.create,se=m.inst;w=P(),se.destroy=w}m=m.next}while(m!==A)}}catch(Se){Ar(f,f.return,Se)}}function _c(c,f,m){try{var w=f.updateQueue,A=w!==null?w.lastEffect:null;if(A!==null){var P=A.next;w=P;do{if((w.tag&c)===c){var se=w.inst,Se=se.destroy;if(Se!==void 0){se.destroy=void 0,A=f;var ze=m,dt=Se;try{dt()}catch(Et){Ar(A,ze,Et)}}}w=w.next}while(w!==P)}}catch(Et){Ar(f,f.return,Et)}}function _N(c){var f=c.updateQueue;if(f!==null){var m=c.stateNode;try{lA(f,m)}catch(w){Ar(c,c.return,w)}}}function xN(c,f,m){m.props=Gu(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(w){Ar(c,f,w)}}function em(c,f){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var w=c.stateNode;break;case 30:w=c.stateNode;break;default:w=c.stateNode}typeof m=="function"?c.refCleanup=m(w):m.current=w}}catch(A){Ar(c,f,A)}}function vs(c,f){var m=c.ref,w=c.refCleanup;if(m!==null)if(typeof w=="function")try{w()}catch(A){Ar(c,f,A)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){Ar(c,f,A)}else m.current=null}function SN(c){var f=c.type,m=c.memoizedProps,w=c.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":m.autoFocus&&w.focus();break e;case"img":m.src?w.src=m.src:m.srcSet&&(w.srcset=m.srcSet)}}catch(A){Ar(c,c.return,A)}}function L_(c,f,m){try{var w=c.stateNode;Iz(w,c.type,m,f),w[Ae]=f}catch(A){Ar(c,c.return,A)}}function EN(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Nc(c.type)||c.tag===4}function $_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||EN(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Nc(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function B_(c,f,m){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,f):(f=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,f.appendChild(c),m=m._reactRootContainer,m!=null||f.onclick!==null||(f.onclick=zy));else if(w!==4&&(w===27&&Nc(c.type)&&(m=c.stateNode,f=null),c=c.child,c!==null))for(B_(c,f,m),c=c.sibling;c!==null;)B_(c,f,m),c=c.sibling}function Ry(c,f,m){var w=c.tag;if(w===5||w===6)c=c.stateNode,f?m.insertBefore(c,f):m.appendChild(c);else if(w!==4&&(w===27&&Nc(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(Ry(c,f,m),c=c.sibling;c!==null;)Ry(c,f,m),c=c.sibling}function CN(c){var f=c.stateNode,m=c.memoizedProps;try{for(var w=c.type,A=f.attributes;A.length;)f.removeAttributeNode(A[0]);Ha(f,w,m),f[he]=c,f[Ae]=m}catch(P){Ar(c,c.return,P)}}var vl=!1,ra=!1,z_=!1,kN=typeof WeakSet=="function"?WeakSet:Set,Aa=null;function dz(c,f){if(c=c.containerInfo,dx=Ky,c=ue(c),we(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var w=m.getSelection&&m.getSelection();if(w&&w.rangeCount!==0){m=w.anchorNode;var A=w.anchorOffset,P=w.focusNode;w=w.focusOffset;try{m.nodeType,P.nodeType}catch{m=null;break e}var se=0,Se=-1,ze=-1,dt=0,Et=0,It=c,mt=null;t:for(;;){for(var gt;It!==m||A!==0&&It.nodeType!==3||(Se=se+A),It!==P||w!==0&&It.nodeType!==3||(ze=se+w),It.nodeType===3&&(se+=It.nodeValue.length),(gt=It.firstChild)!==null;)mt=It,It=gt;for(;;){if(It===c)break t;if(mt===m&&++dt===A&&(Se=se),mt===P&&++Et===w&&(ze=se),(gt=It.nextSibling)!==null)break;It=mt,mt=It.parentNode}It=gt}m=Se===-1||ze===-1?null:{start:Se,end:ze}}else m=null}m=m||{start:0,end:0}}else m=null;for(fx={focusedElem:c,selectionRange:m},Ky=!1,Aa=f;Aa!==null;)if(f=Aa,c=f.child,(f.subtreeFlags&1024)!==0&&c!==null)c.return=f,Aa=c;else for(;Aa!==null;){switch(f=Aa,P=f.alternate,c=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&P!==null){c=void 0,m=f,A=P.memoizedProps,P=P.memoizedState,w=m.stateNode;try{var xn=Gu(m.type,A,m.elementType===m.type);c=w.getSnapshotBeforeUpdate(xn,P),w.__reactInternalSnapshotBeforeUpdate=c}catch(mn){Ar(m,m.return,mn)}}break;case 3:if((c&1024)!==0){if(c=f.stateNode.containerInfo,m=c.nodeType,m===9)mx(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":mx(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=f.sibling,c!==null){c.return=f.return,Aa=c;break}Aa=f.return}}function TN(c,f,m){var w=m.flags;switch(m.tag){case 0:case 11:case 15:xc(c,m),w&4&&Qp(5,m);break;case 1:if(xc(c,m),w&4)if(c=m.stateNode,f===null)try{c.componentDidMount()}catch(se){Ar(m,m.return,se)}else{var A=Gu(m.type,f.memoizedProps);f=f.memoizedState;try{c.componentDidUpdate(A,f,c.__reactInternalSnapshotBeforeUpdate)}catch(se){Ar(m,m.return,se)}}w&64&&_N(m),w&512&&em(m,m.return);break;case 3:if(xc(c,m),w&64&&(c=m.updateQueue,c!==null)){if(f=null,m.child!==null)switch(m.child.tag){case 27:case 5:f=m.child.stateNode;break;case 1:f=m.child.stateNode}try{lA(c,f)}catch(se){Ar(m,m.return,se)}}break;case 27:f===null&&w&4&&CN(m);case 26:case 5:xc(c,m),f===null&&w&4&&SN(m),w&512&&em(m,m.return);break;case 12:xc(c,m);break;case 13:xc(c,m),w&4&&RN(c,m),w&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=wz.bind(null,m),Lz(c,m))));break;case 22:if(w=m.memoizedState!==null||vl,!w){f=f!==null&&f.memoizedState!==null||ra,A=vl;var P=ra;vl=w,(ra=f)&&!P?Sc(c,m,(m.subtreeFlags&8772)!==0):xc(c,m),vl=A,ra=P}break;case 30:break;default:xc(c,m)}}function AN(c){var f=c.alternate;f!==null&&(c.alternate=null,AN(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&Xt(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var zr=null,ki=!1;function wl(c,f,m){for(m=m.child;m!==null;)NN(c,f,m),m=m.sibling}function NN(c,f,m){if(jt&&typeof jt.onCommitFiberUnmount=="function")try{jt.onCommitFiberUnmount(_t,m)}catch{}switch(m.tag){case 26:ra||vs(m,f),wl(c,f,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:ra||vs(m,f);var w=zr,A=ki;Nc(m.type)&&(zr=m.stateNode,ki=!1),wl(c,f,m),cm(m.stateNode),zr=w,ki=A;break;case 5:ra||vs(m,f);case 6:if(w=zr,A=ki,zr=null,wl(c,f,m),zr=w,ki=A,zr!==null)if(ki)try{(zr.nodeType===9?zr.body:zr.nodeName==="HTML"?zr.ownerDocument.body:zr).removeChild(m.stateNode)}catch(P){Ar(m,f,P)}else try{zr.removeChild(m.stateNode)}catch(P){Ar(m,f,P)}break;case 18:zr!==null&&(ki?(c=zr,yR(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),ym(c)):yR(zr,m.stateNode));break;case 4:w=zr,A=ki,zr=m.stateNode.containerInfo,ki=!0,wl(c,f,m),zr=w,ki=A;break;case 0:case 11:case 14:case 15:ra||_c(2,m,f),ra||_c(4,m,f),wl(c,f,m);break;case 1:ra||(vs(m,f),w=m.stateNode,typeof w.componentWillUnmount=="function"&&xN(m,f,w)),wl(c,f,m);break;case 21:wl(c,f,m);break;case 22:ra=(w=ra)||m.memoizedState!==null,wl(c,f,m),ra=w;break;default:wl(c,f,m)}}function RN(c,f){if(f.memoizedState===null&&(c=f.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{ym(c)}catch(m){Ar(f,f.return,m)}}function fz(c){switch(c.tag){case 13:case 19:var f=c.stateNode;return f===null&&(f=c.stateNode=new kN),f;case 22:return c=c.stateNode,f=c._retryCache,f===null&&(f=c._retryCache=new kN),f;default:throw Error(r(435,c.tag))}}function U_(c,f){var m=fz(c);f.forEach(function(w){var A=_z.bind(null,c,w);m.has(w)||(m.add(w),w.then(A,A))})}function Ui(c,f){var m=f.deletions;if(m!==null)for(var w=0;w<m.length;w++){var A=m[w],P=c,se=f,Se=se;e:for(;Se!==null;){switch(Se.tag){case 27:if(Nc(Se.type)){zr=Se.stateNode,ki=!1;break e}break;case 5:zr=Se.stateNode,ki=!1;break e;case 3:case 4:zr=Se.stateNode.containerInfo,ki=!0;break e}Se=Se.return}if(zr===null)throw Error(r(160));NN(P,se,A),zr=null,ki=!1,P=A.alternate,P!==null&&(P.return=null),A.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)IN(f,c),f=f.sibling}var Do=null;function IN(c,f){var m=c.alternate,w=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Ui(f,c),Hi(c),w&4&&(_c(3,c,c.return),Qp(3,c),_c(5,c,c.return));break;case 1:Ui(f,c),Hi(c),w&512&&(ra||m===null||vs(m,m.return)),w&64&&vl&&(c=c.updateQueue,c!==null&&(w=c.callbacks,w!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?w:m.concat(w))));break;case 26:var A=Do;if(Ui(f,c),Hi(c),w&512&&(ra||m===null||vs(m,m.return)),w&4){var P=m!==null?m.memoizedState:null;if(w=c.memoizedState,m===null)if(w===null)if(c.stateNode===null){e:{w=c.type,m=c.memoizedProps,A=A.ownerDocument||A;t:switch(w){case"title":P=A.getElementsByTagName("title")[0],(!P||P[Mt]||P[he]||P.namespaceURI==="http://www.w3.org/2000/svg"||P.hasAttribute("itemprop"))&&(P=A.createElement(w),A.head.insertBefore(P,A.querySelector("head > title"))),Ha(P,w,m),P[he]=c,jn(P),w=P;break e;case"link":var se=CR("link","href",A).get(w+(m.href||""));if(se){for(var Se=0;Se<se.length;Se++)if(P=se[Se],P.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&P.getAttribute("rel")===(m.rel==null?null:m.rel)&&P.getAttribute("title")===(m.title==null?null:m.title)&&P.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){se.splice(Se,1);break t}}P=A.createElement(w),Ha(P,w,m),A.head.appendChild(P);break;case"meta":if(se=CR("meta","content",A).get(w+(m.content||""))){for(Se=0;Se<se.length;Se++)if(P=se[Se],P.getAttribute("content")===(m.content==null?null:""+m.content)&&P.getAttribute("name")===(m.name==null?null:m.name)&&P.getAttribute("property")===(m.property==null?null:m.property)&&P.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&P.getAttribute("charset")===(m.charSet==null?null:m.charSet)){se.splice(Se,1);break t}}P=A.createElement(w),Ha(P,w,m),A.head.appendChild(P);break;default:throw Error(r(468,w))}P[he]=c,jn(P),w=P}c.stateNode=w}else kR(A,c.type,c.stateNode);else c.stateNode=ER(A,w,c.memoizedProps);else P!==w?(P===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):P.count--,w===null?kR(A,c.type,c.stateNode):ER(A,w,c.memoizedProps)):w===null&&c.stateNode!==null&&L_(c,c.memoizedProps,m.memoizedProps)}break;case 27:Ui(f,c),Hi(c),w&512&&(ra||m===null||vs(m,m.return)),m!==null&&w&4&&L_(c,c.memoizedProps,m.memoizedProps);break;case 5:if(Ui(f,c),Hi(c),w&512&&(ra||m===null||vs(m,m.return)),c.flags&32){A=c.stateNode;try{ac(A,"")}catch(gt){Ar(c,c.return,gt)}}w&4&&c.stateNode!=null&&(A=c.memoizedProps,L_(c,A,m!==null?m.memoizedProps:A)),w&1024&&(z_=!0);break;case 6:if(Ui(f,c),Hi(c),w&4){if(c.stateNode===null)throw Error(r(162));w=c.memoizedProps,m=c.stateNode;try{m.nodeValue=w}catch(gt){Ar(c,c.return,gt)}}break;case 3:if(Vy=null,A=Do,Do=Hy(f.containerInfo),Ui(f,c),Do=A,Hi(c),w&4&&m!==null&&m.memoizedState.isDehydrated)try{ym(f.containerInfo)}catch(gt){Ar(c,c.return,gt)}z_&&(z_=!1,ON(c));break;case 4:w=Do,Do=Hy(c.stateNode.containerInfo),Ui(f,c),Hi(c),Do=w;break;case 12:Ui(f,c),Hi(c);break;case 13:Ui(f,c),Hi(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(K_=le()),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,U_(c,w)));break;case 22:A=c.memoizedState!==null;var ze=m!==null&&m.memoizedState!==null,dt=vl,Et=ra;if(vl=dt||A,ra=Et||ze,Ui(f,c),ra=Et,vl=dt,Hi(c),w&8192)e:for(f=c.stateNode,f._visibility=A?f._visibility&-2:f._visibility|1,A&&(m===null||ze||vl||ra||Wu(c)),m=null,f=c;;){if(f.tag===5||f.tag===26){if(m===null){ze=m=f;try{if(P=ze.stateNode,A)se=P.style,typeof se.setProperty=="function"?se.setProperty("display","none","important"):se.display="none";else{Se=ze.stateNode;var It=ze.memoizedProps.style,mt=It!=null&&It.hasOwnProperty("display")?It.display:null;Se.style.display=mt==null||typeof mt=="boolean"?"":(""+mt).trim()}}catch(gt){Ar(ze,ze.return,gt)}}}else if(f.tag===6){if(m===null){ze=f;try{ze.stateNode.nodeValue=A?"":ze.memoizedProps}catch(gt){Ar(ze,ze.return,gt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===c)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break e;for(;f.sibling===null;){if(f.return===null||f.return===c)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}w&4&&(w=c.updateQueue,w!==null&&(m=w.retryQueue,m!==null&&(w.retryQueue=null,U_(c,m))));break;case 19:Ui(f,c),Hi(c),w&4&&(w=c.updateQueue,w!==null&&(c.updateQueue=null,U_(c,w)));break;case 30:break;case 21:break;default:Ui(f,c),Hi(c)}}function Hi(c){var f=c.flags;if(f&2){try{for(var m,w=c.return;w!==null;){if(EN(w)){m=w;break}w=w.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var A=m.stateNode,P=$_(c);Ry(c,P,A);break;case 5:var se=m.stateNode;m.flags&32&&(ac(se,""),m.flags&=-33);var Se=$_(c);Ry(c,Se,se);break;case 3:case 4:var ze=m.stateNode.containerInfo,dt=$_(c);B_(c,dt,ze);break;default:throw Error(r(161))}}catch(Et){Ar(c,c.return,Et)}c.flags&=-3}f&4096&&(c.flags&=-4097)}function ON(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var f=c;ON(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),c=c.sibling}}function xc(c,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)TN(c,f.alternate,f),f=f.sibling}function Wu(c){for(c=c.child;c!==null;){var f=c;switch(f.tag){case 0:case 11:case 14:case 15:_c(4,f,f.return),Wu(f);break;case 1:vs(f,f.return);var m=f.stateNode;typeof m.componentWillUnmount=="function"&&xN(f,f.return,m),Wu(f);break;case 27:cm(f.stateNode);case 26:case 5:vs(f,f.return),Wu(f);break;case 22:f.memoizedState===null&&Wu(f);break;case 30:Wu(f);break;default:Wu(f)}c=c.sibling}}function Sc(c,f,m){for(m=m&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var w=f.alternate,A=c,P=f,se=P.flags;switch(P.tag){case 0:case 11:case 15:Sc(A,P,m),Qp(4,P);break;case 1:if(Sc(A,P,m),w=P,A=w.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(dt){Ar(w,w.return,dt)}if(w=P,A=w.updateQueue,A!==null){var Se=w.stateNode;try{var ze=A.shared.hiddenCallbacks;if(ze!==null)for(A.shared.hiddenCallbacks=null,A=0;A<ze.length;A++)sA(ze[A],Se)}catch(dt){Ar(w,w.return,dt)}}m&&se&64&&_N(P),em(P,P.return);break;case 27:CN(P);case 26:case 5:Sc(A,P,m),m&&w===null&&se&4&&SN(P),em(P,P.return);break;case 12:Sc(A,P,m);break;case 13:Sc(A,P,m),m&&se&4&&RN(A,P);break;case 22:P.memoizedState===null&&Sc(A,P,m),em(P,P.return);break;case 30:break;default:Sc(A,P,m)}f=f.sibling}}function H_(c,f){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(c=f.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&$p(m))}function q_(c,f){c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&$p(c))}function ws(c,f,m,w){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)DN(c,f,m,w),f=f.sibling}function DN(c,f,m,w){var A=f.flags;switch(f.tag){case 0:case 11:case 15:ws(c,f,m,w),A&2048&&Qp(9,f);break;case 1:ws(c,f,m,w);break;case 3:ws(c,f,m,w),A&2048&&(c=null,f.alternate!==null&&(c=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==c&&(f.refCount++,c!=null&&$p(c)));break;case 12:if(A&2048){ws(c,f,m,w),c=f.stateNode;try{var P=f.memoizedProps,se=P.id,Se=P.onPostCommit;typeof Se=="function"&&Se(se,f.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(ze){Ar(f,f.return,ze)}}else ws(c,f,m,w);break;case 13:ws(c,f,m,w);break;case 23:break;case 22:P=f.stateNode,se=f.alternate,f.memoizedState!==null?P._visibility&2?ws(c,f,m,w):tm(c,f):P._visibility&2?ws(c,f,m,w):(P._visibility|=2,Cf(c,f,m,w,(f.subtreeFlags&10256)!==0)),A&2048&&H_(se,f);break;case 24:ws(c,f,m,w),A&2048&&q_(f.alternate,f);break;default:ws(c,f,m,w)}}function Cf(c,f,m,w,A){for(A=A&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var P=c,se=f,Se=m,ze=w,dt=se.flags;switch(se.tag){case 0:case 11:case 15:Cf(P,se,Se,ze,A),Qp(8,se);break;case 23:break;case 22:var Et=se.stateNode;se.memoizedState!==null?Et._visibility&2?Cf(P,se,Se,ze,A):tm(P,se):(Et._visibility|=2,Cf(P,se,Se,ze,A)),A&&dt&2048&&H_(se.alternate,se);break;case 24:Cf(P,se,Se,ze,A),A&&dt&2048&&q_(se.alternate,se);break;default:Cf(P,se,Se,ze,A)}f=f.sibling}}function tm(c,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var m=c,w=f,A=w.flags;switch(w.tag){case 22:tm(m,w),A&2048&&H_(w.alternate,w);break;case 24:tm(m,w),A&2048&&q_(w.alternate,w);break;default:tm(m,w)}f=f.sibling}}var nm=8192;function kf(c){if(c.subtreeFlags&nm)for(c=c.child;c!==null;)jN(c),c=c.sibling}function jN(c){switch(c.tag){case 26:kf(c),c.flags&nm&&c.memoizedState!==null&&Xz(Do,c.memoizedState,c.memoizedProps);break;case 5:kf(c);break;case 3:case 4:var f=Do;Do=Hy(c.stateNode.containerInfo),kf(c),Do=f;break;case 22:c.memoizedState===null&&(f=c.alternate,f!==null&&f.memoizedState!==null?(f=nm,nm=16777216,kf(c),nm=f):kf(c));break;default:kf(c)}}function MN(c){var f=c.alternate;if(f!==null&&(c=f.child,c!==null)){f.child=null;do f=c.sibling,c.sibling=null,c=f;while(c!==null)}}function rm(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var w=f[m];Aa=w,FN(w,c)}MN(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)PN(c),c=c.sibling}function PN(c){switch(c.tag){case 0:case 11:case 15:rm(c),c.flags&2048&&_c(9,c,c.return);break;case 3:rm(c);break;case 12:rm(c);break;case 22:var f=c.stateNode;c.memoizedState!==null&&f._visibility&2&&(c.return===null||c.return.tag!==13)?(f._visibility&=-3,Iy(c)):rm(c);break;default:rm(c)}}function Iy(c){var f=c.deletions;if((c.flags&16)!==0){if(f!==null)for(var m=0;m<f.length;m++){var w=f[m];Aa=w,FN(w,c)}MN(c)}for(c=c.child;c!==null;){switch(f=c,f.tag){case 0:case 11:case 15:_c(8,f,f.return),Iy(f);break;case 22:m=f.stateNode,m._visibility&2&&(m._visibility&=-3,Iy(f));break;default:Iy(f)}c=c.sibling}}function FN(c,f){for(;Aa!==null;){var m=Aa;switch(m.tag){case 0:case 11:case 15:_c(8,m,f);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var w=m.memoizedState.cachePool.pool;w!=null&&w.refCount++}break;case 24:$p(m.memoizedState.cache)}if(w=m.child,w!==null)w.return=m,Aa=w;else e:for(m=c;Aa!==null;){w=Aa;var A=w.sibling,P=w.return;if(AN(w),w===m){Aa=null;break e}if(A!==null){A.return=P,Aa=A;break e}Aa=P}}}var hz={getCacheForType:function(c){var f=Xa(ma),m=f.data.get(c);return m===void 0&&(m=c(),f.data.set(c,m)),m}},pz=typeof WeakMap=="function"?WeakMap:Map,hr=0,Or=null,Hn=null,Kn=0,pr=0,qi=null,Ec=!1,Tf=!1,V_=!1,_l=0,Yr=0,Cc=0,Ku=0,G_=0,fo=0,Af=0,am=null,Ti=null,W_=!1,K_=0,Oy=1/0,Dy=null,kc=null,Ua=0,Tc=null,Nf=null,Rf=0,Z_=0,Y_=null,LN=null,im=0,X_=null;function Vi(){if((hr&2)!==0&&Kn!==0)return Kn&-Kn;if(ae.T!==null){var c=yf;return c!==0?c:ax()}return H()}function $N(){fo===0&&(fo=(Kn&536870912)===0||ir?vt():536870912);var c=uo.current;return c!==null&&(c.flags|=32),fo}function Gi(c,f,m){(c===Or&&(pr===2||pr===9)||c.cancelPendingCommit!==null)&&(If(c,0),Ac(c,Kn,fo,!1)),tt(c,m),((hr&2)===0||c!==Or)&&(c===Or&&((hr&2)===0&&(Ku|=m),Yr===4&&Ac(c,Kn,fo,!1)),_s(c))}function BN(c,f,m){if((hr&6)!==0)throw Error(r(327));var w=!m&&(f&124)===0&&(f&c.expiredLanes)===0||ce(c,f),A=w?yz(c,f):ex(c,f,!0),P=w;do{if(A===0){Tf&&!w&&Ac(c,f,0,!1);break}else{if(m=c.current.alternate,P&&!mz(m)){A=ex(c,f,!1),P=!1;continue}if(A===2){if(P=f,c.errorRecoveryDisabledLanes&P)var se=0;else se=c.pendingLanes&-536870913,se=se!==0?se:se&536870912?536870912:0;if(se!==0){f=se;e:{var Se=c;A=am;var ze=Se.current.memoizedState.isDehydrated;if(ze&&(If(Se,se).flags|=256),se=ex(Se,se,!1),se!==2){if(V_&&!ze){Se.errorRecoveryDisabledLanes|=P,Ku|=P,A=4;break e}P=Ti,Ti=A,P!==null&&(Ti===null?Ti=P:Ti.push.apply(Ti,P))}A=se}if(P=!1,A!==2)continue}}if(A===1){If(c,0),Ac(c,f,0,!0);break}e:{switch(w=c,P=A,P){case 0:case 1:throw Error(r(345));case 4:if((f&4194048)!==f)break;case 6:Ac(w,f,fo,!Ec);break e;case 2:Ti=null;break;case 3:case 5:break;default:throw Error(r(329))}if((f&62914560)===f&&(A=K_+300-le(),10<A)){if(Ac(w,f,fo,!Ec),ke(w,0,!0)!==0)break e;w.timeoutHandle=mR(zN.bind(null,w,m,Ti,Dy,W_,f,fo,Ku,Af,Ec,P,2,-0,0),A);break e}zN(w,m,Ti,Dy,W_,f,fo,Ku,Af,Ec,P,0,-0,0)}}break}while(!0);_s(c)}function zN(c,f,m,w,A,P,se,Se,ze,dt,Et,It,mt,gt){if(c.timeoutHandle=-1,It=f.subtreeFlags,(It&8192||(It&16785408)===16785408)&&(fm={stylesheets:null,count:0,unsuspend:Yz},jN(f),It=Jz(),It!==null)){c.cancelPendingCommit=It(KN.bind(null,c,f,P,m,w,A,se,Se,ze,Et,1,mt,gt)),Ac(c,P,se,!dt);return}KN(c,f,P,m,w,A,se,Se,ze)}function mz(c){for(var f=c;;){var m=f.tag;if((m===0||m===11||m===15)&&f.flags&16384&&(m=f.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var w=0;w<m.length;w++){var A=m[w],P=A.getSnapshot;A=A.value;try{if(!Ya(P(),A))return!1}catch{return!1}}if(m=f.child,f.subtreeFlags&16384&&m!==null)m.return=f,f=m;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ac(c,f,m,w){f&=~G_,f&=~Ku,c.suspendedLanes|=f,c.pingedLanes&=~f,w&&(c.warmLanes|=f),w=c.expirationTimes;for(var A=f;0<A;){var P=31-Gt(A),se=1<<P;w[P]=-1,A&=~se}m!==0&&De(c,m,f)}function jy(){return(hr&6)===0?(om(0),!1):!0}function J_(){if(Hn!==null){if(pr===0)var c=Hn.return;else c=Hn,hl=Uu=null,m_(c),Sf=null,Yp=0,c=Hn;for(;c!==null;)wN(c.alternate,c),c=c.return;Hn=null}}function If(c,f){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,Dz(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),J_(),Or=c,Hn=m=ul(c.current,null),Kn=f,pr=0,qi=null,Ec=!1,Tf=ce(c,f),V_=!1,Af=fo=G_=Ku=Cc=Yr=0,Ti=am=null,W_=!1,(f&8)!==0&&(f|=f&32);var w=c.entangledLanes;if(w!==0)for(c=c.entanglements,w&=f;0<w;){var A=31-Gt(w),P=1<<A;f|=c[A],w&=~P}return _l=f,_n(),m}function UN(c,f){Fn=null,ae.H=_y,f===zp||f===dy?(f=iA(),pr=3):f===nA?(f=iA(),pr=4):pr=f===oN?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,qi=f,Hn===null&&(Yr=1,ky(c,hn(f,c.current)))}function HN(){var c=ae.H;return ae.H=_y,c===null?_y:c}function qN(){var c=ae.A;return ae.A=hz,c}function Q_(){Yr=4,Ec||(Kn&4194048)!==Kn&&uo.current!==null||(Tf=!0),(Cc&134217727)===0&&(Ku&134217727)===0||Or===null||Ac(Or,Kn,fo,!1)}function ex(c,f,m){var w=hr;hr|=2;var A=HN(),P=qN();(Or!==c||Kn!==f)&&(Dy=null,If(c,f)),f=!1;var se=Yr;e:do try{if(pr!==0&&Hn!==null){var Se=Hn,ze=qi;switch(pr){case 8:J_(),se=6;break e;case 3:case 2:case 9:case 6:uo.current===null&&(f=!0);var dt=pr;if(pr=0,qi=null,Of(c,Se,ze,dt),m&&Tf){se=0;break e}break;default:dt=pr,pr=0,qi=null,Of(c,Se,ze,dt)}}gz(),se=Yr;break}catch(Et){UN(c,Et)}while(!0);return f&&c.shellSuspendCounter++,hl=Uu=null,hr=w,ae.H=A,ae.A=P,Hn===null&&(Or=null,Kn=0,_n()),se}function gz(){for(;Hn!==null;)VN(Hn)}function yz(c,f){var m=hr;hr|=2;var w=HN(),A=qN();Or!==c||Kn!==f?(Dy=null,Oy=le()+500,If(c,f)):Tf=ce(c,f);e:do try{if(pr!==0&&Hn!==null){f=Hn;var P=qi;t:switch(pr){case 1:pr=0,qi=null,Of(c,f,P,1);break;case 2:case 9:if(rA(P)){pr=0,qi=null,GN(f);break}f=function(){pr!==2&&pr!==9||Or!==c||(pr=7),_s(c)},P.then(f,f);break e;case 3:pr=7;break e;case 4:pr=5;break e;case 7:rA(P)?(pr=0,qi=null,GN(f)):(pr=0,qi=null,Of(c,f,P,7));break;case 5:var se=null;switch(Hn.tag){case 26:se=Hn.memoizedState;case 5:case 27:var Se=Hn;if(!se||TR(se)){pr=0,qi=null;var ze=Se.sibling;if(ze!==null)Hn=ze;else{var dt=Se.return;dt!==null?(Hn=dt,My(dt)):Hn=null}break t}}pr=0,qi=null,Of(c,f,P,5);break;case 6:pr=0,qi=null,Of(c,f,P,6);break;case 8:J_(),Yr=6;break e;default:throw Error(r(462))}}bz();break}catch(Et){UN(c,Et)}while(!0);return hl=Uu=null,ae.H=w,ae.A=A,hr=m,Hn!==null?0:(Or=null,Kn=0,_n(),Yr)}function bz(){for(;Hn!==null&&!me();)VN(Hn)}function VN(c){var f=bN(c.alternate,c,_l);c.memoizedProps=c.pendingProps,f===null?My(c):Hn=f}function GN(c){var f=c,m=f.alternate;switch(f.tag){case 15:case 0:f=fN(m,f,f.pendingProps,f.type,void 0,Kn);break;case 11:f=fN(m,f,f.pendingProps,f.type.render,f.ref,Kn);break;case 5:m_(f);default:wN(m,f),f=Hn=WT(f,_l),f=bN(m,f,_l)}c.memoizedProps=c.pendingProps,f===null?My(c):Hn=f}function Of(c,f,m,w){hl=Uu=null,m_(f),Sf=null,Yp=0;var A=f.return;try{if(sz(c,A,f,m,Kn)){Yr=1,ky(c,hn(m,c.current)),Hn=null;return}}catch(P){if(A!==null)throw Hn=A,P;Yr=1,ky(c,hn(m,c.current)),Hn=null;return}f.flags&32768?(ir||w===1?c=!0:Tf||(Kn&536870912)!==0?c=!1:(Ec=c=!0,(w===2||w===9||w===3||w===6)&&(w=uo.current,w!==null&&w.tag===13&&(w.flags|=16384))),WN(f,c)):My(f)}function My(c){var f=c;do{if((f.flags&32768)!==0){WN(f,Ec);return}c=f.return;var m=cz(f.alternate,f,_l);if(m!==null){Hn=m;return}if(f=f.sibling,f!==null){Hn=f;return}Hn=f=c}while(f!==null);Yr===0&&(Yr=5)}function WN(c,f){do{var m=uz(c.alternate,c);if(m!==null){m.flags&=32767,Hn=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!f&&(c=c.sibling,c!==null)){Hn=c;return}Hn=c=m}while(c!==null);Yr=6,Hn=null}function KN(c,f,m,w,A,P,se,Se,ze){c.cancelPendingCommit=null;do Py();while(Ua!==0);if((hr&6)!==0)throw Error(r(327));if(f!==null){if(f===c.current)throw Error(r(177));if(P=f.lanes|f.childLanes,P|=Ba,ge(c,m,P,se,Se,ze),c===Or&&(Hn=Or=null,Kn=0),Nf=f,Tc=c,Rf=m,Z_=P,Y_=A,LN=w,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,xz(Me,function(){return QN(),null})):(c.callbackNode=null,c.callbackPriority=0),w=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||w){w=ae.T,ae.T=null,A=re.p,re.p=2,se=hr,hr|=4;try{dz(c,f,m)}finally{hr=se,re.p=A,ae.T=w}}Ua=1,ZN(),YN(),XN()}}function ZN(){if(Ua===1){Ua=0;var c=Tc,f=Nf,m=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||m){m=ae.T,ae.T=null;var w=re.p;re.p=2;var A=hr;hr|=4;try{IN(f,c);var P=fx,se=ue(c.containerInfo),Se=P.focusedElem,ze=P.selectionRange;if(se!==Se&&Se&&Se.ownerDocument&&te(Se.ownerDocument.documentElement,Se)){if(ze!==null&&we(Se)){var dt=ze.start,Et=ze.end;if(Et===void 0&&(Et=dt),"selectionStart"in Se)Se.selectionStart=dt,Se.selectionEnd=Math.min(Et,Se.value.length);else{var It=Se.ownerDocument||document,mt=It&&It.defaultView||window;if(mt.getSelection){var gt=mt.getSelection(),xn=Se.textContent.length,mn=Math.min(ze.start,xn),Sr=ze.end===void 0?mn:Math.min(ze.end,xn);!gt.extend&&mn>Sr&&(se=Sr,Sr=mn,mn=se);var rt=K(Se,mn),Ze=K(Se,Sr);if(rt&&Ze&&(gt.rangeCount!==1||gt.anchorNode!==rt.node||gt.anchorOffset!==rt.offset||gt.focusNode!==Ze.node||gt.focusOffset!==Ze.offset)){var ct=It.createRange();ct.setStart(rt.node,rt.offset),gt.removeAllRanges(),mn>Sr?(gt.addRange(ct),gt.extend(Ze.node,Ze.offset)):(ct.setEnd(Ze.node,Ze.offset),gt.addRange(ct))}}}}for(It=[],gt=Se;gt=gt.parentNode;)gt.nodeType===1&&It.push({element:gt,left:gt.scrollLeft,top:gt.scrollTop});for(typeof Se.focus=="function"&&Se.focus(),Se=0;Se<It.length;Se++){var At=It[Se];At.element.scrollLeft=At.left,At.element.scrollTop=At.top}}Ky=!!dx,fx=dx=null}finally{hr=A,re.p=w,ae.T=m}}c.current=f,Ua=2}}function YN(){if(Ua===2){Ua=0;var c=Tc,f=Nf,m=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||m){m=ae.T,ae.T=null;var w=re.p;re.p=2;var A=hr;hr|=4;try{TN(c,f.alternate,f)}finally{hr=A,re.p=w,ae.T=m}}Ua=3}}function XN(){if(Ua===4||Ua===3){Ua=0,Te();var c=Tc,f=Nf,m=Rf,w=LN;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Ua=5:(Ua=0,Nf=Tc=null,JN(c,c.pendingLanes));var A=c.pendingLanes;if(A===0&&(kc=null),pe(m),f=f.stateNode,jt&&typeof jt.onCommitFiberRoot=="function")try{jt.onCommitFiberRoot(_t,f,void 0,(f.current.flags&128)===128)}catch{}if(w!==null){f=ae.T,A=re.p,re.p=2,ae.T=null;try{for(var P=c.onRecoverableError,se=0;se<w.length;se++){var Se=w[se];P(Se.value,{componentStack:Se.stack})}}finally{ae.T=f,re.p=A}}(Rf&3)!==0&&Py(),_s(c),A=c.pendingLanes,(m&4194090)!==0&&(A&42)!==0?c===X_?im++:(im=0,X_=c):im=0,om(0)}}function JN(c,f){(c.pooledCacheLanes&=f)===0&&(f=c.pooledCache,f!=null&&(c.pooledCache=null,$p(f)))}function Py(c){return ZN(),YN(),XN(),QN()}function QN(){if(Ua!==5)return!1;var c=Tc,f=Z_;Z_=0;var m=pe(Rf),w=ae.T,A=re.p;try{re.p=32>m?32:m,ae.T=null,m=Y_,Y_=null;var P=Tc,se=Rf;if(Ua=0,Nf=Tc=null,Rf=0,(hr&6)!==0)throw Error(r(331));var Se=hr;if(hr|=4,PN(P.current),DN(P,P.current,se,m),hr=Se,om(0,!1),jt&&typeof jt.onPostCommitFiberRoot=="function")try{jt.onPostCommitFiberRoot(_t,P)}catch{}return!0}finally{re.p=A,ae.T=w,JN(c,f)}}function eR(c,f,m){f=hn(m,f),f=N_(c.stateNode,f,2),c=yc(c,f,2),c!==null&&(tt(c,2),_s(c))}function Ar(c,f,m){if(c.tag===3)eR(c,c,m);else for(;f!==null;){if(f.tag===3){eR(f,c,m);break}else if(f.tag===1){var w=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(kc===null||!kc.has(w))){c=hn(m,c),m=aN(2),w=yc(f,m,2),w!==null&&(iN(m,w,f,c),tt(w,2),_s(w));break}}f=f.return}}function tx(c,f,m){var w=c.pingCache;if(w===null){w=c.pingCache=new pz;var A=new Set;w.set(f,A)}else A=w.get(f),A===void 0&&(A=new Set,w.set(f,A));A.has(m)||(V_=!0,A.add(m),c=vz.bind(null,c,f,m),f.then(c,c))}function vz(c,f,m){var w=c.pingCache;w!==null&&w.delete(f),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,Or===c&&(Kn&m)===m&&(Yr===4||Yr===3&&(Kn&62914560)===Kn&&300>le()-K_?(hr&2)===0&&If(c,0):G_|=m,Af===Kn&&(Af=0)),_s(c)}function tR(c,f){f===0&&(f=M()),c=Oo(c,f),c!==null&&(tt(c,f),_s(c))}function wz(c){var f=c.memoizedState,m=0;f!==null&&(m=f.retryLane),tR(c,m)}function _z(c,f){var m=0;switch(c.tag){case 13:var w=c.stateNode,A=c.memoizedState;A!==null&&(m=A.retryLane);break;case 19:w=c.stateNode;break;case 22:w=c.stateNode._retryCache;break;default:throw Error(r(314))}w!==null&&w.delete(f),tR(c,m)}function xz(c,f){return Ie(c,f)}var Fy=null,Df=null,nx=!1,Ly=!1,rx=!1,Zu=0;function _s(c){c!==Df&&c.next===null&&(Df===null?Fy=Df=c:Df=Df.next=c),Ly=!0,nx||(nx=!0,Ez())}function om(c,f){if(!rx&&Ly){rx=!0;do for(var m=!1,w=Fy;w!==null;){if(c!==0){var A=w.pendingLanes;if(A===0)var P=0;else{var se=w.suspendedLanes,Se=w.pingedLanes;P=(1<<31-Gt(42|c)+1)-1,P&=A&~(se&~Se),P=P&201326741?P&201326741|1:P?P|2:0}P!==0&&(m=!0,iR(w,P))}else P=Kn,P=ke(w,w===Or?P:0,w.cancelPendingCommit!==null||w.timeoutHandle!==-1),(P&3)===0||ce(w,P)||(m=!0,iR(w,P));w=w.next}while(m);rx=!1}}function Sz(){nR()}function nR(){Ly=nx=!1;var c=0;Zu!==0&&(Oz()&&(c=Zu),Zu=0);for(var f=le(),m=null,w=Fy;w!==null;){var A=w.next,P=rR(w,f);P===0?(w.next=null,m===null?Fy=A:m.next=A,A===null&&(Df=m)):(m=w,(c!==0||(P&3)!==0)&&(Ly=!0)),w=A}om(c)}function rR(c,f){for(var m=c.suspendedLanes,w=c.pingedLanes,A=c.expirationTimes,P=c.pendingLanes&-62914561;0<P;){var se=31-Gt(P),Se=1<<se,ze=A[se];ze===-1?((Se&m)===0||(Se&w)!==0)&&(A[se]=ft(Se,f)):ze<=f&&(c.expiredLanes|=Se),P&=~Se}if(f=Or,m=Kn,m=ke(c,c===f?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w=c.callbackNode,m===0||c===f&&(pr===2||pr===9)||c.cancelPendingCommit!==null)return w!==null&&w!==null&&V(w),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||ce(c,m)){if(f=m&-m,f===c.callbackPriority)return f;switch(w!==null&&V(w),pe(m)){case 2:case 8:m=xe;break;case 32:m=Me;break;case 268435456:m=We;break;default:m=Me}return w=aR.bind(null,c),m=Ie(m,w),c.callbackPriority=f,c.callbackNode=m,f}return w!==null&&w!==null&&V(w),c.callbackPriority=2,c.callbackNode=null,2}function aR(c,f){if(Ua!==0&&Ua!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if(Py()&&c.callbackNode!==m)return null;var w=Kn;return w=ke(c,c===Or?w:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),w===0?null:(BN(c,w,f),rR(c,le()),c.callbackNode!=null&&c.callbackNode===m?aR.bind(null,c):null)}function iR(c,f){if(Py())return null;BN(c,f,!0)}function Ez(){jz(function(){(hr&6)!==0?Ie(J,Sz):nR()})}function ax(){return Zu===0&&(Zu=vt()),Zu}function oR(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:tl(""+c)}function sR(c,f){var m=f.ownerDocument.createElement("input");return m.name=f.name,m.value=f.value,c.id&&m.setAttribute("form",c.id),f.parentNode.insertBefore(m,f),c=new FormData(c),m.parentNode.removeChild(m),c}function Cz(c,f,m,w,A){if(f==="submit"&&m&&m.stateNode===A){var P=oR((A[Ae]||null).action),se=w.submitter;se&&(f=(f=se[Ae]||null)?oR(f.formAction):se.getAttribute("formAction"),f!==null&&(P=f,se=null));var Se=new Jd("action","action",null,w,A);c.push({event:Se,listeners:[{instance:null,listener:function(){if(w.defaultPrevented){if(Zu!==0){var ze=se?sR(A,se):new FormData(A);E_(m,{pending:!0,data:ze,method:A.method,action:P},null,ze)}}else typeof P=="function"&&(Se.preventDefault(),ze=se?sR(A,se):new FormData(A),E_(m,{pending:!0,data:ze,method:A.method,action:P},P,ze))},currentTarget:A}]})}}for(var ix=0;ix<Zt.length;ix++){var ox=Zt[ix],kz=ox.toLowerCase(),Tz=ox[0].toUpperCase()+ox.slice(1);Lt(kz,"on"+Tz)}Lt(ht,"onAnimationEnd"),Lt(bt,"onAnimationIteration"),Lt(wt,"onAnimationStart"),Lt("dblclick","onDoubleClick"),Lt("focusin","onFocus"),Lt("focusout","onBlur"),Lt(St,"onTransitionRun"),Lt(Bt,"onTransitionStart"),Lt(Kt,"onTransitionCancel"),Lt(Ft,"onTransitionEnd"),cs("onMouseEnter",["mouseout","mouseover"]),cs("onMouseLeave",["mouseout","mouseover"]),cs("onPointerEnter",["pointerout","pointerover"]),cs("onPointerLeave",["pointerout","pointerover"]),ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ls("onBeforeInput",["compositionend","keypress","textInput","paste"]),ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Az=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(sm));function lR(c,f){f=(f&4)!==0;for(var m=0;m<c.length;m++){var w=c[m],A=w.event;w=w.listeners;e:{var P=void 0;if(f)for(var se=w.length-1;0<=se;se--){var Se=w[se],ze=Se.instance,dt=Se.currentTarget;if(Se=Se.listener,ze!==P&&A.isPropagationStopped())break e;P=Se,A.currentTarget=dt;try{P(A)}catch(Et){Cy(Et)}A.currentTarget=null,P=ze}else for(se=0;se<w.length;se++){if(Se=w[se],ze=Se.instance,dt=Se.currentTarget,Se=Se.listener,ze!==P&&A.isPropagationStopped())break e;P=Se,A.currentTarget=dt;try{P(A)}catch(Et){Cy(Et)}A.currentTarget=null,P=ze}}}}function qn(c,f){var m=f[pt];m===void 0&&(m=f[pt]=new Set);var w=c+"__bubble";m.has(w)||(cR(f,c,2,!1),m.add(w))}function sx(c,f,m){var w=0;f&&(w|=4),cR(m,c,w,f)}var $y="_reactListening"+Math.random().toString(36).slice(2);function lx(c){if(!c[$y]){c[$y]=!0,ci.forEach(function(m){m!=="selectionchange"&&(Az.has(m)||sx(m,!1,c),sx(m,!0,c))});var f=c.nodeType===9?c:c.ownerDocument;f===null||f[$y]||(f[$y]=!0,sx("selectionchange",!1,f))}}function cR(c,f,m,w){switch(DR(f)){case 2:var A=t7;break;case 8:A=n7;break;default:A=xx}m=A.bind(null,f,m,c),A=void 0,!_p||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(A=!0),w?A!==void 0?c.addEventListener(f,m,{capture:!0,passive:A}):c.addEventListener(f,m,!0):A!==void 0?c.addEventListener(f,m,{passive:A}):c.addEventListener(f,m,!1)}function cx(c,f,m,w,A){var P=w;if((f&1)===0&&(f&2)===0&&w!==null)e:for(;;){if(w===null)return;var se=w.tag;if(se===3||se===4){var Se=w.stateNode.containerInfo;if(Se===A)break;if(se===4)for(se=w.return;se!==null;){var ze=se.tag;if((ze===3||ze===4)&&se.stateNode.containerInfo===A)return;se=se.return}for(;Se!==null;){if(se=An(Se),se===null)return;if(ze=se.tag,ze===5||ze===6||ze===26||ze===27){w=P=se;continue e}Se=Se.parentNode}}w=w.return}oc(function(){var dt=P,Et=Yd(m),It=[];e:{var mt=Ut.get(c);if(mt!==void 0){var gt=Jd,xn=c;switch(c){case"keypress":if(cc(m)===0)break e;case"keydown":case"keyup":gt=sf;break;case"focusin":xn="focus",gt=uc;break;case"focusout":xn="blur",gt=uc;break;case"beforeblur":case"afterblur":gt=uc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":gt=tf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":gt=Kg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":gt=Ap;break;case ht:case bt:case wt:gt=Zg;break;case Ft:gt=Np;break;case"scroll":case"scrollend":gt=Qd;break;case"wheel":gt=cf;break;case"copy":case"cut":case"paste":gt=af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":gt=Tp;break;case"toggle":case"beforetoggle":gt=Jg}var mn=(f&4)!==0,Sr=!mn&&(c==="scroll"||c==="scrollend"),rt=mn?mt!==null?mt+"Capture":null:mt;mn=[];for(var Ze=dt,ct;Ze!==null;){var At=Ze;if(ct=At.stateNode,At=At.tag,At!==5&&At!==26&&At!==27||ct===null||rt===null||(At=al(Ze,rt),At!=null&&mn.push(lm(Ze,At,ct))),Sr)break;Ze=Ze.return}0<mn.length&&(mt=new gt(mt,xn,null,m,Et),It.push({event:mt,listeners:mn}))}}if((f&7)===0){e:{if(mt=c==="mouseover"||c==="pointerover",gt=c==="mouseout"||c==="pointerout",mt&&m!==ao&&(xn=m.relatedTarget||m.fromElement)&&(An(xn)||xn[He]))break e;if((gt||mt)&&(mt=Et.window===Et?Et:(mt=Et.ownerDocument)?mt.defaultView||mt.parentWindow:window,gt?(xn=m.relatedTarget||m.toElement,gt=dt,xn=xn?An(xn):null,xn!==null&&(Sr=i(xn),mn=xn.tag,xn!==Sr||mn!==5&&mn!==27&&mn!==6)&&(xn=null)):(gt=null,xn=dt),gt!==xn)){if(mn=tf,At="onMouseLeave",rt="onMouseEnter",Ze="mouse",(c==="pointerout"||c==="pointerover")&&(mn=Tp,At="onPointerLeave",rt="onPointerEnter",Ze="pointer"),Sr=gt==null?mt:vr(gt),ct=xn==null?mt:vr(xn),mt=new mn(At,Ze+"leave",gt,m,Et),mt.target=Sr,mt.relatedTarget=ct,At=null,An(Et)===dt&&(mn=new mn(rt,Ze+"enter",xn,m,Et),mn.target=ct,mn.relatedTarget=Sr,At=mn),Sr=At,gt&&xn)t:{for(mn=gt,rt=xn,Ze=0,ct=mn;ct;ct=jf(ct))Ze++;for(ct=0,At=rt;At;At=jf(At))ct++;for(;0<Ze-ct;)mn=jf(mn),Ze--;for(;0<ct-Ze;)rt=jf(rt),ct--;for(;Ze--;){if(mn===rt||rt!==null&&mn===rt.alternate)break t;mn=jf(mn),rt=jf(rt)}mn=null}else mn=null;gt!==null&&uR(It,mt,gt,mn,!1),xn!==null&&Sr!==null&&uR(It,Sr,xn,mn,!0)}}e:{if(mt=dt?vr(dt):window,gt=mt.nodeName&&mt.nodeName.toLowerCase(),gt==="select"||gt==="input"&&mt.type==="file")var nn=Pu;else if(ff(mt))if(oo)nn=hc;else{nn=cl;var $n=ay}else gt=mt.nodeName,!gt||gt.toLowerCase()!=="input"||mt.type!=="checkbox"&&mt.type!=="radio"?dt&&wp(dt.elementType)&&(nn=Pu):nn=jp;if(nn&&(nn=nn(c,dt))){Dp(It,nn,m,Et);break e}$n&&$n(c,mt,dt),c==="focusout"&&dt&&mt.type==="number"&&dt.memoizedProps.value!=null&&nc(mt,"number",mt.value)}switch($n=dt?vr(dt):window,c){case"focusin":(ff($n)||$n.contentEditable==="true")&&($e=$n,Ge=dt,Ye=null);break;case"focusout":Ye=Ge=$e=null;break;case"mousedown":nt=!0;break;case"contextmenu":case"mouseup":case"dragend":nt=!1,qe(It,m,Et);break;case"selectionchange":if(je)break;case"keydown":case"keyup":qe(It,m,Et)}var un;if(ju)e:{switch(c){case"compositionstart":var bn="onCompositionStart";break e;case"compositionend":bn="onCompositionEnd";break e;case"compositionupdate":bn="onCompositionUpdate";break e}bn=void 0}else ll?Op(c,m)&&(bn="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(bn="onCompositionStart");bn&&(uf&&m.locale!=="ko"&&(ll||bn!=="onCompositionStart"?bn==="onCompositionEnd"&&ll&&(un=lc()):(io=Et,Xd="value"in io?io.value:io.textContent,ll=!0)),$n=By(dt,bn),0<$n.length&&(bn=new of(bn,c,null,m,Et),It.push({event:bn,listeners:$n}),un?bn.data=un:(un=ey(m),un!==null&&(bn.data=un)))),(un=H1?ty(c,m):q1(c,m))&&(bn=By(dt,"onBeforeInput"),0<bn.length&&($n=new of("onBeforeInput","beforeinput",null,m,Et),It.push({event:$n,listeners:bn}),$n.data=un)),Cz(It,c,dt,m,Et)}lR(It,f)})}function lm(c,f,m){return{instance:c,listener:f,currentTarget:m}}function By(c,f){for(var m=f+"Capture",w=[];c!==null;){var A=c,P=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||P===null||(A=al(c,m),A!=null&&w.unshift(lm(c,A,P)),A=al(c,f),A!=null&&w.push(lm(c,A,P))),c.tag===3)return w;c=c.return}return[]}function jf(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function uR(c,f,m,w,A){for(var P=f._reactName,se=[];m!==null&&m!==w;){var Se=m,ze=Se.alternate,dt=Se.stateNode;if(Se=Se.tag,ze!==null&&ze===w)break;Se!==5&&Se!==26&&Se!==27||dt===null||(ze=dt,A?(dt=al(m,P),dt!=null&&se.unshift(lm(m,dt,ze))):A||(dt=al(m,P),dt!=null&&se.push(lm(m,dt,ze)))),m=m.return}se.length!==0&&c.push({event:f,listeners:se})}var Nz=/\r\n?/g,Rz=/\u0000|\uFFFD/g;function dR(c){return(typeof c=="string"?c:""+c).replace(Nz,`
`).replace(Rz,"")}function fR(c,f){return f=dR(f),dR(c)===f}function zy(){}function xr(c,f,m,w,A,P){switch(m){case"children":typeof w=="string"?f==="body"||f==="textarea"&&w===""||ac(c,w):(typeof w=="number"||typeof w=="bigint")&&f!=="body"&&ac(c,""+w);break;case"className":Js(c,"class",w);break;case"tabIndex":Js(c,"tabindex",w);break;case"dir":case"role":case"viewBox":case"width":case"height":Js(c,m,w);break;case"style":Gg(c,w,P);break;case"data":if(f!=="object"){Js(c,"data",w);break}case"src":case"href":if(w===""&&(f!=="a"||m!=="href")){c.removeAttribute(m);break}if(w==null||typeof w=="function"||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(m);break}w=tl(""+w),c.setAttribute(m,w);break;case"action":case"formAction":if(typeof w=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof P=="function"&&(m==="formAction"?(f!=="input"&&xr(c,f,"name",A.name,A,null),xr(c,f,"formEncType",A.formEncType,A,null),xr(c,f,"formMethod",A.formMethod,A,null),xr(c,f,"formTarget",A.formTarget,A,null)):(xr(c,f,"encType",A.encType,A,null),xr(c,f,"method",A.method,A,null),xr(c,f,"target",A.target,A,null)));if(w==null||typeof w=="symbol"||typeof w=="boolean"){c.removeAttribute(m);break}w=tl(""+w),c.setAttribute(m,w);break;case"onClick":w!=null&&(c.onclick=zy);break;case"onScroll":w!=null&&qn("scroll",c);break;case"onScrollEnd":w!=null&&qn("scrollend",c);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(A.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"multiple":c.multiple=w&&typeof w!="function"&&typeof w!="symbol";break;case"muted":c.muted=w&&typeof w!="function"&&typeof w!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(w==null||typeof w=="function"||typeof w=="boolean"||typeof w=="symbol"){c.removeAttribute("xlink:href");break}m=tl(""+w),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(m,""+w):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":w&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":w===!0?c.setAttribute(m,""):w!==!1&&w!=null&&typeof w!="function"&&typeof w!="symbol"?c.setAttribute(m,w):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":w!=null&&typeof w!="function"&&typeof w!="symbol"&&!isNaN(w)&&1<=w?c.setAttribute(m,w):c.removeAttribute(m);break;case"rowSpan":case"start":w==null||typeof w=="function"||typeof w=="symbol"||isNaN(w)?c.removeAttribute(m):c.setAttribute(m,w);break;case"popover":qn("beforetoggle",c),qn("toggle",c),Ro(c,"popover",w);break;case"xlinkActuate":$i(c,"http://www.w3.org/1999/xlink","xlink:actuate",w);break;case"xlinkArcrole":$i(c,"http://www.w3.org/1999/xlink","xlink:arcrole",w);break;case"xlinkRole":$i(c,"http://www.w3.org/1999/xlink","xlink:role",w);break;case"xlinkShow":$i(c,"http://www.w3.org/1999/xlink","xlink:show",w);break;case"xlinkTitle":$i(c,"http://www.w3.org/1999/xlink","xlink:title",w);break;case"xlinkType":$i(c,"http://www.w3.org/1999/xlink","xlink:type",w);break;case"xmlBase":$i(c,"http://www.w3.org/XML/1998/namespace","xml:base",w);break;case"xmlLang":$i(c,"http://www.w3.org/XML/1998/namespace","xml:lang",w);break;case"xmlSpace":$i(c,"http://www.w3.org/XML/1998/namespace","xml:space",w);break;case"is":Ro(c,"is",w);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=di.get(m)||m,Ro(c,m,w))}}function ux(c,f,m,w,A,P){switch(m){case"style":Gg(c,w,P);break;case"dangerouslySetInnerHTML":if(w!=null){if(typeof w!="object"||!("__html"in w))throw Error(r(61));if(m=w.__html,m!=null){if(A.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"children":typeof w=="string"?ac(c,w):(typeof w=="number"||typeof w=="bigint")&&ac(c,""+w);break;case"onScroll":w!=null&&qn("scroll",c);break;case"onScrollEnd":w!=null&&qn("scrollend",c);break;case"onClick":w!=null&&(c.onclick=zy);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ss.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),f=m.slice(2,A?m.length-7:void 0),P=c[Ae]||null,P=P!=null?P[m]:null,typeof P=="function"&&c.removeEventListener(f,P,A),typeof w=="function")){typeof P!="function"&&P!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(f,w,A);break e}m in c?c[m]=w:w===!0?c.setAttribute(m,""):Ro(c,m,w)}}}function Ha(c,f,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qn("error",c),qn("load",c);var w=!1,A=!1,P;for(P in m)if(m.hasOwnProperty(P)){var se=m[P];if(se!=null)switch(P){case"src":w=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:xr(c,f,P,se,m,null)}}A&&xr(c,f,"srcSet",m.srcSet,m,null),w&&xr(c,f,"src",m.src,m,null);return;case"input":qn("invalid",c);var Se=P=se=A=null,ze=null,dt=null;for(w in m)if(m.hasOwnProperty(w)){var Et=m[w];if(Et!=null)switch(w){case"name":A=Et;break;case"type":se=Et;break;case"checked":ze=Et;break;case"defaultChecked":dt=Et;break;case"value":P=Et;break;case"defaultValue":Se=Et;break;case"children":case"dangerouslySetInnerHTML":if(Et!=null)throw Error(r(137,f));break;default:xr(c,f,w,Et,m,null)}}bp(c,P,Se,ze,dt,se,A,!1),fs(c);return;case"select":qn("invalid",c),w=se=P=null;for(A in m)if(m.hasOwnProperty(A)&&(Se=m[A],Se!=null))switch(A){case"value":P=Se;break;case"defaultValue":se=Se;break;case"multiple":w=Se;default:xr(c,f,A,Se,m,null)}f=P,m=se,c.multiple=!!w,f!=null?el(c,!!w,f,!1):m!=null&&el(c,!!w,m,!0);return;case"textarea":qn("invalid",c),P=A=w=null;for(se in m)if(m.hasOwnProperty(se)&&(Se=m[se],Se!=null))switch(se){case"value":w=Se;break;case"defaultValue":A=Se;break;case"children":P=Se;break;case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(91));break;default:xr(c,f,se,Se,m,null)}vp(c,w,A,P),fs(c);return;case"option":for(ze in m)if(m.hasOwnProperty(ze)&&(w=m[ze],w!=null))switch(ze){case"selected":c.selected=w&&typeof w!="function"&&typeof w!="symbol";break;default:xr(c,f,ze,w,m,null)}return;case"dialog":qn("beforetoggle",c),qn("toggle",c),qn("cancel",c),qn("close",c);break;case"iframe":case"object":qn("load",c);break;case"video":case"audio":for(w=0;w<sm.length;w++)qn(sm[w],c);break;case"image":qn("error",c),qn("load",c);break;case"details":qn("toggle",c);break;case"embed":case"source":case"link":qn("error",c),qn("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(dt in m)if(m.hasOwnProperty(dt)&&(w=m[dt],w!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,f));default:xr(c,f,dt,w,m,null)}return;default:if(wp(f)){for(Et in m)m.hasOwnProperty(Et)&&(w=m[Et],w!==void 0&&ux(c,f,Et,w,m,void 0));return}}for(Se in m)m.hasOwnProperty(Se)&&(w=m[Se],w!=null&&xr(c,f,Se,w,m,null))}function Iz(c,f,m,w){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,P=null,se=null,Se=null,ze=null,dt=null,Et=null;for(gt in m){var It=m[gt];if(m.hasOwnProperty(gt)&&It!=null)switch(gt){case"checked":break;case"value":break;case"defaultValue":ze=It;default:w.hasOwnProperty(gt)||xr(c,f,gt,null,w,It)}}for(var mt in w){var gt=w[mt];if(It=m[mt],w.hasOwnProperty(mt)&&(gt!=null||It!=null))switch(mt){case"type":P=gt;break;case"name":A=gt;break;case"checked":dt=gt;break;case"defaultChecked":Et=gt;break;case"value":se=gt;break;case"defaultValue":Se=gt;break;case"children":case"dangerouslySetInnerHTML":if(gt!=null)throw Error(r(137,f));break;default:gt!==It&&xr(c,f,mt,gt,w,It)}}tc(c,se,Se,ze,dt,Et,P,A);return;case"select":gt=se=Se=mt=null;for(P in m)if(ze=m[P],m.hasOwnProperty(P)&&ze!=null)switch(P){case"value":break;case"multiple":gt=ze;default:w.hasOwnProperty(P)||xr(c,f,P,null,w,ze)}for(A in w)if(P=w[A],ze=m[A],w.hasOwnProperty(A)&&(P!=null||ze!=null))switch(A){case"value":mt=P;break;case"defaultValue":Se=P;break;case"multiple":se=P;default:P!==ze&&xr(c,f,A,P,w,ze)}f=Se,m=se,w=gt,mt!=null?el(c,!!m,mt,!1):!!w!=!!m&&(f!=null?el(c,!!m,f,!0):el(c,!!m,m?[]:"",!1));return;case"textarea":gt=mt=null;for(Se in m)if(A=m[Se],m.hasOwnProperty(Se)&&A!=null&&!w.hasOwnProperty(Se))switch(Se){case"value":break;case"children":break;default:xr(c,f,Se,null,w,A)}for(se in w)if(A=w[se],P=m[se],w.hasOwnProperty(se)&&(A!=null||P!=null))switch(se){case"value":mt=A;break;case"defaultValue":gt=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:A!==P&&xr(c,f,se,A,w,P)}rc(c,mt,gt);return;case"option":for(var xn in m)if(mt=m[xn],m.hasOwnProperty(xn)&&mt!=null&&!w.hasOwnProperty(xn))switch(xn){case"selected":c.selected=!1;break;default:xr(c,f,xn,null,w,mt)}for(ze in w)if(mt=w[ze],gt=m[ze],w.hasOwnProperty(ze)&&mt!==gt&&(mt!=null||gt!=null))switch(ze){case"selected":c.selected=mt&&typeof mt!="function"&&typeof mt!="symbol";break;default:xr(c,f,ze,mt,w,gt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var mn in m)mt=m[mn],m.hasOwnProperty(mn)&&mt!=null&&!w.hasOwnProperty(mn)&&xr(c,f,mn,null,w,mt);for(dt in w)if(mt=w[dt],gt=m[dt],w.hasOwnProperty(dt)&&mt!==gt&&(mt!=null||gt!=null))switch(dt){case"children":case"dangerouslySetInnerHTML":if(mt!=null)throw Error(r(137,f));break;default:xr(c,f,dt,mt,w,gt)}return;default:if(wp(f)){for(var Sr in m)mt=m[Sr],m.hasOwnProperty(Sr)&&mt!==void 0&&!w.hasOwnProperty(Sr)&&ux(c,f,Sr,void 0,w,mt);for(Et in w)mt=w[Et],gt=m[Et],!w.hasOwnProperty(Et)||mt===gt||mt===void 0&&gt===void 0||ux(c,f,Et,mt,w,gt);return}}for(var rt in m)mt=m[rt],m.hasOwnProperty(rt)&&mt!=null&&!w.hasOwnProperty(rt)&&xr(c,f,rt,null,w,mt);for(It in w)mt=w[It],gt=m[It],!w.hasOwnProperty(It)||mt===gt||mt==null&&gt==null||xr(c,f,It,mt,w,gt)}var dx=null,fx=null;function Uy(c){return c.nodeType===9?c:c.ownerDocument}function hR(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function pR(c,f){if(c===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&f==="foreignObject"?0:c}function hx(c,f){return c==="textarea"||c==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var px=null;function Oz(){var c=window.event;return c&&c.type==="popstate"?c===px?!1:(px=c,!0):(px=null,!1)}var mR=typeof setTimeout=="function"?setTimeout:void 0,Dz=typeof clearTimeout=="function"?clearTimeout:void 0,gR=typeof Promise=="function"?Promise:void 0,jz=typeof queueMicrotask=="function"?queueMicrotask:typeof gR<"u"?function(c){return gR.resolve(null).then(c).catch(Mz)}:mR;function Mz(c){setTimeout(function(){throw c})}function Nc(c){return c==="head"}function yR(c,f){var m=f,w=0,A=0;do{var P=m.nextSibling;if(c.removeChild(m),P&&P.nodeType===8)if(m=P.data,m==="/$"){if(0<w&&8>w){m=w;var se=c.ownerDocument;if(m&1&&cm(se.documentElement),m&2&&cm(se.body),m&4)for(m=se.head,cm(m),se=m.firstChild;se;){var Se=se.nextSibling,ze=se.nodeName;se[Mt]||ze==="SCRIPT"||ze==="STYLE"||ze==="LINK"&&se.rel.toLowerCase()==="stylesheet"||m.removeChild(se),se=Se}}if(A===0){c.removeChild(P),ym(f);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:w=m.charCodeAt(0)-48;else w=0;m=P}while(m);ym(f)}function mx(c){var f=c.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var m=f;switch(f=f.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":mx(m),Xt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function Pz(c,f,m,w){for(;c.nodeType===1;){var A=m;if(c.nodeName.toLowerCase()!==f.toLowerCase()){if(!w&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(w){if(!c[Mt])switch(f){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(P=c.getAttribute("rel"),P==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(P!==A.rel||c.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||c.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||c.getAttribute("title")!==(A.title==null?null:A.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(P=c.getAttribute("src"),(P!==(A.src==null?null:A.src)||c.getAttribute("type")!==(A.type==null?null:A.type)||c.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&P&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(f==="input"&&c.type==="hidden"){var P=A.name==null?null:""+A.name;if(A.type==="hidden"&&c.getAttribute("name")===P)return c}else return c;if(c=jo(c.nextSibling),c===null)break}return null}function Fz(c,f,m){if(f==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=jo(c.nextSibling),c===null))return null;return c}function gx(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function Lz(c,f){var m=c.ownerDocument;if(c.data!=="$?"||m.readyState==="complete")f();else{var w=function(){f(),m.removeEventListener("DOMContentLoaded",w)};m.addEventListener("DOMContentLoaded",w),c._reactRetry=w}}function jo(c){for(;c!=null;c=c.nextSibling){var f=c.nodeType;if(f===1||f===3)break;if(f===8){if(f=c.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return c}var yx=null;function bR(c){c=c.previousSibling;for(var f=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(f===0)return c;f--}else m==="/$"&&f++}c=c.previousSibling}return null}function vR(c,f,m){switch(f=Uy(m),c){case"html":if(c=f.documentElement,!c)throw Error(r(452));return c;case"head":if(c=f.head,!c)throw Error(r(453));return c;case"body":if(c=f.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function cm(c){for(var f=c.attributes;f.length;)c.removeAttributeNode(f[0]);Xt(c)}var ho=new Map,wR=new Set;function Hy(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var xl=re.d;re.d={f:$z,r:Bz,D:zz,C:Uz,L:Hz,m:qz,X:Gz,S:Vz,M:Wz};function $z(){var c=xl.f(),f=jy();return c||f}function Bz(c){var f=zn(c);f!==null&&f.tag===5&&f.type==="form"?BA(f):xl.r(c)}var Mf=typeof document>"u"?null:document;function _R(c,f,m){var w=Mf;if(w&&typeof f=="string"&&f){var A=Ka(f);A='link[rel="'+c+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),wR.has(A)||(wR.add(A),c={rel:c,crossOrigin:m,href:f},w.querySelector(A)===null&&(f=w.createElement("link"),Ha(f,"link",c),jn(f),w.head.appendChild(f)))}}function zz(c){xl.D(c),_R("dns-prefetch",c,null)}function Uz(c,f){xl.C(c,f),_R("preconnect",c,f)}function Hz(c,f,m){xl.L(c,f,m);var w=Mf;if(w&&c&&f){var A='link[rel="preload"][as="'+Ka(f)+'"]';f==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+Ka(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+Ka(m.imageSizes)+'"]')):A+='[href="'+Ka(c)+'"]';var P=A;switch(f){case"style":P=Pf(c);break;case"script":P=Ff(c)}ho.has(P)||(c=d({rel:"preload",href:f==="image"&&m&&m.imageSrcSet?void 0:c,as:f},m),ho.set(P,c),w.querySelector(A)!==null||f==="style"&&w.querySelector(um(P))||f==="script"&&w.querySelector(dm(P))||(f=w.createElement("link"),Ha(f,"link",c),jn(f),w.head.appendChild(f)))}}function qz(c,f){xl.m(c,f);var m=Mf;if(m&&c){var w=f&&typeof f.as=="string"?f.as:"script",A='link[rel="modulepreload"][as="'+Ka(w)+'"][href="'+Ka(c)+'"]',P=A;switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":P=Ff(c)}if(!ho.has(P)&&(c=d({rel:"modulepreload",href:c},f),ho.set(P,c),m.querySelector(A)===null)){switch(w){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(dm(P)))return}w=m.createElement("link"),Ha(w,"link",c),jn(w),m.head.appendChild(w)}}}function Vz(c,f,m){xl.S(c,f,m);var w=Mf;if(w&&c){var A=wr(w).hoistableStyles,P=Pf(c);f=f||"default";var se=A.get(P);if(!se){var Se={loading:0,preload:null};if(se=w.querySelector(um(P)))Se.loading=5;else{c=d({rel:"stylesheet",href:c,"data-precedence":f},m),(m=ho.get(P))&&bx(c,m);var ze=se=w.createElement("link");jn(ze),Ha(ze,"link",c),ze._p=new Promise(function(dt,Et){ze.onload=dt,ze.onerror=Et}),ze.addEventListener("load",function(){Se.loading|=1}),ze.addEventListener("error",function(){Se.loading|=2}),Se.loading|=4,qy(se,f,w)}se={type:"stylesheet",instance:se,count:1,state:Se},A.set(P,se)}}}function Gz(c,f){xl.X(c,f);var m=Mf;if(m&&c){var w=wr(m).hoistableScripts,A=Ff(c),P=w.get(A);P||(P=m.querySelector(dm(A)),P||(c=d({src:c,async:!0},f),(f=ho.get(A))&&vx(c,f),P=m.createElement("script"),jn(P),Ha(P,"link",c),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(A,P))}}function Wz(c,f){xl.M(c,f);var m=Mf;if(m&&c){var w=wr(m).hoistableScripts,A=Ff(c),P=w.get(A);P||(P=m.querySelector(dm(A)),P||(c=d({src:c,async:!0,type:"module"},f),(f=ho.get(A))&&vx(c,f),P=m.createElement("script"),jn(P),Ha(P,"link",c),m.head.appendChild(P)),P={type:"script",instance:P,count:1,state:null},w.set(A,P))}}function xR(c,f,m,w){var A=(A=Pe.current)?Hy(A):null;if(!A)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(f=Pf(m.href),m=wr(A).hoistableStyles,w=m.get(f),w||(w={type:"style",instance:null,count:0,state:null},m.set(f,w)),w):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=Pf(m.href);var P=wr(A).hoistableStyles,se=P.get(c);if(se||(A=A.ownerDocument||A,se={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},P.set(c,se),(P=A.querySelector(um(c)))&&!P._p&&(se.instance=P,se.state.loading=5),ho.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},ho.set(c,m),P||Kz(A,c,m,se.state))),f&&w===null)throw Error(r(528,""));return se}if(f&&w!==null)throw Error(r(529,""));return null;case"script":return f=m.async,m=m.src,typeof m=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Ff(m),m=wr(A).hoistableScripts,w=m.get(f),w||(w={type:"script",instance:null,count:0,state:null},m.set(f,w)),w):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function Pf(c){return'href="'+Ka(c)+'"'}function um(c){return'link[rel="stylesheet"]['+c+"]"}function SR(c){return d({},c,{"data-precedence":c.precedence,precedence:null})}function Kz(c,f,m,w){c.querySelector('link[rel="preload"][as="style"]['+f+"]")?w.loading=1:(f=c.createElement("link"),w.preload=f,f.addEventListener("load",function(){return w.loading|=1}),f.addEventListener("error",function(){return w.loading|=2}),Ha(f,"link",m),jn(f),c.head.appendChild(f))}function Ff(c){return'[src="'+Ka(c)+'"]'}function dm(c){return"script[async]"+c}function ER(c,f,m){if(f.count++,f.instance===null)switch(f.type){case"style":var w=c.querySelector('style[data-href~="'+Ka(m.href)+'"]');if(w)return f.instance=w,jn(w),w;var A=d({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return w=(c.ownerDocument||c).createElement("style"),jn(w),Ha(w,"style",A),qy(w,m.precedence,c),f.instance=w;case"stylesheet":A=Pf(m.href);var P=c.querySelector(um(A));if(P)return f.state.loading|=4,f.instance=P,jn(P),P;w=SR(m),(A=ho.get(A))&&bx(w,A),P=(c.ownerDocument||c).createElement("link"),jn(P);var se=P;return se._p=new Promise(function(Se,ze){se.onload=Se,se.onerror=ze}),Ha(P,"link",w),f.state.loading|=4,qy(P,m.precedence,c),f.instance=P;case"script":return P=Ff(m.src),(A=c.querySelector(dm(P)))?(f.instance=A,jn(A),A):(w=m,(A=ho.get(P))&&(w=d({},m),vx(w,A)),c=c.ownerDocument||c,A=c.createElement("script"),jn(A),Ha(A,"link",w),c.head.appendChild(A),f.instance=A);case"void":return null;default:throw Error(r(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(w=f.instance,f.state.loading|=4,qy(w,m.precedence,c));return f.instance}function qy(c,f,m){for(var w=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=w.length?w[w.length-1]:null,P=A,se=0;se<w.length;se++){var Se=w[se];if(Se.dataset.precedence===f)P=Se;else if(P!==A)break}P?P.parentNode.insertBefore(c,P.nextSibling):(f=m.nodeType===9?m.head:m,f.insertBefore(c,f.firstChild))}function bx(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.title==null&&(c.title=f.title)}function vx(c,f){c.crossOrigin==null&&(c.crossOrigin=f.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=f.referrerPolicy),c.integrity==null&&(c.integrity=f.integrity)}var Vy=null;function CR(c,f,m){if(Vy===null){var w=new Map,A=Vy=new Map;A.set(m,w)}else A=Vy,w=A.get(m),w||(w=new Map,A.set(m,w));if(w.has(c))return w;for(w.set(c,null),m=m.getElementsByTagName(c),A=0;A<m.length;A++){var P=m[A];if(!(P[Mt]||P[he]||c==="link"&&P.getAttribute("rel")==="stylesheet")&&P.namespaceURI!=="http://www.w3.org/2000/svg"){var se=P.getAttribute(f)||"";se=c+se;var Se=w.get(se);Se?Se.push(P):w.set(se,[P])}}return w}function kR(c,f,m){c=c.ownerDocument||c,c.head.insertBefore(m,f==="title"?c.querySelector("head > title"):null)}function Zz(c,f,m){if(m===1||f.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return c=f.disabled,typeof f.precedence=="string"&&c==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function TR(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var fm=null;function Yz(){}function Xz(c,f,m){if(fm===null)throw Error(r(475));var w=fm;if(f.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var A=Pf(m.href),P=c.querySelector(um(A));if(P){c=P._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(w.count++,w=Gy.bind(w),c.then(w,w)),f.state.loading|=4,f.instance=P,jn(P);return}P=c.ownerDocument||c,m=SR(m),(A=ho.get(A))&&bx(m,A),P=P.createElement("link"),jn(P);var se=P;se._p=new Promise(function(Se,ze){se.onload=Se,se.onerror=ze}),Ha(P,"link",m),f.instance=P}w.stylesheets===null&&(w.stylesheets=new Map),w.stylesheets.set(f,c),(c=f.state.preload)&&(f.state.loading&3)===0&&(w.count++,f=Gy.bind(w),c.addEventListener("load",f),c.addEventListener("error",f))}}function Jz(){if(fm===null)throw Error(r(475));var c=fm;return c.stylesheets&&c.count===0&&wx(c,c.stylesheets),0<c.count?function(f){var m=setTimeout(function(){if(c.stylesheets&&wx(c,c.stylesheets),c.unsuspend){var w=c.unsuspend;c.unsuspend=null,w()}},6e4);return c.unsuspend=f,function(){c.unsuspend=null,clearTimeout(m)}}:null}function Gy(){if(this.count--,this.count===0){if(this.stylesheets)wx(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Wy=null;function wx(c,f){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Wy=new Map,f.forEach(Qz,c),Wy=null,Gy.call(c))}function Qz(c,f){if(!(f.state.loading&4)){var m=Wy.get(c);if(m)var w=m.get(null);else{m=new Map,Wy.set(c,m);for(var A=c.querySelectorAll("link[data-precedence],style[data-precedence]"),P=0;P<A.length;P++){var se=A[P];(se.nodeName==="LINK"||se.getAttribute("media")!=="not all")&&(m.set(se.dataset.precedence,se),w=se)}w&&m.set(null,w)}A=f.instance,se=A.getAttribute("data-precedence"),P=m.get(se)||w,P===w&&m.set(null,A),m.set(se,A),this.count++,w=Gy.bind(this),A.addEventListener("load",w),A.addEventListener("error",w),P?P.parentNode.insertBefore(A,P.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(A,c.firstChild)),f.state.loading|=4}}var hm={$$typeof:E,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function e7(c,f,m,w,A,P,se,Se){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Be(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Be(0),this.hiddenUpdates=Be(null),this.identifierPrefix=w,this.onUncaughtError=A,this.onCaughtError=P,this.onRecoverableError=se,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Se,this.incompleteTransitions=new Map}function AR(c,f,m,w,A,P,se,Se,ze,dt,Et,It){return c=new e7(c,f,m,se,Se,ze,dt,It),f=1,P===!0&&(f|=24),P=zi(3,null,null,f),c.current=P,P.stateNode=c,f=t_(),f.refCount++,c.pooledCache=f,f.refCount++,P.memoizedState={element:w,isDehydrated:m,cache:f},i_(P),c}function NR(c){return c?(c=gs,c):gs}function RR(c,f,m,w,A,P){A=NR(A),w.context===null?w.context=A:w.pendingContext=A,w=gc(f),w.payload={element:m},P=P===void 0?null:P,P!==null&&(w.callback=P),m=yc(c,w,f),m!==null&&(Gi(m,c,f),Hp(m,c,f))}function IR(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<f?m:f}}function _x(c,f){IR(c,f),(c=c.alternate)&&IR(c,f)}function OR(c){if(c.tag===13){var f=Oo(c,67108864);f!==null&&Gi(f,c,67108864),_x(c,67108864)}}var Ky=!0;function t7(c,f,m,w){var A=ae.T;ae.T=null;var P=re.p;try{re.p=2,xx(c,f,m,w)}finally{re.p=P,ae.T=A}}function n7(c,f,m,w){var A=ae.T;ae.T=null;var P=re.p;try{re.p=8,xx(c,f,m,w)}finally{re.p=P,ae.T=A}}function xx(c,f,m,w){if(Ky){var A=Sx(w);if(A===null)cx(c,f,w,Zy,m),jR(c,w);else if(a7(A,c,f,m,w))w.stopPropagation();else if(jR(c,w),f&4&&-1<r7.indexOf(c)){for(;A!==null;){var P=zn(A);if(P!==null)switch(P.tag){case 3:if(P=P.stateNode,P.current.memoizedState.isDehydrated){var se=ve(P.pendingLanes);if(se!==0){var Se=P;for(Se.pendingLanes|=2,Se.entangledLanes|=2;se;){var ze=1<<31-Gt(se);Se.entanglements[1]|=ze,se&=~ze}_s(P),(hr&6)===0&&(Oy=le()+500,om(0))}}break;case 13:Se=Oo(P,2),Se!==null&&Gi(Se,P,2),jy(),_x(P,2)}if(P=Sx(w),P===null&&cx(c,f,w,Zy,m),P===A)break;A=P}A!==null&&w.stopPropagation()}else cx(c,f,w,null,m)}}function Sx(c){return c=Yd(c),Ex(c)}var Zy=null;function Ex(c){if(Zy=null,c=An(c),c!==null){var f=i(c);if(f===null)c=null;else{var m=f.tag;if(m===13){if(c=o(f),c!==null)return c;c=null}else if(m===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;c=null}else f!==c&&(c=null)}}return Zy=c,null}function DR(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(oe()){case J:return 2;case xe:return 8;case Me:case Ee:return 32;case We:return 268435456;default:return 32}default:return 32}}var Cx=!1,Rc=null,Ic=null,Oc=null,pm=new Map,mm=new Map,Dc=[],r7="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jR(c,f){switch(c){case"focusin":case"focusout":Rc=null;break;case"dragenter":case"dragleave":Ic=null;break;case"mouseover":case"mouseout":Oc=null;break;case"pointerover":case"pointerout":pm.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":mm.delete(f.pointerId)}}function gm(c,f,m,w,A,P){return c===null||c.nativeEvent!==P?(c={blockedOn:f,domEventName:m,eventSystemFlags:w,nativeEvent:P,targetContainers:[A]},f!==null&&(f=zn(f),f!==null&&OR(f)),c):(c.eventSystemFlags|=w,f=c.targetContainers,A!==null&&f.indexOf(A)===-1&&f.push(A),c)}function a7(c,f,m,w,A){switch(f){case"focusin":return Rc=gm(Rc,c,f,m,w,A),!0;case"dragenter":return Ic=gm(Ic,c,f,m,w,A),!0;case"mouseover":return Oc=gm(Oc,c,f,m,w,A),!0;case"pointerover":var P=A.pointerId;return pm.set(P,gm(pm.get(P)||null,c,f,m,w,A)),!0;case"gotpointercapture":return P=A.pointerId,mm.set(P,gm(mm.get(P)||null,c,f,m,w,A)),!0}return!1}function MR(c){var f=An(c.target);if(f!==null){var m=i(f);if(m!==null){if(f=m.tag,f===13){if(f=o(m),f!==null){c.blockedOn=f,z(c.priority,function(){if(m.tag===13){var w=Vi();w=Nt(w);var A=Oo(m,w);A!==null&&Gi(A,m,w),_x(m,w)}});return}}else if(f===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Yy(c){if(c.blockedOn!==null)return!1;for(var f=c.targetContainers;0<f.length;){var m=Sx(c.nativeEvent);if(m===null){m=c.nativeEvent;var w=new m.constructor(m.type,m);ao=w,m.target.dispatchEvent(w),ao=null}else return f=zn(m),f!==null&&OR(f),c.blockedOn=m,!1;f.shift()}return!0}function PR(c,f,m){Yy(c)&&m.delete(f)}function i7(){Cx=!1,Rc!==null&&Yy(Rc)&&(Rc=null),Ic!==null&&Yy(Ic)&&(Ic=null),Oc!==null&&Yy(Oc)&&(Oc=null),pm.forEach(PR),mm.forEach(PR)}function Xy(c,f){c.blockedOn===f&&(c.blockedOn=null,Cx||(Cx=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,i7)))}var Jy=null;function FR(c){Jy!==c&&(Jy=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Jy===c&&(Jy=null);for(var f=0;f<c.length;f+=3){var m=c[f],w=c[f+1],A=c[f+2];if(typeof w!="function"){if(Ex(w||m)===null)continue;break}var P=zn(m);P!==null&&(c.splice(f,3),f-=3,E_(P,{pending:!0,data:A,method:m.method,action:w},w,A))}}))}function ym(c){function f(ze){return Xy(ze,c)}Rc!==null&&Xy(Rc,c),Ic!==null&&Xy(Ic,c),Oc!==null&&Xy(Oc,c),pm.forEach(f),mm.forEach(f);for(var m=0;m<Dc.length;m++){var w=Dc[m];w.blockedOn===c&&(w.blockedOn=null)}for(;0<Dc.length&&(m=Dc[0],m.blockedOn===null);)MR(m),m.blockedOn===null&&Dc.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(w=0;w<m.length;w+=3){var A=m[w],P=m[w+1],se=A[Ae]||null;if(typeof P=="function")se||FR(m);else if(se){var Se=null;if(P&&P.hasAttribute("formAction")){if(A=P,se=P[Ae]||null)Se=se.formAction;else if(Ex(A)!==null)continue}else Se=se.action;typeof Se=="function"?m[w+1]=Se:(m.splice(w,3),w-=3),FR(m)}}}function kx(c){this._internalRoot=c}Qy.prototype.render=kx.prototype.render=function(c){var f=this._internalRoot;if(f===null)throw Error(r(409));var m=f.current,w=Vi();RR(m,w,c,f,null,null)},Qy.prototype.unmount=kx.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var f=c.containerInfo;RR(c.current,2,null,c,null,null),jy(),f[He]=null}};function Qy(c){this._internalRoot=c}Qy.prototype.unstable_scheduleHydration=function(c){if(c){var f=H();c={blockedOn:null,target:c,priority:f};for(var m=0;m<Dc.length&&f!==0&&f<Dc[m].priority;m++);Dc.splice(m,0,c),m===0&&MR(c)}};var LR=t.version;if(LR!=="19.1.0")throw Error(r(527,LR,"19.1.0"));re.findDOMNode=function(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(f),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var o7={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ae,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eb.isDisabled&&eb.supportsFiber)try{_t=eb.inject(o7),jt=eb}catch{}}return vm.createRoot=function(c,f){if(!a(c))throw Error(r(299));var m=!1,w="",A=eN,P=tN,se=nN,Se=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onUncaughtError!==void 0&&(A=f.onUncaughtError),f.onCaughtError!==void 0&&(P=f.onCaughtError),f.onRecoverableError!==void 0&&(se=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(Se=f.unstable_transitionCallbacks)),f=AR(c,1,!1,null,null,m,w,A,P,se,Se,null),c[He]=f.current,lx(c),new kx(f)},vm.hydrateRoot=function(c,f,m){if(!a(c))throw Error(r(299));var w=!1,A="",P=eN,se=tN,Se=nN,ze=null,dt=null;return m!=null&&(m.unstable_strictMode===!0&&(w=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(P=m.onUncaughtError),m.onCaughtError!==void 0&&(se=m.onCaughtError),m.onRecoverableError!==void 0&&(Se=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(ze=m.unstable_transitionCallbacks),m.formState!==void 0&&(dt=m.formState)),f=AR(c,1,!0,f,m??null,w,A,P,se,Se,ze,dt),f.context=NR(null),m=f.current,w=Vi(),w=Nt(w),A=gc(w),A.callback=null,yc(m,A,w),m=w,f.current.lanes=m,tt(f,m),_s(f),c[He]=f.current,lx(c),new Qy(f)},vm.version="19.1.0",vm}var KR;function x7(){if(KR)return Nx.exports;KR=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Nx.exports=_7(),Nx.exports}var S7=x7();const E7=si(S7);function ZR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Zc(...e){return t=>{let n=!1;const r=e.map(a=>{const i=ZR(a,t);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let a=0;a<r.length;a++){const i=r[a];typeof i=="function"?i():ZR(e[a],null)}}}}function kn(...e){return N.useCallback(Zc(...e),e)}function Yc(e){const t=C7(e),n=N.forwardRef((r,a)=>{const{children:i,...o}=r,s=N.Children.toArray(i),l=s.find(T7);if(l){const u=l.props.children,d=s.map(h=>h===l?N.Children.count(u)>1?N.Children.only(null):N.isValidElement(u)?u.props.children:null:h);return y.jsx(t,{...o,ref:a,children:N.isValidElement(u)?N.cloneElement(u,void 0,d):null})}return y.jsx(t,{...o,ref:a,children:i})});return n.displayName=`${e}.Slot`,n}var $6=Yc("Slot");function C7(e){const t=N.forwardRef((n,r)=>{const{children:a,...i}=n;if(N.isValidElement(a)){const o=N7(a),s=A7(i,a.props);return a.type!==N.Fragment&&(s.ref=r?Zc(r,o):o),N.cloneElement(a,s)}return N.Children.count(a)>1?N.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var B6=Symbol("radix.slottable");function k7(e){const t=({children:n})=>y.jsx(y.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=B6,t}function T7(e){return N.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===B6}function A7(e,t){const n={...t};for(const r in t){const a=e[r],i=t[r];/^on[A-Z]/.test(r)?a&&i?n[r]=(...s)=>{i(...s),a(...s)}:a&&(n[r]=a):r==="style"?n[r]={...a,...i}:r==="className"&&(n[r]=[a,i].filter(Boolean).join(" "))}return{...e,...n}}function N7(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function z6(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=z6(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function U6(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=z6(e))&&(r&&(r+=" "),r+=t);return r}const YR=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,XR=U6,bC=(e,t)=>n=>{var r;if((t==null?void 0:t.variants)==null)return XR(e,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(u=>{const d=n==null?void 0:n[u],h=i==null?void 0:i[u];if(d===null)return null;const p=YR(d)||YR(h);return a[u][p]}),s=n&&Object.entries(n).reduce((u,d)=>{let[h,p]=d;return p===void 0||(u[h]=p),u},{}),l=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:p,...g}=d;return Object.entries(g).every(v=>{let[b,_]=v;return Array.isArray(_)?_.includes({...i,...s}[b]):{...i,...s}[b]===_})?[...u,h,p]:u},[]);return XR(e,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},vC="-",R7=e=>{const t=O7(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:o=>{const s=o.split(vC);return s[0]===""&&s.length!==1&&s.shift(),H6(s,t)||I7(o)},getConflictingClassGroupIds:(o,s)=>{const l=n[o]||[];return s&&r[o]?[...l,...r[o]]:l}}},H6=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const n=e[0],r=t.nextPart.get(n),a=r?H6(e.slice(1),r):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(vC);return(o=t.validators.find(({validator:s})=>s(i)))==null?void 0:o.classGroupId},JR=/^\[(.+)\]$/,I7=e=>{if(JR.test(e)){const t=JR.exec(e)[1],n=t==null?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},O7=e=>{const{theme:t,classGroups:n}=e,r={nextPart:new Map,validators:[]};for(const a in n)KE(n[a],r,a,t);return r},KE=(e,t,n,r)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:QR(t,a);i.classGroupId=n;return}if(typeof a=="function"){if(D7(a)){KE(a(r),t,n,r);return}t.validators.push({validator:a,classGroupId:n});return}Object.entries(a).forEach(([i,o])=>{KE(o,QR(t,i),n,r)})})},QR=(e,t)=>{let n=e;return t.split(vC).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},D7=e=>e.isThemeGetter,j7=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(i,o)=>{n.set(i,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return a(i,o),o},set(i,o){n.has(i)?n.set(i,o):a(i,o)}}},ZE="!",YE=":",M7=YE.length,P7=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=a=>{const i=[];let o=0,s=0,l=0,u;for(let v=0;v<a.length;v++){let b=a[v];if(o===0&&s===0){if(b===YE){i.push(a.slice(l,v)),l=v+M7;continue}if(b==="/"){u=v;continue}}b==="["?o++:b==="]"?o--:b==="("?s++:b===")"&&s--}const d=i.length===0?a:a.substring(l),h=F7(d),p=h!==d,g=u&&u>l?u-l:void 0;return{modifiers:i,hasImportantModifier:p,baseClassName:h,maybePostfixModifierPosition:g}};if(t){const a=t+YE,i=r;r=o=>o.startsWith(a)?i(o.substring(a.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:o,maybePostfixModifierPosition:void 0}}if(n){const a=r;r=i=>n({className:i,parseClassName:a})}return r},F7=e=>e.endsWith(ZE)?e.substring(0,e.length-1):e.startsWith(ZE)?e.substring(1):e,L7=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(r=>[r,!0]));return r=>{if(r.length<=1)return r;const a=[];let i=[];return r.forEach(o=>{o[0]==="["||t[o]?(a.push(...i.sort(),o),i=[]):i.push(o)}),a.push(...i.sort()),a}},$7=e=>({cache:j7(e.cacheSize),parseClassName:P7(e),sortModifiers:L7(e),...R7(e)}),B7=/\s+/,z7=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a,sortModifiers:i}=t,o=[],s=e.trim().split(B7);let l="";for(let u=s.length-1;u>=0;u-=1){const d=s[u],{isExternal:h,modifiers:p,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}=n(d);if(h){l=d+(l.length>0?" "+l:l);continue}let _=!!b,x=r(_?v.substring(0,b):v);if(!x){if(!_){l=d+(l.length>0?" "+l:l);continue}if(x=r(v),!x){l=d+(l.length>0?" "+l:l);continue}_=!1}const S=i(p).join(":"),E=g?S+ZE:S,C=E+x;if(o.includes(C))continue;o.push(C);const k=a(x,_);for(let R=0;R<k.length;++R){const D=k[R];o.push(E+D)}l=d+(l.length>0?" "+l:l)}return l};function U7(){let e=0,t,n,r="";for(;e<arguments.length;)(t=arguments[e++])&&(n=q6(t))&&(r&&(r+=" "),r+=n);return r}const q6=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=q6(e[r]))&&(n&&(n+=" "),n+=t);return n};function H7(e,...t){let n,r,a,i=o;function o(l){const u=t.reduce((d,h)=>h(d),e());return n=$7(u),r=n.cache.get,a=n.cache.set,i=s,s(l)}function s(l){const u=r(l);if(u)return u;const d=z7(l,n);return a(l,d),d}return function(){return i(U7.apply(null,arguments))}}const ya=e=>{const t=n=>n[e]||[];return t.isThemeGetter=!0,t},V6=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,G6=/^\((?:(\w[\w-]*):)?(.+)\)$/i,q7=/^\d+\/\d+$/,V7=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G7=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,W7=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,K7=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Z7=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lf=e=>q7.test(e),Ln=e=>!!e&&!Number.isNaN(Number(e)),Mc=e=>!!e&&Number.isInteger(Number(e)),Dx=e=>e.endsWith("%")&&Ln(e.slice(0,-1)),Sl=e=>V7.test(e),Y7=()=>!0,X7=e=>G7.test(e)&&!W7.test(e),W6=()=>!1,J7=e=>K7.test(e),Q7=e=>Z7.test(e),eU=e=>!rn(e)&&!an(e),tU=e=>Ph(e,Y6,W6),rn=e=>V6.test(e),Yu=e=>Ph(e,X6,X7),jx=e=>Ph(e,oU,Ln),e3=e=>Ph(e,K6,W6),nU=e=>Ph(e,Z6,Q7),tb=e=>Ph(e,J6,J7),an=e=>G6.test(e),wm=e=>Fh(e,X6),rU=e=>Fh(e,sU),t3=e=>Fh(e,K6),aU=e=>Fh(e,Y6),iU=e=>Fh(e,Z6),nb=e=>Fh(e,J6,!0),Ph=(e,t,n)=>{const r=V6.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},Fh=(e,t,n=!1)=>{const r=G6.exec(e);return r?r[1]?t(r[1]):n:!1},K6=e=>e==="position"||e==="percentage",Z6=e=>e==="image"||e==="url",Y6=e=>e==="length"||e==="size"||e==="bg-size",X6=e=>e==="length",oU=e=>e==="number",sU=e=>e==="family-name",J6=e=>e==="shadow",lU=()=>{const e=ya("color"),t=ya("font"),n=ya("text"),r=ya("font-weight"),a=ya("tracking"),i=ya("leading"),o=ya("breakpoint"),s=ya("container"),l=ya("spacing"),u=ya("radius"),d=ya("shadow"),h=ya("inset-shadow"),p=ya("text-shadow"),g=ya("drop-shadow"),v=ya("blur"),b=ya("perspective"),_=ya("aspect"),x=ya("ease"),S=ya("animate"),E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],C=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[...C(),an,rn],R=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto","contain","none"],O=()=>[an,rn,l],L=()=>[Lf,"full","auto",...O()],B=()=>[Mc,"none","subgrid",an,rn],Y=()=>["auto",{span:["full",Mc,an,rn]},Mc,an,rn],F=()=>[Mc,"auto",an,rn],Z=()=>["auto","min","max","fr",an,rn],q=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ne=()=>["start","end","center","stretch","center-safe","end-safe"],ae=()=>["auto",...O()],re=()=>[Lf,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...O()],ee=()=>[e,an,rn],ie=()=>[...C(),t3,e3,{position:[an,rn]}],U=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Q=()=>["auto","cover","contain",aU,tU,{size:[an,rn]}],X=()=>[Dx,wm,Yu],de=()=>["","none","full",u,an,rn],be=()=>["",Ln,wm,Yu],_e=()=>["solid","dashed","dotted","double"],Pe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ne=()=>[Ln,Dx,t3,e3],Re=()=>["","none",v,an,rn],Ce=()=>["none",Ln,an,rn],Fe=()=>["none",Ln,an,rn],Qe=()=>[Ln,an,rn],Le=()=>[Lf,"full",...O()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Sl],breakpoint:[Sl],color:[Y7],container:[Sl],"drop-shadow":[Sl],ease:["in","out","in-out"],font:[eU],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Sl],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Sl],shadow:[Sl],spacing:["px",Ln],text:[Sl],"text-shadow":[Sl],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Lf,rn,an,_]}],container:["container"],columns:[{columns:[Ln,rn,an,s]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:R()}],"overflow-x":[{"overflow-x":R()}],"overflow-y":[{"overflow-y":R()}],overscroll:[{overscroll:D()}],"overscroll-x":[{"overscroll-x":D()}],"overscroll-y":[{"overscroll-y":D()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[Mc,"auto",an,rn]}],basis:[{basis:[Lf,"full","auto",s,...O()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ln,Lf,"auto","initial","none",rn]}],grow:[{grow:["",Ln,an,rn]}],shrink:[{shrink:["",Ln,an,rn]}],order:[{order:[Mc,"first","last","none",an,rn]}],"grid-cols":[{"grid-cols":B()}],"col-start-end":[{col:Y()}],"col-start":[{"col-start":F()}],"col-end":[{"col-end":F()}],"grid-rows":[{"grid-rows":B()}],"row-start-end":[{row:Y()}],"row-start":[{"row-start":F()}],"row-end":[{"row-end":F()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Z()}],"auto-rows":[{"auto-rows":Z()}],gap:[{gap:O()}],"gap-x":[{"gap-x":O()}],"gap-y":[{"gap-y":O()}],"justify-content":[{justify:[...q(),"normal"]}],"justify-items":[{"justify-items":[...ne(),"normal"]}],"justify-self":[{"justify-self":["auto",...ne()]}],"align-content":[{content:["normal",...q()]}],"align-items":[{items:[...ne(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ne(),{baseline:["","last"]}]}],"place-content":[{"place-content":q()}],"place-items":[{"place-items":[...ne(),"baseline"]}],"place-self":[{"place-self":["auto",...ne()]}],p:[{p:O()}],px:[{px:O()}],py:[{py:O()}],ps:[{ps:O()}],pe:[{pe:O()}],pt:[{pt:O()}],pr:[{pr:O()}],pb:[{pb:O()}],pl:[{pl:O()}],m:[{m:ae()}],mx:[{mx:ae()}],my:[{my:ae()}],ms:[{ms:ae()}],me:[{me:ae()}],mt:[{mt:ae()}],mr:[{mr:ae()}],mb:[{mb:ae()}],ml:[{ml:ae()}],"space-x":[{"space-x":O()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":O()}],"space-y-reverse":["space-y-reverse"],size:[{size:re()}],w:[{w:[s,"screen",...re()]}],"min-w":[{"min-w":[s,"screen","none",...re()]}],"max-w":[{"max-w":[s,"screen","none","prose",{screen:[o]},...re()]}],h:[{h:["screen",...re()]}],"min-h":[{"min-h":["screen","none",...re()]}],"max-h":[{"max-h":["screen",...re()]}],"font-size":[{text:["base",n,wm,Yu]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,an,jx]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Dx,rn]}],"font-family":[{font:[rU,rn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[a,an,rn]}],"line-clamp":[{"line-clamp":[Ln,"none",an,jx]}],leading:[{leading:[i,...O()]}],"list-image":[{"list-image":["none",an,rn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",an,rn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:ee()}],"text-color":[{text:ee()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[..._e(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ln,"from-font","auto",an,Yu]}],"text-decoration-color":[{decoration:ee()}],"underline-offset":[{"underline-offset":[Ln,"auto",an,rn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",an,rn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",an,rn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:ie()}],"bg-repeat":[{bg:U()}],"bg-size":[{bg:Q()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Mc,an,rn],radial:["",an,rn],conic:[Mc,an,rn]},iU,nU]}],"bg-color":[{bg:ee()}],"gradient-from-pos":[{from:X()}],"gradient-via-pos":[{via:X()}],"gradient-to-pos":[{to:X()}],"gradient-from":[{from:ee()}],"gradient-via":[{via:ee()}],"gradient-to":[{to:ee()}],rounded:[{rounded:de()}],"rounded-s":[{"rounded-s":de()}],"rounded-e":[{"rounded-e":de()}],"rounded-t":[{"rounded-t":de()}],"rounded-r":[{"rounded-r":de()}],"rounded-b":[{"rounded-b":de()}],"rounded-l":[{"rounded-l":de()}],"rounded-ss":[{"rounded-ss":de()}],"rounded-se":[{"rounded-se":de()}],"rounded-ee":[{"rounded-ee":de()}],"rounded-es":[{"rounded-es":de()}],"rounded-tl":[{"rounded-tl":de()}],"rounded-tr":[{"rounded-tr":de()}],"rounded-br":[{"rounded-br":de()}],"rounded-bl":[{"rounded-bl":de()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[..._e(),"hidden","none"]}],"divide-style":[{divide:[..._e(),"hidden","none"]}],"border-color":[{border:ee()}],"border-color-x":[{"border-x":ee()}],"border-color-y":[{"border-y":ee()}],"border-color-s":[{"border-s":ee()}],"border-color-e":[{"border-e":ee()}],"border-color-t":[{"border-t":ee()}],"border-color-r":[{"border-r":ee()}],"border-color-b":[{"border-b":ee()}],"border-color-l":[{"border-l":ee()}],"divide-color":[{divide:ee()}],"outline-style":[{outline:[..._e(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ln,an,rn]}],"outline-w":[{outline:["",Ln,wm,Yu]}],"outline-color":[{outline:ee()}],shadow:[{shadow:["","none",d,nb,tb]}],"shadow-color":[{shadow:ee()}],"inset-shadow":[{"inset-shadow":["none",h,nb,tb]}],"inset-shadow-color":[{"inset-shadow":ee()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:ee()}],"ring-offset-w":[{"ring-offset":[Ln,Yu]}],"ring-offset-color":[{"ring-offset":ee()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":ee()}],"text-shadow":[{"text-shadow":["none",p,nb,tb]}],"text-shadow-color":[{"text-shadow":ee()}],opacity:[{opacity:[Ln,an,rn]}],"mix-blend":[{"mix-blend":[...Pe(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Pe()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ln]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ne()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ne()}],"mask-image-linear-from-color":[{"mask-linear-from":ee()}],"mask-image-linear-to-color":[{"mask-linear-to":ee()}],"mask-image-t-from-pos":[{"mask-t-from":Ne()}],"mask-image-t-to-pos":[{"mask-t-to":Ne()}],"mask-image-t-from-color":[{"mask-t-from":ee()}],"mask-image-t-to-color":[{"mask-t-to":ee()}],"mask-image-r-from-pos":[{"mask-r-from":Ne()}],"mask-image-r-to-pos":[{"mask-r-to":Ne()}],"mask-image-r-from-color":[{"mask-r-from":ee()}],"mask-image-r-to-color":[{"mask-r-to":ee()}],"mask-image-b-from-pos":[{"mask-b-from":Ne()}],"mask-image-b-to-pos":[{"mask-b-to":Ne()}],"mask-image-b-from-color":[{"mask-b-from":ee()}],"mask-image-b-to-color":[{"mask-b-to":ee()}],"mask-image-l-from-pos":[{"mask-l-from":Ne()}],"mask-image-l-to-pos":[{"mask-l-to":Ne()}],"mask-image-l-from-color":[{"mask-l-from":ee()}],"mask-image-l-to-color":[{"mask-l-to":ee()}],"mask-image-x-from-pos":[{"mask-x-from":Ne()}],"mask-image-x-to-pos":[{"mask-x-to":Ne()}],"mask-image-x-from-color":[{"mask-x-from":ee()}],"mask-image-x-to-color":[{"mask-x-to":ee()}],"mask-image-y-from-pos":[{"mask-y-from":Ne()}],"mask-image-y-to-pos":[{"mask-y-to":Ne()}],"mask-image-y-from-color":[{"mask-y-from":ee()}],"mask-image-y-to-color":[{"mask-y-to":ee()}],"mask-image-radial":[{"mask-radial":[an,rn]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ne()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ne()}],"mask-image-radial-from-color":[{"mask-radial-from":ee()}],"mask-image-radial-to-color":[{"mask-radial-to":ee()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":C()}],"mask-image-conic-pos":[{"mask-conic":[Ln]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ne()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ne()}],"mask-image-conic-from-color":[{"mask-conic-from":ee()}],"mask-image-conic-to-color":[{"mask-conic-to":ee()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:ie()}],"mask-repeat":[{mask:U()}],"mask-size":[{mask:Q()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",an,rn]}],filter:[{filter:["","none",an,rn]}],blur:[{blur:Re()}],brightness:[{brightness:[Ln,an,rn]}],contrast:[{contrast:[Ln,an,rn]}],"drop-shadow":[{"drop-shadow":["","none",g,nb,tb]}],"drop-shadow-color":[{"drop-shadow":ee()}],grayscale:[{grayscale:["",Ln,an,rn]}],"hue-rotate":[{"hue-rotate":[Ln,an,rn]}],invert:[{invert:["",Ln,an,rn]}],saturate:[{saturate:[Ln,an,rn]}],sepia:[{sepia:["",Ln,an,rn]}],"backdrop-filter":[{"backdrop-filter":["","none",an,rn]}],"backdrop-blur":[{"backdrop-blur":Re()}],"backdrop-brightness":[{"backdrop-brightness":[Ln,an,rn]}],"backdrop-contrast":[{"backdrop-contrast":[Ln,an,rn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ln,an,rn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ln,an,rn]}],"backdrop-invert":[{"backdrop-invert":["",Ln,an,rn]}],"backdrop-opacity":[{"backdrop-opacity":[Ln,an,rn]}],"backdrop-saturate":[{"backdrop-saturate":[Ln,an,rn]}],"backdrop-sepia":[{"backdrop-sepia":["",Ln,an,rn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":O()}],"border-spacing-x":[{"border-spacing-x":O()}],"border-spacing-y":[{"border-spacing-y":O()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",an,rn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ln,"initial",an,rn]}],ease:[{ease:["linear","initial",x,an,rn]}],delay:[{delay:[Ln,an,rn]}],animate:[{animate:["none",S,an,rn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,an,rn]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:Ce()}],"rotate-x":[{"rotate-x":Ce()}],"rotate-y":[{"rotate-y":Ce()}],"rotate-z":[{"rotate-z":Ce()}],scale:[{scale:Fe()}],"scale-x":[{"scale-x":Fe()}],"scale-y":[{"scale-y":Fe()}],"scale-z":[{"scale-z":Fe()}],"scale-3d":["scale-3d"],skew:[{skew:Qe()}],"skew-x":[{"skew-x":Qe()}],"skew-y":[{"skew-y":Qe()}],transform:[{transform:[an,rn,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:ee()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:ee()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",an,rn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",an,rn]}],fill:[{fill:["none",...ee()]}],"stroke-w":[{stroke:[Ln,wm,Yu,jx]}],stroke:[{stroke:["none",...ee()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},cU=H7(lU);function Rt(...e){return cU(U6(e))}const uU=bC("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function Ht({className:e,variant:t,size:n,asChild:r=!1,...a}){const i=r?$6:"button";return y.jsx(i,{"data-slot":"button",className:Rt(uU({variant:t,size:n,className:e})),...a})}/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),fU=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),n3=e=>{const t=fU(e);return t.charAt(0).toUpperCase()+t.slice(1)},Q6=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pU=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...s},l)=>N.createElement("svg",{ref:l,...hU,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Q6("lucide",a),...s},[...o.map(([u,d])=>N.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=(e,t)=>{const n=N.forwardRef(({className:r,...a},i)=>N.createElement(pU,{ref:i,iconNode:t,className:Q6(`lucide-${dU(n3(e))}`,`lucide-${e}`,r),...a}));return n.displayName=n3(e),n};/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mU=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],gU=on("archive",mU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yU=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],bU=on("arrow-down",yU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vU=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],wU=on("bot",vU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]],eD=on("brain-circuit",_U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ws=on("check",xU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Kl=on("chevron-down",SU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],CU=on("chevron-right",EU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Cd=on("chevron-up",kU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]],wC=on("chevrons-up-down",TU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lh=on("circle-alert",AU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tD=on("circle-check",NU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],IU=on("circle",RU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]],_C=on("clipboard",OU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],nD=on("cloud-upload",DU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]],MU=on("code",jU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]],FU=on("cog",PU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],Um=on("download",LU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],BU=on("eye-off",$U);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],UU=on("eye",zU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]],qU=on("file-archive",HU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],GU=on("file-json",VU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]],KU=on("file-question",WU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],YU=on("file-text",ZU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],JU=on("file",XU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M14 13h3",key:"1dgedf"}],["path",{d:"M7 13h3",key:"1pygq7"}]],eH=on("folder-git",QU);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],xC=on("folder-plus",tH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nH=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}],["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"m9 13 3-3 3 3",key:"1pxg3c"}]],rH=on("folder-up",nH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Z0=on("folder",aH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Hm=on("git-branch",iH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],sH=on("git-commit-horizontal",oH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],cH=on("git-merge",lH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["line",{x1:"6",x2:"6",y1:"9",y2:"21",key:"rroup"}]],rD=on("git-pull-request",uH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],fH=on("grip-vertical",dH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hH=[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]],aD=on("hard-drive",hH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],mH=on("house",pH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],yH=on("image",gH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],iD=on("info",bH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],wH=on("key",vH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Vn=on("loader-circle",_H);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],SH=on("message-square",xH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],CH=on("music",EH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],TH=on("panel-left-close",kH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]],NH=on("panel-right-close",AH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],oD=on("paperclip",RH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],SC=on("pen",IH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dw=on("plus",OH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],fw=on("refresh-cw",DH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],MH=on("rotate-ccw",jH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],hw=on("save",PH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Y0=on("search",FH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=[["path",{d:"M3.714 3.048a.498.498 0 0 0-.683.627l2.843 7.627a2 2 0 0 1 0 1.396l-2.842 7.627a.498.498 0 0 0 .682.627l18-8.5a.5.5 0 0 0 0-.904z",key:"117uat"}],["path",{d:"M6 12h16",key:"s4cdu5"}]],$H=on("send-horizontal",LH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],zH=on("settings",BH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]],HH=on("sliders-horizontal",UH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],XE=on("square-pen",qH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],GH=on("square",VH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M17 6.1H3",key:"wptmhv"}],["path",{d:"M21 12.1H3",key:"1j38uz"}],["path",{d:"M15.1 18H3",key:"1nb16a"}]],KH=on("text",WH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],$s=on("trash-2",ZH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],EC=on("triangle-alert",YH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],JH=on("upload",XH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],eq=on("user",QH);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tq=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],r3=on("users",tq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nq=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],rq=on("video",nq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aq=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],iq=on("wrench",aq);/**
 * @license lucide-react v0.485.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oq=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gu=on("x",oq),a3=({controls:e,area:t,className:n})=>{const r=e.filter(a=>t==="trigger"?!!a.triggerRenderer:!!a.renderer);return r.length===0?null:y.jsx("div",{className:Rt(n),children:r.map(a=>{var o,s;const i=t==="trigger"?(o=a.triggerRenderer)==null?void 0:o.call(a):(s=a.renderer)==null?void 0:s.call(a);return i?y.jsx(yt.Fragment,{children:i},a.id):null})})},i3=e=>{let t;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(t):u;if(!Object.is(h,t)){const p=t;t=d??(typeof h!="object"||h===null)?h:Object.assign({},t,h),n.forEach(g=>g(t,p))}},a=()=>t,s={setState:r,getState:a,getInitialState:()=>l,subscribe:u=>(n.add(u),()=>n.delete(u))},l=t=e(r,a,s);return s},sq=e=>e?i3(e):i3,lq=e=>e;function cq(e,t=lq){const n=yt.useSyncExternalStore(e.subscribe,()=>t(e.getState()),()=>t(e.getInitialState()));return yt.useDebugValue(n),n}const o3=e=>{const t=sq(e),n=r=>cq(t,r);return Object.assign(n,t),n},es=e=>e?o3(e):o3;var sD=Symbol.for("immer-nothing"),s3=Symbol.for("immer-draftable"),ur=Symbol.for("immer-state");function _o(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ch=Object.getPrototypeOf;function uh(e){return!!e&&!!e[ur]}function $l(e){var t;return e?lD(e)||Array.isArray(e)||!!e[s3]||!!((t=e.constructor)!=null&&t[s3])||mw(e)||gw(e):!1}var uq=Object.prototype.constructor.toString();function lD(e){if(!e||typeof e!="object")return!1;const t=ch(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===uq}function qm(e,t){pw(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function pw(e){const t=e[ur];return t?t.type_:Array.isArray(e)?1:mw(e)?2:gw(e)?3:0}function JE(e,t){return pw(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cD(e,t,n){const r=pw(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function dq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function mw(e){return e instanceof Map}function gw(e){return e instanceof Set}function Ia(e){return e.copy_||e.base_}function QE(e,t){if(mw(e))return new Map(e);if(gw(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=lD(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[ur];let a=Reflect.ownKeys(r);for(let i=0;i<a.length;i++){const o=a[i],s=r[o];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(r[o]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[o]})}return Object.create(ch(e),r)}else{const r=ch(e);if(r!==null&&n)return{...e};const a=Object.create(r);return Object.assign(a,e)}}function CC(e,t=!1){return yw(e)||uh(e)||!$l(e)||(pw(e)>1&&(e.set=e.add=e.clear=e.delete=fq),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>CC(r,!0))),e}function fq(){_o(2)}function yw(e){return Object.isFrozen(e)}var e2={};function hd(e){const t=e2[e];return t||_o(0,e),t}function hq(e,t){e2[e]||(e2[e]=t)}var Vm;function Yb(){return Vm}function pq(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function l3(e,t){t&&(hd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function t2(e){n2(e),e.drafts_.forEach(mq),e.drafts_=null}function n2(e){e===Vm&&(Vm=e.parent_)}function c3(e){return Vm=pq(Vm,e)}function mq(e){const t=e[ur];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function u3(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ur].modified_&&(t2(t),_o(4)),$l(e)&&(e=Xb(t,e),t.parent_||Jb(t,e)),t.patches_&&hd("Patches").generateReplacementPatches_(n[ur].base_,e,t.patches_,t.inversePatches_)):e=Xb(t,n,[]),t2(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==sD?e:void 0}function Xb(e,t,n){if(yw(t))return t;const r=t[ur];if(!r)return qm(t,(a,i)=>d3(e,r,t,a,i,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Jb(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const a=r.copy_;let i=a,o=!1;r.type_===3&&(i=new Set(a),a.clear(),o=!0),qm(i,(s,l)=>d3(e,r,a,s,l,n,o)),Jb(e,a,!1),n&&e.patches_&&hd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function d3(e,t,n,r,a,i,o){if(uh(a)){const s=i&&t&&t.type_!==3&&!JE(t.assigned_,r)?i.concat(r):void 0,l=Xb(e,a,s);if(cD(n,r,l),uh(l))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if($l(a)&&!yw(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Xb(e,a),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Jb(e,a)}}function Jb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&CC(t,n)}function gq(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Yb(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=r,i=kC;n&&(a=[r],i=Gm);const{revoke:o,proxy:s}=Proxy.revocable(a,i);return r.draft_=s,r.revoke_=o,s}var kC={get(e,t){if(t===ur)return e;const n=Ia(e);if(!JE(n,t))return yq(e,n,t);const r=n[t];return e.finalized_||!$l(r)?r:r===Mx(e.base_,t)?(Px(e),e.copy_[t]=Wm(r,e)):r},has(e,t){return t in Ia(e)},ownKeys(e){return Reflect.ownKeys(Ia(e))},set(e,t,n){const r=uD(Ia(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const a=Mx(Ia(e),t),i=a==null?void 0:a[ur];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(dq(n,a)&&(n!==void 0||JE(e.base_,t)))return!0;Px(e),Tl(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Mx(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Px(e),Tl(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Ia(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){_o(11)},getPrototypeOf(e){return ch(e.base_)},setPrototypeOf(){_o(12)}},Gm={};qm(kC,(e,t)=>{Gm[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Gm.deleteProperty=function(e,t){return Gm.set.call(this,e,t,void 0)};Gm.set=function(e,t,n){return kC.set.call(this,e[0],t,n,e[0])};function Mx(e,t){const n=e[ur];return(n?Ia(n):e)[t]}function yq(e,t,n){var a;const r=uD(t,n);return r?"value"in r?r.value:(a=r.get)==null?void 0:a.call(e.draft_):void 0}function uD(e,t){if(!(t in e))return;let n=ch(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=ch(n)}}function Tl(e){e.modified_||(e.modified_=!0,e.parent_&&Tl(e.parent_))}function Px(e){e.copy_||(e.copy_=QE(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bq=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const i=n;n=t;const o=this;return function(l=i,...u){return o.produce(l,d=>n.call(this,d,...u))}}typeof n!="function"&&_o(6),r!==void 0&&typeof r!="function"&&_o(7);let a;if($l(t)){const i=c3(this),o=Wm(t,void 0);let s=!0;try{a=n(o),s=!1}finally{s?t2(i):n2(i)}return l3(i,r),u3(a,i)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===sD&&(a=void 0),this.autoFreeze_&&CC(a,!0),r){const i=[],o=[];hd("Patches").generateReplacementPatches_(t,a,i,o),r(i,o)}return a}else _o(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...s)=>this.produceWithPatches(o,l=>t(l,...s));let r,a;return[this.produce(t,n,(o,s)=>{r=o,a=s}),r,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){$l(e)||_o(8),uh(e)&&(e=vq(e));const t=c3(this),n=Wm(e,void 0);return n[ur].isManual_=!0,n2(t),n}finishDraft(e,t){const n=e&&e[ur];(!n||!n.isManual_)&&_o(9);const{scope_:r}=n;return l3(r,t),u3(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const r=hd("Patches").applyPatches_;return uh(e)?r(e,t):this.produce(e,a=>r(a,t))}};function Wm(e,t){const n=mw(e)?hd("MapSet").proxyMap_(e,t):gw(e)?hd("MapSet").proxySet_(e,t):gq(e,t);return(t?t.scope_:Yb()).drafts_.push(n),n}function vq(e){return uh(e)||_o(10,e),dD(e)}function dD(e){if(!$l(e)||yw(e))return e;const t=e[ur];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=QE(e,t.scope_.immer_.useStrictShallowCopy_)}else n=QE(e,!0);return qm(n,(r,a)=>{cD(n,r,dD(a))}),t&&(t.finalized_=!1),n}function wq(){class e extends Map{constructor(l,u){super(),this[ur]={type_:2,parent_:u,scope_:u?u.scope_:Yb(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Ia(this[ur]).size}has(l){return Ia(this[ur]).has(l)}set(l,u){const d=this[ur];return o(d),(!Ia(d).has(l)||Ia(d).get(l)!==u)&&(n(d),Tl(d),d.assigned_.set(l,!0),d.copy_.set(l,u),d.assigned_.set(l,!0)),this}delete(l){if(!this.has(l))return!1;const u=this[ur];return o(u),n(u),Tl(u),u.base_.has(l)?u.assigned_.set(l,!1):u.assigned_.delete(l),u.copy_.delete(l),!0}clear(){const l=this[ur];o(l),Ia(l).size&&(n(l),Tl(l),l.assigned_=new Map,qm(l.base_,u=>{l.assigned_.set(u,!1)}),l.copy_.clear())}forEach(l,u){const d=this[ur];Ia(d).forEach((h,p,g)=>{l.call(u,this.get(p),p,this)})}get(l){const u=this[ur];o(u);const d=Ia(u).get(l);if(u.finalized_||!$l(d)||d!==u.base_.get(l))return d;const h=Wm(d,u);return n(u),u.copy_.set(l,h),h}keys(){return Ia(this[ur]).keys()}values(){const l=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=l.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const l=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=l.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function t(s,l){return new e(s,l)}function n(s){s.copy_||(s.assigned_=new Map,s.copy_=new Map(s.base_))}class r extends Set{constructor(l,u){super(),this[ur]={type_:3,parent_:u,scope_:u?u.scope_:Yb(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Ia(this[ur]).size}has(l){const u=this[ur];return o(u),u.copy_?!!(u.copy_.has(l)||u.drafts_.has(l)&&u.copy_.has(u.drafts_.get(l))):u.base_.has(l)}add(l){const u=this[ur];return o(u),this.has(l)||(i(u),Tl(u),u.copy_.add(l)),this}delete(l){if(!this.has(l))return!1;const u=this[ur];return o(u),i(u),Tl(u),u.copy_.delete(l)||(u.drafts_.has(l)?u.copy_.delete(u.drafts_.get(l)):!1)}clear(){const l=this[ur];o(l),Ia(l).size&&(i(l),Tl(l),l.copy_.clear())}values(){const l=this[ur];return o(l),i(l),l.copy_.values()}entries(){const l=this[ur];return o(l),i(l),l.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(l,u){const d=this.values();let h=d.next();for(;!h.done;)l.call(u,h.value,h.value,this),h=d.next()}}function a(s,l){return new r(s,l)}function i(s){s.copy_||(s.copy_=new Set,s.base_.forEach(l=>{if($l(l)){const u=Wm(l,s);s.drafts_.set(l,u),s.copy_.add(u)}else s.copy_.add(l)}))}function o(s){s.revoked_&&_o(3,JSON.stringify(Ia(s)))}hq("MapSet",{proxyMap_:t,proxySet_:a})}var to=new bq,_q=to.produce;to.produceWithPatches.bind(to);to.setAutoFreeze.bind(to);to.setUseStrictShallowCopy.bind(to);to.applyPatches.bind(to);to.createDraft.bind(to);to.finishDraft.bind(to);const xq=e=>(t,n,r)=>(r.setState=(a,i,...o)=>{const s=typeof a=="function"?_q(a):a;return t(s,i,...o)},e(r.setState,n,r)),ts=xq,Mr=es(ts((e,t)=>({promptControls:{},chatControls:{},middlewareRegistry:{},tools:{},registerPromptControl:n=>(e(r=>{r.promptControls[n.id]&&console.warn(`ControlRegistryStore: PromptControl with ID "${n.id}" already registered. Overwriting.`),r.promptControls[n.id]=n}),()=>t().unregisterPromptControl(n.id)),unregisterPromptControl:n=>{e(r=>{r.promptControls[n]?delete r.promptControls[n]:console.warn(`ControlRegistryStore: PromptControl with ID "${n}" not found for unregistration.`)})},registerChatControl:n=>(e(r=>{r.chatControls[n.id]&&console.warn(`ControlRegistryStore: ChatControl with ID "${n.id}" already registered. Overwriting.`),r.chatControls[n.id]=n}),()=>t().unregisterChatControl(n.id)),unregisterChatControl:n=>{e(r=>{r.chatControls[n]?delete r.chatControls[n]:console.warn(`ControlRegistryStore: ChatControl with ID "${n}" not found for unregistration.`)})},registerMiddleware:(n,r,a,i=0)=>{const o={modId:r,callback:a,order:i};return e(s=>{s.middlewareRegistry[n]||(s.middlewareRegistry[n]=[]),s.middlewareRegistry[n].push(o),s.middlewareRegistry[n].sort((l,u)=>(l.order??0)-(u.order??0))}),()=>t().unregisterMiddleware(n,r,a)},unregisterMiddleware:(n,r,a)=>{e(i=>{var o;i.middlewareRegistry[n]?(i.middlewareRegistry[n]=i.middlewareRegistry[n].filter(s=>!(s.modId===r&&s.callback===a)),((o=i.middlewareRegistry[n])==null?void 0:o.length)===0&&delete i.middlewareRegistry[n]):console.warn(`ControlRegistryStore: Middleware hook "${n}" not found for unregistration.`)})},getMiddlewareForHook:n=>{const r=t().middlewareRegistry[n]??[];return Object.freeze([...r].sort((a,i)=>(a.order??0)-(i.order??0)))},registerTool:(n,r,a,i)=>(e(o=>{o.tools[r]&&console.warn(`ControlRegistryStore: Tool "${r}" already registered by mod "${o.tools[r].modId}". Overwriting with registration from mod "${n}".`),o.tools[r]={definition:a,implementation:i,modId:n}}),()=>t().unregisterTool(r)),unregisterTool:n=>{e(r=>{r.tools[n]?delete r.tools[n]:console.warn(`ControlRegistryStore: Tool "${n}" not found for unregistration.`)})},getRegisteredTools:()=>Object.freeze({...t().tools})})));var $b={exports:{}},Sq=$b.exports,f3;function Eq(){return f3||(f3=1,function(e,t){(function(n,r){e.exports=r()})(Sq,function(){var n=function(T,j){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(K,te){K.__proto__=te}||function(K,te){for(var ue in te)Object.prototype.hasOwnProperty.call(te,ue)&&(K[ue]=te[ue])})(T,j)},r=function(){return(r=Object.assign||function(T){for(var j,K=1,te=arguments.length;K<te;K++)for(var ue in j=arguments[K])Object.prototype.hasOwnProperty.call(j,ue)&&(T[ue]=j[ue]);return T}).apply(this,arguments)};function a(T,j,K){for(var te,ue=0,we=j.length;ue<we;ue++)!te&&ue in j||((te=te||Array.prototype.slice.call(j,0,ue))[ue]=j[ue]);return T.concat(te||Array.prototype.slice.call(j))}var i=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:ld,o=Object.keys,s=Array.isArray;function l(T,j){return typeof j!="object"||o(j).forEach(function(K){T[K]=j[K]}),T}typeof Promise>"u"||i.Promise||(i.Promise=Promise);var u=Object.getPrototypeOf,d={}.hasOwnProperty;function h(T,j){return d.call(T,j)}function p(T,j){typeof j=="function"&&(j=j(u(T))),(typeof Reflect>"u"?o:Reflect.ownKeys)(j).forEach(function(K){v(T,K,j[K])})}var g=Object.defineProperty;function v(T,j,K,te){g(T,j,l(K&&h(K,"get")&&typeof K.get=="function"?{get:K.get,set:K.set,configurable:!0}:{value:K,configurable:!0,writable:!0},te))}function b(T){return{from:function(j){return T.prototype=Object.create(j.prototype),v(T.prototype,"constructor",T),{extend:p.bind(null,T.prototype)}}}}var _=Object.getOwnPropertyDescriptor,x=[].slice;function S(T,j,K){return x.call(T,j,K)}function E(T,j){return j(T)}function C(T){if(!T)throw new Error("Assertion Failed")}function k(T){i.setImmediate?setImmediate(T):setTimeout(T,0)}function R(T,j){if(typeof j=="string"&&h(T,j))return T[j];if(!j)return T;if(typeof j!="string"){for(var K=[],te=0,ue=j.length;te<ue;++te){var we=R(T,j[te]);K.push(we)}return K}var je=j.indexOf(".");if(je!==-1){var $e=T[j.substr(0,je)];return $e==null?void 0:R($e,j.substr(je+1))}}function D(T,j,K){if(T&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(T)))if(typeof j!="string"&&"length"in j){C(typeof K!="string"&&"length"in K);for(var te=0,ue=j.length;te<ue;++te)D(T,j[te],K[te])}else{var we,je,$e=j.indexOf(".");$e!==-1?(we=j.substr(0,$e),(je=j.substr($e+1))===""?K===void 0?s(T)&&!isNaN(parseInt(we))?T.splice(we,1):delete T[we]:T[we]=K:D($e=!($e=T[we])||!h(T,we)?T[we]={}:$e,je,K)):K===void 0?s(T)&&!isNaN(parseInt(j))?T.splice(j,1):delete T[j]:T[j]=K}}function O(T){var j,K={};for(j in T)h(T,j)&&(K[j]=T[j]);return K}var L=[].concat;function B(T){return L.apply([],T)}var _t="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(B([8,16,32,64].map(function(T){return["Int","Uint","Float"].map(function(j){return j+T+"Array"})}))).filter(function(T){return i[T]}),Y=new Set(_t.map(function(T){return i[T]})),F=null;function Z(T){return F=new WeakMap,T=function j(K){if(!K||typeof K!="object")return K;var te=F.get(K);if(te)return te;if(s(K)){te=[],F.set(K,te);for(var ue=0,we=K.length;ue<we;++ue)te.push(j(K[ue]))}else if(Y.has(K.constructor))te=K;else{var je,$e=u(K);for(je in te=$e===Object.prototype?{}:Object.create($e),F.set(K,te),K)h(K,je)&&(te[je]=j(K[je]))}return te}(T),F=null,T}var q={}.toString;function ne(T){return q.call(T).slice(8,-1)}var ae=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof ae=="symbol"?function(T){var j;return T!=null&&(j=T[ae])&&j.apply(T)}:function(){return null};function ee(T,j){return j=T.indexOf(j),0<=j&&T.splice(j,1),0<=j}var ie={};function U(T){var j,K,te,ue;if(arguments.length===1){if(s(T))return T.slice();if(this===ie&&typeof T=="string")return[T];if(ue=re(T)){for(K=[];!(te=ue.next()).done;)K.push(te.value);return K}if(T==null)return[T];if(typeof(j=T.length)!="number")return[T];for(K=new Array(j);j--;)K[j]=T[j];return K}for(j=arguments.length,K=new Array(j);j--;)K[j]=arguments[j];return K}var Q=typeof Symbol<"u"?function(T){return T[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},at=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],fi=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(at),X={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(T,j){this.name=T,this.message=j}function be(T,j){return T+". Errors: "+Object.keys(j).map(function(K){return j[K].toString()}).filter(function(K,te,ue){return ue.indexOf(K)===te}).join(`
`)}function _e(T,j,K,te){this.failures=j,this.failedKeys=te,this.successCount=K,this.message=be(T,j)}function Pe(T,j){this.name="BulkError",this.failures=Object.keys(j).map(function(K){return j[K]}),this.failuresByPos=j,this.message=be(T,this.failures)}b(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),b(_e).from(de),b(Pe).from(de);var Ne=fi.reduce(function(T,j){return T[j]=j+"Error",T},{}),Re=de,Ce=fi.reduce(function(T,j){var K=j+"Error";function te(ue,we){this.name=K,ue?typeof ue=="string"?(this.message="".concat(ue).concat(we?`
 `+we:""),this.inner=we||null):typeof ue=="object"&&(this.message="".concat(ue.name," ").concat(ue.message),this.inner=ue):(this.message=X[j]||K,this.inner=null)}return b(te).from(Re),T[j]=te,T},{});Ce.Syntax=SyntaxError,Ce.Type=TypeError,Ce.Range=RangeError;var Fe=at.reduce(function(T,j){return T[j+"Error"]=Ce[j],T},{}),Qe=fi.reduce(function(T,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(T[j+"Error"]=Ce[j]),T},{});function Le(){}function Ie(T){return T}function V(T,j){return T==null||T===Ie?j:function(K){return j(T(K))}}function me(T,j){return function(){T.apply(this,arguments),j.apply(this,arguments)}}function Te(T,j){return T===Le?j:function(){var K=T.apply(this,arguments);K!==void 0&&(arguments[0]=K);var te=this.onsuccess,ue=this.onerror;this.onsuccess=null,this.onerror=null;var we=j.apply(this,arguments);return te&&(this.onsuccess=this.onsuccess?me(te,this.onsuccess):te),ue&&(this.onerror=this.onerror?me(ue,this.onerror):ue),we!==void 0?we:K}}function le(T,j){return T===Le?j:function(){T.apply(this,arguments);var K=this.onsuccess,te=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),K&&(this.onsuccess=this.onsuccess?me(K,this.onsuccess):K),te&&(this.onerror=this.onerror?me(te,this.onerror):te)}}function oe(T,j){return T===Le?j:function(K){var te=T.apply(this,arguments);l(K,te);var ue=this.onsuccess,we=this.onerror;return this.onsuccess=null,this.onerror=null,K=j.apply(this,arguments),ue&&(this.onsuccess=this.onsuccess?me(ue,this.onsuccess):ue),we&&(this.onerror=this.onerror?me(we,this.onerror):we),te===void 0?K===void 0?void 0:K:l(te,K)}}function J(T,j){return T===Le?j:function(){return j.apply(this,arguments)!==!1&&T.apply(this,arguments)}}function xe(T,j){return T===Le?j:function(){var K=T.apply(this,arguments);if(K&&typeof K.then=="function"){for(var te=this,ue=arguments.length,we=new Array(ue);ue--;)we[ue]=arguments[ue];return K.then(function(){return j.apply(te,we)})}return j.apply(this,arguments)}}Qe.ModifyError=_e,Qe.DexieError=de,Qe.BulkError=Pe;var Me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ee(T){Me=T}var We={},kt=100,_t=typeof Promise>"u"?[]:function(){var T=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[T,u(T),T];var j=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[j,u(j),T]}(),at=_t[0],fi=_t[1],_t=_t[2],fi=fi&&fi.then,jt=at&&at.constructor,Dt=!!_t,Gt=function(T,j){ce.push([T,j]),I&&(queueMicrotask(pe),I=!1)},ye=!0,I=!0,G=[],fe=[],Oe=Ie,ve={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Le,pgp:!1,env:{},finalize:Le},ke=ve,ce=[],ft=0,vt=[];function M(T){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=ke;if(typeof T!="function"){if(T!==We)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ge(this,this._value))}this._state=null,this._value=null,++j.ref,function K(te,ue){try{ue(function(we){if(te._state===null){if(we===te)throw new TypeError("A promise cannot be resolved with itself.");var je=te._lib&&H();we&&typeof we.then=="function"?K(te,function($e,Ge){we instanceof M?we._then($e,Ge):we.then($e,Ge)}):(te._state=!0,te._value=we,De(te)),je&&z()}},ge.bind(null,te))}catch(we){ge(te,we)}}(this,T)}var Be={get:function(){var T=ke,j=Tt;function K(te,ue){var we=this,je=!T.global&&(T!==ke||j!==Tt),$e=je&&!zn(),Ge=new M(function(Ye,nt){Ke(we,new tt(ls(te,T,je,$e),ls(ue,T,je,$e),Ye,nt,T))});return this._consoleTask&&(Ge._consoleTask=this._consoleTask),Ge}return K.prototype=We,K},set:function(T){v(this,"then",T&&T.prototype===We?Be:{get:function(){return T},set:Be.set})}};function tt(T,j,K,te,ue){this.onFulfilled=typeof T=="function"?T:null,this.onRejected=typeof j=="function"?j:null,this.resolve=K,this.reject=te,this.psd=ue}function ge(T,j){var K,te;fe.push(j),T._state===null&&(K=T._lib&&H(),j=Oe(j),T._state=!1,T._value=j,te=T,G.some(function(ue){return ue._value===te._value})||G.push(te),De(T),K&&z())}function De(T){var j=T._listeners;T._listeners=[];for(var K=0,te=j.length;K<te;++K)Ke(T,j[K]);var ue=T._PSD;--ue.ref||ue.finalize(),ft===0&&(++ft,Gt(function(){--ft==0&&W()},[]))}function Ke(T,j){if(T._state!==null){var K=T._state?j.onFulfilled:j.onRejected;if(K===null)return(T._state?j.resolve:j.reject)(T._value);++j.psd.ref,++ft,Gt(Nt,[K,T,j])}else T._listeners.push(j)}function Nt(T,j,K){try{var te,ue=j._value;!j._state&&fe.length&&(fe=[]),te=Me&&j._consoleTask?j._consoleTask.run(function(){return T(ue)}):T(ue),j._state||fe.indexOf(ue)!==-1||function(we){for(var je=G.length;je;)if(G[--je]._value===we._value)return G.splice(je,1)}(j),K.resolve(te)}catch(we){K.reject(we)}finally{--ft==0&&W(),--K.psd.ref||K.psd.finalize()}}function pe(){ss(ve,function(){H()&&z()})}function H(){var T=ye;return I=ye=!1,T}function z(){var T,j,K;do for(;0<ce.length;)for(T=ce,ce=[],K=T.length,j=0;j<K;++j){var te=T[j];te[0].apply(null,te[1])}while(0<ce.length);I=ye=!0}function W(){var T=G;G=[],T.forEach(function(te){te._PSD.onunhandled.call(null,te._value,te)});for(var j=vt.slice(0),K=j.length;K;)j[--K]()}function he(T){return new M(We,!1,T)}function Ae(T,j){var K=ke;return function(){var te=H(),ue=ke;try{return jn(K,!0),T.apply(this,arguments)}catch(we){j&&j(we)}finally{jn(ue,!1),te&&z()}}}p(M.prototype,{then:Be,_then:function(T,j){Ke(this,new tt(null,null,T,j,ke))},catch:function(T){if(arguments.length===1)return this.then(null,T);var j=T,K=arguments[1];return typeof j=="function"?this.then(null,function(te){return(te instanceof j?K:he)(te)}):this.then(null,function(te){return(te&&te.name===j?K:he)(te)})},finally:function(T){return this.then(function(j){return M.resolve(T()).then(function(){return j})},function(j){return M.resolve(T()).then(function(){return he(j)})})},timeout:function(T,j){var K=this;return T<1/0?new M(function(te,ue){var we=setTimeout(function(){return ue(new Ce.Timeout(j))},T);K.then(te,ue).finally(clearTimeout.bind(null,we))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&v(M.prototype,Symbol.toStringTag,"Dexie.Promise"),ve.env=ci(),p(M,{all:function(){var T=U.apply(null,arguments).map(vr);return new M(function(j,K){T.length===0&&j([]);var te=T.length;T.forEach(function(ue,we){return M.resolve(ue).then(function(je){T[we]=je,--te||j(T)},K)})})},resolve:function(T){return T instanceof M?T:T&&typeof T.then=="function"?new M(function(j,K){T.then(j,K)}):new M(We,!0,T)},reject:he,race:function(){var T=U.apply(null,arguments).map(vr);return new M(function(j,K){T.map(function(te){return M.resolve(te).then(j,K)})})},PSD:{get:function(){return ke},set:function(T){return ke=T}},totalEchoes:{get:function(){return Tt}},newPSD:Xt,usePSD:ss,scheduler:{get:function(){return Gt},set:function(T){Gt=T}},rejectionMapper:{get:function(){return Oe},set:function(T){Oe=T}},follow:function(T,j){return new M(function(K,te){return Xt(function(ue,we){var je=ke;je.unhandleds=[],je.onunhandled=we,je.finalize=me(function(){var $e,Ge=this;$e=function(){Ge.unhandleds.length===0?ue():we(Ge.unhandleds[0])},vt.push(function Ye(){$e(),vt.splice(vt.indexOf(Ye),1)}),++ft,Gt(function(){--ft==0&&W()},[])},je.finalize),T()},j,K,te)})}}),jt&&(jt.allSettled&&v(M,"allSettled",function(){var T=U.apply(null,arguments).map(vr);return new M(function(j){T.length===0&&j([]);var K=T.length,te=new Array(K);T.forEach(function(ue,we){return M.resolve(ue).then(function(je){return te[we]={status:"fulfilled",value:je}},function(je){return te[we]={status:"rejected",reason:je}}).then(function(){return--K||j(te)})})})}),jt.any&&typeof AggregateError<"u"&&v(M,"any",function(){var T=U.apply(null,arguments).map(vr);return new M(function(j,K){T.length===0&&K(new AggregateError([]));var te=T.length,ue=new Array(te);T.forEach(function(we,je){return M.resolve(we).then(function($e){return j($e)},function($e){ue[je]=$e,--te||K(new AggregateError(ue))})})})}),jt.withResolvers&&(M.withResolvers=jt.withResolvers));var He={awaits:0,echoes:0,id:0},pt=0,Vt=[],ut=0,Tt=0,Mt=0;function Xt(T,j,K,te){var ue=ke,we=Object.create(ue);return we.parent=ue,we.ref=0,we.global=!1,we.id=++Mt,ve.env,we.env=Dt?{Promise:M,PromiseProp:{value:M,configurable:!0,writable:!0},all:M.all,race:M.race,allSettled:M.allSettled,any:M.any,resolve:M.resolve,reject:M.reject}:{},j&&l(we,j),++ue.ref,we.finalize=function(){--this.parent.ref||this.parent.finalize()},te=ss(we,T,K,te),we.ref===0&&we.finalize(),te}function An(){return He.id||(He.id=++pt),++He.awaits,He.echoes+=kt,He.id}function zn(){return!!He.awaits&&(--He.awaits==0&&(He.id=0),He.echoes=He.awaits*kt,!0)}function vr(T){return He.echoes&&T&&T.constructor===jt?(An(),T.then(function(j){return zn(),j},function(j){return zn(),qr(j)})):T}function wr(){var T=Vt[Vt.length-1];Vt.pop(),jn(T,!1)}function jn(T,j){var K,te=ke;(j?!He.echoes||ut++&&T===ke:!ut||--ut&&T===ke)||queueMicrotask(j?(function(ue){++Tt,He.echoes&&--He.echoes!=0||(He.echoes=He.awaits=He.id=0),Vt.push(ke),jn(ue,!0)}).bind(null,T):wr),T!==ke&&(ke=T,te===ve&&(ve.env=ci()),Dt&&(K=ve.env.Promise,j=T.env,(te.global||T.global)&&(Object.defineProperty(i,"Promise",j.PromiseProp),K.all=j.all,K.race=j.race,K.resolve=j.resolve,K.reject=j.reject,j.allSettled&&(K.allSettled=j.allSettled),j.any&&(K.any=j.any))))}function ci(){var T=i.Promise;return Dt?{Promise:T,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:T.all,race:T.race,allSettled:T.allSettled,any:T.any,resolve:T.resolve,reject:T.reject}:{}}function ss(T,j,K,te,ue){var we=ke;try{return jn(T,!0),j(K,te,ue)}finally{jn(we,!1)}}function ls(T,j,K,te){return typeof T!="function"?T:function(){var ue=ke;K&&An(),jn(j,!0);try{return T.apply(this,arguments)}finally{jn(ue,!1),te&&queueMicrotask(zn)}}}function cs(T){Promise===jt&&He.echoes===0?ut===0?T():enqueueNativeMicroTask(T):setTimeout(T,0)}(""+fi).indexOf("[native code]")===-1&&(An=zn=Le);var qr=M.reject,us="",ro="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vg="String expected.",Ro=[],Js="__dbnames",$i="readonly",Nu="readwrite";function ds(T,j){return T?j?function(){return T.apply(this,arguments)&&j.apply(this,arguments)}:T:j}var Qs={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ql(T){return typeof T!="string"||/\./.test(T)?function(j){return j}:function(j){return j[T]===void 0&&T in j&&delete(j=Z(j))[T],j}}function Kd(){throw Ce.Type()}function Un(T,j){try{var K=mp(T),te=mp(j);if(K!==te)return K==="Array"?1:te==="Array"?-1:K==="binary"?1:te==="binary"?-1:K==="string"?1:te==="string"?-1:K==="Date"?1:te!=="Date"?NaN:-1;switch(K){case"number":case"Date":case"string":return j<T?1:T<j?-1:0;case"binary":return function(ue,we){for(var je=ue.length,$e=we.length,Ge=je<$e?je:$e,Ye=0;Ye<Ge;++Ye)if(ue[Ye]!==we[Ye])return ue[Ye]<we[Ye]?-1:1;return je===$e?0:je<$e?-1:1}(ui(T),ui(j));case"Array":return function(ue,we){for(var je=ue.length,$e=we.length,Ge=je<$e?je:$e,Ye=0;Ye<Ge;++Ye){var nt=Un(ue[Ye],we[Ye]);if(nt!==0)return nt}return je===$e?0:je<$e?-1:1}(T,j)}}catch{}return NaN}function mp(T){var j=typeof T;return j!="object"?j:ArrayBuffer.isView(T)?"binary":(T=ne(T),T==="ArrayBuffer"?"binary":T)}function ui(T){return T instanceof Uint8Array?T:ArrayBuffer.isView(T)?new Uint8Array(T.buffer,T.byteOffset,T.byteLength):new Uint8Array(T)}var gp=(Tr.prototype._trans=function(T,j,K){var te=this._tx||ke.trans,ue=this.name,we=Me&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(T==="readonly"?"read":"write"," ").concat(this.name));function je(Ye,nt,qe){if(!qe.schema[ue])throw new Ce.NotFound("Table "+ue+" not part of transaction");return j(qe.idbtrans,qe)}var $e=H();try{var Ge=te&&te.db._novip===this.db._novip?te===ke.trans?te._promise(T,je,K):Xt(function(){return te._promise(T,je,K)},{trans:te,transless:ke.transless||ke}):function Ye(nt,qe,it,Ve){if(nt.idbdb&&(nt._state.openComplete||ke.letThrough||nt._vip)){var et=nt._createTransaction(qe,it,nt._dbSchema);try{et.create(),nt._state.PR1398_maxLoop=3}catch(ot){return ot.name===Ne.InvalidState&&nt.isOpen()&&0<--nt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),nt.close({disableAutoOpen:!1}),nt.open().then(function(){return Ye(nt,qe,it,Ve)})):qr(ot)}return et._promise(qe,function(ot,Xe){return Xt(function(){return ke.trans=et,Ve(ot,Xe,et)})}).then(function(ot){if(qe==="readwrite")try{et.idbtrans.commit()}catch{}return qe==="readonly"?ot:et._completion.then(function(){return ot})})}if(nt._state.openComplete)return qr(new Ce.DatabaseClosed(nt._state.dbOpenError));if(!nt._state.isBeingOpened){if(!nt._state.autoOpen)return qr(new Ce.DatabaseClosed);nt.open().catch(Le)}return nt._state.dbReadyPromise.then(function(){return Ye(nt,qe,it,Ve)})}(this.db,T,[this.name],je);return we&&(Ge._consoleTask=we,Ge=Ge.catch(function(Ye){return console.trace(Ye),qr(Ye)})),Ge}finally{$e&&z()}},Tr.prototype.get=function(T,j){var K=this;return T&&T.constructor===Object?this.where(T).first(j):T==null?qr(new Ce.Type("Invalid argument to Table.get()")):this._trans("readonly",function(te){return K.core.get({trans:te,key:T}).then(function(ue){return K.hook.reading.fire(ue)})}).then(j)},Tr.prototype.where=function(T){if(typeof T=="string")return new this.db.WhereClause(this,T);if(s(T))return new this.db.WhereClause(this,"[".concat(T.join("+"),"]"));var j=o(T);if(j.length===1)return this.where(j[0]).equals(T[j[0]]);var K=this.schema.indexes.concat(this.schema.primKey).filter(function($e){if($e.compound&&j.every(function(Ye){return 0<=$e.keyPath.indexOf(Ye)})){for(var Ge=0;Ge<j.length;++Ge)if(j.indexOf($e.keyPath[Ge])===-1)return!1;return!0}return!1}).sort(function($e,Ge){return $e.keyPath.length-Ge.keyPath.length})[0];if(K&&this.db._maxKey!==us){var we=K.keyPath.slice(0,j.length);return this.where(we).equals(we.map(function(Ge){return T[Ge]}))}!K&&Me&&console.warn("The query ".concat(JSON.stringify(T)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var te=this.schema.idxByName;function ue($e,Ge){return Un($e,Ge)===0}var je=j.reduce(function(qe,Ge){var Ye=qe[0],nt=qe[1],qe=te[Ge],it=T[Ge];return[Ye||qe,Ye||!qe?ds(nt,qe&&qe.multi?function(Ve){return Ve=R(Ve,Ge),s(Ve)&&Ve.some(function(et){return ue(it,et)})}:function(Ve){return ue(it,R(Ve,Ge))}):nt]},[null,null]),we=je[0],je=je[1];return we?this.where(we.name).equals(T[we.keyPath]).filter(je):K?this.filter(je):this.where(j).equals("")},Tr.prototype.filter=function(T){return this.toCollection().and(T)},Tr.prototype.count=function(T){return this.toCollection().count(T)},Tr.prototype.offset=function(T){return this.toCollection().offset(T)},Tr.prototype.limit=function(T){return this.toCollection().limit(T)},Tr.prototype.each=function(T){return this.toCollection().each(T)},Tr.prototype.toArray=function(T){return this.toCollection().toArray(T)},Tr.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Tr.prototype.orderBy=function(T){return new this.db.Collection(new this.db.WhereClause(this,s(T)?"[".concat(T.join("+"),"]"):T))},Tr.prototype.reverse=function(){return this.toCollection().reverse()},Tr.prototype.mapToClass=function(T){var j,K=this.db,te=this.name;function ue(){return j!==null&&j.apply(this,arguments)||this}(this.schema.mappedClass=T).prototype instanceof Kd&&(function(Ge,Ye){if(typeof Ye!="function"&&Ye!==null)throw new TypeError("Class extends value "+String(Ye)+" is not a constructor or null");function nt(){this.constructor=Ge}n(Ge,Ye),Ge.prototype=Ye===null?Object.create(Ye):(nt.prototype=Ye.prototype,new nt)}(ue,j=T),Object.defineProperty(ue.prototype,"db",{get:function(){return K},enumerable:!1,configurable:!0}),ue.prototype.table=function(){return te},T=ue);for(var we=new Set,je=T.prototype;je;je=u(je))Object.getOwnPropertyNames(je).forEach(function(Ge){return we.add(Ge)});function $e(Ge){if(!Ge)return Ge;var Ye,nt=Object.create(T.prototype);for(Ye in Ge)if(!we.has(Ye))try{nt[Ye]=Ge[Ye]}catch{}return nt}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$e,this.hook("reading",$e),T},Tr.prototype.defineClass=function(){return this.mapToClass(function(T){l(this,T)})},Tr.prototype.add=function(T,j){var K=this,te=this.schema.primKey,ue=te.auto,we=te.keyPath,je=T;return we&&ue&&(je=Ql(we)(T)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"add",keys:j!=null?[j]:null,values:[je]})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{D(T,we,$e)}catch{}return $e})},Tr.prototype.update=function(T,j){return typeof T!="object"||s(T)?this.where(":id").equals(T).modify(j):(T=R(T,this.schema.primKey.keyPath),T===void 0?qr(new Ce.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(T).modify(j))},Tr.prototype.put=function(T,j){var K=this,te=this.schema.primKey,ue=te.auto,we=te.keyPath,je=T;return we&&ue&&(je=Ql(we)(T)),this._trans("readwrite",function($e){return K.core.mutate({trans:$e,type:"put",values:[je],keys:j!=null?[j]:null})}).then(function($e){return $e.numFailures?M.reject($e.failures[0]):$e.lastResult}).then(function($e){if(we)try{D(T,we,$e)}catch{}return $e})},Tr.prototype.delete=function(T){var j=this;return this._trans("readwrite",function(K){return j.core.mutate({trans:K,type:"delete",keys:[T]})}).then(function(K){return K.numFailures?M.reject(K.failures[0]):void 0})},Tr.prototype.clear=function(){var T=this;return this._trans("readwrite",function(j){return T.core.mutate({trans:j,type:"deleteRange",range:Qs})}).then(function(j){return j.numFailures?M.reject(j.failures[0]):void 0})},Tr.prototype.bulkGet=function(T){var j=this;return this._trans("readonly",function(K){return j.core.getMany({keys:T,trans:K}).then(function(te){return te.map(function(ue){return j.hook.reading.fire(ue)})})})},Tr.prototype.bulkAdd=function(T,j,K){var te=this,ue=Array.isArray(j)?j:void 0,we=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Ce.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==T.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var Ge=T.length,Ye=Ye&&$e?T.map(Ql(Ye)):T;return te.core.mutate({trans:je,type:"add",keys:ue,values:Ye,wantResults:we}).then(function(et){var qe=et.numFailures,it=et.results,Ve=et.lastResult,et=et.failures;if(qe===0)return we?it:Ve;throw new Pe("".concat(te.name,".bulkAdd(): ").concat(qe," of ").concat(Ge," operations failed"),et)})})},Tr.prototype.bulkPut=function(T,j,K){var te=this,ue=Array.isArray(j)?j:void 0,we=(K=K||(ue?void 0:j))?K.allKeys:void 0;return this._trans("readwrite",function(je){var Ye=te.schema.primKey,$e=Ye.auto,Ye=Ye.keyPath;if(Ye&&ue)throw new Ce.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ue&&ue.length!==T.length)throw new Ce.InvalidArgument("Arguments objects and keys must have the same length");var Ge=T.length,Ye=Ye&&$e?T.map(Ql(Ye)):T;return te.core.mutate({trans:je,type:"put",keys:ue,values:Ye,wantResults:we}).then(function(et){var qe=et.numFailures,it=et.results,Ve=et.lastResult,et=et.failures;if(qe===0)return we?it:Ve;throw new Pe("".concat(te.name,".bulkPut(): ").concat(qe," of ").concat(Ge," operations failed"),et)})})},Tr.prototype.bulkUpdate=function(T){var j=this,K=this.core,te=T.map(function(je){return je.key}),ue=T.map(function(je){return je.changes}),we=[];return this._trans("readwrite",function(je){return K.getMany({trans:je,keys:te,cache:"clone"}).then(function($e){var Ge=[],Ye=[];T.forEach(function(qe,it){var Ve=qe.key,et=qe.changes,ot=$e[it];if(ot){for(var Xe=0,ht=Object.keys(et);Xe<ht.length;Xe++){var bt=ht[Xe],wt=et[bt];if(bt===j.schema.primKey.keyPath){if(Un(wt,Ve)!==0)throw new Ce.Constraint("Cannot update primary key in bulkUpdate()")}else D(ot,bt,wt)}we.push(it),Ge.push(Ve),Ye.push(ot)}});var nt=Ge.length;return K.mutate({trans:je,type:"put",keys:Ge,values:Ye,updates:{keys:te,changeSpecs:ue}}).then(function(qe){var it=qe.numFailures,Ve=qe.failures;if(it===0)return nt;for(var et=0,ot=Object.keys(Ve);et<ot.length;et++){var Xe,ht=ot[et],bt=we[Number(ht)];bt!=null&&(Xe=Ve[ht],delete Ve[ht],Ve[bt]=Xe)}throw new Pe("".concat(j.name,".bulkUpdate(): ").concat(it," of ").concat(nt," operations failed"),Ve)})})})},Tr.prototype.bulkDelete=function(T){var j=this,K=T.length;return this._trans("readwrite",function(te){return j.core.mutate({trans:te,type:"delete",keys:T})}).then(function(je){var ue=je.numFailures,we=je.lastResult,je=je.failures;if(ue===0)return we;throw new Pe("".concat(j.name,".bulkDelete(): ").concat(ue," of ").concat(K," operations failed"),je)})},Tr);function Tr(){}function fs(T){function j(je,$e){if($e){for(var Ge=arguments.length,Ye=new Array(Ge-1);--Ge;)Ye[Ge-1]=arguments[Ge];return K[je].subscribe.apply(null,Ye),T}if(typeof je=="string")return K[je]}var K={};j.addEventType=we;for(var te=1,ue=arguments.length;te<ue;++te)we(arguments[te]);return j;function we(je,$e,Ge){if(typeof je!="object"){var Ye;$e=$e||J;var nt={subscribers:[],fire:Ge=Ge||Le,subscribe:function(qe){nt.subscribers.indexOf(qe)===-1&&(nt.subscribers.push(qe),nt.fire=$e(nt.fire,qe))},unsubscribe:function(qe){nt.subscribers=nt.subscribers.filter(function(it){return it!==qe}),nt.fire=nt.subscribers.reduce($e,Ge)}};return K[je]=j[je]=nt}o(Ye=je).forEach(function(qe){var it=Ye[qe];if(s(it))we(qe,Ye[qe][0],Ye[qe][1]);else{if(it!=="asap")throw new Ce.InvalidArgument("Invalid event config");var Ve=we(qe,Ie,function(){for(var et=arguments.length,ot=new Array(et);et--;)ot[et]=arguments[et];Ve.subscribers.forEach(function(Xe){k(function(){Xe.apply(null,ot)})})})}})}}function ec(T,j){return b(j).from({prototype:T}),j}function Io(T,j){return!(T.filter||T.algorithm||T.or)&&(j?T.justLimit:!T.replayFilter)}function yp(T,j){T.filter=ds(T.filter,j)}function Ka(T,j,K){var te=T.replayFilter;T.replayFilter=te?function(){return ds(te(),j())}:j,T.justLimit=K&&!te}function tc(T,j){if(T.isPrimKey)return j.primaryKey;var K=j.getIndexByKeyPath(T.index);if(!K)throw new Ce.Schema("KeyPath "+T.index+" on object store "+j.name+" is not indexed");return K}function bp(T,j,K){var te=tc(T,j.schema);return j.openCursor({trans:K,values:!T.keysOnly,reverse:T.dir==="prev",unique:!!T.unique,query:{index:te,range:T.range}})}function nc(T,j,K,te){var ue=T.replayFilter?ds(T.filter,T.replayFilter()):T.filter;if(T.or){var we={},je=function($e,Ge,Ye){var nt,qe;ue&&!ue(Ge,Ye,function(it){return Ge.stop(it)},function(it){return Ge.fail(it)})||((qe=""+(nt=Ge.primaryKey))=="[object ArrayBuffer]"&&(qe=""+new Uint8Array(nt)),h(we,qe)||(we[qe]=!0,j($e,Ge,Ye)))};return Promise.all([T.or._iterate(je,K),el(bp(T,te,K),T.algorithm,je,!T.keysOnly&&T.valueMapper)])}return el(bp(T,te,K),ds(T.algorithm,ue),j,!T.keysOnly&&T.valueMapper)}function el(T,j,K,te){var ue=Ae(te?function(we,je,$e){return K(te(we),je,$e)}:K);return T.then(function(we){if(we)return we.start(function(){var je=function(){return we.continue()};j&&!j(we,function($e){return je=$e},function($e){we.stop($e),je=Le},function($e){we.fail($e),je=Le})||ue(we.value,we,function($e){return je=$e}),je()})})}var rc=(vp.prototype.execute=function(T){var j=this["@@propmod"];if(j.add!==void 0){var K=j.add;if(s(K))return a(a([],s(T)?T:[],!0),K).sort();if(typeof K=="number")return(Number(T)||0)+K;if(typeof K=="bigint")try{return BigInt(T)+K}catch{return BigInt(0)+K}throw new TypeError("Invalid term ".concat(K))}if(j.remove!==void 0){var te=j.remove;if(s(te))return s(T)?T.filter(function(ue){return!te.includes(ue)}).sort():[];if(typeof te=="number")return Number(T)-te;if(typeof te=="bigint")try{return BigInt(T)-te}catch{return BigInt(0)-te}throw new TypeError("Invalid subtrahend ".concat(te))}return K=(K=j.replacePrefix)===null||K===void 0?void 0:K[0],K&&typeof T=="string"&&T.startsWith(K)?j.replacePrefix[1]+T.substring(K.length):T},vp);function vp(T){this["@@propmod"]=T}var ac=(Wn.prototype._read=function(T,j){var K=this._ctx;return K.error?K.table._trans(null,qr.bind(null,K.error)):K.table._trans("readonly",T).then(j)},Wn.prototype._write=function(T){var j=this._ctx;return j.error?j.table._trans(null,qr.bind(null,j.error)):j.table._trans("readwrite",T,"locked")},Wn.prototype._addAlgorithm=function(T){var j=this._ctx;j.algorithm=ds(j.algorithm,T)},Wn.prototype._iterate=function(T,j){return nc(this._ctx,T,j,this._ctx.table.core)},Wn.prototype.clone=function(T){var j=Object.create(this.constructor.prototype),K=Object.create(this._ctx);return T&&l(K,T),j._ctx=K,j},Wn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Wn.prototype.each=function(T){var j=this._ctx;return this._read(function(K){return nc(j,T,K,j.table.core)})},Wn.prototype.count=function(T){var j=this;return this._read(function(K){var te=j._ctx,ue=te.table.core;if(Io(te,!0))return ue.count({trans:K,query:{index:tc(te,ue.schema),range:te.range}}).then(function(je){return Math.min(je,te.limit)});var we=0;return nc(te,function(){return++we,!1},K,ue).then(function(){return we})}).then(T)},Wn.prototype.sortBy=function(T,j){var K=T.split(".").reverse(),te=K[0],ue=K.length-1;function we(Ge,Ye){return Ye?we(Ge[K[Ye]],Ye-1):Ge[te]}var je=this._ctx.dir==="next"?1:-1;function $e(Ge,Ye){return Un(we(Ge,ue),we(Ye,ue))*je}return this.toArray(function(Ge){return Ge.sort($e)}).then(j)},Wn.prototype.toArray=function(T){var j=this;return this._read(function(K){var te=j._ctx;if(te.dir==="next"&&Io(te,!0)&&0<te.limit){var ue=te.valueMapper,we=tc(te,te.table.core.schema);return te.table.core.query({trans:K,limit:te.limit,values:!0,query:{index:we,range:te.range}}).then(function($e){return $e=$e.result,ue?$e.map(ue):$e})}var je=[];return nc(te,function($e){return je.push($e)},K,te.table.core).then(function(){return je})},T)},Wn.prototype.offset=function(T){var j=this._ctx;return T<=0||(j.offset+=T,Io(j)?Ka(j,function(){var K=T;return function(te,ue){return K===0||(K===1?--K:ue(function(){te.advance(K),K=0}),!1)}}):Ka(j,function(){var K=T;return function(){return--K<0}})),this},Wn.prototype.limit=function(T){return this._ctx.limit=Math.min(this._ctx.limit,T),Ka(this._ctx,function(){var j=T;return function(K,te,ue){return--j<=0&&te(ue),0<=j}},!0),this},Wn.prototype.until=function(T,j){return yp(this._ctx,function(K,te,ue){return!T(K.value)||(te(ue),j)}),this},Wn.prototype.first=function(T){return this.limit(1).toArray(function(j){return j[0]}).then(T)},Wn.prototype.last=function(T){return this.reverse().first(T)},Wn.prototype.filter=function(T){var j;return yp(this._ctx,function(K){return T(K.value)}),(j=this._ctx).isMatch=ds(j.isMatch,T),this},Wn.prototype.and=function(T){return this.filter(T)},Wn.prototype.or=function(T){return new this.db.WhereClause(this._ctx.table,T,this)},Wn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Wn.prototype.desc=function(){return this.reverse()},Wn.prototype.eachKey=function(T){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,te){T(te.key,te)})},Wn.prototype.eachUniqueKey=function(T){return this._ctx.unique="unique",this.eachKey(T)},Wn.prototype.eachPrimaryKey=function(T){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(K,te){T(te.primaryKey,te)})},Wn.prototype.keys=function(T){var j=this._ctx;j.keysOnly=!j.isMatch;var K=[];return this.each(function(te,ue){K.push(ue.key)}).then(function(){return K}).then(T)},Wn.prototype.primaryKeys=function(T){var j=this._ctx;if(j.dir==="next"&&Io(j,!0)&&0<j.limit)return this._read(function(te){var ue=tc(j,j.table.core.schema);return j.table.core.query({trans:te,values:!1,limit:j.limit,query:{index:ue,range:j.range}})}).then(function(te){return te.result}).then(T);j.keysOnly=!j.isMatch;var K=[];return this.each(function(te,ue){K.push(ue.primaryKey)}).then(function(){return K}).then(T)},Wn.prototype.uniqueKeys=function(T){return this._ctx.unique="unique",this.keys(T)},Wn.prototype.firstKey=function(T){return this.limit(1).keys(function(j){return j[0]}).then(T)},Wn.prototype.lastKey=function(T){return this.reverse().firstKey(T)},Wn.prototype.distinct=function(){var T=this._ctx,T=T.index&&T.table.schema.idxByName[T.index];if(!T||!T.multi)return this;var j={};return yp(this._ctx,function(ue){var te=ue.primaryKey.toString(),ue=h(j,te);return j[te]=!0,!ue}),this},Wn.prototype.modify=function(T){var j=this,K=this._ctx;return this._write(function(te){var ue,we,je;je=typeof T=="function"?T:(ue=o(T),we=ue.length,function(Xe){for(var ht=!1,bt=0;bt<we;++bt){var wt=ue[bt],St=T[wt],Bt=R(Xe,wt);St instanceof rc?(D(Xe,wt,St.execute(Bt)),ht=!0):Bt!==St&&(D(Xe,wt,St),ht=!0)}return ht});var $e=K.table.core,qe=$e.schema.primaryKey,Ge=qe.outbound,Ye=qe.extractKey,nt=200,qe=j.db._options.modifyChunkSize;qe&&(nt=typeof qe=="object"?qe[$e.name]||qe["*"]||200:qe);function it(Xe,wt){var bt=wt.failures,wt=wt.numFailures;et+=Xe-wt;for(var St=0,Bt=o(bt);St<Bt.length;St++){var Kt=Bt[St];Ve.push(bt[Kt])}}var Ve=[],et=0,ot=[];return j.clone().primaryKeys().then(function(Xe){function ht(wt){var St=Math.min(nt,Xe.length-wt);return $e.getMany({trans:te,keys:Xe.slice(wt,wt+St),cache:"immutable"}).then(function(Bt){for(var Kt=[],Ft=[],Ut=Ge?[]:null,Zt=[],Lt=0;Lt<St;++Lt){var Qt=Bt[Lt],hn={value:Z(Qt),primKey:Xe[wt+Lt]};je.call(hn,hn.value,hn)!==!1&&(hn.value==null?Zt.push(Xe[wt+Lt]):Ge||Un(Ye(Qt),Ye(hn.value))===0?(Ft.push(hn.value),Ge&&Ut.push(Xe[wt+Lt])):(Zt.push(Xe[wt+Lt]),Kt.push(hn.value)))}return Promise.resolve(0<Kt.length&&$e.mutate({trans:te,type:"add",values:Kt}).then(function(pn){for(var Nn in pn.failures)Zt.splice(parseInt(Nn),1);it(Kt.length,pn)})).then(function(){return(0<Ft.length||bt&&typeof T=="object")&&$e.mutate({trans:te,type:"put",keys:Ut,values:Ft,criteria:bt,changeSpec:typeof T!="function"&&T,isAdditionalChunk:0<wt}).then(function(pn){return it(Ft.length,pn)})}).then(function(){return(0<Zt.length||bt&&T===Zd)&&$e.mutate({trans:te,type:"delete",keys:Zt,criteria:bt,isAdditionalChunk:0<wt}).then(function(pn){return it(Zt.length,pn)})}).then(function(){return Xe.length>wt+St&&ht(wt+nt)})})}var bt=Io(K)&&K.limit===1/0&&(typeof T!="function"||T===Zd)&&{index:K.index,range:K.range};return ht(0).then(function(){if(0<Ve.length)throw new _e("Error modifying one or more objects",Ve,et,ot);return Xe.length})})})},Wn.prototype.delete=function(){var T=this._ctx,j=T.range;return Io(T)&&(T.isPrimKey||j.type===3)?this._write(function(K){var te=T.table.core.schema.primaryKey,ue=j;return T.table.core.count({trans:K,query:{index:te,range:ue}}).then(function(we){return T.table.core.mutate({trans:K,type:"deleteRange",range:ue}).then(function(je){var $e=je.failures;if(je.lastResult,je.results,je=je.numFailures,je)throw new _e("Could not delete some values",Object.keys($e).map(function(Ge){return $e[Ge]}),we-je);return we-je})})}):this.modify(Zd)},Wn);function Wn(){}var Zd=function(T,j){return j.value=null};function Gg(T,j){return T<j?-1:T===j?0:1}function wp(T,j){return j<T?-1:T===j?0:1}function di(T,j,K){return T=T instanceof nl?new T.Collection(T):T,T._ctx.error=new(K||TypeError)(j),T}function ic(T){return new T.Collection(T,function(){return Yd("")}).limit(0)}function tl(T,j,K,te){var ue,we,je,$e,Ge,Ye,nt,qe=K.length;if(!K.every(function(et){return typeof et=="string"}))return di(T,Vg);function it(et){ue=et==="next"?function(Xe){return Xe.toUpperCase()}:function(Xe){return Xe.toLowerCase()},we=et==="next"?function(Xe){return Xe.toLowerCase()}:function(Xe){return Xe.toUpperCase()},je=et==="next"?Gg:wp;var ot=K.map(function(Xe){return{lower:we(Xe),upper:ue(Xe)}}).sort(function(Xe,ht){return je(Xe.lower,ht.lower)});$e=ot.map(function(Xe){return Xe.upper}),Ge=ot.map(function(Xe){return Xe.lower}),nt=(Ye=et)==="next"?"":te}it("next"),T=new T.Collection(T,function(){return ao($e[0],Ge[qe-1]+te)}),T._ondirectionchange=function(et){it(et)};var Ve=0;return T._addAlgorithm(function(et,ot,Xe){var ht=et.key;if(typeof ht!="string")return!1;var bt=we(ht);if(j(bt,Ge,Ve))return!0;for(var wt=null,St=Ve;St<qe;++St){var Bt=function(Kt,Ft,Ut,Zt,Lt,Qt){for(var hn=Math.min(Kt.length,Zt.length),pn=-1,Nn=0;Nn<hn;++Nn){var Ba=Ft[Nn];if(Ba!==Zt[Nn])return Lt(Kt[Nn],Ut[Nn])<0?Kt.substr(0,Nn)+Ut[Nn]+Ut.substr(Nn+1):Lt(Kt[Nn],Zt[Nn])<0?Kt.substr(0,Nn)+Zt[Nn]+Ut.substr(Nn+1):0<=pn?Kt.substr(0,pn)+Ft[pn]+Ut.substr(pn+1):null;Lt(Kt[Nn],Ba)<0&&(pn=Nn)}return hn<Zt.length&&Qt==="next"?Kt+Ut.substr(Kt.length):hn<Kt.length&&Qt==="prev"?Kt.substr(0,Ut.length):pn<0?null:Kt.substr(0,pn)+Zt[pn]+Ut.substr(pn+1)}(ht,bt,$e[St],Ge[St],je,Ye);Bt===null&&wt===null?Ve=St+1:(wt===null||0<je(wt,Bt))&&(wt=Bt)}return ot(wt!==null?function(){et.continue(wt+nt)}:Xe),!1}),T}function ao(T,j,K,te){return{type:2,lower:T,upper:j,lowerOpen:K,upperOpen:te}}function Yd(T){return{type:1,lower:T,upper:T}}var nl=(Object.defineProperty(Pr.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Pr.prototype.between=function(T,j,K,te){K=K!==!1,te=te===!0;try{return 0<this._cmp(T,j)||this._cmp(T,j)===0&&(K||te)&&(!K||!te)?ic(this):new this.Collection(this,function(){return ao(T,j,!K,!te)})}catch{return di(this,ro)}},Pr.prototype.equals=function(T){return T==null?di(this,ro):new this.Collection(this,function(){return Yd(T)})},Pr.prototype.above=function(T){return T==null?di(this,ro):new this.Collection(this,function(){return ao(T,void 0,!0)})},Pr.prototype.aboveOrEqual=function(T){return T==null?di(this,ro):new this.Collection(this,function(){return ao(T,void 0,!1)})},Pr.prototype.below=function(T){return T==null?di(this,ro):new this.Collection(this,function(){return ao(void 0,T,!1,!0)})},Pr.prototype.belowOrEqual=function(T){return T==null?di(this,ro):new this.Collection(this,function(){return ao(void 0,T)})},Pr.prototype.startsWith=function(T){return typeof T!="string"?di(this,Vg):this.between(T,T+us,!0,!0)},Pr.prototype.startsWithIgnoreCase=function(T){return T===""?this.startsWith(T):tl(this,function(j,K){return j.indexOf(K[0])===0},[T],us)},Pr.prototype.equalsIgnoreCase=function(T){return tl(this,function(j,K){return j===K[0]},[T],"")},Pr.prototype.anyOfIgnoreCase=function(){var T=U.apply(ie,arguments);return T.length===0?ic(this):tl(this,function(j,K){return K.indexOf(j)!==-1},T,"")},Pr.prototype.startsWithAnyOfIgnoreCase=function(){var T=U.apply(ie,arguments);return T.length===0?ic(this):tl(this,function(j,K){return K.some(function(te){return j.indexOf(te)===0})},T,us)},Pr.prototype.anyOf=function(){var T=this,j=U.apply(ie,arguments),K=this._cmp;try{j.sort(K)}catch{return di(this,ro)}if(j.length===0)return ic(this);var te=new this.Collection(this,function(){return ao(j[0],j[j.length-1])});te._ondirectionchange=function(we){K=we==="next"?T._ascending:T._descending,j.sort(K)};var ue=0;return te._addAlgorithm(function(we,je,$e){for(var Ge=we.key;0<K(Ge,j[ue]);)if(++ue===j.length)return je($e),!1;return K(Ge,j[ue])===0||(je(function(){we.continue(j[ue])}),!1)}),te},Pr.prototype.notEqual=function(T){return this.inAnyRange([[-1/0,T],[T,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Pr.prototype.noneOf=function(){var T=U.apply(ie,arguments);if(T.length===0)return new this.Collection(this);try{T.sort(this._ascending)}catch{return di(this,ro)}var j=T.reduce(function(K,te){return K?K.concat([[K[K.length-1][1],te]]):[[-1/0,te]]},null);return j.push([T[T.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Pr.prototype.inAnyRange=function(ht,j){var K=this,te=this._cmp,ue=this._ascending,we=this._descending,je=this._min,$e=this._max;if(ht.length===0)return ic(this);if(!ht.every(function(bt){return bt[0]!==void 0&&bt[1]!==void 0&&ue(bt[0],bt[1])<=0}))return di(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ce.InvalidArgument);var Ge=!j||j.includeLowers!==!1,Ye=j&&j.includeUppers===!0,nt,qe=ue;function it(bt,wt){return qe(bt[0],wt[0])}try{(nt=ht.reduce(function(bt,wt){for(var St=0,Bt=bt.length;St<Bt;++St){var Kt=bt[St];if(te(wt[0],Kt[1])<0&&0<te(wt[1],Kt[0])){Kt[0]=je(Kt[0],wt[0]),Kt[1]=$e(Kt[1],wt[1]);break}}return St===Bt&&bt.push(wt),bt},[])).sort(it)}catch{return di(this,ro)}var Ve=0,et=Ye?function(bt){return 0<ue(bt,nt[Ve][1])}:function(bt){return 0<=ue(bt,nt[Ve][1])},ot=Ge?function(bt){return 0<we(bt,nt[Ve][0])}:function(bt){return 0<=we(bt,nt[Ve][0])},Xe=et,ht=new this.Collection(this,function(){return ao(nt[0][0],nt[nt.length-1][1],!Ge,!Ye)});return ht._ondirectionchange=function(bt){qe=bt==="next"?(Xe=et,ue):(Xe=ot,we),nt.sort(it)},ht._addAlgorithm(function(bt,wt,St){for(var Bt,Kt=bt.key;Xe(Kt);)if(++Ve===nt.length)return wt(St),!1;return!et(Bt=Kt)&&!ot(Bt)||(K._cmp(Kt,nt[Ve][1])===0||K._cmp(Kt,nt[Ve][0])===0||wt(function(){qe===ue?bt.continue(nt[Ve][0]):bt.continue(nt[Ve][1])}),!1)}),ht},Pr.prototype.startsWithAnyOf=function(){var T=U.apply(ie,arguments);return T.every(function(j){return typeof j=="string"})?T.length===0?ic(this):this.inAnyRange(T.map(function(j){return[j,j+us]})):di(this,"startsWithAnyOf() only works with strings")},Pr);function Pr(){}function Bi(T){return Ae(function(j){return rl(j),T(j.target.error),!1})}function rl(T){T.stopPropagation&&T.stopPropagation(),T.preventDefault&&T.preventDefault()}var oc="storagemutated",al="x-storagemutated-1",Ea=fs(null,oc),_p=(Za.prototype._lock=function(){return C(!ke.global),++this._reculock,this._reculock!==1||ke.global||(ke.lockOwnerFor=this),this},Za.prototype._unlock=function(){if(C(!ke.global),--this._reculock==0)for(ke.global||(ke.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var T=this._blockedFuncs.shift();try{ss(T[1],T[0])}catch{}}return this},Za.prototype._locked=function(){return this._reculock&&ke.lockOwnerFor!==this},Za.prototype.create=function(T){var j=this;if(!this.mode)return this;var K=this.db.idbdb,te=this.db._state.dbOpenError;if(C(!this.idbtrans),!T&&!K)switch(te&&te.name){case"DatabaseClosedError":throw new Ce.DatabaseClosed(te);case"MissingAPIError":throw new Ce.MissingAPI(te.message,te);default:throw new Ce.OpenFailed(te)}if(!this.active)throw new Ce.TransactionInactive;return C(this._completion._state===null),(T=this.idbtrans=T||(this.db.core||K).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ae(function(ue){rl(ue),j._reject(T.error)}),T.onabort=Ae(function(ue){rl(ue),j.active&&j._reject(new Ce.Abort(T.error)),j.active=!1,j.on("abort").fire(ue)}),T.oncomplete=Ae(function(){j.active=!1,j._resolve(),"mutatedParts"in T&&Ea.storagemutated.fire(T.mutatedParts)}),this},Za.prototype._promise=function(T,j,K){var te=this;if(T==="readwrite"&&this.mode!=="readwrite")return qr(new Ce.ReadOnly("Transaction is readonly"));if(!this.active)return qr(new Ce.TransactionInactive);if(this._locked())return new M(function(we,je){te._blockedFuncs.push([function(){te._promise(T,j,K).then(we,je)},ke])});if(K)return Xt(function(){var we=new M(function(je,$e){te._lock();var Ge=j(je,$e,te);Ge&&Ge.then&&Ge.then(je,$e)});return we.finally(function(){return te._unlock()}),we._lib=!0,we});var ue=new M(function(we,je){var $e=j(we,je,te);$e&&$e.then&&$e.then(we,je)});return ue._lib=!0,ue},Za.prototype._root=function(){return this.parent?this.parent._root():this},Za.prototype.waitFor=function(T){var j,K=this._root(),te=M.resolve(T);K._waitingFor?K._waitingFor=K._waitingFor.then(function(){return te}):(K._waitingFor=te,K._waitingQueue=[],j=K.idbtrans.objectStore(K.storeNames[0]),function we(){for(++K._spinCount;K._waitingQueue.length;)K._waitingQueue.shift()();K._waitingFor&&(j.get(-1/0).onsuccess=we)}());var ue=K._waitingFor;return new M(function(we,je){te.then(function($e){return K._waitingQueue.push(Ae(we.bind(null,$e)))},function($e){return K._waitingQueue.push(Ae(je.bind(null,$e)))}).finally(function(){K._waitingFor===ue&&(K._waitingFor=null)})})},Za.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Ce.Abort))},Za.prototype.table=function(T){var j=this._memoizedTables||(this._memoizedTables={});if(h(j,T))return j[T];var K=this.schema[T];if(!K)throw new Ce.NotFound("Table "+T+" not part of transaction");return K=new this.db.Table(T,K,this),K.core=this.db.core.table(T),j[T]=K},Za);function Za(){}function io(T,j,K,te,ue,we,je){return{name:T,keyPath:j,unique:K,multi:te,auto:ue,compound:we,src:(K&&!je?"&":"")+(te?"*":"")+(ue?"++":"")+Xd(j)}}function Xd(T){return typeof T=="string"?T:T?"["+[].join.call(T,"+")+"]":""}function sc(T,j,K){return{name:T,primKey:j,indexes:K,mappedClass:null,idxByName:(te=function(ue){return[ue.name,ue]},K.reduce(function(ue,we,je){return je=te(we,je),je&&(ue[je[0]]=je[1]),ue},{}))};var te}var lc=function(T){try{return T.only([[]]),lc=function(){return[[]]},[[]]}catch{return lc=function(){return us},us}};function cc(T){return T==null?function(){}:typeof T=="string"?(j=T).split(".").length===1?function(K){return K[j]}:function(K){return R(K,j)}:function(K){return R(K,T)};var j}function Ru(T){return[].slice.call(T)}var Wg=0;function sa(T){return T==null?":id":typeof T=="string"?T:"[".concat(T.join("+"),"]")}function il(T,j,Ge){function te(Xe){if(Xe.type===3)return null;if(Xe.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var Ve=Xe.lower,et=Xe.upper,ot=Xe.lowerOpen,Xe=Xe.upperOpen;return Ve===void 0?et===void 0?null:j.upperBound(et,!!Xe):et===void 0?j.lowerBound(Ve,!!ot):j.bound(Ve,et,!!ot,!!Xe)}function ue(it){var Ve,et=it.name;return{name:et,schema:it,mutate:function(ot){var Xe=ot.trans,ht=ot.type,bt=ot.keys,wt=ot.values,St=ot.range;return new Promise(function(Bt,Kt){Bt=Ae(Bt);var Ft=Xe.objectStore(et),Ut=Ft.keyPath==null,Zt=ht==="put"||ht==="add";if(!Zt&&ht!=="delete"&&ht!=="deleteRange")throw new Error("Invalid operation type: "+ht);var Lt,Qt=(bt||wt||{length:1}).length;if(bt&&wt&&bt.length!==wt.length)throw new Error("Given keys array must have same length as given values array.");if(Qt===0)return Bt({numFailures:0,failures:{},results:[],lastResult:void 0});function hn(ka){++Ba,rl(ka)}var pn=[],Nn=[],Ba=0;if(ht==="deleteRange"){if(St.type===4)return Bt({numFailures:Ba,failures:Nn,results:[],lastResult:void 0});St.type===3?pn.push(Lt=Ft.clear()):pn.push(Lt=Ft.delete(te(St)))}else{var Ut=Zt?Ut?[wt,bt]:[wt,null]:[bt,null],_n=Ut[0],ta=Ut[1];if(Zt)for(var la=0;la<Qt;++la)pn.push(Lt=ta&&ta[la]!==void 0?Ft[ht](_n[la],ta[la]):Ft[ht](_n[la])),Lt.onerror=hn;else for(la=0;la<Qt;++la)pn.push(Lt=Ft[ht](_n[la])),Lt.onerror=hn}function Oo(ka){ka=ka.target.result,pn.forEach(function(so,gs){return so.error!=null&&(Nn[gs]=so.error)}),Bt({numFailures:Ba,failures:Nn,results:ht==="delete"?bt:pn.map(function(so){return so.result}),lastResult:ka})}Lt.onerror=function(ka){hn(ka),Oo(ka)},Lt.onsuccess=Oo})},getMany:function(ot){var Xe=ot.trans,ht=ot.keys;return new Promise(function(bt,wt){bt=Ae(bt);for(var St,Bt=Xe.objectStore(et),Kt=ht.length,Ft=new Array(Kt),Ut=0,Zt=0,Lt=function(pn){pn=pn.target,Ft[pn._pos]=pn.result,++Zt===Ut&&bt(Ft)},Qt=Bi(wt),hn=0;hn<Kt;++hn)ht[hn]!=null&&((St=Bt.get(ht[hn]))._pos=hn,St.onsuccess=Lt,St.onerror=Qt,++Ut);Ut===0&&bt(Ft)})},get:function(ot){var Xe=ot.trans,ht=ot.key;return new Promise(function(bt,wt){bt=Ae(bt);var St=Xe.objectStore(et).get(ht);St.onsuccess=function(Bt){return bt(Bt.target.result)},St.onerror=Bi(wt)})},query:(Ve=Ye,function(ot){return new Promise(function(Xe,ht){Xe=Ae(Xe);var bt,wt,St,Ut=ot.trans,Bt=ot.values,Kt=ot.limit,Lt=ot.query,Ft=Kt===1/0?void 0:Kt,Zt=Lt.index,Lt=Lt.range,Ut=Ut.objectStore(et),Zt=Zt.isPrimaryKey?Ut:Ut.index(Zt.name),Lt=te(Lt);if(Kt===0)return Xe({result:[]});Ve?((Ft=Bt?Zt.getAll(Lt,Ft):Zt.getAllKeys(Lt,Ft)).onsuccess=function(Qt){return Xe({result:Qt.target.result})},Ft.onerror=Bi(ht)):(bt=0,wt=!Bt&&"openKeyCursor"in Zt?Zt.openKeyCursor(Lt):Zt.openCursor(Lt),St=[],wt.onsuccess=function(Qt){var hn=wt.result;return hn?(St.push(Bt?hn.value:hn.primaryKey),++bt===Kt?Xe({result:St}):void hn.continue()):Xe({result:St})},wt.onerror=Bi(ht))})}),openCursor:function(ot){var Xe=ot.trans,ht=ot.values,bt=ot.query,wt=ot.reverse,St=ot.unique;return new Promise(function(Bt,Kt){Bt=Ae(Bt);var Zt=bt.index,Ft=bt.range,Ut=Xe.objectStore(et),Ut=Zt.isPrimaryKey?Ut:Ut.index(Zt.name),Zt=wt?St?"prevunique":"prev":St?"nextunique":"next",Lt=!ht&&"openKeyCursor"in Ut?Ut.openKeyCursor(te(Ft),Zt):Ut.openCursor(te(Ft),Zt);Lt.onerror=Bi(Kt),Lt.onsuccess=Ae(function(Qt){var hn,pn,Nn,Ba,_n=Lt.result;_n?(_n.___id=++Wg,_n.done=!1,hn=_n.continue.bind(_n),pn=(pn=_n.continuePrimaryKey)&&pn.bind(_n),Nn=_n.advance.bind(_n),Ba=function(){throw new Error("Cursor not stopped")},_n.trans=Xe,_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=function(){throw new Error("Cursor not started")},_n.fail=Ae(Kt),_n.next=function(){var ta=this,la=1;return this.start(function(){return la--?ta.continue():ta.stop()}).then(function(){return ta})},_n.start=function(ta){function la(){if(Lt.result)try{ta()}catch(ka){_n.fail(ka)}else _n.done=!0,_n.start=function(){throw new Error("Cursor behind last entry")},_n.stop()}var Oo=new Promise(function(ka,so){ka=Ae(ka),Lt.onerror=Bi(so),_n.fail=so,_n.stop=function(gs){_n.stop=_n.continue=_n.continuePrimaryKey=_n.advance=Ba,ka(gs)}});return Lt.onsuccess=Ae(function(ka){Lt.onsuccess=la,la()}),_n.continue=hn,_n.continuePrimaryKey=pn,_n.advance=Nn,la(),Oo},Bt(_n)):Bt(null)},Kt)})},count:function(ot){var Xe=ot.query,ht=ot.trans,bt=Xe.index,wt=Xe.range;return new Promise(function(St,Bt){var Kt=ht.objectStore(et),Ft=bt.isPrimaryKey?Kt:Kt.index(bt.name),Kt=te(wt),Ft=Kt?Ft.count(Kt):Ft.count();Ft.onsuccess=Ae(function(Ut){return St(Ut.target.result)}),Ft.onerror=Bi(Bt)})}}}var we,je,$e,nt=(je=Ge,$e=Ru((we=T).objectStoreNames),{schema:{name:we.name,tables:$e.map(function(it){return je.objectStore(it)}).map(function(it){var Ve=it.keyPath,Xe=it.autoIncrement,et=s(Ve),ot={},Xe={name:it.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:Ve==null,compound:et,keyPath:Ve,autoIncrement:Xe,unique:!0,extractKey:cc(Ve)},indexes:Ru(it.indexNames).map(function(ht){return it.index(ht)}).map(function(St){var bt=St.name,wt=St.unique,Bt=St.multiEntry,St=St.keyPath,Bt={name:bt,compound:s(St),keyPath:St,unique:wt,multiEntry:Bt,extractKey:cc(St)};return ot[sa(St)]=Bt}),getIndexByKeyPath:function(ht){return ot[sa(ht)]}};return ot[":id"]=Xe.primaryKey,Ve!=null&&(ot[sa(Ve)]=Xe.primaryKey),Xe})},hasGetAll:0<$e.length&&"getAll"in je.objectStore($e[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Ge=nt.schema,Ye=nt.hasGetAll,nt=Ge.tables.map(ue),qe={};return nt.forEach(function(it){return qe[it.name]=it}),{stack:"dbcore",transaction:T.transaction.bind(T),table:function(it){if(!qe[it])throw new Error("Table '".concat(it,"' not found"));return qe[it]},MIN_KEY:-1/0,MAX_KEY:lc(j),schema:Ge}}function Jd(T,j,K,te){var ue=K.IDBKeyRange;return K.indexedDB,{dbcore:(te=il(j,ue,te),T.dbcore.reduce(function(we,je){return je=je.create,r(r({},we),je(we))},te))}}function hs(T,te){var K=te.db,te=Jd(T._middlewares,K,T._deps,te);T.core=te.dbcore,T.tables.forEach(function(ue){var we=ue.name;T.core.schema.tables.some(function(je){return je.name===we})&&(ue.core=T.core.table(we),T[we]instanceof T.Table&&(T[we].core=ue.core))})}function Qd(T,j,K,te){K.forEach(function(ue){var we=te[ue];j.forEach(function(je){var $e=function Ge(Ye,nt){return _(Ye,nt)||(Ye=u(Ye))&&Ge(Ye,nt)}(je,ue);(!$e||"value"in $e&&$e.value===void 0)&&(je===T.Transaction.prototype||je instanceof T.Transaction?v(je,ue,{get:function(){return this.table(ue)},set:function(Ge){g(this,ue,{value:Ge,writable:!0,configurable:!0,enumerable:!0})}}):je[ue]=new T.Table(ue,we))})})}function Iu(T,j){j.forEach(function(K){for(var te in K)K[te]instanceof T.Table&&delete K[te]})}function xp(T,j){return T._cfg.version-j._cfg.version}function Ou(T,j,K,te){var ue=T._dbSchema;K.objectStoreNames.contains("$meta")&&!ue.$meta&&(ue.$meta=sc("$meta",Zg("")[0],[]),T._storeNames.push("$meta"));var we=T._createTransaction("readwrite",T._storeNames,ue);we.create(K),we._completion.catch(te);var je=we._reject.bind(we),$e=ke.transless||ke;Xt(function(){return ke.trans=we,ke.transless=$e,j!==0?(hs(T,K),Ye=j,((Ge=we).storeNames.includes("$meta")?Ge.table("$meta").get("version").then(function(nt){return nt??Ye}):M.resolve(Ye)).then(function(nt){return it=nt,Ve=we,et=K,ot=[],nt=(qe=T)._versions,Xe=qe._dbSchema=uc(0,qe.idbdb,et),(nt=nt.filter(function(ht){return ht._cfg.version>=it})).length!==0?(nt.forEach(function(ht){ot.push(function(){var bt=Xe,wt=ht._cfg.dbschema;rf(qe,bt,et),rf(qe,wt,et),Xe=qe._dbSchema=wt;var St=tf(bt,wt);St.add.forEach(function(Zt){Sp(et,Zt[0],Zt[1].primKey,Zt[1].indexes)}),St.change.forEach(function(Zt){if(Zt.recreate)throw new Ce.Upgrade("Not yet support for changing primary key");var Lt=et.objectStore(Zt.name);Zt.add.forEach(function(Qt){return nf(Lt,Qt)}),Zt.change.forEach(function(Qt){Lt.deleteIndex(Qt.name),nf(Lt,Qt)}),Zt.del.forEach(function(Qt){return Lt.deleteIndex(Qt)})});var Bt=ht._cfg.contentUpgrade;if(Bt&&ht._cfg.version>it){hs(qe,et),Ve._memoizedTables={};var Kt=O(wt);St.del.forEach(function(Zt){Kt[Zt]=bt[Zt]}),Iu(qe,[qe.Transaction.prototype]),Qd(qe,[qe.Transaction.prototype],o(Kt),Kt),Ve.schema=Kt;var Ft,Ut=Q(Bt);return Ut&&An(),St=M.follow(function(){var Zt;(Ft=Bt(Ve))&&Ut&&(Zt=zn.bind(null,null),Ft.then(Zt,Zt))}),Ft&&typeof Ft.then=="function"?M.resolve(Ft):St.then(function(){return Ft})}}),ot.push(function(bt){var wt,St,Bt=ht._cfg.dbschema;wt=Bt,St=bt,[].slice.call(St.db.objectStoreNames).forEach(function(Kt){return wt[Kt]==null&&St.db.deleteObjectStore(Kt)}),Iu(qe,[qe.Transaction.prototype]),Qd(qe,[qe.Transaction.prototype],qe._storeNames,qe._dbSchema),Ve.schema=qe._dbSchema}),ot.push(function(bt){qe.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(qe.idbdb.version/10)===ht._cfg.version?(qe.idbdb.deleteObjectStore("$meta"),delete qe._dbSchema.$meta,qe._storeNames=qe._storeNames.filter(function(wt){return wt!=="$meta"})):bt.objectStore("$meta").put(ht._cfg.version,"version"))})}),function ht(){return ot.length?M.resolve(ot.shift()(Ve.idbtrans)).then(ht):M.resolve()}().then(function(){Kg(Xe,et)})):M.resolve();var qe,it,Ve,et,ot,Xe}).catch(je)):(o(ue).forEach(function(nt){Sp(K,nt,ue[nt].primKey,ue[nt].indexes)}),hs(T,K),void M.follow(function(){return T.on.populate.fire(we)}).catch(je));var Ge,Ye})}function ef(T,j){Kg(T._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var K=uc(0,T.idbdb,j);rf(T,T._dbSchema,j);for(var te=0,ue=tf(K,T._dbSchema).change;te<ue.length;te++){var we=function(je){if(je.change.length||je.recreate)return console.warn("Unable to patch indexes of table ".concat(je.name," because it has changes on the type of index or primary key.")),{value:void 0};var $e=j.objectStore(je.name);je.add.forEach(function(Ge){Me&&console.debug("Dexie upgrade patch: Creating missing index ".concat(je.name,".").concat(Ge.src)),nf($e,Ge)})}(ue[te]);if(typeof we=="object")return we.value}}function tf(T,j){var K,te={del:[],add:[],change:[]};for(K in T)j[K]||te.del.push(K);for(K in j){var ue=T[K],we=j[K];if(ue){var je={name:K,def:we,recreate:!1,del:[],add:[],change:[]};if(""+(ue.primKey.keyPath||"")!=""+(we.primKey.keyPath||"")||ue.primKey.auto!==we.primKey.auto)je.recreate=!0,te.change.push(je);else{var $e=ue.idxByName,Ge=we.idxByName,Ye=void 0;for(Ye in $e)Ge[Ye]||je.del.push(Ye);for(Ye in Ge){var nt=$e[Ye],qe=Ge[Ye];nt?nt.src!==qe.src&&je.change.push(qe):je.add.push(qe)}(0<je.del.length||0<je.add.length||0<je.change.length)&&te.change.push(je)}}else te.add.push([K,we])}return te}function Sp(T,j,K,te){var ue=T.db.createObjectStore(j,K.keyPath?{keyPath:K.keyPath,autoIncrement:K.auto}:{autoIncrement:K.auto});return te.forEach(function(we){return nf(ue,we)}),ue}function Kg(T,j){o(T).forEach(function(K){j.db.objectStoreNames.contains(K)||(Me&&console.debug("Dexie: Creating missing table",K),Sp(j,K,T[K].primKey,T[K].indexes))})}function nf(T,j){T.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function uc(T,j,K){var te={};return S(j.objectStoreNames,0).forEach(function(ue){for(var we=K.objectStore(ue),je=io(Xd(Ye=we.keyPath),Ye||"",!0,!1,!!we.autoIncrement,Ye&&typeof Ye!="string",!0),$e=[],Ge=0;Ge<we.indexNames.length;++Ge){var nt=we.index(we.indexNames[Ge]),Ye=nt.keyPath,nt=io(nt.name,Ye,!!nt.unique,!!nt.multiEntry,!1,Ye&&typeof Ye!="string",!1);$e.push(nt)}te[ue]=sc(ue,je,$e)}),te}function rf(T,j,K){for(var te=K.db.objectStoreNames,ue=0;ue<te.length;++ue){var we=te[ue],je=K.objectStore(we);T._hasGetAll="getAll"in je;for(var $e=0;$e<je.indexNames.length;++$e){var Ge=je.indexNames[$e],Ye=je.index(Ge).keyPath,nt=typeof Ye=="string"?Ye:"["+S(Ye).join("+")+"]";!j[we]||(Ye=j[we].idxByName[nt])&&(Ye.name=Ge,delete j[we].idxByName[nt],j[we].idxByName[Ge]=Ye)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(T._hasGetAll=!1)}function Zg(T){return T.split(",").map(function(j,K){var te=(j=j.trim()).replace(/([&*]|\+\+)/g,""),ue=/^\[/.test(te)?te.match(/^\[(.*)\]$/)[1].split("+"):te;return io(te,ue||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),s(ue),K===0)})}var z1=(af.prototype._parseStoresSpec=function(T,j){o(T).forEach(function(K){if(T[K]!==null){var te=Zg(T[K]),ue=te.shift();if(ue.unique=!0,ue.multi)throw new Ce.Schema("Primary key cannot be multi-valued");te.forEach(function(we){if(we.auto)throw new Ce.Schema("Only primary key can be marked as autoIncrement (++)");if(!we.keyPath)throw new Ce.Schema("Index must have a name and cannot be an empty string")}),j[K]=sc(K,ue,te)}})},af.prototype.stores=function(K){var j=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,K):K;var K=j._versions,te={},ue={};return K.forEach(function(we){l(te,we._cfg.storesSource),ue=we._cfg.dbschema={},we._parseStoresSpec(te,ue)}),j._dbSchema=ue,Iu(j,[j._allTables,j,j.Transaction.prototype]),Qd(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],o(ue),ue),j._storeNames=o(ue),this},af.prototype.upgrade=function(T){return this._cfg.contentUpgrade=xe(this._cfg.contentUpgrade||Le,T),this},af);function af(){}function Ep(T,j){var K=T._dbNamesDB;return K||(K=T._dbNamesDB=new oo(Js,{addons:[],indexedDB:T,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),K.table("dbnames")}function of(T){return T&&typeof T.databases=="function"}function Cp(T){return Xt(function(){return ke.letThrough=!0,T()})}function kp(T){return!("from"in T)}var Ca=function(T,j){if(!this){var K=new Ca;return T&&"d"in T&&l(K,T),K}l(this,arguments.length?{d:1,from:T,to:1<arguments.length?j:T}:{d:0})};function Du(T,j,K){var te=Un(j,K);if(!isNaN(te)){if(0<te)throw RangeError();if(kp(T))return l(T,{from:j,to:K,d:1});var ue=T.l,te=T.r;if(Un(K,T.from)<0)return ue?Du(ue,j,K):T.l={from:j,to:K,d:1,l:null,r:null},Xg(T);if(0<Un(j,T.to))return te?Du(te,j,K):T.r={from:j,to:K,d:1,l:null,r:null},Xg(T);Un(j,T.from)<0&&(T.from=j,T.l=null,T.d=te?te.d+1:1),0<Un(K,T.to)&&(T.to=K,T.r=null,T.d=T.l?T.l.d+1:1),K=!T.r,ue&&!T.l&&ol(T,ue),te&&K&&ol(T,te)}}function ol(T,j){kp(j)||function K(te,Ge){var we=Ge.from,je=Ge.to,$e=Ge.l,Ge=Ge.r;Du(te,we,je),$e&&K(te,$e),Ge&&K(te,Ge)}(T,j)}function Yg(T,j){var K=sf(j),te=K.next();if(te.done)return!1;for(var ue=te.value,we=sf(T),je=we.next(ue.from),$e=je.value;!te.done&&!je.done;){if(Un($e.from,ue.to)<=0&&0<=Un($e.to,ue.from))return!0;Un(ue.from,$e.from)<0?ue=(te=K.next($e.from)).value:$e=(je=we.next(ue.from)).value}return!1}function sf(T){var j=kp(T)?null:{s:0,n:T};return{next:function(K){for(var te=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,te)for(;j.n.l&&Un(K,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!te||Un(K,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function Xg(T){var j,K,te=(((j=T.r)===null||j===void 0?void 0:j.d)||0)-(((K=T.l)===null||K===void 0?void 0:K.d)||0),ue=1<te?"r":te<-1?"l":"";ue&&(j=ue=="r"?"l":"r",K=r({},T),te=T[ue],T.from=te.from,T.to=te.to,T[ue]=te[ue],K[ue]=te[j],(T[j]=K).d=Tp(K)),T.d=Tp(T)}function Tp(K){var j=K.r,K=K.l;return(j?K?Math.max(j.d,K.d):j.d:K?K.d:0)+1}function lf(T,j){return o(j).forEach(function(K){T[K]?ol(T[K],j[K]):T[K]=function te(ue){var we,je,$e={};for(we in ue)h(ue,we)&&(je=ue[we],$e[we]=!je||typeof je!="object"||Y.has(je.constructor)?je:te(je));return $e}(j[K])}),T}function Ap(T,j){return T.all||j.all||Object.keys(T).some(function(K){return j[K]&&Yg(j[K],T[K])})}p(Ca.prototype,((fi={add:function(T){return ol(this,T),this},addKey:function(T){return Du(this,T,T),this},addKeys:function(T){var j=this;return T.forEach(function(K){return Du(j,K,K)}),this},hasKey:function(T){var j=sf(this).next(T).value;return j&&Un(j.from,T)<=0&&0<=Un(j.to,T)}})[ae]=function(){return sf(this)},fi));var sl={},Np={},Rp=!1;function cf(T){lf(Np,T),Rp||(Rp=!0,setTimeout(function(){Rp=!1,Ip(Np,!(Np={}))},0))}function Ip(T,j){j===void 0&&(j=!1);var K=new Set;if(T.all)for(var te=0,ue=Object.values(sl);te<ue.length;te++)Jg(je=ue[te],T,K,j);else for(var we in T){var je,$e=/^idb\:\/\/(.*)\/(.*)\//.exec(we);$e&&(we=$e[1],$e=$e[2],(je=sl["idb://".concat(we,"/").concat($e)])&&Jg(je,T,K,j))}K.forEach(function(Ge){return Ge()})}function Jg(T,j,K,te){for(var ue=[],we=0,je=Object.entries(T.queries.query);we<je.length;we++){for(var $e=je[we],Ge=$e[0],Ye=[],nt=0,qe=$e[1];nt<qe.length;nt++){var it=qe[nt];Ap(j,it.obsSet)?it.subscribers.forEach(function(Xe){return K.add(Xe)}):te&&Ye.push(it)}te&&ue.push([Ge,Ye])}if(te)for(var Ve=0,et=ue;Ve<et.length;Ve++){var ot=et[Ve],Ge=ot[0],Ye=ot[1];T.queries.query[Ge]=Ye}}function U1(T){var j=T._state,K=T._deps.indexedDB;if(j.isBeingOpened||T.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?qr(j.dbOpenError):T});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var te=j.openCanceller,ue=Math.round(10*T.verno),we=!1;function je(){if(j.openCanceller!==te)throw new Ce.DatabaseClosed("db.open() was cancelled")}function $e(){return new M(function(it,Ve){if(je(),!K)throw new Ce.MissingAPI;var et=T.name,ot=j.autoSchema||!ue?K.open(et):K.open(et,ue);if(!ot)throw new Ce.MissingAPI;ot.onerror=Bi(Ve),ot.onblocked=Ae(T._fireOnBlocked),ot.onupgradeneeded=Ae(function(Xe){var ht;nt=ot.transaction,j.autoSchema&&!T._options.allowEmptyDB?(ot.onerror=rl,nt.abort(),ot.result.close(),(ht=K.deleteDatabase(et)).onsuccess=ht.onerror=Ae(function(){Ve(new Ce.NoSuchDatabase("Database ".concat(et," doesnt exist")))})):(nt.onerror=Bi(Ve),Xe=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,qe=Xe<1,T.idbdb=ot.result,we&&ef(T,nt),Ou(T,Xe/10,nt,Ve))},Ve),ot.onsuccess=Ae(function(){nt=null;var Xe,ht,bt,wt,St,Bt=T.idbdb=ot.result,Kt=S(Bt.objectStoreNames);if(0<Kt.length)try{var Ft=Bt.transaction((wt=Kt).length===1?wt[0]:wt,"readonly");if(j.autoSchema)ht=Bt,bt=Ft,(Xe=T).verno=ht.version/10,bt=Xe._dbSchema=uc(0,ht,bt),Xe._storeNames=S(ht.objectStoreNames,0),Qd(Xe,[Xe._allTables],o(bt),bt);else if(rf(T,T._dbSchema,Ft),((St=tf(uc(0,(St=T).idbdb,Ft),St._dbSchema)).add.length||St.change.some(function(Ut){return Ut.add.length||Ut.change.length}))&&!we)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),Bt.close(),ue=Bt.version+1,we=!0,it($e());hs(T,Ft)}catch{}Ro.push(T),Bt.onversionchange=Ae(function(Ut){j.vcFired=!0,T.on("versionchange").fire(Ut)}),Bt.onclose=Ae(function(Ut){T.on("close").fire(Ut)}),qe&&(St=T._deps,Ft=et,Bt=St.indexedDB,St=St.IDBKeyRange,of(Bt)||Ft===Js||Ep(Bt,St).put({name:Ft}).catch(Le)),it()},Ve)}).catch(function(it){switch(it==null?void 0:it.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),$e();break;case"VersionError":if(0<ue)return ue=0,$e()}return M.reject(it)})}var Ge,Ye=j.dbReadyResolve,nt=null,qe=!1;return M.race([te,(typeof navigator>"u"?M.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(it){function Ve(){return indexedDB.databases().finally(it)}Ge=setInterval(Ve,100),Ve()}).finally(function(){return clearInterval(Ge)}):Promise.resolve()).then($e)]).then(function(){return je(),j.onReadyBeingFired=[],M.resolve(Cp(function(){return T.on.ready.fire(T.vip)})).then(function it(){if(0<j.onReadyBeingFired.length){var Ve=j.onReadyBeingFired.reduce(xe,Le);return j.onReadyBeingFired=[],M.resolve(Cp(function(){return Ve(T.vip)})).then(it)}})}).finally(function(){j.openCanceller===te&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(it){j.dbOpenError=it;try{nt&&nt.abort()}catch{}return te===j.openCanceller&&T._close(),qr(it)}).finally(function(){j.openComplete=!0,Ye()}).then(function(){var it;return qe&&(it={},T.tables.forEach(function(Ve){Ve.schema.indexes.forEach(function(et){et.name&&(it["idb://".concat(T.name,"/").concat(Ve.name,"/").concat(et.name)]=new Ca(-1/0,[[[]]]))}),it["idb://".concat(T.name,"/").concat(Ve.name,"/")]=it["idb://".concat(T.name,"/").concat(Ve.name,"/:dels")]=new Ca(-1/0,[[[]]])}),Ea(oc).fire(it),Ip(it,!0)),T})}function ju(T){function j(we){return T.next(we)}var K=ue(j),te=ue(function(we){return T.throw(we)});function ue(we){return function(Ge){var $e=we(Ge),Ge=$e.value;return $e.done?Ge:Ge&&typeof Ge.then=="function"?Ge.then(K,te):s(Ge)?Promise.all(Ge).then(K,te):K(Ge)}}return ue(j)()}function ps(T,j,K){for(var te=s(T)?T.slice():[T],ue=0;ue<K;++ue)te.push(j);return te}var H1={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(T){return r(r({},T),{table:function(j){var K=T.table(j),te=K.schema,ue={},we=[];function je(qe,it,Ve){var et=sa(qe),ot=ue[et]=ue[et]||[],Xe=qe==null?0:typeof qe=="string"?1:qe.length,ht=0<it,ht=r(r({},Ve),{name:ht?"".concat(et,"(virtual-from:").concat(Ve.name,")"):Ve.name,lowLevelIndex:Ve,isVirtual:ht,keyTail:it,keyLength:Xe,extractKey:cc(qe),unique:!ht&&Ve.unique});return ot.push(ht),ht.isPrimaryKey||we.push(ht),1<Xe&&je(Xe===2?qe[0]:qe.slice(0,Xe-1),it+1,Ve),ot.sort(function(bt,wt){return bt.keyTail-wt.keyTail}),ht}j=je(te.primaryKey.keyPath,0,te.primaryKey),ue[":id"]=[j];for(var $e=0,Ge=te.indexes;$e<Ge.length;$e++){var Ye=Ge[$e];je(Ye.keyPath,0,Ye)}function nt(qe){var it,Ve=qe.query.index;return Ve.isVirtual?r(r({},qe),{query:{index:Ve.lowLevelIndex,range:(it=qe.query.range,Ve=Ve.keyTail,{type:it.type===1?2:it.type,lower:ps(it.lower,it.lowerOpen?T.MAX_KEY:T.MIN_KEY,Ve),lowerOpen:!0,upper:ps(it.upper,it.upperOpen?T.MIN_KEY:T.MAX_KEY,Ve),upperOpen:!0})}}):qe}return r(r({},K),{schema:r(r({},te),{primaryKey:j,indexes:we,getIndexByKeyPath:function(qe){return(qe=ue[sa(qe)])&&qe[0]}}),count:function(qe){return K.count(nt(qe))},query:function(qe){return K.query(nt(qe))},openCursor:function(qe){var it=qe.query.index,Ve=it.keyTail,et=it.isVirtual,ot=it.keyLength;return et?K.openCursor(nt(qe)).then(function(ht){return ht&&Xe(ht)}):K.openCursor(qe);function Xe(ht){return Object.create(ht,{continue:{value:function(bt){bt!=null?ht.continue(ps(bt,qe.reverse?T.MAX_KEY:T.MIN_KEY,Ve)):qe.unique?ht.continue(ht.key.slice(0,ot).concat(qe.reverse?T.MIN_KEY:T.MAX_KEY,Ve)):ht.continue()}},continuePrimaryKey:{value:function(bt,wt){ht.continuePrimaryKey(ps(bt,T.MAX_KEY,Ve),wt)}},primaryKey:{get:function(){return ht.primaryKey}},key:{get:function(){var bt=ht.key;return ot===1?bt[0]:bt.slice(0,ot)}},value:{get:function(){return ht.value}}})}}})}})}};function uf(T,j,K,te){return K=K||{},te=te||"",o(T).forEach(function(ue){var we,je,$e;h(j,ue)?(we=T[ue],je=j[ue],typeof we=="object"&&typeof je=="object"&&we&&je?($e=ne(we))!==ne(je)?K[te+ue]=j[ue]:$e==="Object"?uf(we,je,K,te+ue+"."):we!==je&&(K[te+ue]=j[ue]):we!==je&&(K[te+ue]=j[ue])):K[te+ue]=void 0}),o(j).forEach(function(ue){h(T,ue)||(K[te+ue]=j[ue])}),K}function df(T,j){return j.type==="delete"?j.keys:j.keys||j.values.map(T.extractKey)}var Qg={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(T){return r(r({},T),{table:function(j){var K=T.table(j),te=K.schema.primaryKey;return r(r({},K),{mutate:function(ue){var we=ke.trans,je=we.table(j).hook,$e=je.deleting,Ge=je.creating,Ye=je.updating;switch(ue.type){case"add":if(Ge.fire===Le)break;return we._promise("readwrite",function(){return nt(ue)},!0);case"put":if(Ge.fire===Le&&Ye.fire===Le)break;return we._promise("readwrite",function(){return nt(ue)},!0);case"delete":if($e.fire===Le)break;return we._promise("readwrite",function(){return nt(ue)},!0);case"deleteRange":if($e.fire===Le)break;return we._promise("readwrite",function(){return function qe(it,Ve,et){return K.query({trans:it,values:!1,query:{index:te,range:Ve},limit:et}).then(function(ot){var Xe=ot.result;return nt({type:"delete",keys:Xe,trans:it}).then(function(ht){return 0<ht.numFailures?Promise.reject(ht.failures[0]):Xe.length<et?{failures:[],numFailures:0,lastResult:void 0}:qe(it,r(r({},Ve),{lower:Xe[Xe.length-1],lowerOpen:!0}),et)})})}(ue.trans,ue.range,1e4)},!0)}return K.mutate(ue);function nt(qe){var it,Ve,et,ot=ke.trans,Xe=qe.keys||df(te,qe);if(!Xe)throw new Error("Keys missing");return(qe=qe.type==="add"||qe.type==="put"?r(r({},qe),{keys:Xe}):r({},qe)).type!=="delete"&&(qe.values=a([],qe.values)),qe.keys&&(qe.keys=a([],qe.keys)),it=K,et=Xe,((Ve=qe).type==="add"?Promise.resolve([]):it.getMany({trans:Ve.trans,keys:et,cache:"immutable"})).then(function(ht){var bt=Xe.map(function(wt,St){var Bt,Kt,Ft,Ut=ht[St],Zt={onerror:null,onsuccess:null};return qe.type==="delete"?$e.fire.call(Zt,wt,Ut,ot):qe.type==="add"||Ut===void 0?(Bt=Ge.fire.call(Zt,wt,qe.values[St],ot),wt==null&&Bt!=null&&(qe.keys[St]=wt=Bt,te.outbound||D(qe.values[St],te.keyPath,wt))):(Bt=uf(Ut,qe.values[St]),(Kt=Ye.fire.call(Zt,Bt,wt,Ut,ot))&&(Ft=qe.values[St],Object.keys(Kt).forEach(function(Lt){h(Ft,Lt)?Ft[Lt]=Kt[Lt]:D(Ft,Lt,Kt[Lt])}))),Zt});return K.mutate(qe).then(function(wt){for(var St=wt.failures,Bt=wt.results,Kt=wt.numFailures,wt=wt.lastResult,Ft=0;Ft<Xe.length;++Ft){var Ut=(Bt||Xe)[Ft],Zt=bt[Ft];Ut==null?Zt.onerror&&Zt.onerror(St[Ft]):Zt.onsuccess&&Zt.onsuccess(qe.type==="put"&&ht[Ft]?qe.values[Ft]:Ut)}return{failures:St,results:Bt,numFailures:Kt,lastResult:wt}}).catch(function(wt){return bt.forEach(function(St){return St.onerror&&St.onerror(wt)}),Promise.reject(wt)})})}}})}})}};function Op(T,j,K){try{if(!j||j.keys.length<T.length)return null;for(var te=[],ue=0,we=0;ue<j.keys.length&&we<T.length;++ue)Un(j.keys[ue],T[we])===0&&(te.push(K?Z(j.values[ue]):j.values[ue]),++we);return te.length===T.length?te:null}catch{return null}}var ey={stack:"dbcore",level:-1,create:function(T){return{table:function(j){var K=T.table(j);return r(r({},K),{getMany:function(te){if(!te.cache)return K.getMany(te);var ue=Op(te.keys,te.trans._cache,te.cache==="clone");return ue?M.resolve(ue):K.getMany(te).then(function(we){return te.trans._cache={keys:te.keys,values:te.cache==="clone"?Z(we):we},we})},mutate:function(te){return te.type!=="add"&&(te.trans._cache=null),K.mutate(te)}})}}}};function ll(T,j){return T.trans.mode==="readonly"&&!!T.subscr&&!T.trans.explicit&&T.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function ty(T,j){switch(T){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var q1={stack:"dbcore",level:0,name:"Observability",create:function(T){var j=T.schema.name,K=new Ca(T.MIN_KEY,T.MAX_KEY);return r(r({},T),{transaction:function(te,ue,we){if(ke.subscr&&ue!=="readonly")throw new Ce.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ke.querier));return T.transaction(te,ue,we)},table:function(te){var ue=T.table(te),we=ue.schema,je=we.primaryKey,qe=we.indexes,$e=je.extractKey,Ge=je.outbound,Ye=je.autoIncrement&&qe.filter(function(Ve){return Ve.compound&&Ve.keyPath.includes(je.keyPath)}),nt=r(r({},ue),{mutate:function(Ve){function et(Lt){return Lt="idb://".concat(j,"/").concat(te,"/").concat(Lt),wt[Lt]||(wt[Lt]=new Ca)}var ot,Xe,ht,bt=Ve.trans,wt=Ve.mutatedParts||(Ve.mutatedParts={}),St=et(""),Bt=et(":dels"),Kt=Ve.type,Zt=Ve.type==="deleteRange"?[Ve.range]:Ve.type==="delete"?[Ve.keys]:Ve.values.length<50?[df(je,Ve).filter(function(Lt){return Lt}),Ve.values]:[],Ft=Zt[0],Ut=Zt[1],Zt=Ve.trans._cache;return s(Ft)?(St.addKeys(Ft),(Zt=Kt==="delete"||Ft.length===Ut.length?Op(Ft,Zt):null)||Bt.addKeys(Ft),(Zt||Ut)&&(ot=et,Xe=Zt,ht=Ut,we.indexes.forEach(function(Lt){var Qt=ot(Lt.name||"");function hn(Nn){return Nn!=null?Lt.extractKey(Nn):null}function pn(Nn){return Lt.multiEntry&&s(Nn)?Nn.forEach(function(Ba){return Qt.addKey(Ba)}):Qt.addKey(Nn)}(Xe||ht).forEach(function(Nn,ta){var _n=Xe&&hn(Xe[ta]),ta=ht&&hn(ht[ta]);Un(_n,ta)!==0&&(_n!=null&&pn(_n),ta!=null&&pn(ta))})}))):Ft?(Ut={from:(Ut=Ft.lower)!==null&&Ut!==void 0?Ut:T.MIN_KEY,to:(Ut=Ft.upper)!==null&&Ut!==void 0?Ut:T.MAX_KEY},Bt.add(Ut),St.add(Ut)):(St.add(K),Bt.add(K),we.indexes.forEach(function(Lt){return et(Lt.name).add(K)})),ue.mutate(Ve).then(function(Lt){return!Ft||Ve.type!=="add"&&Ve.type!=="put"||(St.addKeys(Lt.results),Ye&&Ye.forEach(function(Qt){for(var hn=Ve.values.map(function(_n){return Qt.extractKey(_n)}),pn=Qt.keyPath.findIndex(function(_n){return _n===je.keyPath}),Nn=0,Ba=Lt.results.length;Nn<Ba;++Nn)hn[Nn][pn]=Lt.results[Nn];et(Qt.name).addKeys(hn)})),bt.mutatedParts=lf(bt.mutatedParts||{},wt),Lt})}}),qe=function(et){var ot=et.query,et=ot.index,ot=ot.range;return[et,new Ca((et=ot.lower)!==null&&et!==void 0?et:T.MIN_KEY,(ot=ot.upper)!==null&&ot!==void 0?ot:T.MAX_KEY)]},it={get:function(Ve){return[je,new Ca(Ve.key)]},getMany:function(Ve){return[je,new Ca().addKeys(Ve.keys)]},count:qe,query:qe,openCursor:qe};return o(it).forEach(function(Ve){nt[Ve]=function(et){var ot=ke.subscr,Xe=!!ot,ht=ll(ke,ue)&&ty(Ve,et)?et.obsSet={}:ot;if(Xe){var bt=function(Ut){return Ut="idb://".concat(j,"/").concat(te,"/").concat(Ut),ht[Ut]||(ht[Ut]=new Ca)},wt=bt(""),St=bt(":dels"),ot=it[Ve](et),Xe=ot[0],ot=ot[1];if((Ve==="query"&&Xe.isPrimaryKey&&!et.values?St:bt(Xe.name||"")).add(ot),!Xe.isPrimaryKey){if(Ve!=="count"){var Bt=Ve==="query"&&Ge&&et.values&&ue.query(r(r({},et),{values:!1}));return ue[Ve].apply(this,arguments).then(function(Ut){if(Ve==="query"){if(Ge&&et.values)return Bt.then(function(hn){return hn=hn.result,wt.addKeys(hn),Ut});var Zt=et.values?Ut.result.map($e):Ut.result;(et.values?wt:St).addKeys(Zt)}else if(Ve==="openCursor"){var Lt=Ut,Qt=et.values;return Lt&&Object.create(Lt,{key:{get:function(){return St.addKey(Lt.primaryKey),Lt.key}},primaryKey:{get:function(){var hn=Lt.primaryKey;return St.addKey(hn),hn}},value:{get:function(){return Qt&&wt.addKey(Lt.primaryKey),Lt.value}}})}return Ut})}St.add(K)}}return ue[Ve].apply(this,arguments)}}),nt}})}};function ny(T,j,K){if(K.numFailures===0)return j;if(j.type==="deleteRange")return null;var te=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1;return K.numFailures===te?null:(j=r({},j),s(j.keys)&&(j.keys=j.keys.filter(function(ue,we){return!(we in K.failures)})),"values"in j&&s(j.values)&&(j.values=j.values.filter(function(ue,we){return!(we in K.failures)})),j)}function ff(T,j){return K=T,((te=j).lower===void 0||(te.lowerOpen?0<Un(K,te.lower):0<=Un(K,te.lower)))&&(T=T,(j=j).upper===void 0||(j.upperOpen?Un(T,j.upper)<0:Un(T,j.upper)<=0));var K,te}function Dp(T,j,it,te,ue,we){if(!it||it.length===0)return T;var je=j.query.index,$e=je.multiEntry,Ge=j.query.range,Ye=te.schema.primaryKey.extractKey,nt=je.extractKey,qe=(je.lowLevelIndex||je).extractKey,it=it.reduce(function(Ve,et){var ot=Ve,Xe=[];if(et.type==="add"||et.type==="put")for(var ht=new Ca,bt=et.values.length-1;0<=bt;--bt){var wt,St=et.values[bt],Bt=Ye(St);ht.hasKey(Bt)||(wt=nt(St),($e&&s(wt)?wt.some(function(Lt){return ff(Lt,Ge)}):ff(wt,Ge))&&(ht.addKey(Bt),Xe.push(St)))}switch(et.type){case"add":var Kt=new Ca().addKeys(j.values?Ve.map(function(Qt){return Ye(Qt)}):Ve),ot=Ve.concat(j.values?Xe.filter(function(Qt){return Qt=Ye(Qt),!Kt.hasKey(Qt)&&(Kt.addKey(Qt),!0)}):Xe.map(function(Qt){return Ye(Qt)}).filter(function(Qt){return!Kt.hasKey(Qt)&&(Kt.addKey(Qt),!0)}));break;case"put":var Ft=new Ca().addKeys(et.values.map(function(Qt){return Ye(Qt)}));ot=Ve.filter(function(Qt){return!Ft.hasKey(j.values?Ye(Qt):Qt)}).concat(j.values?Xe:Xe.map(function(Qt){return Ye(Qt)}));break;case"delete":var Ut=new Ca().addKeys(et.keys);ot=Ve.filter(function(Qt){return!Ut.hasKey(j.values?Ye(Qt):Qt)});break;case"deleteRange":var Zt=et.range;ot=Ve.filter(function(Qt){return!ff(Ye(Qt),Zt)})}return ot},T);return it===T?T:(it.sort(function(Ve,et){return Un(qe(Ve),qe(et))||Un(Ye(Ve),Ye(et))}),j.limit&&j.limit<1/0&&(it.length>j.limit?it.length=j.limit:T.length===j.limit&&it.length<j.limit&&(ue.dirty=!0)),we?Object.freeze(it):it)}function dc(T,j){return Un(T.lower,j.lower)===0&&Un(T.upper,j.upper)===0&&!!T.lowerOpen==!!j.lowerOpen&&!!T.upperOpen==!!j.upperOpen}function Mu(T,j){return function(K,te,ue,we){if(K===void 0)return te!==void 0?-1:0;if(te===void 0)return 1;if((te=Un(K,te))===0){if(ue&&we)return 0;if(ue)return 1;if(we)return-1}return te}(T.lower,j.lower,T.lowerOpen,j.lowerOpen)<=0&&0<=function(K,te,ue,we){if(K===void 0)return te!==void 0?1:0;if(te===void 0)return-1;if((te=Un(K,te))===0){if(ue&&we)return 0;if(ue)return-1;if(we)return 1}return te}(T.upper,j.upper,T.upperOpen,j.upperOpen)}function V1(T,j,K,te){T.subscribers.add(K),te.addEventListener("abort",function(){var ue,we;T.subscribers.delete(K),T.subscribers.size===0&&(ue=T,we=j,setTimeout(function(){ue.subscribers.size===0&&ee(we,ue)},3e3))})}var hf={stack:"dbcore",level:0,name:"Cache",create:function(T){var j=T.schema.name;return r(r({},T),{transaction:function(K,te,ue){var we,je,$e=T.transaction(K,te,ue);return te==="readwrite"&&(je=(we=new AbortController).signal,ue=function(Ge){return function(){if(we.abort(),te==="readwrite"){for(var Ye=new Set,nt=0,qe=K;nt<qe.length;nt++){var it=qe[nt],Ve=sl["idb://".concat(j,"/").concat(it)];if(Ve){var et=T.table(it),ot=Ve.optimisticOps.filter(function(Qt){return Qt.trans===$e});if($e._explicit&&Ge&&$e.mutatedParts)for(var Xe=0,ht=Object.values(Ve.queries.query);Xe<ht.length;Xe++)for(var bt=0,wt=(Kt=ht[Xe]).slice();bt<wt.length;bt++)Ap((Ft=wt[bt]).obsSet,$e.mutatedParts)&&(ee(Kt,Ft),Ft.subscribers.forEach(function(Qt){return Ye.add(Qt)}));else if(0<ot.length){Ve.optimisticOps=Ve.optimisticOps.filter(function(Qt){return Qt.trans!==$e});for(var St=0,Bt=Object.values(Ve.queries.query);St<Bt.length;St++)for(var Kt,Ft,Ut,Zt=0,Lt=(Kt=Bt[St]).slice();Zt<Lt.length;Zt++)(Ft=Lt[Zt]).res!=null&&$e.mutatedParts&&(Ge&&!Ft.dirty?(Ut=Object.isFrozen(Ft.res),Ut=Dp(Ft.res,Ft.req,ot,et,Ft,Ut),Ft.dirty?(ee(Kt,Ft),Ft.subscribers.forEach(function(Qt){return Ye.add(Qt)})):Ut!==Ft.res&&(Ft.res=Ut,Ft.promise=M.resolve({result:Ut}))):(Ft.dirty&&ee(Kt,Ft),Ft.subscribers.forEach(function(Qt){return Ye.add(Qt)})))}}}Ye.forEach(function(Qt){return Qt()})}}},$e.addEventListener("abort",ue(!1),{signal:je}),$e.addEventListener("error",ue(!1),{signal:je}),$e.addEventListener("complete",ue(!0),{signal:je})),$e},table:function(K){var te=T.table(K),ue=te.schema.primaryKey;return r(r({},te),{mutate:function(we){var je=ke.trans;if(ue.outbound||je.db._options.cache==="disabled"||je.explicit||je.idbtrans.mode!=="readwrite")return te.mutate(we);var $e=sl["idb://".concat(j,"/").concat(K)];return $e?(je=te.mutate(we),we.type!=="add"&&we.type!=="put"||!(50<=we.values.length||df(ue,we).some(function(Ge){return Ge==null}))?($e.optimisticOps.push(we),we.mutatedParts&&cf(we.mutatedParts),je.then(function(Ge){0<Ge.numFailures&&(ee($e.optimisticOps,we),(Ge=ny(0,we,Ge))&&$e.optimisticOps.push(Ge),we.mutatedParts&&cf(we.mutatedParts))}),je.catch(function(){ee($e.optimisticOps,we),we.mutatedParts&&cf(we.mutatedParts)})):je.then(function(Ge){var Ye=ny(0,r(r({},we),{values:we.values.map(function(nt,qe){var it;return Ge.failures[qe]?nt:(nt=(it=ue.keyPath)!==null&&it!==void 0&&it.includes(".")?Z(nt):r({},nt),D(nt,ue.keyPath,Ge.results[qe]),nt)})}),Ge);$e.optimisticOps.push(Ye),queueMicrotask(function(){return we.mutatedParts&&cf(we.mutatedParts)})}),je):te.mutate(we)},query:function(we){if(!ll(ke,te)||!ty("query",we))return te.query(we);var je=((Ye=ke.trans)===null||Ye===void 0?void 0:Ye.db._options.cache)==="immutable",qe=ke,$e=qe.requery,Ge=qe.signal,Ye=function(et,ot,Xe,ht){var bt=sl["idb://".concat(et,"/").concat(ot)];if(!bt)return[];if(!(ot=bt.queries[Xe]))return[null,!1,bt,null];var wt=ot[(ht.query?ht.query.index.name:null)||""];if(!wt)return[null,!1,bt,null];switch(Xe){case"query":var St=wt.find(function(Bt){return Bt.req.limit===ht.limit&&Bt.req.values===ht.values&&dc(Bt.req.query.range,ht.query.range)});return St?[St,!0,bt,wt]:[wt.find(function(Bt){return("limit"in Bt.req?Bt.req.limit:1/0)>=ht.limit&&(!ht.values||Bt.req.values)&&Mu(Bt.req.query.range,ht.query.range)}),!1,bt,wt];case"count":return St=wt.find(function(Bt){return dc(Bt.req.query.range,ht.query.range)}),[St,!!St,bt,wt]}}(j,K,"query",we),nt=Ye[0],qe=Ye[1],it=Ye[2],Ve=Ye[3];return nt&&qe?nt.obsSet=we.obsSet:(qe=te.query(we).then(function(et){var ot=et.result;if(nt&&(nt.res=ot),je){for(var Xe=0,ht=ot.length;Xe<ht;++Xe)Object.freeze(ot[Xe]);Object.freeze(ot)}else et.result=Z(ot);return et}).catch(function(et){return Ve&&nt&&ee(Ve,nt),Promise.reject(et)}),nt={obsSet:we.obsSet,promise:qe,subscribers:new Set,type:"query",req:we,dirty:!1},Ve?Ve.push(nt):(Ve=[nt],(it=it||(sl["idb://".concat(j,"/").concat(K)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[we.query.index.name||""]=Ve)),V1(nt,Ve,$e,Ge),nt.promise.then(function(et){return{result:Dp(et.result,we,it==null?void 0:it.optimisticOps,te,nt,je)}})}})}})}};function Pu(T,j){return new Proxy(T,{get:function(K,te,ue){return te==="db"?j:Reflect.get(K,te,ue)}})}var oo=(Fr.prototype.version=function(T){if(isNaN(T)||T<.1)throw new Ce.Type("Given version is not a positive number");if(T=Math.round(10*T)/10,this.idbdb||this._state.isBeingOpened)throw new Ce.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,T);var j=this._versions,K=j.filter(function(te){return te._cfg.version===T})[0];return K||(K=new this.Version(T),j.push(K),j.sort(xp),K.stores({}),this._state.autoSchema=!1,K)},Fr.prototype._whenReady=function(T){var j=this;return this.idbdb&&(this._state.openComplete||ke.letThrough||this._vip)?T():new M(function(K,te){if(j._state.openComplete)return te(new Ce.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void te(new Ce.DatabaseClosed);j.open().catch(Le)}j._state.dbReadyPromise.then(K,te)}).then(T)},Fr.prototype.use=function(T){var j=T.stack,K=T.create,te=T.level,ue=T.name;return ue&&this.unuse({stack:j,name:ue}),T=this._middlewares[j]||(this._middlewares[j]=[]),T.push({stack:j,create:K,level:te??10,name:ue}),T.sort(function(we,je){return we.level-je.level}),this},Fr.prototype.unuse=function(T){var j=T.stack,K=T.name,te=T.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(ue){return te?ue.create!==te:!!K&&ue.name!==K})),this},Fr.prototype.open=function(){var T=this;return ss(ve,function(){return U1(T)})},Fr.prototype._close=function(){var T=this._state,j=Ro.indexOf(this);if(0<=j&&Ro.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}T.isBeingOpened||(T.dbReadyPromise=new M(function(K){T.dbReadyResolve=K}),T.openCanceller=new M(function(K,te){T.cancelOpen=te}))},Fr.prototype.close=function(K){var j=(K===void 0?{disableAutoOpen:!0}:K).disableAutoOpen,K=this._state;j?(K.isBeingOpened&&K.cancelOpen(new Ce.DatabaseClosed),this._close(),K.autoOpen=!1,K.dbOpenError=new Ce.DatabaseClosed):(this._close(),K.autoOpen=this._options.autoOpen||K.isBeingOpened,K.openComplete=!1,K.dbOpenError=null)},Fr.prototype.delete=function(T){var j=this;T===void 0&&(T={disableAutoOpen:!0});var K=0<arguments.length&&typeof arguments[0]!="object",te=this._state;return new M(function(ue,we){function je(){j.close(T);var $e=j._deps.indexedDB.deleteDatabase(j.name);$e.onsuccess=Ae(function(){var Ge,Ye,nt;Ge=j._deps,Ye=j.name,nt=Ge.indexedDB,Ge=Ge.IDBKeyRange,of(nt)||Ye===Js||Ep(nt,Ge).delete(Ye).catch(Le),ue()}),$e.onerror=Bi(we),$e.onblocked=j._fireOnBlocked}if(K)throw new Ce.InvalidArgument("Invalid closeOptions argument to db.delete()");te.isBeingOpened?te.dbReadyPromise.then(je):je()})},Fr.prototype.backendDB=function(){return this.idbdb},Fr.prototype.isOpen=function(){return this.idbdb!==null},Fr.prototype.hasBeenClosed=function(){var T=this._state.dbOpenError;return T&&T.name==="DatabaseClosed"},Fr.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Fr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Fr.prototype,"tables",{get:function(){var T=this;return o(this._allTables).map(function(j){return T._allTables[j]})},enumerable:!1,configurable:!0}),Fr.prototype.transaction=function(){var T=(function(j,K,te){var ue=arguments.length;if(ue<2)throw new Ce.InvalidArgument("Too few arguments");for(var we=new Array(ue-1);--ue;)we[ue-1]=arguments[ue];return te=we.pop(),[j,B(we),te]}).apply(this,arguments);return this._transaction.apply(this,T)},Fr.prototype._transaction=function(T,j,K){var te=this,ue=ke.trans;ue&&ue.db===this&&T.indexOf("!")===-1||(ue=null);var we,je,$e=T.indexOf("?")!==-1;T=T.replace("!","").replace("?","");try{if(je=j.map(function(Ye){if(Ye=Ye instanceof te.Table?Ye.name:Ye,typeof Ye!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ye}),T=="r"||T===$i)we=$i;else{if(T!="rw"&&T!=Nu)throw new Ce.InvalidArgument("Invalid transaction mode: "+T);we=Nu}if(ue){if(ue.mode===$i&&we===Nu){if(!$e)throw new Ce.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ue=null}ue&&je.forEach(function(Ye){if(ue&&ue.storeNames.indexOf(Ye)===-1){if(!$e)throw new Ce.SubTransaction("Table "+Ye+" not included in parent transaction.");ue=null}}),$e&&ue&&!ue.active&&(ue=null)}}catch(Ye){return ue?ue._promise(null,function(nt,qe){qe(Ye)}):qr(Ye)}var Ge=(function Ye(nt,qe,it,Ve,et){return M.resolve().then(function(){var ot=ke.transless||ke,Xe=nt._createTransaction(qe,it,nt._dbSchema,Ve);if(Xe.explicit=!0,ot={trans:Xe,transless:ot},Ve)Xe.idbtrans=Ve.idbtrans;else try{Xe.create(),Xe.idbtrans._explicit=!0,nt._state.PR1398_maxLoop=3}catch(wt){return wt.name===Ne.InvalidState&&nt.isOpen()&&0<--nt._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),nt.close({disableAutoOpen:!1}),nt.open().then(function(){return Ye(nt,qe,it,null,et)})):qr(wt)}var ht,bt=Q(et);return bt&&An(),ot=M.follow(function(){var wt;(ht=et.call(Xe,Xe))&&(bt?(wt=zn.bind(null,null),ht.then(wt,wt)):typeof ht.next=="function"&&typeof ht.throw=="function"&&(ht=ju(ht)))},ot),(ht&&typeof ht.then=="function"?M.resolve(ht).then(function(wt){return Xe.active?wt:qr(new Ce.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ot.then(function(){return ht})).then(function(wt){return Ve&&Xe._resolve(),Xe._completion.then(function(){return wt})}).catch(function(wt){return Xe._reject(wt),qr(wt)})})}).bind(null,this,we,je,ue,K);return ue?ue._promise(we,Ge,"lock"):ke.trans?ss(ke.transless,function(){return te._whenReady(Ge)}):this._whenReady(Ge)},Fr.prototype.table=function(T){if(!h(this._allTables,T))throw new Ce.InvalidTable("Table ".concat(T," does not exist"));return this._allTables[T]},Fr);function Fr(T,j){var K=this;this._middlewares={},this.verno=0;var te=Fr.dependencies;this._options=j=r({addons:Fr.addons,autoOpen:!0,indexedDB:te.indexedDB,IDBKeyRange:te.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},te=j.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var ue,we,je,$e,Ge,Ye={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Le,dbReadyPromise:null,cancelOpen:Le,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen};Ye.dbReadyPromise=new M(function(qe){Ye.dbReadyResolve=qe}),Ye.openCanceller=new M(function(qe,it){Ye.cancelOpen=it}),this._state=Ye,this.name=T,this.on=fs(this,"populate","blocked","versionchange","close",{ready:[xe,Le]}),this.on.ready.subscribe=E(this.on.ready.subscribe,function(qe){return function(it,Ve){Fr.vip(function(){var et,ot=K._state;ot.openComplete?(ot.dbOpenError||M.resolve().then(it),Ve&&qe(it)):ot.onReadyBeingFired?(ot.onReadyBeingFired.push(it),Ve&&qe(it)):(qe(it),et=K,Ve||qe(function Xe(){et.on.ready.unsubscribe(it),et.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(ue=this,ec(ac.prototype,function(ht,Xe){this.db=ue;var Ve=Qs,et=null;if(Xe)try{Ve=Xe()}catch(bt){et=bt}var ot=ht._ctx,Xe=ot.table,ht=Xe.hook.reading.fire;this._ctx={table:Xe,index:ot.index,isPrimKey:!ot.index||Xe.schema.primKey.keyPath&&ot.index===Xe.schema.primKey.name,range:Ve,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:et,or:ot.or,valueMapper:ht!==Ie?ht:null}})),this.Table=(we=this,ec(gp.prototype,function(qe,it,Ve){this.db=we,this._tx=Ve,this.name=qe,this.schema=it,this.hook=we._allTables[qe]?we._allTables[qe].hook:fs(null,{creating:[Te,Le],reading:[V,Ie],updating:[oe,Le],deleting:[le,Le]})})),this.Transaction=(je=this,ec(_p.prototype,function(qe,it,Ve,et,ot){var Xe=this;this.db=je,this.mode=qe,this.storeNames=it,this.schema=Ve,this.chromeTransactionDurability=et,this.idbtrans=null,this.on=fs(this,"complete","error","abort"),this.parent=ot||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new M(function(ht,bt){Xe._resolve=ht,Xe._reject=bt}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(ht){var bt=Xe.active;return Xe.active=!1,Xe.on.error.fire(ht),Xe.parent?Xe.parent._reject(ht):bt&&Xe.idbtrans&&Xe.idbtrans.abort(),qr(ht)})})),this.Version=($e=this,ec(z1.prototype,function(qe){this.db=$e,this._cfg={version:qe,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Ge=this,ec(nl.prototype,function(qe,it,Ve){if(this.db=Ge,this._ctx={table:qe,index:it===":id"?null:it,or:Ve},this._cmp=this._ascending=Un,this._descending=function(et,ot){return Un(ot,et)},this._max=function(et,ot){return 0<Un(et,ot)?et:ot},this._min=function(et,ot){return Un(et,ot)<0?et:ot},this._IDBKeyRange=Ge._deps.IDBKeyRange,!this._IDBKeyRange)throw new Ce.MissingAPI})),this.on("versionchange",function(qe){0<qe.newVersion?console.warn("Another connection wants to upgrade database '".concat(K.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(K.name,"'. Closing db now to resume the delete request.")),K.close({disableAutoOpen:!1})}),this.on("blocked",function(qe){!qe.newVersion||qe.newVersion<qe.oldVersion?console.warn("Dexie.delete('".concat(K.name,"') was blocked")):console.warn("Upgrade '".concat(K.name,"' blocked by other connection holding version ").concat(qe.oldVersion/10))}),this._maxKey=lc(j.IDBKeyRange),this._createTransaction=function(qe,it,Ve,et){return new K.Transaction(qe,it,Ve,K._options.chromeTransactionDurability,et)},this._fireOnBlocked=function(qe){K.on("blocked").fire(qe),Ro.filter(function(it){return it.name===K.name&&it!==K&&!it._state.vcFired}).map(function(it){return it.on("versionchange").fire(qe)})},this.use(ey),this.use(hf),this.use(q1),this.use(H1),this.use(Qg);var nt=new Proxy(this,{get:function(qe,it,Ve){if(it==="_vip")return!0;if(it==="table")return function(ot){return Pu(K.table(ot),nt)};var et=Reflect.get(qe,it,Ve);return et instanceof gp?Pu(et,nt):it==="tables"?et.map(function(ot){return Pu(ot,nt)}):it==="_createTransaction"?function(){return Pu(et.apply(this,arguments),nt)}:et}});this.vip=nt,te.forEach(function(qe){return qe(K)})}var fc,fi=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ry=(pf.prototype.subscribe=function(T,j,K){return this._subscribe(T&&typeof T!="function"?T:{next:T,error:j,complete:K})},pf.prototype[fi]=function(){return this},pf);function pf(T){this._subscribe=T}try{fc={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch{fc={indexedDB:null,IDBKeyRange:null}}function ay(T){var j,K=!1,te=new ry(function(ue){var we=Q(T),je,$e=!1,Ge={},Ye={},nt={get closed(){return $e},unsubscribe:function(){$e||($e=!0,je&&je.abort(),qe&&Ea.storagemutated.unsubscribe(Ve))}};ue.start&&ue.start(nt);var qe=!1,it=function(){return cs(et)},Ve=function(ot){lf(Ge,ot),Ap(Ye,Ge)&&it()},et=function(){var ot,Xe,ht;!$e&&fc.indexedDB&&(Ge={},ot={},je&&je.abort(),je=new AbortController,ht=function(bt){var wt=H();try{we&&An();var St=Xt(T,bt);return St=we?St.finally(zn):St}finally{wt&&z()}}(Xe={subscr:ot,signal:je.signal,requery:it,querier:T,trans:null}),Promise.resolve(ht).then(function(bt){K=!0,j=bt,$e||Xe.signal.aborted||(Ge={},function(wt){for(var St in wt)if(h(wt,St))return;return 1}(Ye=ot)||qe||(Ea(oc,Ve),qe=!0),cs(function(){return!$e&&ue.next&&ue.next(bt)}))},function(bt){K=!1,["DatabaseClosedError","AbortError"].includes(bt==null?void 0:bt.name)||$e||cs(function(){$e||ue.error&&ue.error(bt)})}))};return setTimeout(it,0),nt});return te.hasValue=function(){return K},te.getValue=function(){return j},te}var cl=oo;function jp(T){var j=ms;try{ms=!0,Ea.storagemutated.fire(T),Ip(T,!0)}finally{ms=j}}p(cl,r(r({},Qe),{delete:function(T){return new cl(T,{addons:[]}).delete()},exists:function(T){return new cl(T,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(T){try{return j=cl.dependencies,K=j.indexedDB,j=j.IDBKeyRange,(of(K)?Promise.resolve(K.databases()).then(function(te){return te.map(function(ue){return ue.name}).filter(function(ue){return ue!==Js})}):Ep(K,j).toCollection().primaryKeys()).then(T)}catch{return qr(new Ce.MissingAPI)}var j,K},defineClass:function(){return function(T){l(this,T)}},ignoreTransaction:function(T){return ke.trans?ss(ke.transless,T):T()},vip:Cp,async:function(T){return function(){try{var j=ju(T.apply(this,arguments));return j&&typeof j.then=="function"?j:M.resolve(j)}catch(K){return qr(K)}}},spawn:function(T,j,K){try{var te=ju(T.apply(K,j||[]));return te&&typeof te.then=="function"?te:M.resolve(te)}catch(ue){return qr(ue)}},currentTransaction:{get:function(){return ke.trans||null}},waitFor:function(T,j){return j=M.resolve(typeof T=="function"?cl.ignoreTransaction(T):T).timeout(j||6e4),ke.trans?ke.trans.waitFor(j):j},Promise:M,debug:{get:function(){return Me},set:function(T){Ee(T)}},derive:b,extend:l,props:p,override:E,Events:fs,on:Ea,liveQuery:ay,extendObservabilitySet:lf,getByKeyPath:R,setByKeyPath:D,delByKeyPath:function(T,j){typeof j=="string"?D(T,j,void 0):"length"in j&&[].map.call(j,function(K){D(T,K,void 0)})},shallowClone:O,deepClone:Z,getObjectDiff:uf,cmp:Un,asap:k,minKey:-1/0,addons:[],connections:Ro,errnames:Ne,dependencies:fc,cache:sl,semVer:"4.0.11",version:"4.0.11".split(".").map(function(T){return parseInt(T)}).reduce(function(T,j,K){return T+j/Math.pow(10,2*K)})})),cl.maxKey=lc(cl.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Ea(oc,function(T){ms||(T=new CustomEvent(al,{detail:T}),ms=!0,dispatchEvent(T),ms=!1)}),addEventListener(al,function(T){T=T.detail,ms||jp(T)}));var hc,ms=!1,Ya=function(){};return typeof BroadcastChannel<"u"&&((Ya=function(){(hc=new BroadcastChannel(al)).onmessage=function(T){return T.data&&jp(T.data)}})(),typeof hc.unref=="function"&&hc.unref(),Ea(oc,function(T){ms||hc.postMessage(T)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(T){if(!oo.disableBfCache&&T.persisted){Me&&console.debug("Dexie: handling persisted pagehide"),hc!=null&&hc.close();for(var j=0,K=Ro;j<K.length;j++)K[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(T){!oo.disableBfCache&&T.persisted&&(Me&&console.debug("Dexie: handling persisted pageshow"),Ya(),jp({all:new Ca(-1/0,[[]])}))})),M.rejectionMapper=function(T,j){return!T||T instanceof de||T instanceof TypeError||T instanceof SyntaxError||!T.name||!Fe[T.name]?T:(j=new Fe[T.name](j||T.message,T),"stack"in T&&v(j,"stack",{get:function(){return this.inner.stack}}),j)},Ee(Me),r(oo,Object.freeze({__proto__:null,Dexie:oo,liveQuery:ay,Entity:Kd,cmp:Un,PropModification:rc,replacePrefix:function(T,j){return new rc({replacePrefix:[T,j]})},add:function(T){return new rc({add:T})},remove:function(T){return new rc({remove:T})},default:oo,RangeSet:Ca,mergeRanges:ol,rangesOverlap:Yg}),{default:oo}),oo})}($b)),$b.exports}var Cq=Eq();const r2=si(Cq),h3=Symbol.for("Dexie"),Qb=globalThis[h3]||(globalThis[h3]=r2);if(r2.semVer!==Qb.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${r2.semVer} and ${Qb.semVer}`);const{liveQuery:$1e,mergeRanges:B1e,rangesOverlap:z1e,RangeSet:U1e,cmp:H1e,Entity:q1e,PropModification:V1e,replacePrefix:G1e,add:W1e,remove:K1e}=Qb;class kq extends Qb{constructor(){super("LiteChatDatabase_Rewrite_v1");pi(this,"conversations");pi(this,"interactions");pi(this,"mods");pi(this,"appState");pi(this,"providerConfigs");pi(this,"apiKeys");pi(this,"syncRepos");pi(this,"projects");this.version(6).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl, username",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(5).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &path, parentId, createdAt, updatedAt, name"}),this.version(4).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, name, parentId, createdAt, updatedAt"}),this.version(3).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt, projectId",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl",projects:"++id, &name, parentId, createdAt, updatedAt"}),this.version(2).stores({conversations:"++id, title, createdAt, updatedAt, syncRepoId, lastSyncedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name",syncRepos:"++id, &name, remoteUrl"}),this.version(1).stores({conversations:"++id, title, createdAt, updatedAt",interactions:"++id, conversationId, index, type, status, startedAt, parentId",mods:"++id, &name, enabled, loadOrder",appState:"&key",providerConfigs:"++id, &name, type, isEnabled, apiKeyId",apiKeys:"++id, &name"})}}const dn=new kq,Xu=(e,t=[])=>{const n={...e};return e.createdAt&&!(e.createdAt instanceof Date)&&(n.createdAt=new Date(e.createdAt)),e.updatedAt&&!(e.updatedAt instanceof Date)&&(n.updatedAt=new Date(e.updatedAt)),Array.isArray(t)?t.forEach(r=>{e[r]&&!(e[r]instanceof Date)&&(n[r]=new Date(e[r]))}):console.warn("[ensureDateFields] Expected otherDateFields to be an array, but received:",t),n};class Wt{static async loadConversations(){try{return(await dn.conversations.orderBy("updatedAt").reverse().toArray()).map(n=>Xu(n,["lastSyncedAt"]))}catch(t){throw console.error("PersistenceService: Error loading conversations:",t),t}}static async saveConversation(t){try{const n={...t,syncRepoId:t.syncRepoId??null,lastSyncedAt:t.lastSyncedAt??null,projectId:t.projectId??null};return await dn.conversations.put(n)}catch(n){throw console.error("PersistenceService: Error saving conversation:",n),n}}static async deleteConversation(t){try{await dn.conversations.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting conversation:",n),n}}static async loadInteractionsForConversation(t){try{return(await dn.interactions.where({conversationId:t}).sortBy("index")).map(r=>Xu(r,["startedAt","endedAt"]))}catch(n){throw console.error("PersistenceService: Error loading interactions for conversation:",n),n}}static async saveInteraction(t){try{return await dn.interactions.put(t)}catch(n){throw console.error("PersistenceService: Error saving interaction:",n),n}}static async deleteInteraction(t){try{await dn.interactions.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting interaction:",n),n}}static async deleteInteractionsForConversation(t){try{await dn.interactions.where({conversationId:t}).delete()}catch(n){throw console.error("PersistenceService: Error deleting interactions for conversation:",n),n}}static async loadMods(){try{return(await dn.mods.orderBy("loadOrder").toArray()).map(n=>Xu(n,[]))}catch(t){throw console.error("PersistenceService: Error loading mods:",t),t}}static async saveMod(t){try{return await dn.mods.put(t)}catch(n){throw console.error("PersistenceService: Error saving mod:",n),n}}static async deleteMod(t){try{await dn.mods.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting mod:",n),n}}static async saveSetting(t,n){try{return await dn.appState.put({key:`settings:${t}`,value:n})}catch(r){throw console.error("PersistenceService: Error saving setting:",r),r}}static async loadSetting(t,n){try{const r=await dn.appState.get(`settings:${t}`);return(r==null?void 0:r.value)!==void 0?r.value:n}catch(r){return console.error("PersistenceService: Error loading setting:",r),n}}static async loadProviderConfigs(){var t;try{return(await((t=dn.providerConfigs)==null?void 0:t.toArray())??[]).map(r=>Xu(r,["modelsLastFetchedAt"]))}catch(n){throw console.error("PersistenceService: Error loading provider configs:",n),n}}static async saveProviderConfig(t){try{return await dn.providerConfigs.put(t)}catch(n){throw console.error("PersistenceService: Error saving provider config:",n),n}}static async deleteProviderConfig(t){try{await dn.providerConfigs.delete(t)}catch(n){throw console.error("PersistenceService: Error deleting provider config:",n),n}}static async loadApiKeys(){var t;try{return(await((t=dn.apiKeys)==null?void 0:t.toArray())??[]).map(r=>Xu(r,[]))}catch(n){throw console.error("PersistenceService: Error loading API keys:",n),n}}static async saveApiKey(t){try{return await dn.apiKeys.put(t)}catch(n){throw console.error("PersistenceService: Error saving API key:",n),n}}static async deleteApiKey(t){try{await dn.transaction("rw",[dn.apiKeys,dn.providerConfigs],async()=>{const n=await dn.providerConfigs.where("apiKeyId").equals(t).toArray();if(n.length>0){const r=n.map(a=>dn.providerConfigs.update(a.id,{apiKeyId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked API key ${t} from ${n.length} provider configs.`)}await dn.apiKeys.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting API key:",n),n}}static async loadSyncRepos(){try{return(await dn.syncRepos.toArray()).map(n=>Xu(n,["lastPulledAt","lastPushedAt"]))}catch(t){throw console.error("PersistenceService: Error loading sync repos:",t),t}}static async saveSyncRepo(t){try{return await dn.syncRepos.put(t)}catch(n){throw console.error("PersistenceService: Error saving sync repo:",n),n}}static async deleteSyncRepo(t){try{await dn.transaction("rw",[dn.syncRepos,dn.conversations],async()=>{const n=await dn.conversations.where("syncRepoId").equals(t).toArray();if(n.length>0){const r=n.map(a=>dn.conversations.update(a.id,{syncRepoId:null}));await Promise.all(r),console.log(`PersistenceService: Unlinked SyncRepo ${t} from ${n.length} conversations.`)}await dn.syncRepos.delete(t)})}catch(n){throw console.error("PersistenceService: Error deleting sync repo:",n),n}}static async loadProjects(){try{return(await dn.projects.orderBy("updatedAt").reverse().toArray()).map(n=>Xu(n,[]))}catch(t){throw console.error("PersistenceService: Error loading projects:",t),t}}static async saveProject(t){try{const n={id:t.id,path:t.path,createdAt:t.createdAt,updatedAt:t.updatedAt,name:t.name,parentId:t.parentId??null,systemPrompt:t.systemPrompt??null,modelId:t.modelId??null,temperature:t.temperature??null,metadata:t.metadata?{...t.metadata}:{}};return await dn.projects.put(n)}catch(n){throw console.error("PersistenceService: Error saving project:",n),n}}static async deleteProject(t){try{const n=async r=>{const a=await dn.projects.where("parentId").equals(r).toArray();for(const o of a)await n(o.id);const i=await dn.conversations.where("projectId").equals(r).toArray();if(i.length>0){const o=i.map(s=>dn.conversations.update(s.id,{projectId:null}));await Promise.all(o),console.log(`PersistenceService: Unlinked Project ${r} from ${i.length} conversations.`)}await dn.projects.delete(r),console.log(`PersistenceService: Deleted Project ${r}`)};await dn.transaction("rw",[dn.projects,dn.conversations],async()=>{await n(t)})}catch(n){throw console.error("PersistenceService: Error deleting project:",n),n}}static async clearAllData(){try{await dn.transaction("rw",[dn.conversations,dn.interactions,dn.mods,dn.appState,dn.providerConfigs,dn.apiKeys,dn.syncRepos,dn.projects],async()=>{await dn.interactions.clear(),await dn.conversations.clear(),await dn.projects.clear(),await dn.mods.clear(),await dn.appState.clear(),await dn.providerConfigs.clear(),await dn.apiKeys.clear(),await dn.syncRepos.clear()}),console.log("PersistenceService: All data cleared.")}catch(t){throw console.error("PersistenceService: Error clearing all data:",t),t}}}function Tq(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map(function(a){a(n)}),(r=e.get("*"))&&r.slice().map(function(a){a(t,n)})}}}const Ct=Tq();var xt=(e=>(e.APP_LOADED="app:loaded",e.MOD_LOADED="mod:loaded",e.MOD_ERROR="mod:error",e.CONVERSATION_SELECTED="conversation:selected",e.CONVERSATION_ADDED="conversation:added",e.CONVERSATION_UPDATED="conversation:updated",e.CONVERSATION_DELETED="conversation:deleted",e.PROJECT_SELECTED="project:selected",e.PROJECT_ADDED="project:added",e.PROJECT_UPDATED="project:updated",e.PROJECT_DELETED="project:deleted",e.INTERACTION_STARTED="interaction:started",e.INTERACTION_STREAM_CHUNK="interaction:stream_chunk",e.INTERACTION_COMPLETED="interaction:completed",e.PROMPT_SUBMITTED="prompt:submitted",e.PROMPT_INPUT_CHANGE="prompt:input_change",e.SETTINGS_CHANGED="settings:changed",e.PROVIDER_CONFIG_CHANGED="provider:config_changed",e.API_KEY_CHANGED="provider:api_key_changed",e.MODEL_SELECTION_CHANGED="provider:model_selection_changed",e.VFS_FILE_WRITTEN="vfs:file_written",e.VFS_FILE_READ="vfs:file_read",e.VFS_FILE_DELETED="vfs:file_deleted",e.VFS_CONTEXT_CHANGED="vfs:context_changed",e.SYNC_REPO_CHANGED="sync:repo_changed",e.CONVERSATION_SYNC_STATUS_CHANGED="sync:conversation_status_changed",e.REPO_INIT_STATUS_CHANGED="sync:repo_init_status_changed",e.ATTACHED_FILES_CHANGED="input:attached_files_changed",e.PROMPT_PARAMS_CHANGED="input:prompt_params_changed",e.INTERACTION_STATUS_CHANGED="interaction:status_changed",e.CONTEXT_CHANGED="ui:context_changed",e))(xt||{}),ev=(e=>(e.PROMPT_TURN_FINALIZE="middleware:prompt:turnFinalize",e.INTERACTION_BEFORE_START="middleware:interaction:beforeStart",e.INTERACTION_PROCESS_CHUNK="middleware:interaction:processChunk",e))(ev||{});const or=es(ts((e,t)=>({interactions:[],currentConversationId:null,streamingInteractionIds:[],activeStreamBuffers:{},error:null,status:"idle",loadInteractions:async n=>{if(!n){t().clearInteractions();return}const r=t().status;e({status:"loading",error:null,interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},currentConversationId:n}),r!=="loading"&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"loading"});try{const a=await Wt.loadInteractionsForConversation(n);a.sort((i,o)=>i.index-o.index),e({interactions:a,status:"idle"}),Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"idle"})}catch(a){console.error("InteractionStore: Error loading interactions",a),e({error:"Failed load interactions",status:"error"}),Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"error"})}},_addInteractionToState:n=>{e(r=>{if(!r.interactions.some(a=>a.id===n.id))r.interactions.push(n),r.interactions.sort((a,i)=>a.index-i.index);else{console.warn(`InteractionStore: Interaction ${n.id} already exists. Updating instead.`);const a=r.interactions.findIndex(i=>i.id===n.id);a!==-1&&(r.interactions[a]={...r.interactions[a],...n})}})},_updateInteractionInState:(n,r)=>{e(a=>{const i=a.interactions.findIndex(o=>o.id===n);if(i!==-1){const o=a.interactions[i];let s={...o.metadata||{}};r.metadata&&(s={...s,...r.metadata},r.metadata.toolCalls!==void 0&&Array.isArray(r.metadata.toolCalls)&&(s.toolCalls=[...r.metadata.toolCalls]),r.metadata.toolResults!==void 0&&Array.isArray(r.metadata.toolResults)&&(s.toolResults=[...r.metadata.toolResults]));const l={...o,...r,metadata:s};"response"in r&&(l.response=r.response),a.interactions[i]=l}else console.warn(`InteractionStore: Interaction ${n} not found for sync state update.`)})},appendInteractionResponseChunk:(n,r)=>{e(a=>{a.streamingInteractionIds.includes(n)&&(a.activeStreamBuffers[n]=(a.activeStreamBuffers[n]||"")+r)})},_removeInteractionFromState:n=>{e(r=>{r.interactions=r.interactions.filter(a=>a.id!==n)})},setCurrentConversationId:async n=>{t().currentConversationId!==n?(console.log(`InteractionStore: Setting current conversation ID to ${n}`),n?await t().loadInteractions(n):t().clearInteractions()):console.log(`InteractionStore: Conversation ID ${n} is already current.`)},clearInteractions:()=>{console.log("InteractionStore: Clearing interactions.");const n=t().status;e({interactions:[],streamingInteractionIds:[],activeStreamBuffers:{},status:"idle",error:null,currentConversationId:null}),n!=="idle"&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"idle"})},setError:n=>{const r=t().status;let a="idle";e(i=>{i.error=n,n?(a="error",i.status="error"):i.status==="error"?(a=i.streamingInteractionIds.length>0?"streaming":"idle",i.status=a):a=i.status}),r!==a&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:a})},setStatus:n=>{t().status!==n&&(e({status:n}),Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:n}))},_addStreamingId:n=>{let r=!1;e(a=>{a.streamingInteractionIds.includes(n)||(a.streamingInteractionIds.push(n),a.activeStreamBuffers[n]="",a.streamingInteractionIds.length===1&&(a.status="streaming",r=!0),a.error=null)}),r&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:"streaming"})},_removeStreamingId:n=>{let r=!1;e(a=>{const i=a.streamingInteractionIds.indexOf(n);i!==-1&&(a.streamingInteractionIds.splice(i,1),delete a.activeStreamBuffers[n],console.log(`InteractionStore: Cleaned up buffer for ${n}.`),a.streamingInteractionIds.length===0&&a.status==="streaming"&&(a.status=a.error?"error":"idle",r=!0))}),r&&Ct.emit(xt.INTERACTION_STATUS_CHANGED,{status:t().status})}}))),Va=es(ts(e=>({isChatControlPanelOpen:{},isPromptControlPanelOpen:{},isSidebarCollapsed:!1,globalLoading:!1,globalError:null,focusInputOnNextRender:!1,initialSettingsTab:null,initialSettingsSubTab:null,isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null,toggleChatControlPanel:(t,n)=>{e(r=>{r.isChatControlPanelOpen[t]=n??!r.isChatControlPanelOpen[t],t==="settingsModal"&&!r.isChatControlPanelOpen[t]&&(r.initialSettingsTab=null,r.initialSettingsSubTab=null)})},togglePromptControlPanel:(t,n)=>{e(r=>{r.isPromptControlPanelOpen[t]=n??!r.isPromptControlPanelOpen[t]})},toggleSidebar:t=>{console.log("toggleSidebar called :",t),e(n=>{n.isSidebarCollapsed=t??!n.isSidebarCollapsed})},setGlobalLoading:t=>{e({globalLoading:t})},setGlobalError:t=>{e({globalError:t})},setFocusInputFlag:t=>{e({focusInputOnNextRender:t})},setInitialSettingsTabs:(t,n=null)=>{e({initialSettingsTab:t,initialSettingsSubTab:n})},clearInitialSettingsTabs:()=>{e({initialSettingsTab:null,initialSettingsSubTab:null})},openProjectSettingsModal:t=>{e({isProjectSettingsModalOpen:!0,projectSettingsModalTargetId:t})},closeProjectSettingsModal:()=>{e({isProjectSettingsModalOpen:!1,projectSettingsModalTargetId:null})}}))),Aq="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Eo=(e=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(e|=0));for(;e--;)t+=Aq[n[e]&63];return t};const Xc=es(ts((e,t)=>({attachedFilesMetadata:[],addAttachedFile:n=>{let r=!1;e(a=>{if(a.attachedFilesMetadata.some(o=>o.source==="direct"&&n.source==="direct"?o.name===n.name&&o.size===n.size:o.source==="vfs"&&n.source==="vfs"?o.path===n.path:!1))console.warn(`InputStore: File "${n.name}" (source: ${n.source}) already attached. Skipping.`);else{const o={id:Eo(),...n};a.attachedFilesMetadata.push(o),r=!0}}),r&&Ct.emit(xt.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},removeAttachedFile:n=>{let r=!1;e(a=>{const i=a.attachedFilesMetadata.length;a.attachedFilesMetadata=a.attachedFilesMetadata.filter(o=>o.id!==n),r=a.attachedFilesMetadata.length<i}),r&&Ct.emit(xt.ATTACHED_FILES_CHANGED,{files:t().attachedFilesMetadata})},clearAttachedFiles:()=>{const n=t().attachedFilesMetadata.length>0;e({attachedFilesMetadata:[]}),n&&Ct.emit(xt.ATTACHED_FILES_CHANGED,{files:[]})}}))),fD=new Set([".txt",".md",".markdown",".json",".js",".ts",".jsx",".tsx",".html",".htm",".css",".scss",".less",".py",".pyw",".java",".c",".cpp",".h",".hpp",".cs",".go",".php",".rb",".swift",".kt",".kts",".rs",".toml",".yaml",".yml",".xml",".sh",".bash",".zsh",".bat",".cmd",".ps1",".gitignore",".gitattributes",".env",".log",".csv",".tsv",".ini",".cfg",".conf",".sql",".dockerfile","dockerfile",".mod",".sum",".csproj",".vbproj",".fsproj",".sln",".props",".targets",".gradle",".kts",".pom",".rst",".tex",".bib",".r",".rmd",".pl",".pm",".lua",".dart",".diff",".patch",".applescript",".properties",".http",".rest",".tf",".tfvars",".hcl",".rego",".liquid",".erb",".jinja",".j2",".mustache",".hbs",".pug",".haml",".slim",".svelte",".vue",".astro",".svg",".webmanifest",".vtt",".srt",".sbv",".ass",".ssa",".config",".mdx",".nfo",".diz"]);Object.freeze(fD);const TC=(e,t)=>{if(!e)return!1;const n=e.toLowerCase();if(t!=null&&t.startsWith("text/")||t==="application/json"||t==="application/xml"||t==="application/javascript"||t==="application/typescript"||t==="application/yaml"||t==="application/toml"||t==="application/sql"||t==="application/x-sh"||t==="application/x-httpd-php"||t==="application/x-python"||t==="application/x-ruby"||t==="image/svg+xml")return!0;const r="."+n.split(".").pop();return fD.has(r)};var hD="vercel.ai.error",Nq=Symbol.for(hD),pD,Rq=class mD extends Error{constructor({name:t,message:n,cause:r}){super(n),this[pD]=!0,this.name=t,this.cause=r}static isInstance(t){return mD.hasMarker(t,hD)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};pD=Nq;var Tn=Rq,gD="AI_APICallError",yD=`vercel.ai.error.${gD}`,Iq=Symbol.for(yD),bD,va=class extends Tn{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:gD,message:t,cause:s}),this[bD]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=u}static isInstance(t){return Tn.hasMarker(t,yD)}};bD=Iq;var vD="AI_EmptyResponseBodyError",wD=`vercel.ai.error.${vD}`,Oq=Symbol.for(wD),_D,AC=class extends Tn{constructor({message:t="Empty response body"}={}){super({name:vD,message:t}),this[_D]=!0}static isInstance(t){return Tn.hasMarker(t,wD)}};_D=Oq;function X0(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var xD="AI_InvalidArgumentError",SD=`vercel.ai.error.${xD}`,Dq=Symbol.for(SD),ED,NC=class extends Tn{constructor({message:t,cause:n,argument:r}){super({name:xD,message:t,cause:n}),this[ED]=!0,this.argument=r}static isInstance(t){return Tn.hasMarker(t,SD)}};ED=Dq;var CD="AI_InvalidPromptError",kD=`vercel.ai.error.${CD}`,jq=Symbol.for(kD),TD,kl=class extends Tn{constructor({prompt:t,message:n,cause:r}){super({name:CD,message:`Invalid prompt: ${n}`,cause:r}),this[TD]=!0,this.prompt=t}static isInstance(t){return Tn.hasMarker(t,kD)}};TD=jq;var AD="AI_InvalidResponseDataError",ND=`vercel.ai.error.${AD}`,Mq=Symbol.for(ND),RD,th=class extends Tn{constructor({data:t,message:n=`Invalid response data: ${JSON.stringify(t)}.`}){super({name:AD,message:n}),this[RD]=!0,this.data=t}static isInstance(t){return Tn.hasMarker(t,ND)}};RD=Mq;var ID="AI_JSONParseError",OD=`vercel.ai.error.${ID}`,Pq=Symbol.for(OD),DD,Jc=class extends Tn{constructor({text:t,cause:n}){super({name:ID,message:`JSON parsing failed: Text: ${t}.
Error message: ${X0(n)}`,cause:n}),this[DD]=!0,this.text=t}static isInstance(t){return Tn.hasMarker(t,OD)}};DD=Pq;var jD="AI_LoadAPIKeyError",MD=`vercel.ai.error.${jD}`,Fq=Symbol.for(MD),PD,rb=class extends Tn{constructor({message:t}){super({name:jD,message:t}),this[PD]=!0}static isInstance(t){return Tn.hasMarker(t,MD)}};PD=Fq;var FD="AI_TooManyEmbeddingValuesForCallError",LD=`vercel.ai.error.${FD}`,Lq=Symbol.for(LD),$D,RC=class extends Tn{constructor(t){super({name:FD,message:`Too many values for a single embedding call. The ${t.provider} model "${t.modelId}" can only embed up to ${t.maxEmbeddingsPerCall} values per call, but ${t.values.length} values were provided.`}),this[$D]=!0,this.provider=t.provider,this.modelId=t.modelId,this.maxEmbeddingsPerCall=t.maxEmbeddingsPerCall,this.values=t.values}static isInstance(t){return Tn.hasMarker(t,LD)}};$D=Lq;var BD="AI_TypeValidationError",zD=`vercel.ai.error.${BD}`,$q=Symbol.for(zD),UD,Bq=class a2 extends Tn{constructor({value:t,cause:n}){super({name:BD,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${X0(n)}`,cause:n}),this[UD]=!0,this.value=t}static isInstance(t){return Tn.hasMarker(t,zD)}static wrap({value:t,cause:n}){return a2.isInstance(n)&&n.value===t?n:new a2({value:t,cause:n})}};UD=$q;var Qc=Bq,HD="AI_UnsupportedFunctionalityError",qD=`vercel.ai.error.${HD}`,zq=Symbol.for(qD),VD,Cr=class extends Tn{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:HD,message:n}),this[VD]=!0,this.functionality=t}static isInstance(t){return Tn.hasMarker(t,qD)}};VD=zq;let Uq=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var IC={},bw={};bw.byteLength=Vq;bw.toByteArray=Wq;bw.fromByteArray=Yq;var Ns=[],yo=[],Hq=typeof Uint8Array<"u"?Uint8Array:Array,Fx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var $f=0,qq=Fx.length;$f<qq;++$f)Ns[$f]=Fx[$f],yo[Fx.charCodeAt($f)]=$f;yo[45]=62;yo[95]=63;function GD(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function Vq(e){var t=GD(e),n=t[0],r=t[1];return(n+r)*3/4-r}function Gq(e,t,n){return(t+n)*3/4-n}function Wq(e){var t,n=GD(e),r=n[0],a=n[1],i=new Hq(Gq(e,r,a)),o=0,s=a>0?r-4:r,l;for(l=0;l<s;l+=4)t=yo[e.charCodeAt(l)]<<18|yo[e.charCodeAt(l+1)]<<12|yo[e.charCodeAt(l+2)]<<6|yo[e.charCodeAt(l+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return a===2&&(t=yo[e.charCodeAt(l)]<<2|yo[e.charCodeAt(l+1)]>>4,i[o++]=t&255),a===1&&(t=yo[e.charCodeAt(l)]<<10|yo[e.charCodeAt(l+1)]<<4|yo[e.charCodeAt(l+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function Kq(e){return Ns[e>>18&63]+Ns[e>>12&63]+Ns[e>>6&63]+Ns[e&63]}function Zq(e,t,n){for(var r,a=[],i=t;i<n;i+=3)r=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(e[i+2]&255),a.push(Kq(r));return a.join("")}function Yq(e){for(var t,n=e.length,r=n%3,a=[],i=16383,o=0,s=n-r;o<s;o+=i)a.push(Zq(e,o,o+i>s?s:o+i));return r===1?(t=e[n-1],a.push(Ns[t>>2]+Ns[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],a.push(Ns[t>>10]+Ns[t>>4&63]+Ns[t<<2&63]+"=")),a.join("")}var OC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */OC.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,l=(1<<s)-1,u=l>>1,d=-7,h=n?a-1:0,p=n?-1:1,g=e[t+h];for(h+=p,i=g&(1<<-d)-1,g>>=-d,d+=s;d>0;i=i*256+e[t+h],h+=p,d-=8);for(o=i&(1<<-d)-1,i>>=-d,d+=r;d>0;o=o*256+e[t+h],h+=p,d-=8);if(i===0)i=1-u;else{if(i===l)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(g?-1:1)*o*Math.pow(2,i-r)};OC.write=function(e,t,n,r,a,i){var o,s,l,u=i*8-a-1,d=(1<<u)-1,h=d>>1,p=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:i-1,v=r?1:-1,b=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=p/l:t+=p*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=d?(s=0,o=d):o+h>=1?(s=(t*l-1)*Math.pow(2,a),o=o+h):(s=t*Math.pow(2,h-1)*Math.pow(2,a),o=0));a>=8;e[n+g]=s&255,g+=v,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+g]=o&255,g+=v,o/=256,u-=8);e[n+g-v]|=b*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=bw,n=OC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=d,e.SlowBuffer=k,e.INSPECT_MAX_BYTES=50;const a=2147483647;e.kMaxLength=a;const{Uint8Array:i,ArrayBuffer:o,SharedArrayBuffer:s}=globalThis;d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ye=new i(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,i.prototype),Object.setPrototypeOf(ye,I),ye.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(ye){if(ye>a)throw new RangeError('The value "'+ye+'" is invalid for option "size"');const I=new i(ye);return Object.setPrototypeOf(I,d.prototype),I}function d(ye,I,G){if(typeof ye=="number"){if(typeof I=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(ye)}return h(ye,I,G)}d.poolSize=8192;function h(ye,I,G){if(typeof ye=="string")return b(ye,I);if(o.isView(ye))return x(ye);if(ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye);if(at(ye,o)||ye&&at(ye.buffer,o)||typeof s<"u"&&(at(ye,s)||ye&&at(ye.buffer,s)))return S(ye,I,G);if(typeof ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const fe=ye.valueOf&&ye.valueOf();if(fe!=null&&fe!==ye)return d.from(fe,I,G);const Oe=E(ye);if(Oe)return Oe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ye[Symbol.toPrimitive]=="function")return d.from(ye[Symbol.toPrimitive]("string"),I,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ye)}d.from=function(ye,I,G){return h(ye,I,G)},Object.setPrototypeOf(d.prototype,i.prototype),Object.setPrototypeOf(d,i);function p(ye){if(typeof ye!="number")throw new TypeError('"size" argument must be of type number');if(ye<0)throw new RangeError('The value "'+ye+'" is invalid for option "size"')}function g(ye,I,G){return p(ye),ye<=0?u(ye):I!==void 0?typeof G=="string"?u(ye).fill(I,G):u(ye).fill(I):u(ye)}d.alloc=function(ye,I,G){return g(ye,I,G)};function v(ye){return p(ye),u(ye<0?0:C(ye)|0)}d.allocUnsafe=function(ye){return v(ye)},d.allocUnsafeSlow=function(ye){return v(ye)};function b(ye,I){if((typeof I!="string"||I==="")&&(I="utf8"),!d.isEncoding(I))throw new TypeError("Unknown encoding: "+I);const G=R(ye,I)|0;let fe=u(G);const Oe=fe.write(ye,I);return Oe!==G&&(fe=fe.slice(0,Oe)),fe}function _(ye){const I=ye.length<0?0:C(ye.length)|0,G=u(I);for(let fe=0;fe<I;fe+=1)G[fe]=ye[fe]&255;return G}function x(ye){if(at(ye,i)){const I=new i(ye);return S(I.buffer,I.byteOffset,I.byteLength)}return _(ye)}function S(ye,I,G){if(I<0||ye.byteLength<I)throw new RangeError('"offset" is outside of buffer bounds');if(ye.byteLength<I+(G||0))throw new RangeError('"length" is outside of buffer bounds');let fe;return I===void 0&&G===void 0?fe=new i(ye):G===void 0?fe=new i(ye,I):fe=new i(ye,I,G),Object.setPrototypeOf(fe,d.prototype),fe}function E(ye){if(d.isBuffer(ye)){const I=C(ye.length)|0,G=u(I);return G.length===0||ye.copy(G,0,0,I),G}if(ye.length!==void 0)return typeof ye.length!="number"||_t(ye.length)?u(0):_(ye);if(ye.type==="Buffer"&&Array.isArray(ye.data))return _(ye.data)}function C(ye){if(ye>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ye|0}function k(ye){return+ye!=ye&&(ye=0),d.alloc(+ye)}d.isBuffer=function(I){return I!=null&&I._isBuffer===!0&&I!==d.prototype},d.compare=function(I,G){if(at(I,i)&&(I=d.from(I,I.offset,I.byteLength)),at(G,i)&&(G=d.from(G,G.offset,G.byteLength)),!d.isBuffer(I)||!d.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(I===G)return 0;let fe=I.length,Oe=G.length;for(let ve=0,ke=Math.min(fe,Oe);ve<ke;++ve)if(I[ve]!==G[ve]){fe=I[ve],Oe=G[ve];break}return fe<Oe?-1:Oe<fe?1:0},d.isEncoding=function(I){switch(String(I).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(I,G){if(!Array.isArray(I))throw new TypeError('"list" argument must be an Array of Buffers');if(I.length===0)return d.alloc(0);let fe;if(G===void 0)for(G=0,fe=0;fe<I.length;++fe)G+=I[fe].length;const Oe=d.allocUnsafe(G);let ve=0;for(fe=0;fe<I.length;++fe){let ke=I[fe];if(at(ke,i))ve+ke.length>Oe.length?(d.isBuffer(ke)||(ke=d.from(ke)),ke.copy(Oe,ve)):i.prototype.set.call(Oe,ke,ve);else if(d.isBuffer(ke))ke.copy(Oe,ve);else throw new TypeError('"list" argument must be an Array of Buffers');ve+=ke.length}return Oe};function R(ye,I){if(d.isBuffer(ye))return ye.length;if(o.isView(ye)||at(ye,o))return ye.byteLength;if(typeof ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ye);const G=ye.length,fe=arguments.length>2&&arguments[2]===!0;if(!fe&&G===0)return 0;let Oe=!1;for(;;)switch(I){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return xe(ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G*2;case"hex":return G>>>1;case"base64":return We(ye).length;default:if(Oe)return fe?-1:xe(ye).length;I=(""+I).toLowerCase(),Oe=!0}}d.byteLength=R;function D(ye,I,G){let fe=!1;if((I===void 0||I<0)&&(I=0),I>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0,I>>>=0,G<=I))return"";for(ye||(ye="utf8");;)switch(ye){case"hex":return X(this,I,G);case"utf8":case"utf-8":return re(this,I,G);case"ascii":return U(this,I,G);case"latin1":case"binary":return Q(this,I,G);case"base64":return ae(this,I,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,I,G);default:if(fe)throw new TypeError("Unknown encoding: "+ye);ye=(ye+"").toLowerCase(),fe=!0}}d.prototype._isBuffer=!0;function O(ye,I,G){const fe=ye[I];ye[I]=ye[G],ye[G]=fe}d.prototype.swap16=function(){const I=this.length;if(I%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let G=0;G<I;G+=2)O(this,G,G+1);return this},d.prototype.swap32=function(){const I=this.length;if(I%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let G=0;G<I;G+=4)O(this,G,G+3),O(this,G+1,G+2);return this},d.prototype.swap64=function(){const I=this.length;if(I%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let G=0;G<I;G+=8)O(this,G,G+7),O(this,G+1,G+6),O(this,G+2,G+5),O(this,G+3,G+4);return this},d.prototype.toString=function(){const I=this.length;return I===0?"":arguments.length===0?re(this,0,I):D.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(I){if(!d.isBuffer(I))throw new TypeError("Argument must be a Buffer");return this===I?!0:d.compare(this,I)===0},d.prototype.inspect=function(){let I="";const G=e.INSPECT_MAX_BYTES;return I=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(I+=" ... "),"<Buffer "+I+">"},r&&(d.prototype[r]=d.prototype.inspect),d.prototype.compare=function(I,G,fe,Oe,ve){if(at(I,i)&&(I=d.from(I,I.offset,I.byteLength)),!d.isBuffer(I))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof I);if(G===void 0&&(G=0),fe===void 0&&(fe=I?I.length:0),Oe===void 0&&(Oe=0),ve===void 0&&(ve=this.length),G<0||fe>I.length||Oe<0||ve>this.length)throw new RangeError("out of range index");if(Oe>=ve&&G>=fe)return 0;if(Oe>=ve)return-1;if(G>=fe)return 1;if(G>>>=0,fe>>>=0,Oe>>>=0,ve>>>=0,this===I)return 0;let ke=ve-Oe,ce=fe-G;const ft=Math.min(ke,ce),vt=this.slice(Oe,ve),M=I.slice(G,fe);for(let Be=0;Be<ft;++Be)if(vt[Be]!==M[Be]){ke=vt[Be],ce=M[Be];break}return ke<ce?-1:ce<ke?1:0};function L(ye,I,G,fe,Oe){if(ye.length===0)return-1;if(typeof G=="string"?(fe=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),G=+G,_t(G)&&(G=Oe?0:ye.length-1),G<0&&(G=ye.length+G),G>=ye.length){if(Oe)return-1;G=ye.length-1}else if(G<0)if(Oe)G=0;else return-1;if(typeof I=="string"&&(I=d.from(I,fe)),d.isBuffer(I))return I.length===0?-1:B(ye,I,G,fe,Oe);if(typeof I=="number")return I=I&255,typeof i.prototype.indexOf=="function"?Oe?i.prototype.indexOf.call(ye,I,G):i.prototype.lastIndexOf.call(ye,I,G):B(ye,[I],G,fe,Oe);throw new TypeError("val must be string, number or Buffer")}function B(ye,I,G,fe,Oe){let ve=1,ke=ye.length,ce=I.length;if(fe!==void 0&&(fe=String(fe).toLowerCase(),fe==="ucs2"||fe==="ucs-2"||fe==="utf16le"||fe==="utf-16le")){if(ye.length<2||I.length<2)return-1;ve=2,ke/=2,ce/=2,G/=2}function ft(M,Be){return ve===1?M[Be]:M.readUInt16BE(Be*ve)}let vt;if(Oe){let M=-1;for(vt=G;vt<ke;vt++)if(ft(ye,vt)===ft(I,M===-1?0:vt-M)){if(M===-1&&(M=vt),vt-M+1===ce)return M*ve}else M!==-1&&(vt-=vt-M),M=-1}else for(G+ce>ke&&(G=ke-ce),vt=G;vt>=0;vt--){let M=!0;for(let Be=0;Be<ce;Be++)if(ft(ye,vt+Be)!==ft(I,Be)){M=!1;break}if(M)return vt}return-1}d.prototype.includes=function(I,G,fe){return this.indexOf(I,G,fe)!==-1},d.prototype.indexOf=function(I,G,fe){return L(this,I,G,fe,!0)},d.prototype.lastIndexOf=function(I,G,fe){return L(this,I,G,fe,!1)};function Y(ye,I,G,fe){G=Number(G)||0;const Oe=ye.length-G;fe?(fe=Number(fe),fe>Oe&&(fe=Oe)):fe=Oe;const ve=I.length;fe>ve/2&&(fe=ve/2);let ke;for(ke=0;ke<fe;++ke){const ce=parseInt(I.substr(ke*2,2),16);if(_t(ce))return ke;ye[G+ke]=ce}return ke}function F(ye,I,G,fe){return kt(xe(I,ye.length-G),ye,G,fe)}function Z(ye,I,G,fe){return kt(Me(I),ye,G,fe)}function q(ye,I,G,fe){return kt(We(I),ye,G,fe)}function ne(ye,I,G,fe){return kt(Ee(I,ye.length-G),ye,G,fe)}d.prototype.write=function(I,G,fe,Oe){if(G===void 0)Oe="utf8",fe=this.length,G=0;else if(fe===void 0&&typeof G=="string")Oe=G,fe=this.length,G=0;else if(isFinite(G))G=G>>>0,isFinite(fe)?(fe=fe>>>0,Oe===void 0&&(Oe="utf8")):(Oe=fe,fe=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ve=this.length-G;if((fe===void 0||fe>ve)&&(fe=ve),I.length>0&&(fe<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");Oe||(Oe="utf8");let ke=!1;for(;;)switch(Oe){case"hex":return Y(this,I,G,fe);case"utf8":case"utf-8":return F(this,I,G,fe);case"ascii":case"latin1":case"binary":return Z(this,I,G,fe);case"base64":return q(this,I,G,fe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,I,G,fe);default:if(ke)throw new TypeError("Unknown encoding: "+Oe);Oe=(""+Oe).toLowerCase(),ke=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ae(ye,I,G){return I===0&&G===ye.length?t.fromByteArray(ye):t.fromByteArray(ye.slice(I,G))}function re(ye,I,G){G=Math.min(ye.length,G);const fe=[];let Oe=I;for(;Oe<G;){const ve=ye[Oe];let ke=null,ce=ve>239?4:ve>223?3:ve>191?2:1;if(Oe+ce<=G){let ft,vt,M,Be;switch(ce){case 1:ve<128&&(ke=ve);break;case 2:ft=ye[Oe+1],(ft&192)===128&&(Be=(ve&31)<<6|ft&63,Be>127&&(ke=Be));break;case 3:ft=ye[Oe+1],vt=ye[Oe+2],(ft&192)===128&&(vt&192)===128&&(Be=(ve&15)<<12|(ft&63)<<6|vt&63,Be>2047&&(Be<55296||Be>57343)&&(ke=Be));break;case 4:ft=ye[Oe+1],vt=ye[Oe+2],M=ye[Oe+3],(ft&192)===128&&(vt&192)===128&&(M&192)===128&&(Be=(ve&15)<<18|(ft&63)<<12|(vt&63)<<6|M&63,Be>65535&&Be<1114112&&(ke=Be))}}ke===null?(ke=65533,ce=1):ke>65535&&(ke-=65536,fe.push(ke>>>10&1023|55296),ke=56320|ke&1023),fe.push(ke),Oe+=ce}return ie(fe)}const ee=4096;function ie(ye){const I=ye.length;if(I<=ee)return String.fromCharCode.apply(String,ye);let G="",fe=0;for(;fe<I;)G+=String.fromCharCode.apply(String,ye.slice(fe,fe+=ee));return G}function U(ye,I,G){let fe="";G=Math.min(ye.length,G);for(let Oe=I;Oe<G;++Oe)fe+=String.fromCharCode(ye[Oe]&127);return fe}function Q(ye,I,G){let fe="";G=Math.min(ye.length,G);for(let Oe=I;Oe<G;++Oe)fe+=String.fromCharCode(ye[Oe]);return fe}function X(ye,I,G){const fe=ye.length;(!I||I<0)&&(I=0),(!G||G<0||G>fe)&&(G=fe);let Oe="";for(let ve=I;ve<G;++ve)Oe+=jt[ye[ve]];return Oe}function de(ye,I,G){const fe=ye.slice(I,G);let Oe="";for(let ve=0;ve<fe.length-1;ve+=2)Oe+=String.fromCharCode(fe[ve]+fe[ve+1]*256);return Oe}d.prototype.slice=function(I,G){const fe=this.length;I=~~I,G=G===void 0?fe:~~G,I<0?(I+=fe,I<0&&(I=0)):I>fe&&(I=fe),G<0?(G+=fe,G<0&&(G=0)):G>fe&&(G=fe),G<I&&(G=I);const Oe=this.subarray(I,G);return Object.setPrototypeOf(Oe,d.prototype),Oe};function be(ye,I,G){if(ye%1!==0||ye<0)throw new RangeError("offset is not uint");if(ye+I>G)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(I,G,fe){I=I>>>0,G=G>>>0,fe||be(I,G,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<G&&(ve*=256);)Oe+=this[I+ke]*ve;return Oe},d.prototype.readUintBE=d.prototype.readUIntBE=function(I,G,fe){I=I>>>0,G=G>>>0,fe||be(I,G,this.length);let Oe=this[I+--G],ve=1;for(;G>0&&(ve*=256);)Oe+=this[I+--G]*ve;return Oe},d.prototype.readUint8=d.prototype.readUInt8=function(I,G){return I=I>>>0,G||be(I,1,this.length),this[I]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(I,G){return I=I>>>0,G||be(I,2,this.length),this[I]|this[I+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(I,G){return I=I>>>0,G||be(I,2,this.length),this[I]<<8|this[I+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(I,G){return I=I>>>0,G||be(I,4,this.length),(this[I]|this[I+1]<<8|this[I+2]<<16)+this[I+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(I,G){return I=I>>>0,G||be(I,4,this.length),this[I]*16777216+(this[I+1]<<16|this[I+2]<<8|this[I+3])},d.prototype.readBigUInt64LE=Dt(function(I){I=I>>>0,Te(I,"offset");const G=this[I],fe=this[I+7];(G===void 0||fe===void 0)&&le(I,this.length-8);const Oe=G+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24,ve=this[++I]+this[++I]*2**8+this[++I]*2**16+fe*2**24;return BigInt(Oe)+(BigInt(ve)<<BigInt(32))}),d.prototype.readBigUInt64BE=Dt(function(I){I=I>>>0,Te(I,"offset");const G=this[I],fe=this[I+7];(G===void 0||fe===void 0)&&le(I,this.length-8);const Oe=G*2**24+this[++I]*2**16+this[++I]*2**8+this[++I],ve=this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+fe;return(BigInt(Oe)<<BigInt(32))+BigInt(ve)}),d.prototype.readIntLE=function(I,G,fe){I=I>>>0,G=G>>>0,fe||be(I,G,this.length);let Oe=this[I],ve=1,ke=0;for(;++ke<G&&(ve*=256);)Oe+=this[I+ke]*ve;return ve*=128,Oe>=ve&&(Oe-=Math.pow(2,8*G)),Oe},d.prototype.readIntBE=function(I,G,fe){I=I>>>0,G=G>>>0,fe||be(I,G,this.length);let Oe=G,ve=1,ke=this[I+--Oe];for(;Oe>0&&(ve*=256);)ke+=this[I+--Oe]*ve;return ve*=128,ke>=ve&&(ke-=Math.pow(2,8*G)),ke},d.prototype.readInt8=function(I,G){return I=I>>>0,G||be(I,1,this.length),this[I]&128?(255-this[I]+1)*-1:this[I]},d.prototype.readInt16LE=function(I,G){I=I>>>0,G||be(I,2,this.length);const fe=this[I]|this[I+1]<<8;return fe&32768?fe|4294901760:fe},d.prototype.readInt16BE=function(I,G){I=I>>>0,G||be(I,2,this.length);const fe=this[I+1]|this[I]<<8;return fe&32768?fe|4294901760:fe},d.prototype.readInt32LE=function(I,G){return I=I>>>0,G||be(I,4,this.length),this[I]|this[I+1]<<8|this[I+2]<<16|this[I+3]<<24},d.prototype.readInt32BE=function(I,G){return I=I>>>0,G||be(I,4,this.length),this[I]<<24|this[I+1]<<16|this[I+2]<<8|this[I+3]},d.prototype.readBigInt64LE=Dt(function(I){I=I>>>0,Te(I,"offset");const G=this[I],fe=this[I+7];(G===void 0||fe===void 0)&&le(I,this.length-8);const Oe=this[I+4]+this[I+5]*2**8+this[I+6]*2**16+(fe<<24);return(BigInt(Oe)<<BigInt(32))+BigInt(G+this[++I]*2**8+this[++I]*2**16+this[++I]*2**24)}),d.prototype.readBigInt64BE=Dt(function(I){I=I>>>0,Te(I,"offset");const G=this[I],fe=this[I+7];(G===void 0||fe===void 0)&&le(I,this.length-8);const Oe=(G<<24)+this[++I]*2**16+this[++I]*2**8+this[++I];return(BigInt(Oe)<<BigInt(32))+BigInt(this[++I]*2**24+this[++I]*2**16+this[++I]*2**8+fe)}),d.prototype.readFloatLE=function(I,G){return I=I>>>0,G||be(I,4,this.length),n.read(this,I,!0,23,4)},d.prototype.readFloatBE=function(I,G){return I=I>>>0,G||be(I,4,this.length),n.read(this,I,!1,23,4)},d.prototype.readDoubleLE=function(I,G){return I=I>>>0,G||be(I,8,this.length),n.read(this,I,!0,52,8)},d.prototype.readDoubleBE=function(I,G){return I=I>>>0,G||be(I,8,this.length),n.read(this,I,!1,52,8)};function _e(ye,I,G,fe,Oe,ve){if(!d.isBuffer(ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(I>Oe||I<ve)throw new RangeError('"value" argument is out of bounds');if(G+fe>ye.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(I,G,fe,Oe){if(I=+I,G=G>>>0,fe=fe>>>0,!Oe){const ce=Math.pow(2,8*fe)-1;_e(this,I,G,fe,ce,0)}let ve=1,ke=0;for(this[G]=I&255;++ke<fe&&(ve*=256);)this[G+ke]=I/ve&255;return G+fe},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(I,G,fe,Oe){if(I=+I,G=G>>>0,fe=fe>>>0,!Oe){const ce=Math.pow(2,8*fe)-1;_e(this,I,G,fe,ce,0)}let ve=fe-1,ke=1;for(this[G+ve]=I&255;--ve>=0&&(ke*=256);)this[G+ve]=I/ke&255;return G+fe},d.prototype.writeUint8=d.prototype.writeUInt8=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,1,255,0),this[G]=I&255,G+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,2,65535,0),this[G]=I&255,this[G+1]=I>>>8,G+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,2,65535,0),this[G]=I>>>8,this[G+1]=I&255,G+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,4,4294967295,0),this[G+3]=I>>>24,this[G+2]=I>>>16,this[G+1]=I>>>8,this[G]=I&255,G+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,4,4294967295,0),this[G]=I>>>24,this[G+1]=I>>>16,this[G+2]=I>>>8,this[G+3]=I&255,G+4};function Pe(ye,I,G,fe,Oe){me(I,fe,Oe,ye,G,7);let ve=Number(I&BigInt(4294967295));ye[G++]=ve,ve=ve>>8,ye[G++]=ve,ve=ve>>8,ye[G++]=ve,ve=ve>>8,ye[G++]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ye[G++]=ke,ke=ke>>8,ye[G++]=ke,ke=ke>>8,ye[G++]=ke,ke=ke>>8,ye[G++]=ke,G}function Ne(ye,I,G,fe,Oe){me(I,fe,Oe,ye,G,7);let ve=Number(I&BigInt(4294967295));ye[G+7]=ve,ve=ve>>8,ye[G+6]=ve,ve=ve>>8,ye[G+5]=ve,ve=ve>>8,ye[G+4]=ve;let ke=Number(I>>BigInt(32)&BigInt(4294967295));return ye[G+3]=ke,ke=ke>>8,ye[G+2]=ke,ke=ke>>8,ye[G+1]=ke,ke=ke>>8,ye[G]=ke,G+8}d.prototype.writeBigUInt64LE=Dt(function(I,G=0){return Pe(this,I,G,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Dt(function(I,G=0){return Ne(this,I,G,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(I,G,fe,Oe){if(I=+I,G=G>>>0,!Oe){const ft=Math.pow(2,8*fe-1);_e(this,I,G,fe,ft-1,-ft)}let ve=0,ke=1,ce=0;for(this[G]=I&255;++ve<fe&&(ke*=256);)I<0&&ce===0&&this[G+ve-1]!==0&&(ce=1),this[G+ve]=(I/ke>>0)-ce&255;return G+fe},d.prototype.writeIntBE=function(I,G,fe,Oe){if(I=+I,G=G>>>0,!Oe){const ft=Math.pow(2,8*fe-1);_e(this,I,G,fe,ft-1,-ft)}let ve=fe-1,ke=1,ce=0;for(this[G+ve]=I&255;--ve>=0&&(ke*=256);)I<0&&ce===0&&this[G+ve+1]!==0&&(ce=1),this[G+ve]=(I/ke>>0)-ce&255;return G+fe},d.prototype.writeInt8=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,1,127,-128),I<0&&(I=255+I+1),this[G]=I&255,G+1},d.prototype.writeInt16LE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,2,32767,-32768),this[G]=I&255,this[G+1]=I>>>8,G+2},d.prototype.writeInt16BE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,2,32767,-32768),this[G]=I>>>8,this[G+1]=I&255,G+2},d.prototype.writeInt32LE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,4,2147483647,-2147483648),this[G]=I&255,this[G+1]=I>>>8,this[G+2]=I>>>16,this[G+3]=I>>>24,G+4},d.prototype.writeInt32BE=function(I,G,fe){return I=+I,G=G>>>0,fe||_e(this,I,G,4,2147483647,-2147483648),I<0&&(I=4294967295+I+1),this[G]=I>>>24,this[G+1]=I>>>16,this[G+2]=I>>>8,this[G+3]=I&255,G+4},d.prototype.writeBigInt64LE=Dt(function(I,G=0){return Pe(this,I,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Dt(function(I,G=0){return Ne(this,I,G,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Re(ye,I,G,fe,Oe,ve){if(G+fe>ye.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function Ce(ye,I,G,fe,Oe){return I=+I,G=G>>>0,Oe||Re(ye,I,G,4),n.write(ye,I,G,fe,23,4),G+4}d.prototype.writeFloatLE=function(I,G,fe){return Ce(this,I,G,!0,fe)},d.prototype.writeFloatBE=function(I,G,fe){return Ce(this,I,G,!1,fe)};function Fe(ye,I,G,fe,Oe){return I=+I,G=G>>>0,Oe||Re(ye,I,G,8),n.write(ye,I,G,fe,52,8),G+8}d.prototype.writeDoubleLE=function(I,G,fe){return Fe(this,I,G,!0,fe)},d.prototype.writeDoubleBE=function(I,G,fe){return Fe(this,I,G,!1,fe)},d.prototype.copy=function(I,G,fe,Oe){if(!d.isBuffer(I))throw new TypeError("argument should be a Buffer");if(fe||(fe=0),!Oe&&Oe!==0&&(Oe=this.length),G>=I.length&&(G=I.length),G||(G=0),Oe>0&&Oe<fe&&(Oe=fe),Oe===fe||I.length===0||this.length===0)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(fe<0||fe>=this.length)throw new RangeError("Index out of range");if(Oe<0)throw new RangeError("sourceEnd out of bounds");Oe>this.length&&(Oe=this.length),I.length-G<Oe-fe&&(Oe=I.length-G+fe);const ve=Oe-fe;return this===I&&typeof i.prototype.copyWithin=="function"?this.copyWithin(G,fe,Oe):i.prototype.set.call(I,this.subarray(fe,Oe),G),ve},d.prototype.fill=function(I,G,fe,Oe){if(typeof I=="string"){if(typeof G=="string"?(Oe=G,G=0,fe=this.length):typeof fe=="string"&&(Oe=fe,fe=this.length),Oe!==void 0&&typeof Oe!="string")throw new TypeError("encoding must be a string");if(typeof Oe=="string"&&!d.isEncoding(Oe))throw new TypeError("Unknown encoding: "+Oe);if(I.length===1){const ke=I.charCodeAt(0);(Oe==="utf8"&&ke<128||Oe==="latin1")&&(I=ke)}}else typeof I=="number"?I=I&255:typeof I=="boolean"&&(I=Number(I));if(G<0||this.length<G||this.length<fe)throw new RangeError("Out of range index");if(fe<=G)return this;G=G>>>0,fe=fe===void 0?this.length:fe>>>0,I||(I=0);let ve;if(typeof I=="number")for(ve=G;ve<fe;++ve)this[ve]=I;else{const ke=d.isBuffer(I)?I:d.from(I,Oe),ce=ke.length;if(ce===0)throw new TypeError('The value "'+I+'" is invalid for argument "value"');for(ve=0;ve<fe-G;++ve)this[ve+G]=ke[ve%ce]}return this};const Qe={};function Le(ye,I,G){Qe[ye]=class extends G{constructor(){super(),Object.defineProperty(this,"message",{value:I.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ye}]`,this.stack,delete this.name}get code(){return ye}set code(Oe){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Oe,writable:!0})}toString(){return`${this.name} [${ye}]: ${this.message}`}}}Le("ERR_BUFFER_OUT_OF_BOUNDS",function(ye){return ye?`${ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Le("ERR_INVALID_ARG_TYPE",function(ye,I){return`The "${ye}" argument must be of type number. Received type ${typeof I}`},TypeError),Le("ERR_OUT_OF_RANGE",function(ye,I,G){let fe=`The value of "${ye}" is out of range.`,Oe=G;return Number.isInteger(G)&&Math.abs(G)>2**32?Oe=Ie(String(G)):typeof G=="bigint"&&(Oe=String(G),(G>BigInt(2)**BigInt(32)||G<-(BigInt(2)**BigInt(32)))&&(Oe=Ie(Oe)),Oe+="n"),fe+=` It must be ${I}. Received ${Oe}`,fe},RangeError);function Ie(ye){let I="",G=ye.length;const fe=ye[0]==="-"?1:0;for(;G>=fe+4;G-=3)I=`_${ye.slice(G-3,G)}${I}`;return`${ye.slice(0,G)}${I}`}function V(ye,I,G){Te(I,"offset"),(ye[I]===void 0||ye[I+G]===void 0)&&le(I,ye.length-(G+1))}function me(ye,I,G,fe,Oe,ve){if(ye>G||ye<I){const ke=typeof I=="bigint"?"n":"";let ce;throw I===0||I===BigInt(0)?ce=`>= 0${ke} and < 2${ke} ** ${(ve+1)*8}${ke}`:ce=`>= -(2${ke} ** ${(ve+1)*8-1}${ke}) and < 2 ** ${(ve+1)*8-1}${ke}`,new Qe.ERR_OUT_OF_RANGE("value",ce,ye)}V(fe,Oe,ve)}function Te(ye,I){if(typeof ye!="number")throw new Qe.ERR_INVALID_ARG_TYPE(I,"number",ye)}function le(ye,I,G){throw Math.floor(ye)!==ye?(Te(ye,G),new Qe.ERR_OUT_OF_RANGE("offset","an integer",ye)):I<0?new Qe.ERR_BUFFER_OUT_OF_BOUNDS:new Qe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${I}`,ye)}const oe=/[^+/0-9A-Za-z-_]/g;function J(ye){if(ye=ye.split("=")[0],ye=ye.trim().replace(oe,""),ye.length<2)return"";for(;ye.length%4!==0;)ye=ye+"=";return ye}function xe(ye,I){I=I||1/0;let G;const fe=ye.length;let Oe=null;const ve=[];for(let ke=0;ke<fe;++ke){if(G=ye.charCodeAt(ke),G>55295&&G<57344){if(!Oe){if(G>56319){(I-=3)>-1&&ve.push(239,191,189);continue}else if(ke+1===fe){(I-=3)>-1&&ve.push(239,191,189);continue}Oe=G;continue}if(G<56320){(I-=3)>-1&&ve.push(239,191,189),Oe=G;continue}G=(Oe-55296<<10|G-56320)+65536}else Oe&&(I-=3)>-1&&ve.push(239,191,189);if(Oe=null,G<128){if((I-=1)<0)break;ve.push(G)}else if(G<2048){if((I-=2)<0)break;ve.push(G>>6|192,G&63|128)}else if(G<65536){if((I-=3)<0)break;ve.push(G>>12|224,G>>6&63|128,G&63|128)}else if(G<1114112){if((I-=4)<0)break;ve.push(G>>18|240,G>>12&63|128,G>>6&63|128,G&63|128)}else throw new Error("Invalid code point")}return ve}function Me(ye){const I=[];for(let G=0;G<ye.length;++G)I.push(ye.charCodeAt(G)&255);return I}function Ee(ye,I){let G,fe,Oe;const ve=[];for(let ke=0;ke<ye.length&&!((I-=2)<0);++ke)G=ye.charCodeAt(ke),fe=G>>8,Oe=G%256,ve.push(Oe),ve.push(fe);return ve}function We(ye){return t.toByteArray(J(ye))}function kt(ye,I,G,fe){let Oe;for(Oe=0;Oe<fe&&!(Oe+G>=I.length||Oe>=ye.length);++Oe)I[Oe+G]=ye[Oe];return Oe}function at(ye,I){return ye instanceof I||ye!=null&&ye.constructor!=null&&ye.constructor.name!=null&&ye.constructor.name===I.name}function _t(ye){return ye!==ye}const jt=function(){const ye="0123456789abcdef",I=new Array(256);for(let G=0;G<16;++G){const fe=G*16;for(let Oe=0;Oe<16;++Oe)I[fe+Oe]=ye[G]+ye[Oe]}return I}();function Dt(ye){return typeof BigInt>"u"?Gt:ye}function Gt(){throw new Error("BigInt not supported")}})(IC);const Yt=IC.Buffer,Dr=IC.Buffer;var Ju={exports:{}},p3;function Xq(){if(p3)return Ju.exports;p3=1;const e=typeof Yt<"u",t=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,n=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function r(s,l,u){u==null&&l!==null&&typeof l=="object"&&(u=l,l=void 0),e&&Yt.isBuffer(s)&&(s=s.toString()),s&&s.charCodeAt(0)===65279&&(s=s.slice(1));const d=JSON.parse(s,l);if(d===null||typeof d!="object")return d;const h=u&&u.protoAction||"error",p=u&&u.constructorAction||"error";if(h==="ignore"&&p==="ignore")return d;if(h!=="ignore"&&p!=="ignore"){if(t.test(s)===!1&&n.test(s)===!1)return d}else if(h!=="ignore"&&p==="ignore"){if(t.test(s)===!1)return d}else if(n.test(s)===!1)return d;return a(d,{protoAction:h,constructorAction:p,safe:u&&u.safe})}function a(s,{protoAction:l="error",constructorAction:u="error",safe:d}={}){let h=[s];for(;h.length;){const p=h;h=[];for(const g of p){if(l!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"__proto__")){if(d===!0)return null;if(l==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.__proto__}if(u!=="ignore"&&Object.prototype.hasOwnProperty.call(g,"constructor")&&Object.prototype.hasOwnProperty.call(g.constructor,"prototype")){if(d===!0)return null;if(u==="error")throw new SyntaxError("Object contains forbidden prototype property");delete g.constructor}for(const v in g){const b=g[v];b&&typeof b=="object"&&h.push(b)}}}return s}function i(s,l,u){const d=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,l,u)}finally{Error.stackTraceLimit=d}}function o(s,l){const u=Error.stackTraceLimit;Error.stackTraceLimit=0;try{return r(s,l,{safe:!0})}catch{return null}finally{Error.stackTraceLimit=u}}return Ju.exports=i,Ju.exports.default=i,Ju.exports.parse=i,Ju.exports.safeParse=o,Ju.exports.scan=a,Ju.exports}var Jq=Xq();const ns=si(Jq);var Qq={};function Bs(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function eV(e){return new ReadableStream({async pull(t){try{const{value:n,done:r}=await e.next();r?t.close():t.enqueue(n)}catch(n){t.error(n)}},cancel(){}})}async function tV(e){return e==null?Promise.resolve():new Promise(t=>setTimeout(t,e))}function nV(){let e="",t,n=[],r,a;function i(l,u){if(l===""){o(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){s(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);s(h,g)}function o(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=rV(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),o(l)}})}function rV(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function J0(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var kd=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=Uq(n,t);if(e==null)return a;if(n.includes(r))throw new NC({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Rs=kd();function aV(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}function iV(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Bb(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function oV({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new rb({message:`${r} API key must be a string.`});if(typeof Xr>"u")throw new rb({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=Qq[t],e==null)throw new rb({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new rb({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var tv=Symbol.for("vercel.ai.validator");function sV(e){return{[tv]:!0,validate:e}}function lV(e){return typeof e=="object"&&e!==null&&tv in e&&e[tv]===!0&&"validate"in e}function cV(e){return lV(e)?e:uV(e)}function uV(e){return sV(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function dV({value:e,schema:t}){const n=Lh({value:e,schema:t});if(!n.success)throw Qc.wrap({value:e,cause:n.error});return n.value}function Lh({value:e,schema:t}){const n=cV(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Qc.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Qc.wrap({value:e,cause:r})}}}function fV({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:dV({value:n,schema:t})}catch(n){throw Jc.isInstance(n)||Qc.isInstance(n)?n:new Jc({text:e,cause:n})}}function pd({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=Lh({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Jc.isInstance(n)?n:new Jc({text:e,cause:n})}}}function m3(e){try{return ns.parse(e),!0}catch{return!1}}function hV({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=Lh({value:t[e],schema:n});if(!r.success)throw new NC({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var pV=()=>globalThis.fetch,Wo=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>mV({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),mV=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=pV()})=>{try{const s=await o(e,{method:"POST",headers:iV(t),body:n.content,signal:i}),l=J0(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw Bb(d)||va.isInstance(d)?d:new va({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Bb(u)||va.isInstance(u))?u:new va({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if(Bb(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new va({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},WD=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=J0(r);if(o.trim()==="")return{responseHeaders:s,value:new va({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=fV({text:o,schema:e});return{responseHeaders:s,value:new va({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new va({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},DC=e=>async({response:t})=>{const n=J0(t);if(t.body==null)throw new AC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(nV()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(pd({text:r,schema:e}))}}))}},Td=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=pd({text:a,schema:e}),o=J0(t);if(!i.success)throw new va({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:gV,atob:yV}=globalThis;function KD(e){const t=e.replace(/-/g,"+").replace(/_/g,"/"),n=yV(t);return Uint8Array.from(n,r=>r.codePointAt(0))}function dh(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return gV(t)}function ZD(e){return e==null?void 0:e.replace(/\/$/,"")}var Yn;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function n(a){throw new Error}e.assertNever=n,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(s=>typeof a[a[s]]!="number"),o={};for(const s of i)o[s]=a[s];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function r(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=r,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Yn||(Yn={}));var i2;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(i2||(i2={}));const en=Yn.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Al=e=>{switch(typeof e){case"undefined":return en.undefined;case"string":return en.string;case"number":return isNaN(e)?en.nan:en.number;case"boolean":return en.boolean;case"function":return en.function;case"bigint":return en.bigint;case"symbol":return en.symbol;case"object":return Array.isArray(e)?en.array:e===null?en.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?en.promise:typeof Map<"u"&&e instanceof Map?en.map:typeof Set<"u"&&e instanceof Set?en.set:typeof Date<"u"&&e instanceof Date?en.date:en.object;default:return en.unknown}},Pt=Yn.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),bV=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Qi extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(i){return i.message},r={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)r._errors.push(n(o));else{let s=r,l=0;for(;l<o.path.length;){const u=o.path[l];l===o.path.length-1?(s[u]=s[u]||{_errors:[]},s[u]._errors.push(n(o))):s[u]=s[u]||{_errors:[]},s=s[u],l++}}};return a(this),r}static assert(t){if(!(t instanceof Qi))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yn.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const a of this.issues)a.path.length>0?(n[a.path[0]]=n[a.path[0]]||[],n[a.path[0]].push(t(a))):r.push(t(a));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Qi.create=e=>new Qi(e);const fh=(e,t)=>{let n;switch(e.code){case Pt.invalid_type:e.received===en.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Pt.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,Yn.jsonStringifyReplacer)}`;break;case Pt.unrecognized_keys:n=`Unrecognized key(s) in object: ${Yn.joinValues(e.keys,", ")}`;break;case Pt.invalid_union:n="Invalid input";break;case Pt.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${Yn.joinValues(e.options)}`;break;case Pt.invalid_enum_value:n=`Invalid enum value. Expected ${Yn.joinValues(e.options)}, received '${e.received}'`;break;case Pt.invalid_arguments:n="Invalid function arguments";break;case Pt.invalid_return_type:n="Invalid function return type";break;case Pt.invalid_date:n="Invalid date";break;case Pt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:Yn.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Pt.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Pt.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Pt.custom:n="Invalid input";break;case Pt.invalid_intersection_types:n="Intersection results could not be merged";break;case Pt.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Pt.not_finite:n="Number must be finite";break;default:n=t.defaultError,Yn.assertNever(e)}return{message:n}};let YD=fh;function vV(e){YD=e}function nv(){return YD}const rv=e=>{const{data:t,path:n,errorMaps:r,issueData:a}=e,i=[...n,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let s="";const l=r.filter(u=>!!u).slice().reverse();for(const u of l)s=u(o,{data:t,defaultError:s}).message;return{...a,path:i,message:s}},wV=[];function Jt(e,t){const n=nv(),r=rv({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===fh?void 0:fh].filter(a=>!!a)});e.common.issues.push(r)}class ri{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const a of n){if(a.status==="aborted")return En;a.status==="dirty"&&t.dirty(),r.push(a.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const a of n){const i=await a.key,o=await a.value;r.push({key:i,value:o})}return ri.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const a of n){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return En;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(r[i.value]=o.value)}return{status:t.value,value:r}}}const En=Object.freeze({status:"aborted"}),Yf=e=>({status:"dirty",value:e}),wi=e=>({status:"valid",value:e}),o2=e=>e.status==="aborted",s2=e=>e.status==="dirty",md=e=>e.status==="valid",Km=e=>typeof Promise<"u"&&e instanceof Promise;function av(e,t,n,r){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function XD(e,t,n,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var ln;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(ln||(ln={}));var Rm,Im;class zs{constructor(t,n,r,a){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const g3=(e,t)=>{if(md(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Qi(e.common.issues);return this._error=n,this._error}}};function On(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:a}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,s)=>{var l,u;const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??s.defaultError}:typeof s.data>"u"?{message:(l=d??r)!==null&&l!==void 0?l:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:s.defaultError}},description:a}}class Mn{get description(){return this._def.description}_getType(t){return Al(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Al(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new ri,ctx:{common:t.parent.common,data:t.data,parsedType:Al(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(Km(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const a={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Al(t)},i=this._parseSync({data:t,path:a.path,parent:a});return g3(a,i)}"~validate"(t){var n,r;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Al(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return md(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((r=(n=i==null?void 0:i.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>md(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Al(t)},a=this._parse({data:t,path:r.path,parent:r}),i=await(Km(a)?a:Promise.resolve(a));return g3(r,i)}refine(t,n){const r=a=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(a):n;return this._refinement((a,i)=>{const o=t(a),s=()=>i.addIssue({code:Pt.custom,...r(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(l=>l?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(t,n){return this._refinement((r,a)=>t(r)?!0:(a.addIssue(typeof n=="function"?n(r,a):n),!1))}_refinement(t){return new Ko({schema:this,typeName:zt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Ho.create(this,this._def)}nullable(){return ru.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Uo.create(this)}promise(){return ph.create(this,this._def)}or(t){return Jm.create([this,t],this._def)}and(t){return Qm.create(this,t,this._def)}transform(t){return new Ko({...On(this._def),schema:this,typeName:zt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new a0({...On(this._def),innerType:this,defaultValue:n,typeName:zt.ZodDefault})}brand(){return new jC({typeName:zt.ZodBranded,type:this,...On(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new i0({...On(this._def),innerType:this,catchValue:n,typeName:zt.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return Q0.create(this,t)}readonly(){return o0.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const _V=/^c[^\s-]{8,}$/i,xV=/^[0-9a-z]+$/,SV=/^[0-9A-HJKMNP-TV-Z]{26}$/i,EV=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CV=/^[a-z0-9_-]{21}$/i,kV=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,TV=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,AV=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NV="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Lx;const RV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,IV=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,OV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,DV=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,jV=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,MV=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,JD="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",PV=new RegExp(`^${JD}$`);function QD(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function FV(e){return new RegExp(`^${QD(e)}$`)}function ej(e){let t=`${JD}T${QD(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function LV(e,t){return!!((t==="v4"||!t)&&RV.test(e)||(t==="v6"||!t)&&OV.test(e))}function $V(e,t){if(!kV.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),a=JSON.parse(atob(r));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function BV(e,t){return!!((t==="v4"||!t)&&IV.test(e)||(t==="v6"||!t)&&DV.test(e))}class Bo extends Mn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==en.string){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_type,expected:en.string,received:i.parsedType}),En}const r=new ri;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),r.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,s=t.data.length<i.value;(o||s)&&(a=this._getOrReturnCtx(t,a),o?Jt(a,{code:Pt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):s&&Jt(a,{code:Pt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),r.dirty())}else if(i.kind==="email")AV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"email",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="emoji")Lx||(Lx=new RegExp(NV,"u")),Lx.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"emoji",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="uuid")EV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"uuid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="nanoid")CV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"nanoid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid")_V.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"cuid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="cuid2")xV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"cuid2",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="ulid")SV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"ulid",code:Pt.invalid_string,message:i.message}),r.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Jt(a,{validation:"url",code:Pt.invalid_string,message:i.message}),r.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"regex",code:Pt.invalid_string,message:i.message}),r.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),r.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:{startsWith:i.value},message:i.message}),r.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:{endsWith:i.value},message:i.message}),r.dirty()):i.kind==="datetime"?ej(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:"datetime",message:i.message}),r.dirty()):i.kind==="date"?PV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:"date",message:i.message}),r.dirty()):i.kind==="time"?FV(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.invalid_string,validation:"time",message:i.message}),r.dirty()):i.kind==="duration"?TV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"duration",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="ip"?LV(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"ip",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="jwt"?$V(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"jwt",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="cidr"?BV(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"cidr",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64"?jV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"base64",code:Pt.invalid_string,message:i.message}),r.dirty()):i.kind==="base64url"?MV.test(t.data)||(a=this._getOrReturnCtx(t,a),Jt(a,{validation:"base64url",code:Pt.invalid_string,message:i.message}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:t.data}}_regex(t,n,r){return this.refinement(a=>t.test(a),{validation:n,code:Pt.invalid_string,...ln.errToObj(r)})}_addCheck(t){return new Bo({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...ln.errToObj(t)})}url(t){return this._addCheck({kind:"url",...ln.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...ln.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...ln.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...ln.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...ln.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...ln.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...ln.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...ln.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...ln.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...ln.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...ln.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...ln.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...ln.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...ln.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...ln.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...ln.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...ln.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...ln.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...ln.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...ln.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...ln.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...ln.errToObj(n)})}nonempty(t){return this.min(1,ln.errToObj(t))}trim(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Bo({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Bo.create=e=>{var t;return new Bo({checks:[],typeName:zt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};function zV(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,a=n>r?n:r,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class eu extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==en.number){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_type,expected:en.number,received:i.parsedType}),En}let r;const a=new ri;for(const i of this._def.checks)i.kind==="int"?Yn.isInteger(t.data)||(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?zV(t.data,i.value)!==0&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.not_finite,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,ln.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ln.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ln.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ln.toString(n))}setLimit(t,n,r,a){return new eu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:ln.toString(a)}]})}_addCheck(t){return new eu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:ln.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ln.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ln.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ln.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ln.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ln.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:ln.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ln.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ln.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Yn.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}eu.create=e=>new eu({checks:[],typeName:zt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class tu extends Mn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==en.bigint)return this._getInvalidInput(t);let r;const a=new ri;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(r=this._getOrReturnCtx(t,r),Jt(r,{code:Pt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Yn.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Jt(n,{code:Pt.invalid_type,expected:en.bigint,received:n.parsedType}),En}gte(t,n){return this.setLimit("min",t,!0,ln.toString(n))}gt(t,n){return this.setLimit("min",t,!1,ln.toString(n))}lte(t,n){return this.setLimit("max",t,!0,ln.toString(n))}lt(t,n){return this.setLimit("max",t,!1,ln.toString(n))}setLimit(t,n,r,a){return new tu({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:ln.toString(a)}]})}_addCheck(t){return new tu({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ln.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ln.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ln.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ln.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:ln.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}tu.create=e=>{var t;return new tu({checks:[],typeName:zt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...On(e)})};class Zm extends Mn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==en.boolean){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.boolean,received:r.parsedType}),En}return wi(t.data)}}Zm.create=e=>new Zm({typeName:zt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...On(e)});class gd extends Mn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==en.date){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_type,expected:en.date,received:i.parsedType}),En}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Jt(i,{code:Pt.invalid_date}),En}const r=new ri;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),r.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Jt(a,{code:Pt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),r.dirty()):Yn.assertNever(i);return{status:r.value,value:new Date(t.data.getTime())}}_addCheck(t){return new gd({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:ln.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:ln.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}gd.create=e=>new gd({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:zt.ZodDate,...On(e)});class iv extends Mn{_parse(t){if(this._getType(t)!==en.symbol){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.symbol,received:r.parsedType}),En}return wi(t.data)}}iv.create=e=>new iv({typeName:zt.ZodSymbol,...On(e)});class Ym extends Mn{_parse(t){if(this._getType(t)!==en.undefined){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.undefined,received:r.parsedType}),En}return wi(t.data)}}Ym.create=e=>new Ym({typeName:zt.ZodUndefined,...On(e)});class Xm extends Mn{_parse(t){if(this._getType(t)!==en.null){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.null,received:r.parsedType}),En}return wi(t.data)}}Xm.create=e=>new Xm({typeName:zt.ZodNull,...On(e)});class hh extends Mn{constructor(){super(...arguments),this._any=!0}_parse(t){return wi(t.data)}}hh.create=e=>new hh({typeName:zt.ZodAny,...On(e)});class fd extends Mn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return wi(t.data)}}fd.create=e=>new fd({typeName:zt.ZodUnknown,...On(e)});class Bl extends Mn{_parse(t){const n=this._getOrReturnCtx(t);return Jt(n,{code:Pt.invalid_type,expected:en.never,received:n.parsedType}),En}}Bl.create=e=>new Bl({typeName:zt.ZodNever,...On(e)});class ov extends Mn{_parse(t){if(this._getType(t)!==en.undefined){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.void,received:r.parsedType}),En}return wi(t.data)}}ov.create=e=>new ov({typeName:zt.ZodVoid,...On(e)});class Uo extends Mn{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),a=this._def;if(n.parsedType!==en.array)return Jt(n,{code:Pt.invalid_type,expected:en.array,received:n.parsedType}),En;if(a.exactLength!==null){const o=n.data.length>a.exactLength.value,s=n.data.length<a.exactLength.value;(o||s)&&(Jt(n,{code:o?Pt.too_big:Pt.too_small,minimum:s?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),r.dirty())}if(a.minLength!==null&&n.data.length<a.minLength.value&&(Jt(n,{code:Pt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),r.dirty()),a.maxLength!==null&&n.data.length>a.maxLength.value&&(Jt(n,{code:Pt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((o,s)=>a.type._parseAsync(new zs(n,o,n.path,s)))).then(o=>ri.mergeArray(r,o));const i=[...n.data].map((o,s)=>a.type._parseSync(new zs(n,o,n.path,s)));return ri.mergeArray(r,i)}get element(){return this._def.type}min(t,n){return new Uo({...this._def,minLength:{value:t,message:ln.toString(n)}})}max(t,n){return new Uo({...this._def,maxLength:{value:t,message:ln.toString(n)}})}length(t,n){return new Uo({...this._def,exactLength:{value:t,message:ln.toString(n)}})}nonempty(t){return this.min(1,t)}}Uo.create=(e,t)=>new Uo({type:e,minLength:null,maxLength:null,exactLength:null,typeName:zt.ZodArray,...On(t)});function Wf(e){if(e instanceof Gr){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Ho.create(Wf(r))}return new Gr({...e._def,shape:()=>t})}else return e instanceof Uo?new Uo({...e._def,type:Wf(e.element)}):e instanceof Ho?Ho.create(Wf(e.unwrap())):e instanceof ru?ru.create(Wf(e.unwrap())):e instanceof Us?Us.create(e.items.map(t=>Wf(t))):e}class Gr extends Mn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=Yn.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==en.object){const u=this._getOrReturnCtx(t);return Jt(u,{code:Pt.invalid_type,expected:en.object,received:u.parsedType}),En}const{status:r,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),s=[];if(!(this._def.catchall instanceof Bl&&this._def.unknownKeys==="strip"))for(const u in a.data)o.includes(u)||s.push(u);const l=[];for(const u of o){const d=i[u],h=a.data[u];l.push({key:{status:"valid",value:u},value:d._parse(new zs(a,h,a.path,u)),alwaysSet:u in a.data})}if(this._def.catchall instanceof Bl){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of s)l.push({key:{status:"valid",value:d},value:{status:"valid",value:a.data[d]}});else if(u==="strict")s.length>0&&(Jt(a,{code:Pt.unrecognized_keys,keys:s}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of s){const h=a.data[d];l.push({key:{status:"valid",value:d},value:u._parse(new zs(a,h,a.path,d)),alwaysSet:d in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of l){const h=await d.key,p=await d.value;u.push({key:h,value:p,alwaysSet:d.alwaysSet})}return u}).then(u=>ri.mergeObjectSync(r,u)):ri.mergeObjectSync(r,l)}get shape(){return this._def.shape()}strict(t){return ln.errToObj,new Gr({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var a,i,o,s;const l=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,n,r).message)!==null&&o!==void 0?o:r.defaultError;return n.code==="unrecognized_keys"?{message:(s=ln.errToObj(t).message)!==null&&s!==void 0?s:l}:{message:l}}}:{}})}strip(){return new Gr({...this._def,unknownKeys:"strip"})}passthrough(){return new Gr({...this._def,unknownKeys:"passthrough"})}extend(t){return new Gr({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Gr({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:zt.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new Gr({...this._def,catchall:t})}pick(t){const n={};return Yn.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Gr({...this._def,shape:()=>n})}omit(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new Gr({...this._def,shape:()=>n})}deepPartial(){return Wf(this)}partial(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{const a=this.shape[r];t&&!t[r]?n[r]=a:n[r]=a.optional()}),new Gr({...this._def,shape:()=>n})}required(t){const n={};return Yn.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let i=this.shape[r];for(;i instanceof Ho;)i=i._def.innerType;n[r]=i}}),new Gr({...this._def,shape:()=>n})}keyof(){return tj(Yn.objectKeys(this.shape))}}Gr.create=(e,t)=>new Gr({shape:()=>e,unknownKeys:"strip",catchall:Bl.create(),typeName:zt.ZodObject,...On(t)});Gr.strictCreate=(e,t)=>new Gr({shape:()=>e,unknownKeys:"strict",catchall:Bl.create(),typeName:zt.ZodObject,...On(t)});Gr.lazycreate=(e,t)=>new Gr({shape:e,unknownKeys:"strip",catchall:Bl.create(),typeName:zt.ZodObject,...On(t)});class Jm extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function a(i){for(const s of i)if(s.result.status==="valid")return s.result;for(const s of i)if(s.result.status==="dirty")return n.common.issues.push(...s.ctx.common.issues),s.result;const o=i.map(s=>new Qi(s.ctx.common.issues));return Jt(n,{code:Pt.invalid_union,unionErrors:o}),En}if(n.common.async)return Promise.all(r.map(async i=>{const o={...n,common:{...n.common,issues:[]},parent:null};return{result:await i._parseAsync({data:n.data,path:n.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const l of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=l._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!i&&(i={result:d,ctx:u}),u.common.issues.length&&o.push(u.common.issues)}if(i)return n.common.issues.push(...i.ctx.common.issues),i.result;const s=o.map(l=>new Qi(l));return Jt(n,{code:Pt.invalid_union,unionErrors:s}),En}}get options(){return this._def.options}}Jm.create=(e,t)=>new Jm({options:e,typeName:zt.ZodUnion,...On(t)});const Cl=e=>e instanceof t0?Cl(e.schema):e instanceof Ko?Cl(e.innerType()):e instanceof n0?[e.value]:e instanceof nu?e.options:e instanceof r0?Yn.objectValues(e.enum):e instanceof a0?Cl(e._def.innerType):e instanceof Ym?[void 0]:e instanceof Xm?[null]:e instanceof Ho?[void 0,...Cl(e.unwrap())]:e instanceof ru?[null,...Cl(e.unwrap())]:e instanceof jC||e instanceof o0?Cl(e.unwrap()):e instanceof i0?Cl(e._def.innerType):[];class vw extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==en.object)return Jt(n,{code:Pt.invalid_type,expected:en.object,received:n.parsedType}),En;const r=this.discriminator,a=n.data[r],i=this.optionsMap.get(a);return i?n.common.async?i._parseAsync({data:n.data,path:n.path,parent:n}):i._parseSync({data:n.data,path:n.path,parent:n}):(Jt(n,{code:Pt.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),En)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const a=new Map;for(const i of n){const o=Cl(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const s of o){if(a.has(s))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(s)}`);a.set(s,i)}}return new vw({typeName:zt.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:a,...On(r)})}}function l2(e,t){const n=Al(e),r=Al(t);if(e===t)return{valid:!0,data:e};if(n===en.object&&r===en.object){const a=Yn.objectKeys(t),i=Yn.objectKeys(e).filter(s=>a.indexOf(s)!==-1),o={...e,...t};for(const s of i){const l=l2(e[s],t[s]);if(!l.valid)return{valid:!1};o[s]=l.data}return{valid:!0,data:o}}else if(n===en.array&&r===en.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],s=t[i],l=l2(o,s);if(!l.valid)return{valid:!1};a.push(l.data)}return{valid:!0,data:a}}else return n===en.date&&r===en.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Qm extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=(i,o)=>{if(o2(i)||o2(o))return En;const s=l2(i.value,o.value);return s.valid?((s2(i)||s2(o))&&n.dirty(),{status:n.value,value:s.data}):(Jt(r,{code:Pt.invalid_intersection_types}),En)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Qm.create=(e,t,n)=>new Qm({left:e,right:t,typeName:zt.ZodIntersection,...On(n)});class Us extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.array)return Jt(r,{code:Pt.invalid_type,expected:en.array,received:r.parsedType}),En;if(r.data.length<this._def.items.length)return Jt(r,{code:Pt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),En;!this._def.rest&&r.data.length>this._def.items.length&&(Jt(r,{code:Pt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const i=[...r.data].map((o,s)=>{const l=this._def.items[s]||this._def.rest;return l?l._parse(new zs(r,o,r.path,s)):null}).filter(o=>!!o);return r.common.async?Promise.all(i).then(o=>ri.mergeArray(n,o)):ri.mergeArray(n,i)}get items(){return this._def.items}rest(t){return new Us({...this._def,rest:t})}}Us.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Us({items:e,typeName:zt.ZodTuple,rest:null,...On(t)})};class e0 extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.object)return Jt(r,{code:Pt.invalid_type,expected:en.object,received:r.parsedType}),En;const a=[],i=this._def.keyType,o=this._def.valueType;for(const s in r.data)a.push({key:i._parse(new zs(r,s,r.path,s)),value:o._parse(new zs(r,r.data[s],r.path,s)),alwaysSet:s in r.data});return r.common.async?ri.mergeObjectAsync(n,a):ri.mergeObjectSync(n,a)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Mn?new e0({keyType:t,valueType:n,typeName:zt.ZodRecord,...On(r)}):new e0({keyType:Bo.create(),valueType:t,typeName:zt.ZodRecord,...On(n)})}}class sv extends Mn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.map)return Jt(r,{code:Pt.invalid_type,expected:en.map,received:r.parsedType}),En;const a=this._def.keyType,i=this._def.valueType,o=[...r.data.entries()].map(([s,l],u)=>({key:a._parse(new zs(r,s,r.path,[u,"key"])),value:i._parse(new zs(r,l,r.path,[u,"value"]))}));if(r.common.async){const s=new Map;return Promise.resolve().then(async()=>{for(const l of o){const u=await l.key,d=await l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),s.set(u.value,d.value)}return{status:n.value,value:s}})}else{const s=new Map;for(const l of o){const u=l.key,d=l.value;if(u.status==="aborted"||d.status==="aborted")return En;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),s.set(u.value,d.value)}return{status:n.value,value:s}}}}sv.create=(e,t,n)=>new sv({valueType:t,keyType:e,typeName:zt.ZodMap,...On(n)});class yd extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==en.set)return Jt(r,{code:Pt.invalid_type,expected:en.set,received:r.parsedType}),En;const a=this._def;a.minSize!==null&&r.data.size<a.minSize.value&&(Jt(r,{code:Pt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),n.dirty()),a.maxSize!==null&&r.data.size>a.maxSize.value&&(Jt(r,{code:Pt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),n.dirty());const i=this._def.valueType;function o(l){const u=new Set;for(const d of l){if(d.status==="aborted")return En;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const s=[...r.data.values()].map((l,u)=>i._parse(new zs(r,l,r.path,u)));return r.common.async?Promise.all(s).then(l=>o(l)):o(s)}min(t,n){return new yd({...this._def,minSize:{value:t,message:ln.toString(n)}})}max(t,n){return new yd({...this._def,maxSize:{value:t,message:ln.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}yd.create=(e,t)=>new yd({valueType:e,minSize:null,maxSize:null,typeName:zt.ZodSet,...On(t)});class nh extends Mn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==en.function)return Jt(n,{code:Pt.invalid_type,expected:en.function,received:n.parsedType}),En;function r(s,l){return rv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nv(),fh].filter(u=>!!u),issueData:{code:Pt.invalid_arguments,argumentsError:l}})}function a(s,l){return rv({data:s,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,nv(),fh].filter(u=>!!u),issueData:{code:Pt.invalid_return_type,returnTypeError:l}})}const i={errorMap:n.common.contextualErrorMap},o=n.data;if(this._def.returns instanceof ph){const s=this;return wi(async function(...l){const u=new Qi([]),d=await s._def.args.parseAsync(l,i).catch(g=>{throw u.addIssue(r(l,g)),u}),h=await Reflect.apply(o,this,d);return await s._def.returns._def.type.parseAsync(h,i).catch(g=>{throw u.addIssue(a(h,g)),u})})}else{const s=this;return wi(function(...l){const u=s._def.args.safeParse(l,i);if(!u.success)throw new Qi([r(l,u.error)]);const d=Reflect.apply(o,this,u.data),h=s._def.returns.safeParse(d,i);if(!h.success)throw new Qi([a(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new nh({...this._def,args:Us.create(t).rest(fd.create())})}returns(t){return new nh({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new nh({args:t||Us.create([]).rest(fd.create()),returns:n||fd.create(),typeName:zt.ZodFunction,...On(r)})}}class t0 extends Mn{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}t0.create=(e,t)=>new t0({getter:e,typeName:zt.ZodLazy,...On(t)});class n0 extends Mn{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Jt(n,{received:n.data,code:Pt.invalid_literal,expected:this._def.value}),En}return{status:"valid",value:t.data}}get value(){return this._def.value}}n0.create=(e,t)=>new n0({value:e,typeName:zt.ZodLiteral,...On(t)});function tj(e,t){return new nu({values:e,typeName:zt.ZodEnum,...On(t)})}class nu extends Mn{constructor(){super(...arguments),Rm.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Jt(n,{expected:Yn.joinValues(r),received:n.parsedType,code:Pt.invalid_type}),En}if(av(this,Rm)||XD(this,Rm,new Set(this._def.values)),!av(this,Rm).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Jt(n,{received:n.data,code:Pt.invalid_enum_value,options:r}),En}return wi(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return nu.create(t,{...this._def,...n})}exclude(t,n=this._def){return nu.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}Rm=new WeakMap;nu.create=tj;class r0 extends Mn{constructor(){super(...arguments),Im.set(this,void 0)}_parse(t){const n=Yn.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==en.string&&r.parsedType!==en.number){const a=Yn.objectValues(n);return Jt(r,{expected:Yn.joinValues(a),received:r.parsedType,code:Pt.invalid_type}),En}if(av(this,Im)||XD(this,Im,new Set(Yn.getValidEnumValues(this._def.values))),!av(this,Im).has(t.data)){const a=Yn.objectValues(n);return Jt(r,{received:r.data,code:Pt.invalid_enum_value,options:a}),En}return wi(t.data)}get enum(){return this._def.values}}Im=new WeakMap;r0.create=(e,t)=>new r0({values:e,typeName:zt.ZodNativeEnum,...On(t)});class ph extends Mn{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==en.promise&&n.common.async===!1)return Jt(n,{code:Pt.invalid_type,expected:en.promise,received:n.parsedType}),En;const r=n.parsedType===en.promise?n.data:Promise.resolve(n.data);return wi(r.then(a=>this._def.type.parseAsync(a,{path:n.path,errorMap:n.common.contextualErrorMap})))}}ph.create=(e,t)=>new ph({type:e,typeName:zt.ZodPromise,...On(t)});class Ko extends Mn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===zt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Jt(r,o),o.fatal?n.abort():n.dirty()},get path(){return r.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(r.data,i);if(r.common.async)return Promise.resolve(o).then(async s=>{if(n.value==="aborted")return En;const l=await this._def.schema._parseAsync({data:s,path:r.path,parent:r});return l.status==="aborted"?En:l.status==="dirty"||n.value==="dirty"?Yf(l.value):l});{if(n.value==="aborted")return En;const s=this._def.schema._parseSync({data:o,path:r.path,parent:r});return s.status==="aborted"?En:s.status==="dirty"||n.value==="dirty"?Yf(s.value):s}}if(a.type==="refinement"){const o=s=>{const l=a.refinement(s,i);if(r.common.async)return Promise.resolve(l);if(l instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return s};if(r.common.async===!1){const s=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?En:(s.status==="dirty"&&n.dirty(),o(s.value),{status:n.value,value:s.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(s=>s.status==="aborted"?En:(s.status==="dirty"&&n.dirty(),o(s.value).then(()=>({status:n.value,value:s.value}))))}if(a.type==="transform")if(r.common.async===!1){const o=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!md(o))return o;const s=a.transform(o.value,i);if(s instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:s}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(o=>md(o)?Promise.resolve(a.transform(o.value,i)).then(s=>({status:n.value,value:s})):o);Yn.assertNever(a)}}Ko.create=(e,t,n)=>new Ko({schema:e,typeName:zt.ZodEffects,effect:t,...On(n)});Ko.createWithPreprocess=(e,t,n)=>new Ko({schema:t,effect:{type:"preprocess",transform:e},typeName:zt.ZodEffects,...On(n)});class Ho extends Mn{_parse(t){return this._getType(t)===en.undefined?wi(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Ho.create=(e,t)=>new Ho({innerType:e,typeName:zt.ZodOptional,...On(t)});class ru extends Mn{_parse(t){return this._getType(t)===en.null?wi(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}ru.create=(e,t)=>new ru({innerType:e,typeName:zt.ZodNullable,...On(t)});class a0 extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===en.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}a0.create=(e,t)=>new a0({innerType:e,typeName:zt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...On(t)});class i0 extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},a=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Km(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Qi(r.common.issues)},input:r.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Qi(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}i0.create=(e,t)=>new i0({innerType:e,typeName:zt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...On(t)});class lv extends Mn{_parse(t){if(this._getType(t)!==en.nan){const r=this._getOrReturnCtx(t);return Jt(r,{code:Pt.invalid_type,expected:en.nan,received:r.parsedType}),En}return{status:"valid",value:t.data}}}lv.create=e=>new lv({typeName:zt.ZodNaN,...On(e)});const UV=Symbol("zod_brand");class jC extends Mn{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Q0 extends Mn{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?En:i.status==="dirty"?(n.dirty(),Yf(i.value)):this._def.out._parseAsync({data:i.value,path:r.path,parent:r})})();{const a=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return a.status==="aborted"?En:a.status==="dirty"?(n.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:r.path,parent:r})}}static create(t,n){return new Q0({in:t,out:n,typeName:zt.ZodPipeline})}}class o0 extends Mn{_parse(t){const n=this._def.innerType._parse(t),r=a=>(md(a)&&(a.value=Object.freeze(a.value)),a);return Km(n)?n.then(a=>r(a)):r(n)}unwrap(){return this._def.innerType}}o0.create=(e,t)=>new o0({innerType:e,typeName:zt.ZodReadonly,...On(t)});function y3(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function nj(e,t={},n){return e?hh.create().superRefine((r,a)=>{var i,o;const s=e(r);if(s instanceof Promise)return s.then(l=>{var u,d;if(!l){const h=y3(t,r),p=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;a.addIssue({code:"custom",...h,fatal:p})}});if(!s){const l=y3(t,r),u=(o=(i=l.fatal)!==null&&i!==void 0?i:n)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...l,fatal:u})}}):hh.create()}const HV={object:Gr.lazycreate};var zt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(zt||(zt={}));const qV=(e,t={message:`Input not instance of ${e.name}`})=>nj(n=>n instanceof e,t),rj=Bo.create,aj=eu.create,VV=lv.create,GV=tu.create,ij=Zm.create,WV=gd.create,KV=iv.create,ZV=Ym.create,YV=Xm.create,XV=hh.create,JV=fd.create,QV=Bl.create,eG=ov.create,tG=Uo.create,nG=Gr.create,rG=Gr.strictCreate,aG=Jm.create,iG=vw.create,oG=Qm.create,sG=Us.create,lG=e0.create,cG=sv.create,uG=yd.create,dG=nh.create,fG=t0.create,hG=n0.create,pG=nu.create,mG=r0.create,gG=ph.create,b3=Ko.create,yG=Ho.create,bG=ru.create,vG=Ko.createWithPreprocess,wG=Q0.create,_G=()=>rj().optional(),xG=()=>aj().optional(),SG=()=>ij().optional(),EG={string:e=>Bo.create({...e,coerce:!0}),number:e=>eu.create({...e,coerce:!0}),boolean:e=>Zm.create({...e,coerce:!0}),bigint:e=>tu.create({...e,coerce:!0}),date:e=>gd.create({...e,coerce:!0})},CG=En;var $=Object.freeze({__proto__:null,defaultErrorMap:fh,setErrorMap:vV,getErrorMap:nv,makeIssue:rv,EMPTY_PATH:wV,addIssueToContext:Jt,ParseStatus:ri,INVALID:En,DIRTY:Yf,OK:wi,isAborted:o2,isDirty:s2,isValid:md,isAsync:Km,get util(){return Yn},get objectUtil(){return i2},ZodParsedType:en,getParsedType:Al,ZodType:Mn,datetimeRegex:ej,ZodString:Bo,ZodNumber:eu,ZodBigInt:tu,ZodBoolean:Zm,ZodDate:gd,ZodSymbol:iv,ZodUndefined:Ym,ZodNull:Xm,ZodAny:hh,ZodUnknown:fd,ZodNever:Bl,ZodVoid:ov,ZodArray:Uo,ZodObject:Gr,ZodUnion:Jm,ZodDiscriminatedUnion:vw,ZodIntersection:Qm,ZodTuple:Us,ZodRecord:e0,ZodMap:sv,ZodSet:yd,ZodFunction:nh,ZodLazy:t0,ZodLiteral:n0,ZodEnum:nu,ZodNativeEnum:r0,ZodPromise:ph,ZodEffects:Ko,ZodTransformer:Ko,ZodOptional:Ho,ZodNullable:ru,ZodDefault:a0,ZodCatch:i0,ZodNaN:lv,BRAND:UV,ZodBranded:jC,ZodPipeline:Q0,ZodReadonly:o0,custom:nj,Schema:Mn,ZodSchema:Mn,late:HV,get ZodFirstPartyTypeKind(){return zt},coerce:EG,any:XV,array:tG,bigint:GV,boolean:ij,date:WV,discriminatedUnion:iG,effect:b3,enum:pG,function:dG,instanceof:qV,intersection:oG,lazy:fG,literal:hG,map:cG,nan:VV,nativeEnum:mG,never:QV,null:YV,nullable:bG,number:aj,object:nG,oboolean:SG,onumber:xG,optional:yG,ostring:_G,pipeline:wG,preprocess:vG,promise:gG,record:lG,set:uG,strictObject:rG,string:rj,symbol:KV,transformer:b3,tuple:sG,undefined:ZV,union:aG,unknown:JV,void:eG,NEVER:CG,ZodIssueCode:Pt,quotelessJson:bV,ZodError:Qi});function kG({prompt:e,useLegacyFunctionCalling:t=!1,systemMessageMode:n="system"}){const r=[],a=[];for(const{role:i,content:o}of e)switch(i){case"system":{switch(n){case"system":{r.push({role:"system",content:o});break}case"developer":{r.push({role:"developer",content:o});break}case"remove":{a.push({type:"other",message:"system messages are removed for this model"});break}default:{const s=n;throw new Error(`Unsupported system message mode: ${s}`)}}break}case"user":{if(o.length===1&&o[0].type==="text"){r.push({role:"user",content:o[0].text});break}r.push({role:"user",content:o.map((s,l)=>{var u,d,h,p;switch(s.type){case"text":return{type:"text",text:s.text};case"image":return{type:"image_url",image_url:{url:s.image instanceof URL?s.image.toString():`data:${(u=s.mimeType)!=null?u:"image/jpeg"};base64,${dh(s.image)}`,detail:(h=(d=s.providerMetadata)==null?void 0:d.openai)==null?void 0:h.imageDetail}};case"file":{if(s.data instanceof URL)throw new Cr({functionality:"'File content parts with URL data' functionality not supported."});switch(s.mimeType){case"audio/wav":return{type:"input_audio",input_audio:{data:s.data,format:"wav"}};case"audio/mp3":case"audio/mpeg":return{type:"input_audio",input_audio:{data:s.data,format:"mp3"}};case"application/pdf":return{type:"file",file:{filename:(p=s.filename)!=null?p:`part-${l}.pdf`,file_data:`data:application/pdf;base64,${s.data}`}};default:throw new Cr({functionality:`File content part type ${s.mimeType} in user messages`})}}}})});break}case"assistant":{let s="";const l=[];for(const u of o)switch(u.type){case"text":{s+=u.text;break}case"tool-call":{l.push({id:u.toolCallId,type:"function",function:{name:u.toolName,arguments:JSON.stringify(u.args)}});break}}if(t){if(l.length>1)throw new Cr({functionality:"useLegacyFunctionCalling with multiple tool calls in one message"});r.push({role:"assistant",content:s,function_call:l.length>0?l[0].function:void 0})}else r.push({role:"assistant",content:s,tool_calls:l.length>0?l:void 0});break}case"tool":{for(const s of o)t?r.push({role:"function",name:s.toolName,content:JSON.stringify(s.result)}):r.push({role:"tool",tool_call_id:s.toolCallId,content:JSON.stringify(s.result)});break}default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return{messages:r,warnings:a}}function v3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function cv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var MC=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),au=WD({errorSchema:MC,errorToMessage:e=>e.error.message});function uv({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function TG({mode:e,useLegacyFunctionCalling:t=!1,structuredOutputs:n}){var r;const a=(r=e.tools)!=null&&r.length?e.tools:void 0,i=[];if(a==null)return{tools:void 0,tool_choice:void 0,toolWarnings:i};const o=e.toolChoice;if(t){const u=[];for(const h of a)h.type==="provider-defined"?i.push({type:"unsupported-tool",tool:h}):u.push({name:h.name,description:h.description,parameters:h.parameters});if(o==null)return{functions:u,function_call:void 0,toolWarnings:i};switch(o.type){case"auto":case"none":case void 0:return{functions:u,function_call:void 0,toolWarnings:i};case"required":throw new Cr({functionality:"useLegacyFunctionCalling and toolChoice: required"});default:return{functions:u,function_call:{name:o.toolName},toolWarnings:i}}}const s=[];for(const u of a)u.type==="provider-defined"?i.push({type:"unsupported-tool",tool:u}):s.push({type:"function",function:{name:u.name,description:u.description,parameters:u.parameters,strict:n?!0:void 0}});if(o==null)return{tools:s,tool_choice:void 0,toolWarnings:i};const l=o.type;switch(l){case"auto":case"none":case"required":return{tools:s,tool_choice:l,toolWarnings:i};case"tool":return{tools:s,tool_choice:{type:"function",function:{name:o.toolName}},toolWarnings:i};default:{const u=l;throw new Cr({functionality:`Unsupported tool choice type: ${u}`})}}}var AG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:c2(this.modelId)}get defaultObjectGenerationMode(){return IG(this.modelId)?"tool":this.supportsStructuredOutputs?"json":"tool"}get provider(){return this.config.provider}get supportsImageUrls(){return!this.settings.downloadImages}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var p,g,v,b,_,x,S,E;const C=e.type,k=[];i!=null&&k.push({type:"unsupported-setting",setting:"topK"}),(u==null?void 0:u.type)==="json"&&u.schema!=null&&!this.supportsStructuredOutputs&&k.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const R=this.settings.useLegacyFunctionCalling;if(R&&this.settings.parallelToolCalls===!0)throw new Cr({functionality:"useLegacyFunctionCalling with parallelToolCalls"});if(R&&this.supportsStructuredOutputs)throw new Cr({functionality:"structuredOutputs with useLegacyFunctionCalling"});const{messages:D,warnings:O}=kG({prompt:t,useLegacyFunctionCalling:R,systemMessageMode:OG(this.modelId)});k.push(...O);const L={model:this.modelId,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(u==null?void 0:u.type)==="json"?this.supportsStructuredOutputs&&u.schema!=null?{type:"json_schema",json_schema:{schema:u.schema,strict:!0,name:(p=u.name)!=null?p:"response",description:u.description}}:{type:"json_object"}:void 0,stop:l,seed:d,max_completion_tokens:(g=h==null?void 0:h.openai)==null?void 0:g.maxCompletionTokens,store:(v=h==null?void 0:h.openai)==null?void 0:v.store,metadata:(b=h==null?void 0:h.openai)==null?void 0:b.metadata,prediction:(_=h==null?void 0:h.openai)==null?void 0:_.prediction,reasoning_effort:(S=(x=h==null?void 0:h.openai)==null?void 0:x.reasoningEffort)!=null?S:this.settings.reasoningEffort,messages:D};switch(c2(this.modelId)&&(L.temperature!=null&&(L.temperature=void 0,k.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),L.top_p!=null&&(L.top_p=void 0,k.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"})),L.frequency_penalty!=null&&(L.frequency_penalty=void 0,k.push({type:"unsupported-setting",setting:"frequencyPenalty",details:"frequencyPenalty is not supported for reasoning models"})),L.presence_penalty!=null&&(L.presence_penalty=void 0,k.push({type:"unsupported-setting",setting:"presencePenalty",details:"presencePenalty is not supported for reasoning models"})),L.logit_bias!=null&&(L.logit_bias=void 0,k.push({type:"other",message:"logitBias is not supported for reasoning models"})),L.logprobs!=null&&(L.logprobs=void 0,k.push({type:"other",message:"logprobs is not supported for reasoning models"})),L.top_logprobs!=null&&(L.top_logprobs=void 0,k.push({type:"other",message:"topLogprobs is not supported for reasoning models"})),L.max_tokens!=null&&(L.max_completion_tokens==null&&(L.max_completion_tokens=L.max_tokens),L.max_tokens=void 0)),C){case"regular":{const{tools:B,tool_choice:Y,functions:F,function_call:Z,toolWarnings:q}=TG({mode:e,useLegacyFunctionCalling:R,structuredOutputs:this.supportsStructuredOutputs});return{args:{...L,tools:B,tool_choice:Y,functions:F,function_call:Z},warnings:[...k,...q]}}case"object-json":return{args:{...L,response_format:this.supportsStructuredOutputs&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,strict:!0,name:(E=e.name)!=null?E:"response",description:e.description}}:{type:"json_object"}},warnings:k};case"object-tool":return{args:R?{...L,function_call:{name:e.tool.name},functions:[{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}]}:{...L,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:this.supportsStructuredOutputs?!0:void 0}}]},warnings:k};default:{const B=C;throw new Error(`Unsupported type: ${B}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,l;const{args:u,warnings:d}=this.getArgs(e),{responseHeaders:h,value:p,rawValue:g}=await Wo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Bs(this.config.headers(),e.headers),body:u,failedResponseHandler:au,successfulResponseHandler:Td(NG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:v,...b}=u,_=p.choices[0],x=(t=p.usage)==null?void 0:t.completion_tokens_details,S=(n=p.usage)==null?void 0:n.prompt_tokens_details,E={openai:{}};return(x==null?void 0:x.reasoning_tokens)!=null&&(E.openai.reasoningTokens=x==null?void 0:x.reasoning_tokens),(x==null?void 0:x.accepted_prediction_tokens)!=null&&(E.openai.acceptedPredictionTokens=x==null?void 0:x.accepted_prediction_tokens),(x==null?void 0:x.rejected_prediction_tokens)!=null&&(E.openai.rejectedPredictionTokens=x==null?void 0:x.rejected_prediction_tokens),(S==null?void 0:S.cached_tokens)!=null&&(E.openai.cachedPromptTokens=S==null?void 0:S.cached_tokens),{text:(r=_.message.content)!=null?r:void 0,toolCalls:this.settings.useLegacyFunctionCalling&&_.message.function_call?[{toolCallType:"function",toolCallId:Rs(),toolName:_.message.function_call.name,args:_.message.function_call.arguments}]:(a=_.message.tool_calls)==null?void 0:a.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:Rs(),toolName:C.function.name,args:C.function.arguments}}),finishReason:cv(_.finish_reason),usage:{promptTokens:(o=(i=p.usage)==null?void 0:i.prompt_tokens)!=null?o:NaN,completionTokens:(l=(s=p.usage)==null?void 0:s.completion_tokens)!=null?l:NaN},rawCall:{rawPrompt:v,rawSettings:b},rawResponse:{headers:h,body:g},request:{body:JSON.stringify(u)},response:uv(p),warnings:d,logprobs:v3(_.logprobs),providerMetadata:E}}async doStream(e){if(this.settings.simulateStreaming){const b=await this.doGenerate(e);return{stream:new ReadableStream({start(x){if(x.enqueue({type:"response-metadata",...b.response}),b.text&&x.enqueue({type:"text-delta",textDelta:b.text}),b.toolCalls)for(const S of b.toolCalls)x.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:S.toolCallId,toolName:S.toolName,argsTextDelta:S.args}),x.enqueue({type:"tool-call",...S});x.enqueue({type:"finish",finishReason:b.finishReason,usage:b.usage,logprobs:b.logprobs,providerMetadata:b.providerMetadata}),x.close()}}),rawCall:b.rawCall,rawResponse:b.rawResponse,warnings:b.warnings}}const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Wo({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:Bs(this.config.headers(),e.headers),body:r,failedResponseHandler:au,successfulResponseHandler:DC(RG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:o,...s}=t,l=[];let u="unknown",d={promptTokens:void 0,completionTokens:void 0},h,p=!0;const{useLegacyFunctionCalling:g}=this.settings,v={openai:{}};return{stream:i.pipeThrough(new TransformStream({transform(b,_){var x,S,E,C,k,R,D,O,L,B,Y,F;if(!b.success){u="error",_.enqueue({type:"error",error:b.error});return}const Z=b.value;if("error"in Z){u="error",_.enqueue({type:"error",error:Z.error});return}if(p&&(p=!1,_.enqueue({type:"response-metadata",...uv(Z)})),Z.usage!=null){const{prompt_tokens:ee,completion_tokens:ie,prompt_tokens_details:U,completion_tokens_details:Q}=Z.usage;d={promptTokens:ee??void 0,completionTokens:ie??void 0},(Q==null?void 0:Q.reasoning_tokens)!=null&&(v.openai.reasoningTokens=Q==null?void 0:Q.reasoning_tokens),(Q==null?void 0:Q.accepted_prediction_tokens)!=null&&(v.openai.acceptedPredictionTokens=Q==null?void 0:Q.accepted_prediction_tokens),(Q==null?void 0:Q.rejected_prediction_tokens)!=null&&(v.openai.rejectedPredictionTokens=Q==null?void 0:Q.rejected_prediction_tokens),(U==null?void 0:U.cached_tokens)!=null&&(v.openai.cachedPromptTokens=U==null?void 0:U.cached_tokens)}const q=Z.choices[0];if((q==null?void 0:q.finish_reason)!=null&&(u=cv(q.finish_reason)),(q==null?void 0:q.delta)==null)return;const ne=q.delta;ne.content!=null&&_.enqueue({type:"text-delta",textDelta:ne.content});const ae=v3(q==null?void 0:q.logprobs);ae!=null&&ae.length&&(h===void 0&&(h=[]),h.push(...ae));const re=g&&ne.function_call!=null?[{type:"function",id:Rs(),function:ne.function_call,index:0}]:ne.tool_calls;if(re!=null)for(const ee of re){const ie=ee.index;if(l[ie]==null){if(ee.type!=="function")throw new th({data:ee,message:"Expected 'function' type."});if(ee.id==null)throw new th({data:ee,message:"Expected 'id' to be a string."});if(((x=ee.function)==null?void 0:x.name)==null)throw new th({data:ee,message:"Expected 'function.name' to be a string."});l[ie]={id:ee.id,type:"function",function:{name:ee.function.name,arguments:(S=ee.function.arguments)!=null?S:""},hasFinished:!1};const Q=l[ie];((E=Q.function)==null?void 0:E.name)!=null&&((C=Q.function)==null?void 0:C.arguments)!=null&&(Q.function.arguments.length>0&&_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Q.id,toolName:Q.function.name,argsTextDelta:Q.function.arguments}),m3(Q.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(k=Q.id)!=null?k:Rs(),toolName:Q.function.name,args:Q.function.arguments}),Q.hasFinished=!0));continue}const U=l[ie];U.hasFinished||(((R=ee.function)==null?void 0:R.arguments)!=null&&(U.function.arguments+=(O=(D=ee.function)==null?void 0:D.arguments)!=null?O:""),_.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:(L=ee.function.arguments)!=null?L:""}),((B=U.function)==null?void 0:B.name)!=null&&((Y=U.function)==null?void 0:Y.arguments)!=null&&m3(U.function.arguments)&&(_.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(F=U.id)!=null?F:Rs(),toolName:U.function.name,args:U.function.arguments}),U.hasFinished=!0))}},flush(b){var _,x;b.enqueue({type:"finish",finishReason:u,logprobs:h,usage:{promptTokens:(_=d.promptTokens)!=null?_:NaN,completionTokens:(x=d.completionTokens)!=null?x:NaN},...v!=null?{providerMetadata:v}:{}})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(r)},warnings:n}}},oj=$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish(),prompt_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),completion_tokens_details:$.object({reasoning_tokens:$.number().nullish(),accepted_prediction_tokens:$.number().nullish(),rejected_prediction_tokens:$.number().nullish()}).nullish()}).nullish(),NG=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),function_call:$.object({arguments:$.string(),name:$.string()}).nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullish()})),usage:oj}),RG=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),function_call:$.object({name:$.string().optional(),arguments:$.string().optional()}).nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()})),usage:oj}),MC]);function c2(e){return e==="o1"||e.startsWith("o1-")||e==="o3"||e.startsWith("o3-")}function IG(e){return e.startsWith("gpt-4o-audio-preview")}function OG(e){var t,n;return c2(e)?(n=(t=DG[e])==null?void 0:t.systemMessageMode)!=null?n:"developer":"system"}var DG={"o1-mini":{systemMessageMode:"remove"},"o1-mini-2024-09-12":{systemMessageMode:"remove"},"o1-preview":{systemMessageMode:"remove"},"o1-preview-2024-09-12":{systemMessageMode:"remove"},"o3-mini":{systemMessageMode:"developer"},"o3-mini-2025-01-31":{systemMessageMode:"developer"}};function jG({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new kl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Cr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Cr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new Cr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}function w3(e){return e==null?void 0:e.tokens.map((t,n)=>({token:t,logprob:e.token_logprobs[n],topLogprobs:e.top_logprobs?Object.entries(e.top_logprobs[n]).map(([r,a])=>({token:r,logprob:a})):[]}))}var MG=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h}){var p;const g=e.type,v=[];o!=null&&v.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&v.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:b,stopSequences:_}=jG({prompt:n,inputFormat:t}),x=[..._??[],...u??[]],S={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:l,seed:h,prompt:b,stop:x.length>0?x:void 0};switch(g){case"regular":{if((p=e.tools)!=null&&p.length)throw new Cr({functionality:"tools"});if(e.toolChoice)throw new Cr({functionality:"toolChoice"});return{args:S,warnings:v}}case"object-json":throw new Cr({functionality:"object-json mode"});case"object-tool":throw new Cr({functionality:"object-tool mode"});default:{const E=g;throw new Error(`Unsupported type: ${E}`)}}}async doGenerate(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a,rawValue:i}=await Wo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Bs(this.config.headers(),e.headers),body:t,failedResponseHandler:au,successfulResponseHandler:Td(PG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t,l=a.choices[0];return{text:l.text,usage:{promptTokens:a.usage.prompt_tokens,completionTokens:a.usage.completion_tokens},finishReason:cv(l.finish_reason),logprobs:w3(l.logprobs),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:r,body:i},response:uv(a),warnings:n,request:{body:JSON.stringify(t)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0},{responseHeaders:a,value:i}=await Wo({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:Bs(this.config.headers(),e.headers),body:r,failedResponseHandler:au,successfulResponseHandler:DC(FG),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d,h=!0;return{stream:i.pipeThrough(new TransformStream({transform(p,g){if(!p.success){l="error",g.enqueue({type:"error",error:p.error});return}const v=p.value;if("error"in v){l="error",g.enqueue({type:"error",error:v.error});return}h&&(h=!1,g.enqueue({type:"response-metadata",...uv(v)})),v.usage!=null&&(u={promptTokens:v.usage.prompt_tokens,completionTokens:v.usage.completion_tokens});const b=v.choices[0];(b==null?void 0:b.finish_reason)!=null&&(l=cv(b.finish_reason)),(b==null?void 0:b.text)!=null&&g.enqueue({type:"text-delta",textDelta:b.text});const _=w3(b==null?void 0:b.logprobs);_!=null&&_.length&&(d===void 0&&(d=[]),d.push(..._))},flush(p){p.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},PG=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()})}),FG=$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullish()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),MC]),LG=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.settings.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new RC({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:r,value:a}=await Wo({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:Bs(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:au,successfulResponseHandler:Td($G),abortSignal:n,fetch:this.config.fetch});return{embeddings:a.data.map(i=>i.embedding),usage:a.usage?{tokens:a.usage.prompt_tokens}:void 0,rawResponse:{headers:r}}}},$G=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),BG={"dall-e-3":1,"dall-e-2":10},zG=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e,t;return(t=(e=this.settings.maxImagesPerCall)!=null?e:BG[this.modelId])!=null?t:1}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var l,u,d,h;const p=[];r!=null&&p.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&p.push({type:"unsupported-setting",setting:"seed"});const g=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:v,responseHeaders:b}=await Wo({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:Bs(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json"},failedResponseHandler:au,successfulResponseHandler:Td(UG),abortSignal:s,fetch:this.config.fetch});return{images:v.data.map(_=>_.b64_json),warnings:p,response:{timestamp:g,modelId:this.modelId,headers:b}}}},UG=$.object({data:$.array($.object({b64_json:$.string()}))});function HG({prompt:e,systemMessageMode:t}){const n=[],r=[];for(const{role:a,content:i}of e)switch(a){case"system":{switch(t){case"system":{n.push({role:"system",content:i});break}case"developer":{n.push({role:"developer",content:i});break}case"remove":{r.push({type:"other",message:"system messages are removed for this model"});break}default:{const o=t;throw new Error(`Unsupported system message mode: ${o}`)}}break}case"user":{n.push({role:"user",content:i.map((o,s)=>{var l,u,d,h;switch(o.type){case"text":return{type:"input_text",text:o.text};case"image":return{type:"input_image",image_url:o.image instanceof URL?o.image.toString():`data:${(l=o.mimeType)!=null?l:"image/jpeg"};base64,${dh(o.image)}`,detail:(d=(u=o.providerMetadata)==null?void 0:u.openai)==null?void 0:d.imageDetail};case"file":{if(o.data instanceof URL)throw new Cr({functionality:"File URLs in user messages"});switch(o.mimeType){case"application/pdf":return{type:"input_file",filename:(h=o.filename)!=null?h:`part-${s}.pdf`,file_data:`data:application/pdf;base64,${o.data}`};default:throw new Cr({functionality:"Only PDF files are supported in user messages"})}}}})});break}case"assistant":{for(const o of i)switch(o.type){case"text":{n.push({role:"assistant",content:[{type:"output_text",text:o.text}]});break}case"tool-call":{n.push({type:"function_call",call_id:o.toolCallId,name:o.toolName,arguments:JSON.stringify(o.args)});break}}break}case"tool":{for(const o of i)n.push({type:"function_call_output",call_id:o.toolCallId,output:JSON.stringify(o.result)});break}default:{const o=a;throw new Error(`Unsupported role: ${o}`)}}return{messages:n,warnings:r}}function _3({finishReason:e,hasToolCalls:t}){switch(e){case void 0:case null:return t?"tool-calls":"stop";case"max_output_tokens":return"length";case"content_filter":return"content-filter";default:return t?"tool-calls":"unknown"}}function qG({mode:e,strict:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const l of r)switch(l.type){case"function":o.push({type:"function",name:l.name,description:l.description,parameters:l.parameters,strict:t?!0:void 0});break;case"provider-defined":switch(l.id){case"openai.web_search_preview":o.push({type:"web_search_preview",search_context_size:l.args.searchContextSize,user_location:l.args.userLocation});break;default:a.push({type:"unsupported-tool",tool:l});break}break;default:a.push({type:"unsupported-tool",tool:l});break}if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return i.toolName==="web_search_preview"?{tools:o,tool_choice:{type:"web_search_preview"},toolWarnings:a}:{tools:o,tool_choice:{type:"function",name:i.toolName},toolWarnings:a};default:{const l=s;throw new Cr({functionality:`Unsupported tool choice type: ${l}`})}}}var VG=class{constructor(e,t){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.modelId=e,this.config=t}get provider(){return this.config.provider}getArgs({mode:e,maxTokens:t,temperature:n,stopSequences:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,seed:l,prompt:u,providerMetadata:d,responseFormat:h}){var p,g,v;const b=[],_=sW(this.modelId),x=e.type;i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),l!=null&&b.push({type:"unsupported-setting",setting:"seed"}),o!=null&&b.push({type:"unsupported-setting",setting:"presencePenalty"}),s!=null&&b.push({type:"unsupported-setting",setting:"frequencyPenalty"}),r!=null&&b.push({type:"unsupported-setting",setting:"stopSequences"});const{messages:S,warnings:E}=HG({prompt:u,systemMessageMode:_.systemMessageMode});b.push(...E);const C=hV({provider:"openai",providerOptions:d,schema:lW}),k=(p=C==null?void 0:C.strictSchemas)!=null?p:!0,R={model:this.modelId,input:S,temperature:n,top_p:a,max_output_tokens:t,...(h==null?void 0:h.type)==="json"&&{text:{format:h.schema!=null?{type:"json_schema",strict:k,name:(g=h.name)!=null?g:"response",description:h.description,schema:h.schema}:{type:"json_object"}}},metadata:C==null?void 0:C.metadata,parallel_tool_calls:C==null?void 0:C.parallelToolCalls,previous_response_id:C==null?void 0:C.previousResponseId,store:C==null?void 0:C.store,user:C==null?void 0:C.user,instructions:C==null?void 0:C.instructions,..._.isReasoningModel&&(C==null?void 0:C.reasoningEffort)!=null&&{reasoning:{effort:C==null?void 0:C.reasoningEffort}},..._.requiredAutoTruncation&&{truncation:"auto"}};switch(_.isReasoningModel&&(R.temperature!=null&&(R.temperature=void 0,b.push({type:"unsupported-setting",setting:"temperature",details:"temperature is not supported for reasoning models"})),R.top_p!=null&&(R.top_p=void 0,b.push({type:"unsupported-setting",setting:"topP",details:"topP is not supported for reasoning models"}))),x){case"regular":{const{tools:D,tool_choice:O,toolWarnings:L}=qG({mode:e,strict:k});return{args:{...R,tools:D,tool_choice:O},warnings:[...b,...L]}}case"object-json":return{args:{...R,text:{format:e.schema!=null?{type:"json_schema",strict:k,name:(v=e.name)!=null?v:"response",description:e.description,schema:e.schema}:{type:"json_object"}}},warnings:b};case"object-tool":return{args:{...R,tool_choice:{type:"function",name:e.tool.name},tools:[{type:"function",name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters,strict:k}]},warnings:b};default:{const D=x;throw new Error(`Unsupported type: ${D}`)}}}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=this.getArgs(e),{responseHeaders:l,value:u,rawValue:d}=await Wo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Bs(this.config.headers(),e.headers),body:o,failedResponseHandler:au,successfulResponseHandler:Td($.object({id:$.string(),created_at:$.number(),model:$.string(),output:$.array($.discriminatedUnion("type",[$.object({type:$.literal("message"),role:$.literal("assistant"),content:$.array($.object({type:$.literal("output_text"),text:$.string(),annotations:$.array($.object({type:$.literal("url_citation"),start_index:$.number(),end_index:$.number(),url:$.string(),title:$.string()}))}))}),$.object({type:$.literal("function_call"),call_id:$.string(),name:$.string(),arguments:$.string()}),$.object({type:$.literal("web_search_call")}),$.object({type:$.literal("computer_call")}),$.object({type:$.literal("reasoning")})])),incomplete_details:$.object({reason:$.string()}).nullable(),usage:sj})),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=u.output.filter(g=>g.type==="message").flatMap(g=>g.content).filter(g=>g.type==="output_text"),p=u.output.filter(g=>g.type==="function_call").map(g=>({toolCallType:"function",toolCallId:g.call_id,toolName:g.name,args:g.arguments}));return{text:h.map(g=>g.text).join(`
`),sources:h.flatMap(g=>g.annotations.map(v=>{var b,_,x;return{sourceType:"url",id:(x=(_=(b=this.config).generateId)==null?void 0:_.call(b))!=null?x:Rs(),url:v.url,title:v.title}})),finishReason:_3({finishReason:(t=u.incomplete_details)==null?void 0:t.reason,hasToolCalls:p.length>0}),toolCalls:p.length>0?p:void 0,usage:{promptTokens:u.usage.input_tokens,completionTokens:u.usage.output_tokens},rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:l,body:d},request:{body:JSON.stringify(o)},response:{id:u.id,timestamp:new Date(u.created_at*1e3),modelId:u.model},providerMetadata:{openai:{responseId:u.id,cachedPromptTokens:(r=(n=u.usage.input_tokens_details)==null?void 0:n.cached_tokens)!=null?r:null,reasoningTokens:(i=(a=u.usage.output_tokens_details)==null?void 0:a.reasoning_tokens)!=null?i:null}},warnings:s}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),{responseHeaders:r,value:a}=await Wo({url:this.config.url({path:"/responses",modelId:this.modelId}),headers:Bs(this.config.headers(),e.headers),body:{...t,stream:!0},failedResponseHandler:au,successfulResponseHandler:DC(QG),abortSignal:e.abortSignal,fetch:this.config.fetch}),i=this;let o="unknown",s=NaN,l=NaN,u=null,d=null,h=null;const p={};let g=!1;return{stream:a.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,R,D;if(!v.success){o="error",b.enqueue({type:"error",error:v.error});return}const O=v.value;if(iW(O))O.item.type==="function_call"&&(p[O.output_index]={toolName:O.item.name,toolCallId:O.item.call_id},b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:O.item.call_id,toolName:O.item.name,argsTextDelta:O.item.arguments}));else if(aW(O)){const L=p[O.output_index];L!=null&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:L.toolCallId,toolName:L.toolName,argsTextDelta:O.delta})}else rW(O)?(h=O.response.id,b.enqueue({type:"response-metadata",id:O.response.id,timestamp:new Date(O.response.created_at*1e3),modelId:O.response.model})):eW(O)?b.enqueue({type:"text-delta",textDelta:O.delta}):tW(O)&&O.item.type==="function_call"?(p[O.output_index]=void 0,g=!0,b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:O.item.call_id,toolName:O.item.name,args:O.item.arguments})):nW(O)?(o=_3({finishReason:(_=O.response.incomplete_details)==null?void 0:_.reason,hasToolCalls:g}),s=O.response.usage.input_tokens,l=O.response.usage.output_tokens,u=(S=(x=O.response.usage.input_tokens_details)==null?void 0:x.cached_tokens)!=null?S:u,d=(C=(E=O.response.usage.output_tokens_details)==null?void 0:E.reasoning_tokens)!=null?C:d):oW(O)&&b.enqueue({type:"source",source:{sourceType:"url",id:(D=(R=(k=i.config).generateId)==null?void 0:R.call(k))!=null?D:Rs(),url:O.annotation.url,title:O.annotation.title}})},flush(v){v.enqueue({type:"finish",finishReason:o,usage:{promptTokens:s,completionTokens:l},...(u!=null||d!=null)&&{providerMetadata:{openai:{responseId:h,cachedPromptTokens:u,reasoningTokens:d}}}})}})),rawCall:{rawPrompt:void 0,rawSettings:{}},rawResponse:{headers:r},request:{body:JSON.stringify(t)},warnings:n}}},sj=$.object({input_tokens:$.number(),input_tokens_details:$.object({cached_tokens:$.number().nullish()}).nullish(),output_tokens:$.number(),output_tokens_details:$.object({reasoning_tokens:$.number().nullish()}).nullish()}),GG=$.object({type:$.literal("response.output_text.delta"),delta:$.string()}),WG=$.object({type:$.enum(["response.completed","response.incomplete"]),response:$.object({incomplete_details:$.object({reason:$.string()}).nullish(),usage:sj})}),KG=$.object({type:$.literal("response.created"),response:$.object({id:$.string(),created_at:$.number(),model:$.string()})}),ZG=$.object({type:$.literal("response.output_item.done"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string(),status:$.literal("completed")})])}),YG=$.object({type:$.literal("response.function_call_arguments.delta"),item_id:$.string(),output_index:$.number(),delta:$.string()}),XG=$.object({type:$.literal("response.output_item.added"),output_index:$.number(),item:$.discriminatedUnion("type",[$.object({type:$.literal("message")}),$.object({type:$.literal("function_call"),id:$.string(),call_id:$.string(),name:$.string(),arguments:$.string()})])}),JG=$.object({type:$.literal("response.output_text.annotation.added"),annotation:$.object({type:$.literal("url_citation"),url:$.string(),title:$.string()})}),QG=$.union([GG,WG,KG,ZG,YG,XG,JG,$.object({type:$.string()}).passthrough()]);function eW(e){return e.type==="response.output_text.delta"}function tW(e){return e.type==="response.output_item.done"}function nW(e){return e.type==="response.completed"||e.type==="response.incomplete"}function rW(e){return e.type==="response.created"}function aW(e){return e.type==="response.function_call_arguments.delta"}function iW(e){return e.type==="response.output_item.added"}function oW(e){return e.type==="response.output_text.annotation.added"}function sW(e){return e.startsWith("o")?e.startsWith("o1-mini")||e.startsWith("o1-preview")?{isReasoningModel:!0,systemMessageMode:"remove",requiredAutoTruncation:!1}:{isReasoningModel:!0,systemMessageMode:"developer",requiredAutoTruncation:!1}:{isReasoningModel:!1,systemMessageMode:"system",requiredAutoTruncation:!1}}var lW=$.object({metadata:$.any().nullish(),parallelToolCalls:$.boolean().nullish(),previousResponseId:$.string().nullish(),store:$.boolean().nullish(),user:$.string().nullish(),reasoningEffort:$.string().nullish(),strictSchemas:$.boolean().nullish(),instructions:$.string().nullish()}),cW=$.object({});function uW({searchContextSize:e,userLocation:t}={}){return{type:"provider-defined",id:"openai.web_search_preview",args:{searchContextSize:e,userLocation:t},parameters:cW}}var dW={webSearchPreview:uW};function lj(e={}){var t,n,r;const a=(t=ZD(e.baseURL))!=null?t:"https://api.openai.com/v1",i=(n=e.compatibility)!=null?n:"compatible",o=(r=e.name)!=null?r:"openai",s=()=>({Authorization:`Bearer ${oV({apiKey:e.apiKey,environmentVariableName:"OPENAI_API_KEY",description:"OpenAI"})}`,"OpenAI-Organization":e.organization,"OpenAI-Project":e.project,...e.headers}),l=(b,_={})=>new AG(b,_,{provider:`${o}.chat`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),u=(b,_={})=>new MG(b,_,{provider:`${o}.completion`,url:({path:x})=>`${a}${x}`,headers:s,compatibility:i,fetch:e.fetch}),d=(b,_={})=>new LG(b,_,{provider:`${o}.embedding`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),h=(b,_={})=>new zG(b,_,{provider:`${o}.image`,url:({path:x})=>`${a}${x}`,headers:s,fetch:e.fetch}),p=(b,_)=>{if(new.target)throw new Error("The OpenAI model function cannot be called with the new keyword.");return b==="gpt-3.5-turbo-instruct"?u(b,_):l(b,_)},g=b=>new VG(b,{provider:`${o}.responses`,url:({path:_})=>`${a}${_}`,headers:s,fetch:e.fetch}),v=function(b,_){return p(b,_)};return v.languageModel=p,v.chat=l,v.completion=u,v.responses=g,v.embedding=d,v.textEmbedding=d,v.textEmbeddingModel=d,v.image=h,v.imageModel=h,v.tools=dW,v}lj({compatibility:"strict"});var cj="vercel.ai.error",fW=Symbol.for(cj),uj,hW=class dj extends Error{constructor({name:t,message:n,cause:r}){super(n),this[uj]=!0,this.name=t,this.cause=r}static isInstance(t){return dj.hasMarker(t,cj)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};uj=fW;var ai=hW,fj="AI_APICallError",hj=`vercel.ai.error.${fj}`,pW=Symbol.for(hj),pj,Rl=class extends ai{constructor({message:t,url:n,requestBodyValues:r,statusCode:a,responseHeaders:i,responseBody:o,cause:s,isRetryable:l=a!=null&&(a===408||a===409||a===429||a>=500),data:u}){super({name:fj,message:t,cause:s}),this[pj]=!0,this.url=n,this.requestBodyValues=r,this.statusCode=a,this.responseHeaders=i,this.responseBody=o,this.isRetryable=l,this.data=u}static isInstance(t){return ai.hasMarker(t,hj)}};pj=pW;var mj="AI_EmptyResponseBodyError",gj=`vercel.ai.error.${mj}`,mW=Symbol.for(gj),yj,gW=class extends ai{constructor({message:t="Empty response body"}={}){super({name:mj,message:t}),this[yj]=!0}static isInstance(t){return ai.hasMarker(t,gj)}};yj=mW;function bj(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var vj="AI_InvalidArgumentError",wj=`vercel.ai.error.${vj}`,yW=Symbol.for(wj),_j,xj=class extends ai{constructor({message:t,cause:n,argument:r}){super({name:vj,message:t,cause:n}),this[_j]=!0,this.argument=r}static isInstance(t){return ai.hasMarker(t,wj)}};_j=yW;var Sj="AI_JSONParseError",Ej=`vercel.ai.error.${Sj}`,bW=Symbol.for(Ej),Cj,dv=class extends ai{constructor({text:t,cause:n}){super({name:Sj,message:`JSON parsing failed: Text: ${t}.
Error message: ${bj(n)}`,cause:n}),this[Cj]=!0,this.text=t}static isInstance(t){return ai.hasMarker(t,Ej)}};Cj=bW;var kj="AI_LoadAPIKeyError",Tj=`vercel.ai.error.${kj}`,vW=Symbol.for(Tj),Aj,ab=class extends ai{constructor({message:t}){super({name:kj,message:t}),this[Aj]=!0}static isInstance(t){return ai.hasMarker(t,Tj)}};Aj=vW;var Nj="AI_TooManyEmbeddingValuesForCallError",Rj=`vercel.ai.error.${Nj}`,wW=Symbol.for(Rj),Ij,_W=class extends ai{constructor(e){super({name:Nj,message:`Too many values for a single embedding call. The ${e.provider} model "${e.modelId}" can only embed up to ${e.maxEmbeddingsPerCall} values per call, but ${e.values.length} values were provided.`}),this[Ij]=!0,this.provider=e.provider,this.modelId=e.modelId,this.maxEmbeddingsPerCall=e.maxEmbeddingsPerCall,this.values=e.values}static isInstance(e){return ai.hasMarker(e,Rj)}};Ij=wW;var Oj="AI_TypeValidationError",Dj=`vercel.ai.error.${Oj}`,xW=Symbol.for(Dj),jj,SW=class u2 extends ai{constructor({value:t,cause:n}){super({name:Oj,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${bj(n)}`,cause:n}),this[jj]=!0,this.value=t}static isInstance(t){return ai.hasMarker(t,Dj)}static wrap({value:t,cause:n}){return u2.isInstance(n)&&n.value===t?n:new u2({value:t,cause:n})}};jj=xW;var fv=SW,Mj="AI_UnsupportedFunctionalityError",Pj=`vercel.ai.error.${Mj}`,EW=Symbol.for(Pj),Fj,zb=class extends ai{constructor({functionality:t,message:n=`'${t}' functionality not supported.`}){super({name:Mj,message:n}),this[Fj]=!0,this.functionality=t}static isInstance(t){return ai.hasMarker(t,Pj)}};Fj=EW;let CW=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};var kW={};function d2(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function TW(){let e="",t,n=[],r,a;function i(l,u){if(l===""){o(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){s(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);s(h,g)}function o(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=AW(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),o(l)}})}function AW(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function ww(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var NW=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=CW(n,t);if(e==null)return a;if(n.includes(r))throw new xj({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},RW=NW();function IW(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function $x(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function OW({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new ab({message:`${r} API key must be a string.`});if(typeof Xr>"u")throw new ab({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=kW[t],e==null)throw new ab({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new ab({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var f2=Symbol.for("vercel.ai.validator");function DW(e){return{[f2]:!0,validate:e}}function jW(e){return typeof e=="object"&&e!==null&&f2 in e&&e[f2]===!0&&"validate"in e}function MW(e){return jW(e)?e:PW(e)}function PW(e){return DW(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function FW({value:e,schema:t}){const n=PC({value:e,schema:t});if(!n.success)throw fv.wrap({value:e,cause:n.error});return n.value}function PC({value:e,schema:t}){const n=MW(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:fv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:fv.wrap({value:e,cause:r})}}}function LW({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:FW({value:n,schema:t})}catch(n){throw dv.isInstance(n)||fv.isInstance(n)?n:new dv({text:e,cause:n})}}function Lj({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=PC({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:dv.isInstance(n)?n:new dv({text:e,cause:n})}}}function $W({provider:e,providerOptions:t,schema:n}){if((t==null?void 0:t[e])==null)return;const r=PC({value:t[e],schema:n});if(!r.success)throw new xj({argument:"providerOptions",message:`invalid ${e} provider options`,cause:r.error});return r.value}var BW=()=>globalThis.fetch,h2=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>zW({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),zW=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=BW()})=>{try{const s=await o(e,{method:"POST",headers:IW(t),body:n.content,signal:i}),l=ww(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw $x(d)||Rl.isInstance(d)?d:new Rl({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&($x(u)||Rl.isInstance(u))?u:new Rl({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if($x(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new Rl({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}};async function p2(e){return typeof e=="function"&&(e=e()),Promise.resolve(e)}var UW=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=ww(r);if(o.trim()==="")return{responseHeaders:s,value:new Rl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=LW({text:o,schema:e});return{responseHeaders:s,value:new Rl({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new Rl({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},HW=e=>async({response:t})=>{const n=ww(t);if(t.body==null)throw new gW({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(TW()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(Lj({text:r,schema:e}))}}))}},$j=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=Lj({text:a,schema:e}),o=ww(t);if(!i.success)throw new Rl({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:qW}=globalThis;function VW(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return qW(t)}function GW(e){return e==null?void 0:e.replace(/\/$/,"")}function bo(e){if(WW(e))return;if(typeof e=="boolean")return{type:"boolean",properties:{}};const{type:t,description:n,required:r,properties:a,items:i,allOf:o,anyOf:s,oneOf:l,format:u,const:d,minLength:h,enum:p}=e,g={};if(n&&(g.description=n),r&&(g.required=r),u&&(g.format=u),d!==void 0&&(g.enum=[d]),t&&(Array.isArray(t)?t.includes("null")?(g.type=t.filter(v=>v!=="null")[0],g.nullable=!0):g.type=t:t==="null"?g.type="null":g.type=t),p!==void 0&&(g.enum=p),a!=null&&(g.properties=Object.entries(a).reduce((v,[b,_])=>(v[b]=bo(_),v),{})),i&&(g.items=Array.isArray(i)?i.map(bo):bo(i)),o&&(g.allOf=o.map(bo)),s)if(s.some(v=>typeof v=="object"&&(v==null?void 0:v.type)==="null")){const v=s.filter(b=>!(typeof b=="object"&&(b==null?void 0:b.type)==="null"));if(v.length===1){const b=bo(v[0]);typeof b=="object"&&(g.nullable=!0,Object.assign(g,b))}else g.anyOf=v.map(bo),g.nullable=!0}else g.anyOf=s.map(bo);return l&&(g.oneOf=l.map(bo)),h!==void 0&&(g.minLength=h),g}function WW(e){return e!=null&&typeof e=="object"&&e.type==="object"&&(e.properties==null||Object.keys(e.properties).length===0)}function KW(e){var t,n;const r=[],a=[];let i=!0;for(const{role:o,content:s}of e)switch(o){case"system":{if(!i)throw new zb({functionality:"system messages are only supported at the beginning of the conversation"});r.push({text:s});break}case"user":{i=!1;const l=[];for(const u of s)switch(u.type){case"text":{l.push({text:u.text});break}case"image":{l.push(u.image instanceof URL?{fileData:{mimeType:(t=u.mimeType)!=null?t:"image/jpeg",fileUri:u.image.toString()}}:{inlineData:{mimeType:(n=u.mimeType)!=null?n:"image/jpeg",data:VW(u.image)}});break}case"file":{l.push(u.data instanceof URL?{fileData:{mimeType:u.mimeType,fileUri:u.data.toString()}}:{inlineData:{mimeType:u.mimeType,data:u.data}});break}}a.push({role:"user",parts:l});break}case"assistant":{i=!1,a.push({role:"model",parts:s.map(l=>{switch(l.type){case"text":return l.text.length===0?void 0:{text:l.text};case"file":{if(l.mimeType!=="image/png")throw new zb({functionality:"Only PNG images are supported in assistant messages"});if(l.data instanceof URL)throw new zb({functionality:"File data URLs in assistant messages are not supported"});return{inlineData:{mimeType:l.mimeType,data:l.data}}}case"tool-call":return{functionCall:{name:l.toolName,args:l.args}}}}).filter(l=>l!==void 0)});break}case"tool":{i=!1,a.push({role:"user",parts:s.map(l=>({functionResponse:{name:l.toolName,response:{name:l.toolName,content:l.result}}}))});break}}return{systemInstruction:r.length>0?{parts:r}:void 0,contents:a}}function x3(e){return e.includes("/")?e:`models/${e}`}var ZW=$.object({error:$.object({code:$.number().nullable(),message:$.string(),status:$.string()})}),m2=UW({errorSchema:ZW,errorToMessage:e=>e.error.message});function YW(e,t,n,r){var a,i;const o=(a=e.tools)!=null&&a.length?e.tools:void 0,s=[],l=r.includes("gemini-2"),u=r.includes("gemini-1.5-flash")&&!r.includes("-8b");if(t)return{tools:l?{googleSearch:{}}:{googleSearchRetrieval:!u||!n?{}:{dynamicRetrievalConfig:n}},toolConfig:void 0,toolWarnings:s};if(o==null)return{tools:void 0,toolConfig:void 0,toolWarnings:s};const d=[];for(const g of o)g.type==="provider-defined"?s.push({type:"unsupported-tool",tool:g}):d.push({name:g.name,description:(i=g.description)!=null?i:"",parameters:bo(g.parameters)});const h=e.toolChoice;if(h==null)return{tools:{functionDeclarations:d},toolConfig:void 0,toolWarnings:s};const p=h.type;switch(p){case"auto":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"AUTO"}},toolWarnings:s};case"none":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"NONE"}},toolWarnings:s};case"required":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY"}},toolWarnings:s};case"tool":return{tools:{functionDeclarations:d},toolConfig:{functionCallingConfig:{mode:"ANY",allowedFunctionNames:[h.toolName]}},toolWarnings:s};default:{const g=p;throw new zb({functionality:`Unsupported tool choice type: ${g}`})}}}function S3({finishReason:e,hasToolCalls:t}){switch(e){case"STOP":return t?"tool-calls":"stop";case"MAX_TOKENS":return"length";case"IMAGE_SAFETY":case"RECITATION":case"SAFETY":case"BLOCKLIST":case"PROHIBITED_CONTENT":case"SPII":return"content-filter";case"FINISH_REASON_UNSPECIFIED":case"OTHER":return"other";case"MALFORMED_FUNCTION_CALL":return"error";default:return"unknown"}}var XW=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1,this.modelId=e,this.settings=t,this.config=n}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!0}get provider(){return this.config.provider}async getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,stopSequences:l,responseFormat:u,seed:d,providerMetadata:h}){var p,g;const v=e.type,b=[],_=$W({provider:"google",providerOptions:h,schema:tK}),x={maxOutputTokens:n,temperature:r,topK:i,topP:a,frequencyPenalty:o,presencePenalty:s,stopSequences:l,seed:d,responseMimeType:(u==null?void 0:u.type)==="json"?"application/json":void 0,responseSchema:(u==null?void 0:u.type)==="json"&&u.schema!=null&&this.supportsStructuredOutputs?bo(u.schema):void 0,...this.settings.audioTimestamp&&{audioTimestamp:this.settings.audioTimestamp},responseModalities:_==null?void 0:_.responseModalities},{contents:S,systemInstruction:E}=KW(t);switch(v){case"regular":{const{tools:C,toolConfig:k,toolWarnings:R}=YW(e,(p=this.settings.useSearchGrounding)!=null?p:!1,this.settings.dynamicRetrievalConfig,this.modelId);return{args:{generationConfig:x,contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,tools:C,toolConfig:k,cachedContent:this.settings.cachedContent},warnings:[...b,...R]}}case"object-json":return{args:{generationConfig:{...x,responseMimeType:"application/json",responseSchema:e.schema!=null&&this.supportsStructuredOutputs?bo(e.schema):void 0},contents:S,systemInstruction:E,safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};case"object-tool":return{args:{generationConfig:x,contents:S,tools:{functionDeclarations:[{name:e.tool.name,description:(g=e.tool.description)!=null?g:"",parameters:bo(e.tool.parameters)}]},toolConfig:{functionCallingConfig:{mode:"ANY"}},safetySettings:this.settings.safetySettings,cachedContent:this.settings.cachedContent},warnings:b};default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}supportsUrl(e){return this.config.isSupportedUrl(e)}async doGenerate(e){var t,n,r,a,i;const{args:o,warnings:s}=await this.getArgs(e),l=JSON.stringify(o),u=d2(await p2(this.config.headers),e.headers),{responseHeaders:d,value:h,rawValue:p}=await h2({url:`${this.config.baseURL}/${x3(this.modelId)}:generateContent`,headers:u,body:o,failedResponseHandler:m2,successfulResponseHandler:$j(QW),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:g,...v}=o,b=h.candidates[0],_=b.content==null||typeof b.content!="object"||!("parts"in b.content)?[]:b.content.parts,x=E3({parts:_,generateId:this.config.generateId}),S=h.usageMetadata;return{text:C3(_),files:(t=k3(_))==null?void 0:t.map(E=>({data:E.inlineData.data,mimeType:E.inlineData.mimeType})),toolCalls:x,finishReason:S3({finishReason:b.finishReason,hasToolCalls:x!=null&&x.length>0}),usage:{promptTokens:(n=S==null?void 0:S.promptTokenCount)!=null?n:NaN,completionTokens:(r=S==null?void 0:S.candidatesTokenCount)!=null?r:NaN},rawCall:{rawPrompt:g,rawSettings:v},rawResponse:{headers:d,body:p},warnings:s,providerMetadata:{google:{groundingMetadata:(a=b.groundingMetadata)!=null?a:null,safetyRatings:(i=b.safetyRatings)!=null?i:null}},sources:T3({groundingMetadata:b.groundingMetadata,generateId:this.config.generateId}),request:{body:l}}}async doStream(e){const{args:t,warnings:n}=await this.getArgs(e),r=JSON.stringify(t),a=d2(await p2(this.config.headers),e.headers),{responseHeaders:i,value:o}=await h2({url:`${this.config.baseURL}/${x3(this.modelId)}:streamGenerateContent?alt=sse`,headers:a,body:t,failedResponseHandler:m2,successfulResponseHandler:HW(eK),abortSignal:e.abortSignal,fetch:this.config.fetch}),{contents:s,...l}=t;let u="unknown",d={promptTokens:Number.NaN,completionTokens:Number.NaN},h;const p=this.config.generateId;let g=!1;return{stream:o.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k;if(!v.success){b.enqueue({type:"error",error:v.error});return}const R=v.value,D=R.usageMetadata;D!=null&&(d={promptTokens:(_=D.promptTokenCount)!=null?_:NaN,completionTokens:(x=D.candidatesTokenCount)!=null?x:NaN});const O=(S=R.candidates)==null?void 0:S[0];if(O==null)return;const L=O.content;if(L!=null){const B=C3(L.parts);B!=null&&b.enqueue({type:"text-delta",textDelta:B});const Y=k3(L.parts);if(Y!=null)for(const Z of Y)b.enqueue({type:"file",mimeType:Z.inlineData.mimeType,data:Z.inlineData.data});const F=E3({parts:L.parts,generateId:p});if(F!=null)for(const Z of F)b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,argsTextDelta:Z.args}),b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:Z.toolCallId,toolName:Z.toolName,args:Z.args}),g=!0}if(O.finishReason!=null){u=S3({finishReason:O.finishReason,hasToolCalls:g});const B=(E=T3({groundingMetadata:O.groundingMetadata,generateId:p}))!=null?E:[];for(const Y of B)b.enqueue({type:"source",source:Y});h={google:{groundingMetadata:(C=O.groundingMetadata)!=null?C:null,safetyRatings:(k=O.safetyRatings)!=null?k:null}}}},flush(v){v.enqueue({type:"finish",finishReason:u,usage:d,providerMetadata:h})}})),rawCall:{rawPrompt:s,rawSettings:l},rawResponse:{headers:i},warnings:n,request:{body:r}}}};function E3({parts:e,generateId:t}){const n=e==null?void 0:e.filter(r=>"functionCall"in r);return n==null||n.length===0?void 0:n.map(r=>({toolCallType:"function",toolCallId:t(),toolName:r.functionCall.name,args:JSON.stringify(r.functionCall.args)}))}function C3(e){const t=e==null?void 0:e.filter(n=>"text"in n);return t==null||t.length===0?void 0:t.map(n=>n.text).join("")}function k3(e){return e==null?void 0:e.filter(t=>"inlineData"in t)}function T3({groundingMetadata:e,generateId:t}){var n;return(n=e==null?void 0:e.groundingChunks)==null?void 0:n.filter(r=>r.web!=null).map(r=>({sourceType:"url",id:t(),url:r.web.uri,title:r.web.title}))}var Bj=$.object({role:$.string(),parts:$.array($.union([$.object({text:$.string()}),$.object({functionCall:$.object({name:$.string(),args:$.unknown()})}),$.object({inlineData:$.object({mimeType:$.string(),data:$.string()})})])).nullish()}),JW=$.object({web:$.object({uri:$.string(),title:$.string()}).nullish(),retrievedContext:$.object({uri:$.string(),title:$.string()}).nullish()}),zj=$.object({webSearchQueries:$.array($.string()).nullish(),retrievalQueries:$.array($.string()).nullish(),searchEntryPoint:$.object({renderedContent:$.string()}).nullish(),groundingChunks:$.array(JW).nullish(),groundingSupports:$.array($.object({segment:$.object({startIndex:$.number().nullish(),endIndex:$.number().nullish(),text:$.string().nullish()}),segment_text:$.string().nullish(),groundingChunkIndices:$.array($.number()).nullish(),supportChunkIndices:$.array($.number()).nullish(),confidenceScores:$.array($.number()).nullish(),confidenceScore:$.array($.number()).nullish()})).nullish(),retrievalMetadata:$.union([$.object({webDynamicRetrievalScore:$.number()}),$.object({})]).nullish()}),Uj=$.object({category:$.string(),probability:$.string(),probabilityScore:$.number().nullish(),severity:$.string().nullish(),severityScore:$.number().nullish(),blocked:$.boolean().nullish()}),QW=$.object({candidates:$.array($.object({content:Bj.nullish().or($.object({}).strict()),finishReason:$.string().nullish(),safetyRatings:$.array(Uj).nullish(),groundingMetadata:zj.nullish()})),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),eK=$.object({candidates:$.array($.object({content:Bj.nullish(),finishReason:$.string().nullish(),safetyRatings:$.array(Uj).nullish(),groundingMetadata:zj.nullish()})).nullish(),usageMetadata:$.object({promptTokenCount:$.number().nullish(),candidatesTokenCount:$.number().nullish(),totalTokenCount:$.number().nullish()}).nullish()}),tK=$.object({responseModalities:$.array($.enum(["TEXT","IMAGE"])).nullish()}),nK=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){return 2048}get supportsParallelCalls(){return!0}async doEmbed({values:e,headers:t,abortSignal:n}){if(e.length>this.maxEmbeddingsPerCall)throw new _W({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const r=d2(await p2(this.config.headers),t),{responseHeaders:a,value:i}=await h2({url:`${this.config.baseURL}/models/${this.modelId}:batchEmbedContents`,headers:r,body:{requests:e.map(o=>({model:`models/${this.modelId}`,content:{role:"user",parts:[{text:o}]},outputDimensionality:this.settings.outputDimensionality}))},failedResponseHandler:m2,successfulResponseHandler:$j(rK),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.embeddings.map(o=>o.values),usage:void 0,rawResponse:{headers:a}}}},rK=$.object({embeddings:$.array($.object({values:$.array($.number())}))});function aK(e){return e.toString().startsWith("https://generativelanguage.googleapis.com/v1beta/files/")}function Hj(e={}){var t;const n=(t=GW(e.baseURL))!=null?t:"https://generativelanguage.googleapis.com/v1beta",r=()=>({"x-goog-api-key":OW({apiKey:e.apiKey,environmentVariableName:"GOOGLE_GENERATIVE_AI_API_KEY",description:"Google Generative AI"}),...e.headers}),a=(s,l={})=>{var u;return new XW(s,l,{provider:"google.generative-ai",baseURL:n,headers:r,generateId:(u=e.generateId)!=null?u:RW,isSupportedUrl:aK,fetch:e.fetch})},i=(s,l={})=>new nK(s,l,{provider:"google.generative-ai",baseURL:n,headers:r,fetch:e.fetch}),o=function(s,l){if(new.target)throw new Error("The Google Generative AI model function cannot be called with the new keyword.");return a(s,l)};return o.languageModel=a,o.chat=a,o.generativeAI=a,o.embedding=i,o.textEmbedding=i,o.textEmbeddingModel=i,o}Hj();var qj="vercel.ai.error",iK=Symbol.for(qj),Vj,oK=class Gj extends Error{constructor({name:t,message:n,cause:r}){super(n),this[Vj]=!0,this.name=t,this.cause=r}static isInstance(t){return Gj.hasMarker(t,qj)}static hasMarker(t,n){const r=Symbol.for(n);return t!=null&&typeof t=="object"&&r in t&&typeof t[r]=="boolean"&&t[r]===!0}};Vj=iK;var Pa=oK,Wj="AI_APICallError",Kj=`vercel.ai.error.${Wj}`,sK=Symbol.for(Kj),Zj,Il=class extends Pa{constructor({message:e,url:t,requestBodyValues:n,statusCode:r,responseHeaders:a,responseBody:i,cause:o,isRetryable:s=r!=null&&(r===408||r===409||r===429||r>=500),data:l}){super({name:Wj,message:e,cause:o}),this[Zj]=!0,this.url=t,this.requestBodyValues=n,this.statusCode=r,this.responseHeaders=a,this.responseBody=i,this.isRetryable=s,this.data=l}static isInstance(e){return Pa.hasMarker(e,Kj)}};Zj=sK;var Yj="AI_EmptyResponseBodyError",Xj=`vercel.ai.error.${Yj}`,lK=Symbol.for(Xj),Jj,cK=class extends Pa{constructor({message:e="Empty response body"}={}){super({name:Yj,message:e}),this[Jj]=!0}static isInstance(e){return Pa.hasMarker(e,Xj)}};Jj=lK;function Qj(e){return e==null?"unknown error":typeof e=="string"?e:e instanceof Error?e.message:JSON.stringify(e)}var eM="AI_InvalidArgumentError",tM=`vercel.ai.error.${eM}`,uK=Symbol.for(tM),nM,dK=class extends Pa{constructor({message:t,cause:n,argument:r}){super({name:eM,message:t,cause:n}),this[nM]=!0,this.argument=r}static isInstance(t){return Pa.hasMarker(t,tM)}};nM=uK;var rM="AI_InvalidPromptError",aM=`vercel.ai.error.${rM}`,fK=Symbol.for(aM),iM,hK=class extends Pa{constructor({prompt:e,message:t,cause:n}){super({name:rM,message:`Invalid prompt: ${t}`,cause:n}),this[iM]=!0,this.prompt=e}static isInstance(e){return Pa.hasMarker(e,aM)}};iM=fK;var oM="AI_InvalidResponseDataError",sM=`vercel.ai.error.${oM}`,pK=Symbol.for(sM),lM,Bx=class extends Pa{constructor({data:e,message:t=`Invalid response data: ${JSON.stringify(e)}.`}){super({name:oM,message:t}),this[lM]=!0,this.data=e}static isInstance(e){return Pa.hasMarker(e,sM)}};lM=pK;var cM="AI_JSONParseError",uM=`vercel.ai.error.${cM}`,mK=Symbol.for(uM),dM,hv=class extends Pa{constructor({text:e,cause:t}){super({name:cM,message:`JSON parsing failed: Text: ${e}.
Error message: ${Qj(t)}`,cause:t}),this[dM]=!0,this.text=e}static isInstance(e){return Pa.hasMarker(e,uM)}};dM=mK;var fM="AI_LoadAPIKeyError",hM=`vercel.ai.error.${fM}`,gK=Symbol.for(hM),pM,ib=class extends Pa{constructor({message:e}){super({name:fM,message:e}),this[pM]=!0}static isInstance(e){return Pa.hasMarker(e,hM)}};pM=gK;var mM="AI_TypeValidationError",gM=`vercel.ai.error.${mM}`,yK=Symbol.for(gM),yM,bK=class g2 extends Pa{constructor({value:t,cause:n}){super({name:mM,message:`Type validation failed: Value: ${JSON.stringify(t)}.
Error message: ${Qj(n)}`,cause:n}),this[yM]=!0,this.value=t}static isInstance(t){return Pa.hasMarker(t,gM)}static wrap({value:t,cause:n}){return g2.isInstance(n)&&n.value===t?n:new g2({value:t,cause:n})}};yM=yK;var pv=bK,bM="AI_UnsupportedFunctionalityError",vM=`vercel.ai.error.${bM}`,vK=Symbol.for(vM),wM,wo=class extends Pa{constructor({functionality:e,message:t=`'${e}' functionality not supported.`}){super({name:bM,message:t}),this[wM]=!0,this.functionality=e}static isInstance(e){return Pa.hasMarker(e,vM)}};wM=vK;let wK=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r},A3=class extends Error{constructor(t,n){super(t),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function zx(e){}function _K(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=zx,onError:n=zx,onRetry:r=zx,onComment:a}=e;let i="",o=!0,s,l="",u="";function d(b){const _=o?b.replace(/^\xEF\xBB\xBF/,""):b,[x,S]=xK(`${i}${_}`);for(const E of x)h(E);i=S,o=!1}function h(b){if(b===""){g();return}if(b.startsWith(":")){a&&a(b.slice(b.startsWith(": ")?2:1));return}const _=b.indexOf(":");if(_!==-1){const x=b.slice(0,_),S=b[_+1]===" "?2:1,E=b.slice(_+S);p(x,E,b);return}p(b,"",b)}function p(b,_,x){switch(b){case"event":u=_;break;case"data":l=`${l}${_}
`;break;case"id":s=_.includes("\0")?void 0:_;break;case"retry":/^\d+$/.test(_)?r(parseInt(_,10)):n(new A3(`Invalid \`retry\` value: "${_}"`,{type:"invalid-retry",value:_,line:x}));break;default:n(new A3(`Unknown field "${b.length>20?`${b.slice(0,20)}`:b}"`,{type:"unknown-field",field:b,value:_,line:x}));break}}function g(){l.length>0&&t({id:s,event:u||void 0,data:l.endsWith(`
`)?l.slice(0,-1):l}),s=void 0,l="",u=""}function v(b={}){i&&b.consume&&h(i),o=!0,s=void 0,l="",u="",i=""}return{feed:d,reset:v}}function xK(e){const t=[];let n="",r=0;for(;r<e.length;){const a=e.indexOf("\r",r),i=e.indexOf(`
`,r);let o=-1;if(a!==-1&&i!==-1?o=Math.min(a,i):a!==-1?o=a:i!==-1&&(o=i),o===-1){n=e.slice(r);break}else{const s=e.slice(r,o);t.push(s),r=o+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}class SK extends TransformStream{constructor({onError:t,onRetry:n,onComment:r}={}){let a;super({start(i){a=_K({onEvent:o=>{i.enqueue(o)},onError(o){t==="terminate"?i.error(o):typeof t=="function"&&t(o)},onRetry:n,onComment:r})},transform(i){a.feed(i)}})}}var EK={};function mv(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function _w(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var CK=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=wK(n,t);if(e==null)return a;if(n.includes(r))throw new dK({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},ob=CK();function kK(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Ux(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}function TK({apiKey:e,environmentVariableName:t,apiKeyParameterName:n="apiKey",description:r}){if(typeof e=="string")return e;if(e!=null)throw new ib({message:`${r} API key must be a string.`});if(typeof Xr>"u")throw new ib({message:`${r} API key is missing. Pass it using the '${n}' parameter. Environment variables is not supported in this environment.`});if(e=EK[t],e==null)throw new ib({message:`${r} API key is missing. Pass it using the '${n}' parameter or the ${t} environment variable.`});if(typeof e!="string")throw new ib({message:`${r} API key must be a string. The value of the ${t} environment variable is not a string.`});return e}var y2=Symbol.for("vercel.ai.validator");function AK(e){return{[y2]:!0,validate:e}}function NK(e){return typeof e=="object"&&e!==null&&y2 in e&&e[y2]===!0&&"validate"in e}function RK(e){return NK(e)?e:IK(e)}function IK(e){return AK(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function OK({value:e,schema:t}){const n=_M({value:e,schema:t});if(!n.success)throw pv.wrap({value:e,cause:n.error});return n.value}function _M({value:e,schema:t}){const n=RK(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:pv.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:pv.wrap({value:e,cause:r})}}}function DK({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:OK({value:n,schema:t})}catch(n){throw hv.isInstance(n)||pv.isInstance(n)?n:new hv({text:e,cause:n})}}function xM({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=_M({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:hv.isInstance(n)?n:new hv({text:e,cause:n})}}}function Hx(e){try{return ns.parse(e),!0}catch{return!1}}var jK=()=>globalThis.fetch,gv=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>MK({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),MK=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=jK()})=>{try{const s=await o(e,{method:"POST",headers:kK(t),body:n.content,signal:i}),l=_w(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw Ux(d)||Il.isInstance(d)?d:new Il({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Ux(u)||Il.isInstance(u))?u:new Il({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if(Ux(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new Il({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},PK=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=_w(r);if(o.trim()==="")return{responseHeaders:s,value:new Il({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=DK({text:o,schema:e});return{responseHeaders:s,value:new Il({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new Il({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},SM=e=>async({response:t})=>{const n=_w(t);if(t.body==null)throw new cK({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new SK).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(xM({text:r,schema:e}))}}))}},EM=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=xM({text:a,schema:e}),o=_w(t);if(!i.success)throw new Il({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:FK}=globalThis;function LK(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return FK(t)}function $K(e){return e==null?void 0:e.replace(/\/$/,"")}var BK=Object.defineProperty,zK=Object.defineProperties,UK=Object.getOwnPropertyDescriptors,yv=Object.getOwnPropertySymbols,CM=Object.prototype.hasOwnProperty,kM=Object.prototype.propertyIsEnumerable,N3=(e,t,n)=>t in e?BK(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Yi=(e,t)=>{for(var n in t||(t={}))CM.call(t,n)&&N3(e,n,t[n]);if(yv)for(var n of yv(t))kM.call(t,n)&&N3(e,n,t[n]);return e},Ub=(e,t)=>zK(e,UK(t)),bv=(e,t)=>{var n={};for(var r in e)CM.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&yv)for(var r of yv(e))t.indexOf(r)<0&&kM.call(e,r)&&(n[r]=e[r]);return n};function xs(e){var t,n,r;const a=e==null?void 0:e.anthropic,i=e==null?void 0:e.openrouter;return(r=(n=(t=i==null?void 0:i.cacheControl)!=null?t:i==null?void 0:i.cache_control)!=null?n:a==null?void 0:a.cacheControl)!=null?r:a==null?void 0:a.cache_control}function HK(e){var t,n,r;const a=[];for(const{role:i,content:o,providerMetadata:s}of e)switch(i){case"system":{a.push({role:"system",content:o,cache_control:xs(s)});break}case"user":{if(o.length===1&&((t=o[0])==null?void 0:t.type)==="text"){a.push({role:"user",content:o[0].text,cache_control:(n=xs(s))!=null?n:xs(o[0].providerMetadata)});break}const l=xs(s),u=o.map(d=>{var h,p,g,v;switch(d.type){case"text":return{type:"text",text:d.text,cache_control:(h=xs(d.providerMetadata))!=null?h:l};case"image":return{type:"image_url",image_url:{url:d.image instanceof URL?d.image.toString():`data:${(p=d.mimeType)!=null?p:"image/jpeg"};base64,${LK(d.image)}`},cache_control:(g=xs(d.providerMetadata))!=null?g:l};case"file":return{type:"text",text:d.data instanceof URL?d.data.toString():d.data,cache_control:(v=xs(d.providerMetadata))!=null?v:l};default:{const b=d;throw new Error(`Unsupported content part type: ${b}`)}}});a.push({role:"user",content:u});break}case"assistant":{let l="";const u=[];for(const d of o)switch(d.type){case"text":{l+=d.text;break}case"tool-call":{u.push({id:d.toolCallId,type:"function",function:{name:d.toolName,arguments:JSON.stringify(d.args)}});break}case"reasoning":case"redacted-reasoning":break;default:{const h=d;throw new Error(`Unsupported part: ${h}`)}}a.push({role:"assistant",content:l,tool_calls:u.length>0?u:void 0,cache_control:xs(s)});break}case"tool":{for(const l of o)a.push({role:"tool",tool_call_id:l.toolCallId,content:JSON.stringify(l.result),cache_control:(r=xs(s))!=null?r:xs(l.providerMetadata)});break}default:{const l=i;throw new Error(`Unsupported role: ${l}`)}}return a}function R3(e){var t,n;return(n=(t=e==null?void 0:e.content)==null?void 0:t.map(({token:r,logprob:a,top_logprobs:i})=>({token:r,logprob:a,topLogprobs:i?i.map(({token:o,logprob:s})=>({token:o,logprob:s})):[]})))!=null?n:void 0}function vv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var FC=$.object({error:$.object({message:$.string(),type:$.string(),param:$.any().nullable(),code:$.string().nullable()})}),wv=PK({errorSchema:FC,errorToMessage:e=>e.error.message});function qK(e){return"parameters"in e}var VK=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode="tool",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,frequencyPenalty:i,presencePenalty:o,seed:s,stopSequences:l,responseFormat:u,topK:d,providerMetadata:h}){var p;const g=e.type,v=(p=h==null?void 0:h.openrouter)!=null?p:{},b=Yi(Yi(Yi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:this.settings.logprobs===!0||typeof this.settings.logprobs=="number"?!0:void 0,top_logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,user:this.settings.user,parallel_tool_calls:this.settings.parallelToolCalls,max_tokens:n,temperature:r,top_p:a,frequency_penalty:i,presence_penalty:o,seed:s,stop:l,response_format:u,top_k:d,messages:HK(t),include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),v);switch(g){case"regular":return Yi(Yi({},b),KK(e));case"object-json":return Ub(Yi({},b),{response_format:{type:"json_object"}});case"object-tool":return Ub(Yi({},b),{tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]});default:{const _=g;throw new wo({functionality:`${_} mode`})}}}async doGenerate(e){var t,n,r,a,i,o,s;const l=this.getArgs(e),{responseHeaders:u,value:d}=await gv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mv(this.config.headers(),e.headers),body:l,failedResponseHandler:wv,successfulResponseHandler:EM(GK),abortSignal:e.abortSignal,fetch:this.config.fetch}),h=l,{messages:p}=h,g=bv(h,["messages"]),v=d.choices[0];if(!v)throw new Error("No choice in response");return{response:{id:d.id,modelId:d.model},text:(t=v.message.content)!=null?t:void 0,reasoning:(n=v.message.reasoning)!=null?n:void 0,toolCalls:(r=v.message.tool_calls)==null?void 0:r.map(b=>{var _;return{toolCallType:"function",toolCallId:(_=b.id)!=null?_:ob(),toolName:b.function.name,args:b.function.arguments}}),finishReason:vv(v.finish_reason),usage:{promptTokens:(i=(a=d.usage)==null?void 0:a.prompt_tokens)!=null?i:0,completionTokens:(s=(o=d.usage)==null?void 0:o.completion_tokens)!=null?s:0},rawCall:{rawPrompt:p,rawSettings:g},rawResponse:{headers:u},warnings:[],logprobs:R3(v.logprobs)}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await gv({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mv(this.config.headers(),e.headers),body:Ub(Yi({},t),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:wv,successfulResponseHandler:SM(WK),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{messages:i}=a,o=bv(a,["messages"]),s=[];let l="other",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d;return{stream:r.pipeThrough(new TransformStream({transform(h,p){var g,v,b,_,x,S,E,C,k,R,D,O;if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const L=h.value;if("error"in L){l="error",p.enqueue({type:"error",error:L.error});return}L.id&&p.enqueue({type:"response-metadata",id:L.id}),L.model&&p.enqueue({type:"response-metadata",modelId:L.model}),L.usage!=null&&(u={promptTokens:L.usage.prompt_tokens,completionTokens:L.usage.completion_tokens});const B=L.choices[0];if((B==null?void 0:B.finish_reason)!=null&&(l=vv(B.finish_reason)),(B==null?void 0:B.delta)==null)return;const Y=B.delta;Y.content!=null&&p.enqueue({type:"text-delta",textDelta:Y.content}),Y.reasoning!=null&&p.enqueue({type:"reasoning",textDelta:Y.reasoning});const F=R3(B==null?void 0:B.logprobs);if(F!=null&&F.length&&(d===void 0&&(d=[]),d.push(...F)),Y.tool_calls!=null)for(const Z of Y.tool_calls){const q=Z.index;if(s[q]==null){if(Z.type!=="function")throw new Bx({data:Z,message:"Expected 'function' type."});if(Z.id==null)throw new Bx({data:Z,message:"Expected 'id' to be a string."});if(((g=Z.function)==null?void 0:g.name)==null)throw new Bx({data:Z,message:"Expected 'function.name' to be a string."});s[q]={id:Z.id,type:"function",function:{name:Z.function.name,arguments:(v=Z.function.arguments)!=null?v:""},sent:!1};const ae=s[q];if(ae==null)throw new Error("Tool call is missing");((b=ae.function)==null?void 0:b.name)!=null&&((_=ae.function)==null?void 0:_.arguments)!=null&&Hx(ae.function.arguments)&&(p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ae.id,toolName:ae.function.name,argsTextDelta:ae.function.arguments}),p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(x=ae.id)!=null?x:ob(),toolName:ae.function.name,args:ae.function.arguments}),ae.sent=!0);continue}const ne=s[q];if(ne==null)throw new Error("Tool call is missing");((S=Z.function)==null?void 0:S.arguments)!=null&&(ne.function.arguments+=(C=(E=Z.function)==null?void 0:E.arguments)!=null?C:""),p.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ne.id,toolName:ne.function.name,argsTextDelta:(k=Z.function.arguments)!=null?k:""}),((R=ne.function)==null?void 0:R.name)!=null&&((D=ne.function)==null?void 0:D.arguments)!=null&&Hx(ne.function.arguments)&&(p.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(O=ne.id)!=null?O:ob(),toolName:ne.function.name,args:ne.function.arguments}),ne.sent=!0)}},flush(h){var p;if(l==="tool-calls")for(const g of s)g.sent||(h.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(p=g.id)!=null?p:ob(),toolName:g.function.name,args:Hx(g.function.arguments)?g.function.arguments:"{}"}),g.sent=!0);h.enqueue({type:"finish",finishReason:l,logprobs:d,usage:u})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},TM=$.object({id:$.string().optional(),model:$.string().optional(),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number(),total_tokens:$.number()}).nullish()}),GK=TM.extend({choices:$.array($.object({message:$.object({role:$.literal("assistant"),content:$.string().nullable().optional(),reasoning:$.string().nullable().optional(),tool_calls:$.array($.object({id:$.string().optional().nullable(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).optional()}),index:$.number(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullable().optional(),finish_reason:$.string().optional().nullable()}))}),WK=$.union([TM.extend({choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).optional(),content:$.string().nullish(),reasoning:$.string().nullish().optional(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),logprobs:$.object({content:$.array($.object({token:$.string(),logprob:$.number(),top_logprobs:$.array($.object({token:$.string(),logprob:$.number()}))})).nullable()}).nullish(),finish_reason:$.string().nullable().optional(),index:$.number()}))}),FC]);function KK(e){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0;if(n==null)return{tools:void 0,tool_choice:void 0};const r=n.map(o=>qK(o)?{type:"function",function:{name:o.name,description:o.description,parameters:o.parameters}}:{type:"function",function:{name:o.name}}),a=e.toolChoice;if(a==null)return{tools:r,tool_choice:void 0};const i=a.type;switch(i){case"auto":case"none":case"required":return{tools:r,tool_choice:i};case"tool":return{tools:r,tool_choice:{type:"function",function:{name:a.toolName}}};default:{const o=i;throw new Error(`Unsupported tool choice type: ${o}`)}}}function ZK({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0]&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0]&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0]&&e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new hK({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new wo({functionality:"images"});case"file":throw new wo({functionality:"file attachments"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new wo({functionality:"tool-call messages"});case"reasoning":throw new wo({functionality:"reasoning messages"});case"redacted-reasoning":throw new wo({functionality:"redacted reasoning messages"});default:{const u=l;throw new Error(`Unsupported content type: ${u}`)}}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new wo({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a}}function I3(e){return e==null?void 0:e.tokens.map((t,n)=>{var r,a;return{token:t,logprob:(r=e.token_logprobs[n])!=null?r:0,topLogprobs:e.top_logprobs?Object.entries((a=e.top_logprobs[n])!=null?a:{}).map(([i,o])=>({token:i,logprob:o})):[]}})}var YK=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0,this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,frequencyPenalty:o,presencePenalty:s,seed:l,responseFormat:u,topK:d,stopSequences:h,providerMetadata:p}){var g,v;const b=e.type,_=(g=p==null?void 0:p.openrouter)!=null?g:{},{prompt:x}=ZK({prompt:n,inputFormat:t}),S=Yi(Yi(Yi({model:this.modelId,models:this.settings.models,logit_bias:this.settings.logitBias,logprobs:typeof this.settings.logprobs=="number"?this.settings.logprobs:typeof this.settings.logprobs=="boolean"&&this.settings.logprobs?0:void 0,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:o,presence_penalty:s,seed:l,stop:h,response_format:u,top_k:d,prompt:x,include_reasoning:this.settings.includeReasoning,reasoning:this.settings.reasoning},this.config.extraBody),this.settings.extraBody),_);switch(b){case"regular":{if((v=e.tools)!=null&&v.length)throw new wo({functionality:"tools"});if(e.toolChoice)throw new wo({functionality:"toolChoice"});return S}case"object-json":throw new wo({functionality:"object-json mode"});case"object-tool":throw new wo({functionality:"object-tool mode"});default:{const E=b;throw new wo({functionality:`${E} mode`})}}}async doGenerate(e){var t,n,r,a,i;const o=this.getArgs(e),{responseHeaders:s,value:l}=await gv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mv(this.config.headers(),e.headers),body:o,failedResponseHandler:wv,successfulResponseHandler:EM(O3),abortSignal:e.abortSignal,fetch:this.config.fetch}),u=o,{prompt:d}=u,h=bv(u,["prompt"]);if("error"in l)throw new Error(`${l.error.message}`);const p=l.choices[0];if(!p)throw new Error("No choice in OpenRouter completion response");return{response:{id:l.id,modelId:l.model},text:(t=p.text)!=null?t:"",reasoning:p.reasoning||void 0,usage:{promptTokens:(r=(n=l.usage)==null?void 0:n.prompt_tokens)!=null?r:0,completionTokens:(i=(a=l.usage)==null?void 0:a.completion_tokens)!=null?i:0},finishReason:vv(p.finish_reason),logprobs:I3(p.logprobs),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:s},warnings:[]}}async doStream(e){const t=this.getArgs(e),{responseHeaders:n,value:r}=await gv({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mv(this.config.headers(),e.headers),body:Ub(Yi({},this.getArgs(e)),{stream:!0,stream_options:this.config.compatibility==="strict"?{include_usage:!0}:void 0}),failedResponseHandler:wv,successfulResponseHandler:SM(O3),abortSignal:e.abortSignal,fetch:this.config.fetch}),a=t,{prompt:i}=a,o=bv(a,["prompt"]);let s="other",l={promptTokens:Number.NaN,completionTokens:Number.NaN},u;return{stream:r.pipeThrough(new TransformStream({transform(d,h){if(!d.success){s="error",h.enqueue({type:"error",error:d.error});return}const p=d.value;if("error"in p){s="error",h.enqueue({type:"error",error:p.error});return}p.usage!=null&&(l={promptTokens:p.usage.prompt_tokens,completionTokens:p.usage.completion_tokens});const g=p.choices[0];(g==null?void 0:g.finish_reason)!=null&&(s=vv(g.finish_reason)),(g==null?void 0:g.text)!=null&&h.enqueue({type:"text-delta",textDelta:g.text});const v=I3(g==null?void 0:g.logprobs);v!=null&&v.length&&(u===void 0&&(u=[]),u.push(...v))},flush(d){d.enqueue({type:"finish",finishReason:s,logprobs:u,usage:l})}})),rawCall:{rawPrompt:i,rawSettings:o},rawResponse:{headers:n},warnings:[]}}},O3=$.union([$.object({id:$.string().optional(),model:$.string().optional(),choices:$.array($.object({text:$.string(),reasoning:$.string().nullish().optional(),finish_reason:$.string().nullish(),index:$.number(),logprobs:$.object({tokens:$.array($.string()),token_logprobs:$.array($.number()),top_logprobs:$.array($.record($.string(),$.number())).nullable()}).nullable().optional()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).optional().nullable()}),FC]);function AM(e={}){var t,n,r;const a=(n=$K((t=e.baseURL)!=null?t:e.baseUrl))!=null?n:"https://openrouter.ai/api/v1",i=(r=e.compatibility)!=null?r:"compatible",o=()=>Yi({Authorization:`Bearer ${TK({apiKey:e.apiKey,environmentVariableName:"OPENROUTER_API_KEY",description:"OpenRouter"})}`},e.headers),s=(h,p={})=>new VK(h,p,{provider:"openrouter.chat",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),l=(h,p={})=>new YK(h,p,{provider:"openrouter.completion",url:({path:g})=>`${a}${g}`,headers:o,compatibility:i,fetch:e.fetch,extraBody:e.extraBody}),u=(h,p)=>{if(new.target)throw new Error("The OpenRouter model function cannot be called with the new keyword.");return h==="openai/gpt-3.5-turbo-instruct"?l(h,p):s(h,p)},d=function(h,p){return u(h,p)};return d.languageModel=u,d.chat=s,d.completion=l,d}AM({compatibility:"strict"});var Qu={},qx={},D3;function j3(){return D3||(D3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.ALL=e.COLLECTION=e.ATOM=e.SPECIAL=e.INF=e._INFINITY=e.INFINITY=e.NAN=e.BOOL=e.NULL=e.OBJ=e.ARR=e.NUM=e.STR=void 0,e.STR=1,e.NUM=2,e.ARR=4,e.OBJ=8,e.NULL=16,e.BOOL=32,e.NAN=64,e.INFINITY=128,e._INFINITY=256,e.INF=e.INFINITY|e._INFINITY,e.SPECIAL=e.NULL|e.BOOL|e.INF|e.NAN,e.ATOM=e.STR|e.NUM|e.SPECIAL,e.COLLECTION=e.ARR|e.OBJ,e.ALL=e.ATOM|e.COLLECTION,e.Allow={STR:e.STR,NUM:e.NUM,ARR:e.ARR,OBJ:e.OBJ,NULL:e.NULL,BOOL:e.BOOL,NAN:e.NAN,INFINITY:e.INFINITY,_INFINITY:e._INFINITY,INF:e.INF,SPECIAL:e.SPECIAL,ATOM:e.ATOM,COLLECTION:e.COLLECTION,ALL:e.ALL},e.default=e.Allow}(qx)),qx}var M3;function XK(){return M3||(M3=1,function(e){var t=Qu&&Qu.__createBinding||(Object.create?function(u,d,h,p){p===void 0&&(p=h);var g=Object.getOwnPropertyDescriptor(d,h);(!g||("get"in g?!d.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return d[h]}}),Object.defineProperty(u,p,g)}:function(u,d,h,p){p===void 0&&(p=h),u[p]=d[h]}),n=Qu&&Qu.__exportStar||function(u,d){for(var h in u)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&t(d,u,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Allow=e.MalformedJSON=e.PartialJSON=e.parseJSON=e.parse=void 0;const r=j3();Object.defineProperty(e,"Allow",{enumerable:!0,get:function(){return r.Allow}}),n(j3(),e);class a extends Error{}e.PartialJSON=a;class i extends Error{}e.MalformedJSON=i;function o(u,d=r.Allow.ALL){if(typeof u!="string")throw new TypeError(`expecting str, got ${typeof u}`);if(!u.trim())throw new Error(`${u} is empty`);return s(u.trim(),d)}e.parseJSON=o;const s=(u,d)=>{const h=u.length;let p=0;const g=k=>{throw new a(`${k} at position ${p}`)},v=k=>{throw new i(`${k} at position ${p}`)},b=()=>(C(),p>=h&&g("Unexpected end of input"),u[p]==='"'?_():u[p]==="{"?x():u[p]==="["?S():u.substring(p,p+4)==="null"||r.Allow.NULL&d&&h-p<4&&"null".startsWith(u.substring(p))?(p+=4,null):u.substring(p,p+4)==="true"||r.Allow.BOOL&d&&h-p<4&&"true".startsWith(u.substring(p))?(p+=4,!0):u.substring(p,p+5)==="false"||r.Allow.BOOL&d&&h-p<5&&"false".startsWith(u.substring(p))?(p+=5,!1):u.substring(p,p+8)==="Infinity"||r.Allow.INFINITY&d&&h-p<8&&"Infinity".startsWith(u.substring(p))?(p+=8,1/0):u.substring(p,p+9)==="-Infinity"||r.Allow._INFINITY&d&&1<h-p&&h-p<9&&"-Infinity".startsWith(u.substring(p))?(p+=9,-1/0):u.substring(p,p+3)==="NaN"||r.Allow.NAN&d&&h-p<3&&"NaN".startsWith(u.substring(p))?(p+=3,NaN):E()),_=()=>{const k=p;let R=!1;for(p++;p<h&&(u[p]!=='"'||R&&u[p-1]==="\\");)R=u[p]==="\\"?!R:!1,p++;if(u.charAt(p)=='"')try{return JSON.parse(u.substring(k,++p-Number(R)))}catch(D){v(String(D))}else if(r.Allow.STR&d)try{return JSON.parse(u.substring(k,p-Number(R))+'"')}catch{return JSON.parse(u.substring(k,u.lastIndexOf("\\"))+'"')}g("Unterminated string literal")},x=()=>{p++,C();const k={};try{for(;u[p]!=="}";){if(C(),p>=h&&r.Allow.OBJ&d)return k;const R=_();C(),p++;try{const D=b();k[R]=D}catch(D){if(r.Allow.OBJ&d)return k;throw D}C(),u[p]===","&&p++}}catch{if(r.Allow.OBJ&d)return k;g("Expected '}' at end of object")}return p++,k},S=()=>{p++;const k=[];try{for(;u[p]!=="]";)k.push(b()),C(),u[p]===","&&p++}catch{if(r.Allow.ARR&d)return k;g("Expected ']' at end of array")}return p++,k},E=()=>{if(p===0){u==="-"&&v("Not sure what '-' is");try{return JSON.parse(u)}catch(R){if(r.Allow.NUM&d)try{return JSON.parse(u.substring(0,u.lastIndexOf("e")))}catch{}v(String(R))}}const k=p;for(u[p]==="-"&&p++;u[p]&&",]}".indexOf(u[p])===-1;)p++;p==h&&!(r.Allow.NUM&d)&&g("Unterminated number literal");try{return JSON.parse(u.substring(k,p))}catch{u.substring(k,p)==="-"&&g("Not sure what '-' is");try{return JSON.parse(u.substring(k,u.lastIndexOf("e")))}catch(D){v(String(D))}}},C=()=>{for(;p<h&&` 
\r	`.includes(u[p]);)p++};return b()},l=o;e.parse=l}(Qu)),Qu}var JK=XK();function Vx(e){const t=[];for(const{content:n,role:r}of e)switch(r){case"system":{t.push({content:n,role:"system"});break}case"user":{t.push({...n.reduce((a,i)=>{if(i.type==="text")a.content+=i.text;else{if(i.type==="image"&&i.image instanceof URL)throw new Cr({functionality:"Image URLs in user messages"});i.type==="image"&&i.image instanceof Uint8Array&&(a.images=a.images||[],a.images.push(dh(i.image)))}return a},{content:""}),role:"user"});break}case"assistant":{const a=[],i=[];for(const o of n)switch(o.type){case"text":{a.push(o.text);break}case"tool-call":{i.push({function:{arguments:o.args,name:o.toolName},id:o.toolCallId,type:"function"});break}default:{const s=o;throw new Error(`Unsupported part: ${s}`)}}t.push({content:a.join(","),role:"assistant",tool_calls:i.length>0?i:void 0});break}case"tool":{t.push(...n.map(a=>({content:typeof a.result=="object"?JSON.stringify(a.result):`${a.result}`,role:"tool",tool_call_id:a.toolCallId})));break}default:{const a=r;throw new Error(`Unsupported role: ${a}`)}}return t}var QK=class{constructor({tools:e,type:t}){this._firstMessage=!0,this._tools=e,this._toolPartial="",this._toolCalls=[],this._type=t,this._detectedToolCall=!1}get toolCalls(){return this._toolCalls}get detectedToolCall(){return this._detectedToolCall}parse({controller:e,delta:t}){var n;if(this.detectToolCall(t),!this._detectedToolCall)return!1;this._toolPartial+=t;let r=JK.parse(this._toolPartial);Array.isArray(r)||(r=[r]);for(const[a,i]of r.entries()){const o=(n=JSON.stringify(i==null?void 0:i.parameters))!=null?n:"";if(o==="")continue;this._toolCalls[a]||(this._toolCalls[a]={function:{arguments:"",name:i.name},id:Rs(),type:"function"});const s=this._toolCalls[a];s.function.arguments=o,e.enqueue({argsTextDelta:t,toolCallId:s.id,toolCallType:"function",toolName:s.function.name,type:"tool-call-delta"})}return!0}finish({controller:e}){for(const t of this.toolCalls)e.enqueue({args:t.function.arguments,toolCallId:t.id,toolCallType:"function",toolName:t.function.name,type:"tool-call"});return this.finishReason()}detectToolCall(e){!this._tools||this._tools.length===0||this._firstMessage&&(this._type==="object-tool"?this._detectedToolCall=!0:this._type==="regular"&&(e.trim().startsWith("{")||e.trim().startsWith("["))&&(this._detectedToolCall=!0),this._firstMessage=!1)}finishReason(){return this.detectedToolCall?this._type==="object-tool"?"stop":"tool-calls":"stop"}};function eZ({finishReason:e,hasToolCalls:t}){switch(e){case"stop":return t?"tool-calls":"stop";default:return"other"}}var tZ=$.object({error:$.object({code:$.string().nullable(),message:$.string(),param:$.any().nullable(),type:$.string()})}),b2=WD({errorSchema:tZ,errorToMessage:e=>e.error.message});function nZ({mode:e}){var t;const n=(t=e.tools)!=null&&t.length?e.tools:void 0,r=[],a=e.toolChoice;if(n===void 0)return{tools:void 0,toolWarnings:r};const i=[];for(const s of n)s.type==="provider-defined"?r.push({tool:s,type:"unsupported-tool"}):i.push({function:{description:s.description,name:s.name,parameters:s.parameters},type:"function"});if(a===void 0)return{tools:i,toolWarnings:r};const o=a.type;switch(o){case"auto":return{tools:i,toolWarnings:r};case"none":return{tools:void 0,toolWarnings:r};default:{const s=o;throw new Cr({functionality:`Unsupported tool choice type: ${s}`})}}}function rZ(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!==void 0))}var aZ=class extends TransformStream{constructor(){super({flush:e=>{this.buffer.length!==0&&e.enqueue(this.buffer)},transform:(e,t)=>{for(e=this.buffer+e;;){const n=e.indexOf(`
`);if(n===-1)break;t.enqueue(e.slice(0,n)),e=e.slice(n+1)}this.buffer=e}}),this.buffer=""}},iZ=e=>async({response:t})=>{const n=J0(t);if(t.body===null)throw new AC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(new aZ).pipeThrough(new TransformStream({transform(r,a){a.enqueue(pd({schema:e,text:r}))}}))}},oZ=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1",this.defaultObjectGenerationMode="json",this.supportsImageUrls=!1}get supportsStructuredOutputs(){var e;return(e=this.settings.structuredOutputs)!=null?e:!1}get provider(){return this.config.provider}getArguments({frequencyPenalty:e,maxTokens:t,mode:n,presencePenalty:r,prompt:a,responseFormat:i,seed:o,stopSequences:s,temperature:l,topK:u,topP:d}){const h=n.type,p=[];i!==void 0&&i.type==="json"&&i.schema!==void 0&&!this.supportsStructuredOutputs&&p.push({details:"JSON response format schema is only supported with structuredOutputs",setting:"responseFormat",type:"unsupported-setting"});const g={format:i==null?void 0:i.type,model:this.modelId,options:rZ({f16_kv:this.settings.f16Kv,frequency_penalty:e,low_vram:this.settings.lowVram,main_gpu:this.settings.mainGpu,min_p:this.settings.minP,mirostat:this.settings.mirostat,mirostat_eta:this.settings.mirostatEta,mirostat_tau:this.settings.mirostatTau,num_batch:this.settings.numBatch,num_ctx:this.settings.numCtx,num_gpu:this.settings.numGpu,num_keep:this.settings.numKeep,num_predict:t,num_thread:this.settings.numThread,numa:this.settings.numa,penalize_newline:this.settings.penalizeNewline,presence_penalty:r,repeat_last_n:this.settings.repeatLastN,repeat_penalty:this.settings.repeatPenalty,seed:o,stop:s,temperature:l,tfs_z:this.settings.tfsZ,top_k:u,top_p:d,typical_p:this.settings.typicalP,use_mlock:this.settings.useMlock,use_mmap:this.settings.useMmap,vocab_only:this.settings.vocabOnly})};switch(h){case"regular":{const{tools:v,toolWarnings:b}=nZ({mode:n});return{args:{...g,messages:Vx(a),tools:v},type:h,warnings:[...p,...b]}}case"object-json":return{args:{...g,format:this.supportsStructuredOutputs&&n.schema!==void 0?n.schema:"json",messages:Vx(a)},type:h,warnings:p};case"object-tool":return{args:{...g,messages:Vx(a),tool_choice:{function:{name:n.tool.name},type:"function"},tools:[{function:{description:n.tool.description,name:n.tool.name,parameters:n.tool.parameters},type:"function"}]},type:h,warnings:p};default:{const v=h;throw new Error(`Unsupported type: ${v}`)}}}async doGenerate(e){var t,n;const{args:r,warnings:a}=this.getArguments(e),i={...r,stream:!1},{responseHeaders:o,value:s}=await Wo({abortSignal:e.abortSignal,body:i,failedResponseHandler:b2,fetch:this.config.fetch,headers:Bs(this.config.headers(),e.headers),successfulResponseHandler:Td(sZ),url:`${this.config.baseURL}/chat`}),{messages:l,...u}=i,d=(t=s.message.tool_calls)==null?void 0:t.map(h=>{var p;return{args:JSON.stringify(h.function.arguments),toolCallId:(p=h.id)!=null?p:Rs(),toolCallType:"function",toolName:h.function.name}});return{finishReason:eZ({finishReason:s.done_reason,hasToolCalls:d!==void 0&&d.length>0}),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:o},request:{body:JSON.stringify(i)},text:(n=s.message.content)!=null?n:void 0,toolCalls:d,usage:{completionTokens:s.eval_count||0,promptTokens:s.prompt_eval_count||0},warnings:a}}async doStream(e){if(this.settings.simulateStreaming){const g=await this.doGenerate(e),v=new ReadableStream({start(b){if(b.enqueue({type:"response-metadata",...g.response}),g.text&&b.enqueue({textDelta:g.text,type:"text-delta"}),g.toolCalls)for(const _ of g.toolCalls)b.enqueue({argsTextDelta:_.args,toolCallId:_.toolCallId,toolCallType:"function",toolName:_.toolName,type:"tool-call-delta"}),b.enqueue({type:"tool-call",..._});b.enqueue({finishReason:g.finishReason,logprobs:g.logprobs,providerMetadata:g.providerMetadata,type:"finish",usage:g.usage}),b.close()}});return{rawCall:g.rawCall,rawResponse:g.rawResponse,stream:v,warnings:g.warnings}}const{args:t,type:n,warnings:r}=this.getArguments(e),{responseHeaders:a,value:i}=await Wo({abortSignal:e.abortSignal,body:t,failedResponseHandler:b2,fetch:this.config.fetch,headers:Bs(this.config.headers(),e.headers),successfulResponseHandler:iZ(lZ),url:`${this.config.baseURL}/chat`}),{messages:o,...s}=t,l=e.mode.type==="regular"?e.mode.tools:e.mode.type==="object-tool"?[e.mode.tool]:void 0,u=new QK({tools:l,type:n});let d="other",h={completionTokens:Number.NaN,promptTokens:Number.NaN};const{experimentalStreamTools:p=!0}=this.settings;return{rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},request:{body:JSON.stringify(t)},stream:i.pipeThrough(new TransformStream({async flush(g){g.enqueue({finishReason:d,type:"finish",usage:h})},async transform(g,v){if(!g.success){v.enqueue({error:g.error,type:"error"});return}const b=g.value;if(b.done){d=u.finish({controller:v}),h={completionTokens:b.eval_count,promptTokens:b.prompt_eval_count||0};return}p&&u.parse({controller:v,delta:b.message.content})||b.message.content!==null&&v.enqueue({textDelta:b.message.content,type:"text-delta"})}})),warnings:r}}},sZ=$.object({created_at:$.string(),done:$.literal(!0),done_reason:$.string().optional().nullable(),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),message:$.object({content:$.string(),role:$.string(),tool_calls:$.array($.object({function:$.object({arguments:$.record($.any()),name:$.string()}),id:$.string().optional()})).optional().nullable()}),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()}),lZ=$.discriminatedUnion("done",[$.object({created_at:$.string(),done:$.literal(!1),message:$.object({content:$.string(),role:$.string()}),model:$.string()}),$.object({created_at:$.string(),done:$.literal(!0),eval_count:$.number(),eval_duration:$.number(),load_duration:$.number().optional(),model:$.string(),prompt_eval_count:$.number().optional(),prompt_eval_duration:$.number().optional(),total_duration:$.number()})]),cZ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.settings.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){return!1}async doEmbed({abortSignal:e,values:t}){if(t.length>this.maxEmbeddingsPerCall)throw new RC({maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,modelId:this.modelId,provider:this.provider,values:t});const{responseHeaders:n,value:r}=await Wo({abortSignal:e,body:{input:t,model:this.modelId},failedResponseHandler:b2,fetch:this.config.fetch,headers:this.config.headers(),successfulResponseHandler:Td(uZ),url:`${this.config.baseURL}/embed`});return{embeddings:r.embeddings,rawResponse:{headers:n},usage:r.prompt_eval_count?{tokens:r.prompt_eval_count}:void 0}}},uZ=$.object({embeddings:$.array($.array($.number())),prompt_eval_count:$.number().nullable()});function NM(e={}){var t;const n=(t=ZD(e.baseURL))!=null?t:"http://127.0.0.1:11434/api",r=()=>({...e.headers}),a=(s,l={})=>new oZ(s,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.chat"}),i=(s,l={})=>new cZ(s,l,{baseURL:n,fetch:e.fetch,headers:r,provider:"ollama.embedding"}),o=function(s,l){if(new.target)throw new Error("The Ollama model function cannot be called with the new keyword.");return a(s,l)};return o.chat=a,o.embedding=i,o.languageModel=a,o.textEmbedding=i,o.textEmbeddingModel=i,o}NM();let dZ=(e,t=21)=>(n=t)=>{let r="",a=n|0;for(;a--;)r+=e[Math.random()*e.length|0];return r};function mh(...e){return e.reduce((t,n)=>({...t,...n??{}}),{})}function fZ(){let e="",t,n=[],r,a;function i(l,u){if(l===""){o(u);return}if(l.startsWith(":"))return;const d=l.indexOf(":");if(d===-1){s(l,"");return}const h=l.slice(0,d),p=d+1,g=p<l.length&&l[p]===" "?l.slice(p+1):l.slice(p);s(h,g)}function o(l){n.length>0&&(l.enqueue({event:t,data:n.join(`
`),id:r,retry:a}),n=[],t=void 0,a=void 0)}function s(l,u){switch(l){case"event":t=u;break;case"data":n.push(u);break;case"id":r=u;break;case"retry":const d=parseInt(u,10);isNaN(d)||(a=d);break}}return new TransformStream({transform(l,u){const{lines:d,incompleteLine:h}=hZ(e,l);e=h;for(let p=0;p<d.length;p++)i(d[p],u)},flush(l){i(e,l),o(l)}})}function hZ(e,t){const n=[];let r=e;for(let a=0;a<t.length;){const i=t[a++];i===`
`?(n.push(r),r=""):i==="\r"?(n.push(r),r="",t[a+1]===`
`&&a++):r+=i}return{lines:n,incompleteLine:r}}function xw(e){const t={};return e.headers.forEach((n,r)=>{t[r]=n}),t}var pZ=({prefix:e,size:t=16,alphabet:n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator:r="-"}={})=>{const a=dZ(n,t);if(e==null)return a;if(n.includes(r))throw new NC({argument:"separator",message:`The separator "${r}" must not be part of the alphabet "${n}".`});return i=>`${e}${r}${a(i)}`},Gx=pZ();function mZ(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>n!=null))}function Wx(e){return e instanceof Error&&(e.name==="AbortError"||e.name==="TimeoutError")}var v2=Symbol.for("vercel.ai.validator");function gZ(e){return{[v2]:!0,validate:e}}function yZ(e){return typeof e=="object"&&e!==null&&v2 in e&&e[v2]===!0&&"validate"in e}function bZ(e){return yZ(e)?e:vZ(e)}function vZ(e){return gZ(t=>{const n=e.safeParse(t);return n.success?{success:!0,value:n.data}:{success:!1,error:n.error}})}function wZ({value:e,schema:t}){const n=RM({value:e,schema:t});if(!n.success)throw Qc.wrap({value:e,cause:n.error});return n.value}function RM({value:e,schema:t}){const n=bZ(t);try{if(n.validate==null)return{success:!0,value:e};const r=n.validate(e);return r.success?r:{success:!1,error:Qc.wrap({value:e,cause:r.error})}}catch(r){return{success:!1,error:Qc.wrap({value:e,cause:r})}}}function _Z({text:e,schema:t}){try{const n=ns.parse(e);return t==null?n:wZ({value:n,schema:t})}catch(n){throw Jc.isInstance(n)||Qc.isInstance(n)?n:new Jc({text:e,cause:n})}}function IM({text:e,schema:t}){try{const n=ns.parse(e);if(t==null)return{success:!0,value:n,rawValue:n};const r=RM({value:n,schema:t});return r.success?{...r,rawValue:n}:r}catch(n){return{success:!1,error:Jc.isInstance(n)?n:new Jc({text:e,cause:n})}}}function P3(e){try{return ns.parse(e),!0}catch{return!1}}var xZ=()=>globalThis.fetch,gh=async({url:e,headers:t,body:n,failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o})=>SZ({url:e,headers:{"Content-Type":"application/json",...t},body:{content:JSON.stringify(n),values:n},failedResponseHandler:r,successfulResponseHandler:a,abortSignal:i,fetch:o}),SZ=async({url:e,headers:t={},body:n,successfulResponseHandler:r,failedResponseHandler:a,abortSignal:i,fetch:o=xZ()})=>{try{const s=await o(e,{method:"POST",headers:mZ(t),body:n.content,signal:i}),l=xw(s);if(!s.ok){let u;try{u=await a({response:s,url:e,requestBodyValues:n.values})}catch(d){throw Wx(d)||va.isInstance(d)?d:new va({message:"Failed to process error response",cause:d,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}throw u.value}try{return await r({response:s,url:e,requestBodyValues:n.values})}catch(u){throw u instanceof Error&&(Wx(u)||va.isInstance(u))?u:new va({message:"Failed to process successful response",cause:u,statusCode:s.status,url:e,responseHeaders:l,requestBodyValues:n.values})}}catch(s){if(Wx(s))throw s;if(s instanceof TypeError&&s.message==="fetch failed"){const l=s.cause;if(l!=null)throw new va({message:`Cannot connect to API: ${l.message}`,cause:l,url:e,requestBodyValues:n.values,isRetryable:!0})}throw s}},Sw=({errorSchema:e,errorToMessage:t,isRetryable:n})=>async({response:r,url:a,requestBodyValues:i})=>{const o=await r.text(),s=xw(r);if(o.trim()==="")return{responseHeaders:s,value:new va({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})};try{const l=_Z({text:o,schema:e});return{responseHeaders:s,value:new va({message:t(l),url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,data:l,isRetryable:n==null?void 0:n(r,l)})}}catch{return{responseHeaders:s,value:new va({message:r.statusText,url:a,requestBodyValues:i,statusCode:r.status,responseHeaders:s,responseBody:o,isRetryable:n==null?void 0:n(r)})}}},OM=e=>async({response:t})=>{const n=xw(t);if(t.body==null)throw new AC({});return{responseHeaders:n,value:t.body.pipeThrough(new TextDecoderStream).pipeThrough(fZ()).pipeThrough(new TransformStream({transform({data:r},a){r!=="[DONE]"&&a.enqueue(IM({text:r,schema:e}))}}))}},Ew=e=>async({response:t,url:n,requestBodyValues:r})=>{const a=await t.text(),i=IM({text:a,schema:e}),o=xw(t);if(!i.success)throw new va({message:"Invalid JSON response",cause:i.error,statusCode:t.status,responseHeaders:o,responseBody:a,url:n,requestBodyValues:r});return{responseHeaders:o,value:i.value,rawValue:i.rawValue}},{btoa:EZ}=globalThis;function CZ(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCodePoint(e[n]);return EZ(t)}function kZ(e){return e==null?void 0:e.replace(/\/$/,"")}function _m(e){var t,n;return(n=(t=e==null?void 0:e.providerMetadata)==null?void 0:t.openaiCompatible)!=null?n:{}}function TZ(e){const t=[];for(const{role:n,content:r,...a}of e){const i=_m({...a});switch(n){case"system":{t.push({role:"system",content:r,...i});break}case"user":{if(r.length===1&&r[0].type==="text"){t.push({role:"user",content:r[0].text,..._m(r[0])});break}t.push({role:"user",content:r.map(o=>{var s;const l=_m(o);switch(o.type){case"text":return{type:"text",text:o.text,...l};case"image":return{type:"image_url",image_url:{url:o.image instanceof URL?o.image.toString():`data:${(s=o.mimeType)!=null?s:"image/jpeg"};base64,${CZ(o.image)}`},...l};case"file":throw new Cr({functionality:"File content parts in user messages"})}}),...i});break}case"assistant":{let o="";const s=[];for(const l of r){const u=_m(l);switch(l.type){case"text":{o+=l.text;break}case"tool-call":{s.push({id:l.toolCallId,type:"function",function:{name:l.toolName,arguments:JSON.stringify(l.args)},...u});break}}}t.push({role:"assistant",content:o,tool_calls:s.length>0?s:void 0,...i});break}case"tool":{for(const o of r){const s=_m(o);t.push({role:"tool",tool_call_id:o.toolCallId,content:JSON.stringify(o.result),...s})}break}default:{const o=n;throw new Error(`Unsupported role: ${o}`)}}}return t}function _v({id:e,model:t,created:n}){return{id:e??void 0,modelId:t??void 0,timestamp:n!=null?new Date(n*1e3):void 0}}function xv(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content-filter";case"function_call":case"tool_calls":return"tool-calls";default:return"unknown"}}var AZ=$.object({error:$.object({message:$.string(),type:$.string().nullish(),param:$.any().nullish(),code:$.union([$.string(),$.number()]).nullish()})}),Cw={errorSchema:AZ,errorToMessage:e=>e.error.message};function NZ({mode:e,structuredOutputs:t}){var n;const r=(n=e.tools)!=null&&n.length?e.tools:void 0,a=[];if(r==null)return{tools:void 0,tool_choice:void 0,toolWarnings:a};const i=e.toolChoice,o=[];for(const l of r)l.type==="provider-defined"?a.push({type:"unsupported-tool",tool:l}):o.push({type:"function",function:{name:l.name,description:l.description,parameters:l.parameters}});if(i==null)return{tools:o,tool_choice:void 0,toolWarnings:a};const s=i.type;switch(s){case"auto":case"none":case"required":return{tools:o,tool_choice:s,toolWarnings:a};case"tool":return{tools:o,tool_choice:{type:"function",function:{name:i.toolName}},toolWarnings:a};default:{const l=s;throw new Cr({functionality:`Unsupported tool choice type: ${l}`})}}}var RZ=class{constructor(e,t,n){this.specificationVersion="v1";var r,a;this.modelId=e,this.settings=t,this.config=n;const i=(r=n.errorStructure)!=null?r:Cw;this.chunkSchema=OZ(i.errorSchema),this.failedResponseHandler=Sw(i),this.supportsStructuredOutputs=(a=n.supportsStructuredOutputs)!=null?a:!1}get defaultObjectGenerationMode(){return this.config.defaultObjectGenerationMode}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,prompt:t,maxTokens:n,temperature:r,topP:a,topK:i,frequencyPenalty:o,presencePenalty:s,providerMetadata:l,stopSequences:u,responseFormat:d,seed:h}){var p,g;const v=e.type,b=[];i!=null&&b.push({type:"unsupported-setting",setting:"topK"}),(d==null?void 0:d.type)==="json"&&d.schema!=null&&!this.supportsStructuredOutputs&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format schema is only supported with structuredOutputs"});const _={model:this.modelId,user:this.settings.user,max_tokens:n,temperature:r,top_p:a,frequency_penalty:o,presence_penalty:s,response_format:(d==null?void 0:d.type)==="json"?this.supportsStructuredOutputs===!0&&d.schema!=null?{type:"json_schema",json_schema:{schema:d.schema,name:(p=d.name)!=null?p:"response",description:d.description}}:{type:"json_object"}:void 0,stop:u,seed:h,...l==null?void 0:l[this.providerOptionsName],messages:TZ(t)};switch(v){case"regular":{const{tools:x,tool_choice:S,toolWarnings:E}=NZ({mode:e,structuredOutputs:this.supportsStructuredOutputs});return{args:{..._,tools:x,tool_choice:S},warnings:[...b,...E]}}case"object-json":return{args:{..._,response_format:this.supportsStructuredOutputs===!0&&e.schema!=null?{type:"json_schema",json_schema:{schema:e.schema,name:(g=e.name)!=null?g:"response",description:e.description}}:{type:"json_object"}},warnings:b};case"object-tool":return{args:{..._,tool_choice:{type:"function",function:{name:e.tool.name}},tools:[{type:"function",function:{name:e.tool.name,description:e.tool.description,parameters:e.tool.parameters}}]},warnings:b};default:{const x=v;throw new Error(`Unsupported type: ${x}`)}}}async doGenerate(e){var t,n,r,a,i,o,s,l,u;const{args:d,warnings:h}=this.getArgs({...e}),p=JSON.stringify(d),{responseHeaders:g,value:v,rawValue:b}=await gh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:d,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Ew(IZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:_,...x}=d,S=v.choices[0],E=(n=(t=this.config.metadataExtractor)==null?void 0:t.extractMetadata)==null?void 0:n.call(t,{parsedBody:b});return{text:(r=S.message.content)!=null?r:void 0,reasoning:(a=S.message.reasoning_content)!=null?a:void 0,toolCalls:(i=S.message.tool_calls)==null?void 0:i.map(C=>{var k;return{toolCallType:"function",toolCallId:(k=C.id)!=null?k:Gx(),toolName:C.function.name,args:C.function.arguments}}),finishReason:xv(S.finish_reason),usage:{promptTokens:(s=(o=v.usage)==null?void 0:o.prompt_tokens)!=null?s:NaN,completionTokens:(u=(l=v.usage)==null?void 0:l.completion_tokens)!=null?u:NaN},...E&&{providerMetadata:E},rawCall:{rawPrompt:_,rawSettings:x},rawResponse:{headers:g,body:b},response:_v(v),warnings:h,request:{body:p}}}async doStream(e){var t;if(this.settings.simulateStreaming){const v=await this.doGenerate(e);return{stream:new ReadableStream({start(_){if(_.enqueue({type:"response-metadata",...v.response}),v.reasoning)if(Array.isArray(v.reasoning))for(const x of v.reasoning)x.type==="text"&&_.enqueue({type:"reasoning",textDelta:x.text});else _.enqueue({type:"reasoning",textDelta:v.reasoning});if(v.text&&_.enqueue({type:"text-delta",textDelta:v.text}),v.toolCalls)for(const x of v.toolCalls)_.enqueue({type:"tool-call",...x});_.enqueue({type:"finish",finishReason:v.finishReason,usage:v.usage,logprobs:v.logprobs,providerMetadata:v.providerMetadata}),_.close()}}),rawCall:v.rawCall,rawResponse:v.rawResponse,warnings:v.warnings}}const{args:n,warnings:r}=this.getArgs({...e}),a=JSON.stringify({...n,stream:!0}),i=(t=this.config.metadataExtractor)==null?void 0:t.createStreamExtractor(),{responseHeaders:o,value:s}=await gh({url:this.config.url({path:"/chat/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:{...n,stream:!0},failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:OM(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{messages:l,...u}=n,d=[];let h="unknown",p={promptTokens:void 0,completionTokens:void 0},g=!0;return{stream:s.pipeThrough(new TransformStream({transform(v,b){var _,x,S,E,C,k,R,D,O,L,B,Y,F,Z;if(!v.success){h="error",b.enqueue({type:"error",error:v.error});return}const q=v.value;if(i==null||i.processChunk(v.rawValue),"error"in q){h="error",b.enqueue({type:"error",error:q.error.message});return}g&&(g=!1,b.enqueue({type:"response-metadata",..._v(q)})),q.usage!=null&&(p={promptTokens:(_=q.usage.prompt_tokens)!=null?_:void 0,completionTokens:(x=q.usage.completion_tokens)!=null?x:void 0});const ne=q.choices[0];if((ne==null?void 0:ne.finish_reason)!=null&&(h=xv(ne.finish_reason)),(ne==null?void 0:ne.delta)==null)return;const ae=ne.delta;if(ae.reasoning_content!=null&&b.enqueue({type:"reasoning",textDelta:ae.reasoning_content}),ae.content!=null&&b.enqueue({type:"text-delta",textDelta:ae.content}),ae.tool_calls!=null)for(const re of ae.tool_calls){const ee=re.index;if(d[ee]==null){if(re.type!=="function")throw new th({data:re,message:"Expected 'function' type."});if(re.id==null)throw new th({data:re,message:"Expected 'id' to be a string."});if(((S=re.function)==null?void 0:S.name)==null)throw new th({data:re,message:"Expected 'function.name' to be a string."});d[ee]={id:re.id,type:"function",function:{name:re.function.name,arguments:(E=re.function.arguments)!=null?E:""},hasFinished:!1};const U=d[ee];((C=U.function)==null?void 0:C.name)!=null&&((k=U.function)==null?void 0:k.arguments)!=null&&(U.function.arguments.length>0&&b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:U.id,toolName:U.function.name,argsTextDelta:U.function.arguments}),P3(U.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(R=U.id)!=null?R:Gx(),toolName:U.function.name,args:U.function.arguments}),U.hasFinished=!0));continue}const ie=d[ee];ie.hasFinished||(((D=re.function)==null?void 0:D.arguments)!=null&&(ie.function.arguments+=(L=(O=re.function)==null?void 0:O.arguments)!=null?L:""),b.enqueue({type:"tool-call-delta",toolCallType:"function",toolCallId:ie.id,toolName:ie.function.name,argsTextDelta:(B=re.function.arguments)!=null?B:""}),((Y=ie.function)==null?void 0:Y.name)!=null&&((F=ie.function)==null?void 0:F.arguments)!=null&&P3(ie.function.arguments)&&(b.enqueue({type:"tool-call",toolCallType:"function",toolCallId:(Z=ie.id)!=null?Z:Gx(),toolName:ie.function.name,args:ie.function.arguments}),ie.hasFinished=!0))}},flush(v){var b,_;const x=i==null?void 0:i.buildMetadata();v.enqueue({type:"finish",finishReason:h,usage:{promptTokens:(b=p.promptTokens)!=null?b:NaN,completionTokens:(_=p.completionTokens)!=null?_:NaN},...x&&{providerMetadata:x}})}})),rawCall:{rawPrompt:l,rawSettings:u},rawResponse:{headers:o},warnings:r,request:{body:a}}}},IZ=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({message:$.object({role:$.literal("assistant").nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({id:$.string().nullish(),type:$.literal("function"),function:$.object({name:$.string(),arguments:$.string()})})).nullish()}),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),OZ=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({delta:$.object({role:$.enum(["assistant"]).nullish(),content:$.string().nullish(),reasoning_content:$.string().nullish(),tool_calls:$.array($.object({index:$.number(),id:$.string().nullish(),type:$.literal("function").optional(),function:$.object({name:$.string().nullish(),arguments:$.string().nullish()})})).nullish()}).nullish(),finish_reason:$.string().nullish()})),usage:$.object({prompt_tokens:$.number().nullish(),completion_tokens:$.number().nullish()}).nullish()}),e]);function DZ({prompt:e,inputFormat:t,user:n="user",assistant:r="assistant"}){if(t==="prompt"&&e.length===1&&e[0].role==="user"&&e[0].content.length===1&&e[0].content[0].type==="text")return{prompt:e[0].content[0].text};let a="";e[0].role==="system"&&(a+=`${e[0].content}

`,e=e.slice(1));for(const{role:i,content:o}of e)switch(i){case"system":throw new kl({message:"Unexpected system message in prompt: ${content}",prompt:e});case"user":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"image":throw new Cr({functionality:"images"})}}).join("");a+=`${n}:
${s}

`;break}case"assistant":{const s=o.map(l=>{switch(l.type){case"text":return l.text;case"tool-call":throw new Cr({functionality:"tool-call messages"})}}).join("");a+=`${r}:
${s}

`;break}case"tool":throw new Cr({functionality:"tool messages"});default:{const s=i;throw new Error(`Unsupported role: ${s}`)}}return a+=`${r}:
`,{prompt:a,stopSequences:[`
${n}:`]}}var jZ=class{constructor(e,t,n){this.specificationVersion="v1",this.defaultObjectGenerationMode=void 0;var r;this.modelId=e,this.settings=t,this.config=n;const a=(r=n.errorStructure)!=null?r:Cw;this.chunkSchema=PZ(a.errorSchema),this.failedResponseHandler=Sw(a)}get provider(){return this.config.provider}get providerOptionsName(){return this.config.provider.split(".")[0].trim()}getArgs({mode:e,inputFormat:t,prompt:n,maxTokens:r,temperature:a,topP:i,topK:o,frequencyPenalty:s,presencePenalty:l,stopSequences:u,responseFormat:d,seed:h,providerMetadata:p}){var g;const v=e.type,b=[];o!=null&&b.push({type:"unsupported-setting",setting:"topK"}),d!=null&&d.type!=="text"&&b.push({type:"unsupported-setting",setting:"responseFormat",details:"JSON response format is not supported."});const{prompt:_,stopSequences:x}=DZ({prompt:n,inputFormat:t}),S=[...x??[],...u??[]],E={model:this.modelId,echo:this.settings.echo,logit_bias:this.settings.logitBias,suffix:this.settings.suffix,user:this.settings.user,max_tokens:r,temperature:a,top_p:i,frequency_penalty:s,presence_penalty:l,seed:h,...p==null?void 0:p[this.providerOptionsName],prompt:_,stop:S.length>0?S:void 0};switch(v){case"regular":{if((g=e.tools)!=null&&g.length)throw new Cr({functionality:"tools"});if(e.toolChoice)throw new Cr({functionality:"toolChoice"});return{args:E,warnings:b}}case"object-json":throw new Cr({functionality:"object-json mode"});case"object-tool":throw new Cr({functionality:"object-tool mode"});default:{const C=v;throw new Error(`Unsupported type: ${C}`)}}}async doGenerate(e){var t,n,r,a;const{args:i,warnings:o}=this.getArgs(e),{responseHeaders:s,value:l,rawValue:u}=await gh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:i,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:Ew(MZ),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:d,...h}=i,p=l.choices[0];return{text:p.text,usage:{promptTokens:(n=(t=l.usage)==null?void 0:t.prompt_tokens)!=null?n:NaN,completionTokens:(a=(r=l.usage)==null?void 0:r.completion_tokens)!=null?a:NaN},finishReason:xv(p.finish_reason),rawCall:{rawPrompt:d,rawSettings:h},rawResponse:{headers:s,body:u},response:_v(l),warnings:o,request:{body:JSON.stringify(i)}}}async doStream(e){const{args:t,warnings:n}=this.getArgs(e),r={...t,stream:!0},{responseHeaders:a,value:i}=await gh({url:this.config.url({path:"/completions",modelId:this.modelId}),headers:mh(this.config.headers(),e.headers),body:r,failedResponseHandler:this.failedResponseHandler,successfulResponseHandler:OM(this.chunkSchema),abortSignal:e.abortSignal,fetch:this.config.fetch}),{prompt:o,...s}=t;let l="unknown",u={promptTokens:Number.NaN,completionTokens:Number.NaN},d=!0;return{stream:i.pipeThrough(new TransformStream({transform(h,p){if(!h.success){l="error",p.enqueue({type:"error",error:h.error});return}const g=h.value;if("error"in g){l="error",p.enqueue({type:"error",error:g.error});return}d&&(d=!1,p.enqueue({type:"response-metadata",..._v(g)})),g.usage!=null&&(u={promptTokens:g.usage.prompt_tokens,completionTokens:g.usage.completion_tokens});const v=g.choices[0];(v==null?void 0:v.finish_reason)!=null&&(l=xv(v.finish_reason)),(v==null?void 0:v.text)!=null&&p.enqueue({type:"text-delta",textDelta:v.text})},flush(h){h.enqueue({type:"finish",finishReason:l,usage:u})}})),rawCall:{rawPrompt:o,rawSettings:s},rawResponse:{headers:a},warnings:n,request:{body:JSON.stringify(r)}}}},MZ=$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),PZ=e=>$.union([$.object({id:$.string().nullish(),created:$.number().nullish(),model:$.string().nullish(),choices:$.array($.object({text:$.string(),finish_reason:$.string().nullish(),index:$.number()})),usage:$.object({prompt_tokens:$.number(),completion_tokens:$.number()}).nullish()}),e]),FZ=class{constructor(e,t,n){this.specificationVersion="v1",this.modelId=e,this.settings=t,this.config=n}get provider(){return this.config.provider}get maxEmbeddingsPerCall(){var e;return(e=this.config.maxEmbeddingsPerCall)!=null?e:2048}get supportsParallelCalls(){var e;return(e=this.config.supportsParallelCalls)!=null?e:!0}async doEmbed({values:e,headers:t,abortSignal:n}){var r;if(e.length>this.maxEmbeddingsPerCall)throw new RC({provider:this.provider,modelId:this.modelId,maxEmbeddingsPerCall:this.maxEmbeddingsPerCall,values:e});const{responseHeaders:a,value:i}=await gh({url:this.config.url({path:"/embeddings",modelId:this.modelId}),headers:mh(this.config.headers(),t),body:{model:this.modelId,input:e,encoding_format:"float",dimensions:this.settings.dimensions,user:this.settings.user},failedResponseHandler:Sw((r=this.config.errorStructure)!=null?r:Cw),successfulResponseHandler:Ew(LZ),abortSignal:n,fetch:this.config.fetch});return{embeddings:i.data.map(o=>o.embedding),usage:i.usage?{tokens:i.usage.prompt_tokens}:void 0,rawResponse:{headers:a}}}},LZ=$.object({data:$.array($.object({embedding:$.array($.number())})),usage:$.object({prompt_tokens:$.number()}).nullish()}),$Z=class{constructor(e,t,n){this.modelId=e,this.settings=t,this.config=n,this.specificationVersion="v1"}get maxImagesPerCall(){var e;return(e=this.settings.maxImagesPerCall)!=null?e:10}get provider(){return this.config.provider}async doGenerate({prompt:e,n:t,size:n,aspectRatio:r,seed:a,providerOptions:i,headers:o,abortSignal:s}){var l,u,d,h,p;const g=[];r!=null&&g.push({type:"unsupported-setting",setting:"aspectRatio",details:"This model does not support aspect ratio. Use `size` instead."}),a!=null&&g.push({type:"unsupported-setting",setting:"seed"});const v=(d=(u=(l=this.config._internal)==null?void 0:l.currentDate)==null?void 0:u.call(l))!=null?d:new Date,{value:b,responseHeaders:_}=await gh({url:this.config.url({path:"/images/generations",modelId:this.modelId}),headers:mh(this.config.headers(),o),body:{model:this.modelId,prompt:e,n:t,size:n,...(h=i.openai)!=null?h:{},response_format:"b64_json",...this.settings.user?{user:this.settings.user}:{}},failedResponseHandler:Sw((p=this.config.errorStructure)!=null?p:Cw),successfulResponseHandler:Ew(BZ),abortSignal:s,fetch:this.config.fetch});return{images:b.data.map(x=>x.b64_json),warnings:g,response:{timestamp:v,modelId:this.modelId,headers:_}}}},BZ=$.object({data:$.array($.object({b64_json:$.string()}))});function zZ(e){const t=kZ(e.baseURL),n=e.name,r=()=>({...e.apiKey&&{Authorization:`Bearer ${e.apiKey}`},...e.headers}),a=h=>({provider:`${n}.${h}`,url:({path:p})=>{const g=new URL(`${t}${p}`);return e.queryParams&&(g.search=new URLSearchParams(e.queryParams).toString()),g.toString()},headers:r,fetch:e.fetch}),i=(h,p={})=>o(h,p),o=(h,p={})=>new RZ(h,p,{...a("chat"),defaultObjectGenerationMode:"tool"}),s=(h,p={})=>new jZ(h,p,a("completion")),l=(h,p={})=>new FZ(h,p,a("embedding")),u=(h,p={})=>new $Z(h,p,a("image")),d=(h,p)=>i(h,p);return d.languageModel=i,d.chatModel=o,d.completionModel=s,d.textEmbeddingModel=l,d.imageModel=u,d}const Hc=(e,t)=>`${e}:${t}`,Zl=e=>{if(!e||!e.includes(":"))return{providerId:null,modelId:null};const t=e.split(":"),n=t[0],r=t.slice(1).join(":");return{providerId:n,modelId:r}},LC=e=>e==="openai"||e==="openrouter"||e==="google",$C=e=>e==="ollama"||e==="openai-compatible",Pm=e=>e==="openai"||e==="openrouter"||e==="ollama"||e==="openai-compatible",DM=[{value:"openai",label:"OpenAI"},{value:"google",label:"Google Gemini"},{value:"openrouter",label:"OpenRouter"},{value:"ollama",label:"Ollama"},{value:"openai-compatible",label:"OpenAI-Compatible (LMStudio, etc.)"}],UZ={openai:[{id:"gpt-4o",name:"GPT-4o"}],google:[{id:"gemini-1.5-flash-latest",name:"Gemini 1.5 Flash"},{id:"gemini-1.5-pro-latest",name:"Gemini 1.5 Pro"}],openrouter:[],ollama:[{id:"llama3",name:"Llama 3 (Ollama)"}],"openai-compatible":[]},jM=e=>{try{const t=e.replace(/\/+$/,"");return/\/(v\d+(\.\d+)*)$/.test(t)?t:t+"/v1"}catch(t){return console.error("Error processing base URL:",e,t),e.replace(/\/+$/,"")}};function MM(e,t,n){try{switch(e.type){case"openai":return lj({apiKey:n})(t);case"google":return Hj({apiKey:n})(t);case"openrouter":return AM({apiKey:n})(t);case"ollama":return NM({baseURL:e.baseURL??void 0})(t);case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required");return zZ({baseURL:jM(e.baseURL),apiKey:n,name:e.name||"Custom API"})(t);default:return console.warn(`Unsupported provider type: ${e.type}`),null}}catch(r){return console.error(`Failed instantiate model ${t} for ${e.name}:`,r),null}}function BC(e,t,n){const a=Bn.getState().getAllAvailableModelDefsForProvider(e.id).find(o=>o.id===t);if(!a){console.warn(`Model definition not found for ${t} in provider ${e.name}`);return}const i=MM(e,t,n);if(!i){console.warn(`Failed to instantiate AI SDK instance for ${t} from provider ${e.name}`);return}return{id:Hc(e.id,t),name:a.name,providerId:e.id,providerName:e.name,instance:i,metadata:a}}const PM={openai:["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs"],google:["max_tokens","temperature","top_p","top_k","stop","tools","tool_choice"],ollama:["max_tokens","temperature","top_p","top_k","stop","presence_penalty","frequency_penalty","seed","repetition_penalty","response_format"],"openai-compatible":["max_tokens","temperature","top_p","stop","presence_penalty","frequency_penalty","seed","logit_bias","response_format","tools","tool_choice","logprobs","top_logprobs","repetition_penalty","min_p","top_k"],openrouter:[]};var Ds=L6();const FM=si(Ds);function HZ(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const qZ=e=>{switch(e){case"success":return WZ;case"info":return ZZ;case"warning":return KZ;case"error":return YZ;default:return null}},VZ=Array(12).fill(0),GZ=({visible:e,className:t})=>yt.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},yt.createElement("div",{className:"sonner-spinner"},VZ.map((n,r)=>yt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),WZ=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),KZ=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ZZ=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),YZ=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},yt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),XZ=yt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},yt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),yt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),JZ=()=>{const[e,t]=yt.useState(document.hidden);return yt.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let w2=1;class QZ{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof(t==null?void 0:t.id)=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:w2++,o=this.toasts.find(l=>l.id===i),s=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(l=>l.id===i?(this.publish({...l,...t,id:i,title:r}),{...l,...t,id:i,dismissible:s,title:r}):l):this.addToast({title:r,...a,dismissible:s,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const s=a.then(async u=>{if(o=["resolve",u],yt.isValidElement(u))i=!1,this.create({id:r,type:"default",message:u});else if(tY(u)&&!u.ok){i=!1;const h=typeof n.error=="function"?await n.error(`HTTP error! status: ${u.status}`):n.error,p=typeof n.description=="function"?await n.description(`HTTP error! status: ${u.status}`):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(u instanceof Error){i=!1;const h=typeof n.error=="function"?await n.error(u):n.error,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:p,...v})}else if(n.success!==void 0){i=!1;const h=typeof n.success=="function"?await n.success(u):n.success,p=typeof n.description=="function"?await n.description(u):n.description,v=typeof h=="object"&&!yt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:p,...v})}}).catch(async u=>{if(o=["reject",u],n.error!==void 0){i=!1;const d=typeof n.error=="function"?await n.error(u):n.error,h=typeof n.description=="function"?await n.description(u):n.description,g=typeof d=="object"&&!yt.isValidElement(d)?d:{message:d};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),l=()=>new Promise((u,d)=>s.then(()=>o[0]==="reject"?d(o[1]):u(o[1])).catch(d));return typeof r!="string"&&typeof r!="number"?{unwrap:l}:Object.assign(r,{unwrap:l})},this.custom=(t,n)=>{const r=(n==null?void 0:n.id)||w2++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Ni=new QZ,eY=(e,t)=>{const n=(t==null?void 0:t.id)||w2++;return Ni.addToast({title:e,...t,id:n}),n},tY=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",nY=eY,rY=()=>Ni.toasts,aY=()=>Ni.getActiveToasts(),lt=Object.assign(nY,{success:Ni.success,info:Ni.info,warning:Ni.warning,error:Ni.error,custom:Ni.custom,message:Ni.message,promise:Ni.promise,dismiss:Ni.dismiss,loading:Ni.loading},{getHistory:rY,getToasts:aY});HZ("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}[data-sonner-toaster][data-lifted=true]{transform:translateY(-8px)}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function sb(e){return e.label!==void 0}const iY=3,oY="24px",sY="16px",F3=4e3,lY=356,cY=14,uY=45,dY=200;function Ss(...e){return e.filter(Boolean).join(" ")}function fY(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const hY=e=>{var t,n,r,a,i,o,s,l,u;const{invert:d,toast:h,unstyled:p,interacting:g,setHeights:v,visibleToasts:b,heights:_,index:x,toasts:S,expanded:E,removeToast:C,defaultRichColors:k,closeButton:R,style:D,cancelButtonStyle:O,actionButtonStyle:L,className:B="",descriptionClassName:Y="",duration:F,position:Z,gap:q,expandByDefault:ne,classNames:ae,icons:re,closeButtonAriaLabel:ee="Close toast"}=e,[ie,U]=yt.useState(null),[Q,X]=yt.useState(null),[de,be]=yt.useState(!1),[_e,Pe]=yt.useState(!1),[Ne,Re]=yt.useState(!1),[Ce,Fe]=yt.useState(!1),[Qe,Le]=yt.useState(!1),[Ie,V]=yt.useState(0),[me,Te]=yt.useState(0),le=yt.useRef(h.duration||F||F3),oe=yt.useRef(null),J=yt.useRef(null),xe=x===0,Me=x+1<=b,Ee=h.type,We=h.dismissible!==!1,kt=h.className||"",at=h.descriptionClassName||"",_t=yt.useMemo(()=>_.findIndex(De=>De.toastId===h.id)||0,[_,h.id]),jt=yt.useMemo(()=>{var De;return(De=h.closeButton)!=null?De:R},[h.closeButton,R]),Dt=yt.useMemo(()=>h.duration||F||F3,[h.duration,F]),Gt=yt.useRef(0),ye=yt.useRef(0),I=yt.useRef(0),G=yt.useRef(null),[fe,Oe]=Z.split("-"),ve=yt.useMemo(()=>_.reduce((De,Ke,Nt)=>Nt>=_t?De:De+Ke.height,0),[_,_t]),ke=JZ(),ce=h.invert||d,ft=Ee==="loading";ye.current=yt.useMemo(()=>_t*q+ve,[_t,ve]),yt.useEffect(()=>{le.current=Dt},[Dt]),yt.useEffect(()=>{be(!0)},[]),yt.useEffect(()=>{const De=J.current;if(De){const Ke=De.getBoundingClientRect().height;return Te(Ke),v(Nt=>[{toastId:h.id,height:Ke,position:h.position},...Nt]),()=>v(Nt=>Nt.filter(pe=>pe.toastId!==h.id))}},[v,h.id]),yt.useLayoutEffect(()=>{if(!de)return;const De=J.current,Ke=De.style.height;De.style.height="auto";const Nt=De.getBoundingClientRect().height;De.style.height=Ke,Te(Nt),v(pe=>pe.find(z=>z.toastId===h.id)?pe.map(z=>z.toastId===h.id?{...z,height:Nt}:z):[{toastId:h.id,height:Nt,position:h.position},...pe])},[de,h.title,h.description,v,h.id]);const vt=yt.useCallback(()=>{Pe(!0),V(ye.current),v(De=>De.filter(Ke=>Ke.toastId!==h.id)),setTimeout(()=>{C(h)},dY)},[h,C,v,ye]);yt.useEffect(()=>{if(h.promise&&Ee==="loading"||h.duration===1/0||h.type==="loading")return;let De;return E||g||ke?(()=>{if(I.current<Gt.current){const pe=new Date().getTime()-Gt.current;le.current=le.current-pe}I.current=new Date().getTime()})():(()=>{le.current!==1/0&&(Gt.current=new Date().getTime(),De=setTimeout(()=>{h.onAutoClose==null||h.onAutoClose.call(h,h),vt()},le.current))})(),()=>clearTimeout(De)},[E,g,h,Ee,ke,vt]),yt.useEffect(()=>{h.delete&&vt()},[vt,h.delete]);function M(){var De;if(re!=null&&re.loading){var Ke;return yt.createElement("div",{className:Ss(ae==null?void 0:ae.loader,h==null||(Ke=h.classNames)==null?void 0:Ke.loader,"sonner-loader"),"data-visible":Ee==="loading"},re.loading)}return yt.createElement(GZ,{className:Ss(ae==null?void 0:ae.loader,h==null||(De=h.classNames)==null?void 0:De.loader),visible:Ee==="loading"})}const Be=h.icon||(re==null?void 0:re[Ee])||qZ(Ee);var tt,ge;return yt.createElement("li",{tabIndex:0,ref:J,className:Ss(B,kt,ae==null?void 0:ae.toast,h==null||(t=h.classNames)==null?void 0:t.toast,ae==null?void 0:ae.default,ae==null?void 0:ae[Ee],h==null||(n=h.classNames)==null?void 0:n[Ee]),"data-sonner-toast":"","data-rich-colors":(tt=h.richColors)!=null?tt:k,"data-styled":!(h.jsx||h.unstyled||p),"data-mounted":de,"data-promise":!!h.promise,"data-swiped":Qe,"data-removed":_e,"data-visible":Me,"data-y-position":fe,"data-x-position":Oe,"data-index":x,"data-front":xe,"data-swiping":Ne,"data-dismissible":We,"data-type":Ee,"data-invert":ce,"data-swipe-out":Ce,"data-swipe-direction":Q,"data-expanded":!!(E||ne&&de),style:{"--index":x,"--toasts-before":x,"--z-index":S.length-x,"--offset":`${_e?Ie:ye.current}px`,"--initial-height":ne?"auto":`${me}px`,...D,...h.style},onDragEnd:()=>{Re(!1),U(null),G.current=null},onPointerDown:De=>{ft||!We||(oe.current=new Date,V(ye.current),De.target.setPointerCapture(De.pointerId),De.target.tagName!=="BUTTON"&&(Re(!0),G.current={x:De.clientX,y:De.clientY}))},onPointerUp:()=>{var De,Ke,Nt;if(Ce||!We)return;G.current=null;const pe=Number(((De=J.current)==null?void 0:De.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),H=Number(((Ke=J.current)==null?void 0:Ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),z=new Date().getTime()-((Nt=oe.current)==null?void 0:Nt.getTime()),W=ie==="x"?pe:H,he=Math.abs(W)/z;if(Math.abs(W)>=uY||he>.11){V(ye.current),h.onDismiss==null||h.onDismiss.call(h,h),X(ie==="x"?pe>0?"right":"left":H>0?"down":"up"),vt(),Fe(!0);return}else{var Ae,He;(Ae=J.current)==null||Ae.style.setProperty("--swipe-amount-x","0px"),(He=J.current)==null||He.style.setProperty("--swipe-amount-y","0px")}Le(!1),Re(!1),U(null)},onPointerMove:De=>{var Ke,Nt,pe;if(!G.current||!We||((Ke=window.getSelection())==null?void 0:Ke.toString().length)>0)return;const z=De.clientY-G.current.y,W=De.clientX-G.current.x;var he;const Ae=(he=e.swipeDirections)!=null?he:fY(Z);!ie&&(Math.abs(W)>1||Math.abs(z)>1)&&U(Math.abs(W)>Math.abs(z)?"x":"y");let He={x:0,y:0};const pt=Vt=>1/(1.5+Math.abs(Vt)/20);if(ie==="y"){if(Ae.includes("top")||Ae.includes("bottom"))if(Ae.includes("top")&&z<0||Ae.includes("bottom")&&z>0)He.y=z;else{const Vt=z*pt(z);He.y=Math.abs(Vt)<Math.abs(z)?Vt:z}}else if(ie==="x"&&(Ae.includes("left")||Ae.includes("right")))if(Ae.includes("left")&&W<0||Ae.includes("right")&&W>0)He.x=W;else{const Vt=W*pt(W);He.x=Math.abs(Vt)<Math.abs(W)?Vt:W}(Math.abs(He.x)>0||Math.abs(He.y)>0)&&Le(!0),(Nt=J.current)==null||Nt.style.setProperty("--swipe-amount-x",`${He.x}px`),(pe=J.current)==null||pe.style.setProperty("--swipe-amount-y",`${He.y}px`)}},jt&&!h.jsx&&Ee!=="loading"?yt.createElement("button",{"aria-label":ee,"data-disabled":ft,"data-close-button":!0,onClick:ft||!We?()=>{}:()=>{vt(),h.onDismiss==null||h.onDismiss.call(h,h)},className:Ss(ae==null?void 0:ae.closeButton,h==null||(r=h.classNames)==null?void 0:r.closeButton)},(ge=re==null?void 0:re.close)!=null?ge:XZ):null,(Ee||h.icon||h.promise)&&h.icon!==null&&((re==null?void 0:re[Ee])!==null||h.icon)?yt.createElement("div",{"data-icon":"",className:Ss(ae==null?void 0:ae.icon,h==null||(a=h.classNames)==null?void 0:a.icon)},h.promise||h.type==="loading"&&!h.icon?h.icon||M():null,h.type!=="loading"?Be:null):null,yt.createElement("div",{"data-content":"",className:Ss(ae==null?void 0:ae.content,h==null||(i=h.classNames)==null?void 0:i.content)},yt.createElement("div",{"data-title":"",className:Ss(ae==null?void 0:ae.title,h==null||(o=h.classNames)==null?void 0:o.title)},h.jsx?h.jsx:typeof h.title=="function"?h.title():h.title),h.description?yt.createElement("div",{"data-description":"",className:Ss(Y,at,ae==null?void 0:ae.description,h==null||(s=h.classNames)==null?void 0:s.description)},typeof h.description=="function"?h.description():h.description):null),yt.isValidElement(h.cancel)?h.cancel:h.cancel&&sb(h.cancel)?yt.createElement("button",{"data-button":!0,"data-cancel":!0,style:h.cancelButtonStyle||O,onClick:De=>{sb(h.cancel)&&We&&(h.cancel.onClick==null||h.cancel.onClick.call(h.cancel,De),vt())},className:Ss(ae==null?void 0:ae.cancelButton,h==null||(l=h.classNames)==null?void 0:l.cancelButton)},h.cancel.label):null,yt.isValidElement(h.action)?h.action:h.action&&sb(h.action)?yt.createElement("button",{"data-button":!0,"data-action":!0,style:h.actionButtonStyle||L,onClick:De=>{sb(h.action)&&(h.action.onClick==null||h.action.onClick.call(h.action,De),!De.defaultPrevented&&vt())},className:Ss(ae==null?void 0:ae.actionButton,h==null||(u=h.classNames)==null?void 0:u.actionButton)},h.action.label):null)};function L3(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function pY(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",s=i?sY:oY;function l(u){["top","right","bottom","left"].forEach(d=>{n[`${o}-${d}`]=typeof u=="number"?`${u}px`:u})}typeof r=="number"||typeof r=="string"?l(r):typeof r=="object"?["top","right","bottom","left"].forEach(u=>{r[u]===void 0?n[`${o}-${u}`]=s:n[`${o}-${u}`]=typeof r[u]=="number"?`${r[u]}px`:r[u]}):l(s)}),n}const mY=yt.forwardRef(function(t,n){const{invert:r,position:a="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:s,className:l,offset:u,mobileOffset:d,theme:h="light",richColors:p,duration:g,style:v,visibleToasts:b=iY,toastOptions:_,dir:x=L3(),gap:S=cY,icons:E,containerAriaLabel:C="Notifications"}=t,[k,R]=yt.useState([]),D=yt.useMemo(()=>Array.from(new Set([a].concat(k.filter(Q=>Q.position).map(Q=>Q.position)))),[k,a]),[O,L]=yt.useState([]),[B,Y]=yt.useState(!1),[F,Z]=yt.useState(!1),[q,ne]=yt.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ae=yt.useRef(null),re=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=yt.useRef(null),ie=yt.useRef(!1),U=yt.useCallback(Q=>{R(X=>{var de;return(de=X.find(be=>be.id===Q.id))!=null&&de.delete||Ni.dismiss(Q.id),X.filter(({id:be})=>be!==Q.id)})},[]);return yt.useEffect(()=>Ni.subscribe(Q=>{if(Q.dismiss){requestAnimationFrame(()=>{R(X=>X.map(de=>de.id===Q.id?{...de,delete:!0}:de))});return}setTimeout(()=>{FM.flushSync(()=>{R(X=>{const de=X.findIndex(be=>be.id===Q.id);return de!==-1?[...X.slice(0,de),{...X[de],...Q},...X.slice(de+1)]:[Q,...X]})})})}),[k]),yt.useEffect(()=>{if(h!=="system"){ne(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ne("dark"):ne("light")),typeof window>"u")return;const Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:X})=>{ne(X?"dark":"light")})}catch{Q.addListener(({matches:de})=>{try{ne(de?"dark":"light")}catch(be){console.error(be)}})}},[h]),yt.useEffect(()=>{k.length<=1&&Y(!1)},[k]),yt.useEffect(()=>{const Q=X=>{var de;if(i.every(Pe=>X[Pe]||X.code===Pe)){var _e;Y(!0),(_e=ae.current)==null||_e.focus()}X.code==="Escape"&&(document.activeElement===ae.current||(de=ae.current)!=null&&de.contains(document.activeElement))&&Y(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[i]),yt.useEffect(()=>{if(ae.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,ie.current=!1)}},[ae.current]),yt.createElement("section",{ref:n,"aria-label":`${C} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},D.map((Q,X)=>{var de;const[be,_e]=Q.split("-");return k.length?yt.createElement("ol",{key:Q,dir:x==="auto"?L3():x,tabIndex:-1,ref:ae,className:l,"data-sonner-toaster":!0,"data-sonner-theme":q,"data-y-position":be,"data-lifted":B&&k.length>1&&!o,"data-x-position":_e,style:{"--front-toast-height":`${((de=O[0])==null?void 0:de.height)||0}px`,"--width":`${lY}px`,"--gap":`${S}px`,...v,...pY(u,d)},onBlur:Pe=>{ie.current&&!Pe.currentTarget.contains(Pe.relatedTarget)&&(ie.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||ie.current||(ie.current=!0,ee.current=Pe.relatedTarget)},onMouseEnter:()=>Y(!0),onMouseMove:()=>Y(!0),onMouseLeave:()=>{F||Y(!1)},onDragEnd:()=>Y(!1),onPointerDown:Pe=>{Pe.target instanceof HTMLElement&&Pe.target.dataset.dismissible==="false"||Z(!0)},onPointerUp:()=>Z(!1)},k.filter(Pe=>!Pe.position&&X===0||Pe.position===Q).map((Pe,Ne)=>{var Re,Ce;return yt.createElement(hY,{key:Pe.id,icons:E,index:Ne,toast:Pe,defaultRichColors:p,duration:(Re=_==null?void 0:_.duration)!=null?Re:g,className:_==null?void 0:_.className,descriptionClassName:_==null?void 0:_.descriptionClassName,invert:r,visibleToasts:b,closeButton:(Ce=_==null?void 0:_.closeButton)!=null?Ce:s,interacting:F,position:Q,style:_==null?void 0:_.style,unstyled:_==null?void 0:_.unstyled,classNames:_==null?void 0:_.classNames,cancelButtonStyle:_==null?void 0:_.cancelButtonStyle,actionButtonStyle:_==null?void 0:_.actionButtonStyle,closeButtonAriaLabel:_==null?void 0:_.closeButtonAriaLabel,removeToast:U,toasts:k.filter(Fe=>Fe.position==Pe.position),heights:O.filter(Fe=>Fe.position==Pe.position),setHeights:L,expandByDefault:o,gap:S,expanded:B,swipeDirections:t.swipeDirections})})):null}))}),xm=new Map,gY=5*60*1e3,yY=(e,t)=>{var i,o,s,l,u,d,h,p,g,v,b,_,x,S;const n=e.id||e.name,r=e.name||n,a={id:n,name:r,created:e.created??null,description:e.description??null,context_length:e.context_length??null,architecture:{modality:((i=e.architecture)==null?void 0:i.modality)??"text->text",input_modalities:((o=e.architecture)==null?void 0:o.input_modalities)??["text"],output_modalities:((s=e.architecture)==null?void 0:s.output_modalities)??["text"],tokenizer:((l=e.architecture)==null?void 0:l.tokenizer)??"Unknown",instruct_type:((u=e.architecture)==null?void 0:u.instruct_type)??null},pricing:{prompt:((d=e.pricing)==null?void 0:d.prompt)??"0",completion:((h=e.pricing)==null?void 0:h.completion)??"0",request:((p=e.pricing)==null?void 0:p.request)??"0",image:((g=e.pricing)==null?void 0:g.image)??"0",web_search:((v=e.pricing)==null?void 0:v.web_search)??"0",internal_reasoning:((b=e.pricing)==null?void 0:b.internal_reasoning)??"0"},top_provider:{context_length:((_=e.top_provider)==null?void 0:_.context_length)??e.context_length??null,max_completion_tokens:((x=e.top_provider)==null?void 0:x.max_completion_tokens)??null,is_moderated:((S=e.top_provider)==null?void 0:S.is_moderated)??!1},per_request_limits:e.per_request_limits??null,supported_parameters:e.supported_parameters??PM[t]??[]};return t==="ollama"?(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Ollama")):t==="openai"?(n.includes("gpt-4")&&(a.context_length=8192),n.includes("gpt-4-32k")&&(a.context_length=32768),n.includes("gpt-4-turbo")&&(a.context_length=128e3),n.includes("gpt-4o")&&(a.context_length=128e3),n.includes("gpt-3.5-turbo")&&(a.context_length=16385),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="OpenAI")):t==="google"?(n.includes("gemini-1.5")?a.context_length=1048576:n.includes("gemini")&&(a.context_length=32768),a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Google")):t==="openai-compatible"&&(a.context_length=a.context_length??4096,a.top_provider&&(a.top_provider.context_length=a.context_length),a.architecture&&(a.architecture.tokenizer="Compatible")),a};async function bY(e,t){const n=`${e.id}-${e.baseURL||""}`,r=xm.get(n);if(r)return console.log(`[ModelFetcher] Using cache for provider ${e.name} (ID: ${e.id})`),r;const a=(async()=>{var s,l,u;let i;const o={Accept:"application/json"};t&&(o.Authorization=`Bearer ${t}`);try{switch(e.type){case"openai":if(!t)throw new Error("API Key required for OpenAI");i="https://api.openai.com/v1/models";break;case"openrouter":if(!t)throw new Error("API Key required for OpenRouter");i="https://openrouter.ai/api/v1/models",o["HTTP-Referer"]=((s=globalThis.location)==null?void 0:s.origin)||"http://localhost:3000",o["X-Title"]="LiteChat";break;case"ollama":const d=((l=e.baseURL)==null?void 0:l.replace(/\/$/,""))||"http://localhost:11434";i=new URL("/api/tags",d).toString(),delete o.Authorization;break;case"openai-compatible":if(!e.baseURL)throw new Error("Base URL required for OpenAI-Compatible");const h=jM(e.baseURL);i=new URL("models",h.endsWith("/")?h:h+"/").toString();break;case"google":default:return console.log(`[ModelFetcher] Model fetching not supported via API for type: ${e.type}. Returning empty list.`),[]}}catch(d){return console.error(`[ModelFetcher] Error constructing URL for ${e.name}:`,d),lt.error(`Invalid Base URL for ${e.name}: ${d instanceof Error?d.message:String(d)}`),[]}console.log(`[ModelFetcher] Fetching models for ${e.name} (Type: ${e.type}) from ${i}`);try{const d=await fetch(i,{headers:o});if(!d.ok){let v=`(${d.status} ${d.statusText})`;try{const b=await d.text();v=b||v;try{const _=JSON.parse(b);v=((u=_==null?void 0:_.error)==null?void 0:u.message)||(_==null?void 0:_.message)||v}catch{}}catch(b){console.warn("[ModelFetcher] Failed to read error response body:",b)}throw new Error(`API Error: ${v}`)}const h=await d.json();let p=[];if(e.type==="ollama"?p=h.models||[]:p=h.data||h||[],!Array.isArray(p))return console.warn(`[ModelFetcher] Unexpected non-array response for ${e.name}:`,h),[];const g=p.map(v=>yY(v,e.type));return g.sort((v,b)=>(v.name||v.id).localeCompare(b.name||b.id)),console.log(`[ModelFetcher] Fetched and mapped ${g.length} models for ${e.name}`),g}catch(d){const h=d instanceof Error?d.message:String(d);return console.error(`[ModelFetcher] Error fetching models for ${e.name}:`,h),lt.error(`Failed to fetch models for ${e.name}: ${h}`),xm.delete(n),[]}})();return xm.set(n,a),setTimeout(()=>{xm.get(n)===a&&(xm.delete(n),console.log(`[ModelFetcher] Cache expired for provider ${e.name} (ID: ${e.id})`))},gY),a}const Kx="provider:lastModelSelection",$3="provider:globalModelSortOrder",Bn=es(ts((e,t)=>({dbProviderConfigs:[],dbApiKeys:[],selectedModelId:null,globalModelSortOrder:[],providerFetchStatus:{},isLoading:!0,error:null,enableApiKeyManagement:!0,_selectedModelForDetails:null,setEnableApiKeyManagement:n=>{e({enableApiKeyManagement:n}),Wt.saveSetting("enableApiKeyManagement",n),Ct.emit(xt.SETTINGS_CHANGED,{key:"enableApiKeyManagement",value:n})},loadInitialData:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadSetting("enableApiKeyManagement",!0),[r,a,i,o]=await Promise.all([Wt.loadProviderConfigs(),Wt.loadApiKeys(),Wt.loadSetting($3,[]),Wt.loadSetting(Kx,null)]);e({dbProviderConfigs:r,dbApiKeys:a,enableApiKeyManagement:n});const s=r.reduce((p,g)=>(g.isEnabled&&g.enabledModels&&g.enabledModels.forEach(v=>{p.push(Hc(g.id,v))}),p),[]),l=new Set(s),u=i.filter(p=>l.has(p));let d=o;d&&l.has(d)||(d=u[0]??null,d||(d=s[0]??null),console.log(`[ProviderStore] Saved selection invalid or missing, selecting default: ${d}`)),e({globalModelSortOrder:u,selectedModelId:d,isLoading:!1}),await Wt.saveSetting(Kx,d),console.log(`[ProviderStore] Emitting initial ${xt.MODEL_SELECTION_CHANGED} with payload:`,{modelId:d}),Ct.emit(xt.MODEL_SELECTION_CHANGED,{modelId:d})}catch(n){console.error("ProviderStore: Error loading initial data",n),e({isLoading:!1,error:"Failed to load provider data"}),lt.error("Failed to load provider data")}},selectModel:n=>{const r=t().selectedModelId;console.log(`[ProviderStore] selectModel called. Current: ${r}, New: ${n}`),r!==n?(e({selectedModelId:n}),Wt.saveSetting(Kx,n),console.log(`[ProviderStore] Emitting ${xt.MODEL_SELECTION_CHANGED} with payload:`,{modelId:n}),Ct.emit(xt.MODEL_SELECTION_CHANGED,{modelId:n})):console.log(`[ProviderStore] selectModel skipped: ID ${n} already selected.`)},addApiKey:async(n,r,a)=>{const i=Eo(),o=new Date,s={id:i,name:n,value:a,providerId:r,createdAt:o,updatedAt:o};try{return await Wt.saveApiKey(s),e(l=>{l.dbApiKeys.push(s)}),lt.success(`API Key "${n}" added.`),Ct.emit(xt.API_KEY_CHANGED,{keyId:i,action:"added"}),i}catch(l){throw console.error("ProviderStore: Error adding API key",l),lt.error(`Failed to add API Key: ${l instanceof Error?l.message:String(l)}`),l}},deleteApiKey:async n=>{var a;const r=((a=t().dbApiKeys.find(i=>i.id===n))==null?void 0:a.name)??"Unknown Key";try{await Wt.deleteApiKey(n),e(i=>{i.dbApiKeys=i.dbApiKeys.filter(o=>o.id!==n),i.dbProviderConfigs=i.dbProviderConfigs.map(o=>o.apiKeyId===n?{...o,apiKeyId:null}:o)}),lt.success(`API Key "${r}" deleted.`),Ct.emit(xt.API_KEY_CHANGED,{keyId:n,action:"deleted"})}catch(i){throw console.error("ProviderStore: Error deleting API key",i),lt.error(`Failed to delete API Key: ${i instanceof Error?i.message:String(i)}`),i}},addProviderConfig:async n=>{const r=Eo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,type:n.type,isEnabled:n.isEnabled??!0,apiKeyId:n.apiKeyId??null,baseURL:n.baseURL??null,enabledModels:n.enabledModels??null,autoFetchModels:n.autoFetchModels??!0,fetchedModels:n.fetchedModels??null,modelsLastFetchedAt:n.modelsLastFetchedAt??null};try{return await Wt.saveProviderConfig(i),e(o=>{o.dbProviderConfigs.push(i)}),lt.success(`Provider "${n.name}" added.`),Ct.emit(xt.PROVIDER_CONFIG_CHANGED,{providerId:r,config:i}),r}catch(o){throw console.error("ProviderStore: Error adding provider config",o),lt.error(`Failed to add Provider: ${o instanceof Error?o.message:String(o)}`),o}},updateProviderConfig:async(n,r)=>{const a=t().dbProviderConfigs.find(o=>o.id===n);if(!a){console.warn(`ProviderStore: Config ${n} not found for update.`);return}const i={...a,...r,updatedAt:new Date};try{await Wt.saveProviderConfig(i),e(h=>{const p=h.dbProviderConfigs.findIndex(g=>g.id===n);p!==-1&&(h.dbProviderConfigs[p]=i)}),Ct.emit(xt.PROVIDER_CONFIG_CHANGED,{providerId:n,config:i});const o=t().globalModelSortOrder,s=t().dbProviderConfigs;let l=[...o];const u=s.reduce((h,p)=>(p.isEnabled&&p.enabledModels&&p.enabledModels.forEach(g=>{h.push(Hc(p.id,g))}),h),[]),d=new Set(u);l=o.filter(h=>d.has(h)),d.forEach(h=>{l.includes(h)||l.push(h)}),await t().setGlobalModelSortOrder(l)}catch(o){throw console.error("ProviderStore: Error updating provider config",o),lt.error(`Failed to update Provider: ${o instanceof Error?o.message:String(o)}`),o}},deleteProviderConfig:async n=>{const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r)return;const a=r.name;try{await Wt.deleteProviderConfig(n),e(d=>{d.dbProviderConfigs=d.dbProviderConfigs.filter(h=>h.id!==n),delete d.providerFetchStatus[n]}),Ct.emit(xt.PROVIDER_CONFIG_CHANGED,{providerId:n,config:{...r,isEnabled:!1}});const o=t().dbProviderConfigs.reduce((d,h)=>(h.isEnabled&&h.enabledModels&&h.enabledModels.forEach(p=>{d.push(Hc(h.id,p))}),d),[]),s=new Set(o),u=t().globalModelSortOrder.filter(d=>s.has(d));await t().setGlobalModelSortOrder(u),lt.success(`Provider "${a}" deleted.`)}catch(i){throw console.error("ProviderStore: Error deleting provider config",i),lt.error(`Failed to delete Provider: ${i instanceof Error?i.message:String(i)}`),i}},fetchModels:async n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);if(!r){lt.error("Provider configuration not found for fetching models.");return}if(t().providerFetchStatus[n]==="fetching"){console.log(`[ProviderStore] Fetch already in progress for ${r.name}`);return}t()._setProviderFetchStatus(n,"fetching");try{const i=r.apiKeyId,o=(a=t().dbApiKeys.find(l=>l.id===i))==null?void 0:a.value,s=await bY(r,o);await t().updateProviderConfig(n,{fetchedModels:s,modelsLastFetchedAt:new Date}),t()._setProviderFetchStatus(n,"success"),lt.success(`Models fetched successfully for ${r.name}`)}catch(i){console.error(`Error fetching models for ${r.name}:`,i),t()._setProviderFetchStatus(n,"error")}},setGlobalModelSortOrder:async n=>{const r=Array.from(new Set(n));e({globalModelSortOrder:r}),await Wt.saveSetting($3,r);const a=t().selectedModelId,o=t().dbProviderConfigs.reduce((l,u)=>(u.isEnabled&&u.enabledModels&&u.enabledModels.forEach(d=>{l.push(Hc(u.id,d))}),l),[]),s=new Set(o);if(!a||!s.has(a)){const l=r.find(h=>s.has(h)),u=o[0]??null,d=l??u;d!==a&&(console.log(`[ProviderStore] Selection ${a} invalidated or missing. Selecting ${d}`),t().selectModel(d))}},_setProviderFetchStatus:(n,r)=>{e(a=>{a.providerFetchStatus[n]=r})},setSelectedModelForDetails:n=>{e({_selectedModelForDetails:n})},getSelectedModel:()=>{const{selectedModelId:n,dbProviderConfigs:r,dbApiKeys:a}=t();if(!n)return;const{providerId:i,modelId:o}=Zl(n);if(!i||!o)return;const s=r.find(u=>u.id===i);if(!s)return;const l=a.find(u=>u.id===s.apiKeyId);return BC(s,o,l==null?void 0:l.value)},getApiKeyForProvider:n=>{var a;const r=t().dbProviderConfigs.find(i=>i.id===n);return(a=t().dbApiKeys.find(i=>i.id===(r==null?void 0:r.apiKeyId)))==null?void 0:a.value},getActiveProviders:()=>t().dbProviderConfigs.filter(n=>n.isEnabled).map(n=>{const r=t().getAllAvailableModelDefsForProvider(n.id);return{id:n.id,name:n.name,type:n.type,allAvailableModels:r}}),getAllAvailableModelDefsForProvider:n=>{const r=t().dbProviderConfigs.find(o=>o.id===n);if(!r)return[];if(r.fetchedModels&&r.fetchedModels.length>0)return[...r.fetchedModels];const a=r.type;return(UZ[a]||[]).map(o=>({id:o.id,name:o.name,context_length:4096,architecture:{modality:"text->text",input_modalities:["text"],output_modalities:["text"]},pricing:{prompt:"0",completion:"0"},top_provider:{context_length:4096},supported_parameters:PM[r.type]??[]}))}}))),lb="system",B3="You are a helpful AI assistant.",z3=.7,U3=null,H3=null,q3=null,V3=0,G3=0,W3=!0,cb=!0,ub=!1,db=!1,fb=15,K3=null,Z3=null,Y3=5,hb=null,Kr=es(ts(e=>({theme:lb,globalSystemPrompt:B3,temperature:z3,maxTokens:U3,topP:H3,topK:q3,presencePenalty:V3,frequencyPenalty:G3,enableAdvancedSettings:W3,enableStreamingMarkdown:cb,enableStreamingCodeBlockParsing:ub,foldStreamingCodeBlocks:db,streamingRenderFPS:fb,gitUserName:K3,gitUserEmail:Z3,toolMaxSteps:Y3,prismThemeUrl:hb,setTheme:t=>{e({theme:t}),Wt.saveSetting("theme",t)},setGlobalSystemPrompt:t=>{e({globalSystemPrompt:t}),Wt.saveSetting("globalSystemPrompt",t)},setTemperature:t=>{e({temperature:t}),Wt.saveSetting("temperature",t)},setMaxTokens:t=>{e({maxTokens:t}),Wt.saveSetting("maxTokens",t)},setTopP:t=>{e({topP:t}),Wt.saveSetting("topP",t)},setTopK:t=>{e({topK:t}),Wt.saveSetting("topK",t)},setPresencePenalty:t=>{e({presencePenalty:t}),Wt.saveSetting("presencePenalty",t)},setFrequencyPenalty:t=>{e({frequencyPenalty:t}),Wt.saveSetting("frequencyPenalty",t)},setEnableAdvancedSettings:t=>{e({enableAdvancedSettings:t}),Wt.saveSetting("enableAdvancedSettings",t)},setEnableStreamingMarkdown:t=>{e({enableStreamingMarkdown:t}),Wt.saveSetting("enableStreamingMarkdown",t)},setEnableStreamingCodeBlockParsing:t=>{e({enableStreamingCodeBlockParsing:t}),Wt.saveSetting("enableStreamingCodeBlockParsing",t)},setFoldStreamingCodeBlocks:t=>{e({foldStreamingCodeBlocks:t}),Wt.saveSetting("foldStreamingCodeBlocks",t)},setStreamingRenderFPS:t=>{const n=Math.max(3,Math.min(60,t));e({streamingRenderFPS:n}),Wt.saveSetting("streamingRenderFPS",n)},setGitUserName:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserName:n}),Wt.saveSetting("gitUserName",n)},setGitUserEmail:t=>{const n=(t==null?void 0:t.trim())||null;e({gitUserEmail:n}),Wt.saveSetting("gitUserEmail",n)},setToolMaxSteps:t=>{const n=Math.max(1,Math.min(20,t));e({toolMaxSteps:n}),Wt.saveSetting("toolMaxSteps",n)},setPrismThemeUrl:t=>{const n=(t==null?void 0:t.trim())||null;e({prismThemeUrl:n}),Wt.saveSetting("prismThemeUrl",n)},loadSettings:async()=>{try{const[t,n,r,a,i,o,s,l,u,d,h,p,g,v,b,_,x]=await Promise.all([Wt.loadSetting("theme",lb),Wt.loadSetting("temperature",z3),Wt.loadSetting("maxTokens",U3),Wt.loadSetting("topP",H3),Wt.loadSetting("topK",q3),Wt.loadSetting("presencePenalty",V3),Wt.loadSetting("frequencyPenalty",G3),Wt.loadSetting("globalSystemPrompt",B3),Wt.loadSetting("enableAdvancedSettings",W3),Wt.loadSetting("enableStreamingMarkdown",cb),Wt.loadSetting("enableStreamingCodeBlockParsing",ub),Wt.loadSetting("foldStreamingCodeBlocks",db),Wt.loadSetting("streamingRenderFPS",fb),Wt.loadSetting("gitUserName",K3),Wt.loadSetting("gitUserEmail",Z3),Wt.loadSetting("toolMaxSteps",Y3),Wt.loadSetting("prismThemeUrl",hb)]);e({theme:t,temperature:n,maxTokens:r,topP:a,topK:i,presencePenalty:o,frequencyPenalty:s,globalSystemPrompt:l,enableAdvancedSettings:u,enableStreamingMarkdown:d,enableStreamingCodeBlockParsing:h,foldStreamingCodeBlocks:p,streamingRenderFPS:g,gitUserName:v,gitUserEmail:b,toolMaxSteps:_,prismThemeUrl:x})}catch(t){console.error("SettingsStore: Error loading settings",t)}},resetGeneralSettings:async()=>{try{e({theme:lb,enableStreamingMarkdown:cb,enableStreamingCodeBlockParsing:ub,foldStreamingCodeBlocks:db,streamingRenderFPS:fb,prismThemeUrl:hb}),await Promise.all([Wt.saveSetting("theme",lb),Wt.saveSetting("enableStreamingMarkdown",cb),Wt.saveSetting("enableStreamingCodeBlockParsing",ub),Wt.saveSetting("foldStreamingCodeBlocks",db),Wt.saveSetting("streamingRenderFPS",fb),Wt.saveSetting("prismThemeUrl",hb)]),lt.success("General settings reset to defaults.")}catch(t){console.error("SettingsStore: Error resetting general settings",t),lt.error("Failed to reset general settings.")}}})));async function _2(e,t){const n=Mr.getState().getMiddlewareForHook,r=n(e);let a=t;for(const i of r)try{const o=await i.callback(a);if(o===!1)return console.log(`Middleware ${i.modId} cancelled action for hook ${e}`),!1;o&&typeof o=="object"&&(a=o)}catch(o){return console.error(`Middleware error in mod ${i.modId} for hook ${e}:`,o),!1}return a}function vY(){const e=or.getState(),t=Bn.getState(),n=Kr.getState(),{providerId:r}=Zl(t.selectedModelId),a={selectedConversationId:e.currentConversationId,interactions:e.interactions,isStreaming:e.status==="streaming",selectedProviderId:r,selectedModelId:t.selectedModelId,activeSystemPrompt:n.globalSystemPrompt,temperature:n.temperature,maxTokens:n.maxTokens,theme:n.theme};return Object.freeze(a)}function wY(e){try{const t=atob(e),n=t.length,r=new Uint8Array(n);for(let a=0;a<n;a++)r[a]=t.charCodeAt(a);return r}catch(t){throw console.error("Error decoding base64 string:",t),new Error("Invalid base64 string for file content.")}}function X3(e){try{const t=e.type||"application/octet-stream",n=TC(e.name,t),r=t.startsWith("image/");if(e.contentBytes!==void 0)return n?{type:"text",text:new TextDecoder().decode(e.contentBytes)}:r?{type:"image",image:e.contentBytes,mimeType:t}:(console.warn(`AIService: Unsupported VFS file type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached VFS file: ${e.name} (${t})]`});if(e.contentText!==void 0&&n)return{type:"text",text:e.contentText};if(e.contentBase64!==void 0&&r)return{type:"image",image:wY(e.contentBase64),mimeType:t};if(e.contentBase64!==void 0&&!n&&!r)return console.warn(`AIService: Unsupported direct upload type "${t}" for direct inclusion. Sending note.`),{type:"text",text:`[Attached file: ${e.name} (${t})]`};throw n&&e.contentText===void 0?new Error(`Missing text content for likely text file: ${e.name}`):r&&e.contentBase64===void 0?new Error(`Missing base64 content for image file: ${e.name}`):new Error(`Missing or unusable content for file: ${e.name}`)}catch(t){return console.error(`AIService: Failed to process content for ${e.name}:`,t),lt.error(`Failed to process file "${e.name}": ${t instanceof Error?t.message:String(t)}`),{type:"text",text:`[Error processing file: ${e.name}]`}}}function J3(e){return e.flatMap(t=>{var a,i,o;const n=[],r=t.prompt;if(r){const s=[];r.content&&s.push({type:"text",text:r.content}),(a=r.metadata)!=null&&a.attachedFiles&&r.metadata.attachedFiles.length>0&&r.metadata.attachedFiles.forEach(l=>{s.push({type:"text",text:`[User attached file: ${l.name}]`})}),s.length>0&&n.push({role:"user",content:s})}if(t.response&&typeof t.response=="string"&&n.push({role:"assistant",content:t.response}),(i=t.metadata)!=null&&i.toolCalls&&Array.isArray(t.metadata.toolCalls)){const s=[];t.metadata.toolCalls.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-call"&&u.toolCallId&&u.toolName&&u.args!==void 0?s.push(u):console.warn("[AIService] buildHistory: Invalid tool call structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool call string:",l,u)}}),s.length>0&&n.push({role:"assistant",content:s})}if((o=t.metadata)!=null&&o.toolResults&&Array.isArray(t.metadata.toolResults)){const s=[];t.metadata.toolResults.forEach(l=>{try{const u=JSON.parse(l);u&&u.type==="tool-result"&&u.toolCallId&&u.toolName&&u.result!==void 0?s.push(u):console.warn("[AIService] buildHistory: Invalid tool result structure after parsing:",l)}catch(u){console.error("[AIService] buildHistory: Failed to parse tool result string:",l,u)}}),s.length>0&&n.push({role:"tool",content:s})}return n})}const Q3=e=>Symbol.iterator in e,eI=e=>"entries"in e,tI=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),r=t instanceof Map?t:new Map(t.entries());if(n.size!==r.size)return!1;for(const[a,i]of n)if(!Object.is(i,r.get(a)))return!1;return!0},_Y=(e,t)=>{const n=e[Symbol.iterator](),r=t[Symbol.iterator]();let a=n.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=n.next(),i=r.next()}return!!a.done&&!!i.done};function xY(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!Q3(e)||!Q3(t)?tI({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):eI(e)&&eI(t)?tI(e,t):_Y(e,t)}function Sn(e){const t=yt.useRef(void 0);return n=>{const r=e(n);return xY(t.current,r)?t.current:t.current=r}}const SY=({InputAreaRenderer:e,onSubmit:t,className:n,placeholder:r="Send a message..."})=>{const a=N.useRef(null),[i,o]=N.useState(!1),[s,l]=N.useState(!1),u=Mr(Sn(C=>C.promptControls)),d=or(Sn(C=>C.status==="streaming")),{focusInputOnNextRender:h,setFocusInputFlag:p}=Va(Sn(C=>({focusInputOnNextRender:C.focusInputOnNextRender,setFocusInputFlag:C.setFocusInputFlag}))),{attachedFilesMetadata:g,clearAttachedFiles:v}=Xc(Sn(C=>({attachedFilesMetadata:C.attachedFilesMetadata,clearAttachedFiles:C.clearAttachedFiles})));N.useEffect(()=>{h&&a.current&&(a.current.focus(),p(!1))},[h,p]);const b=N.useMemo(()=>Object.values(u).filter(C=>C.show?C.show():!0),[u]),_=N.useMemo(()=>b.filter(C=>C.renderer),[b]),x=N.useMemo(()=>b.filter(C=>C.triggerRenderer),[b]),S=N.useCallback(async()=>{var D;const k=(((D=a.current)==null?void 0:D.getValue())??"").trim(),R=Xc.getState().attachedFilesMetadata;if(!(!k&&R.length===0)&&!(d||i)){o(!0);try{let O={},L={};for(const Z of b){if(Z.getParameters){const q=await Z.getParameters();q&&(O={...O,...q})}if(Z.getMetadata){const q=await Z.getMetadata();q&&(L={...L,...q})}}R.length>0&&(L.attachedFiles=[...R]);let B={id:Eo(),content:k,parameters:O,metadata:L};Ct.emit(xt.PROMPT_SUBMITTED,{turnData:B});const Y=await _2(ev.PROMPT_TURN_FINALIZE,{turnData:B});if(Y===!1){console.log("Prompt submission cancelled by middleware."),o(!1);return}const F=Y&&typeof Y=="object"?Y.turnData:B;await t(F),v(),b.forEach(Z=>{Z.clearOnSubmit&&Z.clearOnSubmit()}),p(!0),l(!1)}catch(O){console.error("Error during prompt submission:",O),lt.error(`Failed to send message: ${O instanceof Error?O.message:String(O)}`)}finally{o(!1)}}},[d,i,b,t,v,p]),E=N.useCallback(C=>{l(C.trim().length>0),Ct.emit(xt.PROMPT_INPUT_CHANGE,{value:C})},[]);return y.jsxs("div",{className:Rt("p-4 space-y-3",n),children:[_.length>0&&y.jsx(a3,{controls:_,area:"panel",className:"flex flex-wrap gap-2 items-start mb-2"}),y.jsx(e,{ref:a,onSubmit:S,disabled:d||i,placeholder:r,onValueChange:E}),y.jsxs("div",{className:"flex items-center justify-between gap-2 mt-2",children:[y.jsx(a3,{controls:x,area:"trigger",className:"flex items-center gap-1 flex-shrink-0"}),y.jsx("div",{className:"flex-grow"}),y.jsx(Ht,{type:"button",size:"icon",onClick:S,disabled:d||i||!s&&g.length===0,className:"h-9 w-9 flex-shrink-0","aria-label":"Send message",children:i?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx($H,{className:"h-4 w-4"})})]})]})};function qt(e,t,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function EY(e,t){const n=N.createContext(t),r=i=>{const{children:o,...s}=i,l=N.useMemo(()=>s,Object.values(s));return y.jsx(n.Provider,{value:l,children:o})};r.displayName=e+"Provider";function a(i){const o=N.useContext(n);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[r,a]}function Pi(e,t=[]){let n=[];function r(i,o){const s=N.createContext(o),l=n.length;n=[...n,o];const u=h=>{var x;const{scope:p,children:g,...v}=h,b=((x=p==null?void 0:p[e])==null?void 0:x[l])||s,_=N.useMemo(()=>v,Object.values(v));return y.jsx(b.Provider,{value:_,children:g})};u.displayName=i+"Provider";function d(h,p){var b;const g=((b=p==null?void 0:p[e])==null?void 0:b[l])||s,v=N.useContext(g);if(v)return v;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[u,d]}const a=()=>{const i=n.map(o=>N.createContext(o));return function(s){const l=(s==null?void 0:s[e])||i;return N.useMemo(()=>({[`__scope${e}`]:{...s,[e]:l}}),[s,l])}};return a.scopeName=e,[r,CY(a,...t)]}function CY(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=r.reduce((s,{useScope:l,scopeName:u})=>{const h=l(i)[`__scope${u}`];return{...s,...h}},{});return N.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return n.scopeName=t.scopeName,n}var kY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],tn=kY.reduce((e,t)=>{const n=Yc(`Primitive.${t}`),r=N.forwardRef((a,i)=>{const{asChild:o,...s}=a,l=o?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),y.jsx(l,{...s,ref:i})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function LM(e,t){e&&Ds.flushSync(()=>e.dispatchEvent(t))}function Da(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function TY(e,t=globalThis==null?void 0:globalThis.document){const n=Da(e);N.useEffect(()=>{const r=a=>{a.key==="Escape"&&n(a)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var AY="DismissableLayer",x2="dismissableLayer.update",NY="dismissableLayer.pointerDownOutside",RY="dismissableLayer.focusOutside",nI,$M=N.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),$h=N.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:s,...l}=e,u=N.useContext($M),[d,h]=N.useState(null),p=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=N.useState({}),v=kn(t,D=>h(D)),b=Array.from(u.layers),[_]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=b.indexOf(_),S=d?b.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,C=S>=x,k=DY(D=>{const O=D.target,L=[...u.branches].some(B=>B.contains(O));!C||L||(a==null||a(D),o==null||o(D),D.defaultPrevented||s==null||s())},p),R=jY(D=>{const O=D.target;[...u.branches].some(B=>B.contains(O))||(i==null||i(D),o==null||o(D),D.defaultPrevented||s==null||s())},p);return TY(D=>{S===u.layers.size-1&&(r==null||r(D),!D.defaultPrevented&&s&&(D.preventDefault(),s()))},p),N.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(nI=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),rI(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=nI)}},[d,p,n,u]),N.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),rI())},[d,u]),N.useEffect(()=>{const D=()=>g({});return document.addEventListener(x2,D),()=>document.removeEventListener(x2,D)},[]),y.jsx(tn.div,{...l,ref:v,style:{pointerEvents:E?C?"auto":"none":void 0,...e.style},onFocusCapture:qt(e.onFocusCapture,R.onFocusCapture),onBlurCapture:qt(e.onBlurCapture,R.onBlurCapture),onPointerDownCapture:qt(e.onPointerDownCapture,k.onPointerDownCapture)})});$h.displayName=AY;var IY="DismissableLayerBranch",OY=N.forwardRef((e,t)=>{const n=N.useContext($M),r=N.useRef(null),a=kn(t,r);return N.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),y.jsx(tn.div,{...e,ref:a})});OY.displayName=IY;function DY(e,t=globalThis==null?void 0:globalThis.document){const n=Da(e),r=N.useRef(!1),a=N.useRef(()=>{});return N.useEffect(()=>{const i=s=>{if(s.target&&!r.current){let l=function(){BM(NY,n,u,{discrete:!0})};const u={originalEvent:s};s.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=l,t.addEventListener("click",a.current,{once:!0})):l()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function jY(e,t=globalThis==null?void 0:globalThis.document){const n=Da(e),r=N.useRef(!1);return N.useEffect(()=>{const a=i=>{i.target&&!r.current&&BM(RY,n,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function rI(){const e=new CustomEvent(x2);document.dispatchEvent(e)}function BM(e,t,n,{discrete:r}){const a=n.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?LM(a,i):a.dispatchEvent(i)}var Wa=globalThis!=null&&globalThis.document?N.useLayoutEffect:()=>{},MY=F6[" useId ".trim().toString()]||(()=>{}),PY=0;function ni(e){const[t,n]=N.useState(MY());return Wa(()=>{n(r=>r??String(PY++))},[e]),t?`radix-${t}`:""}const FY=["top","right","bottom","left"],iu=Math.min,Xi=Math.max,Sv=Math.round,pb=Math.floor,Fs=e=>({x:e,y:e}),LY={left:"right",right:"left",bottom:"top",top:"bottom"},$Y={start:"end",end:"start"};function S2(e,t,n){return Xi(e,iu(t,n))}function zl(e,t){return typeof e=="function"?e(t):e}function Ul(e){return e.split("-")[0]}function Bh(e){return e.split("-")[1]}function zC(e){return e==="x"?"y":"x"}function UC(e){return e==="y"?"height":"width"}function ou(e){return["top","bottom"].includes(Ul(e))?"y":"x"}function HC(e){return zC(ou(e))}function BY(e,t,n){n===void 0&&(n=!1);const r=Bh(e),a=HC(e),i=UC(a);let o=a==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Ev(o)),[o,Ev(o)]}function zY(e){const t=Ev(e);return[E2(e),t,E2(t)]}function E2(e){return e.replace(/start|end/g,t=>$Y[t])}function UY(e,t,n){const r=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?a:r:t?r:a;case"left":case"right":return t?i:o;default:return[]}}function HY(e,t,n,r){const a=Bh(e);let i=UY(Ul(e),n==="start",r);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(E2)))),i}function Ev(e){return e.replace(/left|right|bottom|top/g,t=>LY[t])}function qY(e){return{top:0,right:0,bottom:0,left:0,...e}}function zM(e){return typeof e!="number"?qY(e):{top:e,right:e,bottom:e,left:e}}function Cv(e){const{x:t,y:n,width:r,height:a}=e;return{width:r,height:a,top:n,left:t,right:t+r,bottom:n+a,x:t,y:n}}function aI(e,t,n){let{reference:r,floating:a}=e;const i=ou(t),o=HC(t),s=UC(o),l=Ul(t),u=i==="y",d=r.x+r.width/2-a.width/2,h=r.y+r.height/2-a.height/2,p=r[s]/2-a[s]/2;let g;switch(l){case"top":g={x:d,y:r.y-a.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-a.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Bh(t)){case"start":g[o]-=p*(n&&u?-1:1);break;case"end":g[o]+=p*(n&&u?-1:1);break}return g}const VY=async(e,t,n)=>{const{placement:r="bottom",strategy:a="absolute",middleware:i=[],platform:o}=n,s=i.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:d,y:h}=aI(u,r,l),p=r,g={},v=0;for(let b=0;b<s.length;b++){const{name:_,fn:x}=s[b],{x:S,y:E,data:C,reset:k}=await x({x:d,y:h,initialPlacement:r,placement:p,strategy:a,middlewareData:g,rects:u,platform:o,elements:{reference:e,floating:t}});d=S??d,h=E??h,g={...g,[_]:{...g[_],...C}},k&&v<=50&&(v++,typeof k=="object"&&(k.placement&&(p=k.placement),k.rects&&(u=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):k.rects),{x:d,y:h}=aI(u,p,l)),b=-1)}return{x:d,y:h,placement:p,strategy:a,middlewareData:g}};async function s0(e,t){var n;t===void 0&&(t={});const{x:r,y:a,platform:i,rects:o,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:p=!1,padding:g=0}=zl(t,e),v=zM(g),_=s[p?h==="floating"?"reference":"floating":h],x=Cv(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:l})),S=h==="floating"?{x:r,y:a,width:o.floating.width,height:o.floating.height}:o.reference,E=await(i.getOffsetParent==null?void 0:i.getOffsetParent(s.floating)),C=await(i.isElement==null?void 0:i.isElement(E))?await(i.getScale==null?void 0:i.getScale(E))||{x:1,y:1}:{x:1,y:1},k=Cv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:S,offsetParent:E,strategy:l}):S);return{top:(x.top-k.top+v.top)/C.y,bottom:(k.bottom-x.bottom+v.bottom)/C.y,left:(x.left-k.left+v.left)/C.x,right:(k.right-x.right+v.right)/C.x}}const GY=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:a,rects:i,platform:o,elements:s,middlewareData:l}=t,{element:u,padding:d=0}=zl(e,t)||{};if(u==null)return{};const h=zM(d),p={x:n,y:r},g=HC(a),v=UC(g),b=await o.getDimensions(u),_=g==="y",x=_?"top":"left",S=_?"bottom":"right",E=_?"clientHeight":"clientWidth",C=i.reference[v]+i.reference[g]-p[g]-i.floating[v],k=p[g]-i.reference[g],R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let D=R?R[E]:0;(!D||!await(o.isElement==null?void 0:o.isElement(R)))&&(D=s.floating[E]||i.floating[v]);const O=C/2-k/2,L=D/2-b[v]/2-1,B=iu(h[x],L),Y=iu(h[S],L),F=B,Z=D-b[v]-Y,q=D/2-b[v]/2+O,ne=S2(F,q,Z),ae=!l.arrow&&Bh(a)!=null&&q!==ne&&i.reference[v]/2-(q<F?B:Y)-b[v]/2<0,re=ae?q<F?q-F:q-Z:0;return{[g]:p[g]+re,data:{[g]:ne,centerOffset:q-ne-re,...ae&&{alignmentOffset:re}},reset:ae}}}),WY=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:a,middlewareData:i,rects:o,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:b=!0,..._}=zl(e,t);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const x=Ul(a),S=ou(s),E=Ul(s)===s,C=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=p||(E||!b?[Ev(s)]:zY(s)),R=v!=="none";!p&&R&&k.push(...HY(s,b,v,C));const D=[s,...k],O=await s0(t,_),L=[];let B=((r=i.flip)==null?void 0:r.overflows)||[];if(d&&L.push(O[x]),h){const q=BY(a,o,C);L.push(O[q[0]],O[q[1]])}if(B=[...B,{placement:a,overflows:L}],!L.every(q=>q<=0)){var Y,F;const q=(((Y=i.flip)==null?void 0:Y.index)||0)+1,ne=D[q];if(ne)return{data:{index:q,overflows:B},reset:{placement:ne}};let ae=(F=B.filter(re=>re.overflows[0]<=0).sort((re,ee)=>re.overflows[1]-ee.overflows[1])[0])==null?void 0:F.placement;if(!ae)switch(g){case"bestFit":{var Z;const re=(Z=B.filter(ee=>{if(R){const ie=ou(ee.placement);return ie===S||ie==="y"}return!0}).map(ee=>[ee.placement,ee.overflows.filter(ie=>ie>0).reduce((ie,U)=>ie+U,0)]).sort((ee,ie)=>ee[1]-ie[1])[0])==null?void 0:Z[0];re&&(ae=re);break}case"initialPlacement":ae=s;break}if(a!==ae)return{reset:{placement:ae}}}return{}}}};function iI(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function oI(e){return FY.some(t=>e[t]>=0)}const KY=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...a}=zl(e,t);switch(r){case"referenceHidden":{const i=await s0(t,{...a,elementContext:"reference"}),o=iI(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:oI(o)}}}case"escaped":{const i=await s0(t,{...a,altBoundary:!0}),o=iI(i,n.floating);return{data:{escapedOffsets:o,escaped:oI(o)}}}default:return{}}}}};async function ZY(e,t){const{placement:n,platform:r,elements:a}=e,i=await(r.isRTL==null?void 0:r.isRTL(a.floating)),o=Ul(n),s=Bh(n),l=ou(n)==="y",u=["left","top"].includes(o)?-1:1,d=i&&l?-1:1,h=zl(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return s&&typeof v=="number"&&(g=s==="end"?v*-1:v),l?{x:g*d,y:p*u}:{x:p*u,y:g*d}}const YY=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:a,y:i,placement:o,middlewareData:s}=t,l=await ZY(t,e);return o===((n=s.offset)==null?void 0:n.placement)&&(r=s.arrow)!=null&&r.alignmentOffset?{}:{x:a+l.x,y:i+l.y,data:{...l,placement:o}}}}},XY=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:s={fn:_=>{let{x,y:S}=_;return{x,y:S}}},...l}=zl(e,t),u={x:n,y:r},d=await s0(t,l),h=ou(Ul(a)),p=zC(h);let g=u[p],v=u[h];if(i){const _=p==="y"?"top":"left",x=p==="y"?"bottom":"right",S=g+d[_],E=g-d[x];g=S2(S,g,E)}if(o){const _=h==="y"?"top":"left",x=h==="y"?"bottom":"right",S=v+d[_],E=v-d[x];v=S2(S,v,E)}const b=s.fn({...t,[p]:g,[h]:v});return{...b,data:{x:b.x-n,y:b.y-r,enabled:{[p]:i,[h]:o}}}}}},JY=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:a,rects:i,middlewareData:o}=t,{offset:s=0,mainAxis:l=!0,crossAxis:u=!0}=zl(e,t),d={x:n,y:r},h=ou(a),p=zC(h);let g=d[p],v=d[h];const b=zl(s,t),_=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(l){const E=p==="y"?"height":"width",C=i.reference[p]-i.floating[E]+_.mainAxis,k=i.reference[p]+i.reference[E]-_.mainAxis;g<C?g=C:g>k&&(g=k)}if(u){var x,S;const E=p==="y"?"width":"height",C=["top","left"].includes(Ul(a)),k=i.reference[h]-i.floating[E]+(C&&((x=o.offset)==null?void 0:x[h])||0)+(C?0:_.crossAxis),R=i.reference[h]+i.reference[E]+(C?0:((S=o.offset)==null?void 0:S[h])||0)-(C?_.crossAxis:0);v<k?v=k:v>R&&(v=R)}return{[p]:g,[h]:v}}}},QY=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:a,rects:i,platform:o,elements:s}=t,{apply:l=()=>{},...u}=zl(e,t),d=await s0(t,u),h=Ul(a),p=Bh(a),g=ou(a)==="y",{width:v,height:b}=i.floating;let _,x;h==="top"||h==="bottom"?(_=h,x=p===(await(o.isRTL==null?void 0:o.isRTL(s.floating))?"start":"end")?"left":"right"):(x=h,_=p==="end"?"top":"bottom");const S=b-d.top-d.bottom,E=v-d.left-d.right,C=iu(b-d[_],S),k=iu(v-d[x],E),R=!t.middlewareData.shift;let D=C,O=k;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(O=E),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(D=S),R&&!p){const B=Xi(d.left,0),Y=Xi(d.right,0),F=Xi(d.top,0),Z=Xi(d.bottom,0);g?O=v-2*(B!==0||Y!==0?B+Y:Xi(d.left,d.right)):D=b-2*(F!==0||Z!==0?F+Z:Xi(d.top,d.bottom))}await l({...t,availableWidth:O,availableHeight:D});const L=await o.getDimensions(s.floating);return v!==L.width||b!==L.height?{reset:{rects:!0}}:{}}}};function kw(){return typeof window<"u"}function zh(e){return UM(e)?(e.nodeName||"").toLowerCase():"#document"}function eo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Ks(e){var t;return(t=(UM(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function UM(e){return kw()?e instanceof Node||e instanceof eo(e).Node:!1}function Zo(e){return kw()?e instanceof Element||e instanceof eo(e).Element:!1}function Hs(e){return kw()?e instanceof HTMLElement||e instanceof eo(e).HTMLElement:!1}function sI(e){return!kw()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof eo(e).ShadowRoot}function eg(e){const{overflow:t,overflowX:n,overflowY:r,display:a}=Yo(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(a)}function eX(e){return["table","td","th"].includes(zh(e))}function Tw(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function qC(e){const t=VC(),n=Zo(e)?Yo(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tX(e){let t=su(e);for(;Hs(t)&&!yh(t);){if(qC(t))return t;if(Tw(t))return null;t=su(t)}return null}function VC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function yh(e){return["html","body","#document"].includes(zh(e))}function Yo(e){return eo(e).getComputedStyle(e)}function Aw(e){return Zo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function su(e){if(zh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||sI(e)&&e.host||Ks(e);return sI(t)?t.host:t}function HM(e){const t=su(e);return yh(t)?e.ownerDocument?e.ownerDocument.body:e.body:Hs(t)&&eg(t)?t:HM(t)}function l0(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const a=HM(e),i=a===((r=e.ownerDocument)==null?void 0:r.body),o=eo(a);if(i){const s=C2(o);return t.concat(o,o.visualViewport||[],eg(a)?a:[],s&&n?l0(s):[])}return t.concat(a,l0(a,[],n))}function C2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function qM(e){const t=Yo(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const a=Hs(e),i=a?e.offsetWidth:n,o=a?e.offsetHeight:r,s=Sv(n)!==i||Sv(r)!==o;return s&&(n=i,r=o),{width:n,height:r,$:s}}function GC(e){return Zo(e)?e:e.contextElement}function rh(e){const t=GC(e);if(!Hs(t))return Fs(1);const n=t.getBoundingClientRect(),{width:r,height:a,$:i}=qM(t);let o=(i?Sv(n.width):n.width)/r,s=(i?Sv(n.height):n.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!s||!Number.isFinite(s))&&(s=1),{x:o,y:s}}const nX=Fs(0);function VM(e){const t=eo(e);return!VC()||!t.visualViewport?nX:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function rX(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==eo(e)?!1:t}function bd(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const a=e.getBoundingClientRect(),i=GC(e);let o=Fs(1);t&&(r?Zo(r)&&(o=rh(r)):o=rh(e));const s=rX(i,n,r)?VM(i):Fs(0);let l=(a.left+s.x)/o.x,u=(a.top+s.y)/o.y,d=a.width/o.x,h=a.height/o.y;if(i){const p=eo(i),g=r&&Zo(r)?eo(r):r;let v=p,b=C2(v);for(;b&&r&&g!==v;){const _=rh(b),x=b.getBoundingClientRect(),S=Yo(b),E=x.left+(b.clientLeft+parseFloat(S.paddingLeft))*_.x,C=x.top+(b.clientTop+parseFloat(S.paddingTop))*_.y;l*=_.x,u*=_.y,d*=_.x,h*=_.y,l+=E,u+=C,v=eo(b),b=C2(v)}}return Cv({width:d,height:h,x:l,y:u})}function WC(e,t){const n=Aw(e).scrollLeft;return t?t.left+n:bd(Ks(e)).left+n}function GM(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),a=r.left+t.scrollLeft-(n?0:WC(e,r)),i=r.top+t.scrollTop;return{x:a,y:i}}function aX(e){let{elements:t,rect:n,offsetParent:r,strategy:a}=e;const i=a==="fixed",o=Ks(r),s=t?Tw(t.floating):!1;if(r===o||s&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Fs(1);const d=Fs(0),h=Hs(r);if((h||!h&&!i)&&((zh(r)!=="body"||eg(o))&&(l=Aw(r)),Hs(r))){const g=bd(r);u=rh(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const p=o&&!h&&!i?GM(o,l,!0):Fs(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+p.x,y:n.y*u.y-l.scrollTop*u.y+d.y+p.y}}function iX(e){return Array.from(e.getClientRects())}function oX(e){const t=Ks(e),n=Aw(e),r=e.ownerDocument.body,a=Xi(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Xi(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+WC(e);const s=-n.scrollTop;return Yo(r).direction==="rtl"&&(o+=Xi(t.clientWidth,r.clientWidth)-a),{width:a,height:i,x:o,y:s}}function sX(e,t){const n=eo(e),r=Ks(e),a=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,s=0,l=0;if(a){i=a.width,o=a.height;const u=VC();(!u||u&&t==="fixed")&&(s=a.offsetLeft,l=a.offsetTop)}return{width:i,height:o,x:s,y:l}}function lX(e,t){const n=bd(e,!0,t==="fixed"),r=n.top+e.clientTop,a=n.left+e.clientLeft,i=Hs(e)?rh(e):Fs(1),o=e.clientWidth*i.x,s=e.clientHeight*i.y,l=a*i.x,u=r*i.y;return{width:o,height:s,x:l,y:u}}function lI(e,t,n){let r;if(t==="viewport")r=sX(e,n);else if(t==="document")r=oX(Ks(e));else if(Zo(t))r=lX(t,n);else{const a=VM(e);r={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Cv(r)}function WM(e,t){const n=su(e);return n===t||!Zo(n)||yh(n)?!1:Yo(n).position==="fixed"||WM(n,t)}function cX(e,t){const n=t.get(e);if(n)return n;let r=l0(e,[],!1).filter(s=>Zo(s)&&zh(s)!=="body"),a=null;const i=Yo(e).position==="fixed";let o=i?su(e):e;for(;Zo(o)&&!yh(o);){const s=Yo(o),l=qC(o);!l&&s.position==="fixed"&&(a=null),(i?!l&&!a:!l&&s.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||eg(o)&&!l&&WM(e,o))?r=r.filter(d=>d!==o):a=s,o=su(o)}return t.set(e,r),r}function uX(e){let{element:t,boundary:n,rootBoundary:r,strategy:a}=e;const o=[...n==="clippingAncestors"?Tw(t)?[]:cX(t,this._c):[].concat(n),r],s=o[0],l=o.reduce((u,d)=>{const h=lI(t,d,a);return u.top=Xi(h.top,u.top),u.right=iu(h.right,u.right),u.bottom=iu(h.bottom,u.bottom),u.left=Xi(h.left,u.left),u},lI(t,s,a));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function dX(e){const{width:t,height:n}=qM(e);return{width:t,height:n}}function fX(e,t,n){const r=Hs(t),a=Ks(t),i=n==="fixed",o=bd(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Fs(0);if(r||!r&&!i)if((zh(t)!=="body"||eg(a))&&(s=Aw(t)),r){const p=bd(t,!0,i,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else a&&(l.x=WC(a));const u=a&&!r&&!i?GM(a,s):Fs(0),d=o.left+s.scrollLeft-l.x-u.x,h=o.top+s.scrollTop-l.y-u.y;return{x:d,y:h,width:o.width,height:o.height}}function Zx(e){return Yo(e).position==="static"}function cI(e,t){if(!Hs(e)||Yo(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Ks(e)===n&&(n=n.ownerDocument.body),n}function KM(e,t){const n=eo(e);if(Tw(e))return n;if(!Hs(e)){let a=su(e);for(;a&&!yh(a);){if(Zo(a)&&!Zx(a))return a;a=su(a)}return n}let r=cI(e,t);for(;r&&eX(r)&&Zx(r);)r=cI(r,t);return r&&yh(r)&&Zx(r)&&!qC(r)?n:r||tX(e)||n}const hX=async function(e){const t=this.getOffsetParent||KM,n=this.getDimensions,r=await n(e.floating);return{reference:fX(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function pX(e){return Yo(e).direction==="rtl"}const mX={convertOffsetParentRelativeRectToViewportRelativeRect:aX,getDocumentElement:Ks,getClippingRect:uX,getOffsetParent:KM,getElementRects:hX,getClientRects:iX,getDimensions:dX,getScale:rh,isElement:Zo,isRTL:pX};function ZM(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function gX(e,t){let n=null,r;const a=Ks(e);function i(){var s;clearTimeout(r),(s=n)==null||s.disconnect(),n=null}function o(s,l){s===void 0&&(s=!1),l===void 0&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:h,width:p,height:g}=u;if(s||t(),!p||!g)return;const v=pb(h),b=pb(a.clientWidth-(d+p)),_=pb(a.clientHeight-(h+g)),x=pb(d),E={rootMargin:-v+"px "+-b+"px "+-_+"px "+-x+"px",threshold:Xi(0,iu(1,l))||1};let C=!0;function k(R){const D=R[0].intersectionRatio;if(D!==l){if(!C)return o();D?o(!1,D):r=setTimeout(()=>{o(!1,1e-7)},1e3)}D===1&&!ZM(u,e.getBoundingClientRect())&&o(),C=!1}try{n=new IntersectionObserver(k,{...E,root:a.ownerDocument})}catch{n=new IntersectionObserver(k,E)}n.observe(e)}return o(!0),i}function yX(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=GC(e),d=a||i?[...u?l0(u):[],...l0(t)]:[];d.forEach(x=>{a&&x.addEventListener("scroll",n,{passive:!0}),i&&x.addEventListener("resize",n)});const h=u&&s?gX(u,n):null;let p=-1,g=null;o&&(g=new ResizeObserver(x=>{let[S]=x;S&&S.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var E;(E=g)==null||E.observe(t)})),n()}),u&&!l&&g.observe(u),g.observe(t));let v,b=l?bd(e):null;l&&_();function _(){const x=bd(e);b&&!ZM(b,x)&&n(),b=x,v=requestAnimationFrame(_)}return n(),()=>{var x;d.forEach(S=>{a&&S.removeEventListener("scroll",n),i&&S.removeEventListener("resize",n)}),h==null||h(),(x=g)==null||x.disconnect(),g=null,l&&cancelAnimationFrame(v)}}const bX=YY,vX=XY,wX=WY,_X=QY,xX=KY,uI=GY,SX=JY,EX=(e,t,n)=>{const r=new Map,a={platform:mX,...n},i={...a.platform,_c:r};return VY(e,t,{...a,platform:i})};var Hb=typeof document<"u"?N.useLayoutEffect:N.useEffect;function kv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!kv(e[r],t[r]))return!1;return!0}if(a=Object.keys(e),n=a.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,a[r]))return!1;for(r=n;r--!==0;){const i=a[r];if(!(i==="_owner"&&e.$$typeof)&&!kv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function YM(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function dI(e,t){const n=YM(e);return Math.round(t*n)/n}function Yx(e){const t=N.useRef(e);return Hb(()=>{t.current=e}),t}function CX(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:a,elements:{reference:i,floating:o}={},transform:s=!0,whileElementsMounted:l,open:u}=e,[d,h]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=N.useState(r);kv(p,r)||g(r);const[v,b]=N.useState(null),[_,x]=N.useState(null),S=N.useCallback(ee=>{ee!==R.current&&(R.current=ee,b(ee))},[]),E=N.useCallback(ee=>{ee!==D.current&&(D.current=ee,x(ee))},[]),C=i||v,k=o||_,R=N.useRef(null),D=N.useRef(null),O=N.useRef(d),L=l!=null,B=Yx(l),Y=Yx(a),F=Yx(u),Z=N.useCallback(()=>{if(!R.current||!D.current)return;const ee={placement:t,strategy:n,middleware:p};Y.current&&(ee.platform=Y.current),EX(R.current,D.current,ee).then(ie=>{const U={...ie,isPositioned:F.current!==!1};q.current&&!kv(O.current,U)&&(O.current=U,Ds.flushSync(()=>{h(U)}))})},[p,t,n,Y,F]);Hb(()=>{u===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,h(ee=>({...ee,isPositioned:!1})))},[u]);const q=N.useRef(!1);Hb(()=>(q.current=!0,()=>{q.current=!1}),[]),Hb(()=>{if(C&&(R.current=C),k&&(D.current=k),C&&k){if(B.current)return B.current(C,k,Z);Z()}},[C,k,Z,B,L]);const ne=N.useMemo(()=>({reference:R,floating:D,setReference:S,setFloating:E}),[S,E]),ae=N.useMemo(()=>({reference:C,floating:k}),[C,k]),re=N.useMemo(()=>{const ee={position:n,left:0,top:0};if(!ae.floating)return ee;const ie=dI(ae.floating,d.x),U=dI(ae.floating,d.y);return s?{...ee,transform:"translate("+ie+"px, "+U+"px)",...YM(ae.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ie,top:U}},[n,s,ae.floating,d.x,d.y]);return N.useMemo(()=>({...d,update:Z,refs:ne,elements:ae,floatingStyles:re}),[d,Z,ne,ae,re])}const kX=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:a}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?uI({element:r.current,padding:a}).fn(n):{}:r?uI({element:r,padding:a}).fn(n):{}}}},TX=(e,t)=>({...bX(e),options:[e,t]}),AX=(e,t)=>({...vX(e),options:[e,t]}),NX=(e,t)=>({...SX(e),options:[e,t]}),RX=(e,t)=>({...wX(e),options:[e,t]}),IX=(e,t)=>({..._X(e),options:[e,t]}),OX=(e,t)=>({...xX(e),options:[e,t]}),DX=(e,t)=>({...kX(e),options:[e,t]});var jX="Arrow",XM=N.forwardRef((e,t)=>{const{children:n,width:r=10,height:a=5,...i}=e;return y.jsx(tn.svg,{...i,ref:t,width:r,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:y.jsx("polygon",{points:"0,0 30,0 15,10"})})});XM.displayName=jX;var MX=XM;function Nw(e){const[t,n]=N.useState(void 0);return Wa(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,s;if("borderBoxSize"in i){const l=i.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,s=u.blockSize}else o=e.offsetWidth,s=e.offsetHeight;n({width:o,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var KC="Popper",[JM,yu]=Pi(KC),[PX,QM]=JM(KC),e8=e=>{const{__scopePopper:t,children:n}=e,[r,a]=N.useState(null);return y.jsx(PX,{scope:t,anchor:r,onAnchorChange:a,children:n})};e8.displayName=KC;var t8="PopperAnchor",n8=N.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...a}=e,i=QM(t8,n),o=N.useRef(null),s=kn(t,o);return N.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:y.jsx(tn.div,{...a,ref:s})});n8.displayName=t8;var ZC="PopperContent",[FX,LX]=JM(ZC),r8=N.forwardRef((e,t)=>{var Ne,Re,Ce,Fe,Qe,Le;const{__scopePopper:n,side:r="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:s=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...b}=e,_=QM(ZC,n),[x,S]=N.useState(null),E=kn(t,Ie=>S(Ie)),[C,k]=N.useState(null),R=Nw(C),D=(R==null?void 0:R.width)??0,O=(R==null?void 0:R.height)??0,L=r+(i!=="center"?"-"+i:""),B=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},Y=Array.isArray(u)?u:[u],F=Y.length>0,Z={padding:B,boundary:Y.filter(BX),altBoundary:F},{refs:q,floatingStyles:ne,placement:ae,isPositioned:re,middlewareData:ee}=CX({strategy:"fixed",placement:L,whileElementsMounted:(...Ie)=>yX(...Ie,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[TX({mainAxis:a+O,alignmentAxis:o}),l&&AX({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?NX():void 0,...Z}),l&&RX({...Z}),IX({...Z,apply:({elements:Ie,rects:V,availableWidth:me,availableHeight:Te})=>{const{width:le,height:oe}=V.reference,J=Ie.floating.style;J.setProperty("--radix-popper-available-width",`${me}px`),J.setProperty("--radix-popper-available-height",`${Te}px`),J.setProperty("--radix-popper-anchor-width",`${le}px`),J.setProperty("--radix-popper-anchor-height",`${oe}px`)}}),C&&DX({element:C,padding:s}),zX({arrowWidth:D,arrowHeight:O}),p&&OX({strategy:"referenceHidden",...Z})]}),[ie,U]=o8(ae),Q=Da(v);Wa(()=>{re&&(Q==null||Q())},[re,Q]);const X=(Ne=ee.arrow)==null?void 0:Ne.x,de=(Re=ee.arrow)==null?void 0:Re.y,be=((Ce=ee.arrow)==null?void 0:Ce.centerOffset)!==0,[_e,Pe]=N.useState();return Wa(()=>{x&&Pe(window.getComputedStyle(x).zIndex)},[x]),y.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:re?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[(Fe=ee.transformOrigin)==null?void 0:Fe.x,(Qe=ee.transformOrigin)==null?void 0:Qe.y].join(" "),...((Le=ee.hide)==null?void 0:Le.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:y.jsx(FX,{scope:n,placedSide:ie,onArrowChange:k,arrowX:X,arrowY:de,shouldHideArrow:be,children:y.jsx(tn.div,{"data-side":ie,"data-align":U,...b,ref:E,style:{...b.style,animation:re?void 0:"none"}})})})});r8.displayName=ZC;var a8="PopperArrow",$X={top:"bottom",right:"left",bottom:"top",left:"right"},i8=N.forwardRef(function(t,n){const{__scopePopper:r,...a}=t,i=LX(a8,r),o=$X[i.placedSide];return y.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:y.jsx(MX,{...a,ref:n,style:{...a.style,display:"block"}})})});i8.displayName=a8;function BX(e){return e!==null}var zX=e=>({name:"transformOrigin",options:e,fn(t){var _,x,S;const{placement:n,rects:r,middlewareData:a}=t,o=((_=a.arrow)==null?void 0:_.centerOffset)!==0,s=o?0:e.arrowWidth,l=o?0:e.arrowHeight,[u,d]=o8(n),h={start:"0%",center:"50%",end:"100%"}[d],p=(((x=a.arrow)==null?void 0:x.x)??0)+s/2,g=(((S=a.arrow)==null?void 0:S.y)??0)+l/2;let v="",b="";return u==="bottom"?(v=o?h:`${p}px`,b=`${-l}px`):u==="top"?(v=o?h:`${p}px`,b=`${r.floating.height+l}px`):u==="right"?(v=`${-l}px`,b=o?h:`${g}px`):u==="left"&&(v=`${r.floating.width+l}px`,b=o?h:`${g}px`),{data:{x:v,y:b}}}});function o8(e){const[t,n="center"]=e.split("-");return[t,n]}var Rw=e8,tg=n8,Iw=r8,Ow=i8,UX="Portal",Uh=N.forwardRef((e,t)=>{var s;const{container:n,...r}=e,[a,i]=N.useState(!1);Wa(()=>i(!0),[]);const o=n||a&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return o?FM.createPortal(y.jsx(tn.div,{...r,ref:t}),o):null});Uh.displayName=UX;function HX(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var La=e=>{const{present:t,children:n}=e,r=qX(t),a=typeof n=="function"?n({present:r.isPresent}):N.Children.only(n),i=kn(r.ref,VX(a));return typeof n=="function"||r.isPresent?N.cloneElement(a,{ref:i}):null};La.displayName="Presence";function qX(e){const[t,n]=N.useState(),r=N.useRef(null),a=N.useRef(e),i=N.useRef("none"),o=e?"mounted":"unmounted",[s,l]=HX(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return N.useEffect(()=>{const u=mb(r.current);i.current=s==="mounted"?u:"none"},[s]),Wa(()=>{const u=r.current,d=a.current;if(d!==e){const p=i.current,g=mb(u);e?l("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&p!==g?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,l]),Wa(()=>{if(t){let u;const d=t.ownerDocument.defaultView??window,h=g=>{const b=mb(r.current).includes(g.animationName);if(g.target===t&&b&&(l("ANIMATION_END"),!a.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",u=d.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=g=>{g.target===t&&(i.current=mb(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",h),t.addEventListener("animationend",h),()=>{d.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",h),t.removeEventListener("animationend",h)}}else l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:N.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function mb(e){return(e==null?void 0:e.animationName)||"none"}function VX(e){var r,a;let t=(r=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var GX=F6[" useInsertionEffect ".trim().toString()]||Wa;function qs({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[a,i,o]=WX({defaultProp:t,onChange:n}),s=e!==void 0,l=s?e:a;{const d=N.useRef(e!==void 0);N.useEffect(()=>{const h=d.current;h!==s&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),d.current=s},[s,r])}const u=N.useCallback(d=>{var h;if(s){const p=KX(d)?d(e):d;p!==e&&((h=o.current)==null||h.call(o,p))}else i(d)},[s,e,i,o]);return[l,u]}function WX({defaultProp:e,onChange:t}){const[n,r]=N.useState(e),a=N.useRef(n),i=N.useRef(t);return GX(()=>{i.current=t},[t]),N.useEffect(()=>{var o;a.current!==n&&((o=i.current)==null||o.call(i,n),a.current=n)},[n,a]),[n,r,i]}function KX(e){return typeof e=="function"}var s8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ZX="VisuallyHidden",l8=N.forwardRef((e,t)=>y.jsx(tn.span,{...e,ref:t,style:{...s8,...e.style}}));l8.displayName=ZX;var YX=l8,[Dw,h_e]=Pi("Tooltip",[yu]),jw=yu(),c8="TooltipProvider",XX=700,k2="tooltip.open",[JX,YC]=Dw(c8),u8=e=>{const{__scopeTooltip:t,delayDuration:n=XX,skipDelayDuration:r=300,disableHoverableContent:a=!1,children:i}=e,o=N.useRef(!0),s=N.useRef(!1),l=N.useRef(0);return N.useEffect(()=>{const u=l.current;return()=>window.clearTimeout(u)},[]),y.jsx(JX,{scope:t,isOpenDelayedRef:o,delayDuration:n,onOpen:N.useCallback(()=>{window.clearTimeout(l.current),o.current=!1},[]),onClose:N.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:s,onPointerInTransitChange:N.useCallback(u=>{s.current=u},[]),disableHoverableContent:a,children:i})};u8.displayName=c8;var c0="Tooltip",[QX,ng]=Dw(c0),d8=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:s}=e,l=YC(c0,e.__scopeTooltip),u=jw(t),[d,h]=N.useState(null),p=ni(),g=N.useRef(0),v=o??l.disableHoverableContent,b=s??l.delayDuration,_=N.useRef(!1),[x,S]=qs({prop:r,defaultProp:a??!1,onChange:D=>{D?(l.onOpen(),document.dispatchEvent(new CustomEvent(k2))):l.onClose(),i==null||i(D)},caller:c0}),E=N.useMemo(()=>x?_.current?"delayed-open":"instant-open":"closed",[x]),C=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,_.current=!1,S(!0)},[S]),k=N.useCallback(()=>{window.clearTimeout(g.current),g.current=0,S(!1)},[S]),R=N.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{_.current=!0,S(!0),g.current=0},b)},[b,S]);return N.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),y.jsx(Rw,{...u,children:y.jsx(QX,{scope:t,contentId:p,open:x,stateAttribute:E,trigger:d,onTriggerChange:h,onTriggerEnter:N.useCallback(()=>{l.isOpenDelayedRef.current?R():C()},[l.isOpenDelayedRef,R,C]),onTriggerLeave:N.useCallback(()=>{v?k():(window.clearTimeout(g.current),g.current=0)},[k,v]),onOpen:C,onClose:k,disableHoverableContent:v,children:n})})};d8.displayName=c0;var T2="TooltipTrigger",f8=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=ng(T2,n),i=YC(T2,n),o=jw(n),s=N.useRef(null),l=kn(t,s,a.onTriggerChange),u=N.useRef(!1),d=N.useRef(!1),h=N.useCallback(()=>u.current=!1,[]);return N.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),y.jsx(tg,{asChild:!0,...o,children:y.jsx(tn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...r,ref:l,onPointerMove:qt(e.onPointerMove,p=>{p.pointerType!=="touch"&&!d.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),d.current=!0)}),onPointerLeave:qt(e.onPointerLeave,()=>{a.onTriggerLeave(),d.current=!1}),onPointerDown:qt(e.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:qt(e.onFocus,()=>{u.current||a.onOpen()}),onBlur:qt(e.onBlur,a.onClose),onClick:qt(e.onClick,a.onClose)})})});f8.displayName=T2;var XC="TooltipPortal",[eJ,tJ]=Dw(XC,{forceMount:void 0}),h8=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:a}=e,i=ng(XC,t);return y.jsx(eJ,{scope:t,forceMount:n,children:y.jsx(La,{present:n||i.open,children:y.jsx(Uh,{asChild:!0,container:a,children:r})})})};h8.displayName=XC;var bh="TooltipContent",p8=N.forwardRef((e,t)=>{const n=tJ(bh,e.__scopeTooltip),{forceMount:r=n.forceMount,side:a="top",...i}=e,o=ng(bh,e.__scopeTooltip);return y.jsx(La,{present:r||o.open,children:o.disableHoverableContent?y.jsx(m8,{side:a,...i,ref:t}):y.jsx(nJ,{side:a,...i,ref:t})})}),nJ=N.forwardRef((e,t)=>{const n=ng(bh,e.__scopeTooltip),r=YC(bh,e.__scopeTooltip),a=N.useRef(null),i=kn(t,a),[o,s]=N.useState(null),{trigger:l,onClose:u}=n,d=a.current,{onPointerInTransitChange:h}=r,p=N.useCallback(()=>{s(null),h(!1)},[h]),g=N.useCallback((v,b)=>{const _=v.currentTarget,x={x:v.clientX,y:v.clientY},S=oJ(x,_.getBoundingClientRect()),E=sJ(x,S),C=lJ(b.getBoundingClientRect()),k=uJ([...E,...C]);s(k),h(!0)},[h]);return N.useEffect(()=>()=>p(),[p]),N.useEffect(()=>{if(l&&d){const v=_=>g(_,d),b=_=>g(_,l);return l.addEventListener("pointerleave",v),d.addEventListener("pointerleave",b),()=>{l.removeEventListener("pointerleave",v),d.removeEventListener("pointerleave",b)}}},[l,d,g,p]),N.useEffect(()=>{if(o){const v=b=>{const _=b.target,x={x:b.clientX,y:b.clientY},S=(l==null?void 0:l.contains(_))||(d==null?void 0:d.contains(_)),E=!cJ(x,o);S?p():E&&(p(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[l,d,o,u,p]),y.jsx(m8,{...e,ref:i})}),[rJ,aJ]=Dw(c0,{isInside:!1}),iJ=k7("TooltipContent"),m8=N.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...s}=e,l=ng(bh,n),u=jw(n),{onClose:d}=l;return N.useEffect(()=>(document.addEventListener(k2,d),()=>document.removeEventListener(k2,d)),[d]),N.useEffect(()=>{if(l.trigger){const h=p=>{const g=p.target;g!=null&&g.contains(l.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[l.trigger,d]),y.jsx($h,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:y.jsxs(Iw,{"data-state":l.stateAttribute,...u,...s,ref:t,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[y.jsx(iJ,{children:r}),y.jsx(rJ,{scope:n,isInside:!0,children:y.jsx(YX,{id:l.contentId,role:"tooltip",children:a||r})})]})})});p8.displayName=bh;var g8="TooltipArrow",y8=N.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,a=jw(n);return aJ(g8,n).isInside?null:y.jsx(Ow,{...a,...r,ref:t})});y8.displayName=g8;function oJ(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(n,r,a,i)){case i:return"left";case a:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function sJ(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function lJ(e){const{top:t,right:n,bottom:r,left:a}=e;return[{x:a,y:t},{x:n,y:t},{x:n,y:r},{x:a,y:r}]}function cJ(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],u=s.x,d=s.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(a=!a)}return a}function uJ(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),dJ(t)}function dJ(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const a=e[r];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const a=e[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))n.pop();else break}n.push(a)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var fJ=u8,hJ=d8,pJ=f8,mJ=h8,gJ=p8,yJ=y8;function er({delayDuration:e=0,...t}){return y.jsx(fJ,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function nr({...e}){return y.jsx(er,{children:y.jsx(hJ,{"data-slot":"tooltip",...e})})}function rr({...e}){return y.jsx(pJ,{"data-slot":"tooltip-trigger",...e})}function ar({className:e,sideOffset:t=0,children:n,...r}){return y.jsx(mJ,{children:y.jsxs(gJ,{"data-slot":"tooltip-content",sideOffset:t,className:Rt("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,y.jsx(yJ,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}var Xx={exports:{}},fI;function bJ(){return fI||(fI=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var a=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,i=0,o={},s={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function S(E){return E instanceof l?new l(E.type,S(E.content),E.alias):Array.isArray(E)?E.map(S):E.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(S){return Object.prototype.toString.call(S).slice(8,-1)},objId:function(S){return S.__id||Object.defineProperty(S,"__id",{value:++i}),S.__id},clone:function S(E,C){C=C||{};var k,R;switch(s.util.type(E)){case"Object":if(R=s.util.objId(E),C[R])return C[R];k={},C[R]=k;for(var D in E)E.hasOwnProperty(D)&&(k[D]=S(E[D],C));return k;case"Array":return R=s.util.objId(E),C[R]?C[R]:(k=[],C[R]=k,E.forEach(function(O,L){k[L]=S(O,C)}),k);default:return E}},getLanguage:function(S){for(;S;){var E=a.exec(S.className);if(E)return E[1].toLowerCase();S=S.parentElement}return"none"},setLanguage:function(S,E){S.className=S.className.replace(RegExp(a,"gi"),""),S.classList.add("language-"+E)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(k){var S=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(k.stack)||[])[1];if(S){var E=document.getElementsByTagName("script");for(var C in E)if(E[C].src==S)return E[C]}return null}},isActive:function(S,E,C){for(var k="no-"+E;S;){var R=S.classList;if(R.contains(E))return!0;if(R.contains(k))return!1;S=S.parentElement}return!!C}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(S,E){var C=s.util.clone(s.languages[S]);for(var k in E)C[k]=E[k];return C},insertBefore:function(S,E,C,k){k=k||s.languages;var R=k[S],D={};for(var O in R)if(R.hasOwnProperty(O)){if(O==E)for(var L in C)C.hasOwnProperty(L)&&(D[L]=C[L]);C.hasOwnProperty(O)||(D[O]=R[O])}var B=k[S];return k[S]=D,s.languages.DFS(s.languages,function(Y,F){F===B&&Y!=S&&(this[Y]=D)}),D},DFS:function S(E,C,k,R){R=R||{};var D=s.util.objId;for(var O in E)if(E.hasOwnProperty(O)){C.call(E,O,E[O],k||O);var L=E[O],B=s.util.type(L);B==="Object"&&!R[D(L)]?(R[D(L)]=!0,S(L,C,null,R)):B==="Array"&&!R[D(L)]&&(R[D(L)]=!0,S(L,C,O,R))}}},plugins:{},highlightAll:function(S,E){s.highlightAllUnder(document,S,E)},highlightAllUnder:function(S,E,C){var k={callback:C,container:S,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};s.hooks.run("before-highlightall",k),k.elements=Array.prototype.slice.apply(k.container.querySelectorAll(k.selector)),s.hooks.run("before-all-elements-highlight",k);for(var R=0,D;D=k.elements[R++];)s.highlightElement(D,E===!0,k.callback)},highlightElement:function(S,E,C){var k=s.util.getLanguage(S),R=s.languages[k];s.util.setLanguage(S,k);var D=S.parentElement;D&&D.nodeName.toLowerCase()==="pre"&&s.util.setLanguage(D,k);var O=S.textContent,L={element:S,language:k,grammar:R,code:O};function B(F){L.highlightedCode=F,s.hooks.run("before-insert",L),L.element.innerHTML=L.highlightedCode,s.hooks.run("after-highlight",L),s.hooks.run("complete",L),C&&C.call(L.element)}if(s.hooks.run("before-sanity-check",L),D=L.element.parentElement,D&&D.nodeName.toLowerCase()==="pre"&&!D.hasAttribute("tabindex")&&D.setAttribute("tabindex","0"),!L.code){s.hooks.run("complete",L),C&&C.call(L.element);return}if(s.hooks.run("before-highlight",L),!L.grammar){B(s.util.encode(L.code));return}if(E&&r.Worker){var Y=new Worker(s.filename);Y.onmessage=function(F){B(F.data)},Y.postMessage(JSON.stringify({language:L.language,code:L.code,immediateClose:!0}))}else B(s.highlight(L.code,L.grammar,L.language))},highlight:function(S,E,C){var k={code:S,grammar:E,language:C};if(s.hooks.run("before-tokenize",k),!k.grammar)throw new Error('The language "'+k.language+'" has no grammar.');return k.tokens=s.tokenize(k.code,k.grammar),s.hooks.run("after-tokenize",k),l.stringify(s.util.encode(k.tokens),k.language)},tokenize:function(S,E){var C=E.rest;if(C){for(var k in C)E[k]=C[k];delete E.rest}var R=new h;return p(R,R.head,S),d(S,R,E,R.head,0),v(R)},hooks:{all:{},add:function(S,E){var C=s.hooks.all;C[S]=C[S]||[],C[S].push(E)},run:function(S,E){var C=s.hooks.all[S];if(!(!C||!C.length))for(var k=0,R;R=C[k++];)R(E)}},Token:l};r.Prism=s;function l(S,E,C,k){this.type=S,this.content=E,this.alias=C,this.length=(k||"").length|0}l.stringify=function S(E,C){if(typeof E=="string")return E;if(Array.isArray(E)){var k="";return E.forEach(function(B){k+=S(B,C)}),k}var R={type:E.type,content:S(E.content,C),tag:"span",classes:["token",E.type],attributes:{},language:C},D=E.alias;D&&(Array.isArray(D)?Array.prototype.push.apply(R.classes,D):R.classes.push(D)),s.hooks.run("wrap",R);var O="";for(var L in R.attributes)O+=" "+L+'="'+(R.attributes[L]||"").replace(/"/g,"&quot;")+'"';return"<"+R.tag+' class="'+R.classes.join(" ")+'"'+O+">"+R.content+"</"+R.tag+">"};function u(S,E,C,k){S.lastIndex=E;var R=S.exec(C);if(R&&k&&R[1]){var D=R[1].length;R.index+=D,R[0]=R[0].slice(D)}return R}function d(S,E,C,k,R,D){for(var O in C)if(!(!C.hasOwnProperty(O)||!C[O])){var L=C[O];L=Array.isArray(L)?L:[L];for(var B=0;B<L.length;++B){if(D&&D.cause==O+","+B)return;var Y=L[B],F=Y.inside,Z=!!Y.lookbehind,q=!!Y.greedy,ne=Y.alias;if(q&&!Y.pattern.global){var ae=Y.pattern.toString().match(/[imsuy]*$/)[0];Y.pattern=RegExp(Y.pattern.source,ae+"g")}for(var re=Y.pattern||Y,ee=k.next,ie=R;ee!==E.tail&&!(D&&ie>=D.reach);ie+=ee.value.length,ee=ee.next){var U=ee.value;if(E.length>S.length)return;if(!(U instanceof l)){var Q=1,X;if(q){if(X=u(re,ie,S,Z),!X||X.index>=S.length)break;var Pe=X.index,de=X.index+X[0].length,be=ie;for(be+=ee.value.length;Pe>=be;)ee=ee.next,be+=ee.value.length;if(be-=ee.value.length,ie=be,ee.value instanceof l)continue;for(var _e=ee;_e!==E.tail&&(be<de||typeof _e.value=="string");_e=_e.next)Q++,be+=_e.value.length;Q--,U=S.slice(ie,be),X.index-=ie}else if(X=u(re,0,U,Z),!X)continue;var Pe=X.index,Ne=X[0],Re=U.slice(0,Pe),Ce=U.slice(Pe+Ne.length),Fe=ie+U.length;D&&Fe>D.reach&&(D.reach=Fe);var Qe=ee.prev;Re&&(Qe=p(E,Qe,Re),ie+=Re.length),g(E,Qe,Q);var Le=new l(O,F?s.tokenize(Ne,F):Ne,ne,Ne);if(ee=p(E,Qe,Le),Ce&&p(E,ee,Ce),Q>1){var Ie={cause:O+","+B,reach:Fe};d(S,E,C,ee.prev,ie,Ie),D&&Ie.reach>D.reach&&(D.reach=Ie.reach)}}}}}}function h(){var S={value:null,prev:null,next:null},E={value:null,prev:S,next:null};S.next=E,this.head=S,this.tail=E,this.length=0}function p(S,E,C){var k=E.next,R={value:C,prev:E,next:k};return E.next=R,k.prev=R,S.length++,R}function g(S,E,C){for(var k=E.next,R=0;R<C&&k!==S.tail;R++)k=k.next;E.next=k,k.prev=E,S.length-=R}function v(S){for(var E=[],C=S.head.next;C!==S.tail;)E.push(C.value),C=C.next;return E}if(!r.document)return r.addEventListener&&(s.disableWorkerMessageHandler||r.addEventListener("message",function(S){var E=JSON.parse(S.data),C=E.language,k=E.code,R=E.immediateClose;r.postMessage(s.highlight(k,s.languages[C],C)),R&&r.close()},!1)),s;var b=s.util.currentScript();b&&(s.filename=b.src,b.hasAttribute("data-manual")&&(s.manual=!0));function _(){s.manual||s.highlightAll()}if(!s.manual){var x=document.readyState;x==="loading"||x==="interactive"&&b&&b.defer?document.addEventListener("DOMContentLoaded",_):window.requestAnimationFrame?window.requestAnimationFrame(_):window.setTimeout(_,16)}return s}(t);e.exports&&(e.exports=n),typeof ld<"u"&&(ld.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(a,i){var o={};o["language-"+i]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[i]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};s["language-"+i]={pattern:/[\s\S]+/,inside:n.languages[i]};var l={};l[a]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return a}),"i"),lookbehind:!0,greedy:!0,inside:s},n.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,a){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[a,"language-"+a],inside:n.languages[a]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var a=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+a.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+a.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+a.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+a.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:a,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var i=r.languages.markup;i&&(i.tag.addInlined("style","css"),i.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",a=function(b,_){return" Error "+b+" while fetching file: "+_},i=" Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},s="data-src-status",l="loading",u="loaded",d="failed",h="pre[data-src]:not(["+s+'="'+u+'"]):not(['+s+'="'+l+'"])';function p(b,_,x){var S=new XMLHttpRequest;S.open("GET",b,!0),S.onreadystatechange=function(){S.readyState==4&&(S.status<400&&S.responseText?_(S.responseText):S.status>=400?x(a(S.status,S.statusText)):x(i))},S.send(null)}function g(b){var _=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(b||"");if(_){var x=Number(_[1]),S=_[2],E=_[3];return S?E?[x,Number(E)]:[x,void 0]:[x,x]}}n.hooks.add("before-highlightall",function(b){b.selector+=", "+h}),n.hooks.add("before-sanity-check",function(b){var _=b.element;if(_.matches(h)){b.code="",_.setAttribute(s,l);var x=_.appendChild(document.createElement("CODE"));x.textContent=r;var S=_.getAttribute("data-src"),E=b.language;if(E==="none"){var C=(/\.(\w+)$/.exec(S)||[,"none"])[1];E=o[C]||C}n.util.setLanguage(x,E),n.util.setLanguage(_,E);var k=n.plugins.autoloader;k&&k.loadLanguages(E),p(S,function(R){_.setAttribute(s,u);var D=g(_.getAttribute("data-range"));if(D){var O=R.split(/\r\n?|\n/g),L=D[0],B=D[1]==null?O.length:D[1];L<0&&(L+=O.length),L=Math.max(0,Math.min(L-1,O.length)),B<0&&(B+=O.length),B=Math.max(0,Math.min(B,O.length)),R=O.slice(L,B).join(`
`),_.hasAttribute("data-start")||_.setAttribute("data-start",String(L+1))}x.textContent=R,n.highlightElement(x)},function(R){_.setAttribute(s,d),x.textContent=R})}}),n.plugins.fileHighlight={highlight:function(_){for(var x=(_||document).querySelectorAll(h),S=0,E;E=x[S++];)n.highlightElement(E)}};var v=!1;n.fileHighlight=function(){v||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),v=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(Xx)),Xx.exports}var vJ=bJ();const wJ=si(vJ);var hI={},pI;function _J(){return pI||(pI=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),hI}_J();var mI={},gI;function xJ(){return gI||(gI=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),mI}xJ();(function(e){var t="\\b(?:BASH|BASHOPTS|BASH_ALIASES|BASH_ARGC|BASH_ARGV|BASH_CMDS|BASH_COMPLETION_COMPAT_DIR|BASH_LINENO|BASH_REMATCH|BASH_SOURCE|BASH_VERSINFO|BASH_VERSION|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|EUID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_ADDRESS|LC_ALL|LC_IDENTIFICATION|LC_MEASUREMENT|LC_MONETARY|LC_NAME|LC_NUMERIC|LC_PAPER|LC_TELEPHONE|LC_TIME|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS1|PS2|PS3|PS4|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UID|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_CONFIG_DIRS|XDG_CURRENT_DESKTOP|XDG_DATA_DIRS|XDG_GREETER_DATA_DIR|XDG_MENU_PREFIX|XDG_RUNTIME_DIR|XDG_SEAT|XDG_SEAT_PATH|XDG_SESSION_DESKTOP|XDG_SESSION_ID|XDG_SESSION_PATH|XDG_SESSION_TYPE|XDG_VTNR|XMODIFIERS)\\b",n={pattern:/(^(["']?)\w+\2)[ \t]+\S.*/,lookbehind:!0,alias:"punctuation",inside:null},r={bash:n,environment:{pattern:RegExp("\\$"+t),alias:"constant"},variable:[{pattern:/\$?\(\([\s\S]+?\)\)/,greedy:!0,inside:{variable:[{pattern:/(^\$\(\([\s\S]+)\)\)/,lookbehind:!0},/^\$\(\(/],number:/\b0x[\dA-Fa-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|\*\*=?|<<=?|>>=?|&&|\|\||[=!+\-*/%<>^&|]=?|[?~:]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:\([^)]+\)|[^()])+\)|`[^`]+`/,greedy:!0,inside:{variable:/^\$\(|^`|\)$|`$/}},{pattern:/\$\{[^}]+\}/,greedy:!0,inside:{operator:/:[-=?+]?|[!\/]|##?|%%?|\^\^?|,,?/,punctuation:/[\[\]]/,environment:{pattern:RegExp("(\\{)"+t),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[0-9a-fA-F]{8}|u[0-9a-fA-F]{4}|x[0-9a-fA-F]{1,2})/};e.languages.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,alias:"variable",lookbehind:!0},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+t),lookbehind:!0,alias:"constant"}},alias:"variable",lookbehind:!0},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?=[=\s]|$)/,alias:"variable",lookbehind:!0},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[\s\S]*?(?:\r?\n|\r)\2/,lookbehind:!0,greedy:!0,inside:r},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[\s\S]*?(?:\r?\n|\r)\3/,lookbehind:!0,greedy:!0,inside:{bash:n}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[\s\S]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^"\\`$])*"/,lookbehind:!0,greedy:!0,inside:r},{pattern:/(^|[^$\\])'[^']*'/,lookbehind:!0,greedy:!0},{pattern:/\$'(?:[^'\\]|\\[\s\S])*'/,greedy:!0,inside:{entity:r.entity}}],environment:{pattern:RegExp("\\$?"+t),alias:"constant"},variable:r.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|awk|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|cfdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cp|cron|crontab|csplit|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff|diff3|dig|dir|dircolors|dirname|dirs|dmesg|docker|docker-compose|du|egrep|eject|env|ethtool|expand|expect|expr|fdformat|fdisk|fg|fgrep|file|find|fmt|fold|format|free|fsck|ftp|fuser|gawk|git|gparted|grep|groupadd|groupdel|groupmod|groups|grub-mkconfig|gzip|halt|head|hg|history|host|hostname|htop|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|kill|killall|less|link|ln|locate|logname|logrotate|look|lpc|lpr|lprint|lprintd|lprintq|lprm|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mmv|more|most|mount|mtools|mtr|mutt|mv|nano|nc|netstat|nice|nl|node|nohup|notify-send|npm|nslookup|op|open|parted|passwd|paste|pathchk|ping|pkill|pnpm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ram|rar|rcp|reboot|remsync|rename|renice|rev|rm|rmdir|rpm|rsync|scp|screen|sdiff|sed|sendmail|seq|service|sftp|sh|shellcheck|shuf|shutdown|sleep|slocate|sort|split|ssh|stat|strace|su|sudo|sum|suspend|swapon|sync|sysctl|tac|tail|tar|tee|time|timeout|top|touch|tr|traceroute|tsort|tty|umount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vi|vim|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|let|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|set|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[{}[\];\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}},n.inside=e.languages.bash;for(var a=["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"],i=r.variable[1].inside,o=0;o<a.length;o++)i[a[o]]=e.languages.bash[a[o]];e.languages.sh=e.languages.bash,e.languages.shell=e.languages.bash})(Prism);Prism.languages.json={property:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,lookbehind:!0,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,lookbehind:!0,greedy:!0},comment:{pattern:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:false|true)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}};Prism.languages.webmanifest=Prism.languages.json;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(d){return d=d.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+d+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,a=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),i=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+a+i+"(?:"+a+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+a+i+")(?:"+a+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+a+")"+i+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+a+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(d){["url","bold","italic","strike","code-snippet"].forEach(function(h){d!==h&&(e.languages.markdown[d].inside.content.inside[h]=e.languages.markdown[h])})}),e.hooks.add("after-tokenize",function(d){if(d.language!=="markdown"&&d.language!=="md")return;function h(p){if(!(!p||typeof p=="string"))for(var g=0,v=p.length;g<v;g++){var b=p[g];if(b.type!=="code"){h(b.content);continue}var _=b.content[1],x=b.content[3];if(_&&x&&_.type==="code-language"&&x.type==="code-block"&&typeof _.content=="string"){var S=_.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");S=(/[a-z][\w-]*/i.exec(S)||[""])[0].toLowerCase();var E="language-"+S;x.alias?typeof x.alias=="string"?x.alias=[x.alias,E]:x.alias.push(E):x.alias=[E]}}}h(d.tokens)}),e.hooks.add("wrap",function(d){if(d.type==="code-block"){for(var h="",p=0,g=d.classes.length;p<g;p++){var v=d.classes[p],b=/language-(.+)/.exec(v);if(b){h=b[1];break}}var _=e.languages[h];if(_)d.content=e.highlight(u(d.content),_,h);else if(h&&h!=="none"&&e.plugins.autoloader){var x="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);d.attributes.id=x,e.plugins.autoloader.loadLanguages(h,function(){var S=document.getElementById(x);S&&(S.innerHTML=e.highlight(S.textContent,e.languages[h],h))})}}});var o=RegExp(e.languages.markup.tag.pattern.source,"gi"),s={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;function u(d){var h=d.replace(o,"");return h=h.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,g){if(g=g.toLowerCase(),g[0]==="#"){var v;return g[1]==="x"?v=parseInt(g.slice(2),16):v=Number(g.slice(1)),l(v)}else{var b=s[g];return b||p}}),h}e.languages.md=e.languages.markdown})(Prism);(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],a=[];/^\w+$/.test(n)||a.push(/\w+/.exec(n)[0]),n==="diff"&&a.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:a,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);Prism.languages.go=Prism.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"|`[^`]*`/,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|iota|nil|true)\b/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/[*\/%^!=]=?|\+[=+]?|-[=-]?|\|[=|]?|&(?:=|&|\^=?)?|>(?:>=?|=)?|<(?:<=?|=|-)?|:=|\.\.\./,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/});Prism.languages.insertBefore("go","string",{char:{pattern:/'(?:\\.|[^'\\\r\n]){0,10}'/,greedy:!0}});delete Prism.languages.go["class-name"];(function(e){var t=/[*&][^\s[\]{},]+/,n=/!(?:<[\w\-%#;/?:@&=+$,.!~*'()[\]]+>|(?:[a-zA-Z\d-]*!)?[\w\-%#;/?:@&=+$.~*'()]+)?/,r="(?:"+n.source+"(?:[ 	]+"+t.source+")?|"+t.source+"(?:[ 	]+"+n.source+")?)",a=/(?:[^\s\x00-\x08\x0e-\x1f!"#%&'*,\-:>?@[\]`{|}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]|[?:-]<PLAIN>)(?:[ \t]*(?:(?![#:])<PLAIN>|:<PLAIN>))*/.source.replace(/<PLAIN>/g,function(){return/[^\s\x00-\x08\x0e-\x1f,[\]{}\x7f-\x84\x86-\x9f\ud800-\udfff\ufffe\uffff]/.source}),i=/"(?:[^"\\\r\n]|\\.)*"|'(?:[^'\\\r\n]|\\.)*'/.source;function o(s,l){l=(l||"").replace(/m/g,"")+"m";var u=/([:\-,[{]\s*(?:\s<<prop>>[ \t]+)?)(?:<<value>>)(?=[ \t]*(?:$|,|\]|\}|(?:[\r\n]\s*)?#))/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<value>>/g,function(){return s});return RegExp(u,l)}e.languages.yaml={scalar:{pattern:RegExp(/([\-:]\s*(?:\s<<prop>>[ \t]+)?[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)\S[^\r\n]*(?:\2[^\r\n]+)*)/.source.replace(/<<prop>>/g,function(){return r})),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:RegExp(/((?:^|[:\-,[{\r\n?])[ \t]*(?:<<prop>>[ \t]+)?)<<key>>(?=\s*:\s)/.source.replace(/<<prop>>/g,function(){return r}).replace(/<<key>>/g,function(){return"(?:"+a+"|"+i+")"})),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:o(/\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?(?:[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?))?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?/.source),lookbehind:!0,alias:"number"},boolean:{pattern:o(/false|true/.source,"i"),lookbehind:!0,alias:"important"},null:{pattern:o(/null|~/.source,"i"),lookbehind:!0,alias:"important"},string:{pattern:o(i),lookbehind:!0,greedy:!0},number:{pattern:o(/[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?|\.inf|\.nan)/.source,"i"),lookbehind:!0},tag:n,important:t,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},e.languages.yml=e.languages.yaml})(Prism);var yI={},bI;function SJ(){return bI||(bI=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),yI}SJ();Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};const vI="prism-theme-link",Jx="prism-default-light-theme-link",Qx="prism-default-dark-theme-link",EJ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-material-light.min.css",CJ="https://cdnjs.cloudflare.com/ajax/libs/prism-themes/1.5.0/prism-coldark-dark.min.css",wI=e=>e.replace("github.com","raw.githubusercontent.com").replace("/blob/","/"),rg=({lang:e,code:t,isStreaming:n=!1})=>{const{prismThemeUrl:r,theme:a,foldStreamingCodeBlocks:i}=Kr(Sn(S=>({prismThemeUrl:S.prismThemeUrl,theme:S.theme,foldStreamingCodeBlocks:S.foldStreamingCodeBlocks}))),[o,s]=N.useState(!1),[l,u]=N.useState(n?i:!1),d=N.useRef(null),h=N.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",[]),p=a==="system"?h:a;N.useEffect(()=>{const S=(C,k)=>{const R=document.getElementById(k);if(R)R.href!==C&&(R.href=C);else{const D=document.createElement("link");D.id=k,D.rel="stylesheet",D.href=C,document.head.appendChild(D)}},E=C=>{const k=document.getElementById(C);k&&k.remove()};r?(S(r,vI),E(Jx),E(Qx)):(E(vI),p==="dark"?(S(wI(CJ),Qx),E(Jx)):(S(wI(EJ),Jx),E(Qx)))},[r,p]);const g=N.useCallback(()=>{if(d.current&&t)try{d.current.textContent=t,wJ.highlightElement(d.current)}catch(S){console.error("Prism highlight error:",S),d.current.textContent=t}else d.current&&(d.current.textContent="")},[t]);N.useEffect(()=>{l||g()},[t,e,l,g]);const v=async()=>{try{await navigator.clipboard.writeText(t),s(!0),lt.success("Code copied to clipboard!"),setTimeout(()=>s(!1),1500)}catch(S){lt.error("Failed to copy code."),console.error("Clipboard copy failed:",S)}},b=()=>{const S=l;u(E=>!E),S&&setTimeout(g,0)},_=e?`language-${e}`:"language-plaintext",x=N.useMemo(()=>t?t.split(`
`).slice(0,3).join(`
`):"",[t]);return y.jsxs("div",{className:"code-block-container group/codeblock my-4 max-w-full",children:[y.jsxs("div",{className:"code-block-header",children:[y.jsx("div",{className:"text-sm font-medium",children:e?e.toUpperCase():"CODE"}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:b,"aria-label":l?"Unfold code":"Fold code",children:y.jsx(wC,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{side:"top",children:l?"Unfold":"Fold"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:v,"aria-label":"Copy code",children:o?y.jsx(Ws,{className:"h-3.5 w-3.5 text-green-500"}):y.jsx(_C,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{side:"top",children:"Copy"})]})})]})]}),!l&&y.jsx("div",{className:"overflow-hidden w-full",children:y.jsx("pre",{className:Rt("overflow-x-auto w-full relative"),children:y.jsx("code",{ref:d,className:_+" inline-block min-w-full",children:t})})}),l&&y.jsx("div",{className:"folded-content-preview p-4 cursor-pointer w-full box-border",onClick:b,children:y.jsx("pre",{className:"whitespace-pre-wrap break-words text-muted-foreground font-mono text-sm",children:x})})]})};var st;(function(e){e[e.EPERM=1]="EPERM",e[e.ENOENT=2]="ENOENT",e[e.EINTR=4]="EINTR",e[e.EIO=5]="EIO",e[e.ENXIO=6]="ENXIO",e[e.EBADF=9]="EBADF",e[e.EAGAIN=11]="EAGAIN",e[e.ENOMEM=12]="ENOMEM",e[e.EACCES=13]="EACCES",e[e.EFAULT=14]="EFAULT",e[e.ENOTBLK=15]="ENOTBLK",e[e.EBUSY=16]="EBUSY",e[e.EEXIST=17]="EEXIST",e[e.EXDEV=18]="EXDEV",e[e.ENODEV=19]="ENODEV",e[e.ENOTDIR=20]="ENOTDIR",e[e.EISDIR=21]="EISDIR",e[e.EINVAL=22]="EINVAL",e[e.ENFILE=23]="ENFILE",e[e.EMFILE=24]="EMFILE",e[e.ETXTBSY=26]="ETXTBSY",e[e.EFBIG=27]="EFBIG",e[e.ENOSPC=28]="ENOSPC",e[e.ESPIPE=29]="ESPIPE",e[e.EROFS=30]="EROFS",e[e.EMLINK=31]="EMLINK",e[e.EPIPE=32]="EPIPE",e[e.EDOM=33]="EDOM",e[e.ERANGE=34]="ERANGE",e[e.EDEADLK=35]="EDEADLK",e[e.ENAMETOOLONG=36]="ENAMETOOLONG",e[e.ENOLCK=37]="ENOLCK",e[e.ENOSYS=38]="ENOSYS",e[e.ENOTEMPTY=39]="ENOTEMPTY",e[e.ELOOP=40]="ELOOP",e[e.ENOMSG=42]="ENOMSG",e[e.EBADE=52]="EBADE",e[e.EBADR=53]="EBADR",e[e.EXFULL=54]="EXFULL",e[e.ENOANO=55]="ENOANO",e[e.EBADRQC=56]="EBADRQC",e[e.ENOSTR=60]="ENOSTR",e[e.ENODATA=61]="ENODATA",e[e.ETIME=62]="ETIME",e[e.ENOSR=63]="ENOSR",e[e.ENONET=64]="ENONET",e[e.EREMOTE=66]="EREMOTE",e[e.ENOLINK=67]="ENOLINK",e[e.ECOMM=70]="ECOMM",e[e.EPROTO=71]="EPROTO",e[e.EBADMSG=74]="EBADMSG",e[e.EOVERFLOW=75]="EOVERFLOW",e[e.EBADFD=77]="EBADFD",e[e.ESTRPIPE=86]="ESTRPIPE",e[e.ENOTSOCK=88]="ENOTSOCK",e[e.EDESTADDRREQ=89]="EDESTADDRREQ",e[e.EMSGSIZE=90]="EMSGSIZE",e[e.EPROTOTYPE=91]="EPROTOTYPE",e[e.ENOPROTOOPT=92]="ENOPROTOOPT",e[e.EPROTONOSUPPORT=93]="EPROTONOSUPPORT",e[e.ESOCKTNOSUPPORT=94]="ESOCKTNOSUPPORT",e[e.ENOTSUP=95]="ENOTSUP",e[e.ENETDOWN=100]="ENETDOWN",e[e.ENETUNREACH=101]="ENETUNREACH",e[e.ENETRESET=102]="ENETRESET",e[e.ETIMEDOUT=110]="ETIMEDOUT",e[e.ECONNREFUSED=111]="ECONNREFUSED",e[e.EHOSTDOWN=112]="EHOSTDOWN",e[e.EHOSTUNREACH=113]="EHOSTUNREACH",e[e.EALREADY=114]="EALREADY",e[e.EINPROGRESS=115]="EINPROGRESS",e[e.ESTALE=116]="ESTALE",e[e.EREMOTEIO=121]="EREMOTEIO",e[e.EDQUOT=122]="EDQUOT"})(st||(st={}));const _I={[st.EPERM]:"Operation not permitted",[st.ENOENT]:"No such file or directory",[st.EINTR]:"Interrupted system call",[st.EIO]:"Input/output error",[st.ENXIO]:"No such device or address",[st.EBADF]:"Bad file descriptor",[st.EAGAIN]:"Resource temporarily unavailable",[st.ENOMEM]:"Cannot allocate memory",[st.EACCES]:"Permission denied",[st.EFAULT]:"Bad address",[st.ENOTBLK]:"Block device required",[st.EBUSY]:"Resource busy or locked",[st.EEXIST]:"File exists",[st.EXDEV]:"Invalid cross-device link",[st.ENODEV]:"No such device",[st.ENOTDIR]:"File is not a directory",[st.EISDIR]:"File is a directory",[st.EINVAL]:"Invalid argument",[st.ENFILE]:"Too many open files in system",[st.EMFILE]:"Too many open files",[st.ETXTBSY]:"Text file busy",[st.EFBIG]:"File is too big",[st.ENOSPC]:"No space left on disk",[st.ESPIPE]:"Illegal seek",[st.EROFS]:"Cannot modify a read-only file system",[st.EMLINK]:"Too many links",[st.EPIPE]:"Broken pipe",[st.EDOM]:"Numerical argument out of domain",[st.ERANGE]:"Numerical result out of range",[st.EDEADLK]:"Resource deadlock would occur",[st.ENAMETOOLONG]:"File name too long",[st.ENOLCK]:"No locks available",[st.ENOSYS]:"Function not implemented",[st.ENOTEMPTY]:"Directory is not empty",[st.ELOOP]:"Too many levels of symbolic links",[st.ENOMSG]:"No message of desired type",[st.EBADE]:"Invalid exchange",[st.EBADR]:"Invalid request descriptor",[st.EXFULL]:"Exchange full",[st.ENOANO]:"No anode",[st.EBADRQC]:"Invalid request code",[st.ENOSTR]:"Device not a stream",[st.ENODATA]:"No data available",[st.ETIME]:"Timer expired",[st.ENOSR]:"Out of streams resources",[st.ENONET]:"Machine is not on the network",[st.EREMOTE]:"Object is remote",[st.ENOLINK]:"Link has been severed",[st.ECOMM]:"Communication error on send",[st.EPROTO]:"Protocol error",[st.EBADMSG]:"Bad message",[st.EOVERFLOW]:"Value too large for defined data type",[st.EBADFD]:"File descriptor in bad state",[st.ESTRPIPE]:"Streams pipe error",[st.ENOTSOCK]:"Socket operation on non-socket",[st.EDESTADDRREQ]:"Destination address required",[st.EMSGSIZE]:"Message too long",[st.EPROTOTYPE]:"Protocol wrong type for socket",[st.ENOPROTOOPT]:"Protocol not available",[st.EPROTONOSUPPORT]:"Protocol not supported",[st.ESOCKTNOSUPPORT]:"Socket type not supported",[st.ENOTSUP]:"Operation is not supported",[st.ENETDOWN]:"Network is down",[st.ENETUNREACH]:"Network is unreachable",[st.ENETRESET]:"Network dropped connection on reset",[st.ETIMEDOUT]:"Connection timed out",[st.ECONNREFUSED]:"Connection refused",[st.EHOSTDOWN]:"Host is down",[st.EHOSTUNREACH]:"No route to host",[st.EALREADY]:"Operation already in progress",[st.EINPROGRESS]:"Operation now in progress",[st.ESTALE]:"Stale file handle",[st.EREMOTEIO]:"Remote I/O error",[st.EDQUOT]:"Disk quota exceeded"};class Ue extends Error{static fromJSON(t){const n=new Ue(t.errno,t.message,t.path,t.syscall);return n.code=t.code,n.stack=t.stack,n}static With(t,n,r){return new Ue(st[t],_I[st[t]],n,r)}constructor(t,n=_I[t],r,a=""){super(n),this.errno=t,this.message=n,this.path=r,this.syscall=a,this.code=st[t]}toString(){return this.code+": "+this.message+(this.path?`, '${this.path}'`:"")}toJSON(){return{errno:this.errno,code:this.code,path:this.path,stack:this.stack,message:this.message,syscall:this.syscall}}bufferSize(){return 4+JSON.stringify(this.toJSON()).length}}var eS={exports:{}},xI;function kJ(){return xI||(xI=1,function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,d){this.fn=l,this.context=u,this.once=d||!1}function i(l,u,d,h,p){if(typeof d!="function")throw new TypeError("The listener must be a function");var g=new a(d,h||l,p),v=n?n+u:u;return l._events[v]?l._events[v].fn?l._events[v]=[l._events[v],g]:l._events[v].push(g):(l._events[v]=g,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},s.prototype.listeners=function(u){var d=n?n+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,g=h.length,v=new Array(g);p<g;p++)v[p]=h[p].fn;return v},s.prototype.listenerCount=function(u){var d=n?n+u:u,h=this._events[d];return h?h.fn?1:h.length:0},s.prototype.emit=function(u,d,h,p,g,v){var b=n?n+u:u;if(!this._events[b])return!1;var _=this._events[b],x=arguments.length,S,E;if(_.fn){switch(_.once&&this.removeListener(u,_.fn,void 0,!0),x){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,d),!0;case 3:return _.fn.call(_.context,d,h),!0;case 4:return _.fn.call(_.context,d,h,p),!0;case 5:return _.fn.call(_.context,d,h,p,g),!0;case 6:return _.fn.call(_.context,d,h,p,g,v),!0}for(E=1,S=new Array(x-1);E<x;E++)S[E-1]=arguments[E];_.fn.apply(_.context,S)}else{var C=_.length,k;for(E=0;E<C;E++)switch(_[E].once&&this.removeListener(u,_[E].fn,void 0,!0),x){case 1:_[E].fn.call(_[E].context);break;case 2:_[E].fn.call(_[E].context,d);break;case 3:_[E].fn.call(_[E].context,d,h);break;case 4:_[E].fn.call(_[E].context,d,h,p);break;default:if(!S)for(k=1,S=new Array(x-1);k<x;k++)S[k-1]=arguments[k];_[E].fn.apply(_[E].context,S)}}return!0},s.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},s.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},s.prototype.removeListener=function(u,d,h,p){var g=n?n+u:u;if(!this._events[g])return this;if(!d)return o(this,g),this;var v=this._events[g];if(v.fn)v.fn===d&&(!p||v.once)&&(!h||v.context===h)&&o(this,g);else{for(var b=0,_=[],x=v.length;b<x;b++)(v[b].fn!==d||p&&!v[b].once||h&&v[b].context!==h)&&_.push(v[b]);_.length?this._events[g]=_.length===1?_[0]:_:o(this,g)}return this},s.prototype.removeAllListeners=function(u){var d;return u?(d=n?n+u:u,this._events[d]&&o(this,d)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(eS)),eS.exports}var TJ=kJ();const JC=si(TJ);var O6;let AJ=class extends JC{constructor(n){super();pi(this,O6,"List");pi(this,"data",new Set);n&&this.push(...n)}toSet(){return new Set(this.data)}toArray(){return Array.from(this.data)}toJSON(){return JSON.stringify(Array.from(this.data))}toString(){return this.join(",")}_set(n,r,a=!1){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not set an element outside the bounds of the list");const i=Array.from(this.data);i.splice(n,+a,r),this.data=new Set(i),this.emit("update")}set(n,r){this._set(n,r,!0)}deleteAt(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not delete an element outside the bounds of the list");this.delete(Array.from(this.data).at(n))}insert(n,r=this.data.size){this._set(r,n,!1)}at(n){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not access an element outside the bounds of the list");return Array.from(this.data).at(n)}pop(){const n=Array.from(this.data).pop();return n!==void 0&&this.delete(n),n}push(...n){for(const r of n)this.add(r);return this.data.size}join(n){return Array.from(this.data).join(n)}splice(n,r,...a){if(Math.abs(n)>this.data.size)throw new ReferenceError("Can not splice elements outside the bounds of the list");const i=Array.from(this.data),o=i.splice(n,r,...a);return this.data=new Set(i),this.emit("update"),o}add(n){return this.data.add(n),this.emit("update"),this.emit("add",n),this}clear(){this.data.clear(),this.emit("update")}delete(n){const r=this.data.delete(n);return this.emit("update"),r}has(n){return this.data.has(n)}get size(){return this.data.size}entries(){return this.toArray().entries()}keys(){return this.toArray().keys()}values(){return this.data.values()}[(O6=Symbol.toStringTag,Symbol.iterator)](){return this.data[Symbol.iterator]()}};function SI(e=new Error){const t=setTimeout(()=>{throw e},5e3);return()=>clearTimeout(t)}function mr(e){throw e}const EI=Intl.NumberFormat("en",{notation:"compact"});EI.format.bind(EI);function Ad(e,...t){const n={};for(const r of t.flat())n[r]=e[r];return n}function NJ(e){try{return JSON.parse(e),!0}catch{return!1}}function A2(e=0,t=1){return Math.round(Math.random()*(t-e)+e)}function QC(e){return e.at(0).toUpperCase()+e.slice(1)}const RJ=new TextEncoder;function od(e){return RJ.encode(e)}const CI=new TextDecoder;function ek(e){if(!e)return"";if(e.buffer instanceof ArrayBuffer&&!e.buffer.resizable)return CI.decode(e);const t=new Uint8Array(e.byteLength);return t.set(e),CI.decode(t)}function u0(e,t){if(e.byteLength>=t)return e;if(ArrayBuffer.isView(e)){const r=u0(e.buffer,t);return new e.constructor(r,e.byteOffset,t)}const n=typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer;if(e.maxByteLength>t)return n?e.grow(t):e.resize(t),e;if(n){const r=new SharedArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}try{return e.transfer(t)}catch{const r=new ArrayBuffer(t);return new Uint8Array(r).set(new Uint8Array(e)),r}}function IJ(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var OJ={};let DJ="process"in globalThis&&"env"in globalThis.process&&OJ.U_DEBUG=="true";function d0(...e){DJ&&console.debug("[U]",...e)}const kI=["int8","uint8","int16","uint16","int32","uint32","int64","uint64","int128","uint128","float32","float64","float128"],jJ=[...kI,...kI.map(e=>QC(e)),"char"],tk=/^(u?int|float)(8|16|32|64|128)$/i;function b8(e){return e=="char"?"uint8":e.toLowerCase()}function nk(e){return tk.test(e.toString())}function N2(e){return e=="char"||tk.test(e.toString().toLowerCase())}function MJ(e){if(!N2(e))throw new TypeError("Not a valid primitive type: "+e)}const TI=BigInt("0xffffffffffffffff");Symbol.metadata??(Symbol.metadata=Symbol.for("Symbol.metadata"));Object.assign(Symbol,{size:Symbol("uSize"),serialize:Symbol("uSerialize"),deserialize:Symbol("uDeserialize")});function v8(e){return e.metadata??(e.metadata={}),e.metadata.structInit=[...e.metadata.structInit??[]],e.metadata.structInit}function PJ(e){return e!=null&&typeof e=="object"&&"struct"in e}function Mw(e){Symbol.metadata in e||Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Object.create(null)})}function qo(e){return typeof e=="function"&&Symbol.metadata in e&&PJ(e[Symbol.metadata])}function ag(e){return e!=null&&typeof e=="object"&&qo(e.constructor)}function w8(e){if(!ag(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct instance")}function rk(e){return ag(e)||qo(e)}function _8(e){if(!rk(e))throw new TypeError((typeof e=="function"?e.name:typeof e=="object"&&e?e.constructor.name:e)+" is not a struct")}function ak(e){return typeof e=="object"&&e!=null&&Symbol.size in e}function Br(e){if(e==null)return 0;if(Array.isArray(e)){let a=0;for(let i=0;i<e.length;i++)a+=Br(e[i]);return a}if(typeof e=="string")return MJ(e),+b8(e).match(tk)[2]/8;if(ak(e))return e[Symbol.size];_8(e);const t=qo(e)?e:e.constructor;Mw(t);const{struct:n}=t[Symbol.metadata];let r=n.staticSize;if(qo(e))return r;for(const a of n.members.values()){const i=e[a.name];if(ag(i)&&i.constructor[Symbol.metadata].struct.isDynamic){n.isUnion?r=Math.max(r,Br(i)):r+=Br(i);continue}if(typeof a.length!="string")continue;let o=0;for(let s=0;s<e[a.length];s++)o+=Br(rk(i[s])?i[s]:a.type);n.isUnion?r=Math.max(r,o):r+=o}return r}function FJ(e,t){var i;_8(e);const n=qo(e)?e:e.constructor;Mw(n);const{struct:r}=n[Symbol.metadata];if(qo(e)||!r.isDynamic)return((i=r.members.get(t))==null?void 0:i.staticOffset)??mr(new Error("Struct does not have member: "+t));let a=0;for(const o of r.members.values()){if(o.name==t)return a;const s=e[o.name];a+=Br(rk(s)?s:o.type)}throw new Error("Struct does not have member: "+t)}function LJ(e,t){return Math.ceil(e/t)*t}function Nd(e={}){return function(n,r){const a=new Map;let i=0,o=!1;for(const{name:s,type:l,length:u}of v8(r)){if(!N2(l)&&!qo(l))throw new TypeError("Not a valid type: "+l);if(typeof u=="string"){const p=a.get(u);if(!p)throw new Error(`"${u}" is undefined or declared after "${s}"`);if(!nk(p.type))throw new Error(`"${u}" is not a number and cannot be used to count "${s}"`)}let d=`${typeof l=="string"?l:l.name} ${s}`;u!==void 0&&(d+=`[${u}]`),a.set(s,{name:s,staticOffset:e.isUnion?0:i,type:N2(l)?b8(l):l,length:u,decl:d});const h=typeof u=="string"||qo(l)&&l[Symbol.metadata].struct.isDynamic?0:Br(l)*(u||1);o||(o=qo(l)?l[Symbol.metadata].struct.isDynamic:typeof u=="string"),i=e.isUnion?Math.max(i,h):i+h,i=LJ(i,e.align||1),d0("define",n.name+"."+s)}return r.metadata.struct={options:e,members:a,staticSize:i,isDynamic:o,isUnion:e.isUnion??!1},n}}function f0(e,t){return function(n,r){let a=r.name;if(typeof a=="symbol"&&(console.warn("Symbol used for struct member name will be coerced to string: "+a.toString()),a=a.toString()),!a)throw new ReferenceError("Invalid name for struct member");return v8(r).push({name:a,type:e,length:t}),n}}function x8(e,t){return t.length===void 0?-1:typeof t.length=="string"?e[t.length]:Number.isSafeInteger(t.length)&&t.length>=0?t.length:mr(new Error("Array lengths must be natural numbers"))}function qa(e){if(ak(e)&&typeof e[Symbol.serialize]=="function")return e[Symbol.serialize]();w8(e),Mw(e.constructor);const{options:t,members:n}=e.constructor[Symbol.metadata].struct,r=Br(e),a=new Uint8Array(r),i=new DataView(a.buffer);d0("serialize",e.constructor.name);let o=0,s=0;for(const l of n.values()){const u=x8(e,l);d0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name][d]:e[l.name];if(typeof h=="string"&&(h=h.charCodeAt(0)),o=s,s+=ag(h)?Br(h):Br(l.type),!nk(l.type)){a.set(h?qa(h):new Uint8Array(Br(l.type)),o);continue}const p=`set${QC(l.type)}`;if(p=="setInt64"){i.setBigInt64(o,BigInt(h),!t.bigEndian);continue}if(p=="setUint64"){i.setBigUint64(o,BigInt(h),!t.bigEndian);continue}if(p=="setInt128"){i.setBigUint64(o+(t.bigEndian?8:0),h&TI,!t.bigEndian),i.setBigInt64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setUint128"){i.setBigUint64(o+(t.bigEndian?8:0),h&TI,!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),h>>BigInt(64),!t.bigEndian);continue}if(p=="setFloat128"){i.setFloat64(o+(t.bigEndian?8:0),Number(h),!t.bigEndian),i.setBigUint64(o+(t.bigEndian?0:8),BigInt(0),!t.bigEndian);continue}i[p](o,Number(h),!t.bigEndian)}}return a}function Pw(e,t){const n=IJ(t);if(ak(e)&&typeof e[Symbol.deserialize]=="function")return e[Symbol.deserialize](n);w8(e),Mw(e.constructor);const{options:r,members:a}=e.constructor[Symbol.metadata].struct,i=new DataView(n.buffer,n.byteOffset,n.byteLength);d0("deserialize",e.constructor.name);let o=0,s=0;for(const l of a.values()){const u=x8(e,l);d0("	",l.decl);for(let d=0;d<Math.abs(u);d++){let h=u!=-1?e[l.name]:e;const p=u!=-1?d:l.name,g=h[p]===null||h[p]===void 0,v=g&&qo(l.type)&&l.type[Symbol.metadata].struct.isDynamic;if(o=s,!ag(h[p])&&!v&&(s+=Br(l.type)),typeof e[l.name]=="string"){e[l.name]=e[l.name].slice(0,d)+String.fromCharCode(i.getUint8(o))+e[l.name].slice(d+1);continue}if(!nk(l.type)){if(v&&qo(l.type))h[p]??(h[p]=new l.type);else if(g)continue;Pw(h[p],new Uint8Array(n.subarray(o))),s+=Br(h[p]);continue}u&&u!=-1&&(h||(h=[]));const b=`get${QC(l.type)}`;if(b=="getInt64"){h[p]=i.getBigInt64(o,!r.bigEndian);continue}if(b=="getUint64"){h[p]=i.getBigUint64(o,!r.bigEndian);continue}if(b=="getInt128"){h[p]=i.getBigInt64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getUint128"){h[p]=i.getBigUint64(o+(r.bigEndian?0:8),!r.bigEndian)<<BigInt(64)|i.getBigUint64(o+(r.bigEndian?8:0),!r.bigEndian);continue}if(b=="getFloat128"){h[p]=i.getFloat64(o+(r.bigEndian?8:0),!r.bigEndian);continue}h[p]=i[b](o,!r.bigEndian)}}}function $J(e){function t(n,r){return typeof n=="number"||typeof n=="string"?f0(e,n):f0(e)(n,r)}return t}const wn=Object.fromEntries(jJ.map(e=>[e,$J(e)]));function BJ(e){return{suid:e.uid,sgid:e.gid,euid:e.uid,egid:e.gid,groups:[],...e}}const rs={root:"/",pwd:"/",credentials:BJ({uid:0,gid:0}),descriptors:new Map};function S8(e,t){let n="",r=0,a=-1,i=0,o="\0";for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else{if(o=="/")break;o="/"}if(o=="/"){if(!(a===s-1||i===1))if(i===2){if(n.length<2||r!==2||n.at(-1)!=="."||n.at(-2)!=="."){if(n.length>2){const l=n.lastIndexOf("/");l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),a=s,i=0;continue}else if(n.length!==0){n="",r=0,a=s,i=0;continue}}t&&(n+=n.length>0?"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(a+1,s):n=e.slice(a+1,s),r=s-a-1;a=s,i=0}else o==="."&&i!==-1?++i:i=-1}return n}function Hl(...e){var t;let n="";for(const a of[...e.reverse(),(t=this===null||this===void 0?void 0:this.pwd)!==null&&t!==void 0?t:rs.pwd])if(a!=null&&a.length&&(n=`${a}/${n}`,a.startsWith("/")))break;const r=n.startsWith("/");return n=S8(n,!r),r?`/${n}`:n.length?n:"/"}function zJ(e){if(!e.length)return".";const t=e.startsWith("/"),n=e.endsWith("/");return e=S8(e,!t),e.length?(n&&(e+="/"),t?`/${e}`:e):t?"/":n?"./":"."}function lr(...e){if(!e.length)return".";const t=e.join("/");return t!=null&&t.length?zJ(t):"."}function E8(e,t){if(e===t||(e=Hl.call(this,e),t=Hl.call(this,t),e===t))return"";const n=1,r=e.length,a=r-n,i=1,o=t.length-i,s=a<o?a:o;let l=-1,u=0;for(;u<s;u++){const h=e[n+u];if(h!==t[i+u])break;h==="/"&&(l=u)}if(u===s)if(o>s){if(t[i+u]==="/")return t.slice(i+u+1);if(u===0)return t.slice(i+u)}else a>s&&(e[n+u]==="/"?l=u:u===0&&(l=0));let d="";for(u=n+l+1;u<=r;++u)(u===r||e[u]==="/")&&(d+=d.length===0?"..":"/..");return`${d}${t.slice(i+l)}`}function Xn(e){if(e.length===0)return".";const t=e[0]==="/";let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(e[a]==="/"){if(!r){n=a;break}}else r=!1;return n===-1?t?"/":".":t&&n===1?"//":e.slice(0,n)}function vh(e,t){let n=0,r=-1,a=!0;for(let i=e.length-1;i>=0;--i)if(e[i]==="/"){if(!a){n=i+1;break}}else r===-1&&(a=!1,r=i+1);return r===-1?"":e.slice(n,r)}function ks(e){const t=e.startsWith("/"),n={root:t?"/":"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;const r=t?1:0;let a=-1,i=0,o=-1,s=!0,l=e.length-1,u=0;for(;l>=r;--l){if(e[l]==="/"){if(!s){i=l+1;break}continue}o===-1&&(s=!1,o=l+1),e[l]==="."?a===-1?a=l:u!==1&&(u=1):a!==-1&&(u=-1)}if(o!==-1){const d=i===0&&t?1:i;a===-1||u===0||u===1&&a===o-1&&a===i+1?n.base=n.name=e.slice(d,o):(n.name=e.slice(d,a),n.base=e.slice(d,o),n.ext=e.slice(a,o))}return i>0?n.dir=e.slice(0,i-1):t&&(n.dir="/"),n}var yn;(function(e){e[e.EMERG=0]="EMERG",e[e.ALERT=1]="ALERT",e[e.CRIT=2]="CRIT",e[e.ERR=3]="ERR",e[e.WARN=4]="WARN",e[e.NOTICE=5]="NOTICE",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"})(yn||(yn={}));yn.EMERG+"",yn.ALERT+"",yn.CRIT+"",yn.ERR+"",yn.WARN+"",yn.NOTICE+"",yn.INFO+"",yn.DEBUG+"";const UJ=new AJ;function HJ(e,t){const n={level:e,message:t,timestamp:new Date,elapsedMs:performance.now()};UJ.add(n),XJ(n)}function qJ(e,t){var n,r;if(!(e instanceof Ue))return e.toString();const a=e.code+": "+e.message;if(!e.path)return a;const i=typeof t.fs=="string"?t.fs:(r=(n=t.fs)===null||n===void 0?void 0:n._mountPoint)!==null&&r!==void 0?r:"<unknown>";return a+": "+lr(i,e.path)}function bu(e){return function(t,n={}){return HJ(e,qJ(t,n)),t}}bu(yn.EMERG);const VJ=bu(yn.ALERT),Fw=bu(yn.CRIT),Ri=bu(yn.ERR),ti=bu(yn.WARN),ik=bu(yn.NOTICE),C8=bu(yn.INFO),Fm=bu(yn.DEBUG);function GJ(e,t){return`\x1B[${t}m${e}\x1B[0m`}function WJ(e,t){const n="["+(e.elapsedMs/1e3).toFixed(3).padStart(10)+"] ";switch(t){case"ansi":return[GJ(n,"2;37")];case"css":return["%c"+n,"opacity: 0.8; color: white;"];default:return[n]}}yn.EMERG+"",yn.ALERT+"",yn.CRIT+"",yn.ERR+"",yn.WARN+"",yn.NOTICE+"",yn.INFO+"",yn.DEBUG+"",yn.EMERG+"",yn.ALERT+"",yn.CRIT+"",yn.ERR+"",yn.WARN+"",yn.NOTICE+"",yn.INFO+"",yn.DEBUG+"";yn.EMERG+"",yn.ALERT+"",yn.CRIT+"",yn.ERR+"",yn.WARN+"",yn.NOTICE+"",yn.INFO+"",yn.DEBUG+"",yn.EMERG+"",yn.ALERT+"",yn.CRIT+"",yn.ERR+"",yn.WARN+"",yn.NOTICE+"",yn.INFO+"",yn.DEBUG+"";let KJ=e=>[...WJ(e),e.message];function ZJ(e){const t=KJ(e);return typeof t=="string"?[t]:Array.from(t)}let YJ=console.error;function XJ(e){e.level>JJ||YJ(...ZJ(e))}let JJ=yn.ALERT;function ok(e){return e!=null&&typeof e=="object"&&"create"in e&&typeof e.create=="function"}function QJ(e,t){return Object.defineProperty(t,"prototype",{value:void 0}),Object.defineProperty(t,"name",{value:e}),t}function eQ(e,t){if(typeof t!="object"||t===null)throw Ri(new Ue(st.EINVAL,"Invalid options"));for(const[n,r]of Object.entries(e.options)){const a=t==null?void 0:t[n];if(a==null){if(!r.required){Fm("Using default for option: "+n);continue}throw Ri(new Ue(st.EINVAL,"Missing required option: "+n))}const i=(u,d=a)=>{var h;return typeof u=="function"?Symbol.hasInstance in u&&u.prototype?a instanceof u:u(a):typeof a===u||((h=a==null?void 0:a.constructor)===null||h===void 0?void 0:h.name)===u};if(Array.isArray(r.type)?r.type.some(u=>i(u)):i(r.type))continue;const o=typeof a=="object"&&"constructor"in a?a.constructor.name:typeof a,s=u=>typeof u=="function"?u.name!="type"?u.name:u.toString():u,l=Array.isArray(r.type)?`one of ${r.type.map(s).join(", ")}`:s(r.type);throw Ri(new Ue(st.EINVAL,`Incorrect type for "${n}": ${o} (expected ${l})`))}}function k8(e){return e!=null&&typeof e=="object"&&"backend"in e&&ok(e.backend)}const sk=0,_a=4,Jr=2,qb=1,lk=1,tQ=2,nQ=4,T8=0,ei=1,Ml=2,Lw=64,$w=128,rQ=256,Bw=512,vd=1024,aQ=65536,iQ=262144,oQ=131072,zw=1052672,sQ=4096,lQ=32768,cQ=16384,uQ=2048,Er=61440,Rd=49152,Yl=40960,Vo=32768,Id=24576,fa=16384,Od=8192,Dd=4096,ig=2048,og=1024,dQ=512,fQ=448,A8=256,N8=128,R8=64,hQ=56,I8=32,O8=16,D8=8,pQ=7,j8=4,M8=2,P8=1,mQ=0,_i=4294967295,F8=Object.freeze(Object.defineProperty({__proto__:null,COPYFILE_EXCL:lk,COPYFILE_FICLONE:tQ,COPYFILE_FICLONE_FORCE:nQ,F_OK:sk,O_APPEND:vd,O_CREAT:Lw,O_DIRECT:cQ,O_DIRECTORY:aQ,O_DSYNC:sQ,O_EXCL:$w,O_NOATIME:iQ,O_NOCTTY:rQ,O_NOFOLLOW:oQ,O_NONBLOCK:uQ,O_RDONLY:T8,O_RDWR:Ml,O_SYMLINK:lQ,O_SYNC:zw,O_TRUNC:Bw,O_WRONLY:ei,R_OK:_a,S_IFBLK:Id,S_IFCHR:Od,S_IFDIR:fa,S_IFIFO:Dd,S_IFLNK:Yl,S_IFMT:Er,S_IFREG:Vo,S_IFSOCK:Rd,S_IRGRP:I8,S_IROTH:j8,S_IRUSR:A8,S_IRWXG:hQ,S_IRWXO:pQ,S_IRWXU:fQ,S_ISGID:og,S_ISUID:ig,S_ISVTX:dQ,S_IWGRP:O8,S_IWOTH:M8,S_IWUSR:N8,S_IXGRP:D8,S_IXOTH:P8,S_IXUSR:R8,UV_FS_O_FILEMAP:mQ,W_OK:Jr,X_OK:qb,size_max:_i},Symbol.toStringTag,{value:"Module"})),gb=BigInt(1e3);class L8{_convert(t){return this._isBigint?BigInt(t):Number(t)}get blocks(){return this._convert(Math.ceil(Number(this.size)/512))}set blocks(t){}get atime(){return new Date(Number(this.atimeMs))}set atime(t){this.atimeMs=this._convert(t.getTime())}get mtime(){return new Date(Number(this.mtimeMs))}set mtime(t){this.mtimeMs=this._convert(t.getTime())}get ctime(){return new Date(Number(this.ctimeMs))}set ctime(t){this.ctimeMs=this._convert(t.getTime())}get birthtime(){return new Date(Number(this.birthtimeMs))}set birthtime(t){this.birthtimeMs=this._convert(t.getTime())}constructor({atimeMs:t,mtimeMs:n,ctimeMs:r,birthtimeMs:a,uid:i,gid:o,size:s,mode:l,ino:u,...d}={}){this.dev=this._convert(0),this.ino=this._convert(0),this.rdev=this._convert(0),this.nlink=this._convert(1),this.blksize=this._convert(4096),this.uid=this._convert(0),this.gid=this._convert(0);const h=Date.now();this.atimeMs=this._convert(t??h),this.mtimeMs=this._convert(n??h),this.ctimeMs=this._convert(r??h),this.birthtimeMs=this._convert(a??h),this.uid=this._convert(i??0),this.gid=this._convert(o??0),this.size=this._convert(s??0),this.ino=this._convert(u??0),this.mode=this._convert(l??420&Vo),(this.mode&Er)==0&&(this.mode=this.mode|this._convert(Vo)),Object.assign(this,d)}isFile(){return(this.mode&Er)===Vo}isDirectory(){return(this.mode&Er)===fa}isSymbolicLink(){return(this.mode&Er)===Yl}isSocket(){return(this.mode&Er)===Rd}isBlockDevice(){return(this.mode&Er)===Id}isCharacterDevice(){return(this.mode&Er)===Od}isFIFO(){return(this.mode&Er)===Dd}toJSON(){return Ad(this,R2)}hasAccess(t,n){return dr(n,this._isBigint?new Xl(this):this,t)}get atimeNs(){return BigInt(this.atimeMs)*gb}get mtimeNs(){return BigInt(this.mtimeMs)*gb}get ctimeNs(){return BigInt(this.ctimeMs)*gb}get birthtimeNs(){return BigInt(this.birthtimeMs)*gb}}function $8(e,t,n){let r=!0;return!isNaN(t)&&t>=0&&t<_i?e.uid=t:r=!1,!isNaN(n)&&n>=0&&n<_i?e.gid=n:r=!1,r}class Xl extends L8{constructor(){super(...arguments),this._isBigint=!1}}class jd extends L8{constructor(){super(...arguments),this._isBigint=!0}}function gQ(e,t){return e.size==t.size&&+e.atime==+t.atime&&+e.mtime==+t.mtime&&+e.ctime==+t.ctime&&e.mode==t.mode}class yQ{constructor(){this.type=525687744115,this.bsize=4096,this.blocks=0,this.bfree=0,this.bavail=0,this.files=_i,this.ffree=_i}}class bQ{constructor(){this.type=BigInt("0x7a656e6673"),this.bsize=BigInt(4096),this.blocks=BigInt(0),this.bfree=BigInt(0),this.bavail=BigInt(0),this.files=BigInt(_i),this.ffree=BigInt(_i)}}var Ir=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:d.get,set:d.set}:d[l],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(d.get=h),(h=o(_.set))&&(d.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},gn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},ck=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};const Wi=0,vQ=1024;let AI=(()=>{var e,t;let n=[Nd()],r,a=[],i,o,s=[],l=[],u,d=[],h=[],p,g=[],v=[],b,_=[],x=[];return i=class{get key(){return this._key}set key(S){this._key=S,this.keySize=S.length}get value(){return this._value.subarray(0,this.valueSize)}set value(S){this._value=S,this.valueSize=S.length}constructor(S,E){this.keySize=gn(this,s,0),this.valueSize=(gn(this,l),gn(this,d,0)),this._key=(gn(this,h),gn(this,g,"")),this._value=(gn(this,v),gn(this,_,new Uint8Array(vQ))),gn(this,x),S&&(this.key=S),E&&(this.value=E)}},ck(i,"Attribute"),(()=>{const S=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;o=[(e=wn).uint32.bind(e)],u=[(t=wn).uint32.bind(t)],p=[wn.char("keySize")],b=[wn.uint8("valueSize")],Ir(null,null,o,{kind:"field",name:"keySize",static:!1,private:!1,access:{has:E=>"keySize"in E,get:E=>E.keySize,set:(E,C)=>{E.keySize=C}},metadata:S},s,l),Ir(null,null,u,{kind:"field",name:"valueSize",static:!1,private:!1,access:{has:E=>"valueSize"in E,get:E=>E.valueSize,set:(E,C)=>{E.valueSize=C}},metadata:S},d,h),Ir(null,null,p,{kind:"field",name:"_key",static:!1,private:!1,access:{has:E=>"_key"in E,get:E=>E._key,set:(E,C)=>{E._key=C}},metadata:S},g,v),Ir(null,null,b,{kind:"field",name:"_value",static:!1,private:!1,access:{has:E=>"_value"in E,get:E=>E._value,set:(E,C)=>{E._value=C}},metadata:S},_,x),Ir(null,r={value:i},n,{kind:"class",name:i.name,metadata:S},null,a),i=r.value,S&&Object.defineProperty(i,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:S}),gn(i,a)})(),i})(),lu=(()=>{var e;let t=[Nd()],n,r=[],a,i,o=[],s=[],l,u=[],d=[];return a=class{has(h){return this.data.some(p=>p.key==h)}get(h){return this.data.find(p=>p.key==h)}set(h,p){const g=this.get(h);if(g){g.value=p;return}this.data.push(new AI(h,p)),this.size++}remove(h){const p=this.data.findIndex(g=>g.key==h);return p===-1?!1:(this.data.splice(p,1),this.size--,!0)}keys(){return this.data.map(h=>h.key)}values(){return this.data.map(h=>h.value)}entries(){return this.data.map(h=>[h.key,h.value])}constructor(){this.size=gn(this,o,0),this.data=(gn(this,s),gn(this,u,[])),gn(this,d)}},ck(a,"Attributes"),(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;i=[(e=wn).uint32.bind(e)],l=[f0(AI,"size")],Ir(null,null,i,{kind:"field",name:"size",static:!1,private:!1,access:{has:p=>"size"in p,get:p=>p.size,set:(p,g)=>{p.size=g}},metadata:h},o,s),Ir(null,null,l,{kind:"field",name:"data",static:!1,private:!1,access:{has:p=>"data"in p,get:p=>p.data,set:(p,g)=>{p.data=g}},metadata:h},u,d),Ir(null,n={value:a},t,{kind:"class",name:a.name,metadata:h},null,r),a=n.value,h&&Object.defineProperty(a,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h}),gn(a,r)})(),a})();const R2=["ino","data","size","mode","flags","nlink","uid","gid","atimeMs","birthtimeMs","mtimeMs","ctimeMs","version"],wQ=4;var Ii;(function(e){e[e.SecureRm=1]="SecureRm",e[e.Undelete=2]="Undelete",e[e.Compress=4]="Compress",e[e.Sync=8]="Sync",e[e.Immutable=16]="Immutable",e[e.Append=32]="Append",e[e.NoDump=64]="NoDump",e[e.NoAtime=128]="NoAtime",e[e.Dirty=256]="Dirty",e[e.CompressBlk=512]="CompressBlk",e[e.NoCompress=1024]="NoCompress",e[e.Encrypt=2048]="Encrypt",e[e.Btree=4096]="Btree",e[e.Index=4096]="Index",e[e.IMagic=8192]="IMagic",e[e.JournalData=16384]="JournalData",e[e.NoTail=32768]="NoTail",e[e.DirSync=65536]="DirSync",e[e.TopDir=131072]="TopDir",e[e.HugeFile=262144]="HugeFile",e[e.Extent=524288]="Extent",e[e.Verity=1048576]="Verity",e[e.EaInode=2097152]="EaInode",e[e.EofBlocks=4194304]="EofBlocks",e[e.NoCow=8388608]="NoCow",e[e.Dax=33554432]="Dax",e[e.InlineData=268435456]="InlineData",e[e.ProjInherit=536870912]="ProjInherit",e[e.CaseFold=1073741824]="CaseFold",e[e.Reserved=2147483648]="Reserved"})(Ii||(Ii={}));let da=(()=>{var e,t,n,r,a,i,o,s,l,u,d,h,p,g,v,b;let _=[Nd()],x,S=[],E,C,k=[],R=[],D,O=[],L=[],B,Y=[],F=[],Z,q=[],ne=[],ae,re=[],ee=[],ie,U=[],Q=[],X,de=[],be=[],_e,Pe=[],Ne=[],Re,Ce=[],Fe=[],Qe,Le=[],Ie=[],V,me=[],Te=[],le,oe=[],J=[],xe,Me=[],Ee=[],We,kt=[],at=[],_t,jt=[],Dt=[],Gt,ye=[],I=[],G,fe=[],Oe=[],ve,ke=[],ce=[];var ft=E=class{constructor(vt){if(this.data=gn(this,k,A2(0,_i)),this.__data_old=(gn(this,R),gn(this,O,0)),this.size=(gn(this,L),gn(this,Y,0)),this.mode=(gn(this,F),gn(this,q,0)),this.nlink=(gn(this,ne),gn(this,re,1)),this.uid=(gn(this,ee),gn(this,U,0)),this.gid=(gn(this,Q),gn(this,de,0)),this.atimeMs=(gn(this,be),gn(this,Pe,Date.now())),this.birthtimeMs=(gn(this,Ne),gn(this,Ce,Date.now())),this.mtimeMs=(gn(this,Fe),gn(this,Le,Date.now())),this.ctimeMs=(gn(this,Ie),gn(this,me,Date.now())),this.ino=(gn(this,Te),gn(this,oe,A2(0,_i))),this.__ino_old=(gn(this,J),gn(this,Me,0)),this.flags=(gn(this,Ee),gn(this,kt,0)),this.__after_flags=(gn(this,at),gn(this,jt,0)),this.version=(gn(this,Dt),gn(this,ye,0)),this.__padding=(gn(this,I),gn(this,fe,[])),this.attributes=(gn(this,Oe),gn(this,ke,new lu)),gn(this,ce),!!vt){if(!("byteLength"in vt)){Object.assign(this,vt);return}if(vt.byteLength<Br(ft))throw Fw(new Ue(st.EIO,"Buffer is too small to create an inode"));Pw(this,vt)}}toString(){return`<Inode ${this.ino}>`}toJSON(){return{...Ad(this,R2),attributes:this.attributes}}toStats(){return new Xl(this)}update(vt){if(!vt)return!1;let M=!1;for(const Be of R2)vt[Be]!==void 0&&(Be=="ino"||Be=="data"||this[Be]!==vt[Be]&&(Be=="atimeMs"&&this.flags&Ii.NoAtime||(this[Be]=vt[Be],M=!0)));return vt.attributes&&(this.attributes=vt.attributes,M=!0),M&&(this.ctimeMs=Date.now()),M}};return ck(E,"Inode"),(()=>{const vt=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;C=[(e=wn).uint32.bind(e)],D=[(t=wn).uint32.bind(t)],B=[(n=wn).uint32.bind(n)],Z=[(r=wn).uint16.bind(r)],ae=[(a=wn).uint32.bind(a)],ie=[(i=wn).uint32.bind(i)],X=[(o=wn).uint32.bind(o)],_e=[(s=wn).float64.bind(s)],Re=[(l=wn).float64.bind(l)],Qe=[(u=wn).float64.bind(u)],V=[(d=wn).float64.bind(d)],le=[(h=wn).uint32.bind(h)],xe=[(p=wn).uint32.bind(p)],We=[(g=wn).uint32.bind(g)],_t=[(v=wn).uint16.bind(v)],Gt=[(b=wn).uint32.bind(b)],G=[wn.uint8(48)],ve=[f0(lu)],Ir(null,null,C,{kind:"field",name:"data",static:!1,private:!1,access:{has:M=>"data"in M,get:M=>M.data,set:(M,Be)=>{M.data=Be}},metadata:vt},k,R),Ir(null,null,D,{kind:"field",name:"__data_old",static:!1,private:!1,access:{has:M=>"__data_old"in M,get:M=>M.__data_old,set:(M,Be)=>{M.__data_old=Be}},metadata:vt},O,L),Ir(null,null,B,{kind:"field",name:"size",static:!1,private:!1,access:{has:M=>"size"in M,get:M=>M.size,set:(M,Be)=>{M.size=Be}},metadata:vt},Y,F),Ir(null,null,Z,{kind:"field",name:"mode",static:!1,private:!1,access:{has:M=>"mode"in M,get:M=>M.mode,set:(M,Be)=>{M.mode=Be}},metadata:vt},q,ne),Ir(null,null,ae,{kind:"field",name:"nlink",static:!1,private:!1,access:{has:M=>"nlink"in M,get:M=>M.nlink,set:(M,Be)=>{M.nlink=Be}},metadata:vt},re,ee),Ir(null,null,ie,{kind:"field",name:"uid",static:!1,private:!1,access:{has:M=>"uid"in M,get:M=>M.uid,set:(M,Be)=>{M.uid=Be}},metadata:vt},U,Q),Ir(null,null,X,{kind:"field",name:"gid",static:!1,private:!1,access:{has:M=>"gid"in M,get:M=>M.gid,set:(M,Be)=>{M.gid=Be}},metadata:vt},de,be),Ir(null,null,_e,{kind:"field",name:"atimeMs",static:!1,private:!1,access:{has:M=>"atimeMs"in M,get:M=>M.atimeMs,set:(M,Be)=>{M.atimeMs=Be}},metadata:vt},Pe,Ne),Ir(null,null,Re,{kind:"field",name:"birthtimeMs",static:!1,private:!1,access:{has:M=>"birthtimeMs"in M,get:M=>M.birthtimeMs,set:(M,Be)=>{M.birthtimeMs=Be}},metadata:vt},Ce,Fe),Ir(null,null,Qe,{kind:"field",name:"mtimeMs",static:!1,private:!1,access:{has:M=>"mtimeMs"in M,get:M=>M.mtimeMs,set:(M,Be)=>{M.mtimeMs=Be}},metadata:vt},Le,Ie),Ir(null,null,V,{kind:"field",name:"ctimeMs",static:!1,private:!1,access:{has:M=>"ctimeMs"in M,get:M=>M.ctimeMs,set:(M,Be)=>{M.ctimeMs=Be}},metadata:vt},me,Te),Ir(null,null,le,{kind:"field",name:"ino",static:!1,private:!1,access:{has:M=>"ino"in M,get:M=>M.ino,set:(M,Be)=>{M.ino=Be}},metadata:vt},oe,J),Ir(null,null,xe,{kind:"field",name:"__ino_old",static:!1,private:!1,access:{has:M=>"__ino_old"in M,get:M=>M.__ino_old,set:(M,Be)=>{M.__ino_old=Be}},metadata:vt},Me,Ee),Ir(null,null,We,{kind:"field",name:"flags",static:!1,private:!1,access:{has:M=>"flags"in M,get:M=>M.flags,set:(M,Be)=>{M.flags=Be}},metadata:vt},kt,at),Ir(null,null,_t,{kind:"field",name:"__after_flags",static:!1,private:!1,access:{has:M=>"__after_flags"in M,get:M=>M.__after_flags,set:(M,Be)=>{M.__after_flags=Be}},metadata:vt},jt,Dt),Ir(null,null,Gt,{kind:"field",name:"version",static:!1,private:!1,access:{has:M=>"version"in M,get:M=>M.version,set:(M,Be)=>{M.version=Be}},metadata:vt},ye,I),Ir(null,null,G,{kind:"field",name:"__padding",static:!1,private:!1,access:{has:M=>"__padding"in M,get:M=>M.__padding,set:(M,Be)=>{M.__padding=Be}},metadata:vt},fe,Oe),Ir(null,null,ve,{kind:"field",name:"attributes",static:!1,private:!1,access:{has:M=>"attributes"in M,get:M=>M.attributes,set:(M,Be)=>{M.attributes=Be}},metadata:vt},ke,ce),Ir(null,x={value:E},_,{kind:"class",name:E.name,metadata:vt},null,S),ft=E=x.value,vt&&Object.defineProperty(E,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:vt}),gn(E,S)})(),ft=E})();function _Q(e){return(e.mode&Er)===Vo}function Xo(e){return(e.mode&Er)===fa}function wh(e){return(e.mode&Er)===Yl}function xQ(e){return(e.mode&Er)===Rd}function h0(e){return(e.mode&Er)===Id}function p0(e){return(e.mode&Er)===Od}function SQ(e){return(e.mode&Er)===Dd}function dr(e,t,n){const r=(e==null?void 0:e.credentials)||rs.credentials;if(wh(t)||r.euid===0||r.egid===0)return!0;let a=0;return r.uid===t.uid&&(t.mode&A8&&(a|=_a),t.mode&N8&&(a|=Jr),t.mode&R8&&(a|=qb)),(r.gid===t.gid||r.groups.includes(Number(t.gid)))&&(t.mode&I8&&(a|=_a),t.mode&O8&&(a|=Jr),t.mode&D8&&(a|=qb)),t.mode&j8&&(a|=_a),t.mode&M8&&(a|=Jr),t.mode&P8&&(a|=qb),(a&n)===n}const NI=1;class Tv extends Map{constructor(){super(...arguments),this.maxSize=_i}toJSON(){return{version:NI,maxSize:this.maxSize,entries:Object.fromEntries([...this].map(([t,n])=>[t,n.toJSON()]))}}toString(){return JSON.stringify(this.toJSON())}get byteSize(){let t=this.size*Br(da);for(const n of this.values())t+=n.size;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.byteSize}}pathOf(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return n}getByID(t){var n;return(n=this.entryByID(t))===null||n===void 0?void 0:n.inode}entryByID(t){for(const[n,r]of this)if(r.ino==t||r.data==t)return{path:n,inode:r}}directoryEntries(t){const n=this.get(t);if(!n)throw Ue.With("ENOENT",t);if((n.mode&Er)!=fa)throw Ue.With("ENOTDIR",t);const r={};for(const a of this.keys())Xn(a)==t&&a!=t&&(r[vh(a)]=this.get(a).ino);return r}_alloc(){return Math.max(...[...this.values()].flatMap(t=>[t.ino,t.data]))+1}directories(){const t=new Map;for(const[n,r]of this){if((r.mode&Er)!=fa)continue;const a={};for(const i of this.keys())Xn(i)==n&&i!=n&&(a[vh(i)]=this.get(i).ino);t.set(n,a)}return t}fromJSON(t){var n;if(t.version!=NI)throw new Ue(st.EINVAL,"Index version mismatch");this.clear();for(const[r,a]of Object.entries(t.entries))(n=a.data)!==null&&n!==void 0||(a.data=A2(1,_i)),r=="/"&&(a.ino=0),this.set(r,new da(a));return this}static parse(t){if(!NJ(t))throw new Ue(st.EINVAL,"Invalid JSON");const n=JSON.parse(t),r=new Tv;return r.fromJSON(n),r}}const tS=4096;let uk=class I2{get uuid(){return this._uuid}constructor(t,n){this.type=t,this.name=n,this._uuid=crypto.randomUUID(),this.attributes=new Map,this.streamRead===I2.prototype.streamRead&&this.attributes.set("default_stream_read"),this.streamWrite===I2.prototype.streamWrite&&this.attributes.set("default_stream_write")}toString(){var t;return`${this.name} ${(t=this.label)!==null&&t!==void 0?t:""} (${this._mountPoint?"mounted on "+this._mountPoint:"unmounted"})`}usage(){return{totalSpace:0,freeSpace:0}}async ready(){}async exists(t){try{return await this.stat(t),!0}catch(n){return n.code!="ENOENT"}}existsSync(t){try{return this.statSync(t),!0}catch(n){return n.code!="ENOENT"}}streamRead(t,n){return new ReadableStream({start:async r=>{const{size:a}=await this.stat(t),{start:i=0,end:o=a}=n;for(let s=i;s<o;s+=tS){const l=s+tS>o?o-s:tS,u=new Uint8Array(l);await this.read(t,u,s,s+l).catch(r.error.bind(r)),r.enqueue(u)}r.close()},type:"bytes"})}streamWrite(t,n){var r;let a=(r=n.start)!==null&&r!==void 0?r:0;return new WritableStream({write:async(i,o)=>{let s=!1;const l=d=>{s=!0,o.error(d)},{size:u}=await this.stat(t);await this.write(t,i,a).catch(l),!s&&(a+=i.byteLength,await this.touch(t,{mtimeMs:Date.now(),size:Math.max(u,a)}).catch(l))}})}};function mi(e){return JSON.parse(ek(e),(t,n)=>t==""?n:typeof n=="string"?BigInt(n).toString(16).slice(0,Math.min(n.length,8)):n)}function po(e){return od(JSON.stringify(e))}function vu(e,t){if(typeof e=="number")return e;if(typeof e=="string"){const n=parseInt(e,8);if(!isNaN(n))return n}if(typeof t=="number")return t;throw new Ue(st.EINVAL,"Invalid mode: "+(e==null?void 0:e.toString()))}function Av(e){if(e instanceof Date)return e.getTime();try{return Number(e)}catch{throw new Ue(st.EINVAL,"Invalid time.")}}function fn(e,t=!1){if(e instanceof URL){if(e.protocol!="file:")throw new Ue(st.EINVAL,"URLs must use the file: protocol");e=e.pathname}if(e=e.toString(),e.startsWith("file://")&&(e=e.slice(7)),e.includes("\0"))throw new Ue(st.EINVAL,"Path can not contain null character");if(e.length==0)throw new Ue(st.EINVAL,"Path can not be empty");return e=e.replaceAll(/[/\\]+/g,"/"),t?e:Hl(e)}function Pl(e,t="utf8",n,r=0){return typeof e!="object"||e===null?{encoding:typeof e=="string"?e:t??null,flag:n,mode:r}:{encoding:typeof(e==null?void 0:e.encoding)=="string"?e.encoding:t??null,flag:typeof(e==null?void 0:e.flag)=="string"?e.flag:n,mode:vu("mode"in e?e==null?void 0:e.mode:null,r)}}class EQ{constructor(t,n,r,a){pi(this,"id");pi(this,"_size");pi(this,"options");pi(this,"regions",[]);this.id=t,this._size=n,this.options=r,r.sparse??(r.sparse=!0),r.sparse||this.regions.push({offset:0,data:new Uint8Array(n),ranges:[]}),a==null||a.set(t,this)}get size(){return this._size}set size(t){if(t>=this._size){this._size=t;return}this._size=t;for(let n=this.regions.length-1;n>=0;n--){const r=this.regions[n];if(r.offset>=t){this.regions.splice(n,1);continue}const a=t-r.offset;r.data.byteLength>a&&(r.data=r.data.subarray(0,a)),r.ranges=r.ranges.filter(i=>i.start<t).map(i=>i.end>t?{start:i.start,end:t}:i)}}collect(){if(!this.options.sparse)return;const{regionGapThreshold:t=4095}=this.options;for(let n=0;n<this.regions.length-1;){const r=this.regions[n],a=this.regions[n+1];if(a.offset-(r.offset+r.data.byteLength)>t){n++;continue}r.ranges.push(...a.ranges),r.ranges.sort((i,o)=>i.start-o.start),r.ranges=r.ranges.reduce((i,o)=>(!i.length||i.at(-1).end<o.start?i.push(o):i.at(-1).end=Math.max(i.at(-1).end,o.end),i),[]),r.data=u0(r.data,a.offset+a.data.byteLength),r.data.set(a.data,a.offset-r.offset),this.regions.splice(n+1,1)}}missing(t,n){const r=[];for(const a of this.regions){if(a.offset>=n)break;for(const i of a.ranges)if(!(i.end<=t)&&(i.start>=n||(i.start>t&&r.push({start:t,end:Math.min(i.start,n)}),i.end>t&&(t=Math.max(t,i.end)),t>=n)))break;if(t>=n)break}return t<n&&r.push({start:t,end:n}),r}cached(t,n){const r=[];for(const i of this.regions){if(i.offset>=n)break;for(const o of i.ranges)if(!(o.end<=t)){if(o.start>=n)break;r.push({start:Math.max(t,o.start),end:Math.min(n,o.end)})}}r.sort((i,o)=>i.start-o.start);const a=[];for(const i of r){const o=a.at(-1);o&&i.start<=o.end?o.end=Math.max(o.end,i.end):a.push(i)}return a}regionAt(t){if(this.regions.length)for(const n of this.regions){if(n.offset>t)break;if(t>=n.offset&&t<n.offset+n.data.byteLength)return n}}add(t,n){const r=n+t.byteLength,a=this.regionAt(n);if(a)return a.data=u0(a.data,r),a.data.set(t,n),a.ranges.push({start:n,end:r}),a.ranges.sort((s,l)=>s.start-l.start),this.collect(),this;const i={data:t,offset:n,ranges:[{start:n,end:r}]},o=this.regions.findIndex(s=>s.offset>n);return o==-1?this.regions.push(i):this.regions.splice(o,0,i),this.collect(),this}}var nS,rS,aS;(nS=Promise.withResolvers)!==null&&nS!==void 0||(Promise.withResolvers=(ti("Using a polyfill of Promise.withResolvers"),function(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}));(rS=Symbol.dispose)!==null&&rS!==void 0||(Symbol.dispose=(ti("Using a polyfill of Symbol.dispose"),Symbol("Symbol.dispose")));(aS=Symbol.asyncDispose)!==null&&aS!==void 0||(Symbol.asyncDispose=(ti("Using a polyfill of Symbol.asyncDispose"),Symbol("Symbol.asyncDispose")));class B8{constructor(t){this.store=t}}class CQ extends B8{async get(t,n,r){return this.getSync(t,n,r)}async set(t,n,r){return this.setSync(t,n,r)}async remove(t){return this.removeSync(t)}}class O2 extends B8{constructor(){super(...arguments),this.asyncDone=Promise.resolve()}async(t){this.asyncDone=this.asyncDone.then(()=>t)}_cached(t,n){var r,a;(r=(a=this.store).cache)!==null&&r!==void 0||(a.cache=new Map);const i=this.store.cache.get(t);return i?(n&&(i.size=n.size),i):n?new EQ(t,n.size,{},this.store.cache):void 0}getSync(t,n,r){var a;const i=this._cached(t);if(!i)return;r??(r=i.size);const o=i.missing(n,r);for(const{start:l,end:u}of o)this.async(this.get(t,l,u));if(o.length)throw Ri(Ue.With("EAGAIN",(a=this.store._fs)===null||a===void 0?void 0:a._path(t)));const s=i.regionAt(n);if(!s){ti("Missing cache region for "+t);return}return s.data.subarray(n-s.offset,r-s.offset)}setSync(t,n,r){this.async(this.set(t,n,r))}removeSync(t){var n;this.async(this.remove(t)),(n=this.store.cache)===null||n===void 0||n.delete(t)}}class kQ{flag(t){var n,r;return(r=(n=this.raw.store.flags)===null||n===void 0?void 0:n.includes(t))!==null&&r!==void 0?r:!1}constructor(t,n){this.raw=t,this.fs=n,this.done=!1,this.originalData=new Map,this.modifiedKeys=new Set}keys(){return this.raw.keys()}async get(t,n=0,r){const a=await this.raw.get(t,n,r);return this.stash(t),a}getSync(t,n=0,r){const a=this.raw.getSync(t,n,r);return this.stash(t),a}async set(t,n,r=0){await this.markModified(t,r,n.byteLength),await this.raw.set(t,n,r)}setSync(t,n,r=0){this.markModifiedSync(t,r,n.byteLength),this.raw.setSync(t,n,r)}async remove(t){await this.markModified(t,0,void 0),await this.raw.remove(t)}removeSync(t){this.markModifiedSync(t,0,void 0),this.raw.removeSync(t)}commit(){return this.done=!0,Promise.resolve()}commitSync(){this.done=!0}async abort(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){await this.raw.remove(t),this.fs._remove(t);continue}for(const r of n.reverse())await this.raw.set(t,r.data,r.offset)}this.done=!0}}abortSync(){if(!this.done){for(const[t,n]of this.originalData)if(this.modifiedKeys.has(t)){if(n.some(r=>!r.data)){this.raw.removeSync(t),this.fs._remove(t);continue}for(const r of n.reverse())this.raw.setSync(t,r.data,r.offset)}this.done=!0}}async[Symbol.asyncDispose](){this.done||await this.abort()}[Symbol.dispose](){this.done||this.abortSync()}stash(t,n,r=0){this.originalData.has(t)||this.originalData.set(t,[]),this.originalData.get(t).push({data:n,offset:r})}async markModified(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,await this.raw.get(t,n,a),n)}catch(i){if(!(this.raw instanceof O2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const l of s.cached(n,a??n))this.stash(t,await this.raw.get(t,l.start,l.end),l.start)}}markModifiedSync(t,n,r){this.modifiedKeys.add(t);const a=r?n+r:void 0;try{this.stash(t,this.raw.getSync(t,n,a),n)}catch(i){if(!(this.raw instanceof O2))throw i;const s=this.raw._cached(t);if(!s)throw i;for(const l of s.cached(n,a??n))this.stash(t,this.raw.getSync(t,l.start,l.end),l.start)}}}var Nr=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},Rr=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class z8 extends uk{_path(t){var n;const[r]=(n=this._paths.get(t))!==null&&n!==void 0?n:[];return r}_add(t,n){this._paths.has(t)||this._paths.set(t,new Set),this._paths.get(t).add(n),this._ids.set(n,t)}_remove(t){var n;for(const r of(n=this._paths.get(t))!==null&&n!==void 0?n:[])this._ids.delete(r);this._paths.delete(t)}_move(t,n){const r=[];for(const[a,i]of this._ids){const o=E8(t,a);if(o.startsWith(".."))continue;let s=lr(n,o);s.endsWith("/")&&(s=s.slice(0,-1)),r.push({oldKey:a,newKey:s,ino:i})}for(const{oldKey:a,newKey:i,ino:o}of r){this._ids.delete(a),this._ids.set(i,o);const s=this._paths.get(o);if(!s){ti("Missing paths in table for ino "+o);continue}s.delete(a),s.add(i)}}async ready(){this._initialized||(this.checkRootSync(),await this.checkRoot(),await this._populate(),this._initialized=!0)}constructor(t){var n,r,a;super((n=t.type)!==null&&n!==void 0?n:1802921587,t.name),this.store=t,this._ids=new Map([["/",0]]),this._paths=new Map([[0,new Set("/")]]),this._initialized=!1,t._fs=this,this._uuid=(r=t.uuid)!==null&&r!==void 0?r:this.uuid,Fm(this.name+": supports features: "+((a=this.store.flags)===null||a===void 0?void 0:a.join(", ")))}usage(){var t,n;return((n=(t=this.store).usage)===null||n===void 0?void 0:n.call(t))||{totalSpace:0,freeSpace:0}}async loadIndex(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!0),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),await r.set(o.ino,qa(o)),a.has(i)&&await r.set(o.data,po(a.get(i)));await r.commit()}catch(r){n.error=r,n.hasError=!0}finally{const r=Rr(n);r&&await r}}loadIndexSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!1),a=t.directories();for(const[i,o]of t)this._add(o.ino,i),r.setSync(o.ino,qa(o)),a.has(i)&&r.setSync(o.data,po(a.get(i)));r.commitSync()}catch(r){n.error=r,n.hasError=!0}finally{Rr(n)}}async createIndex(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Tv,a=Nr(n,this.transaction(),!0),i=[["/",0]],o=SI(Ue.With("EDEADLK"));for(;i.length;){const[s,l]=i.shift(),u=new da(await a.get(l));if(r.set(s,u),u.mode&fa){const d=mi((t=await a.get(u.data))!==null&&t!==void 0?t:mr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(d))i.push([lr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{const r=Rr(n);r&&await r}}createIndexSync(){var t;const n={stack:[],error:void 0,hasError:!1};try{const r=new Tv,a=Nr(n,this.transaction(),!1),i=[["/",0]],o=SI(Ue.With("EDEADLK"));for(;i.length;){const[s,l]=i.shift(),u=new da(a.getSync(l));if(r.set(s,u),u.mode&fa){const d=mi((t=a.getSync(u.data))!==null&&t!==void 0?t:mr(Ue.With("ENODATA",s)));for(const[h,p]of Object.entries(d))i.push([lr(s,h),p])}}return o(),r}catch(r){n.error=r,n.hasError=!0}finally{Rr(n)}}async rename(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!0),l=ks(t),u=ks(n),d=await this.findInode(s,l.dir,"rename"),h=mi((r=await s.get(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&Ri(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,l.dir);const g=u.dir==l.dir,v=g?d:await this.findInode(s,u.dir,"rename"),b=g?h:mi((a=await s.get(v.data))!==null&&a!==void 0?a:mr(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const _=new da((i=await s.get(b[u.base]))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");await s.remove(_.data),await s.remove(b[u.base])}b[u.base]=p,await s.set(d.data,po(h)),await s.set(v.data,po(b)),await s.commit(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{const s=Rr(o);s&&await s}}renameSync(t,n){var r,a,i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!1),l=ks(t),u=ks(n),d=this.findInodeSync(s,l.dir,"rename"),h=mi((r=s.getSync(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENODATA",l.dir,"rename")));if(!h[l.base])throw Ue.With("ENOENT",t,"rename");const p=h[l.base];if(p!=this._ids.get(t)&&Ri(`Ino mismatch while renaming ${t} to ${n}`),delete h[l.base],(u.dir+"/").startsWith(t+"/"))throw new Ue(st.EBUSY,l.dir);const g=u.dir===l.dir,v=g?d:this.findInodeSync(s,u.dir,"rename"),b=g?h:mi((a=s.getSync(v.data))!==null&&a!==void 0?a:mr(Ue.With("ENODATA",u.dir,"rename")));if(b[u.base]){const _=new da((i=s.getSync(b[u.base]))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",n,"rename")));if(!_.toStats().isFile())throw Ue.With("EPERM",n,"rename");s.removeSync(_.data),s.removeSync(b[u.base])}b[u.base]=p,s.setSync(d.data,po(h)),s.setSync(v.data,po(b)),s.commitSync(),this._move(t,n)}catch(s){o.error=s,o.hasError=!0}finally{Rr(o)}}async stat(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!0);return await this.findInode(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{const r=Rr(n);r&&await r}}statSync(t){const n={stack:[],error:void 0,hasError:!1};try{const r=Nr(n,this.transaction(),!1);return this.findInodeSync(r,t,"stat")}catch(r){n.error=r,n.hasError=!0}finally{Rr(n)}}async touch(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!0),i=await this.findInode(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,qa(i))),await a.commit()}catch(a){r.error=a,r.hasError=!0}finally{const a=Rr(r);a&&await a}}touchSync(t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"touch");i.update(n)&&(this._add(i.ino,t),a.setSync(i.ino,qa(i))),a.commitSync()}catch(a){r.error=a,r.hasError=!0}finally{Rr(r)}}async createFile(t,n){return n.mode|=Vo,await this.commitNew(t,n,new Uint8Array,"createFile")}createFileSync(t,n){return n.mode|=Vo,this.commitNewSync(t,n,new Uint8Array,"createFile")}async unlink(t){return this.remove(t,!1)}unlinkSync(t){this.removeSync(t,!1)}async rmdir(t){if((await this.readdir(t)).length)throw Ue.With("ENOTEMPTY",t,"rmdir");await this.remove(t,!0)}rmdirSync(t){if(this.readdirSync(t).length)throw Ue.With("ENOTEMPTY",t,"rmdir");this.removeSync(t,!0)}async mkdir(t,n){return n.mode|=fa,await this.commitNew(t,n,od("{}"),"mkdir")}mkdirSync(t,n){return n.mode|=fa,this.commitNewSync(t,n,od("{}"),"mkdir")}async readdir(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!0),i=await this.findInode(a,t,"readdir");return Object.keys(mi((n=await a.get(i.data))!==null&&n!==void 0?n:mr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{const a=Rr(r);a&&await a}}readdirSync(t){var n;const r={stack:[],error:void 0,hasError:!1};try{const a=Nr(r,this.transaction(),!1),i=this.findInodeSync(a,t,"readdir");return Object.keys(mi((n=a.getSync(i.data))!==null&&n!==void 0?n:mr(Ue.With("ENOENT",t,"readdir"))))}catch(a){r.error=a,r.hasError=!0}finally{Rr(r)}}async sync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!0),o=await this.findInode(i,t,"sync");n&&await i.set(o.data,n),o.update(r)&&(this._add(o.ino,t),await i.set(o.ino,qa(o))),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Rr(a);i&&await i}}syncSync(t,n,r){const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!1),o=this.findInodeSync(i,t,"sync");n&&i.setSync(o.data,n),o.update(r)&&(this._add(o.ino,t),i.setSync(o.ino,qa(o))),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Rr(a)}}async link(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!0),o=Xn(n),s=await this.findInode(i,o,"link"),l=mi((r=await i.get(s.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",o,"link"))),u=await this.findInode(i,t,"link");u.nlink++,l[vh(n)]=u.ino,this._add(u.ino,n),await i.set(u.ino,qa(u)),await i.set(s.data,po(l)),await i.commit()}catch(i){a.error=i,a.hasError=!0}finally{const i=Rr(a);i&&await i}}linkSync(t,n){var r;const a={stack:[],error:void 0,hasError:!1};try{const i=Nr(a,this.transaction(),!1),o=Xn(n),s=this.findInodeSync(i,o,"link"),l=mi((r=i.getSync(s.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",o,"link"))),u=this.findInodeSync(i,t,"link");u.nlink++,l[vh(n)]=u.ino,this._add(u.ino,n),i.setSync(u.ino,qa(u)),i.setSync(s.data,po(l)),i.commitSync()}catch(i){a.error=i,a.hasError=!0}finally{Rr(a)}}async read(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!0),l=await this.findInode(s,t,"read");if(l.size==0)return;const u=(i=await s.get(l.data,r,a))!==null&&i!==void 0?i:mr(Ue.With("ENODATA",t,"read")),d=s.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Ri(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(s){o.error=s,o.hasError=!0}finally{const s=Rr(o);s&&await s}}readSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{const s=Nr(o,this.transaction(),!1),l=this.findInodeSync(s,t,"read");if(l.size==0)return;const u=(i=s.getSync(l.data,r,a))!==null&&i!==void 0?i:mr(Ue.With("ENODATA",t,"read")),d=s.flag("partial")?u:u.subarray(r,a);d.byteLength>n.byteLength&&Ri(`Trying to place ${d.byteLength} bytes into a ${n.byteLength} byte buffer on read`),n.set(d)}catch(s){o.error=s,o.hasError=!0}finally{Rr(o)}}async write(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Nr(i,this.transaction(),!0),s=await this.findInode(o,t,"write");let l=n;o.flag("partial")||(l=u0((a=await o.get(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),await o.set(s.data,l,r),this._add(s.ino,t),await o.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Rr(i);o&&await o}}writeSync(t,n,r){var a;const i={stack:[],error:void 0,hasError:!1};try{const o=Nr(i,this.transaction(),!1),s=this.findInodeSync(o,t,"write");let l=n;o.flag("partial")||(l=u0((a=o.getSync(s.data))!==null&&a!==void 0?a:new Uint8Array,r+n.byteLength),l.set(n,r),r=0),o.setSync(s.data,l,r),this._add(s.ino,t),o.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Rr(i)}}transaction(){return new kQ(this.store.transaction(),this)}async checkRoot(){const t={stack:[],error:void 0,hasError:!1};try{const n=Nr(t,this.transaction(),!0);if(await n.get(Wi))return;const r=new da({ino:Wi,data:1,mode:511|fa});await n.set(r.data,od("{}")),this._add(Wi,"/"),await n.set(Wi,qa(r)),await n.commit()}catch(n){t.error=n,t.hasError=!0}finally{const n=Rr(t);n&&await n}}checkRootSync(){const t={stack:[],error:void 0,hasError:!1};try{const n=Nr(t,this.transaction(),!1);if(n.getSync(Wi))return;const r=new da({ino:Wi,data:1,mode:511|fa});n.setSync(r.data,od("{}")),this._add(Wi,"/"),n.setSync(Wi,qa(r)),n.commitSync()}catch(n){t.error=n,t.hasError=!0}finally{Rr(t)}}async _populate(){const t={stack:[],error:void 0,hasError:!1};try{if(this._initialized){ti("Attempted to populate tables after initialization");return}Fm("Populating tables with existing store metadata");const n=Nr(t,this.transaction(),!0),r=await n.get(Wi);if(!r){ik("Store does not have a root inode");const s=new da({ino:Wi,data:1,mode:511|fa});await n.set(s.data,od("{}")),this._add(Wi,"/"),await n.set(Wi,qa(s)),await n.commit();return}if(r.length<Br(da)){Fw("Store contains an invalid root inode. Refusing to populate tables");return}const a=new Set;let i=0;const o=[["/",Wi]];for(;o.length>0;){i++;const[s,l]=o.shift();this._add(l,s);const u=await n.get(l);if(!u){ti("Store is missing data for inode: "+l);continue}if(u.length<Br(da)){ti(`Invalid inode size for ino ${l}: ${u.length}`);continue}const d=new da(u);if((d.mode&fa)!=fa||a.has(l))continue;a.add(l);const h=await n.get(d.data);if(!h){ti("Store is missing directory data: "+d.data);continue}const p=mi(h);for(const[g,v]of Object.entries(p))o.push([lr(s,g),v])}Fm(`Added ${i} existing inode(s) from store`)}catch(n){t.error=n,t.hasError=!0}finally{const n=Rr(t);n&&await n}}async findInode(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new da((a=await t.get(i))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",n,r)))}findInodeSync(t,n,r){var a;const i=this._ids.get(n);if(i===void 0)throw Ue.With("ENOENT",n,r);return new da((a=t.getSync(i))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",n,r)))}allocNew(t,n){var r;(r=this._lastID)!==null&&r!==void 0||(this._lastID=Math.max(...this._paths.keys())),this._lastID+=2;const a=this._lastID;if(a>_i)throw Ri(new Ue(st.ENOSPC,"No IDs available",t,n),{fs:this});return this._add(a,t),a}async commitNew(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Nr(o,this.transaction(),!0),{dir:l,base:u}=ks(t),d=await this.findInode(s,l,a),h=mi((i=await s.get(d.data))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new da({...n,ino:p,data:p+1,size:r.byteLength});return await s.set(g.ino,qa(g)),await s.set(g.data,r),h[u]=g.ino,await s.set(d.data,po(h)),await s.commit(),g}catch(s){o.error=s,o.hasError=!0}finally{const s=Rr(o);s&&await s}}commitNewSync(t,n,r,a){var i;const o={stack:[],error:void 0,hasError:!1};try{if(t=="/")throw Ue.With("EEXIST",t,a);const s=Nr(o,this.transaction(),!1),{dir:l,base:u}=ks(t),d=this.findInodeSync(s,l,a),h=mi((i=s.getSync(d.data))!==null&&i!==void 0?i:mr(Ue.With("ENOENT",l,a)));if(h[u])throw Ue.With("EEXIST",t,a);const p=this.allocNew(t,a),g=new da({...n,ino:p,data:p+1,size:r.byteLength});return s.setSync(g.ino,qa(g)),s.setSync(g.data,r),h[u]=g.ino,s.setSync(d.data,po(h)),s.commitSync(),g}catch(s){o.error=s,o.hasError=!0}finally{Rr(o)}}async remove(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Nr(i,this.transaction(),!0),{dir:l,base:u}=ks(t),d=await this.findInode(s,l,o),h=mi((r=await s.get(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",l,o)));if(!h[u])throw Ue.With("ENOENT",t,o);const p=h[u],g=new da((a=await s.get(p))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",t,o)));if(delete h[u],!n&&Xo(g))throw Ue.With("EISDIR",t,o);await s.set(d.data,po(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),await s.set(g.ino,qa(g))):(await s.remove(g.data),await s.remove(p),this._remove(p)),await s.commit()}catch(o){i.error=o,i.hasError=!0}finally{const o=Rr(i);o&&await o}}removeSync(t,n){var r,a;const i={stack:[],error:void 0,hasError:!1};try{const o=n?"rmdir":"unlink",s=Nr(i,this.transaction(),!1),{dir:l,base:u}=ks(t),d=this.findInodeSync(s,l,o),h=mi((r=s.getSync(d.data))!==null&&r!==void 0?r:mr(Ue.With("ENOENT",l,o))),p=h[u];if(!p)throw Ue.With("ENOENT",t,o);const g=new da((a=s.getSync(p))!==null&&a!==void 0?a:mr(Ue.With("ENOENT",t,o)));if(delete h[u],!n&&Xo(g))throw Ue.With("EISDIR",t,o);s.setSync(d.data,po(h)),g.nlink>1?(g.update({nlink:g.nlink-1}),s.setSync(g.ino,qa(g))):(s.removeSync(g.data),s.removeSync(p),this._remove(p)),s.commitSync()}catch(o){i.error=o,i.hasError=!0}finally{Rr(i)}}}class TQ extends CQ{async keys(){return this.store.keys()}async get(t){var n,r,a;return await((a=(r=(n=this.store).getAsync)===null||r===void 0?void 0:r.call(n,t))!==null&&a!==void 0?a:this.store.get(t))}getSync(t){return this.store.get(t)}setSync(t,n){this.store.set(t,n)}removeSync(t){this.store.delete(t)}}class AQ extends Map{constructor(t=_i,n){super(),this.maxSize=t,this.label=n,this.flags=[],this.name="tmpfs"}async sync(){}transaction(){return new TQ(this)}get bytes(){let t=this.size*4;for(const n of this.values())t+=n.byteLength;return t}usage(){return{totalSpace:this.maxSize,freeSpace:this.maxSize-this.bytes}}}const NQ={name:"InMemory",options:{maxSize:{type:"number",required:!1},label:{type:"string",required:!1}},create({maxSize:e,label:t}){const n=new z8(new AQ(e,t));return n.checkRootSync(),n}},RQ=NQ;let xa=!0;class RI extends JC{get cursor(){return this._cursor}constructor(t,n,r,a=!1){super(),this.input=t,this.output=n,this.terminal=a,this.line="",this._cursor=0,this._buffer="",this._closed=!1,this._paused=!1,this._prompt="",this._history=[],this._historyIndex=-1,this._currentLine="",this._onData=i=>{if(!(this._paused||this._closed)){this._buffer+=typeof i=="string"?i:i.toString("utf8");for(let o=this._buffer.indexOf(`
`);o>=0;o=this._buffer.indexOf(`
`)){let s=this._buffer.substring(0,o);s.endsWith("\r")&&(s=s.substring(0,s.length-1)),this._buffer=this._buffer.substring(o+1),this.line=s,s.trim()&&!s.trim().match(/^\s*$/)&&this._history.at(-1)!=s&&(this._history.push(s),this._historyIndex=this._history.length,this.emit("history",this._history)),this.emit("line",s)}}},this.input.on("data",this._onData),this.input.on("end",this.close.bind(this)),this.input.on("close",this.close.bind(this))}close(){var t,n;if(!this._closed){if(this._closed=!0,(n=(t=this.input)===null||t===void 0?void 0:t.removeAllListeners)===null||n===void 0||n.call(t),this._buffer.length){const r=this._buffer;this._buffer="",this.line=r,this.emit("line",r)}this.emit("history",this._history),this.emit("close"),this.removeAllListeners()}}pause(){return this._paused?this:(this._paused=!0,"pause"in this.input&&this.input.pause(),this.emit("pause"),this)}resume(){return this._paused?(this._paused=!1,"resume"in this.input&&this.input.resume(),this.emit("resume"),this):this}setPrompt(t){this._prompt=t}getPrompt(){return this._prompt}prompt(t){if(!this.output)return;if(!t){this.output.write(this._prompt);return}const{cols:n}=this.getCursorPos();this.output.write(this._prompt),this._cursor=n}write(t,n){if(!this._closed){if(t){const r=typeof t=="string"?t:t.toString("utf8");this._onData(r)}if(!(!n||!this.terminal))switch((n.ctrl?"^":"")+n.name){case"^c":this.emit("SIGINT");break;case"^z":this.emit("SIGTSTP");break;case"^q":this.emit("SIGCONT");break;case"home":case"^a":if(!this.output)return;mo(this.output,-this._cursor,0),this._cursor=0,this._cursor=0;break;case"^e":case"end":{if(!this.output)return;const r=this.line.length-this._cursor;if(!r)return;mo(this.output,r,0),this._cursor=this.line.length,this._cursor=this.line.length;break}case"^k":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor);yb(this.output,1),this.line=r;break}case"^u":{if(!this.output||!this._cursor)return;const r=this.line.slice(this._cursor);yb(this.output,0),mo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,this._cursor=0,this._cursor=0;break}case"^w":{if(!this.output||!this._cursor)return;let r=this._cursor-1;for(;r>=0&&this.line[r]===" ";)r--;for(;r>=0&&this.line[r]!==" ";)r--;const a=this.line.slice(0,r+1)+this.line.slice(this._cursor),i=r+1;this._renderLine(a),this._cursor=i,this._cursor=i,mo(this.output,-a.length,0),mo(this.output,i,0);break}case"^return":case"^enter":this._onData(`
`);break;case"return":case"enter":this._onData((t?typeof t=="string"?t:t.toString("utf8"):"")+`
`);break;case"up":case"down":{if(!this.output||!this._history.length)return;if(this._historyIndex===this._history.length&&(this._currentLine=this.line||""),n.name=="up"&&this._historyIndex>0)this._historyIndex--;else if(n.name=="down"&&this._historyIndex<this._history.length-1)this._historyIndex++;else if(n.name=="down"&&this._historyIndex==this._history.length-1){this._historyIndex=this._history.length,this._renderLine(this._currentLine);return}else return;const r=this._history[this._historyIndex];this._renderLine(r);break}case"left":case"right":{const r=n.name=="left"?-1:1;if(!this.output)return;const a=Math.max(0,Math.min(this.line.length,this._cursor+r));if(a==this._cursor)return;mo(this.output,r,0),this._cursor=a,this._cursor=a;break}case"backspace":{if(!this.output||!this._cursor)return;const r=this.line.slice(0,this._cursor-1)+this.line.slice(this._cursor);this._renderLine(r),this._cursor=--this._cursor,this._cursor>0&&(mo(this.output,-this._cursor,0),mo(this.output,this._cursor,0));break}case"delete":{if(!this.output||this._cursor>=this.line.length)return;const r=this.line.slice(0,this._cursor)+this.line.slice(this._cursor+1);yb(this.output,0),mo(this.output,0,0),this.output.write(this._prompt+r),this.line=r,mo(this.output,-r.length,0),mo(this.output,this._cursor,0);break}}}}_renderLine(t){this.output&&(yb(this.output,0),mo(this.output,0,0),this.output.write(this._prompt+t),this.line=t,this._cursor=t.length,this._cursor=t.length)}question(t,n,r){const a=typeof n=="function"?n:r;if(this._closed||!this.output){a("");return}this.output.write(t),this.once("line",a)}getCursorPos(){return{rows:0,cols:this.cursor}}prependListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.on(t,n),r.forEach(this.on.bind(this,t)),this}prependOnceListener(t,n){const r=this.listeners(t);return this.removeAllListeners(t),this.once(t,n),r.forEach(this.on.bind(this,t)),this}setMaxListeners(){return ti("Interface.prototype.setMaxListeners is not supported"),this}getMaxListeners(){return ti("Interface.prototype.getMaxListeners is not supported"),10}[Symbol.asyncIterator](){let t=!1;return{next:async()=>{if(t)return{done:t,value:void 0};const{resolve:n,promise:r}=Promise.withResolvers();return this.once("line",a=>n({value:a,done:!1})),this.once("close",()=>{t=!0,n({value:void 0,done:t})}),r},return:async n=>t?{done:t,value:n}:(t=!0,this.close(),{done:t,value:n}),throw:async n=>{throw t||(t=!0,this.close()),n},[Symbol.asyncIterator](){return this},[Symbol.asyncDispose]:async()=>{t||(t=!0,this.close())}}}async[Symbol.asyncDispose](){if(this._closed)return;const{resolve:t,promise:n}=Promise.withResolvers();this.once("close",()=>t()),this.close(),await n}rawListeners(t){return this.listeners(t)}}function IQ(e,t,n,r){return"input"in e?new RI(e.input,e.output,e.completer,e.terminal):new RI(e,t,n,r)}function yb(e,t){return e.write(t>=0?"\r\x1B[K":"\x1B[K"),!0}function mo(e,t,n){if(!e.write)return!1;let r="";return t<0?r+=`\x1B[${-t}D`:t>0&&(r+=`\x1B[${t}C`),n<0?r+=`\x1B[${-n}A`:n>0&&(r+=`\x1B[${n}B`),r&&e.write(r),!0}class Nv{get position(){return this.flag&vd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n,r,a,i,o){this.context=t,this.path=n,this.fs=r,this.internalPath=a,this.flag=i,this.inode=o,this._position=0,this.dirty=!1,this.closed=!1}[Symbol.dispose](){this.close()}get _isSync(){return!!(this.flag&zw||this.inode.flags&Ii.Sync)}sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||this.fs.touchSync(this.internalPath,this.inode),this.dirty=!1)}datasync(){return this.sync()}close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");this.sync(),this.dispose()}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}stat(){if(this.closed)throw Ue.With("EBADF",this.path,"stat");return this.inode}truncate(t){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(this.dirty=!0,!(this.flag&ei||this.flag&Ml))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this.inode.ctimeMs=Date.now(),this._isSync&&this.sync()}write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(!(this.flag&ei||this.flag&Ml))throw new Ue(st.EPERM,"File not opened with a writeable mode");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,this.fs.writeSync(this.internalPath,o,a),this._isSync&&this.sync(),o.byteLength}read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ei)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&Ii.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return this.fs.readSync(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&this.sync(),i-a}chmod(t){if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(t>Er?-61441:Er)|t,(this._isSync||t>Er)&&this.sync()}chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,$8(this.inode,t,n),this._isSync&&this.sync()}utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=t,this.inode.mtimeMs=n,this._isSync&&this.sync()}streamRead(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamRead");return this.fs.streamRead(this.internalPath,t)}streamWrite(t){if(this.closed)throw Ue.With("EBADF",this.path,"streamWrite");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"streamWrite");return this.fs.streamWrite(this.internalPath,t)}}function Rv(e){var t,n;const r=(n=(t=e.context)===null||t===void 0?void 0:t.descriptors)!==null&&n!==void 0?n:rs.descriptors,a=Math.max(r.size?Math.max(...r.keys())+1:0,4);return r.set(a,e),a}function li(e,t){var n;const a=((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:rs.descriptors).get(t);if(!a)throw new Ue(st.EBADF);return a}function U8(e,t){var n;return((n=e==null?void 0:e.descriptors)!==null&&n!==void 0?n:rs.descriptors).delete(t)}const OQ=/[rwasx]{1,2}\+?/;function Fl(e){if(typeof e=="number")return e;if(!OQ.test(e))throw new Ue(st.EINVAL,"Invalid flag string: "+e);return DQ(e)}function DQ(e){if(!e.includes("r")&&!e.includes("w")&&!e.includes("a"))throw new Ue(st.EINVAL,"Invalid flag string: "+e);let t=e.includes("r")?T8:Lw;return e.includes("w")&&(t|=Bw),e.includes("a")&&(t|=vd),e.includes("+")?t|=Ml:e.includes("r")||(t|=ei),e.includes("s")&&(t|=zw),e.includes("x")&&(t|=$w),t}function H8(e){let t=0;return e&ei||(t|=_a),(e&ei||e&Ml)&&(t|=Jr),t}const m0=new Map;dk("/",RQ.create({label:"root"}));function dk(e,t){if(e[0]!="/"&&(e="/"+e),e=Hl.call(this,e),m0.has(e))throw Ri(new Ue(st.EINVAL,"Mount point is already in use: "+e));t._mountPoint=e,m0.set(e,t),C8(`Mounted ${t.name} on ${e}`),Fm(`${t.name} attributes: ${[...t.attributes].map(([n,r])=>r!=null?n+"="+r:n).join(", ")}`)}function q8(e){if(e[0]!="/"&&(e="/"+e),e=Hl.call(this,e),!m0.has(e)){ti(e+" is already unmounted");return}m0.delete(e),ik("Unmounted "+e)}function Pn(e,t){const n=(t==null?void 0:t.root)||rs.root;e=fn(lr(n,e));const r=[...m0].sort((a,i)=>a[0].length>i[0].length?-1:1);for(const[a,i]of r)if(MQ(a,e))return e=e.slice(a.length>1?a.length:0),e===""&&(e=n),{fs:i,path:e,mountPoint:a,root:n};throw VJ(new Ue(st.EIO,"No file system",e))}function iS(e,t){for(const[n,r]of Object.entries(t))e=e==null?void 0:e.replaceAll(n,r);return e}function fr(e,t){typeof e.stack=="string"&&(e.stack=iS(e.stack,t));try{e.message=iS(e.message,t)}catch{}return e.path&&(e.path=iS(e.path,t)),e}function V8(e,t){const n=e.usage(),r=n.blockSize||4096;return{type:(t?BigInt:Number)(e.type),bsize:(t?BigInt:Number)(r),ffree:(t?BigInt:Number)(n.freeNodes||_i),files:(t?BigInt:Number)(n.totalNodes||_i),bavail:(t?BigInt:Number)(n.freeSpace/r),bfree:(t?BigInt:Number)(n.freeSpace/r),blocks:(t?BigInt:Number)(n.totalSpace/r)}}function jQ(e){var t,n,r,a,i,o,s;const l=this!==null&&this!==void 0?this:rs;if(((t=l.credentials)===null||t===void 0?void 0:t.uid)!==0&&((n=l.credentials)===null||n===void 0?void 0:n.gid)!==0&&((r=l.credentials)===null||r===void 0?void 0:r.euid)!==0&&((a=l.credentials)===null||a===void 0?void 0:a.egid)!==0)throw new Ue(st.EPERM,"Can not chroot() as non-root user");(i=l.root)!==null&&i!==void 0||(l.root="/");const u=lr(l.root,e);for(const d of(s=(o=l.descriptors)===null||o===void 0?void 0:o.values())!==null&&s!==void 0?s:[]){if(!d.path.startsWith(l.root))throw Ue.With("EBUSY",d.path,"chroot");d.path=d.path.slice(l.root.length)}if(u.length>l.root.length)throw new Ue(st.EPERM,"Can not chroot() outside of current root");l.root=u}function MQ(e,t){return e==="/"||e===t?!0:(e.endsWith("/")||(e+="/"),t.startsWith(e))}class G8 extends JC{off(t,n,r,a){return super.off(t,n,r,a)}removeListener(t,n,r,a){return super.removeListener(t,n,r,a)}constructor(t,n){super(),this._context=t,this.path=n}setMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.setMaxListeners")}getMaxListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.getMaxListeners")}prependListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependListener")}prependOnceListener(){throw Ue.With("ENOSYS",this.path,"Watcher.prependOnceListener")}rawListeners(){throw Ue.With("ENOSYS",this.path,"Watcher.rawListeners")}ref(){return this}unref(){return this}}class W8 extends G8{constructor(t,n,r){super(t,n),this.options=r,this.realpath=t!=null&&t.root?lr(t.root,n):n,FQ(this.realpath,this)}close(){super.emit("close"),LQ(this.realpath,this)}[Symbol.dispose](){this.close()}}class PQ extends G8{constructor(t,n,r){super(t,n),this.options=r,this.start()}onInterval(){try{const t=cu(this.path);gQ(this.previous,t)||(this.emit("change",t,this.previous),this.previous=t)}catch(t){this.emit("error",t)}}start(){const t=this.options.interval||5e3;try{this.previous=cu(this.path)}catch(n){this.emit("error",n);return}this.intervalId=setInterval(this.onInterval.bind(this),t),!this.options.persistent&&typeof this.intervalId=="object"&&this.intervalId.unref()}stop(){this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0),this.removeAllListeners()}}const qc=new Map;function FQ(e,t){const n=fn(e);qc.has(n)||qc.set(n,new Set),qc.get(n).add(t)}function LQ(e,t){const n=fn(e);qc.has(n)&&(qc.get(n).delete(t),qc.get(n).size===0&&qc.delete(n))}function Ga(e,t,n){var r;e&&(n=lr((r=e.root)!==null&&r!==void 0?r:"/",n)),n=fn(n);for(let a=n;a!="/";a=Xn(a)){const i=qc.get(a);if(i)for(const o of i)o.emit("change",t,E8.call(o._context,a,n)||vh(n))}}var sg=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},lg=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});function $Q(e,t){e=fn(e),t=fn(t);const n=Pn(e,this),r=Pn(t,this);if(!cu.call(this,Xn(e)).hasAccess(Jr,this))throw Ue.With("EACCES",e,"rename");try{if(n===r){n.fs.renameSync(n.path,r.path),Ga(this,"rename",e.toString()),Ga(this,"change",t.toString());return}gk.call(this,t,mk(e)),pk.call(this,e),Ga(this,"rename",e.toString())}catch(a){throw fr(a,{[n.path]:e,[r.path]:t})}}function fk(e){e=fn(e);try{const{fs:t,path:n}=Pn(wu.call(this,e),this);return t.existsSync(n)}catch(t){if(t.errno==st.ENOENT)return!1;throw t}}function cu(e,t){e=fn(e);const{fs:n,path:r}=Pn(wu.call(this,e),this);try{const a=n.statSync(r);if(xa&&!dr(this,a,_a))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new jd(a):new Xl(a)}catch(a){throw fr(a,{[r]:e})}}function hk(e,t){e=fn(e);const{fs:n,path:r}=Pn(e,this);try{const a=n.statSync(r);if(xa&&!dr(this,a,_a))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new jd(a):new Xl(a)}catch(a){throw fr(a,{[r]:e})}}function BQ(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{const r=sg(n,Md.call(this,e,{flag:"r+"}),!1);if(t||(t=0),t<0)throw new Ue(st.EINVAL);r.truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{lg(n)}}function pk(e){e=fn(e);const{fs:t,path:n}=Pn(e,this);try{if(xa&&!dr(this,t.statSync(n),Jr))throw Ue.With("EACCES",n,"unlink");t.unlinkSync(n),Ga(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}function Md(e,t){var n;e=fn(e);const r=vu(t.mode,420),a=Fl(t.flag);e=t.preserveSymlinks?e:wu.call(this,e);const{fs:i,path:o}=Pn(e,this);let s;try{s=i.statSync(o)}catch{}if(!s){if(!(a&Lw))throw Ue.With("ENOENT",e,"_open");const u=i.statSync(Xn(o));if(!dr(this,u,Jr))throw Ue.With("EACCES",Xn(e),"_open");if(!Xo(u))throw Ue.With("ENOTDIR",Xn(e),"_open");if(!t.allowDirectory&&r&fa)throw Ue.With("EISDIR",e,"_open");if(!dr(this,u,Jr))throw Ue.With("EACCES",Xn(o),"_open");const{euid:d,egid:h}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:rs.credentials,p=i.createFileSync(o,{mode:r,uid:u.mode&ig?u.uid:d,gid:u.mode&og?u.gid:h});return new Nv(this,e,i,o,a,p)}if(!dr(this,s,r)||!dr(this,s,H8(a)))throw Ue.With("EACCES",e,"_open");if(a&$w)throw Ue.With("EEXIST",e,"_open");const l=new Nv(this,e,i,o,a,s);if(a&Bw&&l.truncate(0),!t.allowDirectory&&s.mode&fa)throw Ue.With("EISDIR",e,"_open");return l}function Uw(e,t,n=sk){return Rv(Md.call(this,e,{flag:t,mode:n}))}function Hw(e,t,n){return Rv(Md.call(this,e,{flag:t,mode:n,preserveSymlinks:!0}))}function K8(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=sg(r,typeof e=="number"?li(this,e):Md.call(this,e.toString(),{flag:t,mode:420,preserveSymlinks:n}),!1),{size:i}=a.stat(),o=new Uint8Array(i);return a.read(o,0,i,0),o}catch(a){r.error=a,r.hasError=!0}finally{lg(r)}}function mk(e,t={}){const n=Pl(t,null,"r",420);if(Fl(n.flag)&ei)throw new Ue(st.EINVAL,"Flag passed to readFile must allow for reading");const a=Dr.from(K8.call(this,e,n.flag,!1));return n.encoding?a.toString(n.encoding):a}function gk(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Pl(n,"utf8","w+",420),i=Fl(a.flag);if(!(i&ei||i&Ml))throw new Ue(st.EINVAL,"Flag passed to writeFile must allow for writing");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Dr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(!o)throw new Ue(st.EINVAL,"Data not specified");sg(r,typeof e=="number"?li(this,e):Md.call(this,e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength,0),Ga(this,"change",e.toString())}catch(a){r.error=a,r.hasError=!0}finally{lg(r)}}function zQ(e,t,n={}){const r={stack:[],error:void 0,hasError:!1};try{const a=Pl(n,"utf8","a+",420),i=Fl(a.flag);if(!(i&vd))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Dr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);sg(r,Md.call(this,typeof e=="number"?li(this,e).path:e.toString(),{flag:i,mode:a.mode,preserveSymlinks:!0}),!1).write(o,0,o.byteLength)}catch(a){r.error=a,r.hasError=!0}finally{lg(r)}}function UQ(e,t){const n=li(this,e).stat();return t!=null&&t.bigint?new jd(n):new Xl(n)}function Pd(e){li(this,e).close(),U8(this,e)}function HQ(e,t=0){if(t||(t=0),t<0)throw new Ue(st.EINVAL);li(this,e).truncate(t)}function qQ(e){li(this,e).sync()}function VQ(e){li(this,e).datasync()}function GQ(e,t,n,r,a){let i,o,s,l;if(typeof t=="string"){l=typeof n=="number"?n:null;const h=typeof r=="string"?r:"utf8";o=0,i=Dr.from(t,h),s=i.byteLength}else i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n,s=r,l=typeof a=="number"?a:null;const u=li(this,e);l??(l=u.position);const d=u.write(i,o,s,l);return Ga(this,"change",u.path),d}function WQ(e,t,n,r,a){const i=li(this,e),o=typeof n=="object"?n.offset:n;return typeof n=="object"&&(r=n.length,a=n.position),a=Number(a),isNaN(a)&&(a=i.position),i.read(t,o,r,a)}function yk(e,t,n){li(this,e).chown(t,n)}function bk(e,t){const n=vu(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode.");li(this,e).chmod(n)}function vk(e,t,n){li(this,e).utimes(Av(t),Av(n))}function Z8(e){e=fn(e);const{fs:t,path:n}=Pn(wu.call(this,e),this);try{const r=t.statSync(n);if(!Xo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(xa&&!dr(this,r,Jr))throw Ue.With("EACCES",n,"rmdir");t.rmdirSync(n),Ga(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}function wk(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:rs.credentials;t=typeof t=="object"?t:{mode:t};const o=vu(t==null?void 0:t.mode,511);e=wu.call(this,e);const{fs:s,path:l,root:u}=Pn(e,this),d={[l]:e},h=(p,g)=>{if(!dr(this,g,Jr))throw Ue.With("EACCES",Xn(p),"mkdir");const v=s.mkdirSync(p,{mode:o,uid:g.mode&ig?g.uid:a,gid:g.mode&og?g.gid:i});return Ga(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){h(l,s.statSync(Xn(l)));return}const p=[];for(let v=l,b=e;!s.existsSync(v);v=Xn(v),b=Xn(b))p.unshift(v),d[v]=b;if(!p.length)return;const g=[s.statSync(Xn(p[0]))];for(const[v,b]of p.entries())g.push(h(b,g[v]));return u.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(u.length)}catch(p){throw fr(p,d)}}function Hh(e,t){t=typeof t=="object"?t:{encoding:t},e=fn(e);const{fs:n,path:r}=Pn(wu.call(this,e),this);let a;try{const o=n.statSync(r);if(xa&&!dr(this,o,_a))throw Ue.With("EACCES",r,"readdir");if(!Xo(o))throw Ue.With("ENOTDIR",r,"readdir");a=n.readdirSync(r)}catch(o){throw fr(o,{[r]:e})}const i=[];for(const o of a){let s;try{s=n.statSync(lr(r,o))}catch{continue}if(t!=null&&t.withFileTypes?i.push(new g0(o,s)):(t==null?void 0:t.encoding)=="buffer"?i.push(Dr.from(o)):i.push(o),!(!Xo(s)||!(t!=null&&t.recursive)))for(const l of Hh.call(this,lr(e,o),t))l instanceof g0?(l.path=lr(o,l.path),i.push(l)):Dr.isBuffer(l)?i.push(Dr.from(lr(o,ek(l)))):i.push(lr(o,l))}return i}function KQ(e,t){if(e=fn(e),!cu(Xn(e)).hasAccess(_a,this))throw Ue.With("EACCES",Xn(e),"link");if(t=fn(t),!cu(Xn(t)).hasAccess(Jr,this))throw Ue.With("EACCES",Xn(t),"link");const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(xa&&!dr(this,n.statSync(r),_a))throw Ue.With("EACCES",r,"link");return n.linkSync(r,a.path)}catch(i){throw fr(i,{[r]:e,[a.path]:t})}}function ZQ(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid type: "+n);t=fn(t);const a=sg(r,Md.call(this,t,{flag:"wx",mode:420}),!1);a.write(od(fn(e,!0))),a.chmod(Yl)}catch(a){r.error=a,r.hasError=!0}finally{lg(r)}}function D2(e,t){const n=Dr.from(K8.call(this,e,"r",!0)),r=typeof t=="object"?t==null?void 0:t.encoding:t;return r=="buffer"?n:n.toString(r??"utf-8")}function YQ(e,t,n){const r=Uw.call(this,e,"r+");yk.call(this,r,t,n),Pd.call(this,r)}function XQ(e,t,n){const r=Hw.call(this,e,"r+");yk.call(this,r,t,n),Pd.call(this,r)}function JQ(e,t){const n=Uw.call(this,e,"r+");bk.call(this,n,t),Pd.call(this,n)}function QQ(e,t){const n=Hw.call(this,e,"r+");bk.call(this,n,t),Pd.call(this,n)}function Y8(e,t,n){const r=Uw.call(this,e,"r+");vk.call(this,r,t,n),Pd.call(this,r)}function eee(e,t,n){const r=Hw.call(this,e,"r+");vk.call(this,r,t,n),Pd.call(this,r)}function j2(e,t,n){try{const l=Pn(t,e),u=l.fs.statSync(l.path);if(!wh(u))return{...l,fullPath:t,stats:u};const d=Hl.call(e,Xn(t),D2.call(e,t).toString());return j2(e,d)}catch{}const{base:r,dir:a}=ks(t),i=a=="/"?"/":wu.call(e,a),o=lr(i,r),s=Pn(o,e);try{const l=s.fs.statSync(s.path);if(!wh(l))return{...s,fullPath:o,stats:l};const u=Hl.call(e,i,D2.call(e,o).toString());return j2(e,u)}catch(l){if(l.code=="ENOENT")return{...s,fullPath:t};throw fr(l,{[s.path]:o})}}function wu(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=fn(e);const{fullPath:a}=j2(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Dr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function tee(e,t=384){if(!dr(this,cu.call(this,e),t))throw new Ue(st.EACCES)}function X8(e,t){e=fn(e);let n;try{n=hk.bind(this)(e)}catch(r){if(r.code!="ENOENT"||!(t!=null&&t.force))throw r}if(n)switch(n.mode&Er){case fa:if(t!=null&&t.recursive)for(const r of Hh.call(this,e))X8.call(this,lr(e,r),t);Z8.call(this,e);break;case Vo:case Yl:case Id:case Od:pk.call(this,e);break;case Dd:case Rd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}function nee(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return wk.call(this,a),n=="buffer"?Dr.from(a):a}function J8(e,t,n){if(e=fn(e),t=fn(t),n&&n&lk&&fk(t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");gk.call(this,t,mk(e)),Ga(this,"rename",t.toString())}function ree(e,t,n){const r=li(this,e);let a=0;for(const i of t)a+=r.read(i,0,i.byteLength,n+a);return a}function aee(e,t,n){const r=li(this,e);let a=0;for(const i of t)a+=r.write(new Uint8Array(i.buffer),0,i.byteLength,n+a);return a}function iee(e,t){return e=fn(e),new _k(e,this)}function Q8(e,t,n){e=fn(e),t=fn(t);const r=hk.call(this,e);if(n!=null&&n.errorOnExist&&fk.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Er){case fa:if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");wk.call(this,t,{recursive:!0});for(const a of Hh.call(this,e,{withFileTypes:!0}))n.filter&&!n.filter(lr(e,a.name),lr(t,a.name))||Q8.call(this,lr(e,a.name),lr(t,a.name),n);break;case Vo:case Yl:J8.call(this,e,t);break;case Id:case Od:case Dd:case Rd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&Y8.call(this,t,r.atime,r.mtime)}function oee(e,t){e=fn(e);const{fs:n}=Pn(e,this);return V8(n,t==null?void 0:t.bigint)}function see(e,t={}){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t,i=e.map(l=>(l=l.replace(/([.?+^$(){}|[\]/])/g,"\\$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${l}$`))),o=[];function s(l){const u=Hh(l,{withFileTypes:r,encoding:"utf8"});for(const d of u){const h=r?d.path:l+"/"+d;a(r?d:h)||(cu(h).isDirectory()&&i.some(p=>p.source.includes(".*"))&&s(h),i.some(p=>p.test(h.replace(/^\/+/g,"")))&&o.push(r?d.path:h.replace(/^\/+/g,"")))}}return s(n),o}class g0{get name(){return vh(this.path)}constructor(t,n){this.path=t,this.stats=n}get parentPath(){return this.path}isFile(){return _Q(this.stats)}isDirectory(){return Xo(this.stats)}isBlockDevice(){return h0(this.stats)}isCharacterDevice(){return p0(this.stats)}isSymbolicLink(){return wh(this.stats)}isFIFO(){return SQ(this.stats)}isSocket(){return xQ(this.stats)}}class _k{checkClosed(){if(this.closed)throw new Ue(st.EBADF,"Can not use closed Dir")}constructor(t,n){this.path=t,this.context=n,this.closed=!1}close(t){if(this.closed=!0,!t)return Promise.resolve();t()}closeSync(){this.closed=!0}async _read(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=await Ld.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}read(t){if(!t)return this._read();this._read().then(n=>t(void 0,n))}readSync(){var t,n;return this.checkClosed(),(t=this._entries)!==null&&t!==void 0||(this._entries=Hh.call(this.context,this.path,{withFileTypes:!0})),this._entries.length&&(n=this._entries.shift())!==null&&n!==void 0?n:null}async next(){const t=await this._read();return t?{done:!1,value:t}:(await this.close(),{done:!0,value:void 0})}[Symbol.asyncIterator](){return this}[Symbol.asyncDispose](){return Promise.resolve()}}var oS={exports:{}},sS={exports:{}},lS={},II;function _u(){return II||(II=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=d,n.toByteArray=p,n.fromByteArray=b;for(var r=[],a=[],i=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=o.length;s<l;++s)r[s]=o[s],a[o.charCodeAt(s)]=s;a[45]=62,a[95]=63;function u(S){var E=S.length;if(E%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var C=S.indexOf("=");C===-1&&(C=E);var k=C===E?0:4-C%4;return[C,k]}function d(S){var E=u(S),C=E[0],k=E[1];return(C+k)*3/4-k}function h(S,E,C){return(E+C)*3/4-C}function p(S){var E,C=u(S),k=C[0],R=C[1],D=new i(h(S,k,R)),O=0,L=R>0?k-4:k,B;for(B=0;B<L;B+=4)E=a[S.charCodeAt(B)]<<18|a[S.charCodeAt(B+1)]<<12|a[S.charCodeAt(B+2)]<<6|a[S.charCodeAt(B+3)],D[O++]=E>>16&255,D[O++]=E>>8&255,D[O++]=E&255;return R===2&&(E=a[S.charCodeAt(B)]<<2|a[S.charCodeAt(B+1)]>>4,D[O++]=E&255),R===1&&(E=a[S.charCodeAt(B)]<<10|a[S.charCodeAt(B+1)]<<4|a[S.charCodeAt(B+2)]>>2,D[O++]=E>>8&255,D[O++]=E&255),D}function g(S){return r[S>>18&63]+r[S>>12&63]+r[S>>6&63]+r[S&63]}function v(S,E,C){for(var k,R=[],D=E;D<C;D+=3)k=(S[D]<<16&16711680)+(S[D+1]<<8&65280)+(S[D+2]&255),R.push(g(k));return R.join("")}function b(S){for(var E,C=S.length,k=C%3,R=[],D=16383,O=0,L=C-k;O<L;O+=D)R.push(v(S,O,O+D>L?L:O+D));return k===1?(E=S[C-1],R.push(r[E>>2]+r[E<<4&63]+"==")):k===2&&(E=(S[C-2]<<8)+S[C-1],R.push(r[E>>10]+r[E>>4&63]+r[E<<2&63]+"=")),R.join("")}var _={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */_.read=function(S,E,C,k,R){var D,O,L=R*8-k-1,B=(1<<L)-1,Y=B>>1,F=-7,Z=C?R-1:0,q=C?-1:1,ne=S[E+Z];for(Z+=q,D=ne&(1<<-F)-1,ne>>=-F,F+=L;F>0;D=D*256+S[E+Z],Z+=q,F-=8);for(O=D&(1<<-F)-1,D>>=-F,F+=k;F>0;O=O*256+S[E+Z],Z+=q,F-=8);if(D===0)D=1-Y;else{if(D===B)return O?NaN:(ne?-1:1)*(1/0);O=O+Math.pow(2,k),D=D-Y}return(ne?-1:1)*O*Math.pow(2,D-k)},_.write=function(S,E,C,k,R,D){var O,L,B,Y=D*8-R-1,F=(1<<Y)-1,Z=F>>1,q=R===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=k?0:D-1,ae=k?1:-1,re=E<0||E===0&&1/E<0?1:0;for(E=Math.abs(E),isNaN(E)||E===1/0?(L=isNaN(E)?1:0,O=F):(O=Math.floor(Math.log(E)/Math.LN2),E*(B=Math.pow(2,-O))<1&&(O--,B*=2),O+Z>=1?E+=q/B:E+=q*Math.pow(2,1-Z),E*B>=2&&(O++,B/=2),O+Z>=F?(L=0,O=F):O+Z>=1?(L=(E*B-1)*Math.pow(2,R),O=O+Z):(L=E*Math.pow(2,Z-1)*Math.pow(2,R),O=0));R>=8;S[C+ne]=L&255,ne+=ae,L/=256,R-=8);for(O=O<<R|L,Y+=R;Y>0;S[C+ne]=O&255,ne+=ae,O/=256,Y-=8);S[C+ne-ae]|=re*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(S){const E=n,C=_,k=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;S.Buffer=F,S.SlowBuffer=de,S.INSPECT_MAX_BYTES=50;const R=2147483647;S.kMaxLength=R;const{Uint8Array:D,ArrayBuffer:O,SharedArrayBuffer:L}=globalThis;F.TYPED_ARRAY_SUPPORT=B(),!F.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function B(){try{const H=new D(1),z={foo:function(){return 42}};return Object.setPrototypeOf(z,D.prototype),Object.setPrototypeOf(H,z),H.foo()===42}catch{return!1}}Object.defineProperty(F.prototype,"parent",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.buffer}}),Object.defineProperty(F.prototype,"offset",{enumerable:!0,get:function(){if(F.isBuffer(this))return this.byteOffset}});function Y(H){if(H>R)throw new RangeError('The value "'+H+'" is invalid for option "size"');const z=new D(H);return Object.setPrototypeOf(z,F.prototype),z}function F(H,z,W){if(typeof H=="number"){if(typeof z=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ae(H)}return Z(H,z,W)}F.poolSize=8192;function Z(H,z,W){if(typeof H=="string")return re(H,z);if(O.isView(H))return ie(H);if(H==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H);if(ge(H,O)||H&&ge(H.buffer,O)||typeof L<"u"&&(ge(H,L)||H&&ge(H.buffer,L)))return U(H,z,W);if(typeof H=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=H.valueOf&&H.valueOf();if(he!=null&&he!==H)return F.from(he,z,W);const Ae=Q(H);if(Ae)return Ae;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof H[Symbol.toPrimitive]=="function")return F.from(H[Symbol.toPrimitive]("string"),z,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof H)}F.from=function(H,z,W){return Z(H,z,W)},Object.setPrototypeOf(F.prototype,D.prototype),Object.setPrototypeOf(F,D);function q(H){if(typeof H!="number")throw new TypeError('"size" argument must be of type number');if(H<0)throw new RangeError('The value "'+H+'" is invalid for option "size"')}function ne(H,z,W){return q(H),H<=0?Y(H):z!==void 0?typeof W=="string"?Y(H).fill(z,W):Y(H).fill(z):Y(H)}F.alloc=function(H,z,W){return ne(H,z,W)};function ae(H){return q(H),Y(H<0?0:X(H)|0)}F.allocUnsafe=function(H){return ae(H)},F.allocUnsafeSlow=function(H){return ae(H)};function re(H,z){if((typeof z!="string"||z==="")&&(z="utf8"),!F.isEncoding(z))throw new TypeError("Unknown encoding: "+z);const W=be(H,z)|0;let he=Y(W);const Ae=he.write(H,z);return Ae!==W&&(he=he.slice(0,Ae)),he}function ee(H){const z=H.length<0?0:X(H.length)|0,W=Y(z);for(let he=0;he<z;he+=1)W[he]=H[he]&255;return W}function ie(H){if(ge(H,D)){const z=new D(H);return U(z.buffer,z.byteOffset,z.byteLength)}return ee(H)}function U(H,z,W){if(z<0||H.byteLength<z)throw new RangeError('"offset" is outside of buffer bounds');if(H.byteLength<z+(W||0))throw new RangeError('"length" is outside of buffer bounds');let he;return z===void 0&&W===void 0?he=new D(H):W===void 0?he=new D(H,z):he=new D(H,z,W),Object.setPrototypeOf(he,F.prototype),he}function Q(H){if(F.isBuffer(H)){const z=X(H.length)|0,W=Y(z);return W.length===0||H.copy(W,0,0,z),W}if(H.length!==void 0)return typeof H.length!="number"||De(H.length)?Y(0):ee(H);if(H.type==="Buffer"&&Array.isArray(H.data))return ee(H.data)}function X(H){if(H>=R)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+R.toString(16)+" bytes");return H|0}function de(H){return+H!=H&&(H=0),F.alloc(+H)}F.isBuffer=function(z){return z!=null&&z._isBuffer===!0&&z!==F.prototype},F.compare=function(z,W){if(ge(z,D)&&(z=F.from(z,z.offset,z.byteLength)),ge(W,D)&&(W=F.from(W,W.offset,W.byteLength)),!F.isBuffer(z)||!F.isBuffer(W))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(z===W)return 0;let he=z.length,Ae=W.length;for(let He=0,pt=Math.min(he,Ae);He<pt;++He)if(z[He]!==W[He]){he=z[He],Ae=W[He];break}return he<Ae?-1:Ae<he?1:0},F.isEncoding=function(z){switch(String(z).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},F.concat=function(z,W){if(!Array.isArray(z))throw new TypeError('"list" argument must be an Array of Buffers');if(z.length===0)return F.alloc(0);let he;if(W===void 0)for(W=0,he=0;he<z.length;++he)W+=z[he].length;const Ae=F.allocUnsafe(W);let He=0;for(he=0;he<z.length;++he){let pt=z[he];if(ge(pt,D))He+pt.length>Ae.length?(F.isBuffer(pt)||(pt=F.from(pt)),pt.copy(Ae,He)):D.prototype.set.call(Ae,pt,He);else if(F.isBuffer(pt))pt.copy(Ae,He);else throw new TypeError('"list" argument must be an Array of Buffers');He+=pt.length}return Ae};function be(H,z){if(F.isBuffer(H))return H.length;if(O.isView(H)||ge(H,O))return H.byteLength;if(typeof H!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof H);const W=H.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&W===0)return 0;let Ae=!1;for(;;)switch(z){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ft(H).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W*2;case"hex":return W>>>1;case"base64":return Be(H).length;default:if(Ae)return he?-1:ft(H).length;z=(""+z).toLowerCase(),Ae=!0}}F.byteLength=be;function _e(H,z,W){let he=!1;if((z===void 0||z<0)&&(z=0),z>this.length||((W===void 0||W>this.length)&&(W=this.length),W<=0)||(W>>>=0,z>>>=0,W<=z))return"";for(H||(H="utf8");;)switch(H){case"hex":return xe(this,z,W);case"utf8":case"utf-8":return me(this,z,W);case"ascii":return oe(this,z,W);case"latin1":case"binary":return J(this,z,W);case"base64":return V(this,z,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Me(this,z,W);default:if(he)throw new TypeError("Unknown encoding: "+H);H=(H+"").toLowerCase(),he=!0}}F.prototype._isBuffer=!0;function Pe(H,z,W){const he=H[z];H[z]=H[W],H[W]=he}F.prototype.swap16=function(){const z=this.length;if(z%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let W=0;W<z;W+=2)Pe(this,W,W+1);return this},F.prototype.swap32=function(){const z=this.length;if(z%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let W=0;W<z;W+=4)Pe(this,W,W+3),Pe(this,W+1,W+2);return this},F.prototype.swap64=function(){const z=this.length;if(z%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let W=0;W<z;W+=8)Pe(this,W,W+7),Pe(this,W+1,W+6),Pe(this,W+2,W+5),Pe(this,W+3,W+4);return this},F.prototype.toString=function(){const z=this.length;return z===0?"":arguments.length===0?me(this,0,z):_e.apply(this,arguments)},F.prototype.toLocaleString=F.prototype.toString,F.prototype.equals=function(z){if(!F.isBuffer(z))throw new TypeError("Argument must be a Buffer");return this===z?!0:F.compare(this,z)===0},F.prototype.inspect=function(){let z="";const W=S.INSPECT_MAX_BYTES;return z=this.toString("hex",0,W).replace(/(.{2})/g,"$1 ").trim(),this.length>W&&(z+=" ... "),"<Buffer "+z+">"},k&&(F.prototype[k]=F.prototype.inspect),F.prototype.compare=function(z,W,he,Ae,He){if(ge(z,D)&&(z=F.from(z,z.offset,z.byteLength)),!F.isBuffer(z))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof z);if(W===void 0&&(W=0),he===void 0&&(he=z?z.length:0),Ae===void 0&&(Ae=0),He===void 0&&(He=this.length),W<0||he>z.length||Ae<0||He>this.length)throw new RangeError("out of range index");if(Ae>=He&&W>=he)return 0;if(Ae>=He)return-1;if(W>=he)return 1;if(W>>>=0,he>>>=0,Ae>>>=0,He>>>=0,this===z)return 0;let pt=He-Ae,Vt=he-W;const ut=Math.min(pt,Vt),Tt=this.slice(Ae,He),Mt=z.slice(W,he);for(let Xt=0;Xt<ut;++Xt)if(Tt[Xt]!==Mt[Xt]){pt=Tt[Xt],Vt=Mt[Xt];break}return pt<Vt?-1:Vt<pt?1:0};function Ne(H,z,W,he,Ae){if(H.length===0)return-1;if(typeof W=="string"?(he=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),W=+W,De(W)&&(W=Ae?0:H.length-1),W<0&&(W=H.length+W),W>=H.length){if(Ae)return-1;W=H.length-1}else if(W<0)if(Ae)W=0;else return-1;if(typeof z=="string"&&(z=F.from(z,he)),F.isBuffer(z))return z.length===0?-1:Re(H,z,W,he,Ae);if(typeof z=="number")return z=z&255,typeof D.prototype.indexOf=="function"?Ae?D.prototype.indexOf.call(H,z,W):D.prototype.lastIndexOf.call(H,z,W):Re(H,[z],W,he,Ae);throw new TypeError("val must be string, number or Buffer")}function Re(H,z,W,he,Ae){let He=1,pt=H.length,Vt=z.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(H.length<2||z.length<2)return-1;He=2,pt/=2,Vt/=2,W/=2}function ut(Mt,Xt){return He===1?Mt[Xt]:Mt.readUInt16BE(Xt*He)}let Tt;if(Ae){let Mt=-1;for(Tt=W;Tt<pt;Tt++)if(ut(H,Tt)===ut(z,Mt===-1?0:Tt-Mt)){if(Mt===-1&&(Mt=Tt),Tt-Mt+1===Vt)return Mt*He}else Mt!==-1&&(Tt-=Tt-Mt),Mt=-1}else for(W+Vt>pt&&(W=pt-Vt),Tt=W;Tt>=0;Tt--){let Mt=!0;for(let Xt=0;Xt<Vt;Xt++)if(ut(H,Tt+Xt)!==ut(z,Xt)){Mt=!1;break}if(Mt)return Tt}return-1}F.prototype.includes=function(z,W,he){return this.indexOf(z,W,he)!==-1},F.prototype.indexOf=function(z,W,he){return Ne(this,z,W,he,!0)},F.prototype.lastIndexOf=function(z,W,he){return Ne(this,z,W,he,!1)};function Ce(H,z,W,he){W=Number(W)||0;const Ae=H.length-W;he?(he=Number(he),he>Ae&&(he=Ae)):he=Ae;const He=z.length;he>He/2&&(he=He/2);let pt;for(pt=0;pt<he;++pt){const Vt=parseInt(z.substr(pt*2,2),16);if(De(Vt))return pt;H[W+pt]=Vt}return pt}function Fe(H,z,W,he){return tt(ft(z,H.length-W),H,W,he)}function Qe(H,z,W,he){return tt(vt(z),H,W,he)}function Le(H,z,W,he){return tt(Be(z),H,W,he)}function Ie(H,z,W,he){return tt(M(z,H.length-W),H,W,he)}F.prototype.write=function(z,W,he,Ae){if(W===void 0)Ae="utf8",he=this.length,W=0;else if(he===void 0&&typeof W=="string")Ae=W,he=this.length,W=0;else if(isFinite(W))W=W>>>0,isFinite(he)?(he=he>>>0,Ae===void 0&&(Ae="utf8")):(Ae=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const He=this.length-W;if((he===void 0||he>He)&&(he=He),z.length>0&&(he<0||W<0)||W>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");let pt=!1;for(;;)switch(Ae){case"hex":return Ce(this,z,W,he);case"utf8":case"utf-8":return Fe(this,z,W,he);case"ascii":case"latin1":case"binary":return Qe(this,z,W,he);case"base64":return Le(this,z,W,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ie(this,z,W,he);default:if(pt)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),pt=!0}},F.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(H,z,W){return z===0&&W===H.length?E.fromByteArray(H):E.fromByteArray(H.slice(z,W))}function me(H,z,W){W=Math.min(H.length,W);const he=[];let Ae=z;for(;Ae<W;){const He=H[Ae];let pt=null,Vt=He>239?4:He>223?3:He>191?2:1;if(Ae+Vt<=W){let ut,Tt,Mt,Xt;switch(Vt){case 1:He<128&&(pt=He);break;case 2:ut=H[Ae+1],(ut&192)===128&&(Xt=(He&31)<<6|ut&63,Xt>127&&(pt=Xt));break;case 3:ut=H[Ae+1],Tt=H[Ae+2],(ut&192)===128&&(Tt&192)===128&&(Xt=(He&15)<<12|(ut&63)<<6|Tt&63,Xt>2047&&(Xt<55296||Xt>57343)&&(pt=Xt));break;case 4:ut=H[Ae+1],Tt=H[Ae+2],Mt=H[Ae+3],(ut&192)===128&&(Tt&192)===128&&(Mt&192)===128&&(Xt=(He&15)<<18|(ut&63)<<12|(Tt&63)<<6|Mt&63,Xt>65535&&Xt<1114112&&(pt=Xt))}}pt===null?(pt=65533,Vt=1):pt>65535&&(pt-=65536,he.push(pt>>>10&1023|55296),pt=56320|pt&1023),he.push(pt),Ae+=Vt}return le(he)}const Te=4096;function le(H){const z=H.length;if(z<=Te)return String.fromCharCode.apply(String,H);let W="",he=0;for(;he<z;)W+=String.fromCharCode.apply(String,H.slice(he,he+=Te));return W}function oe(H,z,W){let he="";W=Math.min(H.length,W);for(let Ae=z;Ae<W;++Ae)he+=String.fromCharCode(H[Ae]&127);return he}function J(H,z,W){let he="";W=Math.min(H.length,W);for(let Ae=z;Ae<W;++Ae)he+=String.fromCharCode(H[Ae]);return he}function xe(H,z,W){const he=H.length;(!z||z<0)&&(z=0),(!W||W<0||W>he)&&(W=he);let Ae="";for(let He=z;He<W;++He)Ae+=Ke[H[He]];return Ae}function Me(H,z,W){const he=H.slice(z,W);let Ae="";for(let He=0;He<he.length-1;He+=2)Ae+=String.fromCharCode(he[He]+he[He+1]*256);return Ae}F.prototype.slice=function(z,W){const he=this.length;z=~~z,W=W===void 0?he:~~W,z<0?(z+=he,z<0&&(z=0)):z>he&&(z=he),W<0?(W+=he,W<0&&(W=0)):W>he&&(W=he),W<z&&(W=z);const Ae=this.subarray(z,W);return Object.setPrototypeOf(Ae,F.prototype),Ae};function Ee(H,z,W){if(H%1!==0||H<0)throw new RangeError("offset is not uint");if(H+z>W)throw new RangeError("Trying to access beyond buffer length")}F.prototype.readUintLE=F.prototype.readUIntLE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Ae=this[z],He=1,pt=0;for(;++pt<W&&(He*=256);)Ae+=this[z+pt]*He;return Ae},F.prototype.readUintBE=F.prototype.readUIntBE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Ae=this[z+--W],He=1;for(;W>0&&(He*=256);)Ae+=this[z+--W]*He;return Ae},F.prototype.readUint8=F.prototype.readUInt8=function(z,W){return z=z>>>0,W||Ee(z,1,this.length),this[z]},F.prototype.readUint16LE=F.prototype.readUInt16LE=function(z,W){return z=z>>>0,W||Ee(z,2,this.length),this[z]|this[z+1]<<8},F.prototype.readUint16BE=F.prototype.readUInt16BE=function(z,W){return z=z>>>0,W||Ee(z,2,this.length),this[z]<<8|this[z+1]},F.prototype.readUint32LE=F.prototype.readUInt32LE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),(this[z]|this[z+1]<<8|this[z+2]<<16)+this[z+3]*16777216},F.prototype.readUint32BE=F.prototype.readUInt32BE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),this[z]*16777216+(this[z+1]<<16|this[z+2]<<8|this[z+3])},F.prototype.readBigUInt64LE=Nt(function(z){z=z>>>0,Oe(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ve(z,this.length-8);const Ae=W+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24,He=this[++z]+this[++z]*2**8+this[++z]*2**16+he*2**24;return BigInt(Ae)+(BigInt(He)<<BigInt(32))}),F.prototype.readBigUInt64BE=Nt(function(z){z=z>>>0,Oe(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ve(z,this.length-8);const Ae=W*2**24+this[++z]*2**16+this[++z]*2**8+this[++z],He=this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+he;return(BigInt(Ae)<<BigInt(32))+BigInt(He)}),F.prototype.readIntLE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Ae=this[z],He=1,pt=0;for(;++pt<W&&(He*=256);)Ae+=this[z+pt]*He;return He*=128,Ae>=He&&(Ae-=Math.pow(2,8*W)),Ae},F.prototype.readIntBE=function(z,W,he){z=z>>>0,W=W>>>0,he||Ee(z,W,this.length);let Ae=W,He=1,pt=this[z+--Ae];for(;Ae>0&&(He*=256);)pt+=this[z+--Ae]*He;return He*=128,pt>=He&&(pt-=Math.pow(2,8*W)),pt},F.prototype.readInt8=function(z,W){return z=z>>>0,W||Ee(z,1,this.length),this[z]&128?(255-this[z]+1)*-1:this[z]},F.prototype.readInt16LE=function(z,W){z=z>>>0,W||Ee(z,2,this.length);const he=this[z]|this[z+1]<<8;return he&32768?he|4294901760:he},F.prototype.readInt16BE=function(z,W){z=z>>>0,W||Ee(z,2,this.length);const he=this[z+1]|this[z]<<8;return he&32768?he|4294901760:he},F.prototype.readInt32LE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),this[z]|this[z+1]<<8|this[z+2]<<16|this[z+3]<<24},F.prototype.readInt32BE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),this[z]<<24|this[z+1]<<16|this[z+2]<<8|this[z+3]},F.prototype.readBigInt64LE=Nt(function(z){z=z>>>0,Oe(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ve(z,this.length-8);const Ae=this[z+4]+this[z+5]*2**8+this[z+6]*2**16+(he<<24);return(BigInt(Ae)<<BigInt(32))+BigInt(W+this[++z]*2**8+this[++z]*2**16+this[++z]*2**24)}),F.prototype.readBigInt64BE=Nt(function(z){z=z>>>0,Oe(z,"offset");const W=this[z],he=this[z+7];(W===void 0||he===void 0)&&ve(z,this.length-8);const Ae=(W<<24)+this[++z]*2**16+this[++z]*2**8+this[++z];return(BigInt(Ae)<<BigInt(32))+BigInt(this[++z]*2**24+this[++z]*2**16+this[++z]*2**8+he)}),F.prototype.readFloatLE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),C.read(this,z,!0,23,4)},F.prototype.readFloatBE=function(z,W){return z=z>>>0,W||Ee(z,4,this.length),C.read(this,z,!1,23,4)},F.prototype.readDoubleLE=function(z,W){return z=z>>>0,W||Ee(z,8,this.length),C.read(this,z,!0,52,8)},F.prototype.readDoubleBE=function(z,W){return z=z>>>0,W||Ee(z,8,this.length),C.read(this,z,!1,52,8)};function We(H,z,W,he,Ae,He){if(!F.isBuffer(H))throw new TypeError('"buffer" argument must be a Buffer instance');if(z>Ae||z<He)throw new RangeError('"value" argument is out of bounds');if(W+he>H.length)throw new RangeError("Index out of range")}F.prototype.writeUintLE=F.prototype.writeUIntLE=function(z,W,he,Ae){if(z=+z,W=W>>>0,he=he>>>0,!Ae){const Vt=Math.pow(2,8*he)-1;We(this,z,W,he,Vt,0)}let He=1,pt=0;for(this[W]=z&255;++pt<he&&(He*=256);)this[W+pt]=z/He&255;return W+he},F.prototype.writeUintBE=F.prototype.writeUIntBE=function(z,W,he,Ae){if(z=+z,W=W>>>0,he=he>>>0,!Ae){const Vt=Math.pow(2,8*he)-1;We(this,z,W,he,Vt,0)}let He=he-1,pt=1;for(this[W+He]=z&255;--He>=0&&(pt*=256);)this[W+He]=z/pt&255;return W+he},F.prototype.writeUint8=F.prototype.writeUInt8=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,1,255,0),this[W]=z&255,W+1},F.prototype.writeUint16LE=F.prototype.writeUInt16LE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,2,65535,0),this[W]=z&255,this[W+1]=z>>>8,W+2},F.prototype.writeUint16BE=F.prototype.writeUInt16BE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,2,65535,0),this[W]=z>>>8,this[W+1]=z&255,W+2},F.prototype.writeUint32LE=F.prototype.writeUInt32LE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,4,4294967295,0),this[W+3]=z>>>24,this[W+2]=z>>>16,this[W+1]=z>>>8,this[W]=z&255,W+4},F.prototype.writeUint32BE=F.prototype.writeUInt32BE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,4,4294967295,0),this[W]=z>>>24,this[W+1]=z>>>16,this[W+2]=z>>>8,this[W+3]=z&255,W+4};function kt(H,z,W,he,Ae){fe(z,he,Ae,H,W,7);let He=Number(z&BigInt(4294967295));H[W++]=He,He=He>>8,H[W++]=He,He=He>>8,H[W++]=He,He=He>>8,H[W++]=He;let pt=Number(z>>BigInt(32)&BigInt(4294967295));return H[W++]=pt,pt=pt>>8,H[W++]=pt,pt=pt>>8,H[W++]=pt,pt=pt>>8,H[W++]=pt,W}function at(H,z,W,he,Ae){fe(z,he,Ae,H,W,7);let He=Number(z&BigInt(4294967295));H[W+7]=He,He=He>>8,H[W+6]=He,He=He>>8,H[W+5]=He,He=He>>8,H[W+4]=He;let pt=Number(z>>BigInt(32)&BigInt(4294967295));return H[W+3]=pt,pt=pt>>8,H[W+2]=pt,pt=pt>>8,H[W+1]=pt,pt=pt>>8,H[W]=pt,W+8}F.prototype.writeBigUInt64LE=Nt(function(z,W=0){return kt(this,z,W,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeBigUInt64BE=Nt(function(z,W=0){return at(this,z,W,BigInt(0),BigInt("0xffffffffffffffff"))}),F.prototype.writeIntLE=function(z,W,he,Ae){if(z=+z,W=W>>>0,!Ae){const ut=Math.pow(2,8*he-1);We(this,z,W,he,ut-1,-ut)}let He=0,pt=1,Vt=0;for(this[W]=z&255;++He<he&&(pt*=256);)z<0&&Vt===0&&this[W+He-1]!==0&&(Vt=1),this[W+He]=(z/pt>>0)-Vt&255;return W+he},F.prototype.writeIntBE=function(z,W,he,Ae){if(z=+z,W=W>>>0,!Ae){const ut=Math.pow(2,8*he-1);We(this,z,W,he,ut-1,-ut)}let He=he-1,pt=1,Vt=0;for(this[W+He]=z&255;--He>=0&&(pt*=256);)z<0&&Vt===0&&this[W+He+1]!==0&&(Vt=1),this[W+He]=(z/pt>>0)-Vt&255;return W+he},F.prototype.writeInt8=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,1,127,-128),z<0&&(z=255+z+1),this[W]=z&255,W+1},F.prototype.writeInt16LE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,2,32767,-32768),this[W]=z&255,this[W+1]=z>>>8,W+2},F.prototype.writeInt16BE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,2,32767,-32768),this[W]=z>>>8,this[W+1]=z&255,W+2},F.prototype.writeInt32LE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,4,2147483647,-2147483648),this[W]=z&255,this[W+1]=z>>>8,this[W+2]=z>>>16,this[W+3]=z>>>24,W+4},F.prototype.writeInt32BE=function(z,W,he){return z=+z,W=W>>>0,he||We(this,z,W,4,2147483647,-2147483648),z<0&&(z=4294967295+z+1),this[W]=z>>>24,this[W+1]=z>>>16,this[W+2]=z>>>8,this[W+3]=z&255,W+4},F.prototype.writeBigInt64LE=Nt(function(z,W=0){return kt(this,z,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),F.prototype.writeBigInt64BE=Nt(function(z,W=0){return at(this,z,W,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function _t(H,z,W,he,Ae,He){if(W+he>H.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function jt(H,z,W,he,Ae){return z=+z,W=W>>>0,Ae||_t(H,z,W,4),C.write(H,z,W,he,23,4),W+4}F.prototype.writeFloatLE=function(z,W,he){return jt(this,z,W,!0,he)},F.prototype.writeFloatBE=function(z,W,he){return jt(this,z,W,!1,he)};function Dt(H,z,W,he,Ae){return z=+z,W=W>>>0,Ae||_t(H,z,W,8),C.write(H,z,W,he,52,8),W+8}F.prototype.writeDoubleLE=function(z,W,he){return Dt(this,z,W,!0,he)},F.prototype.writeDoubleBE=function(z,W,he){return Dt(this,z,W,!1,he)},F.prototype.copy=function(z,W,he,Ae){if(!F.isBuffer(z))throw new TypeError("argument should be a Buffer");if(he||(he=0),!Ae&&Ae!==0&&(Ae=this.length),W>=z.length&&(W=z.length),W||(W=0),Ae>0&&Ae<he&&(Ae=he),Ae===he||z.length===0||this.length===0)return 0;if(W<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),z.length-W<Ae-he&&(Ae=z.length-W+he);const He=Ae-he;return this===z&&typeof D.prototype.copyWithin=="function"?this.copyWithin(W,he,Ae):D.prototype.set.call(z,this.subarray(he,Ae),W),He},F.prototype.fill=function(z,W,he,Ae){if(typeof z=="string"){if(typeof W=="string"?(Ae=W,W=0,he=this.length):typeof he=="string"&&(Ae=he,he=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!F.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(z.length===1){const pt=z.charCodeAt(0);(Ae==="utf8"&&pt<128||Ae==="latin1")&&(z=pt)}}else typeof z=="number"?z=z&255:typeof z=="boolean"&&(z=Number(z));if(W<0||this.length<W||this.length<he)throw new RangeError("Out of range index");if(he<=W)return this;W=W>>>0,he=he===void 0?this.length:he>>>0,z||(z=0);let He;if(typeof z=="number")for(He=W;He<he;++He)this[He]=z;else{const pt=F.isBuffer(z)?z:F.from(z,Ae),Vt=pt.length;if(Vt===0)throw new TypeError('The value "'+z+'" is invalid for argument "value"');for(He=0;He<he-W;++He)this[He+W]=pt[He%Vt]}return this};const Gt={};function ye(H,z,W){Gt[H]=class extends W{constructor(){super(),Object.defineProperty(this,"message",{value:z.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${H}]`,this.stack,delete this.name}get code(){return H}set code(Ae){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ae,writable:!0})}toString(){return`${this.name} [${H}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(H){return H?`${H} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(H,z){return`The "${H}" argument must be of type number. Received type ${typeof z}`},TypeError),ye("ERR_OUT_OF_RANGE",function(H,z,W){let he=`The value of "${H}" is out of range.`,Ae=W;return Number.isInteger(W)&&Math.abs(W)>2**32?Ae=I(String(W)):typeof W=="bigint"&&(Ae=String(W),(W>BigInt(2)**BigInt(32)||W<-(BigInt(2)**BigInt(32)))&&(Ae=I(Ae)),Ae+="n"),he+=` It must be ${z}. Received ${Ae}`,he},RangeError);function I(H){let z="",W=H.length;const he=H[0]==="-"?1:0;for(;W>=he+4;W-=3)z=`_${H.slice(W-3,W)}${z}`;return`${H.slice(0,W)}${z}`}function G(H,z,W){Oe(z,"offset"),(H[z]===void 0||H[z+W]===void 0)&&ve(z,H.length-(W+1))}function fe(H,z,W,he,Ae,He){if(H>W||H<z){const pt=typeof z=="bigint"?"n":"";let Vt;throw z===0||z===BigInt(0)?Vt=`>= 0${pt} and < 2${pt} ** ${(He+1)*8}${pt}`:Vt=`>= -(2${pt} ** ${(He+1)*8-1}${pt}) and < 2 ** ${(He+1)*8-1}${pt}`,new Gt.ERR_OUT_OF_RANGE("value",Vt,H)}G(he,Ae,He)}function Oe(H,z){if(typeof H!="number")throw new Gt.ERR_INVALID_ARG_TYPE(z,"number",H)}function ve(H,z,W){throw Math.floor(H)!==H?(Oe(H,W),new Gt.ERR_OUT_OF_RANGE("offset","an integer",H)):z<0?new Gt.ERR_BUFFER_OUT_OF_BOUNDS:new Gt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${z}`,H)}const ke=/[^+/0-9A-Za-z-_]/g;function ce(H){if(H=H.split("=")[0],H=H.trim().replace(ke,""),H.length<2)return"";for(;H.length%4!==0;)H=H+"=";return H}function ft(H,z){z=z||1/0;let W;const he=H.length;let Ae=null;const He=[];for(let pt=0;pt<he;++pt){if(W=H.charCodeAt(pt),W>55295&&W<57344){if(!Ae){if(W>56319){(z-=3)>-1&&He.push(239,191,189);continue}else if(pt+1===he){(z-=3)>-1&&He.push(239,191,189);continue}Ae=W;continue}if(W<56320){(z-=3)>-1&&He.push(239,191,189),Ae=W;continue}W=(Ae-55296<<10|W-56320)+65536}else Ae&&(z-=3)>-1&&He.push(239,191,189);if(Ae=null,W<128){if((z-=1)<0)break;He.push(W)}else if(W<2048){if((z-=2)<0)break;He.push(W>>6|192,W&63|128)}else if(W<65536){if((z-=3)<0)break;He.push(W>>12|224,W>>6&63|128,W&63|128)}else if(W<1114112){if((z-=4)<0)break;He.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw new Error("Invalid code point")}return He}function vt(H){const z=[];for(let W=0;W<H.length;++W)z.push(H.charCodeAt(W)&255);return z}function M(H,z){let W,he,Ae;const He=[];for(let pt=0;pt<H.length&&!((z-=2)<0);++pt)W=H.charCodeAt(pt),he=W>>8,Ae=W%256,He.push(Ae),He.push(he);return He}function Be(H){return E.toByteArray(ce(H))}function tt(H,z,W,he){let Ae;for(Ae=0;Ae<he&&!(Ae+W>=z.length||Ae>=H.length);++Ae)z[Ae+W]=H[Ae];return Ae}function ge(H,z){return H instanceof z||H!=null&&H.constructor!=null&&H.constructor.name!=null&&H.constructor.name===z.name}function De(H){return H!==H}const Ke=function(){const H="0123456789abcdef",z=new Array(256);for(let W=0;W<16;++W){const he=W*16;for(let Ae=0;Ae<16;++Ae)z[he+Ae]=H[W]+H[Ae]}return z}();function Nt(H){return typeof BigInt>"u"?pe:H}function pe(){throw new Error("BigInt not supported")}})(t);const x=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=x,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(lS)),lS}var cS,OI;function Wr(){if(OI)return cS;OI=1;class e extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);let r="";for(let a=0;a<n.length;a++)r+=`    ${n[a].stack}
`;super(r),this.name="AggregateError",this.errors=n}}return cS={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,n){return t.includes(n)},ArrayPrototypeIndexOf(t,n){return t.indexOf(n)},ArrayPrototypeJoin(t,n){return t.join(n)},ArrayPrototypeMap(t,n){return t.map(n)},ArrayPrototypePop(t,n){return t.pop(n)},ArrayPrototypePush(t,n){return t.push(n)},ArrayPrototypeSlice(t,n,r){return t.slice(n,r)},Error,FunctionPrototypeCall(t,n,...r){return t.call(n,...r)},FunctionPrototypeSymbolHasInstance(t,n){return Function.prototype[Symbol.hasInstance].call(t,n)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,n){return Object.defineProperties(t,n)},ObjectDefineProperty(t,n,r){return Object.defineProperty(t,n,r)},ObjectGetOwnPropertyDescriptor(t,n){return Object.getOwnPropertyDescriptor(t,n)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,n){return Object.setPrototypeOf(t,n)},Promise,PromisePrototypeCatch(t,n){return t.catch(n)},PromisePrototypeThen(t,n,r){return t.then(n,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,n){return t.test(n)},SafeSet:Set,String,StringPrototypeSlice(t,n,r){return t.slice(n,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,n,r){return t.set(n,r)},Boolean,Uint8Array},cS}var uS={exports:{}},dS,DI;function eP(){return DI||(DI=1,dS={format(e,...t){return e.replace(/%([sdifj])/g,function(...[n,r]){const a=t.shift();return r==="f"?a.toFixed(6):r==="j"?JSON.stringify(a):r==="s"&&typeof a=="object"?`${a.constructor!==Object?a.constructor.name:""} {}`.trim():a.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),dS}var fS,jI;function xi(){if(jI)return fS;jI=1;const{format:e,inspect:t}=eP(),{AggregateError:n}=Wr(),r=globalThis.AggregateError||n,a=Symbol("kIsNodeError"),i=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",l={};function u(_,x){if(!_)throw new l.ERR_INTERNAL_ASSERTION(x)}function d(_){let x="",S=_.length;const E=_[0]==="-"?1:0;for(;S>=E+4;S-=3)x=`_${_.slice(S-3,S)}${x}`;return`${_.slice(0,S)}${x}`}function h(_,x,S){if(typeof x=="function")return u(x.length<=S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${x.length}).`),x(...S);const E=(x.match(/%[dfijoOs]/g)||[]).length;return u(E===S.length,`Code: ${_}; The provided arguments length (${S.length}) does not match the required ones (${E}).`),S.length===0?x:e(x,...S)}function p(_,x,S){S||(S=Error);class E extends S{constructor(...k){super(h(_,x,k))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(E.prototype,{name:{value:S.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),E.prototype.code=_,E.prototype[a]=!0,l[_]=E}function g(_){const x=s+_.name;return Object.defineProperty(_,"name",{value:x}),_}function v(_,x){if(_&&x&&_!==x){if(Array.isArray(x.errors))return x.errors.push(_),x;const S=new r([x,_],x.message);return S.code=x.code,S}return _||x}class b extends Error{constructor(x="The operation was aborted",S=void 0){if(S!==void 0&&typeof S!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",S);super(x,S),this.code="ABORT_ERR",this.name="AbortError"}}return p("ERR_ASSERTION","%s",Error),p("ERR_INVALID_ARG_TYPE",(_,x,S)=>{u(typeof _=="string","'name' must be a string"),Array.isArray(x)||(x=[x]);let E="The ";_.endsWith(" argument")?E+=`${_} `:E+=`"${_}" ${_.includes(".")?"property":"argument"} `,E+="must be ";const C=[],k=[],R=[];for(const O of x)u(typeof O=="string","All expected entries have to be of type string"),i.includes(O)?C.push(O.toLowerCase()):o.test(O)?k.push(O):(u(O!=="object",'The value "object" should be written as "Object"'),R.push(O));if(k.length>0){const O=C.indexOf("object");O!==-1&&(C.splice(C,O,1),k.push("Object"))}if(C.length>0){switch(C.length){case 1:E+=`of type ${C[0]}`;break;case 2:E+=`one of type ${C[0]} or ${C[1]}`;break;default:{const O=C.pop();E+=`one of type ${C.join(", ")}, or ${O}`}}(k.length>0||R.length>0)&&(E+=" or ")}if(k.length>0){switch(k.length){case 1:E+=`an instance of ${k[0]}`;break;case 2:E+=`an instance of ${k[0]} or ${k[1]}`;break;default:{const O=k.pop();E+=`an instance of ${k.join(", ")}, or ${O}`}}R.length>0&&(E+=" or ")}switch(R.length){case 0:break;case 1:R[0].toLowerCase()!==R[0]&&(E+="an "),E+=`${R[0]}`;break;case 2:E+=`one of ${R[0]} or ${R[1]}`;break;default:{const O=R.pop();E+=`one of ${R.join(", ")}, or ${O}`}}if(S==null)E+=`. Received ${S}`;else if(typeof S=="function"&&S.name)E+=`. Received function ${S.name}`;else if(typeof S=="object"){var D;if((D=S.constructor)!==null&&D!==void 0&&D.name)E+=`. Received an instance of ${S.constructor.name}`;else{const O=t(S,{depth:-1});E+=`. Received ${O}`}}else{let O=t(S,{colors:!1});O.length>25&&(O=`${O.slice(0,25)}...`),E+=`. Received type ${typeof S} (${O})`}return E},TypeError),p("ERR_INVALID_ARG_VALUE",(_,x,S="is invalid")=>{let E=t(x);return E.length>128&&(E=E.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${S}. Received ${E}`},TypeError),p("ERR_INVALID_RETURN_VALUE",(_,x,S)=>{var E;const C=S!=null&&(E=S.constructor)!==null&&E!==void 0&&E.name?`instance of ${S.constructor.name}`:`type ${typeof S}`;return`Expected ${_} to be returned from the "${x}" function but got ${C}.`},TypeError),p("ERR_MISSING_ARGS",(..._)=>{u(_.length>0,"At least one arg needs to be specified");let x;const S=_.length;switch(_=(Array.isArray(_)?_:[_]).map(E=>`"${E}"`).join(" or "),S){case 1:x+=`The ${_[0]} argument`;break;case 2:x+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const E=_.pop();x+=`The ${_.join(", ")}, and ${E} arguments`}break}return`${x} must be specified`},TypeError),p("ERR_OUT_OF_RANGE",(_,x,S)=>{u(x,'Missing "range" argument');let E;if(Number.isInteger(S)&&Math.abs(S)>2**32)E=d(String(S));else if(typeof S=="bigint"){E=String(S);const C=BigInt(2)**BigInt(32);(S>C||S<-C)&&(E=d(E)),E+="n"}else E=t(S);return`The value of "${_}" is out of range. It must be ${x}. Received ${E}`},RangeError),p("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),p("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),p("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),p("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),p("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),p("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),p("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),p("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),p("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),p("ERR_STREAM_WRITE_AFTER_END","write after end",Error),p("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),fS={AbortError:b,aggregateTwoErrors:g(v),hideStackFrames:g,codes:l},fS}var Sm={exports:{}},MI;function y0(){if(MI)return Sm.exports;MI=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return Sm.exports=e,Sm.exports.AbortSignal=t,Sm.exports.default=e,Sm.exports}var bb={exports:{}},PI;function qw(){if(PI)return bb.exports;PI=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(k,R,D){return Function.prototype.apply.call(k,R,D)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(k){return Object.getOwnPropertyNames(k).concat(Object.getOwnPropertySymbols(k))}:n=function(k){return Object.getOwnPropertyNames(k)};function r(C){console&&console.warn&&console.warn(C)}var a=Number.isNaN||function(k){return k!==k};function i(){i.init.call(this)}bb.exports=i,bb.exports.once=x,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||a(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(k){if(typeof k!="number"||k<0||a(k))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+k+".");return this._maxListeners=k,this};function l(C){return C._maxListeners===void 0?i.defaultMaxListeners:C._maxListeners}i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(k){for(var R=[],D=1;D<arguments.length;D++)R.push(arguments[D]);var O=k==="error",L=this._events;if(L!==void 0)O=O&&L.error===void 0;else if(!O)return!1;if(O){var B;if(R.length>0&&(B=R[0]),B instanceof Error)throw B;var Y=new Error("Unhandled error."+(B?" ("+B.message+")":""));throw Y.context=B,Y}var F=L[k];if(F===void 0)return!1;if(typeof F=="function")t(F,this,R);else for(var Z=F.length,q=v(F,Z),D=0;D<Z;++D)t(q[D],this,R);return!0};function u(C,k,R,D){var O,L,B;if(s(R),L=C._events,L===void 0?(L=C._events=Object.create(null),C._eventsCount=0):(L.newListener!==void 0&&(C.emit("newListener",k,R.listener?R.listener:R),L=C._events),B=L[k]),B===void 0)B=L[k]=R,++C._eventsCount;else if(typeof B=="function"?B=L[k]=D?[R,B]:[B,R]:D?B.unshift(R):B.push(R),O=l(C),O>0&&B.length>O&&!B.warned){B.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+B.length+" "+String(k)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=C,Y.type=k,Y.count=B.length,r(Y)}return C}i.prototype.addListener=function(k,R){return u(this,k,R,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(k,R){return u(this,k,R,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(C,k,R){var D={fired:!1,wrapFn:void 0,target:C,type:k,listener:R},O=d.bind(D);return O.listener=R,D.wrapFn=O,O}i.prototype.once=function(k,R){return s(R),this.on(k,h(this,k,R)),this},i.prototype.prependOnceListener=function(k,R){return s(R),this.prependListener(k,h(this,k,R)),this},i.prototype.removeListener=function(k,R){var D,O,L,B,Y;if(s(R),O=this._events,O===void 0)return this;if(D=O[k],D===void 0)return this;if(D===R||D.listener===R)--this._eventsCount===0?this._events=Object.create(null):(delete O[k],O.removeListener&&this.emit("removeListener",k,D.listener||R));else if(typeof D!="function"){for(L=-1,B=D.length-1;B>=0;B--)if(D[B]===R||D[B].listener===R){Y=D[B].listener,L=B;break}if(L<0)return this;L===0?D.shift():b(D,L),D.length===1&&(O[k]=D[0]),O.removeListener!==void 0&&this.emit("removeListener",k,Y||R)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(k){var R,D,O;if(D=this._events,D===void 0)return this;if(D.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):D[k]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete D[k]),this;if(arguments.length===0){var L=Object.keys(D),B;for(O=0;O<L.length;++O)B=L[O],B!=="removeListener"&&this.removeAllListeners(B);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(R=D[k],typeof R=="function")this.removeListener(k,R);else if(R!==void 0)for(O=R.length-1;O>=0;O--)this.removeListener(k,R[O]);return this};function p(C,k,R){var D=C._events;if(D===void 0)return[];var O=D[k];return O===void 0?[]:typeof O=="function"?R?[O.listener||O]:[O]:R?_(O):v(O,O.length)}i.prototype.listeners=function(k){return p(this,k,!0)},i.prototype.rawListeners=function(k){return p(this,k,!1)},i.listenerCount=function(C,k){return typeof C.listenerCount=="function"?C.listenerCount(k):g.call(C,k)},i.prototype.listenerCount=g;function g(C){var k=this._events;if(k!==void 0){var R=k[C];if(typeof R=="function")return 1;if(R!==void 0)return R.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(C,k){for(var R=new Array(k),D=0;D<k;++D)R[D]=C[D];return R}function b(C,k){for(;k+1<C.length;k++)C[k]=C[k+1];C.pop()}function _(C){for(var k=new Array(C.length),R=0;R<k.length;++R)k[R]=C[R].listener||C[R];return k}function x(C,k){return new Promise(function(R,D){function O(B){C.removeListener(k,L),D(B)}function L(){typeof C.removeListener=="function"&&C.removeListener("error",O),R([].slice.call(arguments))}E(C,k,L,{once:!0}),k!=="error"&&S(C,O,{once:!0})})}function S(C,k,R){typeof C.on=="function"&&E(C,"error",k,R)}function E(C,k,R,D){if(typeof C.on=="function")D.once?C.once(k,R):C.on(k,R);else if(typeof C.addEventListener=="function")C.addEventListener(k,function O(L){D.once&&C.removeEventListener(k,O),R(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return bb.exports}var FI;function Oi(){return FI||(FI=1,function(e){const t=_u(),{format:n,inspect:r}=eP(),{codes:{ERR_INVALID_ARG_TYPE:a}}=xi(),{kResistStopPropagation:i,AggregateError:o,SymbolDispose:s}=Wr(),l=globalThis.AbortSignal||y0().AbortSignal,u=globalThis.AbortController||y0().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,h=globalThis.Blob||t.Blob,p=typeof h<"u"?function(_){return _ instanceof h}:function(_){return!1},g=(b,_)=>{if(b!==void 0&&(b===null||typeof b!="object"||!("aborted"in b)))throw new a(_,"AbortSignal",b)},v=(b,_)=>{if(typeof b!="function")throw new a(_,"Function",b)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(b){let _=!1;return function(...x){_||(_=!0,b.apply(this,x))}},createDeferredPromise:function(){let b,_;return{promise:new Promise((S,E)=>{b=S,_=E}),resolve:b,reject:_}},promisify(b){return new Promise((_,x)=>{b((S,...E)=>S?x(S):_(...E))})},debuglog(){return function(){}},format:n,inspect:r,types:{isAsyncFunction(b){return b instanceof d},isArrayBufferView(b){return ArrayBuffer.isView(b)}},isBlob:p,deprecate(b,_){return b},addAbortListener:qw().addAbortListener||function(_,x){if(_===void 0)throw new a("signal","AbortSignal",_);g(_,"signal"),v(x,"listener");let S;return _.aborted?queueMicrotask(()=>x()):(_.addEventListener("abort",x,{__proto__:null,once:!0,[i]:!0}),S=()=>{_.removeEventListener("abort",x)}),{__proto__:null,[s](){var E;(E=S)===null||E===void 0||E()}}},AbortSignalAny:l.any||function(_){if(_.length===1)return _[0];const x=new u,S=()=>x.abort();return _.forEach(E=>{g(E,"signals"),E.addEventListener("abort",S,{once:!0})}),x.signal.addEventListener("abort",()=>{_.forEach(E=>E.removeEventListener("abort",S))},{once:!0}),x.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")}(uS)),uS.exports}var vb={},hS,LI;function cg(){if(LI)return hS;LI=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:n,ArrayPrototypeMap:r,NumberIsInteger:a,NumberIsNaN:i,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:l,ObjectPrototypeHasOwnProperty:u,RegExpPrototypeExec:d,String:h,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=Wr(),{hideStackFrames:v,codes:{ERR_SOCKET_BAD_PORT:b,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:x,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:E}}=xi(),{normalizeEncoding:C}=Oi(),{isAsyncFunction:k,isArrayBufferView:R}=Oi().types,D={};function O(J){return J===(J|0)}function L(J){return J===J>>>0}const B=/^[0-7]+$/,Y="must be a 32-bit unsigned integer or an octal string";function F(J,xe,Me){if(typeof J>"u"&&(J=Me),typeof J=="string"){if(d(B,J)===null)throw new x(xe,J,Y);J=l(J,8)}return ne(J,xe),J}const Z=v((J,xe,Me=s,Ee=o)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Me||J>Ee)throw new S(xe,`>= ${Me} && <= ${Ee}`,J)}),q=v((J,xe,Me=-2147483648,Ee=2147483647)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);if(J<Me||J>Ee)throw new S(xe,`>= ${Me} && <= ${Ee}`,J)}),ne=v((J,xe,Me=!1)=>{if(typeof J!="number")throw new _(xe,"number",J);if(!a(J))throw new S(xe,"an integer",J);const Ee=Me?1:0,We=4294967295;if(J<Ee||J>We)throw new S(xe,`>= ${Ee} && <= ${We}`,J)});function ae(J,xe){if(typeof J!="string")throw new _(xe,"string",J)}function re(J,xe,Me=void 0,Ee){if(typeof J!="number")throw new _(xe,"number",J);if(Me!=null&&J<Me||Ee!=null&&J>Ee||(Me!=null||Ee!=null)&&i(J))throw new S(xe,`${Me!=null?`>= ${Me}`:""}${Me!=null&&Ee!=null?" && ":""}${Ee!=null?`<= ${Ee}`:""}`,J)}const ee=v((J,xe,Me)=>{if(!t(Me,J)){const We="must be one of: "+n(r(Me,kt=>typeof kt=="string"?`'${kt}'`:h(kt)),", ");throw new x(xe,J,We)}});function ie(J,xe){if(typeof J!="boolean")throw new _(xe,"boolean",J)}function U(J,xe,Me){return J==null||!u(J,xe)?Me:J[xe]}const Q=v((J,xe,Me=null)=>{const Ee=U(Me,"allowArray",!1),We=U(Me,"allowFunction",!1);if(!U(Me,"nullable",!1)&&J===null||!Ee&&e(J)||typeof J!="object"&&(!We||typeof J!="function"))throw new _(xe,"Object",J)}),X=v((J,xe)=>{if(J!=null&&typeof J!="object"&&typeof J!="function")throw new _(xe,"a dictionary",J)}),de=v((J,xe,Me=0)=>{if(!e(J))throw new _(xe,"Array",J);if(J.length<Me){const Ee=`must be longer than ${Me}`;throw new x(xe,J,Ee)}});function be(J,xe){de(J,xe);for(let Me=0;Me<J.length;Me++)ae(J[Me],`${xe}[${Me}]`)}function _e(J,xe){de(J,xe);for(let Me=0;Me<J.length;Me++)ie(J[Me],`${xe}[${Me}]`)}function Pe(J,xe){de(J,xe);for(let Me=0;Me<J.length;Me++){const Ee=J[Me],We=`${xe}[${Me}]`;if(Ee==null)throw new _(We,"AbortSignal",Ee);Qe(Ee,We)}}function Ne(J,xe="signal"){if(ae(J,xe),D[J]===void 0)throw D[p(J)]!==void 0?new E(J+" (signals must use all capital letters)"):new E(J)}const Re=v((J,xe="buffer")=>{if(!R(J))throw new _(xe,["Buffer","TypedArray","DataView"],J)});function Ce(J,xe){const Me=C(xe),Ee=J.length;if(Me==="hex"&&Ee%2!==0)throw new x("encoding",xe,`is invalid for data of length ${Ee}`)}function Fe(J,xe="Port",Me=!0){if(typeof J!="number"&&typeof J!="string"||typeof J=="string"&&g(J).length===0||+J!==+J>>>0||J>65535||J===0&&!Me)throw new b(xe,J,Me);return J|0}const Qe=v((J,xe)=>{if(J!==void 0&&(J===null||typeof J!="object"||!("aborted"in J)))throw new _(xe,"AbortSignal",J)}),Le=v((J,xe)=>{if(typeof J!="function")throw new _(xe,"Function",J)}),Ie=v((J,xe)=>{if(typeof J!="function"||k(J))throw new _(xe,"Function",J)}),V=v((J,xe)=>{if(J!==void 0)throw new _(xe,"undefined",J)});function me(J,xe,Me){if(!t(Me,J))throw new _(xe,`('${n(Me,"|")}')`,J)}const Te=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function le(J,xe){if(typeof J>"u"||!d(Te,J))throw new x(xe,J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function oe(J){if(typeof J=="string")return le(J,"hints"),J;if(e(J)){const xe=J.length;let Me="";if(xe===0)return Me;for(let Ee=0;Ee<xe;Ee++){const We=J[Ee];le(We,"hints"),Me+=We,Ee!==xe-1&&(Me+=", ")}return Me}throw new x("hints",J,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return hS={isInt32:O,isUint32:L,parseFileMode:F,validateArray:de,validateStringArray:be,validateBooleanArray:_e,validateAbortSignalArray:Pe,validateBoolean:ie,validateBuffer:Re,validateDictionary:X,validateEncoding:Ce,validateFunction:Le,validateInt32:q,validateInteger:Z,validateNumber:re,validateObject:Q,validateOneOf:ee,validatePlainFunction:Ie,validatePort:Fe,validateSignalName:Ne,validateString:ae,validateUint32:ne,validateUndefined:V,validateUnion:me,validateAbortSignal:Qe,validateLinkHeaderValue:oe},hS}var wb={exports:{}},pS={},$I;function Fd(){return $I||($I=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function t(C){return C&&C.__esModule&&Object.prototype.hasOwnProperty.call(C,"default")?C.default:C}var n={exports:{}},r=n.exports={},a,i;function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=o}catch{a=o}try{typeof clearTimeout=="function"?i=clearTimeout:i=s}catch{i=s}})();function l(C){if(a===setTimeout)return setTimeout(C,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(C,0);try{return a(C,0)}catch{try{return a.call(null,C,0)}catch{return a.call(this,C,0)}}}function u(C){if(i===clearTimeout)return clearTimeout(C);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(C);try{return i(C)}catch{try{return i.call(null,C)}catch{return i.call(this,C)}}}var d=[],h=!1,p,g=-1;function v(){!h||!p||(h=!1,p.length?d=p.concat(d):g=-1,d.length&&b())}function b(){if(!h){var C=l(v);h=!0;for(var k=d.length;k;){for(p=d,d=[];++g<k;)p&&p[g].run();g=-1,k=d.length}p=null,h=!1,u(C)}}r.nextTick=function(C){var k=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)k[R-1]=arguments[R];d.push(new _(C,k)),d.length===1&&!h&&l(b)};function _(C,k){this.fun=C,this.array=k}_.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={};function x(){}r.on=x,r.addListener=x,r.once=x,r.off=x,r.removeListener=x,r.removeAllListeners=x,r.emit=x,r.prependListener=x,r.prependOnceListener=x,r.listeners=function(C){return[]},r.binding=function(C){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(C){throw new Error("process.chdir is not supported")},r.umask=function(){return 0};var S=n.exports;const E=t(S);e.default=E,e.process=E}(pS)),pS}var mS,BI;function Jl(){if(BI)return mS;BI=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:n}=Wr(),r=n("nodejs.stream.destroyed"),a=n("nodejs.stream.errored"),i=n("nodejs.stream.readable"),o=n("nodejs.stream.writable"),s=n("nodejs.stream.disturbed"),l=n("nodejs.webstream.isClosedPromise"),u=n("nodejs.webstream.controllerErrorFunction");function d(U,Q=!1){var X;return!!(U&&typeof U.pipe=="function"&&typeof U.on=="function"&&(!Q||typeof U.pause=="function"&&typeof U.resume=="function")&&(!U._writableState||((X=U._readableState)===null||X===void 0?void 0:X.readable)!==!1)&&(!U._writableState||U._readableState))}function h(U){var Q;return!!(U&&typeof U.write=="function"&&typeof U.on=="function"&&(!U._readableState||((Q=U._writableState)===null||Q===void 0?void 0:Q.writable)!==!1))}function p(U){return!!(U&&typeof U.pipe=="function"&&U._readableState&&typeof U.on=="function"&&typeof U.write=="function")}function g(U){return U&&(U._readableState||U._writableState||typeof U.write=="function"&&typeof U.on=="function"||typeof U.pipe=="function"&&typeof U.on=="function")}function v(U){return!!(U&&!g(U)&&typeof U.pipeThrough=="function"&&typeof U.getReader=="function"&&typeof U.cancel=="function")}function b(U){return!!(U&&!g(U)&&typeof U.getWriter=="function"&&typeof U.abort=="function")}function _(U){return!!(U&&!g(U)&&typeof U.readable=="object"&&typeof U.writable=="object")}function x(U){return v(U)||b(U)||_(U)}function S(U,Q){return U==null?!1:Q===!0?typeof U[e]=="function":Q===!1?typeof U[t]=="function":typeof U[e]=="function"||typeof U[t]=="function"}function E(U){if(!g(U))return null;const Q=U._writableState,X=U._readableState,de=Q||X;return!!(U.destroyed||U[r]||de!=null&&de.destroyed)}function C(U){if(!h(U))return null;if(U.writableEnded===!0)return!0;const Q=U._writableState;return Q!=null&&Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function k(U,Q){if(!h(U))return null;if(U.writableFinished===!0)return!0;const X=U._writableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.finished)!="boolean"?null:!!(X.finished||Q===!1&&X.ended===!0&&X.length===0)}function R(U){if(!d(U))return null;if(U.readableEnded===!0)return!0;const Q=U._readableState;return!Q||Q.errored?!1:typeof(Q==null?void 0:Q.ended)!="boolean"?null:Q.ended}function D(U,Q){if(!d(U))return null;const X=U._readableState;return X!=null&&X.errored?!1:typeof(X==null?void 0:X.endEmitted)!="boolean"?null:!!(X.endEmitted||Q===!1&&X.ended===!0&&X.length===0)}function O(U){return U&&U[i]!=null?U[i]:typeof(U==null?void 0:U.readable)!="boolean"?null:E(U)?!1:d(U)&&U.readable&&!D(U)}function L(U){return U&&U[o]!=null?U[o]:typeof(U==null?void 0:U.writable)!="boolean"?null:E(U)?!1:h(U)&&U.writable&&!C(U)}function B(U,Q){return g(U)?E(U)?!0:!((Q==null?void 0:Q.readable)!==!1&&O(U)||(Q==null?void 0:Q.writable)!==!1&&L(U)):null}function Y(U){var Q,X;return g(U)?U.writableErrored?U.writableErrored:(Q=(X=U._writableState)===null||X===void 0?void 0:X.errored)!==null&&Q!==void 0?Q:null:null}function F(U){var Q,X;return g(U)?U.readableErrored?U.readableErrored:(Q=(X=U._readableState)===null||X===void 0?void 0:X.errored)!==null&&Q!==void 0?Q:null:null}function Z(U){if(!g(U))return null;if(typeof U.closed=="boolean")return U.closed;const Q=U._writableState,X=U._readableState;return typeof(Q==null?void 0:Q.closed)=="boolean"||typeof(X==null?void 0:X.closed)=="boolean"?(Q==null?void 0:Q.closed)||(X==null?void 0:X.closed):typeof U._closed=="boolean"&&q(U)?U._closed:null}function q(U){return typeof U._closed=="boolean"&&typeof U._defaultKeepAlive=="boolean"&&typeof U._removedConnection=="boolean"&&typeof U._removedContLen=="boolean"}function ne(U){return typeof U._sent100=="boolean"&&q(U)}function ae(U){var Q;return typeof U._consuming=="boolean"&&typeof U._dumped=="boolean"&&((Q=U.req)===null||Q===void 0?void 0:Q.upgradeOrConnect)===void 0}function re(U){if(!g(U))return null;const Q=U._writableState,X=U._readableState,de=Q||X;return!de&&ne(U)||!!(de&&de.autoDestroy&&de.emitClose&&de.closed===!1)}function ee(U){var Q;return!!(U&&((Q=U[s])!==null&&Q!==void 0?Q:U.readableDidRead||U.readableAborted))}function ie(U){var Q,X,de,be,_e,Pe,Ne,Re,Ce,Fe;return!!(U&&((Q=(X=(de=(be=(_e=(Pe=U[a])!==null&&Pe!==void 0?Pe:U.readableErrored)!==null&&_e!==void 0?_e:U.writableErrored)!==null&&be!==void 0?be:(Ne=U._readableState)===null||Ne===void 0?void 0:Ne.errorEmitted)!==null&&de!==void 0?de:(Re=U._writableState)===null||Re===void 0?void 0:Re.errorEmitted)!==null&&X!==void 0?X:(Ce=U._readableState)===null||Ce===void 0?void 0:Ce.errored)!==null&&Q!==void 0?Q:!((Fe=U._writableState)===null||Fe===void 0)&&Fe.errored))}return mS={isDestroyed:E,kIsDestroyed:r,isDisturbed:ee,kIsDisturbed:s,isErrored:ie,kIsErrored:a,isReadable:O,kIsReadable:i,kIsClosedPromise:l,kControllerErrorFunction:u,kIsWritable:o,isClosed:Z,isDuplexNodeStream:p,isFinished:B,isIterable:S,isReadableNodeStream:d,isReadableStream:v,isReadableEnded:R,isReadableFinished:D,isReadableErrored:F,isNodeStream:g,isWebStream:x,isWritable:L,isWritableNodeStream:h,isWritableStream:b,isWritableEnded:C,isWritableFinished:k,isWritableErrored:Y,isServerRequest:ae,isServerResponse:ne,willEmitClose:re,isTransformStream:_},mS}var zI;function xu(){if(zI)return wb.exports;zI=1;const e=Fd(),{AbortError:t,codes:n}=xi(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:a}=n,{kEmptyObject:i,once:o}=Oi(),{validateAbortSignal:s,validateFunction:l,validateObject:u,validateBoolean:d}=cg(),{Promise:h,PromisePrototypeThen:p,SymbolDispose:g}=Wr(),{isClosed:v,isReadable:b,isReadableNodeStream:_,isReadableStream:x,isReadableFinished:S,isReadableErrored:E,isWritable:C,isWritableNodeStream:k,isWritableStream:R,isWritableFinished:D,isWritableErrored:O,isNodeStream:L,willEmitClose:B,kIsClosedPromise:Y}=Jl();let F;function Z(ee){return ee.setHeader&&typeof ee.abort=="function"}const q=()=>{};function ne(ee,ie,U){var Q,X;if(arguments.length===2?(U=ie,ie=i):ie==null?ie=i:u(ie,"options"),l(U,"callback"),s(ie.signal,"options.signal"),U=o(U),x(ee)||R(ee))return ae(ee,ie,U);if(!L(ee))throw new r("stream",["ReadableStream","WritableStream","Stream"],ee);const de=(Q=ie.readable)!==null&&Q!==void 0?Q:_(ee),be=(X=ie.writable)!==null&&X!==void 0?X:k(ee),_e=ee._writableState,Pe=ee._readableState,Ne=()=>{ee.writable||Fe()};let Re=B(ee)&&_(ee)===de&&k(ee)===be,Ce=D(ee,!1);const Fe=()=>{Ce=!0,ee.destroyed&&(Re=!1),!(Re&&(!ee.readable||de))&&(!de||Qe)&&U.call(ee)};let Qe=S(ee,!1);const Le=()=>{Qe=!0,ee.destroyed&&(Re=!1),!(Re&&(!ee.writable||be))&&(!be||Ce)&&U.call(ee)},Ie=J=>{U.call(ee,J)};let V=v(ee);const me=()=>{V=!0;const J=O(ee)||E(ee);if(J&&typeof J!="boolean")return U.call(ee,J);if(de&&!Qe&&_(ee,!0)&&!S(ee,!1))return U.call(ee,new a);if(be&&!Ce&&!D(ee,!1))return U.call(ee,new a);U.call(ee)},Te=()=>{V=!0;const J=O(ee)||E(ee);if(J&&typeof J!="boolean")return U.call(ee,J);U.call(ee)},le=()=>{ee.req.on("finish",Fe)};Z(ee)?(ee.on("complete",Fe),Re||ee.on("abort",me),ee.req?le():ee.on("request",le)):be&&!_e&&(ee.on("end",Ne),ee.on("close",Ne)),!Re&&typeof ee.aborted=="boolean"&&ee.on("aborted",me),ee.on("end",Le),ee.on("finish",Fe),ie.error!==!1&&ee.on("error",Ie),ee.on("close",me),V?e.nextTick(me):_e!=null&&_e.errorEmitted||Pe!=null&&Pe.errorEmitted?Re||e.nextTick(Te):(!de&&(!Re||b(ee))&&(Ce||C(ee)===!1)||!be&&(!Re||C(ee))&&(Qe||b(ee)===!1)||Pe&&ee.req&&ee.aborted)&&e.nextTick(Te);const oe=()=>{U=q,ee.removeListener("aborted",me),ee.removeListener("complete",Fe),ee.removeListener("abort",me),ee.removeListener("request",le),ee.req&&ee.req.removeListener("finish",Fe),ee.removeListener("end",Ne),ee.removeListener("close",Ne),ee.removeListener("finish",Fe),ee.removeListener("end",Le),ee.removeListener("error",Ie),ee.removeListener("close",me)};if(ie.signal&&!V){const J=()=>{const xe=U;oe(),xe.call(ee,new t(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)e.nextTick(J);else{F=F||Oi().addAbortListener;const xe=F(ie.signal,J),Me=U;U=o((...Ee)=>{xe[g](),Me.apply(ee,Ee)})}}return oe}function ae(ee,ie,U){let Q=!1,X=q;if(ie.signal)if(X=()=>{Q=!0,U.call(ee,new t(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)e.nextTick(X);else{F=F||Oi().addAbortListener;const be=F(ie.signal,X),_e=U;U=o((...Pe)=>{be[g](),_e.apply(ee,Pe)})}const de=(...be)=>{Q||e.nextTick(()=>U.apply(ee,be))};return p(ee[Y].promise,de,de),q}function re(ee,ie){var U;let Q=!1;return ie===null&&(ie=i),(U=ie)!==null&&U!==void 0&&U.cleanup&&(d(ie.cleanup,"cleanup"),Q=ie.cleanup),new h((X,de)=>{const be=ne(ee,ie,_e=>{Q&&be(),_e?de(_e):X()})})}return wb.exports=ne,wb.exports.finished=re,wb.exports}var gS,UI;function qh(){if(UI)return gS;UI=1;const e=Fd(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:n},AbortError:r}=xi(),{Symbol:a}=Wr(),{kIsDestroyed:i,isDestroyed:o,isFinished:s,isServerRequest:l}=Jl(),u=a("kDestroy"),d=a("kConstruct");function h(B,Y,F){B&&(B.stack,Y&&!Y.errored&&(Y.errored=B),F&&!F.errored&&(F.errored=B))}function p(B,Y){const F=this._readableState,Z=this._writableState,q=Z||F;return Z!=null&&Z.destroyed||F!=null&&F.destroyed?(typeof Y=="function"&&Y(),this):(h(B,Z,F),Z&&(Z.destroyed=!0),F&&(F.destroyed=!0),q.constructed?g(this,B,Y):this.once(u,function(ne){g(this,t(ne,B),Y)}),this)}function g(B,Y,F){let Z=!1;function q(ne){if(Z)return;Z=!0;const ae=B._readableState,re=B._writableState;h(ne,re,ae),re&&(re.closed=!0),ae&&(ae.closed=!0),typeof F=="function"&&F(ne),ne?e.nextTick(v,B,ne):e.nextTick(b,B)}try{B._destroy(Y||null,q)}catch(ne){q(ne)}}function v(B,Y){_(B,Y),b(B)}function b(B){const Y=B._readableState,F=B._writableState;F&&(F.closeEmitted=!0),Y&&(Y.closeEmitted=!0),(F!=null&&F.emitClose||Y!=null&&Y.emitClose)&&B.emit("close")}function _(B,Y){const F=B._readableState,Z=B._writableState;Z!=null&&Z.errorEmitted||F!=null&&F.errorEmitted||(Z&&(Z.errorEmitted=!0),F&&(F.errorEmitted=!0),B.emit("error",Y))}function x(){const B=this._readableState,Y=this._writableState;B&&(B.constructed=!0,B.closed=!1,B.closeEmitted=!1,B.destroyed=!1,B.errored=null,B.errorEmitted=!1,B.reading=!1,B.ended=B.readable===!1,B.endEmitted=B.readable===!1),Y&&(Y.constructed=!0,Y.destroyed=!1,Y.closed=!1,Y.closeEmitted=!1,Y.errored=null,Y.errorEmitted=!1,Y.finalCalled=!1,Y.prefinished=!1,Y.ended=Y.writable===!1,Y.ending=Y.writable===!1,Y.finished=Y.writable===!1)}function S(B,Y,F){const Z=B._readableState,q=B._writableState;if(q!=null&&q.destroyed||Z!=null&&Z.destroyed)return this;Z!=null&&Z.autoDestroy||q!=null&&q.autoDestroy?B.destroy(Y):Y&&(Y.stack,q&&!q.errored&&(q.errored=Y),Z&&!Z.errored&&(Z.errored=Y),F?e.nextTick(_,B,Y):_(B,Y))}function E(B,Y){if(typeof B._construct!="function")return;const F=B._readableState,Z=B._writableState;F&&(F.constructed=!1),Z&&(Z.constructed=!1),B.once(d,Y),!(B.listenerCount(d)>1)&&e.nextTick(C,B)}function C(B){let Y=!1;function F(Z){if(Y){S(B,Z??new n);return}Y=!0;const q=B._readableState,ne=B._writableState,ae=ne||q;q&&(q.constructed=!0),ne&&(ne.constructed=!0),ae.destroyed?B.emit(u,Z):Z?S(B,Z,!0):e.nextTick(k,B)}try{B._construct(Z=>{e.nextTick(F,Z)})}catch(Z){e.nextTick(F,Z)}}function k(B){B.emit(d)}function R(B){return(B==null?void 0:B.setHeader)&&typeof B.abort=="function"}function D(B){B.emit("close")}function O(B,Y){B.emit("error",Y),e.nextTick(D,B)}function L(B,Y){!B||o(B)||(!Y&&!s(B)&&(Y=new r),l(B)?(B.socket=null,B.destroy(Y)):R(B)?B.abort():R(B.req)?B.req.abort():typeof B.destroy=="function"?B.destroy(Y):typeof B.close=="function"?B.close():Y?e.nextTick(O,B,Y):e.nextTick(D,B),B.destroyed||(B[i]=!0))}return gS={construct:E,destroyer:L,destroy:p,undestroy:x,errorOrDestroy:S},gS}var yS,HI;function xk(){if(HI)return yS;HI=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=Wr(),{EventEmitter:n}=qw();function r(i){n.call(this,i)}t(r.prototype,n.prototype),t(r,n),r.prototype.pipe=function(i,o){const s=this;function l(b){i.writable&&i.write(b)===!1&&s.pause&&s.pause()}s.on("data",l);function u(){s.readable&&s.resume&&s.resume()}i.on("drain",u),!i._isStdio&&(!o||o.end!==!1)&&(s.on("end",h),s.on("close",p));let d=!1;function h(){d||(d=!0,i.end())}function p(){d||(d=!0,typeof i.destroy=="function"&&i.destroy())}function g(b){v(),n.listenerCount(this,"error")===0&&this.emit("error",b)}a(s,"error",g),a(i,"error",g);function v(){s.removeListener("data",l),i.removeListener("drain",u),s.removeListener("end",h),s.removeListener("close",p),s.removeListener("error",g),i.removeListener("error",g),s.removeListener("end",v),s.removeListener("close",v),i.removeListener("close",v)}return s.on("end",v),s.on("close",v),i.on("close",v),i.emit("pipe",s),i};function a(i,o,s){if(typeof i.prependListener=="function")return i.prependListener(o,s);!i._events||!i._events[o]?i.on(o,s):e(i._events[o])?i._events[o].unshift(s):i._events[o]=[s,i._events[o]]}return yS={Stream:r,prependListener:a},yS}var bS={exports:{}},qI;function Vw(){return qI||(qI=1,function(e){const{SymbolDispose:t}=Wr(),{AbortError:n,codes:r}=xi(),{isNodeStream:a,isWebStream:i,kControllerErrorFunction:o}=Jl(),s=xu(),{ERR_INVALID_ARG_TYPE:l}=r;let u;const d=(h,p)=>{if(typeof h!="object"||!("aborted"in h))throw new l(p,"AbortSignal",h)};e.exports.addAbortSignal=function(p,g){if(d(p,"signal"),!a(g)&&!i(g))throw new l("stream",["ReadableStream","WritableStream","Stream"],g);return e.exports.addAbortSignalNoValidate(p,g)},e.exports.addAbortSignalNoValidate=function(h,p){if(typeof h!="object"||!("aborted"in h))return p;const g=a(p)?()=>{p.destroy(new n(void 0,{cause:h.reason}))}:()=>{p[o](new n(void 0,{cause:h.reason}))};if(h.aborted)g();else{u=u||Oi().addAbortListener;const v=u(h,g);s(p,v[t])}return p}}(bS)),bS.exports}var vS,VI;function lee(){if(VI)return vS;VI=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:n,Uint8Array:r}=Wr(),{Buffer:a}=_u(),{inspect:i}=Oi();return vS=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const l={data:s,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(s){const l={data:s,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let l=this.head,u=""+l.data;for(;(l=l.next)!==null;)u+=s+l.data;return u}concat(s){if(this.length===0)return a.alloc(0);const l=a.allocUnsafe(s>>>0);let u=this.head,d=0;for(;u;)n(l,u.data,d),d+=u.data.length,u=u.next;return l}consume(s,l){const u=this.head.data;if(s<u.length){const d=u.slice(0,s);return this.head.data=u.slice(s),d}return s===u.length?this.shift():l?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let l="",u=this.head,d=0;do{const h=u.data;if(s>h.length)l+=h,s-=h.length;else{s===h.length?(l+=h,++d,u.next?this.head=u.next:this.head=this.tail=null):(l+=e(h,0,s),this.head=u,u.data=e(h,s));break}++d}while((u=u.next)!==null);return this.length-=d,l}_getBuffer(s){const l=a.allocUnsafe(s),u=s;let d=this.head,h=0;do{const p=d.data;if(s>p.length)n(l,p,u-s),s-=p.length;else{s===p.length?(n(l,p,u-s),++h,d.next?this.head=d.next:this.head=this.tail=null):(n(l,new r(p.buffer,p.byteOffset,s),u-s),this.head=d,d.data=p.slice(s));break}++h}while((d=d.next)!==null);return this.length-=h,l}[Symbol.for("nodejs.util.inspect.custom")](s,l){return i(this,{...l,depth:0,customInspect:!1})}},vS}var wS,GI;function Gw(){if(GI)return wS;GI=1;const{MathFloor:e,NumberIsInteger:t}=Wr(),{validateInteger:n}=cg(),{ERR_INVALID_ARG_VALUE:r}=xi().codes;let a=16*1024,i=16;function o(d,h,p){return d.highWaterMark!=null?d.highWaterMark:h?d[p]:null}function s(d){return d?i:a}function l(d,h){n(h,"value",0),d?i=h:a=h}function u(d,h,p,g){const v=o(h,g,p);if(v!=null){if(!t(v)||v<0){const b=g?`options.${p}`:"options.highWaterMark";throw new r(b,v)}return e(v)}return s(d.objectMode)}return wS={getHighWaterMark:u,getDefaultHighWaterMark:s,setDefaultHighWaterMark:l},wS}var _S={},_b={exports:{}},WI;function Sk(){return WI||(WI=1,function(e,t){var n=_u(),r=n.Buffer;function a(o,s){for(var l in o)s[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(a(n,t),t.Buffer=i);function i(o,s,l){return r(o,s,l)}a(r,i),i.from=function(o,s,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,l)},i.alloc=function(o,s,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=r(o);return s!==void 0?typeof l=="string"?u.fill(s,l):u.fill(s):u.fill(0),u},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}(_b,_b.exports)),_b.exports}var KI;function cee(){if(KI)return _S;KI=1;var e=Sk().Buffer,t=e.isEncoding||function(x){switch(x=""+x,x&&x.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(x){if(!x)return"utf8";for(var S;;)switch(x){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return x;default:if(S)return;x=(""+x).toLowerCase(),S=!0}}function r(x){var S=n(x);if(typeof S!="string"&&(e.isEncoding===t||!t(x)))throw new Error("Unknown encoding: "+x);return S||x}_S.StringDecoder=a;function a(x){this.encoding=r(x);var S;switch(this.encoding){case"utf16le":this.text=h,this.end=p,S=4;break;case"utf8":this.fillLast=l,S=4;break;case"base64":this.text=g,this.end=v,S=3;break;default:this.write=b,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(S)}a.prototype.write=function(x){if(x.length===0)return"";var S,E;if(this.lastNeed){if(S=this.fillLast(x),S===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<x.length?S?S+this.text(x,E):this.text(x,E):S||""},a.prototype.end=d,a.prototype.text=u,a.prototype.fillLast=function(x){if(this.lastNeed<=x.length)return x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,this.lastTotal-this.lastNeed,0,x.length),this.lastNeed-=x.length};function i(x){return x<=127?0:x>>5===6?2:x>>4===14?3:x>>3===30?4:x>>6===2?-1:-2}function o(x,S,E){var C=S.length-1;if(C<E)return 0;var k=i(S[C]);return k>=0?(k>0&&(x.lastNeed=k-1),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(x.lastNeed=k-2),k):--C<E||k===-2?0:(k=i(S[C]),k>=0?(k>0&&(k===2?k=0:x.lastNeed=k-3),k):0))}function s(x,S,E){if((S[0]&192)!==128)return x.lastNeed=0,"";if(x.lastNeed>1&&S.length>1){if((S[1]&192)!==128)return x.lastNeed=1,"";if(x.lastNeed>2&&S.length>2&&(S[2]&192)!==128)return x.lastNeed=2,""}}function l(x){var S=this.lastTotal-this.lastNeed,E=s(this,x);if(E!==void 0)return E;if(this.lastNeed<=x.length)return x.copy(this.lastChar,S,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);x.copy(this.lastChar,S,0,x.length),this.lastNeed-=x.length}function u(x,S){var E=o(this,x,S);if(!this.lastNeed)return x.toString("utf8",S);this.lastTotal=E;var C=x.length-(E-this.lastNeed);return x.copy(this.lastChar,0,C),x.toString("utf8",S,C)}function d(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+"":S}function h(x,S){if((x.length-S)%2===0){var E=x.toString("utf16le",S);if(E){var C=E.charCodeAt(E.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=x[x.length-1],x.toString("utf16le",S,x.length-1)}function p(x){var S=x&&x.length?this.write(x):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return S+this.lastChar.toString("utf16le",0,E)}return S}function g(x,S){var E=(x.length-S)%3;return E===0?x.toString("base64",S):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=x[x.length-1]:(this.lastChar[0]=x[x.length-2],this.lastChar[1]=x[x.length-1]),x.toString("base64",S,x.length-E))}function v(x){var S=x&&x.length?this.write(x):"";return this.lastNeed?S+this.lastChar.toString("base64",0,3-this.lastNeed):S}function b(x){return x.toString(this.encoding)}function _(x){return x&&x.length?this.write(x):""}return _S}var xS,ZI;function tP(){if(ZI)return xS;ZI=1;const e=Fd(),{PromisePrototypeThen:t,SymbolAsyncIterator:n,SymbolIterator:r}=Wr(),{Buffer:a}=_u(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_NULL_VALUES:o}=xi().codes;function s(l,u,d){let h;if(typeof u=="string"||u instanceof a)return new l({objectMode:!0,...d,read(){this.push(u),this.push(null)}});let p;if(u&&u[n])p=!0,h=u[n]();else if(u&&u[r])p=!1,h=u[r]();else throw new i("iterable",["Iterable"],u);const g=new l({objectMode:!0,highWaterMark:1,...d});let v=!1;g._read=function(){v||(v=!0,_())},g._destroy=function(x,S){t(b(x),()=>e.nextTick(S,x),E=>e.nextTick(S,E||x))};async function b(x){const S=x!=null,E=typeof h.throw=="function";if(S&&E){const{value:C,done:k}=await h.throw(x);if(await C,k)return}if(typeof h.return=="function"){const{value:C}=await h.return();await C}}async function _(){for(;;){try{const{value:x,done:S}=p?await h.next():h.next();if(S)g.push(null);else{const E=x&&typeof x.then=="function"?await x:x;if(E===null)throw v=!1,new o;if(g.push(E))continue;v=!1}}catch(x){g.destroy(x)}break}}return g}return xS=s,xS}var SS,YI;function Ww(){if(YI)return SS;YI=1;const e=Fd(),{ArrayPrototypeIndexOf:t,NumberIsInteger:n,NumberIsNaN:r,NumberParseInt:a,ObjectDefineProperties:i,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:l,SafeSet:u,SymbolAsyncDispose:d,SymbolAsyncIterator:h,Symbol:p}=Wr();SS=Ee,Ee.ReadableState=Me;const{EventEmitter:g}=qw(),{Stream:v,prependListener:b}=xk(),{Buffer:_}=_u(),{addAbortSignal:x}=Vw(),S=xu();let E=Oi().debuglog("stream",pe=>{E=pe});const C=lee(),k=qh(),{getHighWaterMark:R,getDefaultHighWaterMark:D}=Gw(),{aggregateTwoErrors:O,codes:{ERR_INVALID_ARG_TYPE:L,ERR_METHOD_NOT_IMPLEMENTED:B,ERR_OUT_OF_RANGE:Y,ERR_STREAM_PUSH_AFTER_EOF:F,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:Z},AbortError:q}=xi(),{validateObject:ne}=cg(),ae=p("kPaused"),{StringDecoder:re}=cee(),ee=tP();s(Ee.prototype,v.prototype),s(Ee,v);const ie=()=>{},{errorOrDestroy:U}=k,Q=1,X=2,de=4,be=8,_e=16,Pe=32,Ne=64,Re=128,Ce=256,Fe=512,Qe=1024,Le=2048,Ie=4096,V=8192,me=16384,Te=32768,le=65536,oe=1<<17,J=1<<18;function xe(pe){return{enumerable:!1,get(){return(this.state&pe)!==0},set(H){H?this.state|=pe:this.state&=~pe}}}i(Me.prototype,{objectMode:xe(Q),ended:xe(X),endEmitted:xe(de),reading:xe(be),constructed:xe(_e),sync:xe(Pe),needReadable:xe(Ne),emittedReadable:xe(Re),readableListening:xe(Ce),resumeScheduled:xe(Fe),errorEmitted:xe(Qe),emitClose:xe(Le),autoDestroy:xe(Ie),destroyed:xe(V),closed:xe(me),closeEmitted:xe(Te),multiAwaitDrain:xe(le),readingMore:xe(oe),dataEmitted:xe(J)});function Me(pe,H,z){typeof z!="boolean"&&(z=H instanceof ql()),this.state=Le|Ie|_e|Pe,pe&&pe.objectMode&&(this.state|=Q),z&&pe&&pe.readableObjectMode&&(this.state|=Q),this.highWaterMark=pe?R(this,pe,"readableHighWaterMark",z):D(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ae]=null,pe&&pe.emitClose===!1&&(this.state&=-2049),pe&&pe.autoDestroy===!1&&(this.state&=-4097),this.errored=null,this.defaultEncoding=pe&&pe.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,pe&&pe.encoding&&(this.decoder=new re(pe.encoding),this.encoding=pe.encoding)}function Ee(pe){if(!(this instanceof Ee))return new Ee(pe);const H=this instanceof ql();this._readableState=new Me(pe,this,H),pe&&(typeof pe.read=="function"&&(this._read=pe.read),typeof pe.destroy=="function"&&(this._destroy=pe.destroy),typeof pe.construct=="function"&&(this._construct=pe.construct),pe.signal&&!H&&x(pe.signal,this)),v.call(this,pe),k.construct(this,()=>{this._readableState.needReadable&&I(this,this._readableState)})}Ee.prototype.destroy=k.destroy,Ee.prototype._undestroy=k.undestroy,Ee.prototype._destroy=function(pe,H){H(pe)},Ee.prototype[g.captureRejectionSymbol]=function(pe){this.destroy(pe)},Ee.prototype[d]=function(){let pe;return this.destroyed||(pe=this.readableEnded?null:new q,this.destroy(pe)),new l((H,z)=>S(this,W=>W&&W!==pe?z(W):H(null)))},Ee.prototype.push=function(pe,H){return We(this,pe,H,!1)},Ee.prototype.unshift=function(pe,H){return We(this,pe,H,!0)};function We(pe,H,z,W){E("readableAddChunk",H);const he=pe._readableState;let Ae;if((he.state&Q)===0&&(typeof H=="string"?(z=z||he.defaultEncoding,he.encoding!==z&&(W&&he.encoding?H=_.from(H,z).toString(he.encoding):(H=_.from(H,z),z=""))):H instanceof _?z="":v._isUint8Array(H)?(H=v._uint8ArrayToBuffer(H),z=""):H!=null&&(Ae=new L("chunk",["string","Buffer","Uint8Array"],H))),Ae)U(pe,Ae);else if(H===null)he.state&=-9,Dt(pe,he);else if((he.state&Q)!==0||H&&H.length>0)if(W)if((he.state&de)!==0)U(pe,new Z);else{if(he.destroyed||he.errored)return!1;kt(pe,he,H,!0)}else if(he.ended)U(pe,new F);else{if(he.destroyed||he.errored)return!1;he.state&=-9,he.decoder&&!z?(H=he.decoder.write(H),he.objectMode||H.length!==0?kt(pe,he,H,!1):I(pe,he)):kt(pe,he,H,!1)}else W||(he.state&=-9,I(pe,he));return!he.ended&&(he.length<he.highWaterMark||he.length===0)}function kt(pe,H,z,W){H.flowing&&H.length===0&&!H.sync&&pe.listenerCount("data")>0?((H.state&le)!==0?H.awaitDrainWriters.clear():H.awaitDrainWriters=null,H.dataEmitted=!0,pe.emit("data",z)):(H.length+=H.objectMode?1:z.length,W?H.buffer.unshift(z):H.buffer.push(z),(H.state&Ne)!==0&&Gt(pe)),I(pe,H)}Ee.prototype.isPaused=function(){const pe=this._readableState;return pe[ae]===!0||pe.flowing===!1},Ee.prototype.setEncoding=function(pe){const H=new re(pe);this._readableState.decoder=H,this._readableState.encoding=this._readableState.decoder.encoding;const z=this._readableState.buffer;let W="";for(const he of z)W+=H.write(he);return z.clear(),W!==""&&z.push(W),this._readableState.length=W.length,this};const at=1073741824;function _t(pe){if(pe>at)throw new Y("size","<= 1GiB",pe);return pe--,pe|=pe>>>1,pe|=pe>>>2,pe|=pe>>>4,pe|=pe>>>8,pe|=pe>>>16,pe++,pe}function jt(pe,H){return pe<=0||H.length===0&&H.ended?0:(H.state&Q)!==0?1:r(pe)?H.flowing&&H.length?H.buffer.first().length:H.length:pe<=H.length?pe:H.ended?H.length:0}Ee.prototype.read=function(pe){E("read",pe),pe===void 0?pe=NaN:n(pe)||(pe=a(pe,10));const H=this._readableState,z=pe;if(pe>H.highWaterMark&&(H.highWaterMark=_t(pe)),pe!==0&&(H.state&=-129),pe===0&&H.needReadable&&((H.highWaterMark!==0?H.length>=H.highWaterMark:H.length>0)||H.ended))return E("read: emitReadable",H.length,H.ended),H.length===0&&H.ended?tt(this):Gt(this),null;if(pe=jt(pe,H),pe===0&&H.ended)return H.length===0&&tt(this),null;let W=(H.state&Ne)!==0;if(E("need readable",W),(H.length===0||H.length-pe<H.highWaterMark)&&(W=!0,E("length less than watermark",W)),H.ended||H.reading||H.destroyed||H.errored||!H.constructed)W=!1,E("reading, ended or constructing",W);else if(W){E("do read"),H.state|=be|Pe,H.length===0&&(H.state|=Ne);try{this._read(H.highWaterMark)}catch(Ae){U(this,Ae)}H.state&=-33,H.reading||(pe=jt(z,H))}let he;return pe>0?he=Be(pe,H):he=null,he===null?(H.needReadable=H.length<=H.highWaterMark,pe=0):(H.length-=pe,H.multiAwaitDrain?H.awaitDrainWriters.clear():H.awaitDrainWriters=null),H.length===0&&(H.ended||(H.needReadable=!0),z!==pe&&H.ended&&tt(this)),he!==null&&!H.errorEmitted&&!H.closeEmitted&&(H.dataEmitted=!0,this.emit("data",he)),he};function Dt(pe,H){if(E("onEofChunk"),!H.ended){if(H.decoder){const z=H.decoder.end();z&&z.length&&(H.buffer.push(z),H.length+=H.objectMode?1:z.length)}H.ended=!0,H.sync?Gt(pe):(H.needReadable=!1,H.emittedReadable=!0,ye(pe))}}function Gt(pe){const H=pe._readableState;E("emitReadable",H.needReadable,H.emittedReadable),H.needReadable=!1,H.emittedReadable||(E("emitReadable",H.flowing),H.emittedReadable=!0,e.nextTick(ye,pe))}function ye(pe){const H=pe._readableState;E("emitReadable_",H.destroyed,H.length,H.ended),!H.destroyed&&!H.errored&&(H.length||H.ended)&&(pe.emit("readable"),H.emittedReadable=!1),H.needReadable=!H.flowing&&!H.ended&&H.length<=H.highWaterMark,ft(pe)}function I(pe,H){!H.readingMore&&H.constructed&&(H.readingMore=!0,e.nextTick(G,pe,H))}function G(pe,H){for(;!H.reading&&!H.ended&&(H.length<H.highWaterMark||H.flowing&&H.length===0);){const z=H.length;if(E("maybeReadMore read 0"),pe.read(0),z===H.length)break}H.readingMore=!1}Ee.prototype._read=function(pe){throw new B("_read()")},Ee.prototype.pipe=function(pe,H){const z=this,W=this._readableState;W.pipes.length===1&&(W.multiAwaitDrain||(W.multiAwaitDrain=!0,W.awaitDrainWriters=new u(W.awaitDrainWriters?[W.awaitDrainWriters]:[]))),W.pipes.push(pe),E("pipe count=%d opts=%j",W.pipes.length,H);const Ae=(!H||H.end!==!1)&&pe!==e.stdout&&pe!==e.stderr?pt:wr;W.endEmitted?e.nextTick(Ae):z.once("end",Ae),pe.on("unpipe",He);function He(jn,ci){E("onunpipe"),jn===z&&ci&&ci.hasUnpiped===!1&&(ci.hasUnpiped=!0,Tt())}function pt(){E("onend"),pe.end()}let Vt,ut=!1;function Tt(){E("cleanup"),pe.removeListener("close",zn),pe.removeListener("finish",vr),Vt&&pe.removeListener("drain",Vt),pe.removeListener("error",An),pe.removeListener("unpipe",He),z.removeListener("end",pt),z.removeListener("end",wr),z.removeListener("data",Xt),ut=!0,Vt&&W.awaitDrainWriters&&(!pe._writableState||pe._writableState.needDrain)&&Vt()}function Mt(){ut||(W.pipes.length===1&&W.pipes[0]===pe?(E("false write response, pause",0),W.awaitDrainWriters=pe,W.multiAwaitDrain=!1):W.pipes.length>1&&W.pipes.includes(pe)&&(E("false write response, pause",W.awaitDrainWriters.size),W.awaitDrainWriters.add(pe)),z.pause()),Vt||(Vt=fe(z,pe),pe.on("drain",Vt))}z.on("data",Xt);function Xt(jn){E("ondata");const ci=pe.write(jn);E("dest.write",ci),ci===!1&&Mt()}function An(jn){if(E("onerror",jn),wr(),pe.removeListener("error",An),pe.listenerCount("error")===0){const ci=pe._writableState||pe._readableState;ci&&!ci.errorEmitted?U(pe,jn):pe.emit("error",jn)}}b(pe,"error",An);function zn(){pe.removeListener("finish",vr),wr()}pe.once("close",zn);function vr(){E("onfinish"),pe.removeListener("close",zn),wr()}pe.once("finish",vr);function wr(){E("unpipe"),z.unpipe(pe)}return pe.emit("pipe",z),pe.writableNeedDrain===!0?Mt():W.flowing||(E("pipe resume"),z.resume()),pe};function fe(pe,H){return function(){const W=pe._readableState;W.awaitDrainWriters===H?(E("pipeOnDrain",1),W.awaitDrainWriters=null):W.multiAwaitDrain&&(E("pipeOnDrain",W.awaitDrainWriters.size),W.awaitDrainWriters.delete(H)),(!W.awaitDrainWriters||W.awaitDrainWriters.size===0)&&pe.listenerCount("data")&&pe.resume()}}Ee.prototype.unpipe=function(pe){const H=this._readableState,z={hasUnpiped:!1};if(H.pipes.length===0)return this;if(!pe){const he=H.pipes;H.pipes=[],this.pause();for(let Ae=0;Ae<he.length;Ae++)he[Ae].emit("unpipe",this,{hasUnpiped:!1});return this}const W=t(H.pipes,pe);return W===-1?this:(H.pipes.splice(W,1),H.pipes.length===0&&this.pause(),pe.emit("unpipe",this,z),this)},Ee.prototype.on=function(pe,H){const z=v.prototype.on.call(this,pe,H),W=this._readableState;return pe==="data"?(W.readableListening=this.listenerCount("readable")>0,W.flowing!==!1&&this.resume()):pe==="readable"&&!W.endEmitted&&!W.readableListening&&(W.readableListening=W.needReadable=!0,W.flowing=!1,W.emittedReadable=!1,E("on readable",W.length,W.reading),W.length?Gt(this):W.reading||e.nextTick(ve,this)),z},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.removeListener=function(pe,H){const z=v.prototype.removeListener.call(this,pe,H);return pe==="readable"&&e.nextTick(Oe,this),z},Ee.prototype.off=Ee.prototype.removeListener,Ee.prototype.removeAllListeners=function(pe){const H=v.prototype.removeAllListeners.apply(this,arguments);return(pe==="readable"||pe===void 0)&&e.nextTick(Oe,this),H};function Oe(pe){const H=pe._readableState;H.readableListening=pe.listenerCount("readable")>0,H.resumeScheduled&&H[ae]===!1?H.flowing=!0:pe.listenerCount("data")>0?pe.resume():H.readableListening||(H.flowing=null)}function ve(pe){E("readable nexttick read 0"),pe.read(0)}Ee.prototype.resume=function(){const pe=this._readableState;return pe.flowing||(E("resume"),pe.flowing=!pe.readableListening,ke(this,pe)),pe[ae]=!1,this};function ke(pe,H){H.resumeScheduled||(H.resumeScheduled=!0,e.nextTick(ce,pe,H))}function ce(pe,H){E("resume",H.reading),H.reading||pe.read(0),H.resumeScheduled=!1,pe.emit("resume"),ft(pe),H.flowing&&!H.reading&&pe.read(0)}Ee.prototype.pause=function(){return E("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(E("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ae]=!0,this};function ft(pe){const H=pe._readableState;for(E("flow",H.flowing);H.flowing&&pe.read()!==null;);}Ee.prototype.wrap=function(pe){let H=!1;pe.on("data",W=>{!this.push(W)&&pe.pause&&(H=!0,pe.pause())}),pe.on("end",()=>{this.push(null)}),pe.on("error",W=>{U(this,W)}),pe.on("close",()=>{this.destroy()}),pe.on("destroy",()=>{this.destroy()}),this._read=()=>{H&&pe.resume&&(H=!1,pe.resume())};const z=o(pe);for(let W=1;W<z.length;W++){const he=z[W];this[he]===void 0&&typeof pe[he]=="function"&&(this[he]=pe[he].bind(pe))}return this},Ee.prototype[h]=function(){return vt(this)},Ee.prototype.iterator=function(pe){return pe!==void 0&&ne(pe,"options"),vt(this,pe)};function vt(pe,H){typeof pe.read!="function"&&(pe=Ee.wrap(pe,{objectMode:!0}));const z=M(pe,H);return z.stream=pe,z}async function*M(pe,H){let z=ie;function W(He){this===pe?(z(),z=ie):z=He}pe.on("readable",W);let he;const Ae=S(pe,{writable:!1},He=>{he=He?O(he,He):null,z(),z=ie});try{for(;;){const He=pe.destroyed?null:pe.read();if(He!==null)yield He;else{if(he)throw he;if(he===null)return;await new l(W)}}}catch(He){throw he=O(he,He),he}finally{(he||(H==null?void 0:H.destroyOnReturn)!==!1)&&(he===void 0||pe._readableState.autoDestroy)?k.destroyer(pe,null):(pe.off("readable",W),Ae())}}i(Ee.prototype,{readable:{__proto__:null,get(){const pe=this._readableState;return!!pe&&pe.readable!==!1&&!pe.destroyed&&!pe.errorEmitted&&!pe.endEmitted},set(pe){this._readableState&&(this._readableState.readable=!!pe)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(pe){this._readableState&&(this._readableState.flowing=pe)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(pe){this._readableState&&(this._readableState.destroyed=pe)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),i(Me.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ae]!==!1},set(pe){this[ae]=!!pe}}}),Ee._fromList=Be;function Be(pe,H){if(H.length===0)return null;let z;return H.objectMode?z=H.buffer.shift():!pe||pe>=H.length?(H.decoder?z=H.buffer.join(""):H.buffer.length===1?z=H.buffer.first():z=H.buffer.concat(H.length),H.buffer.clear()):z=H.buffer.consume(pe,H.decoder),z}function tt(pe){const H=pe._readableState;E("endReadable",H.endEmitted),H.endEmitted||(H.ended=!0,e.nextTick(ge,H,pe))}function ge(pe,H){if(E("endReadableNT",pe.endEmitted,pe.length),!pe.errored&&!pe.closeEmitted&&!pe.endEmitted&&pe.length===0){if(pe.endEmitted=!0,H.emit("end"),H.writable&&H.allowHalfOpen===!1)e.nextTick(De,H);else if(pe.autoDestroy){const z=H._writableState;(!z||z.autoDestroy&&(z.finished||z.writable===!1))&&H.destroy()}}}function De(pe){pe.writable&&!pe.writableEnded&&!pe.destroyed&&pe.end()}Ee.from=function(pe,H){return ee(Ee,pe,H)};let Ke;function Nt(){return Ke===void 0&&(Ke={}),Ke}return Ee.fromWeb=function(pe,H){return Nt().newStreamReadableFromReadableStream(pe,H)},Ee.toWeb=function(pe,H){return Nt().newReadableStreamFromStreamReadable(pe,H)},Ee.wrap=function(pe,H){var z,W;return new Ee({objectMode:(z=(W=pe.readableObjectMode)!==null&&W!==void 0?W:pe.objectMode)!==null&&z!==void 0?z:!0,...H,destroy(he,Ae){k.destroyer(pe,he),Ae(he)}}).wrap(pe)},SS}var ES,XI;function Ek(){if(XI)return ES;XI=1;const e=Fd(),{ArrayPrototypeSlice:t,Error:n,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:a,ObjectDefineProperties:i,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:l,SymbolHasInstance:u}=Wr();ES=ne,ne.WritableState=Z;const{EventEmitter:d}=qw(),h=xk().Stream,{Buffer:p}=_u(),g=qh(),{addAbortSignal:v}=Vw(),{getHighWaterMark:b,getDefaultHighWaterMark:_}=Gw(),{ERR_INVALID_ARG_TYPE:x,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:E,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:R,ERR_STREAM_NULL_VALUES:D,ERR_STREAM_WRITE_AFTER_END:O,ERR_UNKNOWN_ENCODING:L}=xi().codes,{errorOrDestroy:B}=g;o(ne.prototype,h.prototype),o(ne,h);function Y(){}const F=l("kOnFinished");function Z(Ie,V,me){typeof me!="boolean"&&(me=V instanceof ql()),this.objectMode=!!(Ie&&Ie.objectMode),me&&(this.objectMode=this.objectMode||!!(Ie&&Ie.writableObjectMode)),this.highWaterMark=Ie?b(this,Ie,"writableHighWaterMark",me):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Te=!!(Ie&&Ie.decodeStrings===!1);this.decodeStrings=!Te,this.defaultEncoding=Ie&&Ie.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,V),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,q(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!Ie||Ie.emitClose!==!1,this.autoDestroy=!Ie||Ie.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[F]=[]}function q(Ie){Ie.buffered=[],Ie.bufferedIndex=0,Ie.allBuffers=!0,Ie.allNoop=!0}Z.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},a(Z.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function ne(Ie){const V=this instanceof ql();if(!V&&!r(ne,this))return new ne(Ie);this._writableState=new Z(Ie,this,V),Ie&&(typeof Ie.write=="function"&&(this._write=Ie.write),typeof Ie.writev=="function"&&(this._writev=Ie.writev),typeof Ie.destroy=="function"&&(this._destroy=Ie.destroy),typeof Ie.final=="function"&&(this._final=Ie.final),typeof Ie.construct=="function"&&(this._construct=Ie.construct),Ie.signal&&v(Ie.signal,this)),h.call(this,Ie),g.construct(this,()=>{const me=this._writableState;me.writing||be(this,me),Re(this,me)})}a(ne,u,{__proto__:null,value:function(Ie){return r(this,Ie)?!0:this!==ne?!1:Ie&&Ie._writableState instanceof Z}}),ne.prototype.pipe=function(){B(this,new C)};function ae(Ie,V,me,Te){const le=Ie._writableState;if(typeof me=="function")Te=me,me=le.defaultEncoding;else{if(!me)me=le.defaultEncoding;else if(me!=="buffer"&&!p.isEncoding(me))throw new L(me);typeof Te!="function"&&(Te=Y)}if(V===null)throw new D;if(!le.objectMode)if(typeof V=="string")le.decodeStrings!==!1&&(V=p.from(V,me),me="buffer");else if(V instanceof p)me="buffer";else if(h._isUint8Array(V))V=h._uint8ArrayToBuffer(V),me="buffer";else throw new x("chunk",["string","Buffer","Uint8Array"],V);let oe;return le.ending?oe=new O:le.destroyed&&(oe=new k("write")),oe?(e.nextTick(Te,oe),B(Ie,oe,!0),oe):(le.pendingcb++,re(Ie,le,V,me,Te))}ne.prototype.write=function(Ie,V,me){return ae(this,Ie,V,me)===!0},ne.prototype.cork=function(){this._writableState.corked++},ne.prototype.uncork=function(){const Ie=this._writableState;Ie.corked&&(Ie.corked--,Ie.writing||be(this,Ie))},ne.prototype.setDefaultEncoding=function(V){if(typeof V=="string"&&(V=s(V)),!p.isEncoding(V))throw new L(V);return this._writableState.defaultEncoding=V,this};function re(Ie,V,me,Te,le){const oe=V.objectMode?1:me.length;V.length+=oe;const J=V.length<V.highWaterMark;return J||(V.needDrain=!0),V.writing||V.corked||V.errored||!V.constructed?(V.buffered.push({chunk:me,encoding:Te,callback:le}),V.allBuffers&&Te!=="buffer"&&(V.allBuffers=!1),V.allNoop&&le!==Y&&(V.allNoop=!1)):(V.writelen=oe,V.writecb=le,V.writing=!0,V.sync=!0,Ie._write(me,Te,V.onwrite),V.sync=!1),J&&!V.errored&&!V.destroyed}function ee(Ie,V,me,Te,le,oe,J){V.writelen=Te,V.writecb=J,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new k("write")):me?Ie._writev(le,V.onwrite):Ie._write(le,oe,V.onwrite),V.sync=!1}function ie(Ie,V,me,Te){--V.pendingcb,Te(me),de(V),B(Ie,me)}function U(Ie,V){const me=Ie._writableState,Te=me.sync,le=me.writecb;if(typeof le!="function"){B(Ie,new E);return}me.writing=!1,me.writecb=null,me.length-=me.writelen,me.writelen=0,V?(V.stack,me.errored||(me.errored=V),Ie._readableState&&!Ie._readableState.errored&&(Ie._readableState.errored=V),Te?e.nextTick(ie,Ie,me,V,le):ie(Ie,me,V,le)):(me.buffered.length>me.bufferedIndex&&be(Ie,me),Te?me.afterWriteTickInfo!==null&&me.afterWriteTickInfo.cb===le?me.afterWriteTickInfo.count++:(me.afterWriteTickInfo={count:1,cb:le,stream:Ie,state:me},e.nextTick(Q,me.afterWriteTickInfo)):X(Ie,me,1,le))}function Q({stream:Ie,state:V,count:me,cb:Te}){return V.afterWriteTickInfo=null,X(Ie,V,me,Te)}function X(Ie,V,me,Te){for(!V.ending&&!Ie.destroyed&&V.length===0&&V.needDrain&&(V.needDrain=!1,Ie.emit("drain"));me-- >0;)V.pendingcb--,Te();V.destroyed&&de(V),Re(Ie,V)}function de(Ie){if(Ie.writing)return;for(let le=Ie.bufferedIndex;le<Ie.buffered.length;++le){var V;const{chunk:oe,callback:J}=Ie.buffered[le],xe=Ie.objectMode?1:oe.length;Ie.length-=xe,J((V=Ie.errored)!==null&&V!==void 0?V:new k("write"))}const me=Ie[F].splice(0);for(let le=0;le<me.length;le++){var Te;me[le]((Te=Ie.errored)!==null&&Te!==void 0?Te:new k("end"))}q(Ie)}function be(Ie,V){if(V.corked||V.bufferProcessing||V.destroyed||!V.constructed)return;const{buffered:me,bufferedIndex:Te,objectMode:le}=V,oe=me.length-Te;if(!oe)return;let J=Te;if(V.bufferProcessing=!0,oe>1&&Ie._writev){V.pendingcb-=oe-1;const xe=V.allNoop?Y:Ee=>{for(let We=J;We<me.length;++We)me[We].callback(Ee)},Me=V.allNoop&&J===0?me:t(me,J);Me.allBuffers=V.allBuffers,ee(Ie,V,!0,V.length,Me,"",xe),q(V)}else{do{const{chunk:xe,encoding:Me,callback:Ee}=me[J];me[J++]=null;const We=le?1:xe.length;ee(Ie,V,!1,We,xe,Me,Ee)}while(J<me.length&&!V.writing);J===me.length?q(V):J>256?(me.splice(0,J),V.bufferedIndex=0):V.bufferedIndex=J}V.bufferProcessing=!1}ne.prototype._write=function(Ie,V,me){if(this._writev)this._writev([{chunk:Ie,encoding:V}],me);else throw new S("_write()")},ne.prototype._writev=null,ne.prototype.end=function(Ie,V,me){const Te=this._writableState;typeof Ie=="function"?(me=Ie,Ie=null,V=null):typeof V=="function"&&(me=V,V=null);let le;if(Ie!=null){const oe=ae(this,Ie,V);oe instanceof n&&(le=oe)}return Te.corked&&(Te.corked=1,this.uncork()),le||(!Te.errored&&!Te.ending?(Te.ending=!0,Re(this,Te,!0),Te.ended=!0):Te.finished?le=new R("end"):Te.destroyed&&(le=new k("end"))),typeof me=="function"&&(le||Te.finished?e.nextTick(me,le):Te[F].push(me)),this};function _e(Ie){return Ie.ending&&!Ie.destroyed&&Ie.constructed&&Ie.length===0&&!Ie.errored&&Ie.buffered.length===0&&!Ie.finished&&!Ie.writing&&!Ie.errorEmitted&&!Ie.closeEmitted}function Pe(Ie,V){let me=!1;function Te(le){if(me){B(Ie,le??E());return}if(me=!0,V.pendingcb--,le){const oe=V[F].splice(0);for(let J=0;J<oe.length;J++)oe[J](le);B(Ie,le,V.sync)}else _e(V)&&(V.prefinished=!0,Ie.emit("prefinish"),V.pendingcb++,e.nextTick(Ce,Ie,V))}V.sync=!0,V.pendingcb++;try{Ie._final(Te)}catch(le){Te(le)}V.sync=!1}function Ne(Ie,V){!V.prefinished&&!V.finalCalled&&(typeof Ie._final=="function"&&!V.destroyed?(V.finalCalled=!0,Pe(Ie,V)):(V.prefinished=!0,Ie.emit("prefinish")))}function Re(Ie,V,me){_e(V)&&(Ne(Ie,V),V.pendingcb===0&&(me?(V.pendingcb++,e.nextTick((Te,le)=>{_e(le)?Ce(Te,le):le.pendingcb--},Ie,V)):_e(V)&&(V.pendingcb++,Ce(Ie,V))))}function Ce(Ie,V){V.pendingcb--,V.finished=!0;const me=V[F].splice(0);for(let Te=0;Te<me.length;Te++)me[Te]();if(Ie.emit("finish"),V.autoDestroy){const Te=Ie._readableState;(!Te||Te.autoDestroy&&(Te.endEmitted||Te.readable===!1))&&Ie.destroy()}}i(ne.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(Ie){this._writableState&&(this._writableState.destroyed=Ie)}},writable:{__proto__:null,get(){const Ie=this._writableState;return!!Ie&&Ie.writable!==!1&&!Ie.destroyed&&!Ie.errored&&!Ie.ending&&!Ie.ended},set(Ie){this._writableState&&(this._writableState.writable=!!Ie)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const Ie=this._writableState;return Ie?!Ie.destroyed&&!Ie.ending&&Ie.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Fe=g.destroy;ne.prototype.destroy=function(Ie,V){const me=this._writableState;return!me.destroyed&&(me.bufferedIndex<me.buffered.length||me[F].length)&&e.nextTick(de,me),Fe.call(this,Ie,V),this},ne.prototype._undestroy=g.undestroy,ne.prototype._destroy=function(Ie,V){V(Ie)},ne.prototype[d.captureRejectionSymbol]=function(Ie){this.destroy(Ie)};let Qe;function Le(){return Qe===void 0&&(Qe={}),Qe}return ne.fromWeb=function(Ie,V){return Le().newStreamWritableFromWritableStream(Ie,V)},ne.toWeb=function(Ie){return Le().newWritableStreamFromStreamWritable(Ie)},ES}var CS,JI;function uee(){if(JI)return CS;JI=1;const e=Fd(),t=_u(),{isReadable:n,isWritable:r,isIterable:a,isNodeStream:i,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:l,isReadableStream:u,isWritableStream:d}=Jl(),h=xu(),{AbortError:p,codes:{ERR_INVALID_ARG_TYPE:g,ERR_INVALID_RETURN_VALUE:v}}=xi(),{destroyer:b}=qh(),_=ql(),x=Ww(),S=Ek(),{createDeferredPromise:E}=Oi(),C=tP(),k=globalThis.Blob||t.Blob,R=typeof k<"u"?function(Z){return Z instanceof k}:function(Z){return!1},D=globalThis.AbortController||y0().AbortController,{FunctionPrototypeCall:O}=Wr();class L extends _{constructor(Z){super(Z),(Z==null?void 0:Z.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(Z==null?void 0:Z.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}CS=function F(Z,q){if(l(Z))return Z;if(o(Z))return Y({readable:Z});if(s(Z))return Y({writable:Z});if(i(Z))return Y({writable:!1,readable:!1});if(u(Z))return Y({readable:x.fromWeb(Z)});if(d(Z))return Y({writable:S.fromWeb(Z)});if(typeof Z=="function"){const{value:ae,write:re,final:ee,destroy:ie}=B(Z);if(a(ae))return C(L,ae,{objectMode:!0,write:re,final:ee,destroy:ie});const U=ae==null?void 0:ae.then;if(typeof U=="function"){let Q;const X=O(U,ae,de=>{if(de!=null)throw new v("nully","body",de)},de=>{b(Q,de)});return Q=new L({objectMode:!0,readable:!1,write:re,final(de){ee(async()=>{try{await X,e.nextTick(de,null)}catch(be){e.nextTick(de,be)}})},destroy:ie})}throw new v("Iterable, AsyncIterable or AsyncFunction",q,ae)}if(R(Z))return F(Z.arrayBuffer());if(a(Z))return C(L,Z,{objectMode:!0,writable:!1});if(u(Z==null?void 0:Z.readable)&&d(Z==null?void 0:Z.writable))return L.fromWeb(Z);if(typeof(Z==null?void 0:Z.writable)=="object"||typeof(Z==null?void 0:Z.readable)=="object"){const ae=Z!=null&&Z.readable?o(Z==null?void 0:Z.readable)?Z==null?void 0:Z.readable:F(Z.readable):void 0,re=Z!=null&&Z.writable?s(Z==null?void 0:Z.writable)?Z==null?void 0:Z.writable:F(Z.writable):void 0;return Y({readable:ae,writable:re})}const ne=Z==null?void 0:Z.then;if(typeof ne=="function"){let ae;return O(ne,Z,re=>{re!=null&&ae.push(re),ae.push(null)},re=>{b(ae,re)}),ae=new L({objectMode:!0,writable:!1,read(){}})}throw new g(q,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],Z)};function B(F){let{promise:Z,resolve:q}=E();const ne=new D,ae=ne.signal;return{value:F(async function*(){for(;;){const ee=Z;Z=null;const{chunk:ie,done:U,cb:Q}=await ee;if(e.nextTick(Q),U)return;if(ae.aborted)throw new p(void 0,{cause:ae.reason});({promise:Z,resolve:q}=E()),yield ie}}(),{signal:ae}),write(ee,ie,U){const Q=q;q=null,Q({chunk:ee,done:!1,cb:U})},final(ee){const ie=q;q=null,ie({done:!0,cb:ee})},destroy(ee,ie){ne.abort(),ie(ee)}}}function Y(F){const Z=F.readable&&typeof F.readable.read!="function"?x.wrap(F.readable):F.readable,q=F.writable;let ne=!!n(Z),ae=!!r(q),re,ee,ie,U,Q;function X(de){const be=U;U=null,be?be(de):de&&Q.destroy(de)}return Q=new L({readableObjectMode:!!(Z!=null&&Z.readableObjectMode),writableObjectMode:!!(q!=null&&q.writableObjectMode),readable:ne,writable:ae}),ae&&(h(q,de=>{ae=!1,de&&b(Z,de),X(de)}),Q._write=function(de,be,_e){q.write(de,be)?_e():re=_e},Q._final=function(de){q.end(),ee=de},q.on("drain",function(){if(re){const de=re;re=null,de()}}),q.on("finish",function(){if(ee){const de=ee;ee=null,de()}})),ne&&(h(Z,de=>{ne=!1,de&&b(Z,de),X(de)}),Z.on("readable",function(){if(ie){const de=ie;ie=null,de()}}),Z.on("end",function(){Q.push(null)}),Q._read=function(){for(;;){const de=Z.read();if(de===null){ie=Q._read;return}if(!Q.push(de))return}}),Q._destroy=function(de,be){!de&&U!==null&&(de=new p),ie=null,re=null,ee=null,U===null?be(de):(U=be,b(q,de),b(Z,de))},Q}return CS}var kS,QI;function ql(){if(QI)return kS;QI=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:n,ObjectSetPrototypeOf:r}=Wr();kS=o;const a=Ww(),i=Ek();r(o.prototype,a.prototype),r(o,a);{const d=n(i.prototype);for(let h=0;h<d.length;h++){const p=d[h];o.prototype[p]||(o.prototype[p]=i.prototype[p])}}function o(d){if(!(this instanceof o))return new o(d);a.call(this,d),i.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(i.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(i.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(i.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(i.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(i.prototype,"writableLength")},writableFinished:{__proto__:null,...t(i.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(i.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(i.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(i.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let s;function l(){return s===void 0&&(s={}),s}o.fromWeb=function(d,h){return l().newStreamDuplexFromReadableWritablePair(d,h)},o.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let u;return o.from=function(d){return u||(u=uee()),u(d,"body")},kS}var TS,e4;function nP(){if(e4)return TS;e4=1;const{ObjectSetPrototypeOf:e,Symbol:t}=Wr();TS=o;const{ERR_METHOD_NOT_IMPLEMENTED:n}=xi().codes,r=ql(),{getHighWaterMark:a}=Gw();e(o.prototype,r.prototype),e(o,r);const i=t("kCallback");function o(u){if(!(this instanceof o))return new o(u);const d=u?a(this,u,"readableHighWaterMark",!0):null;d===0&&(u={...u,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:u.writableHighWaterMark||0}),r.call(this,u),this._readableState.sync=!1,this[i]=null,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",l)}function s(u){typeof this._flush=="function"&&!this.destroyed?this._flush((d,h)=>{if(d){u?u(d):this.destroy(d);return}h!=null&&this.push(h),this.push(null),u&&u()}):(this.push(null),u&&u())}function l(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(u,d,h){throw new n("_transform()")},o.prototype._write=function(u,d,h){const p=this._readableState,g=this._writableState,v=p.length;this._transform(u,d,(b,_)=>{if(b){h(b);return}_!=null&&this.push(_),g.ended||v===p.length||p.length<p.highWaterMark?h():this[i]=h})},o.prototype._read=function(){if(this[i]){const u=this[i];this[i]=null,u()}},TS}var AS,t4;function rP(){if(t4)return AS;t4=1;const{ObjectSetPrototypeOf:e}=Wr();AS=n;const t=nP();e(n.prototype,t.prototype),e(n,t);function n(r){if(!(this instanceof n))return new n(r);t.call(this,r)}return n.prototype._transform=function(r,a,i){i(null,r)},AS}var NS,n4;function Ck(){if(n4)return NS;n4=1;const e=Fd(),{ArrayIsArray:t,Promise:n,SymbolAsyncIterator:r,SymbolDispose:a}=Wr(),i=xu(),{once:o}=Oi(),s=qh(),l=ql(),{aggregateTwoErrors:u,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:h,ERR_MISSING_ARGS:p,ERR_STREAM_DESTROYED:g,ERR_STREAM_PREMATURE_CLOSE:v},AbortError:b}=xi(),{validateFunction:_,validateAbortSignal:x}=cg(),{isIterable:S,isReadable:E,isReadableNodeStream:C,isNodeStream:k,isTransformStream:R,isWebStream:D,isReadableStream:O,isReadableFinished:L}=Jl(),B=globalThis.AbortController||y0().AbortController;let Y,F,Z;function q(de,be,_e){let Pe=!1;de.on("close",()=>{Pe=!0});const Ne=i(de,{readable:be,writable:_e},Re=>{Pe=!Re});return{destroy:Re=>{Pe||(Pe=!0,s.destroyer(de,Re||new g("pipe")))},cleanup:Ne}}function ne(de){return _(de[de.length-1],"streams[stream.length - 1]"),de.pop()}function ae(de){if(S(de))return de;if(C(de))return re(de);throw new d("val",["Readable","Iterable","AsyncIterable"],de)}async function*re(de){F||(F=Ww()),yield*F.prototype[r].call(de)}async function ee(de,be,_e,{end:Pe}){let Ne,Re=null;const Ce=Le=>{if(Le&&(Ne=Le),Re){const Ie=Re;Re=null,Ie()}},Fe=()=>new n((Le,Ie)=>{Ne?Ie(Ne):Re=()=>{Ne?Ie(Ne):Le()}});be.on("drain",Ce);const Qe=i(be,{readable:!1},Ce);try{be.writableNeedDrain&&await Fe();for await(const Le of de)be.write(Le)||await Fe();Pe&&(be.end(),await Fe()),_e()}catch(Le){_e(Ne!==Le?u(Ne,Le):Le)}finally{Qe(),be.off("drain",Ce)}}async function ie(de,be,_e,{end:Pe}){R(be)&&(be=be.writable);const Ne=be.getWriter();try{for await(const Re of de)await Ne.ready,Ne.write(Re).catch(()=>{});await Ne.ready,Pe&&await Ne.close(),_e()}catch(Re){try{await Ne.abort(Re),_e(Re)}catch(Ce){_e(Ce)}}}function U(...de){return Q(de,o(ne(de)))}function Q(de,be,_e){if(de.length===1&&t(de[0])&&(de=de[0]),de.length<2)throw new p("streams");const Pe=new B,Ne=Pe.signal,Re=_e==null?void 0:_e.signal,Ce=[];x(Re,"options.signal");function Fe(){le(new b)}Z=Z||Oi().addAbortListener;let Qe;Re&&(Qe=Z(Re,Fe));let Le,Ie;const V=[];let me=0;function Te(Ee){le(Ee,--me===0)}function le(Ee,We){var kt;if(Ee&&(!Le||Le.code==="ERR_STREAM_PREMATURE_CLOSE")&&(Le=Ee),!(!Le&&!We)){for(;V.length;)V.shift()(Le);(kt=Qe)===null||kt===void 0||kt[a](),Pe.abort(),We&&(Le||Ce.forEach(at=>at()),e.nextTick(be,Le,Ie))}}let oe;for(let Ee=0;Ee<de.length;Ee++){const We=de[Ee],kt=Ee<de.length-1,at=Ee>0,_t=kt||(_e==null?void 0:_e.end)!==!1,jt=Ee===de.length-1;if(k(We)){let Dt=function(Gt){Gt&&Gt.name!=="AbortError"&&Gt.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Te(Gt)};var Me=Dt;if(_t){const{destroy:Gt,cleanup:ye}=q(We,kt,at);V.push(Gt),E(We)&&jt&&Ce.push(ye)}We.on("error",Dt),E(We)&&jt&&Ce.push(()=>{We.removeListener("error",Dt)})}if(Ee===0)if(typeof We=="function"){if(oe=We({signal:Ne}),!S(oe))throw new h("Iterable, AsyncIterable or Stream","source",oe)}else S(We)||C(We)||R(We)?oe=We:oe=l.from(We);else if(typeof We=="function"){if(R(oe)){var J;oe=ae((J=oe)===null||J===void 0?void 0:J.readable)}else oe=ae(oe);if(oe=We(oe,{signal:Ne}),kt){if(!S(oe,!0))throw new h("AsyncIterable",`transform[${Ee-1}]`,oe)}else{var xe;Y||(Y=rP());const Dt=new Y({objectMode:!0}),Gt=(xe=oe)===null||xe===void 0?void 0:xe.then;if(typeof Gt=="function")me++,Gt.call(oe,G=>{Ie=G,G!=null&&Dt.write(G),_t&&Dt.end(),e.nextTick(Te)},G=>{Dt.destroy(G),e.nextTick(Te,G)});else if(S(oe,!0))me++,ee(oe,Dt,Te,{end:_t});else if(O(oe)||R(oe)){const G=oe.readable||oe;me++,ee(G,Dt,Te,{end:_t})}else throw new h("AsyncIterable or Promise","destination",oe);oe=Dt;const{destroy:ye,cleanup:I}=q(oe,!1,!0);V.push(ye),jt&&Ce.push(I)}}else if(k(We)){if(C(oe)){me+=2;const Dt=X(oe,We,Te,{end:_t});E(We)&&jt&&Ce.push(Dt)}else if(R(oe)||O(oe)){const Dt=oe.readable||oe;me++,ee(Dt,We,Te,{end:_t})}else if(S(oe))me++,ee(oe,We,Te,{end:_t});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else if(D(We)){if(C(oe))me++,ie(ae(oe),We,Te,{end:_t});else if(O(oe)||S(oe))me++,ie(oe,We,Te,{end:_t});else if(R(oe))me++,ie(oe.readable,We,Te,{end:_t});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],oe);oe=We}else oe=l.from(We)}return(Ne!=null&&Ne.aborted||Re!=null&&Re.aborted)&&e.nextTick(Fe),oe}function X(de,be,_e,{end:Pe}){let Ne=!1;if(be.on("close",()=>{Ne||_e(new v)}),de.pipe(be,{end:!1}),Pe){let Ce=function(){Ne=!0,be.end()};var Re=Ce;L(de)?e.nextTick(Ce):de.once("end",Ce)}else _e();return i(de,{readable:!0,writable:!1},Ce=>{const Fe=de._readableState;Ce&&Ce.code==="ERR_STREAM_PREMATURE_CLOSE"&&Fe&&Fe.ended&&!Fe.errored&&!Fe.errorEmitted?de.once("end",_e).once("error",_e):_e(Ce)}),i(be,{readable:!1,writable:!0},_e)}return NS={pipelineImpl:Q,pipeline:U},NS}var RS,r4;function aP(){if(r4)return RS;r4=1;const{pipeline:e}=Ck(),t=ql(),{destroyer:n}=qh(),{isNodeStream:r,isReadable:a,isWritable:i,isWebStream:o,isTransformStream:s,isWritableStream:l,isReadableStream:u}=Jl(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:h,ERR_MISSING_ARGS:p}}=xi(),g=xu();return RS=function(...b){if(b.length===0)throw new p("streams");if(b.length===1)return t.from(b[0]);const _=[...b];if(typeof b[0]=="function"&&(b[0]=t.from(b[0])),typeof b[b.length-1]=="function"){const Y=b.length-1;b[Y]=t.from(b[Y])}for(let Y=0;Y<b.length;++Y)if(!(!r(b[Y])&&!o(b[Y]))){if(Y<b.length-1&&!(a(b[Y])||u(b[Y])||s(b[Y])))throw new h(`streams[${Y}]`,_[Y],"must be readable");if(Y>0&&!(i(b[Y])||l(b[Y])||s(b[Y])))throw new h(`streams[${Y}]`,_[Y],"must be writable")}let x,S,E,C,k;function R(Y){const F=C;C=null,F?F(Y):Y?k.destroy(Y):!B&&!L&&k.destroy()}const D=b[0],O=e(b,R),L=!!(i(D)||l(D)||s(D)),B=!!(a(O)||u(O)||s(O));if(k=new t({writableObjectMode:!!(D!=null&&D.writableObjectMode),readableObjectMode:!!(O!=null&&O.readableObjectMode),writable:L,readable:B}),L){if(r(D))k._write=function(F,Z,q){D.write(F,Z)?q():x=q},k._final=function(F){D.end(),S=F},D.on("drain",function(){if(x){const F=x;x=null,F()}});else if(o(D)){const Z=(s(D)?D.writable:D).getWriter();k._write=async function(q,ne,ae){try{await Z.ready,Z.write(q).catch(()=>{}),ae()}catch(re){ae(re)}},k._final=async function(q){try{await Z.ready,Z.close().catch(()=>{}),S=q}catch(ne){q(ne)}}}const Y=s(O)?O.readable:O;g(Y,()=>{if(S){const F=S;S=null,F()}})}if(B){if(r(O))O.on("readable",function(){if(E){const Y=E;E=null,Y()}}),O.on("end",function(){k.push(null)}),k._read=function(){for(;;){const Y=O.read();if(Y===null){E=k._read;return}if(!k.push(Y))return}};else if(o(O)){const F=(s(O)?O.readable:O).getReader();k._read=async function(){for(;;)try{const{value:Z,done:q}=await F.read();if(!k.push(Z))return;if(q){k.push(null);return}}catch{return}}}}return k._destroy=function(Y,F){!Y&&C!==null&&(Y=new d),E=null,x=null,S=null,C===null?F(Y):(C=F,r(O)&&n(O,Y))},k},RS}var a4;function dee(){if(a4)return vb;a4=1;const e=globalThis.AbortController||y0().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:n,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:a},AbortError:i}=xi(),{validateAbortSignal:o,validateInteger:s,validateObject:l}=cg(),u=Wr().Symbol("kWeak"),d=Wr().Symbol("kResistStopPropagation"),{finished:h}=xu(),p=aP(),{addAbortSignalNoValidate:g}=Vw(),{isWritable:v,isNodeStream:b}=Jl(),{deprecate:_}=Oi(),{ArrayPrototypePush:x,Boolean:S,MathFloor:E,Number:C,NumberIsNaN:k,Promise:R,PromiseReject:D,PromiseResolve:O,PromisePrototypeThen:L,Symbol:B}=Wr(),Y=B("kEmpty"),F=B("kEof");function Z(Re,Ce){if(Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal"),b(Re)&&!v(Re))throw new t("stream",Re,"must be writable");const Fe=p(this,Re);return Ce!=null&&Ce.signal&&g(Ce.signal,Fe),Fe}function q(Re,Ce){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal");let Fe=1;(Ce==null?void 0:Ce.concurrency)!=null&&(Fe=E(Ce.concurrency));let Qe=Fe-1;return(Ce==null?void 0:Ce.highWaterMark)!=null&&(Qe=E(Ce.highWaterMark)),s(Fe,"options.concurrency",1),s(Qe,"options.highWaterMark",0),Qe+=Fe,(async function*(){const Ie=Oi().AbortSignalAny([Ce==null?void 0:Ce.signal].filter(S)),V=this,me=[],Te={signal:Ie};let le,oe,J=!1,xe=0;function Me(){J=!0,Ee()}function Ee(){xe-=1,We()}function We(){oe&&!J&&xe<Fe&&me.length<Qe&&(oe(),oe=null)}async function kt(){try{for await(let at of V){if(J)return;if(Ie.aborted)throw new i;try{if(at=Re(at,Te),at===Y)continue;at=O(at)}catch(_t){at=D(_t)}xe+=1,L(at,Ee,Me),me.push(at),le&&(le(),le=null),!J&&(me.length>=Qe||xe>=Fe)&&await new R(_t=>{oe=_t})}me.push(F)}catch(at){const _t=D(at);L(_t,Ee,Me),me.push(_t)}finally{J=!0,le&&(le(),le=null)}}kt();try{for(;;){for(;me.length>0;){const at=await me[0];if(at===F)return;if(Ie.aborted)throw new i;at!==Y&&(yield at),me.shift(),We()}await new R(at=>{le=at})}}finally{J=!0,oe&&(oe(),oe=null)}}).call(this)}function ne(Re=void 0){return Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal"),(async function*(){let Fe=0;for await(const Le of this){var Qe;if(Re!=null&&(Qe=Re.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i({cause:Re.signal.reason});yield[Fe++,Le]}}).call(this)}async function ae(Re,Ce=void 0){for await(const Fe of U.call(this,Re,Ce))return!0;return!1}async function re(Re,Ce=void 0){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);return!await ae.call(this,async(...Fe)=>!await Re(...Fe),Ce)}async function ee(Re,Ce){for await(const Fe of U.call(this,Re,Ce))return Fe}async function ie(Re,Ce){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(Qe,Le){return await Re(Qe,Le),Y}for await(const Qe of q.call(this,Fe,Ce));}function U(Re,Ce){if(typeof Re!="function")throw new n("fn",["Function","AsyncFunction"],Re);async function Fe(Qe,Le){return await Re(Qe,Le)?Qe:Y}return q.call(this,Fe,Ce)}class Q extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function X(Re,Ce,Fe){var Qe;if(typeof Re!="function")throw new n("reducer",["Function","AsyncFunction"],Re);Fe!=null&&l(Fe,"options"),(Fe==null?void 0:Fe.signal)!=null&&o(Fe.signal,"options.signal");let Le=arguments.length>1;if(Fe!=null&&(Qe=Fe.signal)!==null&&Qe!==void 0&&Qe.aborted){const le=new i(void 0,{cause:Fe.signal.reason});throw this.once("error",()=>{}),await h(this.destroy(le)),le}const Ie=new e,V=Ie.signal;if(Fe!=null&&Fe.signal){const le={once:!0,[u]:this,[d]:!0};Fe.signal.addEventListener("abort",()=>Ie.abort(),le)}let me=!1;try{for await(const le of this){var Te;if(me=!0,Fe!=null&&(Te=Fe.signal)!==null&&Te!==void 0&&Te.aborted)throw new i;Le?Ce=await Re(Ce,le,{signal:V}):(Ce=le,Le=!0)}if(!me&&!Le)throw new Q}finally{Ie.abort()}return Ce}async function de(Re){Re!=null&&l(Re,"options"),(Re==null?void 0:Re.signal)!=null&&o(Re.signal,"options.signal");const Ce=[];for await(const Qe of this){var Fe;if(Re!=null&&(Fe=Re.signal)!==null&&Fe!==void 0&&Fe.aborted)throw new i(void 0,{cause:Re.signal.reason});x(Ce,Qe)}return Ce}function be(Re,Ce){const Fe=q.call(this,Re,Ce);return(async function*(){for await(const Le of Fe)yield*Le}).call(this)}function _e(Re){if(Re=C(Re),k(Re))return 0;if(Re<0)throw new a("number",">= 0",Re);return Re}function Pe(Re,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal"),Re=_e(Re),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;Re--<=0&&(yield Ie)}}).call(this)}function Ne(Re,Ce=void 0){return Ce!=null&&l(Ce,"options"),(Ce==null?void 0:Ce.signal)!=null&&o(Ce.signal,"options.signal"),Re=_e(Re),(async function*(){var Qe;if(Ce!=null&&(Qe=Ce.signal)!==null&&Qe!==void 0&&Qe.aborted)throw new i;for await(const Ie of this){var Le;if(Ce!=null&&(Le=Ce.signal)!==null&&Le!==void 0&&Le.aborted)throw new i;if(Re-- >0&&(yield Ie),Re<=0)return}}).call(this)}return vb.streamReturningOperators={asIndexedPairs:_(ne,"readable.asIndexedPairs will be removed in a future version."),drop:Pe,filter:U,flatMap:be,map:q,take:Ne,compose:Z},vb.promiseReturningOperators={every:re,forEach:ie,reduce:X,toArray:de,some:ae,find:ee},vb}var IS,i4;function iP(){if(i4)return IS;i4=1;const{ArrayPrototypePop:e,Promise:t}=Wr(),{isIterable:n,isNodeStream:r,isWebStream:a}=Jl(),{pipelineImpl:i}=Ck(),{finished:o}=xu();oP();function s(...l){return new t((u,d)=>{let h,p;const g=l[l.length-1];if(g&&typeof g=="object"&&!r(g)&&!n(g)&&!a(g)){const v=e(l);h=v.signal,p=v.end}i(l,(v,b)=>{v?d(v):u(b)},{signal:h,end:p})})}return IS={finished:o,pipeline:s},IS}var o4;function oP(){if(o4)return sS.exports;o4=1;const{Buffer:e}=_u(),{ObjectDefineProperty:t,ObjectKeys:n,ReflectApply:r}=Wr(),{promisify:{custom:a}}=Oi(),{streamReturningOperators:i,promiseReturningOperators:o}=dee(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=xi(),l=aP(),{setDefaultHighWaterMark:u,getDefaultHighWaterMark:d}=Gw(),{pipeline:h}=Ck(),{destroyer:p}=qh(),g=xu(),v=iP(),b=Jl(),_=sS.exports=xk().Stream;_.isDestroyed=b.isDestroyed,_.isDisturbed=b.isDisturbed,_.isErrored=b.isErrored,_.isReadable=b.isReadable,_.isWritable=b.isWritable,_.Readable=Ww();for(const E of n(i)){let k=function(...R){if(new.target)throw s();return _.Readable.from(r(C,this,R))};var S=k;const C=i[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}for(const E of n(o)){let k=function(...D){if(new.target)throw s();return r(C,this,D)};var S=k;const C=o[E];t(k,"name",{__proto__:null,value:C.name}),t(k,"length",{__proto__:null,value:C.length}),t(_.Readable.prototype,E,{__proto__:null,value:k,enumerable:!1,configurable:!0,writable:!0})}_.Writable=Ek(),_.Duplex=ql(),_.Transform=nP(),_.PassThrough=rP(),_.pipeline=h;const{addAbortSignal:x}=Vw();return _.addAbortSignal=x,_.finished=g,_.destroy=p,_.compose=l,_.setDefaultHighWaterMark=u,_.getDefaultHighWaterMark=d,t(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return v}}),t(h,a,{__proto__:null,enumerable:!0,get(){return v.pipeline}}),t(g,a,{__proto__:null,enumerable:!0,get(){return v.finished}}),_.Stream=_,_._isUint8Array=function(C){return C instanceof Uint8Array},_._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},sS.exports}var s4;function fee(){return s4||(s4=1,function(e){const t=oP(),n=iP(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return n}}),e.exports.Stream=t.Stream,e.exports.default=e.exports}(oS)),oS.exports}var sP=fee();class kk extends sP.Readable{constructor(t={},n){var r;super({...t,encoding:(r=t.encoding)!==null&&r!==void 0?r:void 0}),this.pending=!0,this._path="<unknown>",this._bytesRead=0,this.ready=Promise.resolve(n).then(a=>{this._path=a.path;const i=a.readableWebStream({start:t.start,end:t.end});this.reader=i.getReader(),this.pending=!1}).catch(a=>{this.destroy(a)})}async _read(){try{if(await this.ready,!this.reader)return;const{done:t,value:n}=await this.reader.read();if(t){this.push(null);return}this._bytesRead+=n.byteLength,this.push(n)}catch(t){this.destroy(new Ue(st.EIO,t.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesRead(){return this._bytesRead}wrap(t){return super.wrap(t),this}}class Tk extends sP.Writable{constructor(t={},n){super(t),this.pending=!0,this._path="<unknown>",this._bytesWritten=0,this.ready=Promise.resolve(n).then(r=>{this._path=r.path;const a=r.writableWebStream({start:t.start});this.writer=a.getWriter(),this.pending=!1}).catch(r=>this.destroy(r))}async _write(t,n,r){if(await this.ready,!this.writer)return r(ti(new Ue(st.EAGAIN,"Underlying writable stream not ready",this._path)));if(n!="buffer")return r(ti(new Ue(st.ENOTSUP,"Unsupported encoding for stream",this._path)));const a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);try{await this.writer.write(a),this._bytesWritten+=t.byteLength,r()}catch(i){r(new Ue(st.EIO,i.toString()))}}async _final(t){if(await this.ready,!this.writer)return t();try{await this.writer.close(),t()}catch(n){t(new Ue(st.EIO,n.toString()))}}close(t=()=>null){try{this.destroy(),this.emit("close"),t(null)}catch(n){t(new Ue(st.EIO,n.toString()))}}get path(){return this._path}get bytesWritten(){return this._bytesWritten}}var ko=function(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(a=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");a&&(r=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t},To=function(e){return function(t){function n(o){t.error=t.hasError?new e(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,a=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&a===1)return a=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return a|=2,Promise.resolve(o).then(i,function(s){return n(s),i()})}else a|=1}catch(s){n(s)}if(a===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}}(typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r});class ii{get position(){return this.flag&vd?this.inode.size:this._position}set position(t){this._position=t}constructor(t,n){this.context=t,this.fd=n,this._position=0,this.dirty=!1,this.closed=!1;const r=li(t,n);Object.assign(this,Ad(r,"path","fs","internalPath","flag","inode"))}get _isSync(){return!!(this.flag&zw||this.inode.flags&Ii.Sync)}_emitChange(){Ga(this.context,"change",this.path)}async chown(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"chown");this.dirty=!0,$8(this.inode,t,n),this._isSync&&await this.sync(),this._emitChange()}async chmod(t){const n=vu(t,-1);if(n<0)throw new Ue(st.EINVAL,"Invalid mode");if(this.closed)throw Ue.With("EBADF",this.path,"chmod");this.dirty=!0,this.inode.mode=this.inode.mode&(n>Er?-61441:Er)|n,(this._isSync||n>Er)&&await this.sync(),this._emitChange()}datasync(){return this.sync()}async sync(){if(this.closed)throw Ue.With("EBADF",this.path,"sync");this.dirty&&(this.fs.attributes.has("no_write")||await this.fs.touch(this.internalPath,this.inode),this.dirty=!1)}async truncate(t=0){if(this.closed)throw Ue.With("EBADF",this.path,"truncate");if(t<0)throw new Ue(st.EINVAL);if(this.dirty=!0,!(this.flag&ei||this.flag&Ml))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"truncate");this.inode.mtimeMs=Date.now(),this.inode.size=t,this._isSync&&await this.sync(),this._emitChange()}async utimes(t,n){if(this.closed)throw Ue.With("EBADF",this.path,"utimes");this.dirty=!0,this.inode.atimeMs=Av(t),this.inode.mtimeMs=Av(n),this._isSync&&await this.sync(),this._emitChange()}async appendFile(t,n={}){const r=Pl(n,"utf8","a",420);if(!(Fl(r.flag)&vd))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Dr.from(t,r.encoding):t;await this._write(i,0,i.length),this._emitChange()}async _read(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"read");if(this.flag&ei)throw new Ue(st.EPERM,"File not opened with a readable mode");this.inode.flags&Ii.NoAtime||(this.dirty=!0,this.inode.atimeMs=Date.now());let i=a+r;!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(i=a+Math.max(this.inode.size-a,0)),this._position=i;const o=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);return await this.fs.read(this.internalPath,o.subarray(n,n+r),a,i),this._isSync&&await this.sync(),{bytesRead:i-a,buffer:t}}async read(t,n,r,a){typeof n=="object"&&n!=null&&(a=n.position,r=n.length,n=n.offset),!ArrayBuffer.isView(t)&&typeof t=="object"&&(a=t.position,r=t.length,n=t.offset,t=t.buffer);const i=Number.isSafeInteger(a)?a:this.position;return t||(t=new Uint8Array(this.inode.size)),n??(n=0),this._read(t,n,r??t.byteLength-n,i)}async readFile(t){const n=Pl(t,null,"r",292);if(Fl(n.flag)&ei)throw new Ue(st.EINVAL,"Flag passed must allow for reading",this.path,"readFile");const{size:a}=await this.stat(),{buffer:i}=await this._read(new Uint8Array(a),0,a,0),o=Dr.from(i);return n.encoding?o.toString(n.encoding):o}readableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"readableWebStream");return this.fs.streamRead(this.internalPath,t)}writableWebStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"writableWebStream");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"writableWebStream");return this.fs.streamWrite(this.internalPath,t)}readLines(t){if(this.closed||this.flag&ei)throw Ue.With("EBADF",this.path,"readLines");return IQ({input:this.createReadStream(t),crlfDelay:1/0})}[Symbol.asyncDispose](){return this.close()}async stat(t){if(this.closed)throw Ue.With("EBADF",this.path,"stat");if(!dr(this.context,this.inode,_a))throw Ue.With("EACCES",this.path,"stat");return t!=null&&t.bigint?new jd(this.inode):new Xl(this.inode)}async _write(t,n=0,r=t.byteLength-n,a=this.position){if(this.closed)throw Ue.With("EBADF",this.path,"write");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"write");if(!(this.flag&ei||this.flag&Ml))throw new Ue(st.EPERM,"File not opened with a writeable mode",this.path,"write");this.dirty=!0;const i=a+r,o=t.subarray(n,n+r);return!p0(this.inode)&&!h0(this.inode)&&i>this.inode.size&&(this.inode.size=i),this.inode.mtimeMs=Date.now(),this.inode.ctimeMs=Date.now(),this._position=a+o.byteLength,await this.fs.write(this.internalPath,o,a),this._isSync&&await this.sync(),o.byteLength}async write(t,n,r,a){let i,o,s;typeof n=="object"&&n!=null&&(r=n.length,a=n.position,n=n.offset),typeof t=="string"?(a=typeof n=="number"?n:null,o=0,i=Dr.from(t,typeof r=="string"?r:"utf8"),s=i.length):(i=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),o=n??0,s=typeof r=="number"?r:i.byteLength,a=typeof a=="number"?a:null),a??(a=this.position);const l=await this._write(i,o,s,a);return this._emitChange(),{buffer:t,bytesWritten:l}}async writeFile(t,n={}){const r=Pl(n,"utf8","w",420),a=Fl(r.flag);if(!(a&ei||a&Ml))throw new Ue(st.EINVAL,"Flag passed must allow for writing",this.path,"writeFile");if(typeof t!="string"&&!r.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const i=typeof t=="string"?Dr.from(t,r.encoding):t;await this._write(i,0,i.length,0),this._emitChange()}async close(){if(this.closed)throw Ue.With("EBADF",this.path,"close");await this.sync(),this.dispose(),U8(this.context,this.fd)}dispose(t){if(this.closed)throw Ue.With("EBADF",this.path,"dispose");if(this.dirty&&!t)throw Ue.With("EBUSY",this.path,"dispose");this.closed=!0}async writev(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.write(a)).bytesWritten;return{bytesWritten:r,buffers:t}}async readv(t,n){typeof n=="number"&&(this.position=n);let r=0;for(const a of t)r+=(await this.read(a)).bytesRead;return{bytesRead:r,buffers:t}}createReadStream(t={}){if(this.closed||this.flag&ei)throw Ue.With("EBADF",this.path,"createReadStream");return new kk(t,this)}createWriteStream(t={}){if(this.closed)throw Ue.With("EBADF",this.path,"createWriteStream");if(this.inode.flags&Ii.Immutable)throw new Ue(st.EPERM,"File is immutable",this.path,"createWriteStream");return new Tk(t,this)}}async function lP(e,t){e=fn(e),t=fn(t);const n=Pn(e,this),r=Pn(t,this);if(!(await Vh.call(this,Xn(e))).hasAccess(Jr,this))throw Ue.With("EACCES",e,"rename");try{if(n.mountPoint==r.mountPoint){await n.fs.rename(n.path,r.path),Ga(this,"rename",e.toString()),Ga(this,"change",t.toString());return}await Xw.call(this,t,await Yw(e)),await Zw.call(this,e),Ga(this,"rename",e.toString())}catch(a){throw fr(a,{[n.path]:e,[r.path]:t})}}async function ug(e){try{const{fs:t,path:n}=Pn(await Su.call(this,e),this);return await t.exists(n)}catch(t){if(t instanceof Ue&&t.code=="ENOENT")return!1;throw t}}async function Vh(e,t){e=fn(e);const{fs:n,path:r}=Pn(await Su.call(this,e),this);try{const a=await n.stat(r);if(xa&&!dr(this,a,_a))throw Ue.With("EACCES",r,"stat");return t!=null&&t.bigint?new jd(a):new Xl(a)}catch(a){throw fr(a,{[r]:e})}}async function Kw(e,t){e=fn(e);const{fs:n,path:r}=Pn(e,this);try{const a=await n.stat(r);if(xa&&!dr(this,a,_a))throw Ue.With("EACCES",r,"lstat");return t!=null&&t.bigint?new jd(a):new Xl(a)}catch(a){throw fr(a,{[r]:e})}}async function cP(e,t=0){const n={stack:[],error:void 0,hasError:!1};try{await ko(n,await Ao.call(this,e,"r+"),!0).truncate(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function Zw(e){e=fn(e);const{fs:t,path:n}=Pn(e,this);try{if(xa&&!dr(this,await t.stat(n),Jr))throw Ue.With("EACCES",n,"unlink");await t.unlink(n),Ga(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}async function Gh(e,t,n){var r;t=fn(t);const a=vu(n.mode,420),i=Fl(n.flag),{fullPath:o,fs:s,path:l,stats:u}=await Ov(e,t.toString(),n.preserveSymlinks);if(!u){if(!(i&Lw))throw Ue.With("ENOENT",o,"_open");const h=await s.stat(Xn(l));if(!dr(e,h,Jr))throw Ue.With("EACCES",Xn(o),"_open");if(!Xo(h))throw Ue.With("ENOTDIR",Xn(o),"_open");const{euid:p,egid:g}=(r=e==null?void 0:e.credentials)!==null&&r!==void 0?r:rs.credentials,v=await s.createFile(l,{mode:a,uid:h.mode&ig?h.uid:p,gid:h.mode&og?h.gid:g});return new ii(e,Rv(new Nv(e,t,s,l,i,v)))}if(!dr(e,u,H8(i)))throw Ue.With("EACCES",o,"_open");if(i&$w)throw Ue.With("EEXIST",o,"_open");const d=new ii(e,Rv(new Nv(e,t,s,l,i,u)));return i&Bw&&await d.truncate(0),d}async function Ao(e,t="r",n=420){return await Gh(this,e,{flag:t,mode:n})}async function Yw(e,t){const n={stack:[],error:void 0,hasError:!1};try{const r=Pl(t,null,"r",292);return await ko(n,typeof e=="object"&&"fd"in e?e:await Ao.call(this,e,r.flag,r.mode),!0).readFile(r)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function Xw(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Pl(n,"utf8","w+",420),i=ko(r,e instanceof ii?e:await Ao.call(this,e.toString(),a.flag,a.mode),!0),o=typeof t=="string"?t:t instanceof DataView?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t;if(typeof o!="string"&&!(o instanceof Uint8Array))throw new Ue(st.EINVAL,'The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView. Received '+typeof t,i.path,"writeFile");await i.writeFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function uP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{const a=Pl(n,"utf8","a",420);if(!(Fl(a.flag)&vd))throw new Ue(st.EINVAL,"Flag passed to appendFile must allow for appending");if(typeof t!="string"&&!a.encoding)throw new Ue(st.EINVAL,"Encoding not specified");const o=typeof t=="string"?Dr.from(t,a.encoding):new Uint8Array(t.buffer,t.byteOffset,t.byteLength);await ko(r,typeof e=="object"&&"fd"in e?e:await Ao.call(this,e,a.flag,a.mode),!0).appendFile(o,a)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function Ak(e){e=await Su.call(this,e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);if(!r)throw Ue.With("ENOENT",e,"rmdir");if(!Xo(r))throw Ue.With("ENOTDIR",n,"rmdir");if(xa&&!dr(this,r,Jr))throw Ue.With("EACCES",n,"rmdir");await t.rmdir(n),Ga(this,"rename",e.toString())}catch(r){throw fr(r,{[n]:e})}}async function Jw(e,t){var n,r;const{euid:a,egid:i}=(n=this===null||this===void 0?void 0:this.credentials)!==null&&n!==void 0?n:rs.credentials;t=typeof t=="object"?t:{mode:t};const o=vu(t==null?void 0:t.mode,511);e=await Su.call(this,e);const{fs:s,path:l,root:u}=Pn(e,this),d={[l]:e},h=async(p,g)=>{if(!dr(this,g,Jr))throw Ue.With("EACCES",Xn(p),"mkdir");const v=await s.mkdir(p,{mode:o,uid:g.mode&ig?g.uid:a,gid:g.mode&og?g.gid:i});return Ga(this,"rename",p),v};try{if(!(t!=null&&t.recursive)){await h(l,await s.stat(Xn(l)));return}const p=[];for(let v=l,b=e;!await s.exists(v);v=Xn(v),b=Xn(b))p.unshift(v),d[v]=b;if(!p.length)return;const g=[await s.stat(Xn(p[0]))];for(const[v,b]of p.entries())g.push(await h(b,g[v]));return u.length==1?p[0]:(r=p[0])===null||r===void 0?void 0:r.slice(u.length)}catch(p){throw fr(p,d)}}async function Ld(e,t){t=typeof t=="object"?t:{encoding:t},e=await Su.call(this,e);const{fs:n,path:r}=Pn(e,this),a=await n.stat(r).catch(l=>mr(fr(l,{[r]:e})));if(!a)throw Ue.With("ENOENT",e,"readdir");if(!dr(this,a,_a))throw Ue.With("EACCES",e,"readdir");if(!Xo(a))throw Ue.With("ENOTDIR",e,"readdir");const i=await n.readdir(r).catch(l=>mr(fr(l,{[r]:e}))),o=[],s=async l=>{let u;if(!((t!=null&&t.recursive||t!=null&&t.withFileTypes)&&(u=await n.stat(lr(r,l)).catch(d=>{if(d.code!="ENOENT")throw fr(d,{[r]:e})}),!u))&&(t!=null&&t.withFileTypes?o.push(new g0(l,u)):(t==null?void 0:t.encoding)=="buffer"?o.push(Dr.from(l)):o.push(l),!(!(t!=null&&t.recursive)||!Xo(u))))for(const d of await Ld.call(this,lr(e,l),t))d instanceof g0?(d.path=lr(l,d.path),o.push(d)):Dr.isBuffer(d)?o.push(Dr.from(lr(l,ek(d)))):o.push(lr(l,d))};return await Promise.all(i.map(s)),o}async function dP(e,t){e=fn(e),t=fn(t);const{fs:n,path:r}=Pn(e,this),a=Pn(t,this);if(n!=a.fs)throw Ue.With("EXDEV",t,"link");try{if(xa&&!dr(this,await n.stat(Xn(r)),_a))throw Ue.With("EACCES",Xn(r),"link");if(xa&&!(await Vh.call(this,Xn(t))).hasAccess(Jr,this))throw Ue.With("EACCES",Xn(t),"link");if(xa&&!dr(this,await n.stat(r),_a))throw Ue.With("EACCES",r,"link");return await n.link(r,a.path)}catch(i){throw fr(i,{[a.path]:t,[r]:e})}}async function fP(e,t,n="file"){const r={stack:[],error:void 0,hasError:!1};try{if(!["file","dir","junction"].includes(n))throw new Ue(st.EINVAL,"Invalid symlink type: "+n);if(t=fn(t),await ug.call(this,t))throw Ue.With("EEXIST",t,"symlink");const a=ko(r,await Gh(this,t,{flag:"w+",mode:420,preserveSymlinks:!0}),!0);await a.writeFile(fn(e,!0)),await a.chmod(Yl)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function Iv(e,t){const n={stack:[],error:void 0,hasError:!1};try{const a=await ko(n,await Gh(this,fn(e),{flag:"r",mode:420,preserveSymlinks:!0}),!0).readFile(),i=typeof t=="object"?t==null?void 0:t.encoding:t;return i=="buffer"?a:a.toString(i??"utf-8")}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function hP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await ko(r,await Ao.call(this,e,"r+"),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function pP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await ko(r,await Gh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chown(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function mP(e,t){const n={stack:[],error:void 0,hasError:!1};try{await ko(n,await Ao.call(this,e,"r+"),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function gP(e,t){const n={stack:[],error:void 0,hasError:!1};try{await ko(n,await Gh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).chmod(t)}catch(r){n.error=r,n.hasError=!0}finally{const r=To(n);r&&await r}}async function Nk(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await ko(r,await Ao.call(this,e,"r+"),!0).utimes(t,n)}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function yP(e,t,n){const r={stack:[],error:void 0,hasError:!1};try{await ko(r,await Gh(this,e,{flag:"r+",mode:420,preserveSymlinks:!0,allowDirectory:!0}),!0).utimes(new Date(t),new Date(n))}catch(a){r.error=a,r.hasError=!0}finally{const a=To(r);a&&await a}}async function Ov(e,t,n){if(n){const l=Pn(t,e),u=await l.fs.stat(l.path).catch(()=>{});return{...l,fullPath:t,stats:u}}try{const l=Pn(t,e),u=await l.fs.stat(l.path);if(!wh(u))return{...l,fullPath:t,stats:u};const d=Hl.call(e,Xn(t),(await Iv.call(e,t)).toString());return await Ov(e,d)}catch{}const{base:r,dir:a}=ks(t),i=a=="/"?"/":await Su.call(e,a),o=lr(i,r),s=Pn(o,e);try{const l=await s.fs.stat(s.path);if(!wh(l))return{...s,fullPath:o,stats:l};const u=Hl.call(e,i,(await Iv.call(e,o)).toString());return await Ov(e,u)}catch(l){if(l.code=="ENOENT")return{...s,fullPath:t};throw fr(l,{[s.path]:o})}}async function Su(e,t){var n;const r=typeof t=="string"?t:(n=t==null?void 0:t.encoding)!==null&&n!==void 0?n:"utf8";e=fn(e);const{fullPath:a}=await Ov(this,e);if(r=="utf8"||r=="utf-8")return a;const i=Dr.from(a,"utf-8");return r=="buffer"?i:i.toString(r)}function hee(e,t={}){const n=new W8(this,e.toString(),typeof t!="string"?t:{encoding:t}),r=[];let a=!1;n.on("change",(o,s)=>{var l;(l=r.shift())===null||l===void 0||l({value:{eventType:o,filename:s},done:!1})});function i(){a=!0,n.close();for(const o of r)o({value:null,done:a});return r.length=0,Promise.resolve({value:null,done:!0})}return{async next(){if(a)return Promise.resolve({value:null,done:a});const{promise:o,resolve:s}=Promise.withResolvers();return r.push(s),o},return:i,throw:i,async[Symbol.asyncDispose](){await i()},[Symbol.asyncIterator](){return this}}}async function bP(e,t=sk){if(!(await Vh.call(this,e)).hasAccess(t,this))throw new Ue(st.EACCES)}async function Rk(e,t){e=fn(e);const n=await Kw.call(this,e).catch(r=>{if(!(r.code=="ENOENT"&&(t!=null&&t.force)))throw r});if(n)switch(n.mode&Er){case fa:if(t!=null&&t.recursive)for(const r of await Ld.call(this,e))await Rk.call(this,lr(e,r),t);await Ak.call(this,e);break;case Vo:case Yl:case Id:case Od:await Zw.call(this,e);break;case Dd:case Rd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}}async function vP(e,t){const n=typeof t=="object"?t==null?void 0:t.encoding:t||"utf8",a="/tmp/"+`${e}${Date.now()}-${Math.random().toString(36).slice(2)}`;return await Jw.call(this,a),n=="buffer"?Dr.from(a):a}async function Ik(e,t,n){if(e=fn(e),t=fn(t),n&&n&lk&&await ug.call(this,t))throw new Ue(st.EEXIST,"Destination file already exists",t,"copyFile");await Xw.call(this,t,await Yw.call(this,e)),Ga(this,"rename",t.toString())}function wP(e,t){return e=fn(e),Promise.resolve(new _k(e,this))}async function Ok(e,t,n){e=fn(e),t=fn(t);const r=await Kw.call(this,e);if(n!=null&&n.errorOnExist&&await ug.call(this,t))throw new Ue(st.EEXIST,"Destination file or directory already exists",t,"cp");switch(r.mode&Er){case fa:{if(!(n!=null&&n.recursive))throw new Ue(st.EISDIR,e+" is a directory (not copied)",e,"cp");const[a]=await Promise.all([Ld.call(this,e,{withFileTypes:!0}),Jw.call(this,t,{recursive:!0})]),i=async o=>{n.filter&&!n.filter(lr(e,o.name),lr(t,o.name))||await Ok.call(this,lr(e,o.name),lr(t,o.name),n)};await Promise.all(a.map(i));break}case Vo:case Yl:await Ik.call(this,e,t);break;case Id:case Od:case Dd:case Rd:default:throw new Ue(st.EPERM,"File type not supported",e,"rm")}n!=null&&n.preserveTimestamps&&await Nk.call(this,t,r.atime,r.mtime)}async function _P(e,t){e=fn(e);const{fs:n}=Pn(e,this);return Promise.resolve(V8(n,t==null?void 0:t.bigint))}function xP(e,t){e=Array.isArray(e)?e:[e];const{cwd:n="/",withFileTypes:r=!1,exclude:a=()=>!1}=t||{},i=e.map(s=>(s=s.replace(/([.?+^$(){}|[\]/])/g,"$1").replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\?/g,"."),new RegExp(`^${s}$`)));async function*o(s){const l=await Ld(s,{withFileTypes:r,encoding:"utf8"});for(const u of l){const d=r?u.path:s+"/"+u;a(r?u:d)||((await Vh(d)).isDirectory()&&i.some(h=>h.source.includes(".*"))&&(yield*o(d)),i.some(h=>h.test(d.replace(/^\/+/g,"")))&&(yield r?u:d.replace(/^\/+/g,"")))}}return o(n)}const pee=Object.freeze(Object.defineProperty({__proto__:null,FileHandle:ii,access:bP,appendFile:uP,chmod:mP,chown:hP,constants:F8,copyFile:Ik,cp:Ok,exists:ug,glob:xP,lchmod:gP,lchown:pP,link:dP,lstat:Kw,lutimes:yP,mkdir:Jw,mkdtemp:vP,open:Ao,opendir:wP,readFile:Yw,readdir:Ld,readlink:Iv,realpath:Su,rename:lP,rm:Rk,rmdir:Ak,stat:Vh,statfs:_P,symlink:fP,truncate:cP,unlink:Zw,utimes:Nk,watch:hee,writeFile:Xw},Symbol.toStringTag,{value:"Module"})),Rn=()=>{};async function mee(e){const t=[];for await(const n of e)t.push(n);return t}function gee(e,t,n=Rn){lP.call(this,e,t).then(()=>n()).catch(n)}function yee(e,t=Rn){ug.call(this,e).then(t).catch(()=>t(!1))}function bee(e,t,n=Rn){n=typeof t=="function"?t:n,Vh.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function vee(e,t,n=Rn){n=typeof t=="function"?t:n,Kw.call(this,e,typeof t!="function"?t:{}).then(r=>n(void 0,r)).catch(n)}function wee(e,t=0,n=Rn){n=typeof t=="function"?t:n;const r=typeof t=="number"?t:0;cP.call(this,e,r).then(()=>n()).catch(n)}function _ee(e,t=Rn){Zw.call(this,e).then(()=>t()).catch(t)}function xee(e,t,n,r=Rn){const a=vu(n,420);r=typeof n=="function"?n:r,Ao.call(this,e,t,a).then(i=>r(void 0,i.fd)).catch(r)}function See(e,t,n=Rn){n=typeof t=="function"?t:n,Yw.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Eee(e,t,n,r=Rn){r=typeof n=="function"?n:r,Xw.call(this,e,t,typeof n!="function"?n:null).then(()=>r(void 0)).catch(r)}function Cee(e,t,n,r=Rn){const a=typeof n!="function"?n:void 0;r=typeof n=="function"?n:r,uP.call(this,e,t,a).then(()=>r()).catch(r)}function kee(e,t,n=Rn){n=typeof t=="function"?t:n,new ii(this,e).stat().then(r=>n(void 0,typeof t=="object"&&(t!=null&&t.bigint)?new jd(r):r)).catch(n)}function Tee(e,t=Rn){new ii(this,e).close().then(()=>t()).catch(t)}function Aee(e,t,n=Rn){const r=typeof t=="number"?t:0;n=typeof t=="function"?t:n;const a=new ii(this,e);if(r<0)throw new Ue(st.EINVAL);a.truncate(r).then(()=>n()).catch(n)}function Nee(e,t=Rn){new ii(this,e).sync().then(()=>t()).catch(t)}function Ree(e,t=Rn){new ii(this,e).datasync().then(()=>t()).catch(t)}function Iee(e,t,n,r,a,i=Rn){let o,s,l,u,d;const h=new ii(this,e);if(typeof t=="string"){switch(d="utf8",typeof n){case"function":i=n;break;case"number":u=n,d=typeof r=="string"?r:"utf8",i=typeof a=="function"?a:i;break;default:i=typeof r=="function"?r:typeof a=="function"?a:i,i(new Ue(st.EINVAL,"Invalid arguments"));return}o=Dr.from(t),s=0,l=o.length;const p=i;h.write(o,s,l,u).then(({bytesWritten:g})=>p(void 0,g,o.toString(d))).catch(p)}else{o=Dr.from(t.buffer),s=n,l=r,u=typeof a=="number"?a:null;const p=typeof a=="function"?a:i;h.write(o,s,l,u).then(({bytesWritten:g})=>p(void 0,g,o)).catch(p)}}function Oee(e,t,n,r,a,i=Rn){new ii(this,e).read(t,n,r,a).then(({bytesRead:o,buffer:s})=>i(void 0,o,s)).catch(i)}function Dee(e,t,n,r=Rn){new ii(this,e).chown(t,n).then(()=>r()).catch(r)}function jee(e,t,n){new ii(this,e).chmod(t).then(()=>n()).catch(n)}function Mee(e,t,n,r=Rn){new ii(this,e).utimes(t,n).then(()=>r()).catch(r)}function Pee(e,t=Rn){Ak.call(this,e).then(()=>t()).catch(t)}function Fee(e,t,n=Rn){Jw.call(this,e,t).then(()=>n()).catch(n)}function Lee(e,t,n=Rn){n=typeof t=="function"?t:n;const r=typeof t!="function"?t:{};Ld.call(this,e,r).then(a=>n(void 0,a)).catch(n)}function $ee(e,t,n=Rn){dP.call(this,e,t).then(()=>n()).catch(n)}function Bee(e,t,n,r=Rn){const a=typeof n=="string"?n:"file";r=typeof n=="function"?n:r,fP.call(this,e,t,a).then(()=>r()).catch(r)}function zee(e,t,n=Rn){n=typeof t=="function"?t:n,Iv.call(this,e).then(r=>n(void 0,r)).catch(n)}function Uee(e,t,n,r=Rn){hP.call(this,e,t,n).then(()=>r()).catch(r)}function Hee(e,t,n,r=Rn){pP.call(this,e,t,n).then(()=>r()).catch(r)}function qee(e,t,n=Rn){mP.call(this,e,t).then(()=>n()).catch(n)}function Vee(e,t,n=Rn){gP.call(this,e,t).then(()=>n()).catch(n)}function Gee(e,t,n,r=Rn){Nk.call(this,e,t,n).then(()=>r()).catch(r)}function Wee(e,t,n,r=Rn){yP.call(this,e,t,n).then(()=>r()).catch(r)}function Kee(e,t,n=Rn){n=typeof t=="function"?t:n,Su.call(this,e,typeof t=="function"?null:t).then(r=>n(void 0,r)).catch(n)}function Zee(e,t,n=Rn){const r=typeof t=="number"?t:_a;n=typeof t=="function"?t:n,bP.call(this,e,r).then(()=>n()).catch(n)}const Xf=new Map;function Yee(e,t,n){const r=fn(e),a=typeof t!="function"?t:{};if(typeof t=="function"&&(n=t),!n)throw new Ue(st.EINVAL,"No listener specified",e.toString(),"watchFile");if(Xf.has(r)){const o=Xf.get(r);o&&o.listeners.add(n);return}const i=new PQ(this,r,a);i.on("change",(o,s)=>{const l=Xf.get(r);if(l)for(const u of l.listeners)u(o,s)}),Xf.set(r,{watcher:i,listeners:new Set})}function Xee(e,t=Rn){const n=fn(e),r=Xf.get(n);r&&(t&&t!==Rn?r.listeners.delete(t):r.listeners.clear(),r.listeners.size===0&&(r.watcher.stop(),Xf.delete(n)))}function Jee(e,t,n){const r=new W8(this,fn(e),typeof t=="object"?t:{});return n=typeof t=="function"?t:n,r.on("change",n||Rn),r}function Qee(e,t){t=typeof t=="object"?t:{encoding:t};const n=Ao.call(this,e,"r",t==null?void 0:t.mode);return new kk({...t,autoClose:!0},n)}function ete(e,t){t=typeof t=="object"?t:{encoding:t};const n=Ao.call(this,e,"w",t==null?void 0:t.mode);return new Tk(t,n)}function tte(e,t,n=Rn){n=typeof t=="function"?t:n,Rk.call(this,e,typeof t=="function"?void 0:t).then(()=>n(void 0)).catch(n)}function nte(e,t,n=Rn){n=typeof t=="function"?t:n,vP.call(this,e,typeof t!="function"?t:null).then(r=>n(void 0,r)).catch(n)}function rte(e,t,n,r=Rn){r=typeof n=="function"?n:r,Ik.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function ate(e,t,n,r=Rn){r=typeof n=="function"?n:r,new ii(this,e).readv(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesRead:i})=>r(void 0,i,a)).catch(r)}function ite(e,t,n,r=Rn){r=typeof n=="function"?n:r,new ii(this,e).writev(t,typeof n=="function"?void 0:n).then(({buffers:a,bytesWritten:i})=>r(void 0,i,a)).catch(r)}function ote(e,t,n=Rn){n=typeof t=="function"?t:n,wP.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}function ste(e,t,n,r=Rn){r=typeof n=="function"?n:r,Ok.call(this,e,t,typeof n=="function"?void 0:n).then(()=>r(void 0)).catch(r)}function lte(e,t,n=Rn){n=typeof t=="function"?t:n,_P.call(this,e,typeof t=="function"?void 0:t).then(r=>n(void 0,r)).catch(n)}async function cte(e,t){const n=await Ao.call(this,e.toString(),"r"),r=await n.readFile();return await n.close(),new Blob([r],t)}function ute(e,t,n=Rn){n=typeof t=="function"?t:n;const r=xP.call(this,e,typeof t=="function"?void 0:t);mee(r).then(a=>{var i;return n(null,(i=a)!==null&&i!==void 0?i:[])}).catch(a=>n(a))}var ed=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:d.get,set:d.set}:d[l],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(d.get=h),(h=o(_.set))&&(d.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},Ki=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},dte=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})},Dv;(function(e){e[e.RealTime=1]="RealTime",e[e.PreAlloc=2]="PreAlloc",e[e.Immutable=8]="Immutable",e[e.Append=16]="Append",e[e.Sync=32]="Sync",e[e.NoAtime=64]="NoAtime",e[e.NoDump=128]="NoDump",e[e.RtInherit=256]="RtInherit",e[e.ProjInherit=512]="ProjInherit",e[e.NoSymlinks=1024]="NoSymlinks",e[e.ExtSize=2048]="ExtSize",e[e.ExtSzInherit=4096]="ExtSzInherit",e[e.NoDefrag=8192]="NoDefrag",e[e.FileStream=16384]="FileStream",e[e.Dax=32768]="Dax",e[e.CowExtSize=65536]="CowExtSize",e[e.HasAttr=2147483648]="HasAttr"})(Dv||(Dv={}));let SP=(()=>{var e,t,n,r,a;let i=[Nd()],o,s=[],l,u,d=[],h=[],p,g=[],v=[],b,_=[],x=[],S,E=[],C=[],k,R=[],D=[],O,L=[],B=[];return l=class{constructor(Y=mr(new Ue(st.EINVAL,"fsxattr must be initialized with an inode"))){this.xflags=Ki(this,d,0),this.extsize=(Ki(this,h),Ki(this,g,0)),this.nextents=(Ki(this,v),Ki(this,_,0)),this.projid=(Ki(this,x),Ki(this,E,0)),this.cowextsize=(Ki(this,C),Ki(this,R,0)),this.pad=(Ki(this,D),Ki(this,L,[])),Ki(this,B),this.extsize=Y.size,this.nextents=1,this.projid=Y.uid,this.cowextsize=Y.size;for(const F of Object.keys(Ii))Y.flags&Ii[F]&&F in Dv&&(this.xflags|=Dv[F])}},dte(l,"fsxattr"),(()=>{const Y=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;u=[(e=wn).uint32.bind(e)],p=[(t=wn).uint32.bind(t)],b=[(n=wn).uint32.bind(n)],S=[(r=wn).uint32.bind(r)],k=[(a=wn).uint32.bind(a)],O=[wn.char(8)],ed(null,null,u,{kind:"field",name:"xflags",static:!1,private:!1,access:{has:F=>"xflags"in F,get:F=>F.xflags,set:(F,Z)=>{F.xflags=Z}},metadata:Y},d,h),ed(null,null,p,{kind:"field",name:"extsize",static:!1,private:!1,access:{has:F=>"extsize"in F,get:F=>F.extsize,set:(F,Z)=>{F.extsize=Z}},metadata:Y},g,v),ed(null,null,b,{kind:"field",name:"nextents",static:!1,private:!1,access:{has:F=>"nextents"in F,get:F=>F.nextents,set:(F,Z)=>{F.nextents=Z}},metadata:Y},_,x),ed(null,null,S,{kind:"field",name:"projid",static:!1,private:!1,access:{has:F=>"projid"in F,get:F=>F.projid,set:(F,Z)=>{F.projid=Z}},metadata:Y},E,C),ed(null,null,k,{kind:"field",name:"cowextsize",static:!1,private:!1,access:{has:F=>"cowextsize"in F,get:F=>F.cowextsize,set:(F,Z)=>{F.cowextsize=Z}},metadata:Y},R,D),ed(null,null,O,{kind:"field",name:"pad",static:!1,private:!1,access:{has:F=>"pad"in F,get:F=>F.pad,set:(F,Z)=>{F.pad=Z}},metadata:Y},L,B),ed(null,o={value:l},i,{kind:"class",name:l.name,metadata:Y},null,s),l=o.value,Y&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:Y}),Ki(l,s)})(),l})();var $r;(function(e){e[e.GetFlags=2148034049]="GetFlags",e[e.SetFlags=1074292226]="SetFlags",e[e.GetVersion=2148038145]="GetVersion",e[e.SetVersion=1074296322]="SetVersion",e[e.Fiemap=3223348747]="Fiemap",e[e.GetXattr=2149341215]="GetXattr",e[e.SetXattr=1075599392]="SetXattr",e[e.GetLabel=2164298801]="GetLabel",e[e.SetLabel=1090556978]="SetLabel",e[e.GetUUID=2148603136]="GetUUID",e[e.GetSysfsPath=2155943169]="GetSysfsPath"})($r||($r={}));var zo;(function(e){e[e.GetFlags=2147771905]="GetFlags",e[e.SetFlags=1074030082]="SetFlags",e[e.GetVersion=2147776001]="GetVersion",e[e.SetVersion=1074034178]="SetVersion"})(zo||(zo={}));async function fte(e,t,...n){e=fn(e);const{fs:r,path:a}=Pn(e,this);try{const i=new da(await r.stat(a));switch(t){case $r.GetFlags:case zo.GetFlags:return i.flags;case $r.SetFlags:case zo.SetFlags:i.flags=n[0],await r.touch(a,i);return;case $r.GetVersion:case zo.GetVersion:return i.version;case $r.SetVersion:case zo.SetVersion:i.version=n[0],await r.touch(a,i);return;case $r.Fiemap:break;case $r.GetXattr:return new SP(i);case $r.SetXattr:break;case $r.GetLabel:return r.label;case $r.SetLabel:r.label=n[0];return;case $r.GetUUID:return r.uuid;case $r.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw fr(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}function hte(e,t,...n){e=fn(e);const{fs:r,path:a}=Pn(e,this);try{const i=new da(r.statSync(a));switch(t){case $r.GetFlags:case zo.GetFlags:return i.flags;case $r.SetFlags:case zo.SetFlags:i.flags=n[0],r.touchSync(a,i);return;case $r.GetVersion:case zo.GetVersion:return i.version;case $r.SetVersion:case zo.SetVersion:i.version=n[0],r.touchSync(a,i);return;case $r.Fiemap:break;case $r.GetXattr:return new SP(i);case $r.SetXattr:break;case $r.GetLabel:return r.label;case $r.SetLabel:r.label=n[0];return;case $r.GetUUID:return r.uuid;case $r.GetSysfsPath:return`/sys/fs/${r.name}/${r.uuid}`}}catch(i){throw fr(i,{[a]:e})}throw new Ue(st.ENOTSUP,"Unsupported command: "+t,e,"ioctl")}const pte=[];function Wh(e,t,n,r){if(!t.startsWith("user.")&&!pte.includes(t))throw new Ue(st.EPERM,"Only attributes in the user namespace are supported",n,r)}async function mte(e,t,n={}){var r;e=fn(e);const{fs:a,path:i}=Pn(e,this);Wh(this,t,e,"xattr.get");try{const o=await a.stat(i);if(xa&&!dr(this,o,_a))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new lu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const l=Dr.from(s.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(o){throw fr(o,{[i]:e})}}function gte(e,t,n={}){var r;e=fn(e),Wh(this,t,e,"xattr.get");const{fs:a,path:i}=Pn(e,this);try{const o=a.statSync(i);if(xa&&!dr(this,o,_a))throw Ue.With("EACCES",i,"xattr.get");(r=o.attributes)!==null&&r!==void 0||(o.attributes=new lu);const s=o.attributes.get(t);if(!s)throw Ue.With("ENODATA",i,"xattr.get");const l=Dr.from(s.value);return n.encoding=="buffer"||!n.encoding?l:l.toString(n.encoding)}catch(o){throw fr(o,{[i]:e})}}async function yte(e,t,n,r={}){var a;e=fn(e);const{fs:i,path:o}=Pn(e,this);Wh(this,t,e,"xattr.set");try{const s=await i.stat(o);if(xa&&!dr(this,s,Jr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new lu);const l=s.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Dr.from(n)),await i.touch(o,Ad(s,"attributes"))}catch(s){throw fr(s,{[o]:e})}}function bte(e,t,n,r={}){var a;e=fn(e);const{fs:i,path:o}=Pn(e,this);Wh(this,t,e,"xattr.set");try{const s=i.statSync(o);if(xa&&!dr(this,s,Jr))throw Ue.With("EACCES",o,"xattr.set");(a=s.attributes)!==null&&a!==void 0||(s.attributes=new lu);const l=s.attributes.get(t);if(r.create&&l)throw Ue.With("EEXIST",o,"xattr.set");if(r.replace&&!l)throw Ue.With("ENODATA",o,"xattr.set");s.attributes.set(t,Dr.from(n)),i.touchSync(o,Ad(s,"attributes"))}catch(s){throw fr(s,{[o]:e})}}async function vte(e,t){var n;e=fn(e);const{fs:r,path:a}=Pn(e,this);Wh(this,t,e,"xattr.remove");try{const i=await r.stat(a);if(xa&&!dr(this,i,Jr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new lu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),await r.touch(a,Ad(i,"attributes"))}catch(i){throw fr(i,{[a]:e})}}function wte(e,t){var n;e=fn(e);const{fs:r,path:a}=Pn(e,this);Wh(this,t,e,"xattr.remove");try{const i=r.statSync(a);if(xa&&!dr(this,i,Jr))throw Ue.With("EACCES",a,"xattr.remove");if((n=i.attributes)!==null&&n!==void 0||(i.attributes=new lu),!i.attributes.get(t))throw Ue.With("ENODATA",a,"xattr.remove");i.attributes.remove(t),r.touchSync(a,Ad(i,"attributes"))}catch(i){throw fr(i,{[a]:e})}}async function _te(e){e=fn(e);const{fs:t,path:n}=Pn(e,this);try{const r=await t.stat(n);return r.attributes?r.attributes.keys():[]}catch(r){throw fr(r,{[n]:e})}}function xte(e){e=fn(e);const{fs:t,path:n}=Pn(e,this);try{const r=t.statSync(n);return r.attributes?r.attributes.keys():[]}catch(r){throw fr(r,{[n]:e})}}const Ste=Object.freeze(Object.defineProperty({__proto__:null,get:mte,getSync:gte,list:_te,listSync:xte,remove:vte,removeSync:wte,set:yte,setSync:bte},Symbol.toStringTag,{value:"Module"})),$a=Object.freeze(Object.defineProperty({__proto__:null,BigIntStatsFs:bQ,Dir:_k,Dirent:g0,get IOC(){return $r},get IOC32(){return zo},ReadStream:kk,Stats:Xl,StatsFs:yQ,WriteStream:Tk,access:Zee,accessSync:tee,appendFile:Cee,appendFileSync:zQ,chmod:qee,chmodSync:JQ,chown:Uee,chownSync:YQ,chroot:jQ,close:Tee,closeSync:Pd,constants:F8,copyFile:rte,copyFileSync:J8,cp:ste,cpSync:Q8,createReadStream:Qee,createWriteStream:ete,exists:yee,existsSync:fk,fchmod:jee,fchmodSync:bk,fchown:Dee,fchownSync:yk,fdatasync:Ree,fdatasyncSync:VQ,fstat:kee,fstatSync:UQ,fsync:Nee,fsyncSync:qQ,ftruncate:Aee,ftruncateSync:HQ,futimes:Mee,futimesSync:vk,glob:ute,globSync:see,ioctl:fte,ioctlSync:hte,lchmod:Vee,lchmodSync:QQ,lchown:Hee,lchownSync:XQ,link:$ee,linkSync:KQ,lopenSync:Hw,lstat:vee,lstatSync:hk,lutimes:Wee,lutimesSync:eee,mkdir:Fee,mkdirSync:wk,mkdtemp:nte,mkdtempSync:nee,mount:dk,open:xee,openAsBlob:cte,openSync:Uw,opendir:ote,opendirSync:iee,promises:pee,read:Oee,readFile:See,readFileSync:mk,readSync:WQ,readdir:Lee,readdirSync:Hh,readlink:zee,readlinkSync:D2,readv:ate,readvSync:ree,realpath:Kee,realpathSync:wu,rename:gee,renameSync:$Q,rm:tte,rmSync:X8,rmdir:Pee,rmdirSync:Z8,stat:bee,statSync:cu,statfs:lte,statfsSync:oee,symlink:Bee,symlinkSync:ZQ,truncate:wee,truncateSync:BQ,umount:q8,unlink:_ee,unlinkSync:pk,unwatchFile:Xee,utimes:Gee,utimesSync:Y8,watch:Jee,watchFile:Yee,write:Iee,writeFile:Eee,writeFileSync:gk,writeSync:GQ,writev:ite,writevSync:aee,xattr:Ste},Symbol.toStringTag,{value:"Module"}));function l4(e){return k8(e)||ok(e)||e instanceof uk}async function EP(e,t=0){if(typeof e!="object"||e==null)throw Ri(new Ue(st.EINVAL,"Invalid options on mount configuration"));if(!l4(e))throw Ri(new Ue(st.EINVAL,"Invalid mount configuration"));if(e instanceof uk)return await e.ready(),e;ok(e)&&(e={backend:e});for(const[a,i]of Object.entries(e))if(a!="backend"&&l4(i)){if(C8("Resolving nested mount configuration: "+a),t>10)throw Ri(new Ue(st.EINVAL,"Invalid configuration, too deep and possibly infinite"));e[a]=await EP(i,++t)}const{backend:n}=e;if(typeof n.isAvailable=="function"&&!await n.isAvailable(e))throw Ri(new Ue(st.EPERM,"Backend not available: "+n.name));eQ(n,e);const r=await n.create(e);return e.disableAsyncCache&&r.attributes.set("no_async"),await r.ready(),r}async function Ete(e){if(!k8(e))throw new TypeError("Invalid single mount point configuration");const t=await EP(e);q8("/"),dk("/",t)}const Cte=["delete"];Math.max(...Cte.map(e=>e.length));QJ("RPCPort",e=>typeof(e==null?void 0:e.postMessage)=="function");const CP=new Uint32Array(256);for(let e=0;e<256;e++){let t=e;for(let n=0;n<8;n++)t=t&1?2197175160^t>>>1:t>>>1;CP[e]=t}function kte(e){let t=4294967295;for(let n=0;n<e.length;n++)t=t>>>8^CP[(t^e[n])&255];return(t^4294967295)>>>0}var Lr=function(e,t,n,r,a,i){function o(x){if(x!==void 0&&typeof x!="function")throw new TypeError("Function expected");return x}for(var s=r.kind,l=s==="getter"?"get":s==="setter"?"set":"value",u=!t&&e?r.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,r.name):{}),h,p=!1,g=n.length-1;g>=0;g--){var v={};for(var b in r)v[b]=b==="access"?{}:r[b];for(var b in r.access)v.access[b]=r.access[b];v.addInitializer=function(x){if(p)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(x||null))};var _=(0,n[g])(s==="accessor"?{get:d.get,set:d.set}:d[l],v);if(s==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(h=o(_.get))&&(d.get=h),(h=o(_.set))&&(d.set=h),(h=o(_.init))&&a.unshift(h)}else(h=o(_))&&(s==="field"?a.unshift(h):d[l]=h)}u&&Object.defineProperty(u,r.name,d),p=!0},Cn=function(e,t,n){for(var r=arguments.length>2,a=0;a<t.length;a++)n=r?t[a].call(e,n):t[a].call(e);return r?n:void 0},Dk=function(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})};let c4=(()=>{var e,t,n,r;let a=[Nd()],i,o=[],s,l,u=[],d=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[];return s=class{constructor(){this.id=Cn(this,u,0),this.offset_=(Cn(this,d),Cn(this,p,0)),this.offset=(Cn(this,g),Cn(this,b,0)),this.size=(Cn(this,_),Cn(this,S,0)),Cn(this,E)}},Dk(s,"MetadataEntry"),(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=wn).uint32.bind(e)],h=[(t=wn).uint32.bind(t)],v=[(n=wn).uint32.bind(n)],x=[(r=wn).uint32.bind(r)],Lr(null,null,l,{kind:"field",name:"id",static:!1,private:!1,access:{has:k=>"id"in k,get:k=>k.id,set:(k,R)=>{k.id=R}},metadata:C},u,d),Lr(null,null,h,{kind:"field",name:"offset_",static:!1,private:!1,access:{has:k=>"offset_"in k,get:k=>k.offset_,set:(k,R)=>{k.offset_=R}},metadata:C},p,g),Lr(null,null,v,{kind:"field",name:"offset",static:!1,private:!1,access:{has:k=>"offset"in k,get:k=>k.offset,set:(k,R)=>{k.offset=R}},metadata:C},b,_),Lr(null,null,x,{kind:"field",name:"size",static:!1,private:!1,access:{has:k=>"size"in k,get:k=>k.size,set:(k,R)=>{k.size=R}},metadata:C},S,E),Lr(null,i={value:s},a,{kind:"class",name:s.name,metadata:C},null,o),s=i.value,C&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C}),Cn(s,o)})(),s})();const u4=255;let td=(()=>{var e,t,n,r;let a=[Nd()],i,o=[],s,l,u=[],d=[],h,p=[],g=[],v,b=[],_=[],x,S=[],E=[],C,k=[],R=[];var D=s=class{constructor(O=mr(new Ue(st.EINVAL,"Metadata block must be initialized with a superblock")),L=0){if(this.superblock=O,this.offset=L,this.checksum=Cn(this,u,0),this.timestamp=(Cn(this,d),Cn(this,p,Date.now())),this.previous_offset_=(Cn(this,g),Cn(this,b,0)),this.previous_offset=(Cn(this,_),Cn(this,S,0)),this._previous=Cn(this,E),this.entries=Cn(this,k,Array.from({length:u4},()=>new c4)),Cn(this,R),this.superblock=O,this.offset=L,!!L&&(Pw(this,O.store._buffer.subarray(L,L+Br(D))),!kP(this)))throw Fw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for metadata block at 0x"+L.toString(16)))}get previous(){var O;if(this.previous_offset)return(O=this._previous)!==null&&O!==void 0||(this._previous=new D(this.superblock,this.previous_offset)),this._previous}};return Dk(s,"MetadataBlock"),(()=>{const O=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;l=[(e=wn).uint32.bind(e)],h=[(t=wn).uint32.bind(t)],v=[(n=wn).uint32.bind(n)],x=[(r=wn).uint32.bind(r)],C=[f0(c4,u4)],Lr(null,null,l,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:L=>"checksum"in L,get:L=>L.checksum,set:(L,B)=>{L.checksum=B}},metadata:O},u,d),Lr(null,null,h,{kind:"field",name:"timestamp",static:!1,private:!1,access:{has:L=>"timestamp"in L,get:L=>L.timestamp,set:(L,B)=>{L.timestamp=B}},metadata:O},p,g),Lr(null,null,v,{kind:"field",name:"previous_offset_",static:!1,private:!1,access:{has:L=>"previous_offset_"in L,get:L=>L.previous_offset_,set:(L,B)=>{L.previous_offset_=B}},metadata:O},b,_),Lr(null,null,x,{kind:"field",name:"previous_offset",static:!1,private:!1,access:{has:L=>"previous_offset"in L,get:L=>L.previous_offset,set:(L,B)=>{L.previous_offset=B}},metadata:O},S,E),Lr(null,null,C,{kind:"field",name:"entries",static:!1,private:!1,access:{has:L=>"entries"in L,get:L=>L.entries,set:(L,B)=>{L.entries=B}},metadata:O},k,R),Lr(null,i={value:s},a,{kind:"class",name:s.name,metadata:O},null,o),D=s=i.value,O&&Object.defineProperty(s,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:O}),Cn(s,o)})(),D=s})();const d4=2049864546;(()=>{var e,t,n,r,a,i,o,s,l,u,d;let h=[Nd()],p,g=[],v,b,_=[],x=[],S,E=[],C=[],k,R=[],D=[],O,L=[],B=[],Y,F=[],Z=[],q,ne=[],ae=[],re,ee=[],ie=[],U,Q=[],X=[],de,be=[],_e=[],Pe,Ne=[],Re=[],Ce,Fe=[],Qe=[],Le,Ie=[],V=[],me,Te=[],le=[];var oe=v=class{constructor(J=mr(new Ue(st.EINVAL,"Super block must be initialized with a store"))){if(this.store=J,this.checksum=Cn(this,_,0),this.magic=(Cn(this,x),Cn(this,E,d4)),this.version=(Cn(this,C),Cn(this,R,1)),this.inode_format=(Cn(this,D),Cn(this,L,wQ)),this.flags=(Cn(this,B),Cn(this,F,0)),this.used_bytes=(Cn(this,Z),Cn(this,ne,BigInt(0))),this.total_bytes=(Cn(this,ae),Cn(this,ee,BigInt(0))),this.uuid=(Cn(this,ie),Cn(this,Q,BigInt(0))),this.metadata_block_size=(Cn(this,X),Cn(this,be,Br(td))),this.metadata_offset_=(Cn(this,_e),Cn(this,Ne,0)),this.metadata_offset=(Cn(this,Re),Cn(this,Fe,0)),this.metadata=Cn(this,Qe),this.label=Cn(this,Ie,""),this._padding=(Cn(this,V),Cn(this,Te,new Array(132).fill(0))),Cn(this,le),this.store=J,J._view.getUint32(FJ(oe,"magic"),!0)!=d4){ti("SingleBuffer: Invalid magic value, assuming this is a fresh super block"),this.metadata=new td(this),this.metadata.offset=Br(oe),this.metadata_offset=this.metadata.offset,this.used_bytes=BigInt(Br(oe)+Br(td)),this.total_bytes=BigInt(J._buffer.byteLength),J._write(this),J._write(this.metadata);return}if(Pw(this,J._buffer.subarray(0,Br(oe))),!kP(this))throw Fw(new Ue(st.EIO,"SingleBuffer: Checksum mismatch for super block!"));this.metadata=new td(this,this.metadata_offset)}rotateMetadata(){const J=new td(this);return J.offset=Number(this.used_bytes),J.previous_offset=this.metadata_offset,this.metadata=J,this.metadata_offset=J.offset,this.store._write(J),this.used_bytes+=BigInt(Br(td)),this.store._write(this),J}isUnused(J,xe){if(!xe)return!0;if(J+xe>this.total_bytes||J<Br(oe))return!1;for(let Me=this.metadata;Me;Me=Me.previous){if(J<Me.offset+Br(td)&&J+xe>Me.offset)return!1;for(const Ee of Me.entries)if(Ee.offset&&(J>=Ee.offset&&J<Ee.offset+Ee.size||J+xe>Ee.offset&&J+xe<=Ee.offset+Ee.size||J<=Ee.offset&&J+xe>=Ee.offset+Ee.size))return!1}return!0}};return Dk(v,"SuperBlock"),(()=>{const J=typeof Symbol=="function"&&Symbol.metadata?Object.create(null):void 0;b=[(e=wn).uint32.bind(e)],S=[(t=wn).uint32.bind(t)],k=[(n=wn).uint16.bind(n)],O=[(r=wn).uint16.bind(r)],Y=[(a=wn).uint32.bind(a)],q=[(i=wn).uint64.bind(i)],re=[(o=wn).uint64.bind(o)],U=[(s=wn).uint128.bind(s)],de=[(l=wn).uint32.bind(l)],Pe=[(u=wn).uint32.bind(u)],Ce=[(d=wn).uint32.bind(d)],Le=[wn.char(64)],me=[wn.char(132)],Lr(null,null,b,{kind:"field",name:"checksum",static:!1,private:!1,access:{has:xe=>"checksum"in xe,get:xe=>xe.checksum,set:(xe,Me)=>{xe.checksum=Me}},metadata:J},_,x),Lr(null,null,S,{kind:"field",name:"magic",static:!1,private:!1,access:{has:xe=>"magic"in xe,get:xe=>xe.magic,set:(xe,Me)=>{xe.magic=Me}},metadata:J},E,C),Lr(null,null,k,{kind:"field",name:"version",static:!1,private:!1,access:{has:xe=>"version"in xe,get:xe=>xe.version,set:(xe,Me)=>{xe.version=Me}},metadata:J},R,D),Lr(null,null,O,{kind:"field",name:"inode_format",static:!1,private:!1,access:{has:xe=>"inode_format"in xe,get:xe=>xe.inode_format,set:(xe,Me)=>{xe.inode_format=Me}},metadata:J},L,B),Lr(null,null,Y,{kind:"field",name:"flags",static:!1,private:!1,access:{has:xe=>"flags"in xe,get:xe=>xe.flags,set:(xe,Me)=>{xe.flags=Me}},metadata:J},F,Z),Lr(null,null,q,{kind:"field",name:"used_bytes",static:!1,private:!1,access:{has:xe=>"used_bytes"in xe,get:xe=>xe.used_bytes,set:(xe,Me)=>{xe.used_bytes=Me}},metadata:J},ne,ae),Lr(null,null,re,{kind:"field",name:"total_bytes",static:!1,private:!1,access:{has:xe=>"total_bytes"in xe,get:xe=>xe.total_bytes,set:(xe,Me)=>{xe.total_bytes=Me}},metadata:J},ee,ie),Lr(null,null,U,{kind:"field",name:"uuid",static:!1,private:!1,access:{has:xe=>"uuid"in xe,get:xe=>xe.uuid,set:(xe,Me)=>{xe.uuid=Me}},metadata:J},Q,X),Lr(null,null,de,{kind:"field",name:"metadata_block_size",static:!1,private:!1,access:{has:xe=>"metadata_block_size"in xe,get:xe=>xe.metadata_block_size,set:(xe,Me)=>{xe.metadata_block_size=Me}},metadata:J},be,_e),Lr(null,null,Pe,{kind:"field",name:"metadata_offset_",static:!1,private:!1,access:{has:xe=>"metadata_offset_"in xe,get:xe=>xe.metadata_offset_,set:(xe,Me)=>{xe.metadata_offset_=Me}},metadata:J},Ne,Re),Lr(null,null,Ce,{kind:"field",name:"metadata_offset",static:!1,private:!1,access:{has:xe=>"metadata_offset"in xe,get:xe=>xe.metadata_offset,set:(xe,Me)=>{xe.metadata_offset=Me}},metadata:J},Fe,Qe),Lr(null,null,Le,{kind:"field",name:"label",static:!1,private:!1,access:{has:xe=>"label"in xe,get:xe=>xe.label,set:(xe,Me)=>{xe.label=Me}},metadata:J},Ie,V),Lr(null,null,me,{kind:"field",name:"_padding",static:!1,private:!1,access:{has:xe=>"_padding"in xe,get:xe=>xe._padding,set:(xe,Me)=>{xe._padding=Me}},metadata:J},Te,le),Lr(null,p={value:v},h,{kind:"class",name:v.name,metadata:J},null,g),oe=v=p.value,J&&Object.defineProperty(v,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:J}),Cn(v,g)})(),oe=v})();function kP(e){const t=qa(e),n=kte(t.subarray(4));return e.checksum===n}globalThis.__zenfs__=$a;function Tte(e){switch(e.name){case"TypeMismatchError":return"EPERM";case"IndexSizeError":case"HierarchyRequestError":case"InvalidCharacterError":case"InvalidStateError":case"SyntaxError":case"NamespaceError":case"ConstraintError":case"VersionError":case"URLMismatchError":case"InvalidNodeTypeError":return"EINVAL";case"WrongDocumentError":return"EXDEV";case"NoModificationAllowedError":case"InvalidModificationError":case"InvalidAccessError":case"SecurityError":case"NotAllowedError":return"EACCES";case"NotFoundError":return"ENOENT";case"NotSupportedError":return"ENOTSUP";case"InUseAttributeError":return"EBUSY";case"NetworkError":return"ENETDOWN";case"AbortError":return"EINTR";case"QuotaExceededError":return"ENOSPC";case"TimeoutError":return"ETIMEDOUT";case"ReadOnlyError":return"EROFS";case"DataCloneError":case"EncodingError":case"NotReadableError":case"DataError":case"TransactionInactiveError":case"OperationError":case"UnknownError":default:return"EIO"}}function M2(e,t,n){if(e instanceof Ue)return e;const r=e instanceof DOMException?st[Tte(e)]:st.EIO,a=new Ue(r,e.message,t,n);return a.stack=e.stack,a.cause=e.cause,a}function Jf(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=r=>{r.preventDefault(),n(M2(e.error))}})}class Ate extends O2{constructor(t,n){super(n),this.tx=t,this.store=n,this._idb=t.objectStore(n.name)}async keys(){return(await Jf(this._idb.getAllKeys())).filter(t=>typeof t=="string").map(t=>Number(t))}async get(t){const n=await Jf(this._idb.get(t.toString()));return n&&this._cached(t,{size:n.byteLength}).add(n,0),n}async set(t,n){this._cached(t,{size:n.byteLength}).add(n,0),await Jf(this._idb.put(n,t.toString()))}remove(t){return this.store.cache.delete(t),Jf(this._idb.delete(t.toString()))}async commit(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.oncomplete=()=>n(),this.tx.onerror=()=>r(M2(this.tx.error)),this.tx.commit(),t}async abort(){const{promise:t,resolve:n,reject:r}=Promise.withResolvers();return this.tx.onabort=()=>n(),this.tx.onerror=()=>r(M2(this.tx.error)),this.tx.abort(),t}}async function Nte(e,t=globalThis.indexedDB){const n=t.open(e);return n.onupgradeneeded=()=>{const r=n.result;r.objectStoreNames.contains(e)&&(ti("Found unexpected object store: "+e),r.deleteObjectStore(e)),r.createObjectStore(e)},await Jf(n)}class Rte{constructor(t){this.db=t,this.cache=new Map}sync(){return Promise.resolve()}get name(){return this.db.name}transaction(){const t=this.db.transaction(this.name,"readwrite");return new Ate(t,this)}}const Ite={name:"IndexedDB",options:{storeName:{type:"string",required:!1},idbFactory:{type:"object",required:!1}},async isAvailable({idbFactory:e=globalThis.indexedDB}){try{if(!(e instanceof IDBFactory))return!1;const t=e.open("__zenfs_test");return await Jf(t),!0}catch{return!1}finally{e==null||e.deleteDatabase("__zenfs_test")}},async create(e){const t=await Nte(e.storeName||"zenfs",e.idbFactory),n=new Rte(t),r=new z8(n);if(e!=null&&e.disableAsyncCache)return ik("Async preloading disabled for IndexedDB"),r;const a=n.transaction();for(const i of await a.keys())await a.get(i);return r}},Ote=Ite;function xb(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var OS={exports:{}},f4;function Dte(){return f4||(f4=1,function(e,t){(function(n){e.exports=n()})(function(){return function n(r,a,i){function o(u,d){if(!a[u]){if(!r[u]){var h=typeof xb=="function"&&xb;if(!d&&h)return h(u,!0);if(s)return s(u,!0);var p=new Error("Cannot find module '"+u+"'");throw p.code="MODULE_NOT_FOUND",p}var g=a[u]={exports:{}};r[u][0].call(g.exports,function(v){var b=r[u][1][v];return o(b||v)},g,g.exports,n,r,a,i)}return a[u].exports}for(var s=typeof xb=="function"&&xb,l=0;l<i.length;l++)o(i[l]);return o}({1:[function(n,r,a){var i=n("./utils"),o=n("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var u,d,h,p,g,v,b,_=[],x=0,S=l.length,E=S,C=i.getTypeOf(l)!=="string";x<l.length;)E=S-x,h=C?(u=l[x++],d=x<S?l[x++]:0,x<S?l[x++]:0):(u=l.charCodeAt(x++),d=x<S?l.charCodeAt(x++):0,x<S?l.charCodeAt(x++):0),p=u>>2,g=(3&u)<<4|d>>4,v=1<E?(15&d)<<2|h>>6:64,b=2<E?63&h:64,_.push(s.charAt(p)+s.charAt(g)+s.charAt(v)+s.charAt(b));return _.join("")},a.decode=function(l){var u,d,h,p,g,v,b=0,_=0,x="data:";if(l.substr(0,x.length)===x)throw new Error("Invalid base64 input, it looks like a data url.");var S,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===s.charAt(64)&&E--,l.charAt(l.length-2)===s.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(S=o.uint8array?new Uint8Array(0|E):new Array(0|E);b<l.length;)u=s.indexOf(l.charAt(b++))<<2|(p=s.indexOf(l.charAt(b++)))>>4,d=(15&p)<<4|(g=s.indexOf(l.charAt(b++)))>>2,h=(3&g)<<6|(v=s.indexOf(l.charAt(b++))),S[_++]=u,g!==64&&(S[_++]=d),v!==64&&(S[_++]=h);return S}},{"./support":30,"./utils":32}],2:[function(n,r,a){var i=n("./external"),o=n("./stream/DataWorker"),s=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function u(d,h,p,g,v){this.compressedSize=d,this.uncompressedSize=h,this.crc32=p,this.compression=g,this.compressedContent=v}u.prototype={getContentWorker:function(){var d=new o(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return d.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),d},getCompressedWorker:function(){return new o(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(d,h,p){return d.pipe(new s).pipe(new l("uncompressedSize")).pipe(h.compressWorker(p)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},r.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,a){var i=n("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},a.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,a){var i=n("./utils"),o=function(){for(var s,l=[],u=0;u<256;u++){s=u;for(var d=0;d<8;d++)s=1&s?3988292384^s>>>1:s>>>1;l[u]=s}return l}();r.exports=function(s,l){return s!==void 0&&s.length?i.getTypeOf(s)!=="string"?function(u,d,h,p){var g=o,v=p+h;u^=-1;for(var b=p;b<v;b++)u=u>>>8^g[255&(u^d[b])];return-1^u}(0|l,s,s.length,0):function(u,d,h,p){var g=o,v=p+h;u^=-1;for(var b=p;b<v;b++)u=u>>>8^g[255&(u^d.charCodeAt(b))];return-1^u}(0|l,s,s.length,0):0}},{"./utils":32}],5:[function(n,r,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(n,r,a){var i=null;i=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:i}},{lie:37}],7:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),s=n("./utils"),l=n("./stream/GenericWorker"),u=i?"uint8array":"array";function d(h,p){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=p,this.meta={}}a.magic="\b\0",s.inherits(d,l),d.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(s.transformTo(u,h.data),!1)},d.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},d.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},d.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(p){h.push({data:p,meta:h.meta})}},a.compressWorker=function(h){return new d("Deflate",h)},a.uncompressWorker=function(){return new d("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,a){function i(g,v){var b,_="";for(b=0;b<v;b++)_+=String.fromCharCode(255&g),g>>>=8;return _}function o(g,v,b,_,x,S){var E,C,k=g.file,R=g.compression,D=S!==u.utf8encode,O=s.transformTo("string",S(k.name)),L=s.transformTo("string",u.utf8encode(k.name)),B=k.comment,Y=s.transformTo("string",S(B)),F=s.transformTo("string",u.utf8encode(B)),Z=L.length!==k.name.length,q=F.length!==B.length,ne="",ae="",re="",ee=k.dir,ie=k.date,U={crc32:0,compressedSize:0,uncompressedSize:0};v&&!b||(U.crc32=g.crc32,U.compressedSize=g.compressedSize,U.uncompressedSize=g.uncompressedSize);var Q=0;v&&(Q|=8),D||!Z&&!q||(Q|=2048);var X=0,de=0;ee&&(X|=16),x==="UNIX"?(de=798,X|=function(_e,Pe){var Ne=_e;return _e||(Ne=Pe?16893:33204),(65535&Ne)<<16}(k.unixPermissions,ee)):(de=20,X|=function(_e){return 63&(_e||0)}(k.dosPermissions)),E=ie.getUTCHours(),E<<=6,E|=ie.getUTCMinutes(),E<<=5,E|=ie.getUTCSeconds()/2,C=ie.getUTCFullYear()-1980,C<<=4,C|=ie.getUTCMonth()+1,C<<=5,C|=ie.getUTCDate(),Z&&(ae=i(1,1)+i(d(O),4)+L,ne+="up"+i(ae.length,2)+ae),q&&(re=i(1,1)+i(d(Y),4)+F,ne+="uc"+i(re.length,2)+re);var be="";return be+=`
\0`,be+=i(Q,2),be+=R.magic,be+=i(E,2),be+=i(C,2),be+=i(U.crc32,4),be+=i(U.compressedSize,4),be+=i(U.uncompressedSize,4),be+=i(O.length,2),be+=i(ne.length,2),{fileRecord:h.LOCAL_FILE_HEADER+be+O+ne,dirRecord:h.CENTRAL_FILE_HEADER+i(de,2)+be+i(Y.length,2)+"\0\0\0\0"+i(X,4)+i(_,4)+O+ne+Y}}var s=n("../utils"),l=n("../stream/GenericWorker"),u=n("../utf8"),d=n("../crc32"),h=n("../signature");function p(g,v,b,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=b,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(p,l),p.prototype.push=function(g){var v=g.meta.percent||0,b=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,l.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:b?(v+100*(b-_-1))/b:100}}))},p.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var v=this.streamFiles&&!g.file.dir;if(v){var b=o(g,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},p.prototype.closedSource=function(g){this.accumulate=!1;var v=this.streamFiles&&!g.file.dir,b=o(g,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),v)this.push({data:function(_){return h.DATA_DESCRIPTOR+i(_.crc32,4)+i(_.compressedSize,4)+i(_.uncompressedSize,4)}(g),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},p.prototype.flush=function(){for(var g=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var b=this.bytesWritten-g,_=function(x,S,E,C,k){var R=s.transformTo("string",k(C));return h.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(x,2)+i(x,2)+i(S,4)+i(E,4)+i(R.length,2)+R}(this.dirRecords.length,b,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},p.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},p.prototype.registerPrevious=function(g){this._sources.push(g);var v=this;return g.on("data",function(b){v.processChunk(b)}),g.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),g.on("error",function(b){v.error(b)}),this},p.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},p.prototype.error=function(g){var v=this._sources;if(!l.prototype.error.call(this,g))return!1;for(var b=0;b<v.length;b++)try{v[b].error(g)}catch{}return!0},p.prototype.lock=function(){l.prototype.lock.call(this);for(var g=this._sources,v=0;v<g.length;v++)g[v].lock()},r.exports=p},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,a){var i=n("../compressions"),o=n("./ZipFileWorker");a.generateWorker=function(s,l,u){var d=new o(l.streamFiles,u,l.platform,l.encodeFileName),h=0;try{s.forEach(function(p,g){h++;var v=function(S,E){var C=S||E,k=i[C];if(!k)throw new Error(C+" is not a valid compression method !");return k}(g.options.compression,l.compression),b=g.options.compressionOptions||l.compressionOptions||{},_=g.dir,x=g.date;g._compressWorker(v,b).withStreamInfo("file",{name:p,dir:_,date:x,comment:g.comment||"",unixPermissions:g.unixPermissions,dosPermissions:g.dosPermissions}).pipe(d)}),d.entriesCount=h}catch(p){d.error(p)}return d}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,a){function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new i;for(var s in this)typeof this[s]!="function"&&(o[s]=this[s]);return o}}(i.prototype=n("./object")).loadAsync=n("./load"),i.support=n("./support"),i.defaults=n("./defaults"),i.version="3.10.1",i.loadAsync=function(o,s){return new i().loadAsync(o,s)},i.external=n("./external"),r.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,a){var i=n("./utils"),o=n("./external"),s=n("./utf8"),l=n("./zipEntries"),u=n("./stream/Crc32Probe"),d=n("./nodejsUtils");function h(p){return new o.Promise(function(g,v){var b=p.decompressed.getContentWorker().pipe(new u);b.on("error",function(_){v(_)}).on("end",function(){b.streamInfo.crc32!==p.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):g()}).resume()})}r.exports=function(p,g){var v=this;return g=i.extend(g||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),d.isNode&&d.isStream(p)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",p,!0,g.optimizedBinaryString,g.base64).then(function(b){var _=new l(g);return _.load(b),_}).then(function(b){var _=[o.Promise.resolve(b)],x=b.files;if(g.checkCRC32)for(var S=0;S<x.length;S++)_.push(h(x[S]));return o.Promise.all(_)}).then(function(b){for(var _=b.shift(),x=_.files,S=0;S<x.length;S++){var E=x[S],C=E.fileNameStr,k=i.resolve(E.fileNameStr);v.file(k,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:g.createFolders}),E.dir||(v.file(k).unsafeOriginalName=C)}return _.zipComment.length&&(v.comment=_.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,a){var i=n("../utils"),o=n("../stream/GenericWorker");function s(l,u){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}i.inherits(s,o),s.prototype._bindStream=function(l){var u=this;(this._stream=l).pause(),l.on("data",function(d){u.push({data:d,meta:{percent:0}})}).on("error",function(d){u.isPaused?this.generatedError=d:u.error(d)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},s.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,a){var i=n("readable-stream").Readable;function o(s,l,u){i.call(this,l),this._helper=s;var d=this;s.on("data",function(h,p){d.push(h)||d._helper.pause(),u&&u(p)}).on("error",function(h){d.emit("error",h)}).on("end",function(){d.push(null)})}n("../utils").inherits(o,i),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,a){r.exports={isNode:typeof Yt<"u",newBufferFrom:function(i,o){if(Yt.from&&Yt.from!==Uint8Array.from)return Yt.from(i,o);if(typeof i=="number")throw new Error('The "data" argument must not be a number');return new Yt(i,o)},allocBuffer:function(i){if(Yt.alloc)return Yt.alloc(i);var o=new Yt(i);return o.fill(0),o},isBuffer:function(i){return Yt.isBuffer(i)},isStream:function(i){return i&&typeof i.on=="function"&&typeof i.pause=="function"&&typeof i.resume=="function"}}},{}],15:[function(n,r,a){function i(k,R,D){var O,L=s.getTypeOf(R),B=s.extend(D||{},d);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(k=x(k)),B.createFolders&&(O=_(k))&&S.call(this,O,!0);var Y=L==="string"&&B.binary===!1&&B.base64===!1;D&&D.binary!==void 0||(B.binary=!Y),(R instanceof h&&R.uncompressedSize===0||B.dir||!R||R.length===0)&&(B.base64=!1,B.binary=!0,R="",B.compression="STORE",L="string");var F=null;F=R instanceof h||R instanceof l?R:v.isNode&&v.isStream(R)?new b(k,R):s.prepareContent(k,R,B.binary,B.optimizedBinaryString,B.base64);var Z=new p(k,F,B);this.files[k]=Z}var o=n("./utf8"),s=n("./utils"),l=n("./stream/GenericWorker"),u=n("./stream/StreamHelper"),d=n("./defaults"),h=n("./compressedObject"),p=n("./zipObject"),g=n("./generate"),v=n("./nodejsUtils"),b=n("./nodejs/NodejsStreamInputAdapter"),_=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var R=k.lastIndexOf("/");return 0<R?k.substring(0,R):""},x=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},S=function(k,R){return R=R!==void 0?R:d.createFolders,k=x(k),this.files[k]||i.call(this,k,null,{dir:!0,createFolders:R}),this.files[k]};function E(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var R,D,O;for(R in this.files)O=this.files[R],(D=R.slice(this.root.length,R.length))&&R.slice(0,this.root.length)===this.root&&k(D,O)},filter:function(k){var R=[];return this.forEach(function(D,O){k(D,O)&&R.push(O)}),R},file:function(k,R,D){if(arguments.length!==1)return k=this.root+k,i.call(this,k,R,D),this;if(E(k)){var O=k;return this.filter(function(B,Y){return!Y.dir&&O.test(B)})}var L=this.files[this.root+k];return L&&!L.dir?L:null},folder:function(k){if(!k)return this;if(E(k))return this.filter(function(L,B){return B.dir&&k.test(L)});var R=this.root+k,D=S.call(this,R),O=this.clone();return O.root=D.name,O},remove:function(k){k=this.root+k;var R=this.files[k];if(R||(k.slice(-1)!=="/"&&(k+="/"),R=this.files[k]),R&&!R.dir)delete this.files[k];else for(var D=this.filter(function(L,B){return B.name.slice(0,k.length)===k}),O=0;O<D.length;O++)delete this.files[D[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var R,D={};try{if((D=s.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=D.type.toLowerCase(),D.compression=D.compression.toUpperCase(),D.type==="binarystring"&&(D.type="string"),!D.type)throw new Error("No output type specified.");s.checkSupport(D.type),D.platform!=="darwin"&&D.platform!=="freebsd"&&D.platform!=="linux"&&D.platform!=="sunos"||(D.platform="UNIX"),D.platform==="win32"&&(D.platform="DOS");var O=D.comment||this.comment||"";R=g.generateWorker(this,D,O)}catch(L){(R=new l("error")).error(L)}return new u(R,D.type||"string",D.mimeType)},generateAsync:function(k,R){return this.generateInternalStream(k).accumulate(R)},generateNodeStream:function(k,R){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(R)}};r.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,a){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s);for(var l=0;l<this.data.length;l++)s[l]=255&s[l]}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data[this.zero+s]},o.prototype.lastIndexOfSignature=function(s){for(var l=s.charCodeAt(0),u=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),p=this.length-4;0<=p;--p)if(this.data[p]===l&&this.data[p+1]===u&&this.data[p+2]===d&&this.data[p+3]===h)return p-this.zero;return-1},o.prototype.readAndCheckSignature=function(s){var l=s.charCodeAt(0),u=s.charCodeAt(1),d=s.charCodeAt(2),h=s.charCodeAt(3),p=this.readData(4);return l===p[0]&&u===p[1]&&d===p[2]&&h===p[3]},o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,a){var i=n("../utils");function o(s){this.data=s,this.length=s.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(s){this.checkIndex(this.index+s)},checkIndex:function(s){if(this.length<this.zero+s||s<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+s+"). Corrupted zip ?")},setIndex:function(s){this.checkIndex(s),this.index=s},skip:function(s){this.setIndex(this.index+s)},byteAt:function(){},readInt:function(s){var l,u=0;for(this.checkOffset(s),l=this.index+s-1;l>=this.index;l--)u=(u<<8)+this.byteAt(l);return this.index+=s,u},readString:function(s){return i.transformTo("string",this.readData(s))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var s=this.readInt(4);return new Date(Date.UTC(1980+(s>>25&127),(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(31&s)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,a){var i=n("./Uint8ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,a){var i=n("./DataReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},o.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},o.prototype.readAndCheckSignature=function(s){return s===this.readData(4)},o.prototype.readData=function(s){this.checkOffset(s);var l=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,a){var i=n("./ArrayReader");function o(s){i.call(this,s)}n("../utils").inherits(o,i),o.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,a){var i=n("../utils"),o=n("../support"),s=n("./ArrayReader"),l=n("./StringReader"),u=n("./NodeBufferReader"),d=n("./Uint8ArrayReader");r.exports=function(h){var p=i.getTypeOf(h);return i.checkSupport(p),p!=="string"||o.uint8array?p==="nodebuffer"?new u(h):o.uint8array?new d(i.transformTo("uint8array",h)):new s(i.transformTo("array",h)):new l(h)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,a){var i=n("./GenericWorker"),o=n("../utils");function s(l){i.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(s,i),s.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,a){var i=n("./GenericWorker"),o=n("../crc32");function s(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(s,i),s.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}i.inherits(s,o),s.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,a){var i=n("../utils"),o=n("./GenericWorker");function s(l){o.call(this,"DataWorker");var u=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(d){u.dataIsReady=!0,u.data=d,u.max=d&&d.length||0,u.type=i.getTypeOf(d),u.isPaused||u._tickAndRepeat()},function(d){u.error(d)})}i.inherits(s,o),s.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,u=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,u);break;case"uint8array":l=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":l=this.data.slice(this.index,u)}return this.index=u,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,a){function i(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,s){return this._listeners[o].push(s),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,s){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,s)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var s=this;return o.on("data",function(l){s.processChunk(l)}),o.on("end",function(){s.end()}),o.on("error",function(l){s.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,s){return this.extraStreamInfo[o]=s,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=i},{}],29:[function(n,r,a){var i=n("../utils"),o=n("./ConvertWorker"),s=n("./GenericWorker"),l=n("../base64"),u=n("../support"),d=n("../external"),h=null;if(u.nodestream)try{h=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function p(v,b){return new d.Promise(function(_,x){var S=[],E=v._internalType,C=v._outputType,k=v._mimeType;v.on("data",function(R,D){S.push(R),b&&b(D)}).on("error",function(R){S=[],x(R)}).on("end",function(){try{var R=function(D,O,L){switch(D){case"blob":return i.newBlob(i.transformTo("arraybuffer",O),L);case"base64":return l.encode(O);default:return i.transformTo(D,O)}}(C,function(D,O){var L,B=0,Y=null,F=0;for(L=0;L<O.length;L++)F+=O[L].length;switch(D){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(Y=new Uint8Array(F),L=0;L<O.length;L++)Y.set(O[L],B),B+=O[L].length;return Y;case"nodebuffer":return Yt.concat(O);default:throw new Error("concat : unsupported type '"+D+"'")}}(E,S),k);_(R)}catch(D){x(D)}S=[]}).resume()})}function g(v,b,_){var x=b;switch(b){case"blob":case"arraybuffer":x="uint8array";break;case"base64":x="string"}try{this._internalType=x,this._outputType=b,this._mimeType=_,i.checkSupport(x),this._worker=v.pipe(new o(x)),v.lock()}catch(S){this._worker=new s("error"),this._worker.error(S)}}g.prototype={accumulate:function(v){return p(this,v)},on:function(v,b){var _=this;return v==="data"?this._worker.on(v,function(x){b.call(_,x.data,x.meta)}):this._worker.on(v,function(){i.delay(b,arguments,_)}),this},resume:function(){return i.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(i.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},r.exports=g},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Yt<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var i=new ArrayBuffer(0);try{a.blob=new Blob([i],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(i),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!n("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,a){for(var i=n("./utils"),o=n("./support"),s=n("./nodejsUtils"),l=n("./stream/GenericWorker"),u=new Array(256),d=0;d<256;d++)u[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;u[254]=u[254]=1;function h(){l.call(this,"utf-8 decode"),this.leftOver=null}function p(){l.call(this,"utf-8 encode")}a.utf8encode=function(g){return o.nodebuffer?s.newBufferFrom(g,"utf-8"):function(v){var b,_,x,S,E,C=v.length,k=0;for(S=0;S<C;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),k+=_<128?1:_<2048?2:_<65536?3:4;for(b=o.uint8array?new Uint8Array(k):new Array(k),S=E=0;E<k;S++)(64512&(_=v.charCodeAt(S)))==55296&&S+1<C&&(64512&(x=v.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(x-56320),S++),_<128?b[E++]=_:(_<2048?b[E++]=192|_>>>6:(_<65536?b[E++]=224|_>>>12:(b[E++]=240|_>>>18,b[E++]=128|_>>>12&63),b[E++]=128|_>>>6&63),b[E++]=128|63&_);return b}(g)},a.utf8decode=function(g){return o.nodebuffer?i.transformTo("nodebuffer",g).toString("utf-8"):function(v){var b,_,x,S,E=v.length,C=new Array(2*E);for(b=_=0;b<E;)if((x=v[b++])<128)C[_++]=x;else if(4<(S=u[x]))C[_++]=65533,b+=S-1;else{for(x&=S===2?31:S===3?15:7;1<S&&b<E;)x=x<<6|63&v[b++],S--;1<S?C[_++]=65533:x<65536?C[_++]=x:(x-=65536,C[_++]=55296|x>>10&1023,C[_++]=56320|1023&x)}return C.length!==_&&(C.subarray?C=C.subarray(0,_):C.length=_),i.applyFromCharCode(C)}(g=i.transformTo(o.uint8array?"uint8array":"array",g))},i.inherits(h,l),h.prototype.processChunk=function(g){var v=i.transformTo(o.uint8array?"uint8array":"array",g.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var b=v;(v=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),v.set(b,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var _=function(S,E){var C;for((E=E||S.length)>S.length&&(E=S.length),C=E-1;0<=C&&(192&S[C])==128;)C--;return C<0||C===0?E:C+u[S[C]]>E?C:E}(v),x=v;_!==v.length&&(o.uint8array?(x=v.subarray(0,_),this.leftOver=v.subarray(_,v.length)):(x=v.slice(0,_),this.leftOver=v.slice(_,v.length))),this.push({data:a.utf8decode(x),meta:g.meta})},h.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=h,i.inherits(p,l),p.prototype.processChunk=function(g){this.push({data:a.utf8encode(g.data),meta:g.meta})},a.Utf8EncodeWorker=p},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,a){var i=n("./support"),o=n("./base64"),s=n("./nodejsUtils"),l=n("./external");function u(b){return b}function d(b,_){for(var x=0;x<b.length;++x)_[x]=255&b.charCodeAt(x);return _}n("setimmediate"),a.newBlob=function(b,_){a.checkSupport("blob");try{return new Blob([b],{type:_})}catch{try{var x=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return x.append(b),x.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var h={stringifyByChunk:function(b,_,x){var S=[],E=0,C=b.length;if(C<=x)return String.fromCharCode.apply(null,b);for(;E<C;)_==="array"||_==="nodebuffer"?S.push(String.fromCharCode.apply(null,b.slice(E,Math.min(E+x,C)))):S.push(String.fromCharCode.apply(null,b.subarray(E,Math.min(E+x,C)))),E+=x;return S.join("")},stringifyByChar:function(b){for(var _="",x=0;x<b.length;x++)_+=String.fromCharCode(b[x]);return _},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&String.fromCharCode.apply(null,s.allocBuffer(1)).length===1}catch{return!1}}()}};function p(b){var _=65536,x=a.getTypeOf(b),S=!0;if(x==="uint8array"?S=h.applyCanBeUsed.uint8array:x==="nodebuffer"&&(S=h.applyCanBeUsed.nodebuffer),S)for(;1<_;)try{return h.stringifyByChunk(b,x,_)}catch{_=Math.floor(_/2)}return h.stringifyByChar(b)}function g(b,_){for(var x=0;x<b.length;x++)_[x]=b[x];return _}a.applyFromCharCode=p;var v={};v.string={string:u,array:function(b){return d(b,new Array(b.length))},arraybuffer:function(b){return v.string.uint8array(b).buffer},uint8array:function(b){return d(b,new Uint8Array(b.length))},nodebuffer:function(b){return d(b,s.allocBuffer(b.length))}},v.array={string:p,array:u,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(b)}},v.arraybuffer={string:function(b){return p(new Uint8Array(b))},array:function(b){return g(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:u,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return s.newBufferFrom(new Uint8Array(b))}},v.uint8array={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:u,nodebuffer:function(b){return s.newBufferFrom(b)}},v.nodebuffer={string:p,array:function(b){return g(b,new Array(b.length))},arraybuffer:function(b){return v.nodebuffer.uint8array(b).buffer},uint8array:function(b){return g(b,new Uint8Array(b.length))},nodebuffer:u},a.transformTo=function(b,_){if(_=_||"",!b)return _;a.checkSupport(b);var x=a.getTypeOf(_);return v[x][b](_)},a.resolve=function(b){for(var _=b.split("/"),x=[],S=0;S<_.length;S++){var E=_[S];E==="."||E===""&&S!==0&&S!==_.length-1||(E===".."?x.pop():x.push(E))}return x.join("/")},a.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":i.nodebuffer&&s.isBuffer(b)?"nodebuffer":i.uint8array&&b instanceof Uint8Array?"uint8array":i.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(b){if(!i[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(b){var _,x,S="";for(x=0;x<(b||"").length;x++)S+="\\x"+((_=b.charCodeAt(x))<16?"0":"")+_.toString(16).toUpperCase();return S},a.delay=function(b,_,x){setImmediate(function(){b.apply(x||null,_||[])})},a.inherits=function(b,_){function x(){}x.prototype=_.prototype,b.prototype=new x},a.extend=function(){var b,_,x={};for(b=0;b<arguments.length;b++)for(_ in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],_)&&x[_]===void 0&&(x[_]=arguments[b][_]);return x},a.prepareContent=function(b,_,x,S,E){return l.Promise.resolve(_).then(function(C){return i.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(k,R){var D=new FileReader;D.onload=function(O){k(O.target.result)},D.onerror=function(O){R(O.target.error)},D.readAsArrayBuffer(C)}):C}).then(function(C){var k=a.getTypeOf(C);return k?(k==="arraybuffer"?C=a.transformTo("uint8array",C):k==="string"&&(E?C=o.decode(C):x&&S!==!0&&(C=function(R){return d(R,i.uint8array?new Uint8Array(R.length):new Array(R.length))}(C))),C):l.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./signature"),l=n("./zipEntry"),u=n("./support");function d(h){this.files=[],this.loadOptions=h}d.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var p=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(p)+", expected "+o.pretty(h)+")")}},isSignature:function(h,p){var g=this.reader.index;this.reader.setIndex(h);var v=this.reader.readString(4)===p;return this.reader.setIndex(g),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),p=u.uint8array?"uint8array":"array",g=o.transformTo(p,h);this.zipComment=this.loadOptions.decodeFileName(g)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h,p,g,v=this.zip64EndOfCentralSize-44;0<v;)h=this.reader.readInt(2),p=this.reader.readInt(4),g=this.reader.readData(p),this.zip64ExtensibleData[h]={id:h,length:p,value:g}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,p;for(h=0;h<this.files.length;h++)p=this.files[h],this.reader.setIndex(p.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),p.readLocalPart(this.reader),p.handleUTF8(),p.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(h=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(h<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(h);var p=h;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(h=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var g=this.centralDirOffset+this.centralDirSize;this.zip64&&(g+=20,g+=12+this.zip64EndOfCentralSize);var v=p-g;if(0<v)this.isSignature(p,s.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(h){this.reader=i(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=d},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,a){var i=n("./reader/readerFor"),o=n("./utils"),s=n("./compressedObject"),l=n("./crc32"),u=n("./utf8"),d=n("./compressions"),h=n("./support");function p(g,v){this.options=g,this.loadOptions=v}p.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(g){var v,b;if(g.skip(22),this.fileNameLength=g.readInt(2),b=g.readInt(2),this.fileName=g.readData(this.fileNameLength),g.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=function(_){for(var x in d)if(Object.prototype.hasOwnProperty.call(d,x)&&d[x].magic===_)return d[x];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,v,g.readData(this.compressedSize))},readCentralPart:function(g){this.versionMadeBy=g.readInt(2),g.skip(2),this.bitFlag=g.readInt(2),this.compressionMethod=g.readString(2),this.date=g.readDate(),this.crc32=g.readInt(4),this.compressedSize=g.readInt(4),this.uncompressedSize=g.readInt(4);var v=g.readInt(2);if(this.extraFieldsLength=g.readInt(2),this.fileCommentLength=g.readInt(2),this.diskNumberStart=g.readInt(2),this.internalFileAttributes=g.readInt(2),this.externalFileAttributes=g.readInt(4),this.localHeaderOffset=g.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");g.skip(v),this.readExtraFields(g),this.parseZIP64ExtraField(g),this.fileComment=g.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var g=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),g==0&&(this.dosPermissions=63&this.externalFileAttributes),g==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var g=i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=g.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=g.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=g.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=g.readInt(4))}},readExtraFields:function(g){var v,b,_,x=g.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});g.index+4<x;)v=g.readInt(2),b=g.readInt(2),_=g.readData(b),this.extraFields[v]={id:v,length:b,value:_};g.setIndex(x)},handleUTF8:function(){var g=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var b=o.transformTo(g,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var x=o.transformTo(g,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(x)}}},findExtraFieldUnicodePath:function(){var g=this.extraFields[28789];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null},findExtraFieldUnicodeComment:function(){var g=this.extraFields[25461];if(g){var v=i(g.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:u.utf8decode(v.readData(g.length-5))}return null}},r.exports=p},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,a){function i(v,b,_){this.name=v,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=b,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),s=n("./stream/DataWorker"),l=n("./utf8"),u=n("./compressedObject"),d=n("./stream/GenericWorker");i.prototype={internalStream:function(v){var b=null,_="string";try{if(!v)throw new Error("No output type specified.");var x=(_=v.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),b=this._decompressWorker();var S=!this._dataBinary;S&&!x&&(b=b.pipe(new l.Utf8EncodeWorker)),!S&&x&&(b=b.pipe(new l.Utf8DecodeWorker))}catch(E){(b=new d("error")).error(E)}return new o(b,_,"")},async:function(v,b){return this.internalStream(v).accumulate(b)},nodeStream:function(v,b){return this.internalStream(v||"nodebuffer").toNodejsStream(b)},_compressWorker:function(v,b){if(this._data instanceof u&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),u.createWorkerFrom(_,v,b)},_decompressWorker:function(){return this._data instanceof u?this._data.getContentWorker():this._data instanceof d?this._data:new s(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],p=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},g=0;g<h.length;g++)i.prototype[h[g]]=p;r.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,a){(function(i){var o,s,l=i.MutationObserver||i.WebKitMutationObserver;if(l){var u=0,d=new l(v),h=i.document.createTextNode("");d.observe(h,{characterData:!0}),o=function(){h.data=u=++u%2}}else if(i.setImmediate||i.MessageChannel===void 0)o="document"in i&&"onreadystatechange"in i.document.createElement("script")?function(){var b=i.document.createElement("script");b.onreadystatechange=function(){v(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},i.document.documentElement.appendChild(b)}:function(){setTimeout(v,0)};else{var p=new i.MessageChannel;p.port1.onmessage=v,o=function(){p.port2.postMessage(0)}}var g=[];function v(){var b,_;s=!0;for(var x=g.length;x;){for(_=g,g=[],b=-1;++b<x;)_[b]();x=g.length}s=!1}r.exports=function(b){g.push(b)!==1||s||o()}}).call(this,typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,a){var i=n("immediate");function o(){}var s={},l=["REJECTED"],u=["FULFILLED"],d=["PENDING"];function h(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=d,this.queue=[],this.outcome=void 0,x!==o&&b(this,x)}function p(x,S,E){this.promise=x,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function g(x,S,E){i(function(){var C;try{C=S(E)}catch(k){return s.reject(x,k)}C===x?s.reject(x,new TypeError("Cannot resolve promise with itself")):s.resolve(x,C)})}function v(x){var S=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof S=="function")return function(){S.apply(x,arguments)}}function b(x,S){var E=!1;function C(D){E||(E=!0,s.reject(x,D))}function k(D){E||(E=!0,s.resolve(x,D))}var R=_(function(){S(k,C)});R.status==="error"&&C(R.value)}function _(x,S){var E={};try{E.value=x(S),E.status="success"}catch(C){E.status="error",E.value=C}return E}(r.exports=h).prototype.finally=function(x){if(typeof x!="function")return this;var S=this.constructor;return this.then(function(E){return S.resolve(x()).then(function(){return E})},function(E){return S.resolve(x()).then(function(){throw E})})},h.prototype.catch=function(x){return this.then(null,x)},h.prototype.then=function(x,S){if(typeof x!="function"&&this.state===u||typeof S!="function"&&this.state===l)return this;var E=new this.constructor(o);return this.state!==d?g(E,this.state===u?x:S,this.outcome):this.queue.push(new p(E,x,S)),E},p.prototype.callFulfilled=function(x){s.resolve(this.promise,x)},p.prototype.otherCallFulfilled=function(x){g(this.promise,this.onFulfilled,x)},p.prototype.callRejected=function(x){s.reject(this.promise,x)},p.prototype.otherCallRejected=function(x){g(this.promise,this.onRejected,x)},s.resolve=function(x,S){var E=_(v,S);if(E.status==="error")return s.reject(x,E.value);var C=E.value;if(C)b(x,C);else{x.state=u,x.outcome=S;for(var k=-1,R=x.queue.length;++k<R;)x.queue[k].callFulfilled(S)}return x},s.reject=function(x,S){x.state=l,x.outcome=S;for(var E=-1,C=x.queue.length;++E<C;)x.queue[E].callRejected(S);return x},h.resolve=function(x){return x instanceof this?x:s.resolve(new this(o),x)},h.reject=function(x){var S=new this(o);return s.reject(S,x)},h.all=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=new Array(E),R=0,D=-1,O=new this(o);++D<E;)L(x[D],D);return O;function L(B,Y){S.resolve(B).then(function(F){k[Y]=F,++R!==E||C||(C=!0,s.resolve(O,k))},function(F){C||(C=!0,s.reject(O,F))})}},h.race=function(x){var S=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=x.length,C=!1;if(!E)return this.resolve([]);for(var k=-1,R=new this(o);++k<E;)D=x[k],S.resolve(D).then(function(O){C||(C=!0,s.resolve(R,O))},function(O){C||(C=!0,s.reject(R,O))});var D;return R}},{immediate:36}],38:[function(n,r,a){var i={};(0,n("./lib/utils/common").assign)(i,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,a){var i=n("./zlib/deflate"),o=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/messages"),u=n("./zlib/zstream"),d=Object.prototype.toString,h=0,p=-1,g=0,v=8;function b(x){if(!(this instanceof b))return new b(x);this.options=o.assign({level:p,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},x||{});var S=this.options;S.raw&&0<S.windowBits?S.windowBits=-S.windowBits:S.gzip&&0<S.windowBits&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var E=i.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(E!==h)throw new Error(l[E]);if(S.header&&i.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(C=typeof S.dictionary=="string"?s.string2buf(S.dictionary):d.call(S.dictionary)==="[object ArrayBuffer]"?new Uint8Array(S.dictionary):S.dictionary,(E=i.deflateSetDictionary(this.strm,C))!==h)throw new Error(l[E]);this._dict_set=!0}}function _(x,S){var E=new b(S);if(E.push(x,!0),E.err)throw E.msg||l[E.err];return E.result}b.prototype.push=function(x,S){var E,C,k=this.strm,R=this.options.chunkSize;if(this.ended)return!1;C=S===~~S?S:S===!0?4:0,typeof x=="string"?k.input=s.string2buf(x):d.call(x)==="[object ArrayBuffer]"?k.input=new Uint8Array(x):k.input=x,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(R),k.next_out=0,k.avail_out=R),(E=i.deflate(k,C))!==1&&E!==h)return this.onEnd(E),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(s.buf2binstring(o.shrinkBuf(k.output,k.next_out))):this.onData(o.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&E!==1);return C===4?(E=i.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===h):C!==2||(this.onEnd(h),!(k.avail_out=0))},b.prototype.onData=function(x){this.chunks.push(x)},b.prototype.onEnd=function(x){x===h&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=x,this.msg=this.strm.msg},a.Deflate=b,a.deflate=_,a.deflateRaw=function(x,S){return(S=S||{}).raw=!0,_(x,S)},a.gzip=function(x,S){return(S=S||{}).gzip=!0,_(x,S)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,a){var i=n("./zlib/inflate"),o=n("./utils/common"),s=n("./utils/strings"),l=n("./zlib/constants"),u=n("./zlib/messages"),d=n("./zlib/zstream"),h=n("./zlib/gzheader"),p=Object.prototype.toString;function g(b){if(!(this instanceof g))return new g(b);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},b||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||b&&b.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&(15&_.windowBits)==0&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var x=i.inflateInit2(this.strm,_.windowBits);if(x!==l.Z_OK)throw new Error(u[x]);this.header=new h,i.inflateGetHeader(this.strm,this.header)}function v(b,_){var x=new g(_);if(x.push(b,!0),x.err)throw x.msg||u[x.err];return x.result}g.prototype.push=function(b,_){var x,S,E,C,k,R,D=this.strm,O=this.options.chunkSize,L=this.options.dictionary,B=!1;if(this.ended)return!1;S=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof b=="string"?D.input=s.binstring2buf(b):p.call(b)==="[object ArrayBuffer]"?D.input=new Uint8Array(b):D.input=b,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(O),D.next_out=0,D.avail_out=O),(x=i.inflate(D,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&L&&(R=typeof L=="string"?s.string2buf(L):p.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,x=i.inflateSetDictionary(this.strm,R)),x===l.Z_BUF_ERROR&&B===!0&&(x=l.Z_OK,B=!1),x!==l.Z_STREAM_END&&x!==l.Z_OK)return this.onEnd(x),!(this.ended=!0);D.next_out&&(D.avail_out!==0&&x!==l.Z_STREAM_END&&(D.avail_in!==0||S!==l.Z_FINISH&&S!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=s.utf8border(D.output,D.next_out),C=D.next_out-E,k=s.buf2string(D.output,E),D.next_out=C,D.avail_out=O-C,C&&o.arraySet(D.output,D.output,E,C,0),this.onData(k)):this.onData(o.shrinkBuf(D.output,D.next_out)))),D.avail_in===0&&D.avail_out===0&&(B=!0)}while((0<D.avail_in||D.avail_out===0)&&x!==l.Z_STREAM_END);return x===l.Z_STREAM_END&&(S=l.Z_FINISH),S===l.Z_FINISH?(x=i.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===l.Z_OK):S!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(D.avail_out=0))},g.prototype.onData=function(b){this.chunks.push(b)},g.prototype.onEnd=function(b){b===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},a.Inflate=g,a.inflate=v,a.inflateRaw=function(b,_){return(_=_||{}).raw=!0,v(b,_)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,a){var i=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var d=u.shift();if(d){if(typeof d!="object")throw new TypeError(d+"must be non-object");for(var h in d)d.hasOwnProperty(h)&&(l[h]=d[h])}}return l},a.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var o={arraySet:function(l,u,d,h,p){if(u.subarray&&l.subarray)l.set(u.subarray(d,d+h),p);else for(var g=0;g<h;g++)l[p+g]=u[d+g]},flattenChunks:function(l){var u,d,h,p,g,v;for(u=h=0,d=l.length;u<d;u++)h+=l[u].length;for(v=new Uint8Array(h),u=p=0,d=l.length;u<d;u++)g=l[u],v.set(g,p),p+=g.length;return v}},s={arraySet:function(l,u,d,h,p){for(var g=0;g<h;g++)l[p+g]=u[d+g]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,s))},a.setTyped(i)},{}],42:[function(n,r,a){var i=n("./common"),o=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{s=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;function d(h,p){if(p<65537&&(h.subarray&&s||!h.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(h,p));for(var g="",v=0;v<p;v++)g+=String.fromCharCode(h[v]);return g}l[254]=l[254]=1,a.string2buf=function(h){var p,g,v,b,_,x=h.length,S=0;for(b=0;b<x;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),S+=g<128?1:g<2048?2:g<65536?3:4;for(p=new i.Buf8(S),b=_=0;_<S;b++)(64512&(g=h.charCodeAt(b)))==55296&&b+1<x&&(64512&(v=h.charCodeAt(b+1)))==56320&&(g=65536+(g-55296<<10)+(v-56320),b++),g<128?p[_++]=g:(g<2048?p[_++]=192|g>>>6:(g<65536?p[_++]=224|g>>>12:(p[_++]=240|g>>>18,p[_++]=128|g>>>12&63),p[_++]=128|g>>>6&63),p[_++]=128|63&g);return p},a.buf2binstring=function(h){return d(h,h.length)},a.binstring2buf=function(h){for(var p=new i.Buf8(h.length),g=0,v=p.length;g<v;g++)p[g]=h.charCodeAt(g);return p},a.buf2string=function(h,p){var g,v,b,_,x=p||h.length,S=new Array(2*x);for(g=v=0;g<x;)if((b=h[g++])<128)S[v++]=b;else if(4<(_=l[b]))S[v++]=65533,g+=_-1;else{for(b&=_===2?31:_===3?15:7;1<_&&g<x;)b=b<<6|63&h[g++],_--;1<_?S[v++]=65533:b<65536?S[v++]=b:(b-=65536,S[v++]=55296|b>>10&1023,S[v++]=56320|1023&b)}return d(S,v)},a.utf8border=function(h,p){var g;for((p=p||h.length)>h.length&&(p=h.length),g=p-1;0<=g&&(192&h[g])==128;)g--;return g<0||g===0?p:g+l[h[g]]>p?g:p}},{"./common":41}],43:[function(n,r,a){r.exports=function(i,o,s,l){for(var u=65535&i|0,d=i>>>16&65535|0,h=0;s!==0;){for(s-=h=2e3<s?2e3:s;d=d+(u=u+o[l++]|0)|0,--h;);u%=65521,d%=65521}return u|d<<16|0}},{}],44:[function(n,r,a){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,a){var i=function(){for(var o,s=[],l=0;l<256;l++){o=l;for(var u=0;u<8;u++)o=1&o?3988292384^o>>>1:o>>>1;s[l]=o}return s}();r.exports=function(o,s,l,u){var d=i,h=u+l;o^=-1;for(var p=u;p<h;p++)o=o>>>8^d[255&(o^s[p])];return-1^o}},{}],46:[function(n,r,a){var i,o=n("../utils/common"),s=n("./trees"),l=n("./adler32"),u=n("./crc32"),d=n("./messages"),h=0,p=4,g=0,v=-2,b=-1,_=4,x=2,S=8,E=9,C=286,k=30,R=19,D=2*C+1,O=15,L=3,B=258,Y=B+L+1,F=42,Z=113,q=1,ne=2,ae=3,re=4;function ee(V,me){return V.msg=d[me],me}function ie(V){return(V<<1)-(4<V?9:0)}function U(V){for(var me=V.length;0<=--me;)V[me]=0}function Q(V){var me=V.state,Te=me.pending;Te>V.avail_out&&(Te=V.avail_out),Te!==0&&(o.arraySet(V.output,me.pending_buf,me.pending_out,Te,V.next_out),V.next_out+=Te,me.pending_out+=Te,V.total_out+=Te,V.avail_out-=Te,me.pending-=Te,me.pending===0&&(me.pending_out=0))}function X(V,me){s._tr_flush_block(V,0<=V.block_start?V.block_start:-1,V.strstart-V.block_start,me),V.block_start=V.strstart,Q(V.strm)}function de(V,me){V.pending_buf[V.pending++]=me}function be(V,me){V.pending_buf[V.pending++]=me>>>8&255,V.pending_buf[V.pending++]=255&me}function _e(V,me){var Te,le,oe=V.max_chain_length,J=V.strstart,xe=V.prev_length,Me=V.nice_match,Ee=V.strstart>V.w_size-Y?V.strstart-(V.w_size-Y):0,We=V.window,kt=V.w_mask,at=V.prev,_t=V.strstart+B,jt=We[J+xe-1],Dt=We[J+xe];V.prev_length>=V.good_match&&(oe>>=2),Me>V.lookahead&&(Me=V.lookahead);do if(We[(Te=me)+xe]===Dt&&We[Te+xe-1]===jt&&We[Te]===We[J]&&We[++Te]===We[J+1]){J+=2,Te++;do;while(We[++J]===We[++Te]&&We[++J]===We[++Te]&&We[++J]===We[++Te]&&We[++J]===We[++Te]&&We[++J]===We[++Te]&&We[++J]===We[++Te]&&We[++J]===We[++Te]&&We[++J]===We[++Te]&&J<_t);if(le=B-(_t-J),J=_t-B,xe<le){if(V.match_start=me,Me<=(xe=le))break;jt=We[J+xe-1],Dt=We[J+xe]}}while((me=at[me&kt])>Ee&&--oe!=0);return xe<=V.lookahead?xe:V.lookahead}function Pe(V){var me,Te,le,oe,J,xe,Me,Ee,We,kt,at=V.w_size;do{if(oe=V.window_size-V.lookahead-V.strstart,V.strstart>=at+(at-Y)){for(o.arraySet(V.window,V.window,at,at,0),V.match_start-=at,V.strstart-=at,V.block_start-=at,me=Te=V.hash_size;le=V.head[--me],V.head[me]=at<=le?le-at:0,--Te;);for(me=Te=at;le=V.prev[--me],V.prev[me]=at<=le?le-at:0,--Te;);oe+=at}if(V.strm.avail_in===0)break;if(xe=V.strm,Me=V.window,Ee=V.strstart+V.lookahead,We=oe,kt=void 0,kt=xe.avail_in,We<kt&&(kt=We),Te=kt===0?0:(xe.avail_in-=kt,o.arraySet(Me,xe.input,xe.next_in,kt,Ee),xe.state.wrap===1?xe.adler=l(xe.adler,Me,kt,Ee):xe.state.wrap===2&&(xe.adler=u(xe.adler,Me,kt,Ee)),xe.next_in+=kt,xe.total_in+=kt,kt),V.lookahead+=Te,V.lookahead+V.insert>=L)for(J=V.strstart-V.insert,V.ins_h=V.window[J],V.ins_h=(V.ins_h<<V.hash_shift^V.window[J+1])&V.hash_mask;V.insert&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[J+L-1])&V.hash_mask,V.prev[J&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=J,J++,V.insert--,!(V.lookahead+V.insert<L)););}while(V.lookahead<Y&&V.strm.avail_in!==0)}function Ne(V,me){for(var Te,le;;){if(V.lookahead<Y){if(Pe(V),V.lookahead<Y&&me===h)return q;if(V.lookahead===0)break}if(Te=0,V.lookahead>=L&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Te=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),Te!==0&&V.strstart-Te<=V.w_size-Y&&(V.match_length=_e(V,Te)),V.match_length>=L)if(le=s._tr_tally(V,V.strstart-V.match_start,V.match_length-L),V.lookahead-=V.match_length,V.match_length<=V.max_lazy_match&&V.lookahead>=L){for(V.match_length--;V.strstart++,V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Te=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart,--V.match_length!=0;);V.strstart++}else V.strstart+=V.match_length,V.match_length=0,V.ins_h=V.window[V.strstart],V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+1])&V.hash_mask;else le=s._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++;if(le&&(X(V,!1),V.strm.avail_out===0))return q}return V.insert=V.strstart<L-1?V.strstart:L-1,me===p?(X(V,!0),V.strm.avail_out===0?ae:re):V.last_lit&&(X(V,!1),V.strm.avail_out===0)?q:ne}function Re(V,me){for(var Te,le,oe;;){if(V.lookahead<Y){if(Pe(V),V.lookahead<Y&&me===h)return q;if(V.lookahead===0)break}if(Te=0,V.lookahead>=L&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Te=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),V.prev_length=V.match_length,V.prev_match=V.match_start,V.match_length=L-1,Te!==0&&V.prev_length<V.max_lazy_match&&V.strstart-Te<=V.w_size-Y&&(V.match_length=_e(V,Te),V.match_length<=5&&(V.strategy===1||V.match_length===L&&4096<V.strstart-V.match_start)&&(V.match_length=L-1)),V.prev_length>=L&&V.match_length<=V.prev_length){for(oe=V.strstart+V.lookahead-L,le=s._tr_tally(V,V.strstart-1-V.prev_match,V.prev_length-L),V.lookahead-=V.prev_length-1,V.prev_length-=2;++V.strstart<=oe&&(V.ins_h=(V.ins_h<<V.hash_shift^V.window[V.strstart+L-1])&V.hash_mask,Te=V.prev[V.strstart&V.w_mask]=V.head[V.ins_h],V.head[V.ins_h]=V.strstart),--V.prev_length!=0;);if(V.match_available=0,V.match_length=L-1,V.strstart++,le&&(X(V,!1),V.strm.avail_out===0))return q}else if(V.match_available){if((le=s._tr_tally(V,0,V.window[V.strstart-1]))&&X(V,!1),V.strstart++,V.lookahead--,V.strm.avail_out===0)return q}else V.match_available=1,V.strstart++,V.lookahead--}return V.match_available&&(le=s._tr_tally(V,0,V.window[V.strstart-1]),V.match_available=0),V.insert=V.strstart<L-1?V.strstart:L-1,me===p?(X(V,!0),V.strm.avail_out===0?ae:re):V.last_lit&&(X(V,!1),V.strm.avail_out===0)?q:ne}function Ce(V,me,Te,le,oe){this.good_length=V,this.max_lazy=me,this.nice_length=Te,this.max_chain=le,this.func=oe}function Fe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*D),this.dyn_dtree=new o.Buf16(2*(2*k+1)),this.bl_tree=new o.Buf16(2*(2*R+1)),U(this.dyn_ltree),U(this.dyn_dtree),U(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(O+1),this.heap=new o.Buf16(2*C+1),U(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),U(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Qe(V){var me;return V&&V.state?(V.total_in=V.total_out=0,V.data_type=x,(me=V.state).pending=0,me.pending_out=0,me.wrap<0&&(me.wrap=-me.wrap),me.status=me.wrap?F:Z,V.adler=me.wrap===2?0:1,me.last_flush=h,s._tr_init(me),g):ee(V,v)}function Le(V){var me=Qe(V);return me===g&&function(Te){Te.window_size=2*Te.w_size,U(Te.head),Te.max_lazy_match=i[Te.level].max_lazy,Te.good_match=i[Te.level].good_length,Te.nice_match=i[Te.level].nice_length,Te.max_chain_length=i[Te.level].max_chain,Te.strstart=0,Te.block_start=0,Te.lookahead=0,Te.insert=0,Te.match_length=Te.prev_length=L-1,Te.match_available=0,Te.ins_h=0}(V.state),me}function Ie(V,me,Te,le,oe,J){if(!V)return v;var xe=1;if(me===b&&(me=6),le<0?(xe=0,le=-le):15<le&&(xe=2,le-=16),oe<1||E<oe||Te!==S||le<8||15<le||me<0||9<me||J<0||_<J)return ee(V,v);le===8&&(le=9);var Me=new Fe;return(V.state=Me).strm=V,Me.wrap=xe,Me.gzhead=null,Me.w_bits=le,Me.w_size=1<<Me.w_bits,Me.w_mask=Me.w_size-1,Me.hash_bits=oe+7,Me.hash_size=1<<Me.hash_bits,Me.hash_mask=Me.hash_size-1,Me.hash_shift=~~((Me.hash_bits+L-1)/L),Me.window=new o.Buf8(2*Me.w_size),Me.head=new o.Buf16(Me.hash_size),Me.prev=new o.Buf16(Me.w_size),Me.lit_bufsize=1<<oe+6,Me.pending_buf_size=4*Me.lit_bufsize,Me.pending_buf=new o.Buf8(Me.pending_buf_size),Me.d_buf=1*Me.lit_bufsize,Me.l_buf=3*Me.lit_bufsize,Me.level=me,Me.strategy=J,Me.method=Te,Le(V)}i=[new Ce(0,0,0,0,function(V,me){var Te=65535;for(Te>V.pending_buf_size-5&&(Te=V.pending_buf_size-5);;){if(V.lookahead<=1){if(Pe(V),V.lookahead===0&&me===h)return q;if(V.lookahead===0)break}V.strstart+=V.lookahead,V.lookahead=0;var le=V.block_start+Te;if((V.strstart===0||V.strstart>=le)&&(V.lookahead=V.strstart-le,V.strstart=le,X(V,!1),V.strm.avail_out===0)||V.strstart-V.block_start>=V.w_size-Y&&(X(V,!1),V.strm.avail_out===0))return q}return V.insert=0,me===p?(X(V,!0),V.strm.avail_out===0?ae:re):(V.strstart>V.block_start&&(X(V,!1),V.strm.avail_out),q)}),new Ce(4,4,8,4,Ne),new Ce(4,5,16,8,Ne),new Ce(4,6,32,32,Ne),new Ce(4,4,16,16,Re),new Ce(8,16,32,32,Re),new Ce(8,16,128,128,Re),new Ce(8,32,128,256,Re),new Ce(32,128,258,1024,Re),new Ce(32,258,258,4096,Re)],a.deflateInit=function(V,me){return Ie(V,me,S,15,8,0)},a.deflateInit2=Ie,a.deflateReset=Le,a.deflateResetKeep=Qe,a.deflateSetHeader=function(V,me){return V&&V.state?V.state.wrap!==2?v:(V.state.gzhead=me,g):v},a.deflate=function(V,me){var Te,le,oe,J;if(!V||!V.state||5<me||me<0)return V?ee(V,v):v;if(le=V.state,!V.output||!V.input&&V.avail_in!==0||le.status===666&&me!==p)return ee(V,V.avail_out===0?-5:v);if(le.strm=V,Te=le.last_flush,le.last_flush=me,le.status===F)if(le.wrap===2)V.adler=0,de(le,31),de(le,139),de(le,8),le.gzhead?(de(le,(le.gzhead.text?1:0)+(le.gzhead.hcrc?2:0)+(le.gzhead.extra?4:0)+(le.gzhead.name?8:0)+(le.gzhead.comment?16:0)),de(le,255&le.gzhead.time),de(le,le.gzhead.time>>8&255),de(le,le.gzhead.time>>16&255),de(le,le.gzhead.time>>24&255),de(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),de(le,255&le.gzhead.os),le.gzhead.extra&&le.gzhead.extra.length&&(de(le,255&le.gzhead.extra.length),de(le,le.gzhead.extra.length>>8&255)),le.gzhead.hcrc&&(V.adler=u(V.adler,le.pending_buf,le.pending,0)),le.gzindex=0,le.status=69):(de(le,0),de(le,0),de(le,0),de(le,0),de(le,0),de(le,le.level===9?2:2<=le.strategy||le.level<2?4:0),de(le,3),le.status=Z);else{var xe=S+(le.w_bits-8<<4)<<8;xe|=(2<=le.strategy||le.level<2?0:le.level<6?1:le.level===6?2:3)<<6,le.strstart!==0&&(xe|=32),xe+=31-xe%31,le.status=Z,be(le,xe),le.strstart!==0&&(be(le,V.adler>>>16),be(le,65535&V.adler)),V.adler=1}if(le.status===69)if(le.gzhead.extra){for(oe=le.pending;le.gzindex<(65535&le.gzhead.extra.length)&&(le.pending!==le.pending_buf_size||(le.gzhead.hcrc&&le.pending>oe&&(V.adler=u(V.adler,le.pending_buf,le.pending-oe,oe)),Q(V),oe=le.pending,le.pending!==le.pending_buf_size));)de(le,255&le.gzhead.extra[le.gzindex]),le.gzindex++;le.gzhead.hcrc&&le.pending>oe&&(V.adler=u(V.adler,le.pending_buf,le.pending-oe,oe)),le.gzindex===le.gzhead.extra.length&&(le.gzindex=0,le.status=73)}else le.status=73;if(le.status===73)if(le.gzhead.name){oe=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>oe&&(V.adler=u(V.adler,le.pending_buf,le.pending-oe,oe)),Q(V),oe=le.pending,le.pending===le.pending_buf_size)){J=1;break}J=le.gzindex<le.gzhead.name.length?255&le.gzhead.name.charCodeAt(le.gzindex++):0,de(le,J)}while(J!==0);le.gzhead.hcrc&&le.pending>oe&&(V.adler=u(V.adler,le.pending_buf,le.pending-oe,oe)),J===0&&(le.gzindex=0,le.status=91)}else le.status=91;if(le.status===91)if(le.gzhead.comment){oe=le.pending;do{if(le.pending===le.pending_buf_size&&(le.gzhead.hcrc&&le.pending>oe&&(V.adler=u(V.adler,le.pending_buf,le.pending-oe,oe)),Q(V),oe=le.pending,le.pending===le.pending_buf_size)){J=1;break}J=le.gzindex<le.gzhead.comment.length?255&le.gzhead.comment.charCodeAt(le.gzindex++):0,de(le,J)}while(J!==0);le.gzhead.hcrc&&le.pending>oe&&(V.adler=u(V.adler,le.pending_buf,le.pending-oe,oe)),J===0&&(le.status=103)}else le.status=103;if(le.status===103&&(le.gzhead.hcrc?(le.pending+2>le.pending_buf_size&&Q(V),le.pending+2<=le.pending_buf_size&&(de(le,255&V.adler),de(le,V.adler>>8&255),V.adler=0,le.status=Z)):le.status=Z),le.pending!==0){if(Q(V),V.avail_out===0)return le.last_flush=-1,g}else if(V.avail_in===0&&ie(me)<=ie(Te)&&me!==p)return ee(V,-5);if(le.status===666&&V.avail_in!==0)return ee(V,-5);if(V.avail_in!==0||le.lookahead!==0||me!==h&&le.status!==666){var Me=le.strategy===2?function(Ee,We){for(var kt;;){if(Ee.lookahead===0&&(Pe(Ee),Ee.lookahead===0)){if(We===h)return q;break}if(Ee.match_length=0,kt=s._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++,kt&&(X(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,We===p?(X(Ee,!0),Ee.strm.avail_out===0?ae:re):Ee.last_lit&&(X(Ee,!1),Ee.strm.avail_out===0)?q:ne}(le,me):le.strategy===3?function(Ee,We){for(var kt,at,_t,jt,Dt=Ee.window;;){if(Ee.lookahead<=B){if(Pe(Ee),Ee.lookahead<=B&&We===h)return q;if(Ee.lookahead===0)break}if(Ee.match_length=0,Ee.lookahead>=L&&0<Ee.strstart&&(at=Dt[_t=Ee.strstart-1])===Dt[++_t]&&at===Dt[++_t]&&at===Dt[++_t]){jt=Ee.strstart+B;do;while(at===Dt[++_t]&&at===Dt[++_t]&&at===Dt[++_t]&&at===Dt[++_t]&&at===Dt[++_t]&&at===Dt[++_t]&&at===Dt[++_t]&&at===Dt[++_t]&&_t<jt);Ee.match_length=B-(jt-_t),Ee.match_length>Ee.lookahead&&(Ee.match_length=Ee.lookahead)}if(Ee.match_length>=L?(kt=s._tr_tally(Ee,1,Ee.match_length-L),Ee.lookahead-=Ee.match_length,Ee.strstart+=Ee.match_length,Ee.match_length=0):(kt=s._tr_tally(Ee,0,Ee.window[Ee.strstart]),Ee.lookahead--,Ee.strstart++),kt&&(X(Ee,!1),Ee.strm.avail_out===0))return q}return Ee.insert=0,We===p?(X(Ee,!0),Ee.strm.avail_out===0?ae:re):Ee.last_lit&&(X(Ee,!1),Ee.strm.avail_out===0)?q:ne}(le,me):i[le.level].func(le,me);if(Me!==ae&&Me!==re||(le.status=666),Me===q||Me===ae)return V.avail_out===0&&(le.last_flush=-1),g;if(Me===ne&&(me===1?s._tr_align(le):me!==5&&(s._tr_stored_block(le,0,0,!1),me===3&&(U(le.head),le.lookahead===0&&(le.strstart=0,le.block_start=0,le.insert=0))),Q(V),V.avail_out===0))return le.last_flush=-1,g}return me!==p?g:le.wrap<=0?1:(le.wrap===2?(de(le,255&V.adler),de(le,V.adler>>8&255),de(le,V.adler>>16&255),de(le,V.adler>>24&255),de(le,255&V.total_in),de(le,V.total_in>>8&255),de(le,V.total_in>>16&255),de(le,V.total_in>>24&255)):(be(le,V.adler>>>16),be(le,65535&V.adler)),Q(V),0<le.wrap&&(le.wrap=-le.wrap),le.pending!==0?g:1)},a.deflateEnd=function(V){var me;return V&&V.state?(me=V.state.status)!==F&&me!==69&&me!==73&&me!==91&&me!==103&&me!==Z&&me!==666?ee(V,v):(V.state=null,me===Z?ee(V,-3):g):v},a.deflateSetDictionary=function(V,me){var Te,le,oe,J,xe,Me,Ee,We,kt=me.length;if(!V||!V.state||(J=(Te=V.state).wrap)===2||J===1&&Te.status!==F||Te.lookahead)return v;for(J===1&&(V.adler=l(V.adler,me,kt,0)),Te.wrap=0,kt>=Te.w_size&&(J===0&&(U(Te.head),Te.strstart=0,Te.block_start=0,Te.insert=0),We=new o.Buf8(Te.w_size),o.arraySet(We,me,kt-Te.w_size,Te.w_size,0),me=We,kt=Te.w_size),xe=V.avail_in,Me=V.next_in,Ee=V.input,V.avail_in=kt,V.next_in=0,V.input=me,Pe(Te);Te.lookahead>=L;){for(le=Te.strstart,oe=Te.lookahead-(L-1);Te.ins_h=(Te.ins_h<<Te.hash_shift^Te.window[le+L-1])&Te.hash_mask,Te.prev[le&Te.w_mask]=Te.head[Te.ins_h],Te.head[Te.ins_h]=le,le++,--oe;);Te.strstart=le,Te.lookahead=L-1,Pe(Te)}return Te.strstart+=Te.lookahead,Te.block_start=Te.strstart,Te.insert=Te.lookahead,Te.lookahead=0,Te.match_length=Te.prev_length=L-1,Te.match_available=0,V.next_in=Me,V.input=Ee,V.avail_in=xe,Te.wrap=J,g},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,a){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,a){r.exports=function(i,o){var s,l,u,d,h,p,g,v,b,_,x,S,E,C,k,R,D,O,L,B,Y,F,Z,q,ne;s=i.state,l=i.next_in,q=i.input,u=l+(i.avail_in-5),d=i.next_out,ne=i.output,h=d-(o-i.avail_out),p=d+(i.avail_out-257),g=s.dmax,v=s.wsize,b=s.whave,_=s.wnext,x=s.window,S=s.hold,E=s.bits,C=s.lencode,k=s.distcode,R=(1<<s.lenbits)-1,D=(1<<s.distbits)-1;e:do{E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),O=C[S&R];t:for(;;){if(S>>>=L=O>>>24,E-=L,(L=O>>>16&255)===0)ne[d++]=65535&O;else{if(!(16&L)){if((64&L)==0){O=C[(65535&O)+(S&(1<<L)-1)];continue t}if(32&L){s.mode=12;break e}i.msg="invalid literal/length code",s.mode=30;break e}B=65535&O,(L&=15)&&(E<L&&(S+=q[l++]<<E,E+=8),B+=S&(1<<L)-1,S>>>=L,E-=L),E<15&&(S+=q[l++]<<E,E+=8,S+=q[l++]<<E,E+=8),O=k[S&D];n:for(;;){if(S>>>=L=O>>>24,E-=L,!(16&(L=O>>>16&255))){if((64&L)==0){O=k[(65535&O)+(S&(1<<L)-1)];continue n}i.msg="invalid distance code",s.mode=30;break e}if(Y=65535&O,E<(L&=15)&&(S+=q[l++]<<E,(E+=8)<L&&(S+=q[l++]<<E,E+=8)),g<(Y+=S&(1<<L)-1)){i.msg="invalid distance too far back",s.mode=30;break e}if(S>>>=L,E-=L,(L=d-h)<Y){if(b<(L=Y-L)&&s.sane){i.msg="invalid distance too far back",s.mode=30;break e}if(Z=x,(F=0)===_){if(F+=v-L,L<B){for(B-=L;ne[d++]=x[F++],--L;);F=d-Y,Z=ne}}else if(_<L){if(F+=v+_-L,(L-=_)<B){for(B-=L;ne[d++]=x[F++],--L;);if(F=0,_<B){for(B-=L=_;ne[d++]=x[F++],--L;);F=d-Y,Z=ne}}}else if(F+=_-L,L<B){for(B-=L;ne[d++]=x[F++],--L;);F=d-Y,Z=ne}for(;2<B;)ne[d++]=Z[F++],ne[d++]=Z[F++],ne[d++]=Z[F++],B-=3;B&&(ne[d++]=Z[F++],1<B&&(ne[d++]=Z[F++]))}else{for(F=d-Y;ne[d++]=ne[F++],ne[d++]=ne[F++],ne[d++]=ne[F++],2<(B-=3););B&&(ne[d++]=ne[F++],1<B&&(ne[d++]=ne[F++]))}break}}break}}while(l<u&&d<p);l-=B=E>>3,S&=(1<<(E-=B<<3))-1,i.next_in=l,i.next_out=d,i.avail_in=l<u?u-l+5:5-(l-u),i.avail_out=d<p?p-d+257:257-(d-p),s.hold=S,s.bits=E}},{}],49:[function(n,r,a){var i=n("../utils/common"),o=n("./adler32"),s=n("./crc32"),l=n("./inffast"),u=n("./inftrees"),d=1,h=2,p=0,g=-2,v=1,b=852,_=592;function x(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function S(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(F){var Z;return F&&F.state?(Z=F.state,F.total_in=F.total_out=Z.total=0,F.msg="",Z.wrap&&(F.adler=1&Z.wrap),Z.mode=v,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new i.Buf32(b),Z.distcode=Z.distdyn=new i.Buf32(_),Z.sane=1,Z.back=-1,p):g}function C(F){var Z;return F&&F.state?((Z=F.state).wsize=0,Z.whave=0,Z.wnext=0,E(F)):g}function k(F,Z){var q,ne;return F&&F.state?(ne=F.state,Z<0?(q=0,Z=-Z):(q=1+(Z>>4),Z<48&&(Z&=15)),Z&&(Z<8||15<Z)?g:(ne.window!==null&&ne.wbits!==Z&&(ne.window=null),ne.wrap=q,ne.wbits=Z,C(F))):g}function R(F,Z){var q,ne;return F?(ne=new S,(F.state=ne).window=null,(q=k(F,Z))!==p&&(F.state=null),q):g}var D,O,L=!0;function B(F){if(L){var Z;for(D=new i.Buf32(512),O=new i.Buf32(32),Z=0;Z<144;)F.lens[Z++]=8;for(;Z<256;)F.lens[Z++]=9;for(;Z<280;)F.lens[Z++]=7;for(;Z<288;)F.lens[Z++]=8;for(u(d,F.lens,0,288,D,0,F.work,{bits:9}),Z=0;Z<32;)F.lens[Z++]=5;u(h,F.lens,0,32,O,0,F.work,{bits:5}),L=!1}F.lencode=D,F.lenbits=9,F.distcode=O,F.distbits=5}function Y(F,Z,q,ne){var ae,re=F.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new i.Buf8(re.wsize)),ne>=re.wsize?(i.arraySet(re.window,Z,q-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(ne<(ae=re.wsize-re.wnext)&&(ae=ne),i.arraySet(re.window,Z,q-ne,ae,re.wnext),(ne-=ae)?(i.arraySet(re.window,Z,q-ne,ne,0),re.wnext=ne,re.whave=re.wsize):(re.wnext+=ae,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=ae))),0}a.inflateReset=C,a.inflateReset2=k,a.inflateResetKeep=E,a.inflateInit=function(F){return R(F,15)},a.inflateInit2=R,a.inflate=function(F,Z){var q,ne,ae,re,ee,ie,U,Q,X,de,be,_e,Pe,Ne,Re,Ce,Fe,Qe,Le,Ie,V,me,Te,le,oe=0,J=new i.Buf8(4),xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return g;(q=F.state).mode===12&&(q.mode=13),ee=F.next_out,ae=F.output,U=F.avail_out,re=F.next_in,ne=F.input,ie=F.avail_in,Q=q.hold,X=q.bits,de=ie,be=U,me=p;e:for(;;)switch(q.mode){case v:if(q.wrap===0){q.mode=13;break}for(;X<16;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(2&q.wrap&&Q===35615){J[q.check=0]=255&Q,J[1]=Q>>>8&255,q.check=s(q.check,J,2,0),X=Q=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&Q)<<8)+(Q>>8))%31){F.msg="incorrect header check",q.mode=30;break}if((15&Q)!=8){F.msg="unknown compression method",q.mode=30;break}if(X-=4,V=8+(15&(Q>>>=4)),q.wbits===0)q.wbits=V;else if(V>q.wbits){F.msg="invalid window size",q.mode=30;break}q.dmax=1<<V,F.adler=q.check=1,q.mode=512&Q?10:12,X=Q=0;break;case 2:for(;X<16;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(q.flags=Q,(255&q.flags)!=8){F.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){F.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=Q>>8&1),512&q.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,q.check=s(q.check,J,2,0)),X=Q=0,q.mode=3;case 3:for(;X<32;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}q.head&&(q.head.time=Q),512&q.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,J[2]=Q>>>16&255,J[3]=Q>>>24&255,q.check=s(q.check,J,4,0)),X=Q=0,q.mode=4;case 4:for(;X<16;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}q.head&&(q.head.xflags=255&Q,q.head.os=Q>>8),512&q.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,q.check=s(q.check,J,2,0)),X=Q=0,q.mode=5;case 5:if(1024&q.flags){for(;X<16;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}q.length=Q,q.head&&(q.head.extra_len=Q),512&q.flags&&(J[0]=255&Q,J[1]=Q>>>8&255,q.check=s(q.check,J,2,0)),X=Q=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ie<(_e=q.length)&&(_e=ie),_e&&(q.head&&(V=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),i.arraySet(q.head.extra,ne,re,_e,V)),512&q.flags&&(q.check=s(q.check,ne,_e,re)),ie-=_e,re+=_e,q.length-=_e),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ie===0)break e;for(_e=0;V=ne[re+_e++],q.head&&V&&q.length<65536&&(q.head.name+=String.fromCharCode(V)),V&&_e<ie;);if(512&q.flags&&(q.check=s(q.check,ne,_e,re)),ie-=_e,re+=_e,V)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ie===0)break e;for(_e=0;V=ne[re+_e++],q.head&&V&&q.length<65536&&(q.head.comment+=String.fromCharCode(V)),V&&_e<ie;);if(512&q.flags&&(q.check=s(q.check,ne,_e,re)),ie-=_e,re+=_e,V)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;X<16;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(Q!==(65535&q.check)){F.msg="header crc mismatch",q.mode=30;break}X=Q=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),F.adler=q.check=0,q.mode=12;break;case 10:for(;X<32;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}F.adler=q.check=x(Q),X=Q=0,q.mode=11;case 11:if(q.havedict===0)return F.next_out=ee,F.avail_out=U,F.next_in=re,F.avail_in=ie,q.hold=Q,q.bits=X,2;F.adler=q.check=1,q.mode=12;case 12:if(Z===5||Z===6)break e;case 13:if(q.last){Q>>>=7&X,X-=7&X,q.mode=27;break}for(;X<3;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}switch(q.last=1&Q,X-=1,3&(Q>>>=1)){case 0:q.mode=14;break;case 1:if(B(q),q.mode=20,Z!==6)break;Q>>>=2,X-=2;break e;case 2:q.mode=17;break;case 3:F.msg="invalid block type",q.mode=30}Q>>>=2,X-=2;break;case 14:for(Q>>>=7&X,X-=7&X;X<32;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if((65535&Q)!=(Q>>>16^65535)){F.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&Q,X=Q=0,q.mode=15,Z===6)break e;case 15:q.mode=16;case 16:if(_e=q.length){if(ie<_e&&(_e=ie),U<_e&&(_e=U),_e===0)break e;i.arraySet(ae,ne,re,_e,ee),ie-=_e,re+=_e,U-=_e,ee+=_e,q.length-=_e;break}q.mode=12;break;case 17:for(;X<14;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(q.nlen=257+(31&Q),Q>>>=5,X-=5,q.ndist=1+(31&Q),Q>>>=5,X-=5,q.ncode=4+(15&Q),Q>>>=4,X-=4,286<q.nlen||30<q.ndist){F.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;X<3;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}q.lens[xe[q.have++]]=7&Q,Q>>>=3,X-=3}for(;q.have<19;)q.lens[xe[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Te={bits:q.lenbits},me=u(0,q.lens,0,19,q.lencode,0,q.work,Te),q.lenbits=Te.bits,me){F.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Ce=(oe=q.lencode[Q&(1<<q.lenbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=X);){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(Fe<16)Q>>>=Re,X-=Re,q.lens[q.have++]=Fe;else{if(Fe===16){for(le=Re+2;X<le;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(Q>>>=Re,X-=Re,q.have===0){F.msg="invalid bit length repeat",q.mode=30;break}V=q.lens[q.have-1],_e=3+(3&Q),Q>>>=2,X-=2}else if(Fe===17){for(le=Re+3;X<le;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}X-=Re,V=0,_e=3+(7&(Q>>>=Re)),Q>>>=3,X-=3}else{for(le=Re+7;X<le;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}X-=Re,V=0,_e=11+(127&(Q>>>=Re)),Q>>>=7,X-=7}if(q.have+_e>q.nlen+q.ndist){F.msg="invalid bit length repeat",q.mode=30;break}for(;_e--;)q.lens[q.have++]=V}}if(q.mode===30)break;if(q.lens[256]===0){F.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Te={bits:q.lenbits},me=u(d,q.lens,0,q.nlen,q.lencode,0,q.work,Te),q.lenbits=Te.bits,me){F.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Te={bits:q.distbits},me=u(h,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Te),q.distbits=Te.bits,me){F.msg="invalid distances set",q.mode=30;break}if(q.mode=20,Z===6)break e;case 20:q.mode=21;case 21:if(6<=ie&&258<=U){F.next_out=ee,F.avail_out=U,F.next_in=re,F.avail_in=ie,q.hold=Q,q.bits=X,l(F,be),ee=F.next_out,ae=F.output,U=F.avail_out,re=F.next_in,ne=F.input,ie=F.avail_in,Q=q.hold,X=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Ce=(oe=q.lencode[Q&(1<<q.lenbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=X);){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(Ce&&(240&Ce)==0){for(Qe=Re,Le=Ce,Ie=Fe;Ce=(oe=q.lencode[Ie+((Q&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Fe=65535&oe,!(Qe+(Re=oe>>>24)<=X);){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}Q>>>=Qe,X-=Qe,q.back+=Qe}if(Q>>>=Re,X-=Re,q.back+=Re,q.length=Fe,Ce===0){q.mode=26;break}if(32&Ce){q.back=-1,q.mode=12;break}if(64&Ce){F.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Ce,q.mode=22;case 22:if(q.extra){for(le=q.extra;X<le;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}q.length+=Q&(1<<q.extra)-1,Q>>>=q.extra,X-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Ce=(oe=q.distcode[Q&(1<<q.distbits)-1])>>>16&255,Fe=65535&oe,!((Re=oe>>>24)<=X);){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if((240&Ce)==0){for(Qe=Re,Le=Ce,Ie=Fe;Ce=(oe=q.distcode[Ie+((Q&(1<<Qe+Le)-1)>>Qe)])>>>16&255,Fe=65535&oe,!(Qe+(Re=oe>>>24)<=X);){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}Q>>>=Qe,X-=Qe,q.back+=Qe}if(Q>>>=Re,X-=Re,q.back+=Re,64&Ce){F.msg="invalid distance code",q.mode=30;break}q.offset=Fe,q.extra=15&Ce,q.mode=24;case 24:if(q.extra){for(le=q.extra;X<le;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}q.offset+=Q&(1<<q.extra)-1,Q>>>=q.extra,X-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){F.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(U===0)break e;if(_e=be-U,q.offset>_e){if((_e=q.offset-_e)>q.whave&&q.sane){F.msg="invalid distance too far back",q.mode=30;break}Pe=_e>q.wnext?(_e-=q.wnext,q.wsize-_e):q.wnext-_e,_e>q.length&&(_e=q.length),Ne=q.window}else Ne=ae,Pe=ee-q.offset,_e=q.length;for(U<_e&&(_e=U),U-=_e,q.length-=_e;ae[ee++]=Ne[Pe++],--_e;);q.length===0&&(q.mode=21);break;case 26:if(U===0)break e;ae[ee++]=q.length,U--,q.mode=21;break;case 27:if(q.wrap){for(;X<32;){if(ie===0)break e;ie--,Q|=ne[re++]<<X,X+=8}if(be-=U,F.total_out+=be,q.total+=be,be&&(F.adler=q.check=q.flags?s(q.check,ae,be,ee-be):o(q.check,ae,be,ee-be)),be=U,(q.flags?Q:x(Q))!==q.check){F.msg="incorrect data check",q.mode=30;break}X=Q=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;X<32;){if(ie===0)break e;ie--,Q+=ne[re++]<<X,X+=8}if(Q!==(4294967295&q.total)){F.msg="incorrect length check",q.mode=30;break}X=Q=0}q.mode=29;case 29:me=1;break e;case 30:me=-3;break e;case 31:return-4;case 32:default:return g}return F.next_out=ee,F.avail_out=U,F.next_in=re,F.avail_in=ie,q.hold=Q,q.bits=X,(q.wsize||be!==F.avail_out&&q.mode<30&&(q.mode<27||Z!==4))&&Y(F,F.output,F.next_out,be-F.avail_out)?(q.mode=31,-4):(de-=F.avail_in,be-=F.avail_out,F.total_in+=de,F.total_out+=be,q.total+=be,q.wrap&&be&&(F.adler=q.check=q.flags?s(q.check,ae,be,F.next_out-be):o(q.check,ae,be,F.next_out-be)),F.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(de==0&&be===0||Z===4)&&me===p&&(me=-5),me)},a.inflateEnd=function(F){if(!F||!F.state)return g;var Z=F.state;return Z.window&&(Z.window=null),F.state=null,p},a.inflateGetHeader=function(F,Z){var q;return F&&F.state?(2&(q=F.state).wrap)==0?g:((q.head=Z).done=!1,p):g},a.inflateSetDictionary=function(F,Z){var q,ne=Z.length;return F&&F.state?(q=F.state).wrap!==0&&q.mode!==11?g:q.mode===11&&o(1,Z,ne,0)!==q.check?-3:Y(F,Z,ne,ne)?(q.mode=31,-4):(q.havedict=1,p):g},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,a){var i=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(d,h,p,g,v,b,_,x){var S,E,C,k,R,D,O,L,B,Y=x.bits,F=0,Z=0,q=0,ne=0,ae=0,re=0,ee=0,ie=0,U=0,Q=0,X=null,de=0,be=new i.Buf16(16),_e=new i.Buf16(16),Pe=null,Ne=0;for(F=0;F<=15;F++)be[F]=0;for(Z=0;Z<g;Z++)be[h[p+Z]]++;for(ae=Y,ne=15;1<=ne&&be[ne]===0;ne--);if(ne<ae&&(ae=ne),ne===0)return v[b++]=20971520,v[b++]=20971520,x.bits=1,0;for(q=1;q<ne&&be[q]===0;q++);for(ae<q&&(ae=q),F=ie=1;F<=15;F++)if(ie<<=1,(ie-=be[F])<0)return-1;if(0<ie&&(d===0||ne!==1))return-1;for(_e[1]=0,F=1;F<15;F++)_e[F+1]=_e[F]+be[F];for(Z=0;Z<g;Z++)h[p+Z]!==0&&(_[_e[h[p+Z]]++]=Z);if(D=d===0?(X=Pe=_,19):d===1?(X=o,de-=257,Pe=s,Ne-=257,256):(X=l,Pe=u,-1),F=q,R=b,ee=Z=Q=0,C=-1,k=(U=1<<(re=ae))-1,d===1&&852<U||d===2&&592<U)return 1;for(;;){for(O=F-ee,B=_[Z]<D?(L=0,_[Z]):_[Z]>D?(L=Pe[Ne+_[Z]],X[de+_[Z]]):(L=96,0),S=1<<F-ee,q=E=1<<re;v[R+(Q>>ee)+(E-=S)]=O<<24|L<<16|B|0,E!==0;);for(S=1<<F-1;Q&S;)S>>=1;if(S!==0?(Q&=S-1,Q+=S):Q=0,Z++,--be[F]==0){if(F===ne)break;F=h[p+_[Z]]}if(ae<F&&(Q&k)!==C){for(ee===0&&(ee=ae),R+=q,ie=1<<(re=F-ee);re+ee<ne&&!((ie-=be[re+ee])<=0);)re++,ie<<=1;if(U+=1<<re,d===1&&852<U||d===2&&592<U)return 1;v[C=Q&k]=ae<<24|re<<16|R-b|0}}return Q!==0&&(v[R+Q]=F-ee<<24|64<<16|0),x.bits=ae,0}},{"../utils/common":41}],51:[function(n,r,a){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,a){var i=n("../utils/common"),o=0,s=1;function l(oe){for(var J=oe.length;0<=--J;)oe[J]=0}var u=0,d=29,h=256,p=h+1+d,g=30,v=19,b=2*p+1,_=15,x=16,S=7,E=256,C=16,k=17,R=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(p+2));l(Y);var F=new Array(2*g);l(F);var Z=new Array(512);l(Z);var q=new Array(256);l(q);var ne=new Array(d);l(ne);var ae,re,ee,ie=new Array(g);function U(oe,J,xe,Me,Ee){this.static_tree=oe,this.extra_bits=J,this.extra_base=xe,this.elems=Me,this.max_length=Ee,this.has_stree=oe&&oe.length}function Q(oe,J){this.dyn_tree=oe,this.max_code=0,this.stat_desc=J}function X(oe){return oe<256?Z[oe]:Z[256+(oe>>>7)]}function de(oe,J){oe.pending_buf[oe.pending++]=255&J,oe.pending_buf[oe.pending++]=J>>>8&255}function be(oe,J,xe){oe.bi_valid>x-xe?(oe.bi_buf|=J<<oe.bi_valid&65535,de(oe,oe.bi_buf),oe.bi_buf=J>>x-oe.bi_valid,oe.bi_valid+=xe-x):(oe.bi_buf|=J<<oe.bi_valid&65535,oe.bi_valid+=xe)}function _e(oe,J,xe){be(oe,xe[2*J],xe[2*J+1])}function Pe(oe,J){for(var xe=0;xe|=1&oe,oe>>>=1,xe<<=1,0<--J;);return xe>>>1}function Ne(oe,J,xe){var Me,Ee,We=new Array(_+1),kt=0;for(Me=1;Me<=_;Me++)We[Me]=kt=kt+xe[Me-1]<<1;for(Ee=0;Ee<=J;Ee++){var at=oe[2*Ee+1];at!==0&&(oe[2*Ee]=Pe(We[at]++,at))}}function Re(oe){var J;for(J=0;J<p;J++)oe.dyn_ltree[2*J]=0;for(J=0;J<g;J++)oe.dyn_dtree[2*J]=0;for(J=0;J<v;J++)oe.bl_tree[2*J]=0;oe.dyn_ltree[2*E]=1,oe.opt_len=oe.static_len=0,oe.last_lit=oe.matches=0}function Ce(oe){8<oe.bi_valid?de(oe,oe.bi_buf):0<oe.bi_valid&&(oe.pending_buf[oe.pending++]=oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0}function Fe(oe,J,xe,Me){var Ee=2*J,We=2*xe;return oe[Ee]<oe[We]||oe[Ee]===oe[We]&&Me[J]<=Me[xe]}function Qe(oe,J,xe){for(var Me=oe.heap[xe],Ee=xe<<1;Ee<=oe.heap_len&&(Ee<oe.heap_len&&Fe(J,oe.heap[Ee+1],oe.heap[Ee],oe.depth)&&Ee++,!Fe(J,Me,oe.heap[Ee],oe.depth));)oe.heap[xe]=oe.heap[Ee],xe=Ee,Ee<<=1;oe.heap[xe]=Me}function Le(oe,J,xe){var Me,Ee,We,kt,at=0;if(oe.last_lit!==0)for(;Me=oe.pending_buf[oe.d_buf+2*at]<<8|oe.pending_buf[oe.d_buf+2*at+1],Ee=oe.pending_buf[oe.l_buf+at],at++,Me===0?_e(oe,Ee,J):(_e(oe,(We=q[Ee])+h+1,J),(kt=D[We])!==0&&be(oe,Ee-=ne[We],kt),_e(oe,We=X(--Me),xe),(kt=O[We])!==0&&be(oe,Me-=ie[We],kt)),at<oe.last_lit;);_e(oe,E,J)}function Ie(oe,J){var xe,Me,Ee,We=J.dyn_tree,kt=J.stat_desc.static_tree,at=J.stat_desc.has_stree,_t=J.stat_desc.elems,jt=-1;for(oe.heap_len=0,oe.heap_max=b,xe=0;xe<_t;xe++)We[2*xe]!==0?(oe.heap[++oe.heap_len]=jt=xe,oe.depth[xe]=0):We[2*xe+1]=0;for(;oe.heap_len<2;)We[2*(Ee=oe.heap[++oe.heap_len]=jt<2?++jt:0)]=1,oe.depth[Ee]=0,oe.opt_len--,at&&(oe.static_len-=kt[2*Ee+1]);for(J.max_code=jt,xe=oe.heap_len>>1;1<=xe;xe--)Qe(oe,We,xe);for(Ee=_t;xe=oe.heap[1],oe.heap[1]=oe.heap[oe.heap_len--],Qe(oe,We,1),Me=oe.heap[1],oe.heap[--oe.heap_max]=xe,oe.heap[--oe.heap_max]=Me,We[2*Ee]=We[2*xe]+We[2*Me],oe.depth[Ee]=(oe.depth[xe]>=oe.depth[Me]?oe.depth[xe]:oe.depth[Me])+1,We[2*xe+1]=We[2*Me+1]=Ee,oe.heap[1]=Ee++,Qe(oe,We,1),2<=oe.heap_len;);oe.heap[--oe.heap_max]=oe.heap[1],function(Dt,Gt){var ye,I,G,fe,Oe,ve,ke=Gt.dyn_tree,ce=Gt.max_code,ft=Gt.stat_desc.static_tree,vt=Gt.stat_desc.has_stree,M=Gt.stat_desc.extra_bits,Be=Gt.stat_desc.extra_base,tt=Gt.stat_desc.max_length,ge=0;for(fe=0;fe<=_;fe++)Dt.bl_count[fe]=0;for(ke[2*Dt.heap[Dt.heap_max]+1]=0,ye=Dt.heap_max+1;ye<b;ye++)tt<(fe=ke[2*ke[2*(I=Dt.heap[ye])+1]+1]+1)&&(fe=tt,ge++),ke[2*I+1]=fe,ce<I||(Dt.bl_count[fe]++,Oe=0,Be<=I&&(Oe=M[I-Be]),ve=ke[2*I],Dt.opt_len+=ve*(fe+Oe),vt&&(Dt.static_len+=ve*(ft[2*I+1]+Oe)));if(ge!==0){do{for(fe=tt-1;Dt.bl_count[fe]===0;)fe--;Dt.bl_count[fe]--,Dt.bl_count[fe+1]+=2,Dt.bl_count[tt]--,ge-=2}while(0<ge);for(fe=tt;fe!==0;fe--)for(I=Dt.bl_count[fe];I!==0;)ce<(G=Dt.heap[--ye])||(ke[2*G+1]!==fe&&(Dt.opt_len+=(fe-ke[2*G+1])*ke[2*G],ke[2*G+1]=fe),I--)}}(oe,J),Ne(We,jt,oe.bl_count)}function V(oe,J,xe){var Me,Ee,We=-1,kt=J[1],at=0,_t=7,jt=4;for(kt===0&&(_t=138,jt=3),J[2*(xe+1)+1]=65535,Me=0;Me<=xe;Me++)Ee=kt,kt=J[2*(Me+1)+1],++at<_t&&Ee===kt||(at<jt?oe.bl_tree[2*Ee]+=at:Ee!==0?(Ee!==We&&oe.bl_tree[2*Ee]++,oe.bl_tree[2*C]++):at<=10?oe.bl_tree[2*k]++:oe.bl_tree[2*R]++,We=Ee,jt=(at=0)===kt?(_t=138,3):Ee===kt?(_t=6,3):(_t=7,4))}function me(oe,J,xe){var Me,Ee,We=-1,kt=J[1],at=0,_t=7,jt=4;for(kt===0&&(_t=138,jt=3),Me=0;Me<=xe;Me++)if(Ee=kt,kt=J[2*(Me+1)+1],!(++at<_t&&Ee===kt)){if(at<jt)for(;_e(oe,Ee,oe.bl_tree),--at!=0;);else Ee!==0?(Ee!==We&&(_e(oe,Ee,oe.bl_tree),at--),_e(oe,C,oe.bl_tree),be(oe,at-3,2)):at<=10?(_e(oe,k,oe.bl_tree),be(oe,at-3,3)):(_e(oe,R,oe.bl_tree),be(oe,at-11,7));We=Ee,jt=(at=0)===kt?(_t=138,3):Ee===kt?(_t=6,3):(_t=7,4)}}l(ie);var Te=!1;function le(oe,J,xe,Me){be(oe,(u<<1)+(Me?1:0),3),function(Ee,We,kt,at){Ce(Ee),de(Ee,kt),de(Ee,~kt),i.arraySet(Ee.pending_buf,Ee.window,We,kt,Ee.pending),Ee.pending+=kt}(oe,J,xe)}a._tr_init=function(oe){Te||(function(){var J,xe,Me,Ee,We,kt=new Array(_+1);for(Ee=Me=0;Ee<d-1;Ee++)for(ne[Ee]=Me,J=0;J<1<<D[Ee];J++)q[Me++]=Ee;for(q[Me-1]=Ee,Ee=We=0;Ee<16;Ee++)for(ie[Ee]=We,J=0;J<1<<O[Ee];J++)Z[We++]=Ee;for(We>>=7;Ee<g;Ee++)for(ie[Ee]=We<<7,J=0;J<1<<O[Ee]-7;J++)Z[256+We++]=Ee;for(xe=0;xe<=_;xe++)kt[xe]=0;for(J=0;J<=143;)Y[2*J+1]=8,J++,kt[8]++;for(;J<=255;)Y[2*J+1]=9,J++,kt[9]++;for(;J<=279;)Y[2*J+1]=7,J++,kt[7]++;for(;J<=287;)Y[2*J+1]=8,J++,kt[8]++;for(Ne(Y,p+1,kt),J=0;J<g;J++)F[2*J+1]=5,F[2*J]=Pe(J,5);ae=new U(Y,D,h+1,p,_),re=new U(F,O,0,g,_),ee=new U(new Array(0),L,0,v,S)}(),Te=!0),oe.l_desc=new Q(oe.dyn_ltree,ae),oe.d_desc=new Q(oe.dyn_dtree,re),oe.bl_desc=new Q(oe.bl_tree,ee),oe.bi_buf=0,oe.bi_valid=0,Re(oe)},a._tr_stored_block=le,a._tr_flush_block=function(oe,J,xe,Me){var Ee,We,kt=0;0<oe.level?(oe.strm.data_type===2&&(oe.strm.data_type=function(at){var _t,jt=4093624447;for(_t=0;_t<=31;_t++,jt>>>=1)if(1&jt&&at.dyn_ltree[2*_t]!==0)return o;if(at.dyn_ltree[18]!==0||at.dyn_ltree[20]!==0||at.dyn_ltree[26]!==0)return s;for(_t=32;_t<h;_t++)if(at.dyn_ltree[2*_t]!==0)return s;return o}(oe)),Ie(oe,oe.l_desc),Ie(oe,oe.d_desc),kt=function(at){var _t;for(V(at,at.dyn_ltree,at.l_desc.max_code),V(at,at.dyn_dtree,at.d_desc.max_code),Ie(at,at.bl_desc),_t=v-1;3<=_t&&at.bl_tree[2*B[_t]+1]===0;_t--);return at.opt_len+=3*(_t+1)+5+5+4,_t}(oe),Ee=oe.opt_len+3+7>>>3,(We=oe.static_len+3+7>>>3)<=Ee&&(Ee=We)):Ee=We=xe+5,xe+4<=Ee&&J!==-1?le(oe,J,xe,Me):oe.strategy===4||We===Ee?(be(oe,2+(Me?1:0),3),Le(oe,Y,F)):(be(oe,4+(Me?1:0),3),function(at,_t,jt,Dt){var Gt;for(be(at,_t-257,5),be(at,jt-1,5),be(at,Dt-4,4),Gt=0;Gt<Dt;Gt++)be(at,at.bl_tree[2*B[Gt]+1],3);me(at,at.dyn_ltree,_t-1),me(at,at.dyn_dtree,jt-1)}(oe,oe.l_desc.max_code+1,oe.d_desc.max_code+1,kt+1),Le(oe,oe.dyn_ltree,oe.dyn_dtree)),Re(oe),Me&&Ce(oe)},a._tr_tally=function(oe,J,xe){return oe.pending_buf[oe.d_buf+2*oe.last_lit]=J>>>8&255,oe.pending_buf[oe.d_buf+2*oe.last_lit+1]=255&J,oe.pending_buf[oe.l_buf+oe.last_lit]=255&xe,oe.last_lit++,J===0?oe.dyn_ltree[2*xe]++:(oe.matches++,J--,oe.dyn_ltree[2*(q[xe]+h+1)]++,oe.dyn_dtree[2*X(J)]++),oe.last_lit===oe.lit_bufsize-1},a._tr_align=function(oe){be(oe,2,3),_e(oe,E,Y),function(J){J.bi_valid===16?(de(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)}(oe)}},{"../utils/common":41}],53:[function(n,r,a){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,a){(function(i){(function(o,s){if(!o.setImmediate){var l,u,d,h,p=1,g={},v=!1,b=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(C){Xr.nextTick(function(){S(C)})}:function(){if(o.postMessage&&!o.importScripts){var C=!0,k=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=k,C}}()?(h="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(h+C,"*")}):o.MessageChannel?((d=new MessageChannel).port1.onmessage=function(C){S(C.data)},function(C){d.port2.postMessage(C)}):b&&"onreadystatechange"in b.createElement("script")?(u=b.documentElement,function(C){var k=b.createElement("script");k.onreadystatechange=function(){S(C),k.onreadystatechange=null,u.removeChild(k),k=null},u.appendChild(k)}):function(C){setTimeout(S,0,C)},_.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var k=new Array(arguments.length-1),R=0;R<k.length;R++)k[R]=arguments[R+1];var D={callback:C,args:k};return g[p]=D,l(p),p++},_.clearImmediate=x}function x(C){delete g[C]}function S(C){if(v)setTimeout(S,0,C);else{var k=g[C];if(k){v=!0;try{(function(R){var D=R.callback,O=R.args;switch(O.length){case 0:D();break;case 1:D(O[0]);break;case 2:D(O[0],O[1]);break;case 3:D(O[0],O[1],O[2]);break;default:D.apply(s,O)}})(k)}finally{x(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(h)===0&&S(+C.data.slice(h.length))}})(typeof self>"u"?i===void 0?this:i:self)}).call(this,typeof ld<"u"?ld:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(OS)),OS.exports}var jte=Dte();const TP=si(jte),jv=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,a=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,i)).toFixed(r))+" "+a[i]},Zn=e=>{let t=e.replace(/\/+/g,"/");return t.startsWith("/")||(t="/"+t),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t},Vs=(...e)=>Zn(e.map(t=>t.trim()).filter(Boolean).join("/")),dg=e=>{const t=Zn(e);if(t==="/")return"/";const n=t.lastIndexOf("/");return n===-1||n===0?"/":t.substring(0,n)},ha=e=>{const t=Zn(e);return t==="/"?"":t.substring(t.lastIndexOf("/")+1)},b0=(e,t)=>Zn(e==="/"?`/${t}`:`${e}/${t}`);var DS,h4;function Mte(){if(h4)return DS;h4=1;var e=function(t){if(t=t||{},this.Promise=t.Promise||Promise,this.queues=Object.create(null),this.domainReentrant=t.domainReentrant||!1,this.domainReentrant){if(typeof Xr>"u"||typeof Xr.domain>"u")throw new Error("Domain-reentrant locks require `process.domain` to exist. Please flip `opts.domainReentrant = false`, use a NodeJS version that still implements Domain, or install a browser polyfill.");this.domains=Object.create(null)}this.timeout=t.timeout||e.DEFAULT_TIMEOUT,this.maxOccupationTime=t.maxOccupationTime||e.DEFAULT_MAX_OCCUPATION_TIME,this.maxExecutionTime=t.maxExecutionTime||e.DEFAULT_MAX_EXECUTION_TIME,t.maxPending===1/0||Number.isInteger(t.maxPending)&&t.maxPending>=0?this.maxPending=t.maxPending:this.maxPending=e.DEFAULT_MAX_PENDING};return e.DEFAULT_TIMEOUT=0,e.DEFAULT_MAX_OCCUPATION_TIME=0,e.DEFAULT_MAX_EXECUTION_TIME=0,e.DEFAULT_MAX_PENDING=1e3,e.prototype.acquire=function(t,n,r,a){if(Array.isArray(t))return this._acquireBatch(t,n,r,a);if(typeof n!="function")throw new Error("You must pass a function to execute");var i=null,o=null,s=null;typeof r!="function"&&(a=r,r=null,s=new this.Promise(function(E,C){i=E,o=C})),a=a||{};var l=!1,u=null,d=null,h=null,p=this,g=function(E,C,k){d&&(clearTimeout(d),d=null),h&&(clearTimeout(h),h=null),E&&(p.queues[t]&&p.queues[t].length===0&&delete p.queues[t],p.domainReentrant&&delete p.domains[t]),l||(s?C?o(C):i(k):typeof r=="function"&&r(C,k),l=!0),E&&p.queues[t]&&p.queues[t].length>0&&p.queues[t].shift()()},v=function(E){if(l)return g(E);u&&(clearTimeout(u),u=null),p.domainReentrant&&E&&(p.domains[t]=Xr.domain);var C=a.maxExecutionTime||p.maxExecutionTime;if(C&&(h=setTimeout(function(){p.queues[t]&&g(E,new Error("Maximum execution time is exceeded "+t))},C)),n.length===1){var k=!1;try{n(function(R,D){k||(k=!0,g(E,R,D))})}catch(R){k||(k=!0,g(E,R))}}else p._promiseTry(function(){return n()}).then(function(R){g(E,void 0,R)},function(R){g(E,R)})};p.domainReentrant&&Xr.domain&&(v=Xr.domain.bind(v));var b=a.maxPending||p.maxPending;if(!p.queues[t])p.queues[t]=[],v(!0);else if(p.domainReentrant&&Xr.domain&&Xr.domain===p.domains[t])v(!1);else if(p.queues[t].length>=b)g(!1,new Error("Too many pending tasks in queue "+t));else{var _=function(){v(!0)};a.skipQueue?p.queues[t].unshift(_):p.queues[t].push(_);var x=a.timeout||p.timeout;x&&(u=setTimeout(function(){u=null,g(!1,new Error("async-lock timed out in queue "+t))},x))}var S=a.maxOccupationTime||p.maxOccupationTime;if(S&&(d=setTimeout(function(){p.queues[t]&&g(!1,new Error("Maximum occupation time is exceeded in queue "+t))},S)),s)return s},e.prototype._acquireBatch=function(t,n,r,a){typeof r!="function"&&(a=r,r=null);var i=this,o=function(l,u){return function(d){i.acquire(l,u,d,a)}},s=t.reduceRight(function(l,u){return o(u,l)},n);if(typeof r=="function")s(r);else return new this.Promise(function(l,u){s.length===1?s(function(d,h){d?u(d):l(h)}):l(s())})},e.prototype.isBusy=function(t){return t?!!this.queues[t]:Object.keys(this.queues).length>0},e.prototype._promiseTry=function(t){try{return this.Promise.resolve(t())}catch(n){return this.Promise.reject(n)}},DS=e,DS}var jS,p4;function Pte(){return p4||(p4=1,jS=Mte()),jS}var Fte=Pte();const v0=si(Fte);var Sb={exports:{}},m4;function Lte(){return m4||(m4=1,typeof Object.create=="function"?Sb.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:Sb.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}),Sb.exports}var MS,g4;function $te(){if(g4)return MS;g4=1;var e=Sk().Buffer;function t(n,r){this._block=e.alloc(n),this._finalSize=r,this._blockSize=n,this._len=0}return t.prototype.update=function(n,r){typeof n=="string"&&(r=r||"utf8",n=e.from(n,r));for(var a=this._block,i=this._blockSize,o=n.length,s=this._len,l=0;l<o;){for(var u=s%i,d=Math.min(o-l,i-u),h=0;h<d;h++)a[u+h]=n[l+h];s+=d,l+=d,s%i===0&&this._update(a)}return this._len+=o,this},t.prototype.digest=function(n){var r=this._len%this._blockSize;this._block[r]=128,this._block.fill(0,r+1),r>=this._finalSize&&(this._update(this._block),this._block.fill(0));var a=this._len*8;if(a<=4294967295)this._block.writeUInt32BE(a,this._blockSize-4);else{var i=(a&4294967295)>>>0,o=(a-i)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(i,this._blockSize-4)}this._update(this._block);var s=this._hash();return n?s.toString(n):s},t.prototype._update=function(){throw new Error("_update must be implemented by subclass")},MS=t,MS}var PS,y4;function Bte(){if(y4)return PS;y4=1;var e=Lte(),t=$te(),n=Sk().Buffer,r=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function i(){this.init(),this._w=a,t.call(this,64,56)}e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function o(d){return d<<1|d>>>31}function s(d){return d<<5|d>>>27}function l(d){return d<<30|d>>>2}function u(d,h,p,g){return d===0?h&p|~h&g:d===2?h&p|h&g|p&g:h^p^g}return i.prototype._update=function(d){for(var h=this._w,p=this._a|0,g=this._b|0,v=this._c|0,b=this._d|0,_=this._e|0,x=0;x<16;++x)h[x]=d.readInt32BE(x*4);for(;x<80;++x)h[x]=o(h[x-3]^h[x-8]^h[x-14]^h[x-16]);for(var S=0;S<80;++S){var E=~~(S/20),C=s(p)+u(E,g,v,b)+_+h[S]+r[E]|0;_=b,b=v,v=l(g),g=p,p=C}this._a=p+this._a|0,this._b=g+this._b|0,this._c=v+this._c|0,this._d=b+this._d|0,this._e=_+this._e|0},i.prototype._hash=function(){var d=n.allocUnsafe(20);return d.writeInt32BE(this._a|0,0),d.writeInt32BE(this._b|0,4),d.writeInt32BE(this._c|0,8),d.writeInt32BE(this._d|0,12),d.writeInt32BE(this._e|0,16),d},PS=i,PS}var zte=Bte();const AP=si(zte);var FS,b4;function Ute(){if(b4)return FS;b4=1;function e(a){if(typeof a!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(a))}function t(a,i){for(var o="",s=0,l=-1,u=0,d,h=0;h<=a.length;++h){if(h<a.length)d=a.charCodeAt(h);else{if(d===47)break;d=47}if(d===47){if(!(l===h-1||u===1))if(l!==h-1&&u===2){if(o.length<2||s!==2||o.charCodeAt(o.length-1)!==46||o.charCodeAt(o.length-2)!==46){if(o.length>2){var p=o.lastIndexOf("/");if(p!==o.length-1){p===-1?(o="",s=0):(o=o.slice(0,p),s=o.length-1-o.lastIndexOf("/")),l=h,u=0;continue}}else if(o.length===2||o.length===1){o="",s=0,l=h,u=0;continue}}i&&(o.length>0?o+="/..":o="..",s=2)}else o.length>0?o+="/"+a.slice(l+1,h):o=a.slice(l+1,h),s=h-l-1;l=h,u=0}else d===46&&u!==-1?++u:u=-1}return o}function n(a,i){var o=i.dir||i.root,s=i.base||(i.name||"")+(i.ext||"");return o?o===i.root?o+s:o+a+s:s}var r={resolve:function(){for(var i="",o=!1,s,l=arguments.length-1;l>=-1&&!o;l--){var u;l>=0?u=arguments[l]:(s===void 0&&(s=Xr.cwd()),u=s),e(u),u.length!==0&&(i=u+"/"+i,o=u.charCodeAt(0)===47)}return i=t(i,!o),o?i.length>0?"/"+i:"/":i.length>0?i:"."},normalize:function(i){if(e(i),i.length===0)return".";var o=i.charCodeAt(0)===47,s=i.charCodeAt(i.length-1)===47;return i=t(i,!o),i.length===0&&!o&&(i="."),i.length>0&&s&&(i+="/"),o?"/"+i:i},isAbsolute:function(i){return e(i),i.length>0&&i.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var i,o=0;o<arguments.length;++o){var s=arguments[o];e(s),s.length>0&&(i===void 0?i=s:i+="/"+s)}return i===void 0?".":r.normalize(i)},relative:function(i,o){if(e(i),e(o),i===o||(i=r.resolve(i),o=r.resolve(o),i===o))return"";for(var s=1;s<i.length&&i.charCodeAt(s)===47;++s);for(var l=i.length,u=l-s,d=1;d<o.length&&o.charCodeAt(d)===47;++d);for(var h=o.length,p=h-d,g=u<p?u:p,v=-1,b=0;b<=g;++b){if(b===g){if(p>g){if(o.charCodeAt(d+b)===47)return o.slice(d+b+1);if(b===0)return o.slice(d+b)}else u>g&&(i.charCodeAt(s+b)===47?v=b:b===0&&(v=0));break}var _=i.charCodeAt(s+b),x=o.charCodeAt(d+b);if(_!==x)break;_===47&&(v=b)}var S="";for(b=s+v+1;b<=l;++b)(b===l||i.charCodeAt(b)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+o.slice(d+v):(d+=v,o.charCodeAt(d)===47&&++d,o.slice(d))},_makeLong:function(i){return i},dirname:function(i){if(e(i),i.length===0)return".";for(var o=i.charCodeAt(0),s=o===47,l=-1,u=!0,d=i.length-1;d>=1;--d)if(o=i.charCodeAt(d),o===47){if(!u){l=d;break}}else u=!1;return l===-1?s?"/":".":s&&l===1?"//":i.slice(0,l)},basename:function(i,o){if(o!==void 0&&typeof o!="string")throw new TypeError('"ext" argument must be a string');e(i);var s=0,l=-1,u=!0,d;if(o!==void 0&&o.length>0&&o.length<=i.length){if(o.length===i.length&&o===i)return"";var h=o.length-1,p=-1;for(d=i.length-1;d>=0;--d){var g=i.charCodeAt(d);if(g===47){if(!u){s=d+1;break}}else p===-1&&(u=!1,p=d+1),h>=0&&(g===o.charCodeAt(h)?--h===-1&&(l=d):(h=-1,l=p))}return s===l?l=p:l===-1&&(l=i.length),i.slice(s,l)}else{for(d=i.length-1;d>=0;--d)if(i.charCodeAt(d)===47){if(!u){s=d+1;break}}else l===-1&&(u=!1,l=d+1);return l===-1?"":i.slice(s,l)}},extname:function(i){e(i);for(var o=-1,s=0,l=-1,u=!0,d=0,h=i.length-1;h>=0;--h){var p=i.charCodeAt(h);if(p===47){if(!u){s=h+1;break}continue}l===-1&&(u=!1,l=h+1),p===46?o===-1?o=h:d!==1&&(d=1):o!==-1&&(d=-1)}return o===-1||l===-1||d===0||d===1&&o===l-1&&o===s+1?"":i.slice(o,l)},format:function(i){if(i===null||typeof i!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof i);return n("/",i)},parse:function(i){e(i);var o={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return o;var s=i.charCodeAt(0),l=s===47,u;l?(o.root="/",u=1):u=0;for(var d=-1,h=0,p=-1,g=!0,v=i.length-1,b=0;v>=u;--v){if(s=i.charCodeAt(v),s===47){if(!g){h=v+1;break}continue}p===-1&&(g=!1,p=v+1),s===46?d===-1?d=v:b!==1&&(b=1):d!==-1&&(b=-1)}return d===-1||p===-1||b===0||b===1&&d===p-1&&d===h+1?p!==-1&&(h===0&&l?o.base=o.name=i.slice(1,p):o.base=o.name=i.slice(h,p)):(h===0&&l?(o.name=i.slice(1,d),o.base=i.slice(1,p)):(o.name=i.slice(h,d),o.base=i.slice(h,p)),o.ext=i.slice(d,p)),h>0?o.dir=i.slice(0,h-1):l&&(o.dir="/"),o},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,FS=r,FS}var Ot=Ute(),LS={};/*! crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */var v4;function Hte(){return v4||(v4=1,function(e){(function(t){t(typeof DO_NOT_EXPORT_CRC>"u"?e:{})})(function(t){t.version="1.2.2";function n(){for(var O=0,L=new Array(256),B=0;B!=256;++B)O=B,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,L[B]=O;return typeof Int32Array<"u"?new Int32Array(L):L}var r=n();function a(O){var L=0,B=0,Y=0,F=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Y=0;Y!=256;++Y)F[Y]=O[Y];for(Y=0;Y!=256;++Y)for(B=O[Y],L=256+Y;L<4096;L+=256)B=F[L]=B>>>8^O[B&255];var Z=[];for(Y=1;Y!=16;++Y)Z[Y-1]=typeof Int32Array<"u"?F.subarray(Y*256,Y*256+256):F.slice(Y*256,Y*256+256);return Z}var i=a(r),o=i[0],s=i[1],l=i[2],u=i[3],d=i[4],h=i[5],p=i[6],g=i[7],v=i[8],b=i[9],_=i[10],x=i[11],S=i[12],E=i[13],C=i[14];function k(O,L){for(var B=L^-1,Y=0,F=O.length;Y<F;)B=B>>>8^r[(B^O.charCodeAt(Y++))&255];return~B}function R(O,L){for(var B=L^-1,Y=O.length-15,F=0;F<Y;)B=C[O[F++]^B&255]^E[O[F++]^B>>8&255]^S[O[F++]^B>>16&255]^x[O[F++]^B>>>24]^_[O[F++]]^b[O[F++]]^v[O[F++]]^g[O[F++]]^p[O[F++]]^h[O[F++]]^d[O[F++]]^u[O[F++]]^l[O[F++]]^s[O[F++]]^o[O[F++]]^r[O[F++]];for(Y+=15;F<Y;)B=B>>>8^r[(B^O[F++])&255];return~B}function D(O,L){for(var B=L^-1,Y=0,F=O.length,Z=0,q=0;Y<F;)Z=O.charCodeAt(Y++),Z<128?B=B>>>8^r[(B^Z)&255]:Z<2048?(B=B>>>8^r[(B^(192|Z>>6&31))&255],B=B>>>8^r[(B^(128|Z&63))&255]):Z>=55296&&Z<57344?(Z=(Z&1023)+64,q=O.charCodeAt(Y++)&1023,B=B>>>8^r[(B^(240|Z>>8&7))&255],B=B>>>8^r[(B^(128|Z>>2&63))&255],B=B>>>8^r[(B^(128|q>>6&15|(Z&3)<<4))&255],B=B>>>8^r[(B^(128|q&63))&255]):(B=B>>>8^r[(B^(224|Z>>12&15))&255],B=B>>>8^r[(B^(128|Z>>6&63))&255],B=B>>>8^r[(B^(128|Z&63))&255]);return~B}t.table=r,t.bstr=k,t.buf=R,t.str=D})}(LS)),LS}var qte=Hte();const Vte=si(qte);var $S={},w4;function Eu(){return w4||(w4=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(i,o){return Object.prototype.hasOwnProperty.call(i,o)}e.assign=function(i){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var s=o.shift();if(s){if(typeof s!="object")throw new TypeError(s+"must be non-object");for(var l in s)n(s,l)&&(i[l]=s[l])}}return i},e.shrinkBuf=function(i,o){return i.length===o?i:i.subarray?i.subarray(0,o):(i.length=o,i)};var r={arraySet:function(i,o,s,l,u){if(o.subarray&&i.subarray){i.set(o.subarray(s,s+l),u);return}for(var d=0;d<l;d++)i[u+d]=o[s+d]},flattenChunks:function(i){var o,s,l,u,d,h;for(l=0,o=0,s=i.length;o<s;o++)l+=i[o].length;for(h=new Uint8Array(l),u=0,o=0,s=i.length;o<s;o++)d=i[o],h.set(d,u),u+=d.length;return h}},a={arraySet:function(i,o,s,l,u){for(var d=0;d<l;d++)i[u+d]=o[s+d]},flattenChunks:function(i){return[].concat.apply([],i)}};e.setTyped=function(i){i?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(t)}($S)),$S}var Bf={},Mo={},nd={},_4;function Gte(){if(_4)return nd;_4=1;var e=Eu(),t=4,n=0,r=1,a=2;function i(I){for(var G=I.length;--G>=0;)I[G]=0}var o=0,s=1,l=2,u=3,d=258,h=29,p=256,g=p+1+h,v=30,b=19,_=2*g+1,x=15,S=16,E=7,C=256,k=16,R=17,D=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],L=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=512,Z=new Array((g+2)*2);i(Z);var q=new Array(v*2);i(q);var ne=new Array(F);i(ne);var ae=new Array(d-u+1);i(ae);var re=new Array(h);i(re);var ee=new Array(v);i(ee);function ie(I,G,fe,Oe,ve){this.static_tree=I,this.extra_bits=G,this.extra_base=fe,this.elems=Oe,this.max_length=ve,this.has_stree=I&&I.length}var U,Q,X;function de(I,G){this.dyn_tree=I,this.max_code=0,this.stat_desc=G}function be(I){return I<256?ne[I]:ne[256+(I>>>7)]}function _e(I,G){I.pending_buf[I.pending++]=G&255,I.pending_buf[I.pending++]=G>>>8&255}function Pe(I,G,fe){I.bi_valid>S-fe?(I.bi_buf|=G<<I.bi_valid&65535,_e(I,I.bi_buf),I.bi_buf=G>>S-I.bi_valid,I.bi_valid+=fe-S):(I.bi_buf|=G<<I.bi_valid&65535,I.bi_valid+=fe)}function Ne(I,G,fe){Pe(I,fe[G*2],fe[G*2+1])}function Re(I,G){var fe=0;do fe|=I&1,I>>>=1,fe<<=1;while(--G>0);return fe>>>1}function Ce(I){I.bi_valid===16?(_e(I,I.bi_buf),I.bi_buf=0,I.bi_valid=0):I.bi_valid>=8&&(I.pending_buf[I.pending++]=I.bi_buf&255,I.bi_buf>>=8,I.bi_valid-=8)}function Fe(I,G){var fe=G.dyn_tree,Oe=G.max_code,ve=G.stat_desc.static_tree,ke=G.stat_desc.has_stree,ce=G.stat_desc.extra_bits,ft=G.stat_desc.extra_base,vt=G.stat_desc.max_length,M,Be,tt,ge,De,Ke,Nt=0;for(ge=0;ge<=x;ge++)I.bl_count[ge]=0;for(fe[I.heap[I.heap_max]*2+1]=0,M=I.heap_max+1;M<_;M++)Be=I.heap[M],ge=fe[fe[Be*2+1]*2+1]+1,ge>vt&&(ge=vt,Nt++),fe[Be*2+1]=ge,!(Be>Oe)&&(I.bl_count[ge]++,De=0,Be>=ft&&(De=ce[Be-ft]),Ke=fe[Be*2],I.opt_len+=Ke*(ge+De),ke&&(I.static_len+=Ke*(ve[Be*2+1]+De)));if(Nt!==0){do{for(ge=vt-1;I.bl_count[ge]===0;)ge--;I.bl_count[ge]--,I.bl_count[ge+1]+=2,I.bl_count[vt]--,Nt-=2}while(Nt>0);for(ge=vt;ge!==0;ge--)for(Be=I.bl_count[ge];Be!==0;)tt=I.heap[--M],!(tt>Oe)&&(fe[tt*2+1]!==ge&&(I.opt_len+=(ge-fe[tt*2+1])*fe[tt*2],fe[tt*2+1]=ge),Be--)}}function Qe(I,G,fe){var Oe=new Array(x+1),ve=0,ke,ce;for(ke=1;ke<=x;ke++)Oe[ke]=ve=ve+fe[ke-1]<<1;for(ce=0;ce<=G;ce++){var ft=I[ce*2+1];ft!==0&&(I[ce*2]=Re(Oe[ft]++,ft))}}function Le(){var I,G,fe,Oe,ve,ke=new Array(x+1);for(fe=0,Oe=0;Oe<h-1;Oe++)for(re[Oe]=fe,I=0;I<1<<O[Oe];I++)ae[fe++]=Oe;for(ae[fe-1]=Oe,ve=0,Oe=0;Oe<16;Oe++)for(ee[Oe]=ve,I=0;I<1<<L[Oe];I++)ne[ve++]=Oe;for(ve>>=7;Oe<v;Oe++)for(ee[Oe]=ve<<7,I=0;I<1<<L[Oe]-7;I++)ne[256+ve++]=Oe;for(G=0;G<=x;G++)ke[G]=0;for(I=0;I<=143;)Z[I*2+1]=8,I++,ke[8]++;for(;I<=255;)Z[I*2+1]=9,I++,ke[9]++;for(;I<=279;)Z[I*2+1]=7,I++,ke[7]++;for(;I<=287;)Z[I*2+1]=8,I++,ke[8]++;for(Qe(Z,g+1,ke),I=0;I<v;I++)q[I*2+1]=5,q[I*2]=Re(I,5);U=new ie(Z,O,p+1,g,x),Q=new ie(q,L,0,v,x),X=new ie(new Array(0),B,0,b,E)}function Ie(I){var G;for(G=0;G<g;G++)I.dyn_ltree[G*2]=0;for(G=0;G<v;G++)I.dyn_dtree[G*2]=0;for(G=0;G<b;G++)I.bl_tree[G*2]=0;I.dyn_ltree[C*2]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function V(I){I.bi_valid>8?_e(I,I.bi_buf):I.bi_valid>0&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function me(I,G,fe,Oe){V(I),_e(I,fe),_e(I,~fe),e.arraySet(I.pending_buf,I.window,G,fe,I.pending),I.pending+=fe}function Te(I,G,fe,Oe){var ve=G*2,ke=fe*2;return I[ve]<I[ke]||I[ve]===I[ke]&&Oe[G]<=Oe[fe]}function le(I,G,fe){for(var Oe=I.heap[fe],ve=fe<<1;ve<=I.heap_len&&(ve<I.heap_len&&Te(G,I.heap[ve+1],I.heap[ve],I.depth)&&ve++,!Te(G,Oe,I.heap[ve],I.depth));)I.heap[fe]=I.heap[ve],fe=ve,ve<<=1;I.heap[fe]=Oe}function oe(I,G,fe){var Oe,ve,ke=0,ce,ft;if(I.last_lit!==0)do Oe=I.pending_buf[I.d_buf+ke*2]<<8|I.pending_buf[I.d_buf+ke*2+1],ve=I.pending_buf[I.l_buf+ke],ke++,Oe===0?Ne(I,ve,G):(ce=ae[ve],Ne(I,ce+p+1,G),ft=O[ce],ft!==0&&(ve-=re[ce],Pe(I,ve,ft)),Oe--,ce=be(Oe),Ne(I,ce,fe),ft=L[ce],ft!==0&&(Oe-=ee[ce],Pe(I,Oe,ft)));while(ke<I.last_lit);Ne(I,C,G)}function J(I,G){var fe=G.dyn_tree,Oe=G.stat_desc.static_tree,ve=G.stat_desc.has_stree,ke=G.stat_desc.elems,ce,ft,vt=-1,M;for(I.heap_len=0,I.heap_max=_,ce=0;ce<ke;ce++)fe[ce*2]!==0?(I.heap[++I.heap_len]=vt=ce,I.depth[ce]=0):fe[ce*2+1]=0;for(;I.heap_len<2;)M=I.heap[++I.heap_len]=vt<2?++vt:0,fe[M*2]=1,I.depth[M]=0,I.opt_len--,ve&&(I.static_len-=Oe[M*2+1]);for(G.max_code=vt,ce=I.heap_len>>1;ce>=1;ce--)le(I,fe,ce);M=ke;do ce=I.heap[1],I.heap[1]=I.heap[I.heap_len--],le(I,fe,1),ft=I.heap[1],I.heap[--I.heap_max]=ce,I.heap[--I.heap_max]=ft,fe[M*2]=fe[ce*2]+fe[ft*2],I.depth[M]=(I.depth[ce]>=I.depth[ft]?I.depth[ce]:I.depth[ft])+1,fe[ce*2+1]=fe[ft*2+1]=M,I.heap[1]=M++,le(I,fe,1);while(I.heap_len>=2);I.heap[--I.heap_max]=I.heap[1],Fe(I,G),Qe(fe,vt,I.bl_count)}function xe(I,G,fe){var Oe,ve=-1,ke,ce=G[0*2+1],ft=0,vt=7,M=4;for(ce===0&&(vt=138,M=3),G[(fe+1)*2+1]=65535,Oe=0;Oe<=fe;Oe++)ke=ce,ce=G[(Oe+1)*2+1],!(++ft<vt&&ke===ce)&&(ft<M?I.bl_tree[ke*2]+=ft:ke!==0?(ke!==ve&&I.bl_tree[ke*2]++,I.bl_tree[k*2]++):ft<=10?I.bl_tree[R*2]++:I.bl_tree[D*2]++,ft=0,ve=ke,ce===0?(vt=138,M=3):ke===ce?(vt=6,M=3):(vt=7,M=4))}function Me(I,G,fe){var Oe,ve=-1,ke,ce=G[0*2+1],ft=0,vt=7,M=4;for(ce===0&&(vt=138,M=3),Oe=0;Oe<=fe;Oe++)if(ke=ce,ce=G[(Oe+1)*2+1],!(++ft<vt&&ke===ce)){if(ft<M)do Ne(I,ke,I.bl_tree);while(--ft!==0);else ke!==0?(ke!==ve&&(Ne(I,ke,I.bl_tree),ft--),Ne(I,k,I.bl_tree),Pe(I,ft-3,2)):ft<=10?(Ne(I,R,I.bl_tree),Pe(I,ft-3,3)):(Ne(I,D,I.bl_tree),Pe(I,ft-11,7));ft=0,ve=ke,ce===0?(vt=138,M=3):ke===ce?(vt=6,M=3):(vt=7,M=4)}}function Ee(I){var G;for(xe(I,I.dyn_ltree,I.l_desc.max_code),xe(I,I.dyn_dtree,I.d_desc.max_code),J(I,I.bl_desc),G=b-1;G>=3&&I.bl_tree[Y[G]*2+1]===0;G--);return I.opt_len+=3*(G+1)+5+5+4,G}function We(I,G,fe,Oe){var ve;for(Pe(I,G-257,5),Pe(I,fe-1,5),Pe(I,Oe-4,4),ve=0;ve<Oe;ve++)Pe(I,I.bl_tree[Y[ve]*2+1],3);Me(I,I.dyn_ltree,G-1),Me(I,I.dyn_dtree,fe-1)}function kt(I){var G=4093624447,fe;for(fe=0;fe<=31;fe++,G>>>=1)if(G&1&&I.dyn_ltree[fe*2]!==0)return n;if(I.dyn_ltree[9*2]!==0||I.dyn_ltree[10*2]!==0||I.dyn_ltree[13*2]!==0)return r;for(fe=32;fe<p;fe++)if(I.dyn_ltree[fe*2]!==0)return r;return n}var at=!1;function _t(I){at||(Le(),at=!0),I.l_desc=new de(I.dyn_ltree,U),I.d_desc=new de(I.dyn_dtree,Q),I.bl_desc=new de(I.bl_tree,X),I.bi_buf=0,I.bi_valid=0,Ie(I)}function jt(I,G,fe,Oe){Pe(I,(o<<1)+(Oe?1:0),3),me(I,G,fe)}function Dt(I){Pe(I,s<<1,3),Ne(I,C,Z),Ce(I)}function Gt(I,G,fe,Oe){var ve,ke,ce=0;I.level>0?(I.strm.data_type===a&&(I.strm.data_type=kt(I)),J(I,I.l_desc),J(I,I.d_desc),ce=Ee(I),ve=I.opt_len+3+7>>>3,ke=I.static_len+3+7>>>3,ke<=ve&&(ve=ke)):ve=ke=fe+5,fe+4<=ve&&G!==-1?jt(I,G,fe,Oe):I.strategy===t||ke===ve?(Pe(I,(s<<1)+(Oe?1:0),3),oe(I,Z,q)):(Pe(I,(l<<1)+(Oe?1:0),3),We(I,I.l_desc.max_code+1,I.d_desc.max_code+1,ce+1),oe(I,I.dyn_ltree,I.dyn_dtree)),Ie(I),Oe&&V(I)}function ye(I,G,fe){return I.pending_buf[I.d_buf+I.last_lit*2]=G>>>8&255,I.pending_buf[I.d_buf+I.last_lit*2+1]=G&255,I.pending_buf[I.l_buf+I.last_lit]=fe&255,I.last_lit++,G===0?I.dyn_ltree[fe*2]++:(I.matches++,G--,I.dyn_ltree[(ae[fe]+p+1)*2]++,I.dyn_dtree[be(G)*2]++),I.last_lit===I.lit_bufsize-1}return nd._tr_init=_t,nd._tr_stored_block=jt,nd._tr_flush_block=Gt,nd._tr_tally=ye,nd._tr_align=Dt,nd}var BS,x4;function NP(){if(x4)return BS;x4=1;function e(t,n,r,a){for(var i=t&65535|0,o=t>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do i=i+n[a++]|0,o=o+i|0;while(--s);i%=65521,o%=65521}return i|o<<16|0}return BS=e,BS}var zS,S4;function RP(){if(S4)return zS;S4=1;function e(){for(var r,a=[],i=0;i<256;i++){r=i;for(var o=0;o<8;o++)r=r&1?3988292384^r>>>1:r>>>1;a[i]=r}return a}var t=e();function n(r,a,i,o){var s=t,l=o+i;r^=-1;for(var u=o;u<l;u++)r=r>>>8^s[(r^a[u])&255];return r^-1}return zS=n,zS}var US,E4;function jk(){return E4||(E4=1,US={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),US}var C4;function Wte(){if(C4)return Mo;C4=1;var e=Eu(),t=Gte(),n=NP(),r=RP(),a=jk(),i=0,o=1,s=3,l=4,u=5,d=0,h=1,p=-2,g=-3,v=-5,b=-1,_=1,x=2,S=3,E=4,C=0,k=2,R=8,D=9,O=15,L=8,B=29,Y=256,F=Y+1+B,Z=30,q=19,ne=2*F+1,ae=15,re=3,ee=258,ie=ee+re+1,U=32,Q=42,X=69,de=73,be=91,_e=103,Pe=113,Ne=666,Re=1,Ce=2,Fe=3,Qe=4,Le=3;function Ie(M,Be){return M.msg=a[Be],Be}function V(M){return(M<<1)-(M>4?9:0)}function me(M){for(var Be=M.length;--Be>=0;)M[Be]=0}function Te(M){var Be=M.state,tt=Be.pending;tt>M.avail_out&&(tt=M.avail_out),tt!==0&&(e.arraySet(M.output,Be.pending_buf,Be.pending_out,tt,M.next_out),M.next_out+=tt,Be.pending_out+=tt,M.total_out+=tt,M.avail_out-=tt,Be.pending-=tt,Be.pending===0&&(Be.pending_out=0))}function le(M,Be){t._tr_flush_block(M,M.block_start>=0?M.block_start:-1,M.strstart-M.block_start,Be),M.block_start=M.strstart,Te(M.strm)}function oe(M,Be){M.pending_buf[M.pending++]=Be}function J(M,Be){M.pending_buf[M.pending++]=Be>>>8&255,M.pending_buf[M.pending++]=Be&255}function xe(M,Be,tt,ge){var De=M.avail_in;return De>ge&&(De=ge),De===0?0:(M.avail_in-=De,e.arraySet(Be,M.input,M.next_in,De,tt),M.state.wrap===1?M.adler=n(M.adler,Be,De,tt):M.state.wrap===2&&(M.adler=r(M.adler,Be,De,tt)),M.next_in+=De,M.total_in+=De,De)}function Me(M,Be){var tt=M.max_chain_length,ge=M.strstart,De,Ke,Nt=M.prev_length,pe=M.nice_match,H=M.strstart>M.w_size-ie?M.strstart-(M.w_size-ie):0,z=M.window,W=M.w_mask,he=M.prev,Ae=M.strstart+ee,He=z[ge+Nt-1],pt=z[ge+Nt];M.prev_length>=M.good_match&&(tt>>=2),pe>M.lookahead&&(pe=M.lookahead);do if(De=Be,!(z[De+Nt]!==pt||z[De+Nt-1]!==He||z[De]!==z[ge]||z[++De]!==z[ge+1])){ge+=2,De++;do;while(z[++ge]===z[++De]&&z[++ge]===z[++De]&&z[++ge]===z[++De]&&z[++ge]===z[++De]&&z[++ge]===z[++De]&&z[++ge]===z[++De]&&z[++ge]===z[++De]&&z[++ge]===z[++De]&&ge<Ae);if(Ke=ee-(Ae-ge),ge=Ae-ee,Ke>Nt){if(M.match_start=Be,Nt=Ke,Ke>=pe)break;He=z[ge+Nt-1],pt=z[ge+Nt]}}while((Be=he[Be&W])>H&&--tt!==0);return Nt<=M.lookahead?Nt:M.lookahead}function Ee(M){var Be=M.w_size,tt,ge,De,Ke,Nt;do{if(Ke=M.window_size-M.lookahead-M.strstart,M.strstart>=Be+(Be-ie)){e.arraySet(M.window,M.window,Be,Be,0),M.match_start-=Be,M.strstart-=Be,M.block_start-=Be,ge=M.hash_size,tt=ge;do De=M.head[--tt],M.head[tt]=De>=Be?De-Be:0;while(--ge);ge=Be,tt=ge;do De=M.prev[--tt],M.prev[tt]=De>=Be?De-Be:0;while(--ge);Ke+=Be}if(M.strm.avail_in===0)break;if(ge=xe(M.strm,M.window,M.strstart+M.lookahead,Ke),M.lookahead+=ge,M.lookahead+M.insert>=re)for(Nt=M.strstart-M.insert,M.ins_h=M.window[Nt],M.ins_h=(M.ins_h<<M.hash_shift^M.window[Nt+1])&M.hash_mask;M.insert&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[Nt+re-1])&M.hash_mask,M.prev[Nt&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=Nt,Nt++,M.insert--,!(M.lookahead+M.insert<re)););}while(M.lookahead<ie&&M.strm.avail_in!==0)}function We(M,Be){var tt=65535;for(tt>M.pending_buf_size-5&&(tt=M.pending_buf_size-5);;){if(M.lookahead<=1){if(Ee(M),M.lookahead===0&&Be===i)return Re;if(M.lookahead===0)break}M.strstart+=M.lookahead,M.lookahead=0;var ge=M.block_start+tt;if((M.strstart===0||M.strstart>=ge)&&(M.lookahead=M.strstart-ge,M.strstart=ge,le(M,!1),M.strm.avail_out===0)||M.strstart-M.block_start>=M.w_size-ie&&(le(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===l?(le(M,!0),M.strm.avail_out===0?Fe:Qe):(M.strstart>M.block_start&&(le(M,!1),M.strm.avail_out===0),Re)}function kt(M,Be){for(var tt,ge;;){if(M.lookahead<ie){if(Ee(M),M.lookahead<ie&&Be===i)return Re;if(M.lookahead===0)break}if(tt=0,M.lookahead>=re&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),tt!==0&&M.strstart-tt<=M.w_size-ie&&(M.match_length=Me(M,tt)),M.match_length>=re)if(ge=t._tr_tally(M,M.strstart-M.match_start,M.match_length-re),M.lookahead-=M.match_length,M.match_length<=M.max_lazy_match&&M.lookahead>=re){M.match_length--;do M.strstart++,M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart;while(--M.match_length!==0);M.strstart++}else M.strstart+=M.match_length,M.match_length=0,M.ins_h=M.window[M.strstart],M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+1])&M.hash_mask;else ge=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++;if(ge&&(le(M,!1),M.strm.avail_out===0))return Re}return M.insert=M.strstart<re-1?M.strstart:re-1,Be===l?(le(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(le(M,!1),M.strm.avail_out===0)?Re:Ce}function at(M,Be){for(var tt,ge,De;;){if(M.lookahead<ie){if(Ee(M),M.lookahead<ie&&Be===i)return Re;if(M.lookahead===0)break}if(tt=0,M.lookahead>=re&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart),M.prev_length=M.match_length,M.prev_match=M.match_start,M.match_length=re-1,tt!==0&&M.prev_length<M.max_lazy_match&&M.strstart-tt<=M.w_size-ie&&(M.match_length=Me(M,tt),M.match_length<=5&&(M.strategy===_||M.match_length===re&&M.strstart-M.match_start>4096)&&(M.match_length=re-1)),M.prev_length>=re&&M.match_length<=M.prev_length){De=M.strstart+M.lookahead-re,ge=t._tr_tally(M,M.strstart-1-M.prev_match,M.prev_length-re),M.lookahead-=M.prev_length-1,M.prev_length-=2;do++M.strstart<=De&&(M.ins_h=(M.ins_h<<M.hash_shift^M.window[M.strstart+re-1])&M.hash_mask,tt=M.prev[M.strstart&M.w_mask]=M.head[M.ins_h],M.head[M.ins_h]=M.strstart);while(--M.prev_length!==0);if(M.match_available=0,M.match_length=re-1,M.strstart++,ge&&(le(M,!1),M.strm.avail_out===0))return Re}else if(M.match_available){if(ge=t._tr_tally(M,0,M.window[M.strstart-1]),ge&&le(M,!1),M.strstart++,M.lookahead--,M.strm.avail_out===0)return Re}else M.match_available=1,M.strstart++,M.lookahead--}return M.match_available&&(ge=t._tr_tally(M,0,M.window[M.strstart-1]),M.match_available=0),M.insert=M.strstart<re-1?M.strstart:re-1,Be===l?(le(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(le(M,!1),M.strm.avail_out===0)?Re:Ce}function _t(M,Be){for(var tt,ge,De,Ke,Nt=M.window;;){if(M.lookahead<=ee){if(Ee(M),M.lookahead<=ee&&Be===i)return Re;if(M.lookahead===0)break}if(M.match_length=0,M.lookahead>=re&&M.strstart>0&&(De=M.strstart-1,ge=Nt[De],ge===Nt[++De]&&ge===Nt[++De]&&ge===Nt[++De])){Ke=M.strstart+ee;do;while(ge===Nt[++De]&&ge===Nt[++De]&&ge===Nt[++De]&&ge===Nt[++De]&&ge===Nt[++De]&&ge===Nt[++De]&&ge===Nt[++De]&&ge===Nt[++De]&&De<Ke);M.match_length=ee-(Ke-De),M.match_length>M.lookahead&&(M.match_length=M.lookahead)}if(M.match_length>=re?(tt=t._tr_tally(M,1,M.match_length-re),M.lookahead-=M.match_length,M.strstart+=M.match_length,M.match_length=0):(tt=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++),tt&&(le(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===l?(le(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(le(M,!1),M.strm.avail_out===0)?Re:Ce}function jt(M,Be){for(var tt;;){if(M.lookahead===0&&(Ee(M),M.lookahead===0)){if(Be===i)return Re;break}if(M.match_length=0,tt=t._tr_tally(M,0,M.window[M.strstart]),M.lookahead--,M.strstart++,tt&&(le(M,!1),M.strm.avail_out===0))return Re}return M.insert=0,Be===l?(le(M,!0),M.strm.avail_out===0?Fe:Qe):M.last_lit&&(le(M,!1),M.strm.avail_out===0)?Re:Ce}function Dt(M,Be,tt,ge,De){this.good_length=M,this.max_lazy=Be,this.nice_length=tt,this.max_chain=ge,this.func=De}var Gt;Gt=[new Dt(0,0,0,0,We),new Dt(4,4,8,4,kt),new Dt(4,5,16,8,kt),new Dt(4,6,32,32,kt),new Dt(4,4,16,16,at),new Dt(8,16,32,32,at),new Dt(8,16,128,128,at),new Dt(8,32,128,256,at),new Dt(32,128,258,1024,at),new Dt(32,258,258,4096,at)];function ye(M){M.window_size=2*M.w_size,me(M.head),M.max_lazy_match=Gt[M.level].max_lazy,M.good_match=Gt[M.level].good_length,M.nice_match=Gt[M.level].nice_length,M.max_chain_length=Gt[M.level].max_chain,M.strstart=0,M.block_start=0,M.lookahead=0,M.insert=0,M.match_length=M.prev_length=re-1,M.match_available=0,M.ins_h=0}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(ne*2),this.dyn_dtree=new e.Buf16((2*Z+1)*2),this.bl_tree=new e.Buf16((2*q+1)*2),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ae+1),this.heap=new e.Buf16(2*F+1),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*F+1),me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(M){var Be;return!M||!M.state?Ie(M,p):(M.total_in=M.total_out=0,M.data_type=k,Be=M.state,Be.pending=0,Be.pending_out=0,Be.wrap<0&&(Be.wrap=-Be.wrap),Be.status=Be.wrap?Q:Pe,M.adler=Be.wrap===2?0:1,Be.last_flush=i,t._tr_init(Be),d)}function fe(M){var Be=G(M);return Be===d&&ye(M.state),Be}function Oe(M,Be){return!M||!M.state||M.state.wrap!==2?p:(M.state.gzhead=Be,d)}function ve(M,Be,tt,ge,De,Ke){if(!M)return p;var Nt=1;if(Be===b&&(Be=6),ge<0?(Nt=0,ge=-ge):ge>15&&(Nt=2,ge-=16),De<1||De>D||tt!==R||ge<8||ge>15||Be<0||Be>9||Ke<0||Ke>E)return Ie(M,p);ge===8&&(ge=9);var pe=new I;return M.state=pe,pe.strm=M,pe.wrap=Nt,pe.gzhead=null,pe.w_bits=ge,pe.w_size=1<<pe.w_bits,pe.w_mask=pe.w_size-1,pe.hash_bits=De+7,pe.hash_size=1<<pe.hash_bits,pe.hash_mask=pe.hash_size-1,pe.hash_shift=~~((pe.hash_bits+re-1)/re),pe.window=new e.Buf8(pe.w_size*2),pe.head=new e.Buf16(pe.hash_size),pe.prev=new e.Buf16(pe.w_size),pe.lit_bufsize=1<<De+6,pe.pending_buf_size=pe.lit_bufsize*4,pe.pending_buf=new e.Buf8(pe.pending_buf_size),pe.d_buf=1*pe.lit_bufsize,pe.l_buf=3*pe.lit_bufsize,pe.level=Be,pe.strategy=Ke,pe.method=tt,fe(M)}function ke(M,Be){return ve(M,Be,R,O,L,C)}function ce(M,Be){var tt,ge,De,Ke;if(!M||!M.state||Be>u||Be<0)return M?Ie(M,p):p;if(ge=M.state,!M.output||!M.input&&M.avail_in!==0||ge.status===Ne&&Be!==l)return Ie(M,M.avail_out===0?v:p);if(ge.strm=M,tt=ge.last_flush,ge.last_flush=Be,ge.status===Q)if(ge.wrap===2)M.adler=0,oe(ge,31),oe(ge,139),oe(ge,8),ge.gzhead?(oe(ge,(ge.gzhead.text?1:0)+(ge.gzhead.hcrc?2:0)+(ge.gzhead.extra?4:0)+(ge.gzhead.name?8:0)+(ge.gzhead.comment?16:0)),oe(ge,ge.gzhead.time&255),oe(ge,ge.gzhead.time>>8&255),oe(ge,ge.gzhead.time>>16&255),oe(ge,ge.gzhead.time>>24&255),oe(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),oe(ge,ge.gzhead.os&255),ge.gzhead.extra&&ge.gzhead.extra.length&&(oe(ge,ge.gzhead.extra.length&255),oe(ge,ge.gzhead.extra.length>>8&255)),ge.gzhead.hcrc&&(M.adler=r(M.adler,ge.pending_buf,ge.pending,0)),ge.gzindex=0,ge.status=X):(oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,0),oe(ge,ge.level===9?2:ge.strategy>=x||ge.level<2?4:0),oe(ge,Le),ge.status=Pe);else{var Nt=R+(ge.w_bits-8<<4)<<8,pe=-1;ge.strategy>=x||ge.level<2?pe=0:ge.level<6?pe=1:ge.level===6?pe=2:pe=3,Nt|=pe<<6,ge.strstart!==0&&(Nt|=U),Nt+=31-Nt%31,ge.status=Pe,J(ge,Nt),ge.strstart!==0&&(J(ge,M.adler>>>16),J(ge,M.adler&65535)),M.adler=1}if(ge.status===X)if(ge.gzhead.extra){for(De=ge.pending;ge.gzindex<(ge.gzhead.extra.length&65535)&&!(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-De,De)),Te(M),De=ge.pending,ge.pending===ge.pending_buf_size));)oe(ge,ge.gzhead.extra[ge.gzindex]&255),ge.gzindex++;ge.gzhead.hcrc&&ge.pending>De&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-De,De)),ge.gzindex===ge.gzhead.extra.length&&(ge.gzindex=0,ge.status=de)}else ge.status=de;if(ge.status===de)if(ge.gzhead.name){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-De,De)),Te(M),De=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.name.length?Ke=ge.gzhead.name.charCodeAt(ge.gzindex++)&255:Ke=0,oe(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>De&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-De,De)),Ke===0&&(ge.gzindex=0,ge.status=be)}else ge.status=be;if(ge.status===be)if(ge.gzhead.comment){De=ge.pending;do{if(ge.pending===ge.pending_buf_size&&(ge.gzhead.hcrc&&ge.pending>De&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-De,De)),Te(M),De=ge.pending,ge.pending===ge.pending_buf_size)){Ke=1;break}ge.gzindex<ge.gzhead.comment.length?Ke=ge.gzhead.comment.charCodeAt(ge.gzindex++)&255:Ke=0,oe(ge,Ke)}while(Ke!==0);ge.gzhead.hcrc&&ge.pending>De&&(M.adler=r(M.adler,ge.pending_buf,ge.pending-De,De)),Ke===0&&(ge.status=_e)}else ge.status=_e;if(ge.status===_e&&(ge.gzhead.hcrc?(ge.pending+2>ge.pending_buf_size&&Te(M),ge.pending+2<=ge.pending_buf_size&&(oe(ge,M.adler&255),oe(ge,M.adler>>8&255),M.adler=0,ge.status=Pe)):ge.status=Pe),ge.pending!==0){if(Te(M),M.avail_out===0)return ge.last_flush=-1,d}else if(M.avail_in===0&&V(Be)<=V(tt)&&Be!==l)return Ie(M,v);if(ge.status===Ne&&M.avail_in!==0)return Ie(M,v);if(M.avail_in!==0||ge.lookahead!==0||Be!==i&&ge.status!==Ne){var H=ge.strategy===x?jt(ge,Be):ge.strategy===S?_t(ge,Be):Gt[ge.level].func(ge,Be);if((H===Fe||H===Qe)&&(ge.status=Ne),H===Re||H===Fe)return M.avail_out===0&&(ge.last_flush=-1),d;if(H===Ce&&(Be===o?t._tr_align(ge):Be!==u&&(t._tr_stored_block(ge,0,0,!1),Be===s&&(me(ge.head),ge.lookahead===0&&(ge.strstart=0,ge.block_start=0,ge.insert=0))),Te(M),M.avail_out===0))return ge.last_flush=-1,d}return Be!==l?d:ge.wrap<=0?h:(ge.wrap===2?(oe(ge,M.adler&255),oe(ge,M.adler>>8&255),oe(ge,M.adler>>16&255),oe(ge,M.adler>>24&255),oe(ge,M.total_in&255),oe(ge,M.total_in>>8&255),oe(ge,M.total_in>>16&255),oe(ge,M.total_in>>24&255)):(J(ge,M.adler>>>16),J(ge,M.adler&65535)),Te(M),ge.wrap>0&&(ge.wrap=-ge.wrap),ge.pending!==0?d:h)}function ft(M){var Be;return!M||!M.state?p:(Be=M.state.status,Be!==Q&&Be!==X&&Be!==de&&Be!==be&&Be!==_e&&Be!==Pe&&Be!==Ne?Ie(M,p):(M.state=null,Be===Pe?Ie(M,g):d))}function vt(M,Be){var tt=Be.length,ge,De,Ke,Nt,pe,H,z,W;if(!M||!M.state||(ge=M.state,Nt=ge.wrap,Nt===2||Nt===1&&ge.status!==Q||ge.lookahead))return p;for(Nt===1&&(M.adler=n(M.adler,Be,tt,0)),ge.wrap=0,tt>=ge.w_size&&(Nt===0&&(me(ge.head),ge.strstart=0,ge.block_start=0,ge.insert=0),W=new e.Buf8(ge.w_size),e.arraySet(W,Be,tt-ge.w_size,ge.w_size,0),Be=W,tt=ge.w_size),pe=M.avail_in,H=M.next_in,z=M.input,M.avail_in=tt,M.next_in=0,M.input=Be,Ee(ge);ge.lookahead>=re;){De=ge.strstart,Ke=ge.lookahead-(re-1);do ge.ins_h=(ge.ins_h<<ge.hash_shift^ge.window[De+re-1])&ge.hash_mask,ge.prev[De&ge.w_mask]=ge.head[ge.ins_h],ge.head[ge.ins_h]=De,De++;while(--Ke);ge.strstart=De,ge.lookahead=re-1,Ee(ge)}return ge.strstart+=ge.lookahead,ge.block_start=ge.strstart,ge.insert=ge.lookahead,ge.lookahead=0,ge.match_length=ge.prev_length=re-1,ge.match_available=0,M.next_in=H,M.input=z,M.avail_in=pe,ge.wrap=Nt,d}return Mo.deflateInit=ke,Mo.deflateInit2=ve,Mo.deflateReset=fe,Mo.deflateResetKeep=G,Mo.deflateSetHeader=Oe,Mo.deflate=ce,Mo.deflateEnd=ft,Mo.deflateSetDictionary=vt,Mo.deflateInfo="pako deflate (from Nodeca project)",Mo}var rd={},k4;function IP(){if(k4)return rd;k4=1;var e=Eu(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),a=0;a<256;a++)r[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;r[254]=r[254]=1,rd.string2buf=function(o){var s,l,u,d,h,p=o.length,g=0;for(d=0;d<p;d++)l=o.charCodeAt(d),(l&64512)===55296&&d+1<p&&(u=o.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),g+=l<128?1:l<2048?2:l<65536?3:4;for(s=new e.Buf8(g),h=0,d=0;h<g;d++)l=o.charCodeAt(d),(l&64512)===55296&&d+1<p&&(u=o.charCodeAt(d+1),(u&64512)===56320&&(l=65536+(l-55296<<10)+(u-56320),d++)),l<128?s[h++]=l:l<2048?(s[h++]=192|l>>>6,s[h++]=128|l&63):l<65536?(s[h++]=224|l>>>12,s[h++]=128|l>>>6&63,s[h++]=128|l&63):(s[h++]=240|l>>>18,s[h++]=128|l>>>12&63,s[h++]=128|l>>>6&63,s[h++]=128|l&63);return s};function i(o,s){if(s<65534&&(o.subarray&&n||!o.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(o,s));for(var l="",u=0;u<s;u++)l+=String.fromCharCode(o[u]);return l}return rd.buf2binstring=function(o){return i(o,o.length)},rd.binstring2buf=function(o){for(var s=new e.Buf8(o.length),l=0,u=s.length;l<u;l++)s[l]=o.charCodeAt(l);return s},rd.buf2string=function(o,s){var l,u,d,h,p=s||o.length,g=new Array(p*2);for(u=0,l=0;l<p;){if(d=o[l++],d<128){g[u++]=d;continue}if(h=r[d],h>4){g[u++]=65533,l+=h-1;continue}for(d&=h===2?31:h===3?15:7;h>1&&l<p;)d=d<<6|o[l++]&63,h--;if(h>1){g[u++]=65533;continue}d<65536?g[u++]=d:(d-=65536,g[u++]=55296|d>>10&1023,g[u++]=56320|d&1023)}return i(g,u)},rd.utf8border=function(o,s){var l;for(s=s||o.length,s>o.length&&(s=o.length),l=s-1;l>=0&&(o[l]&192)===128;)l--;return l<0||l===0?s:l+r[o[l]]>s?l:s},rd}var HS,T4;function OP(){if(T4)return HS;T4=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return HS=e,HS}var A4;function Kte(){if(A4)return Bf;A4=1;var e=Wte(),t=Eu(),n=IP(),r=jk(),a=OP(),i=Object.prototype.toString,o=0,s=4,l=0,u=1,d=2,h=-1,p=0,g=8;function v(S){if(!(this instanceof v))return new v(S);this.options=t.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},S||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=e.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==l)throw new Error(r[C]);if(E.header&&e.deflateSetHeader(this.strm,E.header),E.dictionary){var k;if(typeof E.dictionary=="string"?k=n.string2buf(E.dictionary):i.call(E.dictionary)==="[object ArrayBuffer]"?k=new Uint8Array(E.dictionary):k=E.dictionary,C=e.deflateSetDictionary(this.strm,k),C!==l)throw new Error(r[C]);this._dict_set=!0}}v.prototype.push=function(S,E){var C=this.strm,k=this.options.chunkSize,R,D;if(this.ended)return!1;D=E===~~E?E:E===!0?s:o,typeof S=="string"?C.input=n.string2buf(S):i.call(S)==="[object ArrayBuffer]"?C.input=new Uint8Array(S):C.input=S,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new t.Buf8(k),C.next_out=0,C.avail_out=k),R=e.deflate(C,D),R!==u&&R!==l)return this.onEnd(R),this.ended=!0,!1;(C.avail_out===0||C.avail_in===0&&(D===s||D===d))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(C.output,C.next_out))):this.onData(t.shrinkBuf(C.output,C.next_out)))}while((C.avail_in>0||C.avail_out===0)&&R!==u);return D===s?(R=e.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===l):(D===d&&(this.onEnd(l),C.avail_out=0),!0)},v.prototype.onData=function(S){this.chunks.push(S)},v.prototype.onEnd=function(S){S===l&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function b(S,E){var C=new v(E);if(C.push(S,!0),C.err)throw C.msg||r[C.err];return C.result}function _(S,E){return E=E||{},E.raw=!0,b(S,E)}function x(S,E){return E=E||{},E.gzip=!0,b(S,E)}return Bf.Deflate=v,Bf.deflate=b,Bf.deflateRaw=_,Bf.gzip=x,Bf}var zf={},go={},qS,N4;function Zte(){if(N4)return qS;N4=1;var e=30,t=12;return qS=function(r,a){var i,o,s,l,u,d,h,p,g,v,b,_,x,S,E,C,k,R,D,O,L,B,Y,F,Z;i=r.state,o=r.next_in,F=r.input,s=o+(r.avail_in-5),l=r.next_out,Z=r.output,u=l-(a-r.avail_out),d=l+(r.avail_out-257),h=i.dmax,p=i.wsize,g=i.whave,v=i.wnext,b=i.window,_=i.hold,x=i.bits,S=i.lencode,E=i.distcode,C=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),R=S[_&C];t:for(;;){if(D=R>>>24,_>>>=D,x-=D,D=R>>>16&255,D===0)Z[l++]=R&65535;else if(D&16){O=R&65535,D&=15,D&&(x<D&&(_+=F[o++]<<x,x+=8),O+=_&(1<<D)-1,_>>>=D,x-=D),x<15&&(_+=F[o++]<<x,x+=8,_+=F[o++]<<x,x+=8),R=E[_&k];n:for(;;){if(D=R>>>24,_>>>=D,x-=D,D=R>>>16&255,D&16){if(L=R&65535,D&=15,x<D&&(_+=F[o++]<<x,x+=8,x<D&&(_+=F[o++]<<x,x+=8)),L+=_&(1<<D)-1,L>h){r.msg="invalid distance too far back",i.mode=e;break e}if(_>>>=D,x-=D,D=l-u,L>D){if(D=L-D,D>g&&i.sane){r.msg="invalid distance too far back",i.mode=e;break e}if(B=0,Y=b,v===0){if(B+=p-D,D<O){O-=D;do Z[l++]=b[B++];while(--D);B=l-L,Y=Z}}else if(v<D){if(B+=p+v-D,D-=v,D<O){O-=D;do Z[l++]=b[B++];while(--D);if(B=0,v<O){D=v,O-=D;do Z[l++]=b[B++];while(--D);B=l-L,Y=Z}}}else if(B+=v-D,D<O){O-=D;do Z[l++]=b[B++];while(--D);B=l-L,Y=Z}for(;O>2;)Z[l++]=Y[B++],Z[l++]=Y[B++],Z[l++]=Y[B++],O-=3;O&&(Z[l++]=Y[B++],O>1&&(Z[l++]=Y[B++]))}else{B=l-L;do Z[l++]=Z[B++],Z[l++]=Z[B++],Z[l++]=Z[B++],O-=3;while(O>2);O&&(Z[l++]=Z[B++],O>1&&(Z[l++]=Z[B++]))}}else if((D&64)===0){R=E[(R&65535)+(_&(1<<D)-1)];continue n}else{r.msg="invalid distance code",i.mode=e;break e}break}}else if((D&64)===0){R=S[(R&65535)+(_&(1<<D)-1)];continue t}else if(D&32){i.mode=t;break e}else{r.msg="invalid literal/length code",i.mode=e;break e}break}}while(o<s&&l<d);O=x>>3,o-=O,x-=O<<3,_&=(1<<x)-1,r.next_in=o,r.next_out=l,r.avail_in=o<s?5+(s-o):5-(o-s),r.avail_out=l<d?257+(d-l):257-(l-d),i.hold=_,i.bits=x},qS}var VS,R4;function Yte(){if(R4)return VS;R4=1;var e=Eu(),t=15,n=852,r=592,a=0,i=1,o=2,s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return VS=function(p,g,v,b,_,x,S,E){var C=E.bits,k=0,R=0,D=0,O=0,L=0,B=0,Y=0,F=0,Z=0,q=0,ne,ae,re,ee,ie,U=null,Q=0,X,de=new e.Buf16(t+1),be=new e.Buf16(t+1),_e=null,Pe=0,Ne,Re,Ce;for(k=0;k<=t;k++)de[k]=0;for(R=0;R<b;R++)de[g[v+R]]++;for(L=C,O=t;O>=1&&de[O]===0;O--);if(L>O&&(L=O),O===0)return _[x++]=1<<24|64<<16|0,_[x++]=1<<24|64<<16|0,E.bits=1,0;for(D=1;D<O&&de[D]===0;D++);for(L<D&&(L=D),F=1,k=1;k<=t;k++)if(F<<=1,F-=de[k],F<0)return-1;if(F>0&&(p===a||O!==1))return-1;for(be[1]=0,k=1;k<t;k++)be[k+1]=be[k]+de[k];for(R=0;R<b;R++)g[v+R]!==0&&(S[be[g[v+R]]++]=R);if(p===a?(U=_e=S,X=19):p===i?(U=s,Q-=257,_e=l,Pe-=257,X=256):(U=u,_e=d,X=-1),q=0,R=0,k=D,ie=x,B=L,Y=0,re=-1,Z=1<<L,ee=Z-1,p===i&&Z>n||p===o&&Z>r)return 1;for(;;){Ne=k-Y,S[R]<X?(Re=0,Ce=S[R]):S[R]>X?(Re=_e[Pe+S[R]],Ce=U[Q+S[R]]):(Re=96,Ce=0),ne=1<<k-Y,ae=1<<B,D=ae;do ae-=ne,_[ie+(q>>Y)+ae]=Ne<<24|Re<<16|Ce|0;while(ae!==0);for(ne=1<<k-1;q&ne;)ne>>=1;if(ne!==0?(q&=ne-1,q+=ne):q=0,R++,--de[k]===0){if(k===O)break;k=g[v+S[R]]}if(k>L&&(q&ee)!==re){for(Y===0&&(Y=L),ie+=D,B=k-Y,F=1<<B;B+Y<O&&(F-=de[B+Y],!(F<=0));)B++,F<<=1;if(Z+=1<<B,p===i&&Z>n||p===o&&Z>r)return 1;re=q&ee,_[re]=L<<24|B<<16|ie-x|0}}return q!==0&&(_[ie+q]=k-Y<<24|64<<16|0),E.bits=L,0},VS}var I4;function Xte(){if(I4)return go;I4=1;var e=Eu(),t=NP(),n=RP(),r=Zte(),a=Yte(),i=0,o=1,s=2,l=4,u=5,d=6,h=0,p=1,g=2,v=-2,b=-3,_=-4,x=-5,S=8,E=1,C=2,k=3,R=4,D=5,O=6,L=7,B=8,Y=9,F=10,Z=11,q=12,ne=13,ae=14,re=15,ee=16,ie=17,U=18,Q=19,X=20,de=21,be=22,_e=23,Pe=24,Ne=25,Re=26,Ce=27,Fe=28,Qe=29,Le=30,Ie=31,V=32,me=852,Te=592,le=15,oe=le;function J(ve){return(ve>>>24&255)+(ve>>>8&65280)+((ve&65280)<<8)+((ve&255)<<24)}function xe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Me(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ve.total_in=ve.total_out=ke.total=0,ve.msg="",ke.wrap&&(ve.adler=ke.wrap&1),ke.mode=E,ke.last=0,ke.havedict=0,ke.dmax=32768,ke.head=null,ke.hold=0,ke.bits=0,ke.lencode=ke.lendyn=new e.Buf32(me),ke.distcode=ke.distdyn=new e.Buf32(Te),ke.sane=1,ke.back=-1,h)}function Ee(ve){var ke;return!ve||!ve.state?v:(ke=ve.state,ke.wsize=0,ke.whave=0,ke.wnext=0,Me(ve))}function We(ve,ke){var ce,ft;return!ve||!ve.state||(ft=ve.state,ke<0?(ce=0,ke=-ke):(ce=(ke>>4)+1,ke<48&&(ke&=15)),ke&&(ke<8||ke>15))?v:(ft.window!==null&&ft.wbits!==ke&&(ft.window=null),ft.wrap=ce,ft.wbits=ke,Ee(ve))}function kt(ve,ke){var ce,ft;return ve?(ft=new xe,ve.state=ft,ft.window=null,ce=We(ve,ke),ce!==h&&(ve.state=null),ce):v}function at(ve){return kt(ve,oe)}var _t=!0,jt,Dt;function Gt(ve){if(_t){var ke;for(jt=new e.Buf32(512),Dt=new e.Buf32(32),ke=0;ke<144;)ve.lens[ke++]=8;for(;ke<256;)ve.lens[ke++]=9;for(;ke<280;)ve.lens[ke++]=7;for(;ke<288;)ve.lens[ke++]=8;for(a(o,ve.lens,0,288,jt,0,ve.work,{bits:9}),ke=0;ke<32;)ve.lens[ke++]=5;a(s,ve.lens,0,32,Dt,0,ve.work,{bits:5}),_t=!1}ve.lencode=jt,ve.lenbits=9,ve.distcode=Dt,ve.distbits=5}function ye(ve,ke,ce,ft){var vt,M=ve.state;return M.window===null&&(M.wsize=1<<M.wbits,M.wnext=0,M.whave=0,M.window=new e.Buf8(M.wsize)),ft>=M.wsize?(e.arraySet(M.window,ke,ce-M.wsize,M.wsize,0),M.wnext=0,M.whave=M.wsize):(vt=M.wsize-M.wnext,vt>ft&&(vt=ft),e.arraySet(M.window,ke,ce-ft,vt,M.wnext),ft-=vt,ft?(e.arraySet(M.window,ke,ce-ft,ft,0),M.wnext=ft,M.whave=M.wsize):(M.wnext+=vt,M.wnext===M.wsize&&(M.wnext=0),M.whave<M.wsize&&(M.whave+=vt))),0}function I(ve,ke){var ce,ft,vt,M,Be,tt,ge,De,Ke,Nt,pe,H,z,W,he=0,Ae,He,pt,Vt,ut,Tt,Mt,Xt,An=new e.Buf8(4),zn,vr,wr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ve||!ve.state||!ve.output||!ve.input&&ve.avail_in!==0)return v;ce=ve.state,ce.mode===q&&(ce.mode=ne),Be=ve.next_out,vt=ve.output,ge=ve.avail_out,M=ve.next_in,ft=ve.input,tt=ve.avail_in,De=ce.hold,Ke=ce.bits,Nt=tt,pe=ge,Xt=h;e:for(;;)switch(ce.mode){case E:if(ce.wrap===0){ce.mode=ne;break}for(;Ke<16;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(ce.wrap&2&&De===35615){ce.check=0,An[0]=De&255,An[1]=De>>>8&255,ce.check=n(ce.check,An,2,0),De=0,Ke=0,ce.mode=C;break}if(ce.flags=0,ce.head&&(ce.head.done=!1),!(ce.wrap&1)||(((De&255)<<8)+(De>>8))%31){ve.msg="incorrect header check",ce.mode=Le;break}if((De&15)!==S){ve.msg="unknown compression method",ce.mode=Le;break}if(De>>>=4,Ke-=4,Mt=(De&15)+8,ce.wbits===0)ce.wbits=Mt;else if(Mt>ce.wbits){ve.msg="invalid window size",ce.mode=Le;break}ce.dmax=1<<Mt,ve.adler=ce.check=1,ce.mode=De&512?F:q,De=0,Ke=0;break;case C:for(;Ke<16;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(ce.flags=De,(ce.flags&255)!==S){ve.msg="unknown compression method",ce.mode=Le;break}if(ce.flags&57344){ve.msg="unknown header flags set",ce.mode=Le;break}ce.head&&(ce.head.text=De>>8&1),ce.flags&512&&(An[0]=De&255,An[1]=De>>>8&255,ce.check=n(ce.check,An,2,0)),De=0,Ke=0,ce.mode=k;case k:for(;Ke<32;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}ce.head&&(ce.head.time=De),ce.flags&512&&(An[0]=De&255,An[1]=De>>>8&255,An[2]=De>>>16&255,An[3]=De>>>24&255,ce.check=n(ce.check,An,4,0)),De=0,Ke=0,ce.mode=R;case R:for(;Ke<16;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}ce.head&&(ce.head.xflags=De&255,ce.head.os=De>>8),ce.flags&512&&(An[0]=De&255,An[1]=De>>>8&255,ce.check=n(ce.check,An,2,0)),De=0,Ke=0,ce.mode=D;case D:if(ce.flags&1024){for(;Ke<16;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}ce.length=De,ce.head&&(ce.head.extra_len=De),ce.flags&512&&(An[0]=De&255,An[1]=De>>>8&255,ce.check=n(ce.check,An,2,0)),De=0,Ke=0}else ce.head&&(ce.head.extra=null);ce.mode=O;case O:if(ce.flags&1024&&(H=ce.length,H>tt&&(H=tt),H&&(ce.head&&(Mt=ce.head.extra_len-ce.length,ce.head.extra||(ce.head.extra=new Array(ce.head.extra_len)),e.arraySet(ce.head.extra,ft,M,H,Mt)),ce.flags&512&&(ce.check=n(ce.check,ft,H,M)),tt-=H,M+=H,ce.length-=H),ce.length))break e;ce.length=0,ce.mode=L;case L:if(ce.flags&2048){if(tt===0)break e;H=0;do Mt=ft[M+H++],ce.head&&Mt&&ce.length<65536&&(ce.head.name+=String.fromCharCode(Mt));while(Mt&&H<tt);if(ce.flags&512&&(ce.check=n(ce.check,ft,H,M)),tt-=H,M+=H,Mt)break e}else ce.head&&(ce.head.name=null);ce.length=0,ce.mode=B;case B:if(ce.flags&4096){if(tt===0)break e;H=0;do Mt=ft[M+H++],ce.head&&Mt&&ce.length<65536&&(ce.head.comment+=String.fromCharCode(Mt));while(Mt&&H<tt);if(ce.flags&512&&(ce.check=n(ce.check,ft,H,M)),tt-=H,M+=H,Mt)break e}else ce.head&&(ce.head.comment=null);ce.mode=Y;case Y:if(ce.flags&512){for(;Ke<16;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(De!==(ce.check&65535)){ve.msg="header crc mismatch",ce.mode=Le;break}De=0,Ke=0}ce.head&&(ce.head.hcrc=ce.flags>>9&1,ce.head.done=!0),ve.adler=ce.check=0,ce.mode=q;break;case F:for(;Ke<32;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}ve.adler=ce.check=J(De),De=0,Ke=0,ce.mode=Z;case Z:if(ce.havedict===0)return ve.next_out=Be,ve.avail_out=ge,ve.next_in=M,ve.avail_in=tt,ce.hold=De,ce.bits=Ke,g;ve.adler=ce.check=1,ce.mode=q;case q:if(ke===u||ke===d)break e;case ne:if(ce.last){De>>>=Ke&7,Ke-=Ke&7,ce.mode=Ce;break}for(;Ke<3;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}switch(ce.last=De&1,De>>>=1,Ke-=1,De&3){case 0:ce.mode=ae;break;case 1:if(Gt(ce),ce.mode=X,ke===d){De>>>=2,Ke-=2;break e}break;case 2:ce.mode=ie;break;case 3:ve.msg="invalid block type",ce.mode=Le}De>>>=2,Ke-=2;break;case ae:for(De>>>=Ke&7,Ke-=Ke&7;Ke<32;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if((De&65535)!==(De>>>16^65535)){ve.msg="invalid stored block lengths",ce.mode=Le;break}if(ce.length=De&65535,De=0,Ke=0,ce.mode=re,ke===d)break e;case re:ce.mode=ee;case ee:if(H=ce.length,H){if(H>tt&&(H=tt),H>ge&&(H=ge),H===0)break e;e.arraySet(vt,ft,M,H,Be),tt-=H,M+=H,ge-=H,Be+=H,ce.length-=H;break}ce.mode=q;break;case ie:for(;Ke<14;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(ce.nlen=(De&31)+257,De>>>=5,Ke-=5,ce.ndist=(De&31)+1,De>>>=5,Ke-=5,ce.ncode=(De&15)+4,De>>>=4,Ke-=4,ce.nlen>286||ce.ndist>30){ve.msg="too many length or distance symbols",ce.mode=Le;break}ce.have=0,ce.mode=U;case U:for(;ce.have<ce.ncode;){for(;Ke<3;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}ce.lens[wr[ce.have++]]=De&7,De>>>=3,Ke-=3}for(;ce.have<19;)ce.lens[wr[ce.have++]]=0;if(ce.lencode=ce.lendyn,ce.lenbits=7,zn={bits:ce.lenbits},Xt=a(i,ce.lens,0,19,ce.lencode,0,ce.work,zn),ce.lenbits=zn.bits,Xt){ve.msg="invalid code lengths set",ce.mode=Le;break}ce.have=0,ce.mode=Q;case Q:for(;ce.have<ce.nlen+ce.ndist;){for(;he=ce.lencode[De&(1<<ce.lenbits)-1],Ae=he>>>24,He=he>>>16&255,pt=he&65535,!(Ae<=Ke);){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(pt<16)De>>>=Ae,Ke-=Ae,ce.lens[ce.have++]=pt;else{if(pt===16){for(vr=Ae+2;Ke<vr;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(De>>>=Ae,Ke-=Ae,ce.have===0){ve.msg="invalid bit length repeat",ce.mode=Le;break}Mt=ce.lens[ce.have-1],H=3+(De&3),De>>>=2,Ke-=2}else if(pt===17){for(vr=Ae+3;Ke<vr;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}De>>>=Ae,Ke-=Ae,Mt=0,H=3+(De&7),De>>>=3,Ke-=3}else{for(vr=Ae+7;Ke<vr;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}De>>>=Ae,Ke-=Ae,Mt=0,H=11+(De&127),De>>>=7,Ke-=7}if(ce.have+H>ce.nlen+ce.ndist){ve.msg="invalid bit length repeat",ce.mode=Le;break}for(;H--;)ce.lens[ce.have++]=Mt}}if(ce.mode===Le)break;if(ce.lens[256]===0){ve.msg="invalid code -- missing end-of-block",ce.mode=Le;break}if(ce.lenbits=9,zn={bits:ce.lenbits},Xt=a(o,ce.lens,0,ce.nlen,ce.lencode,0,ce.work,zn),ce.lenbits=zn.bits,Xt){ve.msg="invalid literal/lengths set",ce.mode=Le;break}if(ce.distbits=6,ce.distcode=ce.distdyn,zn={bits:ce.distbits},Xt=a(s,ce.lens,ce.nlen,ce.ndist,ce.distcode,0,ce.work,zn),ce.distbits=zn.bits,Xt){ve.msg="invalid distances set",ce.mode=Le;break}if(ce.mode=X,ke===d)break e;case X:ce.mode=de;case de:if(tt>=6&&ge>=258){ve.next_out=Be,ve.avail_out=ge,ve.next_in=M,ve.avail_in=tt,ce.hold=De,ce.bits=Ke,r(ve,pe),Be=ve.next_out,vt=ve.output,ge=ve.avail_out,M=ve.next_in,ft=ve.input,tt=ve.avail_in,De=ce.hold,Ke=ce.bits,ce.mode===q&&(ce.back=-1);break}for(ce.back=0;he=ce.lencode[De&(1<<ce.lenbits)-1],Ae=he>>>24,He=he>>>16&255,pt=he&65535,!(Ae<=Ke);){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(He&&(He&240)===0){for(Vt=Ae,ut=He,Tt=pt;he=ce.lencode[Tt+((De&(1<<Vt+ut)-1)>>Vt)],Ae=he>>>24,He=he>>>16&255,pt=he&65535,!(Vt+Ae<=Ke);){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}De>>>=Vt,Ke-=Vt,ce.back+=Vt}if(De>>>=Ae,Ke-=Ae,ce.back+=Ae,ce.length=pt,He===0){ce.mode=Re;break}if(He&32){ce.back=-1,ce.mode=q;break}if(He&64){ve.msg="invalid literal/length code",ce.mode=Le;break}ce.extra=He&15,ce.mode=be;case be:if(ce.extra){for(vr=ce.extra;Ke<vr;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}ce.length+=De&(1<<ce.extra)-1,De>>>=ce.extra,Ke-=ce.extra,ce.back+=ce.extra}ce.was=ce.length,ce.mode=_e;case _e:for(;he=ce.distcode[De&(1<<ce.distbits)-1],Ae=he>>>24,He=he>>>16&255,pt=he&65535,!(Ae<=Ke);){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if((He&240)===0){for(Vt=Ae,ut=He,Tt=pt;he=ce.distcode[Tt+((De&(1<<Vt+ut)-1)>>Vt)],Ae=he>>>24,He=he>>>16&255,pt=he&65535,!(Vt+Ae<=Ke);){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}De>>>=Vt,Ke-=Vt,ce.back+=Vt}if(De>>>=Ae,Ke-=Ae,ce.back+=Ae,He&64){ve.msg="invalid distance code",ce.mode=Le;break}ce.offset=pt,ce.extra=He&15,ce.mode=Pe;case Pe:if(ce.extra){for(vr=ce.extra;Ke<vr;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}ce.offset+=De&(1<<ce.extra)-1,De>>>=ce.extra,Ke-=ce.extra,ce.back+=ce.extra}if(ce.offset>ce.dmax){ve.msg="invalid distance too far back",ce.mode=Le;break}ce.mode=Ne;case Ne:if(ge===0)break e;if(H=pe-ge,ce.offset>H){if(H=ce.offset-H,H>ce.whave&&ce.sane){ve.msg="invalid distance too far back",ce.mode=Le;break}H>ce.wnext?(H-=ce.wnext,z=ce.wsize-H):z=ce.wnext-H,H>ce.length&&(H=ce.length),W=ce.window}else W=vt,z=Be-ce.offset,H=ce.length;H>ge&&(H=ge),ge-=H,ce.length-=H;do vt[Be++]=W[z++];while(--H);ce.length===0&&(ce.mode=de);break;case Re:if(ge===0)break e;vt[Be++]=ce.length,ge--,ce.mode=de;break;case Ce:if(ce.wrap){for(;Ke<32;){if(tt===0)break e;tt--,De|=ft[M++]<<Ke,Ke+=8}if(pe-=ge,ve.total_out+=pe,ce.total+=pe,pe&&(ve.adler=ce.check=ce.flags?n(ce.check,vt,pe,Be-pe):t(ce.check,vt,pe,Be-pe)),pe=ge,(ce.flags?De:J(De))!==ce.check){ve.msg="incorrect data check",ce.mode=Le;break}De=0,Ke=0}ce.mode=Fe;case Fe:if(ce.wrap&&ce.flags){for(;Ke<32;){if(tt===0)break e;tt--,De+=ft[M++]<<Ke,Ke+=8}if(De!==(ce.total&4294967295)){ve.msg="incorrect length check",ce.mode=Le;break}De=0,Ke=0}ce.mode=Qe;case Qe:Xt=p;break e;case Le:Xt=b;break e;case Ie:return _;case V:default:return v}return ve.next_out=Be,ve.avail_out=ge,ve.next_in=M,ve.avail_in=tt,ce.hold=De,ce.bits=Ke,(ce.wsize||pe!==ve.avail_out&&ce.mode<Le&&(ce.mode<Ce||ke!==l))&&ye(ve,ve.output,ve.next_out,pe-ve.avail_out),Nt-=ve.avail_in,pe-=ve.avail_out,ve.total_in+=Nt,ve.total_out+=pe,ce.total+=pe,ce.wrap&&pe&&(ve.adler=ce.check=ce.flags?n(ce.check,vt,pe,ve.next_out-pe):t(ce.check,vt,pe,ve.next_out-pe)),ve.data_type=ce.bits+(ce.last?64:0)+(ce.mode===q?128:0)+(ce.mode===X||ce.mode===re?256:0),(Nt===0&&pe===0||ke===l)&&Xt===h&&(Xt=x),Xt}function G(ve){if(!ve||!ve.state)return v;var ke=ve.state;return ke.window&&(ke.window=null),ve.state=null,h}function fe(ve,ke){var ce;return!ve||!ve.state||(ce=ve.state,(ce.wrap&2)===0)?v:(ce.head=ke,ke.done=!1,h)}function Oe(ve,ke){var ce=ke.length,ft,vt,M;return!ve||!ve.state||(ft=ve.state,ft.wrap!==0&&ft.mode!==Z)?v:ft.mode===Z&&(vt=1,vt=t(vt,ke,ce,0),vt!==ft.check)?b:(M=ye(ve,ke,ce,ce),M?(ft.mode=Ie,_):(ft.havedict=1,h))}return go.inflateReset=Ee,go.inflateReset2=We,go.inflateResetKeep=Me,go.inflateInit=at,go.inflateInit2=kt,go.inflate=I,go.inflateEnd=G,go.inflateGetHeader=fe,go.inflateSetDictionary=Oe,go.inflateInfo="pako inflate (from Nodeca project)",go}var GS,O4;function DP(){return O4||(O4=1,GS={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),GS}var WS,D4;function Jte(){if(D4)return WS;D4=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return WS=e,WS}var j4;function Qte(){if(j4)return zf;j4=1;var e=Xte(),t=Eu(),n=IP(),r=DP(),a=jk(),i=OP(),o=Jte(),s=Object.prototype.toString;function l(h){if(!(this instanceof l))return new l(h);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},h||{});var p=this.options;p.raw&&p.windowBits>=0&&p.windowBits<16&&(p.windowBits=-p.windowBits,p.windowBits===0&&(p.windowBits=-15)),p.windowBits>=0&&p.windowBits<16&&!(h&&h.windowBits)&&(p.windowBits+=32),p.windowBits>15&&p.windowBits<48&&(p.windowBits&15)===0&&(p.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var g=e.inflateInit2(this.strm,p.windowBits);if(g!==r.Z_OK)throw new Error(a[g]);if(this.header=new o,e.inflateGetHeader(this.strm,this.header),p.dictionary&&(typeof p.dictionary=="string"?p.dictionary=n.string2buf(p.dictionary):s.call(p.dictionary)==="[object ArrayBuffer]"&&(p.dictionary=new Uint8Array(p.dictionary)),p.raw&&(g=e.inflateSetDictionary(this.strm,p.dictionary),g!==r.Z_OK)))throw new Error(a[g])}l.prototype.push=function(h,p){var g=this.strm,v=this.options.chunkSize,b=this.options.dictionary,_,x,S,E,C,k=!1;if(this.ended)return!1;x=p===~~p?p:p===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=n.binstring2buf(h):s.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new t.Buf8(v),g.next_out=0,g.avail_out=v),_=e.inflate(g,r.Z_NO_FLUSH),_===r.Z_NEED_DICT&&b&&(_=e.inflateSetDictionary(this.strm,b)),_===r.Z_BUF_ERROR&&k===!0&&(_=r.Z_OK,k=!1),_!==r.Z_STREAM_END&&_!==r.Z_OK)return this.onEnd(_),this.ended=!0,!1;g.next_out&&(g.avail_out===0||_===r.Z_STREAM_END||g.avail_in===0&&(x===r.Z_FINISH||x===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(S=n.utf8border(g.output,g.next_out),E=g.next_out-S,C=n.buf2string(g.output,S),g.next_out=E,g.avail_out=v-E,E&&t.arraySet(g.output,g.output,S,E,0),this.onData(C)):this.onData(t.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(k=!0)}while((g.avail_in>0||g.avail_out===0)&&_!==r.Z_STREAM_END);return _===r.Z_STREAM_END&&(x=r.Z_FINISH),x===r.Z_FINISH?(_=e.inflateEnd(this.strm),this.onEnd(_),this.ended=!0,_===r.Z_OK):(x===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},l.prototype.onData=function(h){this.chunks.push(h)},l.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function u(h,p){var g=new l(p);if(g.push(h,!0),g.err)throw g.msg||a[g.err];return g.result}function d(h,p){return p=p||{},p.raw=!0,u(h,p)}return zf.Inflate=l,zf.inflate=u,zf.inflateRaw=d,zf.ungzip=u,zf}var KS,M4;function ene(){if(M4)return KS;M4=1;var e=Eu().assign,t=Kte(),n=Qte(),r=DP(),a={};return e(a,t,n,r),KS=a,KS}var tne=ene();const Mk=si(tne);var ZS,P4;function nne(){if(P4)return ZS;P4=1;const e=(t,n)=>function(...r){const a=n.promiseModule;return new a((i,o)=>{n.multiArgs?r.push((...s)=>{n.errorFirst?s[0]?o(s):(s.shift(),i(s)):i(s)}):n.errorFirst?r.push((s,l)=>{s?o(s):i(l)}):r.push(i),t.apply(this,r)})};return ZS=(t,n)=>{n=Object.assign({exclude:[/.+(Sync|Stream)$/],errorFirst:!0,promiseModule:Promise},n);const r=typeof t;if(!(t!==null&&(r==="object"||r==="function")))throw new TypeError(`Expected \`input\` to be a \`Function\` or \`Object\`, got \`${t===null?"null":r}\``);const a=o=>{const s=l=>typeof l=="string"?o===l:l.test(o);return n.include?n.include.some(s):!n.exclude.some(s)};let i;r==="function"?i=function(...o){return n.excludeMain?t(...o):e(t,n).apply(this,o)}:i=Object.create(Object.getPrototypeOf(t));for(const o in t){const s=t[o];i[o]=typeof s=="function"&&a(o)?e(s,n):s}return i},ZS}var rne=nne();const YS=si(rne);var XS,F4;function ane(){if(F4)return XS;F4=1;var e={};function t(re){return Array.isArray(re)?re:[re]}const n="",r=" ",a="\\",i=/^\s+$/,o=/(?:[^\\]|^)\\$/,s=/^\\!/,l=/^\\#/,u=/\r?\n/g,d=/^\.*\/|^\.+$/,h="/";let p="node-ignore";typeof Symbol<"u"&&(p=Symbol.for("node-ignore"));const g=p,v=(re,ee,ie)=>Object.defineProperty(re,ee,{value:ie}),b=/([0-z])-([0-z])/g,_=()=>!1,x=re=>re.replace(b,(ee,ie,U)=>ie.charCodeAt(0)<=U.charCodeAt(0)?ee:n),S=re=>{const{length:ee}=re;return re.slice(0,ee-ee%2)},E=[[/^\uFEFF/,()=>n],[/((?:\\\\)*?)(\\?\s+)$/,(re,ee,ie)=>ee+(ie.indexOf("\\")===0?r:n)],[/(\\+?)\s/g,(re,ee)=>{const{length:ie}=ee;return ee.slice(0,ie-ie%2)+r}],[/[\\$.|*+(){^]/g,re=>`\\${re}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(re,ee,ie)=>ee+6<ie.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)(\\\*)+(?=.+)/g,(re,ee,ie)=>{const U=ie.replace(/\\\*/g,"[^\\/]*");return ee+U}],[/\\\\\\(?=[$.|*+(){^])/g,()=>a],[/\\\\/g,()=>a],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,(re,ee,ie,U,Q)=>ee===a?`\\[${ie}${S(U)}${Q}`:Q==="]"&&U.length%2===0?`[${x(ie)}${U}]`:"[]"],[/(?:[^*])$/,re=>/\/$/.test(re)?`${re}$`:`${re}(?=$|\\/$)`],[/(\^|\\\/)?\\\*$/,(re,ee)=>`${ee?`${ee}[^/]+`:"[^/]*"}(?=$|\\/$)`]],C=Object.create(null),k=(re,ee)=>{let ie=C[re];return ie||(ie=E.reduce((U,[Q,X])=>U.replace(Q,X.bind(re)),re),C[re]=ie),ee?new RegExp(ie,"i"):new RegExp(ie)},R=re=>typeof re=="string",D=re=>re&&R(re)&&!i.test(re)&&!o.test(re)&&re.indexOf("#")!==0,O=re=>re.split(u);class L{constructor(ee,ie,U,Q){this.origin=ee,this.pattern=ie,this.negative=U,this.regex=Q}}const B=(re,ee)=>{const ie=re;let U=!1;re.indexOf("!")===0&&(U=!0,re=re.substr(1)),re=re.replace(s,"!").replace(l,"#");const Q=k(re,ee);return new L(ie,re,U,Q)},Y=(re,ee)=>{throw new ee(re)},F=(re,ee,ie)=>R(re)?re?F.isNotRelative(re)?ie(`path should be a \`path.relative()\`d string, but got "${ee}"`,RangeError):!0:ie("path must not be empty",TypeError):ie(`path must be a string, but got \`${ee}\``,TypeError),Z=re=>d.test(re);F.isNotRelative=Z,F.convert=re=>re;class q{constructor({ignorecase:ee=!0,ignoreCase:ie=ee,allowRelativePaths:U=!1}={}){v(this,g,!0),this._rules=[],this._ignoreCase=ie,this._allowRelativePaths=U,this._initCache()}_initCache(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}_addPattern(ee){if(ee&&ee[g]){this._rules=this._rules.concat(ee._rules),this._added=!0;return}if(D(ee)){const ie=B(ee,this._ignoreCase);this._added=!0,this._rules.push(ie)}}add(ee){return this._added=!1,t(R(ee)?O(ee):ee).forEach(this._addPattern,this),this._added&&this._initCache(),this}addPattern(ee){return this.add(ee)}_testOne(ee,ie){let U=!1,Q=!1;return this._rules.forEach(X=>{const{negative:de}=X;if(Q===de&&U!==Q||de&&!U&&!Q&&!ie)return;X.regex.test(ee)&&(U=!de,Q=de)}),{ignored:U,unignored:Q}}_test(ee,ie,U,Q){const X=ee&&F.convert(ee);return F(X,ee,this._allowRelativePaths?_:Y),this._t(X,ie,U,Q)}_t(ee,ie,U,Q){if(ee in ie)return ie[ee];if(Q||(Q=ee.split(h)),Q.pop(),!Q.length)return ie[ee]=this._testOne(ee,U);const X=this._t(Q.join(h)+h,ie,U,Q);return ie[ee]=X.ignored?X:this._testOne(ee,U)}ignores(ee){return this._test(ee,this._ignoreCache,!1).ignored}createFilter(){return ee=>!this.ignores(ee)}filter(ee){return t(ee).filter(this.createFilter())}test(ee){return this._test(ee,this._testCache,!0)}}const ne=re=>new q(re),ae=re=>F(re&&F.convert(re),re,_);if(ne.isPathValid=ae,ne.default=ne,XS=ne,typeof Xr<"u"&&(e&&e.IGNORE_TEST_WIN32||Xr.platform==="win32")){const re=ie=>/^\\\\\?\\/.test(ie)||/["<>|\u0000-\u001F]+/u.test(ie)?ie:ie.replace(/\\/g,"/");F.convert=re;const ee=/^[a-z]:\//i;F.isNotRelative=ie=>ee.test(ie)||Z(ie)}return XS}var ine=ane();const one=si(ine);var JS,L4;function sne(){if(L4)return JS;L4=1;function e(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function t(r,a,i){return a=a instanceof RegExp?a:new RegExp(e(a),"g"),r.replace(a,i)}var n={clean:function(a){if(typeof a!="string")throw new Error("Expected a string, received: "+a);return a=t(a,"./","/"),a=t(a,"..","."),a=t(a," ","-"),a=t(a,/^[~^:?*\\\-]/g,""),a=t(a,/[~^:?*\\]/g,"-"),a=t(a,/[~^:?*\\\-]$/g,""),a=t(a,"@{","-"),a=t(a,/\.$/g,""),a=t(a,/\/$/g,""),a=t(a,/\.lock$/g,""),a}};return JS=n,JS}var lne=sne();const js=si(lne);var QS,$4;function cne(){return $4||($4=1,QS=function(e,t){var n=e,r=t,a=n.length,i=r.length,o=!1,s=null,l=a+1,u=[],d=[],h=[],p="",g=-1,v=0,b=1,_,x,S=function(){a>=i&&(_=n,x=a,n=r,r=_,a=i,i=x,o=!0,l=a+1)},E=function(D,O,L){return{x:D,y:O,k:L}},C=function(D,O){return{elem:D,t:O}},k=function(D,O,L){var B,Y,F;for(O>L?B=u[D-1+l]:B=u[D+1+l],F=Math.max(O,L),Y=F-D;Y<a&&F<i&&n[Y]===r[F];)++Y,++F;return u[D+l]=d.length,d[d.length]=new E(Y,F,B),F},R=function(D){var O,L,B;for(O=L=0,B=D.length-1;B>=0;--B)for(;O<D[B].x||L<D[B].y;)D[B].y-D[B].x>L-O?(o?h[h.length]=new C(r[L],g):h[h.length]=new C(r[L],b),++L):D[B].y-D[B].x<L-O?(o?h[h.length]=new C(n[O],b):h[h.length]=new C(n[O],g),++O):(h[h.length]=new C(n[O],v),p+=n[O],++O,++L)};return S(),{SES_DELETE:-1,SES_COMMON:0,SES_ADD:1,editdistance:function(){return s},getlcs:function(){return p},getses:function(){return h},compose:function(){var D,O,L,B,Y,F,Z,q;for(D=i-a,O=a+i+3,L={},Z=0;Z<O;++Z)L[Z]=-1,u[Z]=-1;B=-1;do{for(++B,q=-B;q<=D-1;++q)L[q+l]=k(q,L[q-1+l]+1,L[q+1+l]);for(q=D+B;q>=D+1;--q)L[q+l]=k(q,L[q-1+l]+1,L[q+1+l]);L[D+l]=k(D,L[D-1+l]+1,L[D+1+l])}while(L[D+l]!==i);for(s=D+2*B,Y=u[D+l],F=[];Y!==-1;)F[F.length]=new E(d[Y].x,d[Y].y,null),Y=d[Y].k;R(F)}}}),QS}var eE,B4;function une(){if(B4)return eE;B4=1;var e=cne();function t(i,o){var s=new e(i,o);s.compose();for(var l=s.getses(),u,d,h=i.length-1,p=o.length-1,g=l.length-1;g>=0;--g)l[g].t===s.SES_COMMON?(d?(d.chain={file1index:h,file2index:p,chain:null},d=d.chain):(u={file1index:h,file2index:p,chain:null},d=u),h--,p--):l[g].t===s.SES_DELETE?h--:l[g].t===s.SES_ADD&&p--;var v={file1index:-1,file2index:-1,chain:null};return d?(d.chain=v,u):v}function n(i,o){for(var s=[],l=i.length,u=o.length,d=t(i,o);d!==null;d=d.chain){var h=l-d.file1index-1,p=u-d.file2index-1;l=d.file1index,u=d.file2index,(h||p)&&s.push({file1:[l+1,h],file2:[u+1,p]})}return s.reverse(),s}function r(i,o,s){var l,u=n(o,i),d=n(o,s),h=[];function p(ee,ie){h.push([ee.file1[0],ie,ee.file1[1],ee.file2[0],ee.file2[1]])}for(l=0;l<u.length;l++)p(u[l],0);for(l=0;l<d.length;l++)p(d[l],2);h.sort(function(ee,ie){return ee[0]-ie[0]});var g=[],v=0;function b(ee){ee>v&&(g.push([1,v,ee-v]),v=ee)}for(var _=0;_<h.length;_++){for(var x=_,S=h[_],E=S[0],C=E+S[2];_<h.length-1;){var k=h[_+1],R=k[0];if(R>C)break;C=Math.max(C,R+k[2]),_++}if(b(E),x==_)S[4]>0&&g.push([S[1],S[3],S[4]]);else{var D={0:[i.length,-1,o.length,-1],2:[s.length,-1,o.length,-1]};for(l=x;l<=_;l++){S=h[l];var O=S[1],L=D[O],B=S[0],Y=B+S[2],F=S[3],Z=F+S[4];L[0]=Math.min(F,L[0]),L[1]=Math.max(Z,L[1]),L[2]=Math.min(B,L[2]),L[3]=Math.max(Y,L[3])}var q=D[0][0]+(E-D[0][2]),ne=D[0][1]+(C-D[0][3]),ae=D[2][0]+(E-D[2][2]),re=D[2][1]+(C-D[2][3]);g.push([-1,q,ne-q,E,C-E,ae,re-ae])}v=C}return b(o.length),g}function a(i,o,s){var l=[],u=[i,o,s],d=r(i,o,s),h=[];function p(){h.length&&l.push({ok:h}),h=[]}function g(S){for(var E=0;E<S.length;E++)h.push(S[E])}function v(S){if(S[2]!=S[6])return!0;for(var E=S[1],C=S[5],k=0;k<S[2];k++)if(i[k+E]!=s[k+C])return!0;return!1}for(var b=0;b<d.length;b++){var _=d[b],x=_[0];x==-1?v(_)?(p(),l.push({conflict:{a:i.slice(_[1],_[1]+_[2]),aIndex:_[1],o:o.slice(_[3],_[3]+_[4]),oIndex:_[3],b:s.slice(_[5],_[5]+_[6]),bIndex:_[5]}})):g(u[0].slice(_[1],_[1]+_[2])):g(u[x].slice(_[1],_[1]+_[2]))}return p(),l}return eE=a,eE}var dne=une();const fne=si(dne);class Qn extends Error{constructor(t){super(t),this.caller=""}toJSON(){return{code:this.code,data:this.data,caller:this.caller,message:this.message,stack:this.stack}}fromJSON(t){const n=new Qn(t.message);return n.code=t.code,n.data=t.data,n.caller=t.caller,n.stack=t.stack,n}get isIsomorphicGitError(){return!0}}class fg extends Qn{constructor(t){super(`Modifying the index is not possible because you have unmerged files: ${t.toString}. Fix them up in the work tree, and then use 'git add/rm as appropriate to mark resolution and make a commit.`),this.code=this.name=fg.code,this.data={filepaths:t}}}fg.code="UnmergedPathsError";class In extends Qn{constructor(t){super(`An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${t}`),this.code=this.name=In.code,this.data={message:t}}}In.code="InternalError";class Kh extends Qn{constructor(t){super(`The filepath "${t}" contains unsafe character sequences`),this.code=this.name=Kh.code,this.data={filepath:t}}}Kh.code="UnsafeFilepathError";class Is{constructor(t){this.buffer=t,this._start=0}eof(){return this._start>=this.buffer.length}tell(){return this._start}seek(t){this._start=t}slice(t){const n=this.buffer.slice(this._start,this._start+t);return this._start+=t,n}toString(t,n){const r=this.buffer.toString(t,this._start,this._start+n);return this._start+=n,r}write(t,n,r){const a=this.buffer.write(t,this._start,n,r);return this._start+=n,a}copy(t,n,r){const a=t.copy(this.buffer,this._start,n,r);return this._start+=a,a}readUInt8(){const t=this.buffer.readUInt8(this._start);return this._start+=1,t}writeUInt8(t){const n=this.buffer.writeUInt8(t,this._start);return this._start+=1,n}readUInt16BE(){const t=this.buffer.readUInt16BE(this._start);return this._start+=2,t}writeUInt16BE(t){const n=this.buffer.writeUInt16BE(t,this._start);return this._start+=2,n}readUInt32BE(){const t=this.buffer.readUInt32BE(this._start);return this._start+=4,t}writeUInt32BE(t){const n=this.buffer.writeUInt32BE(t,this._start);return this._start+=4,n}}function Qw(e,t){return-(e<t)||+(e>t)}function jP(e,t){return Qw(e.path,t.path)}function MP(e){let t=e>0?e>>12:0;t!==4&&t!==8&&t!==10&&t!==14&&(t=8);let n=e&511;return n&73?n=493:n=420,t!==8&&(n=0),(t<<12)+n}const Es=2**32;function z4(e,t,n,r){if(e!==void 0&&t!==void 0)return[e,t];n===void 0&&(n=r.valueOf());const a=Math.floor(n/1e3),i=(n-a*1e3)*1e6;return[a,i]}function _h(e){const[t,n]=z4(e.ctimeSeconds,e.ctimeNanoseconds,e.ctimeMs,e.ctime),[r,a]=z4(e.mtimeSeconds,e.mtimeNanoseconds,e.mtimeMs,e.mtime);return{ctimeSeconds:t%Es,ctimeNanoseconds:n%Es,mtimeSeconds:r%Es,mtimeNanoseconds:a%Es,dev:e.dev%Es,ino:e.ino%Es,mode:MP(e.mode%Es),uid:e.uid%Es,gid:e.gid%Es,size:e.size>-1?e.size%Es:0}}function hne(e){let t="";for(const n of new Uint8Array(e))n<16&&(t+="0"),t+=n.toString(16);return t}let tE=null;async function Vl(e){return tE===null&&(tE=await mne()),tE?PP(e):pne(e)}function pne(e){return new AP().update(e).digest("hex")}async function PP(e){const t=await crypto.subtle.digest("SHA-1",e);return hne(t)}async function mne(){try{if(await PP(new Uint8Array([]))==="da39a3ee5e6b4b0d3255bfef95601890afd80709")return!0}catch{}return!1}function gne(e){return{assumeValid:!!(e&32768),extended:!!(e&16384),stage:(e&12288)>>12,nameLength:e&4095}}function yne(e){const t=e.flags;return t.extended=!1,t.nameLength=Math.min(Yt.from(e.path).length,4095),(t.assumeValid?32768:0)+(t.extended?16384:0)+((t.stage&3)<<12)+(t.nameLength&4095)}class sd{constructor(t,n){this._dirty=!1,this._unmergedPaths=n||new Set,this._entries=t||new Map}_addEntry(t){if(t.flags.stage===0)t.stages=[t],this._entries.set(t.path,t),this._unmergedPaths.delete(t.path);else{let n=this._entries.get(t.path);n||(this._entries.set(t.path,t),n=t),n.stages[t.flags.stage]=t,this._unmergedPaths.add(t.path)}}static async from(t){if(Yt.isBuffer(t))return sd.fromBuffer(t);if(t===null)return new sd(null);throw new In("invalid type passed to GitIndex.from")}static async fromBuffer(t){if(t.length===0)throw new In("Index file is empty (.git/index)");const n=new sd,r=new Is(t),a=r.toString("utf8",4);if(a!=="DIRC")throw new In(`Invalid dircache magic file number: ${a}`);const i=await Vl(t.slice(0,-20)),o=t.slice(-20).toString("hex");if(o!==i)throw new In(`Invalid checksum in GitIndex buffer: expected ${o} but saw ${i}`);const s=r.readUInt32BE();if(s!==2)throw new In(`Unsupported dircache version: ${s}`);const l=r.readUInt32BE();let u=0;for(;!r.eof()&&u<l;){const d={};d.ctimeSeconds=r.readUInt32BE(),d.ctimeNanoseconds=r.readUInt32BE(),d.mtimeSeconds=r.readUInt32BE(),d.mtimeNanoseconds=r.readUInt32BE(),d.dev=r.readUInt32BE(),d.ino=r.readUInt32BE(),d.mode=r.readUInt32BE(),d.uid=r.readUInt32BE(),d.gid=r.readUInt32BE(),d.size=r.readUInt32BE(),d.oid=r.slice(20).toString("hex");const h=r.readUInt16BE();d.flags=gne(h);const p=t.indexOf(0,r.tell()+1)-r.tell();if(p<1)throw new In(`Got a path length of: ${p}`);if(d.path=r.toString("utf8",p),d.path.includes("..\\")||d.path.includes("../"))throw new Kh(d.path);let g=8-(r.tell()-12)%8;for(g===0&&(g=8);g--;){const v=r.readUInt8();if(v!==0)throw new In(`Expected 1-8 null characters but got '${v}' after ${d.path}`);if(r.eof())throw new In("Unexpected end of file")}d.stages=[],n._addEntry(d),u++}return n}get unmergedPaths(){return[...this._unmergedPaths]}get entries(){return[...this._entries.values()].sort(jP)}get entriesMap(){return this._entries}get entriesFlat(){return[...this.entries].flatMap(t=>t.stages.length>1?t.stages.filter(n=>n):t)}*[Symbol.iterator](){for(const t of this.entries)yield t}insert({filepath:t,stats:n,oid:r,stage:a=0}){n||(n={ctimeSeconds:0,ctimeNanoseconds:0,mtimeSeconds:0,mtimeNanoseconds:0,dev:0,ino:0,mode:0,uid:0,gid:0,size:0}),n=_h(n);const i=Yt.from(t),o={ctimeSeconds:n.ctimeSeconds,ctimeNanoseconds:n.ctimeNanoseconds,mtimeSeconds:n.mtimeSeconds,mtimeNanoseconds:n.mtimeNanoseconds,dev:n.dev,ino:n.ino,mode:n.mode||33188,uid:n.uid,gid:n.gid,size:n.size,path:t,oid:r,flags:{assumeValid:!1,extended:!1,stage:a,nameLength:i.length<4095?i.length:4095},stages:[]};this._addEntry(o),this._dirty=!0}delete({filepath:t}){if(this._entries.has(t))this._entries.delete(t);else for(const n of this._entries.keys())n.startsWith(t+"/")&&this._entries.delete(n);this._unmergedPaths.has(t)&&this._unmergedPaths.delete(t),this._dirty=!0}clear(){this._entries.clear(),this._dirty=!0}has({filepath:t}){return this._entries.has(t)}render(){return this.entries.map(t=>`${t.mode.toString(8)} ${t.oid}    ${t.path}`).join(`
`)}static async _entryToBuffer(t){const n=Yt.from(t.path),r=Math.ceil((62+n.length+1)/8)*8,a=Yt.alloc(r),i=new Is(a),o=_h(t);return i.writeUInt32BE(o.ctimeSeconds),i.writeUInt32BE(o.ctimeNanoseconds),i.writeUInt32BE(o.mtimeSeconds),i.writeUInt32BE(o.mtimeNanoseconds),i.writeUInt32BE(o.dev),i.writeUInt32BE(o.ino),i.writeUInt32BE(o.mode),i.writeUInt32BE(o.uid),i.writeUInt32BE(o.gid),i.writeUInt32BE(o.size),i.write(t.oid,20,"hex"),i.writeUInt16BE(yne(t)),i.write(t.path,n.length,"utf8"),a}async toObject(){const t=Yt.alloc(12),n=new Is(t);n.write("DIRC",4,"utf8"),n.writeUInt32BE(2),n.writeUInt32BE(this.entriesFlat.length);let r=[];for(const s of this.entries)if(r.push(sd._entryToBuffer(s)),s.stages.length>1)for(const l of s.stages)l&&l!==s&&r.push(sd._entryToBuffer(l));r=await Promise.all(r);const a=Yt.concat(r),i=Yt.concat([t,a]),o=await Vl(i);return Yt.concat([i,Yt.from(o,"hex")])}}function Mv(e,t,n=!0,r=!0){const a=_h(e),i=_h(t);return n&&a.mode!==i.mode||a.mtimeSeconds!==i.mtimeSeconds||a.ctimeSeconds!==i.ctimeSeconds||a.uid!==i.uid||a.gid!==i.gid||r&&a.ino!==i.ino||a.size!==i.size}let nE=null;const rE=Symbol("IndexCache");function bne(){return{map:new Map,stats:new Map}}async function vne(e,t,n){const[r,a]=await Promise.all([e.lstat(t),e.read(t)]),i=await sd.from(a);n.map.set(t,i),n.stats.set(t,r)}async function wne(e,t,n){const r=n.stats.get(t);if(r===void 0)return!0;if(r===null)return!1;const a=await e.lstat(t);return a===null?!1:Mv(r,a)}class Ma{static async acquire({fs:t,gitdir:n,cache:r,allowUnmerged:a=!0},i){r[rE]||(r[rE]=bne());const o=`${n}/index`;nE===null&&(nE=new v0({maxPending:1/0}));let s,l=[];return await nE.acquire(o,async()=>{const u=r[rE];await wne(t,o,u)&&await vne(t,o,u);const d=u.map.get(o);if(l=d.unmergedPaths,l.length&&!a)throw new fg(l);if(s=await i(d),d._dirty){const h=await d.toObject();await t.write(o,h),u.stats.set(o,await t.lstat(o)),d._dirty=!1}}),s}}function Pv(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t>-1&&(e=e.slice(t+1)),e}function xh(e){const t=Math.max(e.lastIndexOf("/"),e.lastIndexOf("\\"));return t===-1?".":t===0?"/":e.slice(0,t)}function FP(e){const t=new Map,n=function(a){if(!t.has(a)){const i={type:"tree",fullpath:a,basename:Pv(a),metadata:{},children:[]};t.set(a,i),i.parent=n(xh(a)),i.parent&&i.parent!==i&&i.parent.children.push(i)}return t.get(a)},r=function(a,i){if(!t.has(a)){const o={type:"blob",fullpath:a,basename:Pv(a),metadata:i,parent:n(xh(a)),children:[]};o.parent&&o.parent.children.push(o),t.set(a,o)}return t.get(a)};n(".");for(const a of e)r(a.path,a);return t}function _ne(e){switch(e){case 16384:return"tree";case 33188:return"blob";case 33261:return"blob";case 40960:return"blob";case 57344:return"commit"}throw new In(`Unexpected GitTree entry mode: ${e.toString(8)}`)}class xne{constructor({fs:t,gitdir:n,cache:r}){this.treePromise=Ma.acquire({fs:t,gitdir:n,cache:r},async function(i){return FP(i.entries)});const a=this;this.ConstructEntry=class{constructor(o){this._fullpath=o,this._type=!1,this._mode=!1,this._stat=!1,this._oid=!1}async type(){return a.type(this)}async mode(){return a.mode(this)}async stat(){return a.stat(this)}async content(){return a.content(this)}async oid(){return a.oid(this)}}}async readdir(t){const n=t._fullpath,a=(await this.treePromise).get(n);if(!a||a.type==="blob")return null;if(a.type!=="tree")throw new Error(`ENOTDIR: not a directory, scandir '${n}'`);const i=a.children.map(o=>o.fullpath);return i.sort(Qw),i}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const r=(await this.treePromise).get(t._fullpath);if(!r)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);const a=r.type==="tree"?{}:_h(r.metadata);t._type=r.type==="tree"?"tree":_ne(a.mode),t._mode=a.mode,r.type==="tree"?t._stat=void 0:t._stat=a}return t._stat}async content(t){}async oid(t){if(t._oid===!1){const r=(await this.treePromise).get(t._fullpath);t._oid=r.metadata.oid}return t._oid}}const e1=Symbol("GitWalkSymbol");function Zh(){const e=Object.create(null);return Object.defineProperty(e,e1,{value:function({fs:t,gitdir:n,cache:r}){return new xne({fs:t,gitdir:n,cache:r})}}),Object.freeze(e),e}class kr extends Qn{constructor(t){super(`Could not find ${t}.`),this.code=this.name=kr.code,this.data={what:t}}}kr.code="NotFoundError";class Si extends Qn{constructor(t,n,r,a){super(`Object ${t} ${a?`at ${a}`:""}was anticipated to be a ${r} but it is a ${n}.`),this.code=this.name=Si.code,this.data={oid:t,actual:n,expected:r,filepath:a}}}Si.code="ObjectTypeError";class uu extends Qn{constructor(t){super(`Expected a 40-char hex object id but saw "${t}".`),this.code=this.name=uu.code,this.data={value:t}}}uu.code="InvalidOidError";class hg extends Qn{constructor(t){super(`Could not find a fetch refspec for remote "${t}". Make sure the config file has an entry like the following:
[remote "${t}"]
	fetch = +refs/heads/*:refs/remotes/origin/*
`),this.code=this.name=hg.code,this.data={remote:t}}}hg.code="NoRefspecError";class Fv{constructor(t){if(this.refs=new Map,this.parsedConfig=[],t){let n=null;this.parsedConfig=t.trim().split(`
`).map(r=>{if(/^\s*#/.test(r))return{line:r,comment:!0};const a=r.indexOf(" ");if(r.startsWith("^")){const i=r.slice(1);return this.refs.set(n+"^{}",i),{line:r,ref:n,peeled:i}}else{const i=r.slice(0,a);return n=r.slice(a+1),this.refs.set(n,i),{line:r,ref:n,oid:i}}})}return this}static from(t){return new Fv(t)}delete(t){this.parsedConfig=this.parsedConfig.filter(n=>n.ref!==t),this.refs.delete(t)}toString(){return this.parsedConfig.map(({line:t})=>t).join(`
`)+`
`}}class Lv{constructor({remotePath:t,localPath:n,force:r,matchPrefix:a}){Object.assign(this,{remotePath:t,localPath:n,force:r,matchPrefix:a})}static from(t){const[n,r,a,i,o]=t.match(/^(\+?)(.*?)(\*?):(.*?)(\*?)$/).slice(1),s=n==="+",l=a==="*";if(l!==(o==="*"))throw new In("Invalid refspec");return new Lv({remotePath:r,localPath:i,force:s,matchPrefix:l})}translate(t){if(this.matchPrefix){if(t.startsWith(this.remotePath))return this.localPath+t.replace(this.remotePath,"")}else if(t===this.remotePath)return this.localPath;return null}reverseTranslate(t){if(this.matchPrefix){if(t.startsWith(this.localPath))return this.remotePath+t.replace(this.localPath,"")}else if(t===this.localPath)return this.remotePath;return null}}class Pk{constructor(t=[]){this.rules=t}static from(t){const n=[];for(const r of t)n.push(Lv.from(r));return new Pk(n)}add(t){const n=Lv.from(t);this.rules.push(n)}translate(t){const n=[];for(const r of this.rules)for(const a of t){const i=r.translate(a);i&&n.push([a,i])}return n}translateOne(t){let n=null;for(const r of this.rules){const a=r.translate(t);a&&(n=a)}return n}localNamespaces(){return this.rules.filter(t=>t.matchPrefix).map(t=>t.localPath.replace(/\/$/,""))}}function Sne(e,t){const n=e.replace(/\^\{\}$/,""),r=t.replace(/\^\{\}$/,""),a=-(n<r)||+(n>r);return a===0?e.endsWith("^{}")?1:-1:a}const Ene=e=>{if(typeof e=="number")return e;e=e.toLowerCase();let t=parseInt(e);return e.endsWith("k")&&(t*=1024),e.endsWith("m")&&(t*=1024*1024),e.endsWith("g")&&(t*=1024*1024*1024),t},Em=e=>{if(typeof e=="boolean")return e;if(e=e.trim().toLowerCase(),e==="true"||e==="yes"||e==="on")return!0;if(e==="false"||e==="no"||e==="off")return!1;throw Error(`Expected 'true', 'false', 'yes', 'no', 'on', or 'off', but got ${e}`)},U4={core:{filemode:Em,bare:Em,logallrefupdates:Em,symlinks:Em,ignorecase:Em,bigFileThreshold:Ene}},Cne=/^\[([A-Za-z0-9-.]+)(?: "(.*)")?\]$/,kne=/^[A-Za-z0-9-.]+$/,Tne=/^([A-Za-z][A-Za-z-]*)(?: *= *(.*))?$/,Ane=/^[A-Za-z][A-Za-z-]*$/,Nne=/^(.*?)( *[#;].*)$/,Rne=e=>{const t=Cne.exec(e);if(t!=null){const[n,r]=t.slice(1);return[n,r]}return null},Ine=e=>{const t=Tne.exec(e);if(t!=null){const[n,r="true"]=t.slice(1),a=One(r),i=Dne(a);return[n,i]}return null},One=e=>{const t=Nne.exec(e);if(t==null)return e;const[n,r]=t.slice(1);return H4(n)&&H4(r)?`${n}${r}`:n},H4=e=>(e.match(/(?:^|[^\\])"/g)||[]).length%2!==0,Dne=e=>e.split("").reduce((t,n,r,a)=>{const i=n==='"'&&a[r-1]!=="\\",o=n==="\\"&&a[r+1]==='"';return i||o?t:t+n},""),q4=e=>e!=null?e.toLowerCase():null,P2=(e,t,n)=>[q4(e),t,q4(n)].filter(r=>r!=null).join("."),V4=e=>{const t=e.split("."),n=t.shift(),r=t.pop(),a=t.length?t.join("."):void 0;return{section:n,subsection:a,name:r,path:P2(n,a,r),sectionPath:P2(n,a,null),isSection:!!n}},jne=(e,t)=>e.reduce((n,r,a)=>t(r)?a:n,-1);class Fk{constructor(t){let n=null,r=null;this.parsedConfig=t?t.split(`
`).map(a=>{let i=null,o=null;const s=a.trim(),l=Rne(s),u=l!=null;if(u)[n,r]=l;else{const h=Ine(s);h!=null&&([i,o]=h)}const d=P2(n,r,i);return{line:a,isSection:u,section:n,subsection:r,name:i,value:o,path:d}}):[]}static from(t){return new Fk(t)}async get(t,n=!1){const r=V4(t).path,a=this.parsedConfig.filter(i=>i.path===r).map(({section:i,name:o,value:s})=>{const l=U4[i]&&U4[i][o];return l?l(s):s});return n?a:a.pop()}async getall(t){return this.get(t,!0)}async getSubsections(t){return this.parsedConfig.filter(n=>n.isSection&&n.section===t).map(n=>n.subsection)}async deleteSection(t,n){this.parsedConfig=this.parsedConfig.filter(r=>!(r.section===t&&r.subsection===n))}async append(t,n){return this.set(t,n,!0)}async set(t,n,r=!1){const{section:a,subsection:i,name:o,path:s,sectionPath:l,isSection:u}=V4(t),d=jne(this.parsedConfig,h=>h.path===s);if(n==null)d!==-1&&this.parsedConfig.splice(d,1);else if(d!==-1){const h=this.parsedConfig[d],p=Object.assign({},h,{name:o,value:n,modified:!0});r?this.parsedConfig.splice(d+1,0,p):this.parsedConfig[d]=p}else{const h=this.parsedConfig.findIndex(g=>g.path===l),p={section:a,subsection:i,name:o,value:n,modified:!0,path:s};if(kne.test(a)&&Ane.test(o))if(h>=0)this.parsedConfig.splice(h+1,0,p);else{const g={isSection:u,section:a,subsection:i,modified:!0,path:l};this.parsedConfig.push(g,p)}}}toString(){return this.parsedConfig.map(({line:t,section:n,subsection:r,name:a,value:i,modified:o=!1})=>o?a!=null&&i!=null?typeof i=="string"&&/[#;]/.test(i)?`	${a} = "${i}"`:`	${a} = ${i}`:r!=null?`[${n} "${r}"]`:`[${n}]`:t).join(`
`)}}class pa{static async get({fs:t,gitdir:n}){const r=await t.read(`${n}/config`,{encoding:"utf8"});return Fk.from(r)}static async save({fs:t,gitdir:n,config:r}){await t.write(`${n}/config`,r.toString(),{encoding:"utf8"})}}const Eb=e=>[`${e}`,`refs/${e}`,`refs/tags/${e}`,`refs/heads/${e}`,`refs/remotes/${e}`,`refs/remotes/${e}/HEAD`],Mne=["config","description","index","shallow","commondir"];let aE;async function Pc(e,t){return aE===void 0&&(aE=new v0),aE.acquire(e,t)}class $t{static async updateRemoteRefs({fs:t,gitdir:n,remote:r,refs:a,symrefs:i,tags:o,refspecs:s=void 0,prune:l=!1,pruneTags:u=!1}){for(const _ of a.values())if(!_.match(/[0-9a-f]{40}/))throw new uu(_);const d=await pa.get({fs:t,gitdir:n});if(!s){if(s=await d.getall(`remote.${r}.fetch`),s.length===0)throw new hg(r);s.unshift(`+HEAD:refs/remotes/${r}/HEAD`)}const h=Pk.from(s),p=new Map;if(u){const _=await $t.listRefs({fs:t,gitdir:n,filepath:"refs/tags"});await $t.deleteRefs({fs:t,gitdir:n,refs:_.map(x=>`refs/tags/${x}`)})}if(o){for(const _ of a.keys())if(_.startsWith("refs/tags")&&!_.endsWith("^{}")&&!await $t.exists({fs:t,gitdir:n,ref:_})){const x=a.get(_);p.set(_,x)}}const g=h.translate([...a.keys()]);for(const[_,x]of g){const S=a.get(_);p.set(x,S)}const v=h.translate([...i.keys()]);for(const[_,x]of v){const S=i.get(_),E=h.translateOne(S);E&&p.set(x,`ref: ${E}`)}const b=[];if(l){for(const _ of h.localNamespaces()){const x=(await $t.listRefs({fs:t,gitdir:n,filepath:_})).map(S=>`${_}/${S}`);for(const S of x)p.has(S)||b.push(S)}b.length>0&&await $t.deleteRefs({fs:t,gitdir:n,refs:b})}for(const[_,x]of p)await Pc(_,async()=>t.write(Ot.join(n,_),`${x.trim()}
`,"utf8"));return{pruned:b}}static async writeRef({fs:t,gitdir:n,ref:r,value:a}){if(!a.match(/[0-9a-f]{40}/))throw new uu(a);await Pc(r,async()=>t.write(Ot.join(n,r),`${a.trim()}
`,"utf8"))}static async writeSymbolicRef({fs:t,gitdir:n,ref:r,value:a}){await Pc(r,async()=>t.write(Ot.join(n,r),`ref: ${a.trim()}
`,"utf8"))}static async deleteRef({fs:t,gitdir:n,ref:r}){return $t.deleteRefs({fs:t,gitdir:n,refs:[r]})}static async deleteRefs({fs:t,gitdir:n,refs:r}){await Promise.all(r.map(s=>t.rm(Ot.join(n,s))));let a=await Pc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));const i=Fv.from(a),o=i.refs.size;for(const s of r)i.refs.has(s)&&i.delete(s);i.refs.size<o&&(a=i.toString(),await Pc("packed-refs",async()=>t.write(`${n}/packed-refs`,a,{encoding:"utf8"})))}static async resolve({fs:t,gitdir:n,ref:r,depth:a=void 0}){if(a!==void 0&&(a--,a===-1))return r;if(r.startsWith("ref: "))return r=r.slice(5),$t.resolve({fs:t,gitdir:n,ref:r,depth:a});if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const i=await $t.packedRefs({fs:t,gitdir:n}),o=Eb(r).filter(s=>!Mne.includes(s));for(const s of o){const l=await Pc(s,async()=>await t.read(`${n}/${s}`,{encoding:"utf8"})||i.get(s));if(l)return $t.resolve({fs:t,gitdir:n,ref:l.trim(),depth:a})}throw new kr(r)}static async exists({fs:t,gitdir:n,ref:r}){try{return await $t.expand({fs:t,gitdir:n,ref:r}),!0}catch{return!1}}static async expand({fs:t,gitdir:n,ref:r}){if(r.length===40&&/[0-9a-f]{40}/.test(r))return r;const a=await $t.packedRefs({fs:t,gitdir:n}),i=Eb(r);for(const o of i)if(await Pc(o,async()=>t.exists(`${n}/${o}`))||a.has(o))return o;throw new kr(r)}static async expandAgainstMap({ref:t,map:n}){const r=Eb(t);for(const a of r)if(await n.has(a))return a;throw new kr(t)}static resolveAgainstMap({ref:t,fullref:n=t,depth:r=void 0,map:a}){if(r!==void 0&&(r--,r===-1))return{fullref:n,oid:t};if(t.startsWith("ref: "))return t=t.slice(5),$t.resolveAgainstMap({ref:t,fullref:n,depth:r,map:a});if(t.length===40&&/[0-9a-f]{40}/.test(t))return{fullref:n,oid:t};const i=Eb(t);for(const o of i){const s=a.get(o);if(s)return $t.resolveAgainstMap({ref:s.trim(),fullref:o,depth:r,map:a})}throw new kr(t)}static async packedRefs({fs:t,gitdir:n}){const r=await Pc("packed-refs",async()=>t.read(`${n}/packed-refs`,{encoding:"utf8"}));return Fv.from(r).refs}static async listRefs({fs:t,gitdir:n,filepath:r}){const a=$t.packedRefs({fs:t,gitdir:n});let i=null;try{i=await t.readdirDeep(`${n}/${r}`),i=i.map(o=>o.replace(`${n}/${r}/`,""))}catch{i=[]}for(let o of(await a).keys())o.startsWith(r)&&(o=o.replace(r+"/",""),i.includes(o)||i.push(o));return i.sort(Sne),i}static async listBranches({fs:t,gitdir:n,remote:r}){return r?$t.listRefs({fs:t,gitdir:n,filepath:`refs/remotes/${r}`}):$t.listRefs({fs:t,gitdir:n,filepath:"refs/heads"})}static async listTags({fs:t,gitdir:n}){return(await $t.listRefs({fs:t,gitdir:n,filepath:"refs/tags"})).filter(a=>!a.endsWith("^{}"))}}function Pne(e,t){return Qw(G4(e),G4(t))}function G4(e){return e.mode==="040000"?e.path+"/":e.path}function LP(e){switch(e){case"040000":return"tree";case"100644":return"blob";case"100755":return"blob";case"120000":return"blob";case"160000":return"commit"}throw new In(`Unexpected GitTree entry mode: ${e}`)}function Fne(e){const t=[];let n=0;for(;n<e.length;){const r=e.indexOf(32,n);if(r===-1)throw new In(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next space character.`);const a=e.indexOf(0,n);if(a===-1)throw new In(`GitTree: Error parsing buffer at byte location ${n}: Could not find the next null character.`);let i=e.slice(n,r).toString("utf8");i==="40000"&&(i="040000");const o=LP(i),s=e.slice(r+1,a).toString("utf8");if(s.includes("\\")||s.includes("/"))throw new Kh(s);const l=e.slice(a+1,a+21).toString("hex");n=a+21,t.push({mode:i,path:s,oid:l,type:o})}return t}function Lne(e){if(typeof e=="number"&&(e=e.toString(8)),e.match(/^0?4.*/))return"040000";if(e.match(/^1006.*/))return"100644";if(e.match(/^1007.*/))return"100755";if(e.match(/^120.*/))return"120000";if(e.match(/^160.*/))return"160000";throw new In(`Could not understand file mode: ${e}`)}function $ne(e){return!e.oid&&e.sha&&(e.oid=e.sha),e.mode=Lne(e.mode),e.type||(e.type=LP(e.mode)),e}class ji{constructor(t){if(Yt.isBuffer(t))this._entries=Fne(t);else if(Array.isArray(t))this._entries=t.map($ne);else throw new In("invalid type passed to GitTree constructor");this._entries.sort(jP)}static from(t){return new ji(t)}render(){return this._entries.map(t=>`${t.mode} ${t.type} ${t.oid}    ${t.path}`).join(`
`)}toObject(){const t=[...this._entries];return t.sort(Pne),Yt.concat(t.map(n=>{const r=Yt.from(n.mode.replace(/^0/,"")),a=Yt.from(" "),i=Yt.from(n.path,"utf8"),o=Yt.from([0]),s=Yt.from(n.oid,"hex");return Yt.concat([r,a,i,o,s])}))}entries(){return this._entries}*[Symbol.iterator](){for(const t of this._entries)yield t}}class Yh{static wrap({type:t,object:n}){return Yt.concat([Yt.from(`${t} ${n.byteLength.toString()}\0`),Yt.from(n)])}static unwrap(t){const n=t.indexOf(32),r=t.indexOf(0),a=t.slice(0,n).toString("utf8"),i=t.slice(n+1,r).toString("utf8"),o=t.length-(r+1);if(parseInt(i)!==o)throw new In(`Length mismatch: expected ${i} bytes but got ${o} instead.`);return{type:a,object:Yt.from(t.slice(r+1))}}}async function $P({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`,a=await e.read(`${t}/${r}`);return a?{object:a,format:"deflated",source:r}:null}function Bne(e,t){const n=new Is(e),r=W4(n);if(r!==t.byteLength)throw new In(`applyDelta expected source buffer to be ${r} bytes but the provided buffer was ${t.length} bytes`);const a=W4(n);let i;const o=Z4(n,t);if(o.byteLength===a)i=o;else{i=Yt.alloc(a);const s=new Is(i);for(s.copy(o);!n.eof();)s.copy(Z4(n,t));const l=s.tell();if(a!==l)throw new In(`applyDelta expected target buffer to be ${a} bytes but the resulting buffer was ${l} bytes`)}return i}function W4(e){let t=0,n=0,r=null;do r=e.readUInt8(),t|=(r&127)<<n,n+=7;while(r&128);return t}function K4(e,t,n){let r=0,a=0;for(;n--;)t&1&&(r|=e.readUInt8()<<a),t>>=1,a+=8;return r}function Z4(e,t){const n=e.readUInt8(),r=128,a=15,i=112;if(n&r){const o=K4(e,n&a,4);let s=K4(e,(n&i)>>4,3);return s===0&&(s=65536),t.slice(o,o+s)}else return e.slice(n)}function zne(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function BP(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:zne(e)}class zP{constructor(t){if(typeof Yt>"u")throw new Error("Missing Buffer dependency");this.stream=BP(t),this.buffer=null,this.cursor=0,this.undoCursor=0,this.started=!1,this._ended=!1,this._discardedBytes=0}eof(){return this._ended&&this.cursor===this.buffer.length}tell(){return this._discardedBytes+this.cursor}async byte(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(1),this.buffer[this.undoCursor]}async chunk(){if(!this.eof()&&(this.started||await this._init(),!(this.cursor===this.buffer.length&&(await this._loadnext(),this._ended))))return this._moveCursor(this.buffer.length),this.buffer.slice(this.undoCursor,this.cursor)}async read(t){if(!this.eof())return this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t),this.buffer.slice(this.undoCursor,this.cursor)}async skip(t){this.eof()||(this.started||await this._init(),this.cursor+t>this.buffer.length&&(this._trim(),await this._accumulate(t)),this._moveCursor(t))}async undo(){this.cursor=this.undoCursor}async _next(){this.started=!0;let{done:t,value:n}=await this.stream.next();return t&&(this._ended=!0,!n)?Yt.alloc(0):(n&&(n=Yt.from(n)),n)}_trim(){this.buffer=this.buffer.slice(this.undoCursor),this.cursor-=this.undoCursor,this._discardedBytes+=this.undoCursor,this.undoCursor=0}_moveCursor(t){this.undoCursor=this.cursor,this.cursor+=t,this.cursor>this.buffer.length&&(this.cursor=this.buffer.length)}async _accumulate(t){if(this._ended)return;const n=[this.buffer];for(;this.cursor+t>Une(n);){const r=await this._next();if(this._ended)break;n.push(r)}this.buffer=Yt.concat(n)}async _loadnext(){this._discardedBytes+=this.buffer.length,this.undoCursor=0,this.cursor=0,this.buffer=await this._next()}async _init(){this.buffer=await this._next()}}function Une(e){return e.reduce((t,n)=>t+n.length,0)}async function Hne(e,t){const n=new zP(e);let r=await n.read(4);if(r=r.toString("utf8"),r!=="PACK")throw new In(`Invalid PACK header '${r}'`);let a=await n.read(4);if(a=a.readUInt32BE(0),a!==2)throw new In(`Invalid packfile version: ${a}`);let i=await n.read(4);if(i=i.readUInt32BE(0),!(i<1))for(;!n.eof()&&i--;){const o=n.tell(),{type:s,length:l,ofs:u,reference:d}=await qne(n),h=new Mk.Inflate;for(;!h.result;){const p=await n.chunk();if(!p)break;if(h.push(p,!1),h.err)throw new In(`Pako error: ${h.msg}`);if(h.result){if(h.result.length!==l)throw new In("Inflated object size is different from that stated in packfile.");await n.undo(),await n.read(p.length-h.strm.avail_in);const g=n.tell();await t({data:h.result,type:s,num:i,offset:o,end:g,reference:d,ofs:u})}}}}async function qne(e){let t=await e.byte();const n=t>>4&7;let r=t&15;if(t&128){let o=4;do t=await e.byte(),r|=(t&127)<<o,o+=7;while(t&128)}let a,i;if(n===6){let o=0;a=0;const s=[];do t=await e.byte(),a|=(t&127)<<o,o+=7,s.push(t);while(t&128);i=Yt.from(s)}return n===7&&(i=await e.read(20)),{type:n,length:r,ofs:a,reference:i}}async function UP(e){return Mk.inflate(e)}function Vne(e){const t=[];let n=0,r=0;do{n=e.readUInt8();const a=n&127;t.push(a),r=n&128}while(r);return t.reduce((a,i)=>a+1<<7|i,-1)}function Gne(e,t){let n=t,r=4,a=null;do a=e.readUInt8(),n|=(a&127)<<r,r+=7;while(a&128);return n}class Sh{constructor(t){Object.assign(this,t),this.offsetCache={}}static async fromIdx({idx:t,getExternalRefDelta:n}){const r=new Is(t);if(r.slice(4).toString("hex")!=="ff744f63")return;const i=r.readUInt32BE();if(i!==2)throw new In(`Unable to read version ${i} packfile IDX. (Only version 2 supported)`);if(t.byteLength>2048*1024*1024)throw new In("To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.");r.seek(r.tell()+4*255);const o=r.readUInt32BE(),s=[];for(let d=0;d<o;d++){const h=r.slice(20).toString("hex");s[d]=h}r.seek(r.tell()+4*o);const l=new Map;for(let d=0;d<o;d++)l.set(s[d],r.readUInt32BE());const u=r.slice(20).toString("hex");return new Sh({hashes:s,crcs:{},offsets:l,packfileSha:u,getExternalRefDelta:n})}static async fromPack({pack:t,getExternalRefDelta:n,onProgress:r}){const a={1:"commit",2:"tree",3:"blob",4:"tag",6:"ofs-delta",7:"ref-delta"},i={},o=t.slice(-20).toString("hex"),s=[],l={},u=new Map;let d=null,h=null;await Hne([t],async({data:_,type:x,reference:S,offset:E,num:C})=>{d===null&&(d=C);const k=Math.floor((d-C)*100/d);k!==h&&r&&await r({phase:"Receiving objects",loaded:d-C,total:d}),h=k,x=a[x],["commit","tree","blob","tag"].includes(x)?i[E]={type:x,offset:E}:x==="ofs-delta"?i[E]={type:x,offset:E}:x==="ref-delta"&&(i[E]={type:x,offset:E})});const p=Object.keys(i).map(Number);for(const[_,x]of p.entries()){const S=_+1===p.length?t.byteLength-20:p[_+1],E=i[x],C=Vte.buf(t.slice(x,S))>>>0;E.end=S,E.crc=C}const g=new Sh({pack:Promise.resolve(t),packfileSha:o,crcs:l,hashes:s,offsets:u,getExternalRefDelta:n});h=null;let v=0;const b=[0,0,0,0,0,0,0,0,0,0,0,0];for(let _ in i){_=Number(_);const x=Math.floor(v*100/d);x!==h&&r&&await r({phase:"Resolving deltas",loaded:v,total:d}),v++,h=x;const S=i[_];if(!S.oid)try{g.readDepth=0,g.externalReadDepth=0;const{type:E,object:C}=await g.readSlice({start:_});b[g.readDepth]+=1;const k=await Vl(Yh.wrap({type:E,object:C}));S.oid=k,s.push(k),u.set(k,_),l[k]=S.crc}catch{continue}}return s.sort(),g}async toBuffer(){const t=[],n=(u,d)=>{t.push(Yt.from(u,d))};n("ff744f63","hex"),n("00000002","hex");const r=new Is(Yt.alloc(256*4));for(let u=0;u<256;u++){let d=0;for(const h of this.hashes)parseInt(h.slice(0,2),16)<=u&&d++;r.writeUInt32BE(d)}t.push(r.buffer);for(const u of this.hashes)n(u,"hex");const a=new Is(Yt.alloc(this.hashes.length*4));for(const u of this.hashes)a.writeUInt32BE(this.crcs[u]);t.push(a.buffer);const i=new Is(Yt.alloc(this.hashes.length*4));for(const u of this.hashes)i.writeUInt32BE(this.offsets.get(u));t.push(i.buffer),n(this.packfileSha,"hex");const o=Yt.concat(t),s=await Vl(o),l=Yt.alloc(20);return l.write(s,"hex"),Yt.concat([o,l])}async load({pack:t}){this.pack=t}async unload(){this.pack=null}async read({oid:t}){if(!this.offsets.get(t)){if(this.getExternalRefDelta)return this.externalReadDepth++,this.getExternalRefDelta(t);throw new In(`Could not read object ${t} from packfile`)}const n=this.offsets.get(t);return this.readSlice({start:n})}async readSlice({start:t}){if(this.offsetCache[t])return Object.assign({},this.offsetCache[t]);this.readDepth++;const n={16:"commit",32:"tree",48:"blob",64:"tag",96:"ofs_delta",112:"ref_delta"};if(!this.pack)throw new In("Tried to read from a GitPackIndex with no packfile loaded into memory");const r=(await this.pack).slice(t),a=new Is(r),i=a.readUInt8(),o=i&112;let s=n[o];if(s===void 0)throw new In("Unrecognized type: 0b"+o.toString(2));const l=i&15;let u=l;i&128&&(u=Gne(a,l));let h=null,p=null;if(s==="ofs_delta"){const v=Vne(a),b=t-v;({object:h,type:s}=await this.readSlice({start:b}))}if(s==="ref_delta"){const v=a.slice(20).toString("hex");({object:h,type:s}=await this.read({oid:v}))}const g=r.slice(a.tell());if(p=Yt.from(await UP(g)),p.byteLength!==u)throw new In(`Packfile told us object would have length ${u} but it had length ${p.byteLength}`);return h&&(p=Yt.from(Bne(p,h))),this.readDepth>3&&(this.offsetCache[t]={type:s,object:p}),{type:s,format:"content",object:p}}}const Cb=Symbol("PackfileCache");async function Wne({fs:e,filename:t,getExternalRefDelta:n,emitter:r,emitterPrefix:a}){const i=await e.read(t);return Sh.fromIdx({idx:i,getExternalRefDelta:n})}function Lk({fs:e,cache:t,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}){t[Cb]||(t[Cb]=new Map);let o=t[Cb].get(n);return o||(o=Wne({fs:e,filename:n,getExternalRefDelta:r,emitter:a,emitterPrefix:i}),t[Cb].set(n,o)),o}async function Kne({fs:e,cache:t,gitdir:n,oid:r,format:a="content",getExternalRefDelta:i}){let o=await e.readdir(Ot.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const l=`${n}/objects/pack/${s}`,u=await Lk({fs:e,cache:t,filename:l,getExternalRefDelta:i});if(u.error)throw new In(u.error);if(u.offsets.has(r)){if(!u.pack){const h=l.replace(/idx$/,"pack");u.pack=e.read(h)}const d=await u.read({oid:r,getExternalRefDelta:i});return d.format="content",d.source=`objects/pack/${s.replace(/idx$/,"pack")}`,d}}return null}async function Hr({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=d=>Hr({fs:e,cache:t,gitdir:n,oid:d});let o;if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904"&&(o={format:"wrapped",object:Yt.from("tree 0\0")}),o||(o=await $P({fs:e,gitdir:n,oid:r})),!o){if(o=await Kne({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i}),!o)throw new kr(r);return o}if(a==="deflated"||(o.format==="deflated"&&(o.object=Yt.from(await UP(o.object)),o.format="wrapped"),a==="wrapped"))return o;const s=await Vl(o.object);if(s!==r)throw new In(`SHA check failed! Expected ${r}, computed ${s}`);const{object:l,type:u}=Yh.unwrap(o.object);if(o.type=u,o.object=l,o.format="content",a==="content")return o;throw new In(`invalid requested format "${a}"`)}class as extends Qn{constructor(t,n,r=!0){super(`Failed to create ${t} at ${n} because it already exists.${r?` (Hint: use 'force: true' parameter to overwrite existing ${t}.)`:""}`),this.code=this.name=as.code,this.data={noun:t,where:n,canForce:r}}}as.code="AlreadyExistsError";class pg extends Qn{constructor(t,n,r){super(`Found multiple ${t} matching "${n}" (${r.join(", ")}). Use a longer abbreviation length to disambiguate them.`),this.code=this.name=pg.code,this.data={nouns:t,short:n,matches:r}}}pg.code="AmbiguousError";class mg extends Qn{constructor(t){super(`Your local changes to the following files would be overwritten by checkout: ${t.join(", ")}`),this.code=this.name=mg.code,this.data={filepaths:t}}}mg.code="CheckoutConflictError";class gg extends Qn{constructor(t,n){super(`Failed to checkout "${t}" because commit ${n} is not available locally. Do a git fetch to make the branch available locally.`),this.code=this.name=gg.code,this.data={ref:t,oid:n}}}gg.code="CommitNotFetchedError";class yg extends Qn{constructor(){super("Empty response from git server."),this.code=this.name=yg.code,this.data={}}}yg.code="EmptyServerResponseError";class bg extends Qn{constructor(){super("A simple fast-forward merge was not possible."),this.code=this.name=bg.code,this.data={}}}bg.code="FastForwardError";class vg extends Qn{constructor(t,n){super(`One or more branches were not updated: ${t}`),this.code=this.name=vg.code,this.data={prettyDetails:t,result:n}}}vg.code="GitPushError";class Eh extends Qn{constructor(t,n,r){super(`HTTP Error: ${t} ${n}`),this.code=this.name=Eh.code,this.data={statusCode:t,statusMessage:n,response:r}}}Eh.code="HttpError";class du extends Qn{constructor(t){let n="invalid filepath";t==="leading-slash"||t==="trailing-slash"?n='"filepath" parameter should not include leading or trailing directory separators because these can cause problems on some platforms.':t==="directory"&&(n='"filepath" should not be a directory.'),super(n),this.code=this.name=du.code,this.data={reason:t}}}du.code="InvalidFilepathError";class Jo extends Qn{constructor(t,n){super(`"${t}" would be an invalid git reference. (Hint: a valid alternative would be "${n}".)`),this.code=this.name=Jo.code,this.data={ref:t,suggestion:n}}}Jo.code="InvalidRefNameError";class wg extends Qn{constructor(t){super(`Maximum search depth of ${t} exceeded.`),this.code=this.name=wg.code,this.data={depth:t}}}wg.code="MaxDepthError";class Xh extends Qn{constructor(){super("Merges with conflicts are not supported yet."),this.code=this.name=Xh.code,this.data={}}}Xh.code="MergeNotSupportedError";class Jh extends Qn{constructor(t,n,r,a){super(`Automatic merge failed with one or more merge conflicts in the following files: ${t.toString()}. Fix conflicts then commit the result.`),this.code=this.name=Jh.code,this.data={filepaths:t,bothModified:n,deleteByUs:r,deleteByTheirs:a}}}Jh.code="MergeConflictError";class oi extends Qn{constructor(t){super(`No name was provided for ${t} in the argument or in the .git/config file.`),this.code=this.name=oi.code,this.data={role:t}}}oi.code="MissingNameError";class Di extends Qn{constructor(t){super(`The function requires a "${t}" parameter but none was provided.`),this.code=this.name=Di.code,this.data={parameter:t}}}Di.code="MissingParameterError";class _g extends Qn{constructor(t){super('There are multiple errors that were thrown by the method. Please refer to the "errors" property to see more'),this.code=this.name=_g.code,this.data={errors:t},this.errors=t}}_g.code="MultipleGitError";class $d extends Qn{constructor(t,n){super(`Expected "${t}" but received "${n}".`),this.code=this.name=$d.code,this.data={expected:t,actual:n}}}$d.code="ParseError";class Ch extends Qn{constructor(t){let n="";t==="not-fast-forward"?n=" because it was not a simple fast-forward":t==="tag-exists"&&(n=" because tag already exists"),super(`Push rejected${n}. Use "force: true" to override.`),this.code=this.name=Ch.code,this.data={reason:t}}}Ch.code="PushRejectedError";class Vc extends Qn{constructor(t,n){super(`Remote does not support the "${t}" so the "${n}" parameter cannot be used.`),this.code=this.name=Vc.code,this.data={capability:t,parameter:n}}}Vc.code="RemoteCapabilityError";class xg extends Qn{constructor(t,n){super(`Remote did not reply using the "smart" HTTP protocol. Expected "001e# service=git-upload-pack" but received: ${t}`),this.code=this.name=xg.code,this.data={preview:t,response:n}}}xg.code="SmartHttpError";class Sg extends Qn{constructor(t,n,r){super(`Git remote "${t}" uses an unrecognized transport protocol: "${n}"`),this.code=this.name=Sg.code,this.data={url:t,transport:n,suggestion:r}}}Sg.code="UnknownTransportError";class Eg extends Qn{constructor(t){super(`Cannot parse remote URL: "${t}"`),this.code=this.name=Eg.code,this.data={url:t}}}Eg.code="UrlParseError";class Qh extends Qn{constructor(){super("The operation was canceled."),this.code=this.name=Qh.code,this.data={}}}Qh.code="UserCanceledError";class Cg extends Qn{constructor(t){super(`Could not merge index: Entry for '${t}' is not up to date. Either reset the index entry to HEAD, or stage your unstaged changes.`),this.code=this.name=Cg.code,this.data={filepath:t}}}Cg.code="IndexResetError";class kg extends Qn{constructor(t){super(`"${t}" does not point to any commit. You're maybe working on a repository with no commits yet. `),this.code=this.name=kg.code,this.data={ref:t}}}kg.code="NoCommitError";var Zne=Object.freeze({__proto__:null,AlreadyExistsError:as,AmbiguousError:pg,CheckoutConflictError:mg,CommitNotFetchedError:gg,EmptyServerResponseError:yg,FastForwardError:bg,GitPushError:vg,HttpError:Eh,InternalError:In,InvalidFilepathError:du,InvalidOidError:uu,InvalidRefNameError:Jo,MaxDepthError:wg,MergeNotSupportedError:Xh,MergeConflictError:Jh,MissingNameError:oi,MissingParameterError:Di,MultipleGitError:_g,NoRefspecError:hg,NotFoundError:kr,ObjectTypeError:Si,ParseError:$d,PushRejectedError:Ch,RemoteCapabilityError:Vc,SmartHttpError:xg,UnknownTransportError:Sg,UnsafeFilepathError:Kh,UrlParseError:Eg,UserCanceledError:Qh,UnmergedPathsError:fg,IndexResetError:Cg,NoCommitError:kg});function F2({name:e,email:t,timestamp:n,timezoneOffset:r}){return r=Yne(r),`${e} <${t}> ${n} ${r}`}function Yne(e){const t=Xne(Jne(e));e=Math.abs(e);const n=Math.floor(e/60);e-=n*60;let r=String(n),a=String(e);return r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),(t===-1?"-":"+")+r+a}function Xne(e){return Math.sign(e)||(Object.is(e,-0)?-1:1)}function Jne(e){return e===0?e:-e}function Nl(e){return e=e.replace(/\r/g,""),e=e.replace(/^\n+/,""),e=e.replace(/\n+$/,"")+`
`,e}function $v(e){const[,t,n,r,a]=e.match(/^(.*) <(.*)> (.*) (.*)$/);return{name:t,email:n,timestamp:Number(r),timezoneOffset:Qne(a)}}function Qne(e){let[,t,n,r]=e.match(/(\+|-)(\d\d)(\d\d)/);return r=(t==="+"?1:-1)*(Number(n)*60+Number(r)),ere(r)}function ere(e){return e===0?e:-e}class vi{constructor(t){if(typeof t=="string")this._tag=t;else if(Yt.isBuffer(t))this._tag=t.toString("utf8");else if(typeof t=="object")this._tag=vi.render(t);else throw new In("invalid type passed to GitAnnotatedTag constructor")}static from(t){return new vi(t)}static render(t){return`object ${t.object}
type ${t.type}
tag ${t.tag}
tagger ${F2(t.tagger)}

${t.message}
${t.gpgsig?t.gpgsig:""}`}justHeaders(){return this._tag.slice(0,this._tag.indexOf(`

`))}message(){const t=this.withoutSignature();return t.slice(t.indexOf(`

`)+2)}parse(){return Object.assign(this.headers(),{message:this.message(),gpgsig:this.gpgsig()})}render(){return this._tag}headers(){const t=this.justHeaders().split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.tagger&&(r.tagger=$v(r.tagger)),r.committer&&(r.committer=$v(r.committer)),r}withoutSignature(){const t=Nl(this._tag);return t.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1?t:t.slice(0,t.lastIndexOf(`
-----BEGIN PGP SIGNATURE-----`))}gpgsig(){if(this._tag.indexOf(`
-----BEGIN PGP SIGNATURE-----`)===-1)return;const t=this._tag.slice(this._tag.indexOf("-----BEGIN PGP SIGNATURE-----"),this._tag.indexOf("-----END PGP SIGNATURE-----")+27);return Nl(t)}payload(){return this.withoutSignature()+`
`}toObject(){return Yt.from(this._tag,"utf8")}static async sign(t,n,r){const a=t.payload();let{signature:i}=await n({payload:a,secretKey:r});i=Nl(i);const o=a+i;return vi.from(o)}}function iE(e){return e.trim().split(`
`).map(t=>" "+t).join(`
`)+`
`}function tre(e){return e.split(`
`).map(t=>t.replace(/^ /,"")).join(`
`)}class Ur{constructor(t){if(typeof t=="string")this._commit=t;else if(Yt.isBuffer(t))this._commit=t.toString("utf8");else if(typeof t=="object")this._commit=Ur.render(t);else throw new In("invalid type passed to GitCommit constructor")}static fromPayloadSignature({payload:t,signature:n}){const r=Ur.justHeaders(t),a=Ur.justMessage(t),i=Nl(r+`
gpgsig`+iE(n)+`
`+a);return new Ur(i)}static from(t){return new Ur(t)}toObject(){return Yt.from(this._commit,"utf8")}headers(){return this.parseHeaders()}message(){return Ur.justMessage(this._commit)}parse(){return Object.assign({message:this.message()},this.headers())}static justMessage(t){return Nl(t.slice(t.indexOf(`

`)+2))}static justHeaders(t){return t.slice(0,t.indexOf(`

`))}parseHeaders(){const t=Ur.justHeaders(this._commit).split(`
`),n=[];for(const a of t)a[0]===" "?n[n.length-1]+=`
`+a.slice(1):n.push(a);const r={parent:[]};for(const a of n){const i=a.slice(0,a.indexOf(" ")),o=a.slice(a.indexOf(" ")+1);Array.isArray(r[i])?r[i].push(o):r[i]=o}return r.author&&(r.author=$v(r.author)),r.committer&&(r.committer=$v(r.committer)),r}static renderHeaders(t){let n="";if(t.tree?n+=`tree ${t.tree}
`:n+=`tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904
`,t.parent){if(t.parent.length===void 0)throw new In("commit 'parent' property should be an array");for(const i of t.parent)n+=`parent ${i}
`}const r=t.author;n+=`author ${F2(r)}
`;const a=t.committer||t.author;return n+=`committer ${F2(a)}
`,t.gpgsig&&(n+="gpgsig"+iE(t.gpgsig)),n}static render(t){return Ur.renderHeaders(t)+`
`+Nl(t.message)}render(){return this._commit}withoutSignature(){const t=Nl(this._commit);if(t.indexOf(`
gpgsig`)===-1)return t;const n=t.slice(0,t.indexOf(`
gpgsig`)),r=t.slice(t.indexOf(`-----END PGP SIGNATURE-----
`)+28);return Nl(n+`
`+r)}isolateSignature(){const t=this._commit.slice(this._commit.indexOf("-----BEGIN PGP SIGNATURE-----"),this._commit.indexOf("-----END PGP SIGNATURE-----")+27);return tre(t)}static async sign(t,n,r){const a=t.withoutSignature(),i=Ur.justMessage(t._commit);let{signature:o}=await n({payload:a,secretKey:r});o=Nl(o);const l=Ur.justHeaders(t._commit)+`
gpgsig`+iE(o)+`
`+i;return Ur.from(l)}}async function kh({fs:e,cache:t,gitdir:n,oid:r}){if(r==="4b825dc642cb6eb9a060e54bf8d69288fbee4904")return{tree:ji.from([]),oid:r};const{type:a,object:i}=await Hr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=vi.from(i).parse().object,kh({fs:e,cache:t,gitdir:n,oid:r});if(a==="commit")return r=Ur.from(i).parse().tree,kh({fs:e,cache:t,gitdir:n,oid:r});if(a!=="tree")throw new Si(r,a,"tree");return{tree:ji.from(i),oid:r}}class nre{constructor({fs:t,gitdir:n,ref:r,cache:a}){this.fs=t,this.cache=a,this.gitdir=n,this.mapPromise=(async()=>{const o=new Map;let s;try{s=await $t.resolve({fs:t,gitdir:n,ref:r})}catch(u){u instanceof kr&&(s="4b825dc642cb6eb9a060e54bf8d69288fbee4904")}const l=await kh({fs:t,cache:this.cache,gitdir:n,oid:s});return l.type="tree",l.mode="40000",o.set(".",l),o})();const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,cache:a,gitdir:i}=this,o=await this.mapPromise,s=o.get(n);if(!s)throw new Error(`No obj for ${n}`);const l=s.oid;if(!l)throw new Error(`No oid for obj ${JSON.stringify(s)}`);if(s.type!=="tree")return null;const{type:u,object:d}=await Hr({fs:r,cache:a,gitdir:i,oid:l});if(u!==s.type)throw new Si(l,u,s.type);const h=ji.from(d);for(const p of h)o.set(Ot.join(n,p.path),p);return h.entries().map(p=>Ot.join(n,p.path))}async type(t){if(t._type===!1){const n=await this.mapPromise,{type:r}=n.get(t._fullpath);t._type=r}return t._type}async mode(t){if(t._mode===!1){const n=await this.mapPromise,{mode:r}=n.get(t._fullpath);t._mode=MP(parseInt(r,8))}return t._mode}async stat(t){}async content(t){if(t._content===!1){const n=await this.mapPromise,{fs:r,cache:a,gitdir:i}=this,s=n.get(t._fullpath).oid,{type:l,object:u}=await Hr({fs:r,cache:a,gitdir:i,oid:s});l!=="blob"?t._content=void 0:t._content=new Uint8Array(u)}return t._content}async oid(t){if(t._oid===!1){const r=(await this.mapPromise).get(t._fullpath);t._oid=r.oid}return t._oid}}function xo({ref:e="HEAD"}={}){const t=Object.create(null);return Object.defineProperty(t,e1,{value:function({fs:n,gitdir:r,cache:a}){return new nre({fs:n,gitdir:r,ref:e,cache:a})}}),Object.freeze(t),t}class rre{constructor({fs:t,dir:n,gitdir:r,cache:a}){this.fs=t,this.cache=a,this.dir=n,this.gitdir=r,this.config=null;const i=this;this.ConstructEntry=class{constructor(s){this._fullpath=s,this._type=!1,this._mode=!1,this._stat=!1,this._content=!1,this._oid=!1}async type(){return i.type(this)}async mode(){return i.mode(this)}async stat(){return i.stat(this)}async content(){return i.content(this)}async oid(){return i.oid(this)}}}async readdir(t){const n=t._fullpath,{fs:r,dir:a}=this,i=await r.readdir(Ot.join(a,n));return i===null?null:i.map(o=>Ot.join(n,o))}async type(t){return t._type===!1&&await t.stat(),t._type}async mode(t){return t._mode===!1&&await t.stat(),t._mode}async stat(t){if(t._stat===!1){const{fs:n,dir:r}=this;let a=await n.lstat(`${r}/${t._fullpath}`);if(!a)throw new Error(`ENOENT: no such file or directory, lstat '${t._fullpath}'`);let i=a.isDirectory()?"tree":"blob";i==="blob"&&!a.isFile()&&!a.isSymbolicLink()&&(i="special"),t._type=i,a=_h(a),t._mode=a.mode,a.size===-1&&t._actualSize&&(a.size=t._actualSize),t._stat=a}return t._stat}async content(t){if(t._content===!1){const{fs:n,dir:r,gitdir:a}=this;if(await t.type()==="tree")t._content=void 0;else{const o=await(await this._getGitConfig(n,a)).get("core.autocrlf"),s=await n.read(`${r}/${t._fullpath}`,{autocrlf:o});t._actualSize=s.length,t._stat&&t._stat.size===-1&&(t._stat.size=t._actualSize),t._content=new Uint8Array(s)}}return t._content}async oid(t){if(t._oid===!1){const n=this,{fs:r,gitdir:a,cache:i}=this;let o;await Ma.acquire({fs:r,gitdir:a,cache:i},async function(s){const l=s.entriesMap.get(t._fullpath),u=await t.stat(),h=await(await n._getGitConfig(r,a)).get("core.filemode"),p=typeof Xr<"u"?Xr.platform!=="win32":!0;if(!l||Mv(u,l,h,p)){const g=await t.content();g===void 0?o=void 0:(o=await Vl(Yh.wrap({type:"blob",object:g})),l&&o===l.oid&&(!h||u.mode===l.mode)&&Mv(u,l,h,p)&&s.insert({filepath:t._fullpath,stats:u,oid:o}))}else o=l.oid}),t._oid=o}return t._oid}async _getGitConfig(t,n){return this.config?this.config:(this.config=await pa.get({fs:t,gitdir:n}),this.config)}}function Tg(){const e=Object.create(null);return Object.defineProperty(e,e1,{value:function({fs:t,dir:n,gitdir:r,cache:a}){return new rre({fs:t,dir:n,gitdir:r,cache:a})}}),Object.freeze(e),e}function are(e,t){const n=t-e;return Array.from({length:n},(r,a)=>e+a)}const HP=typeof Array.prototype.flat>"u"?e=>e.reduce((t,n)=>t.concat(n),[]):e=>e.flat();class ire{constructor(){this.value=null}consider(t){t!=null&&(this.value===null?this.value=t:t<this.value&&(this.value=t))}reset(){this.value=null}}function*ore(e){const t=new ire;let n;const r=[],a=e.length;for(let i=0;i<a;i++)r[i]=e[i].next().value,r[i]!==void 0&&t.consider(r[i]);if(t.value!==null)for(;;){const i=[];n=t.value,t.reset();for(let o=0;o<a;o++)r[o]!==void 0&&r[o]===n?(i[o]=r[o],r[o]=e[o].next().value):i[o]=null,r[o]!==void 0&&t.consider(r[o]);if(yield i,t.value===null)return}}async function fu({fs:e,cache:t,dir:n,gitdir:r,trees:a,map:i=async(l,u)=>u,reduce:o=async(l,u)=>{const d=HP(u);return l!==void 0&&d.unshift(l),d},iterate:s=(l,u)=>Promise.all([...u].map(l))}){const l=a.map(g=>g[e1]({fs:e,dir:n,gitdir:r,cache:t})),u=new Array(l.length).fill("."),d=are(0,l.length),h=async g=>{d.map(_=>{const x=g[_];g[_]=x&&new l[_].ConstructEntry(x)});const b=(await Promise.all(d.map(_=>{const x=g[_];return x?l[_].readdir(x):[]}))).map(_=>(_===null?[]:_)[Symbol.iterator]());return{entries:g,children:ore(b)}},p=async g=>{const{entries:v,children:b}=await h(g),_=v.find(S=>S&&S._fullpath)._fullpath,x=await i(_,v);if(x!==null){let S=await s(p,b);return S=S.filter(E=>E!==void 0),o(x,S)}};return p(u)}async function L2(e,t){const n=await e.readdir(t);n==null?await e.rm(t):n.length?await Promise.all(n.map(r=>{const a=Ot.join(t,r);return e.lstat(a).then(i=>{if(i)return i.isDirectory()?L2(e,a):e.rm(a)})})).then(()=>e.rmdir(t)):await e.rmdir(t)}function sre(e){return lre(e)&&Y4(e.then)&&Y4(e.catch)}function lre(e){return e&&typeof e=="object"}function Y4(e){return typeof e=="function"}function X4(e){return sre((n=>{try{return n.readFile().catch(r=>r)}catch(r){return r}})(e))}const J4=["readFile","writeFile","mkdir","rmdir","unlink","stat","lstat","readdir","readlink","symlink"];function Q4(e,t){if(X4(t))for(const n of J4)e[`_${n}`]=t[n].bind(t);else for(const n of J4)e[`_${n}`]=YS(t[n].bind(t));X4(t)?t.rm?e._rm=t.rm.bind(t):t.rmdir.length>1?e._rm=t.rmdir.bind(t):e._rm=L2.bind(null,e):t.rm?e._rm=YS(t.rm.bind(t)):t.rmdir.length>2?e._rm=YS(t.rmdir.bind(t)):e._rm=L2.bind(null,e)}class sn{constructor(t){if(typeof t._original_unwrapped_fs<"u")return t;const n=Object.getOwnPropertyDescriptor(t,"promises");n&&n.enumerable?Q4(this,t.promises):Q4(this,t),this._original_unwrapped_fs=t}async exists(t,n={}){try{return await this._stat(t),!0}catch(r){if(r.code==="ENOENT"||r.code==="ENOTDIR"||(r.code||"").includes("ENS"))return!1;throw console.log('Unhandled error in "FileSystem.exists()" function',r),r}}async read(t,n={}){try{let r=await this._readFile(t,n);if(n.autocrlf==="true")try{r=new TextDecoder("utf8",{fatal:!0}).decode(r),r=r.replace(/\r\n/g,`
`),r=new TextEncoder().encode(r)}catch{}return typeof r!="string"&&(r=Yt.from(r)),r}catch{return null}}async write(t,n,r={}){try{await this._writeFile(t,n,r);return}catch{await this.mkdir(xh(t)),await this._writeFile(t,n,r)}}async mkdir(t,n=!1){try{await this._mkdir(t);return}catch(r){if(r===null||r.code==="EEXIST")return;if(n)throw r;if(r.code==="ENOENT"){const a=xh(t);if(a==="."||a==="/"||a===t)throw r;await this.mkdir(a),await this.mkdir(t,!0)}}}async rm(t){try{await this._unlink(t)}catch(n){if(n.code!=="ENOENT")throw n}}async rmdir(t,n){try{n&&n.recursive?await this._rm(t,n):await this._rmdir(t)}catch(r){if(r.code!=="ENOENT")throw r}}async readdir(t){try{const n=await this._readdir(t);return n.sort(Qw),n}catch(n){return n.code==="ENOTDIR"?null:[]}}async readdirDeep(t){const n=await this._readdir(t);return(await Promise.all(n.map(async a=>{const i=t+"/"+a;return(await this._stat(i)).isDirectory()?this.readdirDeep(i):i}))).reduce((a,i)=>a.concat(i),[])}async lstat(t){try{return await this._lstat(t)}catch(n){if(n.code==="ENOENT"||(n.code||"").includes("ENS"))return null;throw n}}async readlink(t,n={encoding:"buffer"}){try{const r=await this._readlink(t,n);return Yt.isBuffer(r)?r:Yt.from(r)}catch(r){if(r.code==="ENOENT"||(r.code||"").includes("ENS"))return null;throw r}}async writelink(t,n){return this._symlink(n.toString("utf8"),t)}}function Je(e,t){if(t===void 0)throw new Di(e)}async function Bv(e,t){return!e&&!t?!1:e&&!t||!e&&t?!0:!(await e.type()==="tree"&&await t.type()==="tree"||await e.type()===await t.type()&&await e.mode()===await t.mode()&&await e.oid()===await t.oid())}async function cre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),commit:r="HEAD",cache:a={}}){try{Je("fs",e),Je("dir",t),Je("gitdir",n);const i=new sn(e),o=[xo({ref:r}),Tg(),Zh()];let s=[];await Ma.acquire({fs:i,gitdir:n,cache:a},async function(u){s=u.unmergedPaths});const l=await fu({fs:i,cache:a,dir:t,gitdir:n,trees:o,map:async function(u,[d,h,p]){const g=!await Bv(h,p),v=s.includes(u),b=!await Bv(p,d);if(g||v)return d?{path:u,mode:await d.mode(),oid:await d.oid(),type:await d.type(),content:await d.content()}:void 0;if(b)return!1;throw new Cg(u)}});await Ma.acquire({fs:i,gitdir:n,cache:a},async function(u){for(const d of l)if(d!==!1){if(!d){await i.rmdir(`${t}/${d.path}`,{recursive:!0}),u.delete({filepath:d.path});continue}if(d.type==="blob"){const h=new TextDecoder().decode(d.content);await i.write(`${t}/${d.path}`,h,{mode:d.mode}),u.insert({filepath:d.path,oid:d.oid,stage:0})}}})}catch(i){throw i.caller="git.abortMerge",i}}class ep{static async isIgnored({fs:t,dir:n,gitdir:r=Ot.join(n,".git"),filepath:a}){if(Pv(a)===".git")return!0;if(a===".")return!1;let i="";const o=Ot.join(r,"info","exclude");await t.exists(o)&&(i=await t.read(o,"utf8"));const s=[{gitignore:Ot.join(n,".gitignore"),filepath:a}],l=a.split("/").filter(Boolean);for(let d=1;d<l.length;d++){const h=l.slice(0,d).join("/"),p=l.slice(d).join("/");s.push({gitignore:Ot.join(n,h,".gitignore"),filepath:p})}let u=!1;for(const d of s){let h;try{h=await t.read(d.gitignore,"utf8")}catch(v){if(v.code==="NOENT")continue}const p=one().add(i);p.add(h);const g=xh(d.filepath);if(g!=="."&&p.ignores(g))return!0;u?u=!p.test(d.filepath).unignored:u=p.test(d.filepath).ignored}return u}}async function ure({fs:e,gitdir:t,object:n,format:r,oid:a}){const i=`objects/${a.slice(0,2)}/${a.slice(2)}`,o=`${t}/${i}`;await e.exists(o)||await e.write(o,n)}let oE=null;async function qP(e){return oE===null&&(oE=fre()),oE?dre(e):Mk.deflate(e)}async function dre(e){const t=new CompressionStream("deflate"),n=new Blob([e]).stream().pipeThrough(t);return new Uint8Array(await new Response(n).arrayBuffer())}function fre(){try{return new CompressionStream("deflate").writable.close(),new Blob([]).stream().cancel(),!0}catch{return!1}}async function Fi({fs:e,gitdir:t,type:n,object:r,format:a="content",oid:i=void 0,dryRun:o=!1}){return a!=="deflated"&&(a!=="wrapped"&&(r=Yh.wrap({type:n,object:r})),i=await Vl(r),r=Yt.from(await qP(r))),o||await ure({fs:e,gitdir:t,object:r,format:"deflated",oid:i}),i}function VP(e){let t;for(;~(t=e.indexOf(92));)e[t]=47;return e}async function hre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,cache:a={},force:i=!1,parallel:o=!0}){try{Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r);const s=new sn(e);await Ma.acquire({fs:s,gitdir:n,cache:a},async l=>{const d=await(await pa.get({fs:s,gitdir:n})).get("core.autocrlf");return $2({dir:t,gitdir:n,fs:s,filepath:r,index:l,force:i,parallel:o,autocrlf:d})})}catch(s){throw s.caller="git.add",s}}async function $2({dir:e,gitdir:t,fs:n,filepath:r,index:a,force:i,parallel:o,autocrlf:s}){r=Array.isArray(r)?r:[r];const l=r.map(async p=>{if(!i&&await ep.isIgnored({fs:n,dir:e,gitdir:t,filepath:p}))return;const g=await n.lstat(Ot.join(e,p));if(!g)throw new kr(p);if(g.isDirectory()){const v=await n.readdir(Ot.join(e,p));if(o){const b=v.map(_=>$2({dir:e,gitdir:t,fs:n,filepath:[Ot.join(p,_)],index:a,force:i,parallel:o,autocrlf:s}));await Promise.all(b)}else for(const b of v)await $2({dir:e,gitdir:t,fs:n,filepath:[Ot.join(p,b)],index:a,force:i,parallel:o,autocrlf:s})}else{const v=g.isSymbolicLink()?await n.readlink(Ot.join(e,p)).then(VP):await n.read(Ot.join(e,p),{autocrlf:s});if(v===null)throw new kr(p);const b=await Fi({fs:n,gitdir:t,type:"blob",object:v});a.insert({filepath:p,stats:g,oid:b})}}),u=await Promise.allSettled(l),d=u.filter(p=>p.status==="rejected").map(p=>p.reason);if(d.length>1)throw new _g(d);if(d.length===1)throw d[0];return u.filter(p=>p.status==="fulfilled"&&p.value).map(p=>p.value)}async function w0({fs:e,gitdir:t,path:n}){return(await pa.get({fs:e,gitdir:t})).get(n)}function GP(e,...t){for(const n of t)if(n)for(const r of Object.keys(n)){const a=n[r];a!==void 0&&(e[r]=a)}return e}async function hu({fs:e,gitdir:t,author:n,commit:r}){const a=Math.floor(Date.now()/1e3),i={name:await w0({fs:e,gitdir:t,path:"user.name"}),email:await w0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:a,timezoneOffset:new Date(a*1e3).getTimezoneOffset()},o=GP({},i,r?r.author:void 0,n);if(o.name!==void 0)return o}async function Th({fs:e,gitdir:t,author:n,committer:r,commit:a}){const i=Math.floor(Date.now()/1e3),o={name:await w0({fs:e,gitdir:t,path:"user.name"}),email:await w0({fs:e,gitdir:t,path:"user.email"})||"",timestamp:i,timezoneOffset:new Date(i*1e3).getTimezoneOffset()},s=GP({},o,a?a.committer:void 0,n,r);if(s.name!==void 0)return s}async function WP({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Hr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=vi.from(i).parse().object,WP({fs:e,cache:t,gitdir:n,oid:r});if(a!=="commit")throw new Si(r,a,"commit");return{commit:Ur.from(i),oid:r}}async function Ah({fs:e,cache:t,gitdir:n,oid:r}){const{commit:a,oid:i}=await WP({fs:e,cache:t,gitdir:n,oid:r});return{oid:i,commit:a.parse(),payload:a.withoutSignature()}}async function t1({fs:e,cache:t,onSign:n,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:g}){let v=!1;h||(h=await $t.resolve({fs:e,gitdir:r,ref:"HEAD",depth:2}));let b,_;try{b=await $t.resolve({fs:e,gitdir:r,ref:h}),_=await Ah({fs:e,gitdir:r,oid:b,cache:{}})}catch{v=!0}if(l&&v)throw new kg(h);const x=l?await hu({fs:e,gitdir:r,author:i,commit:_.commit}):await hu({fs:e,gitdir:r,author:i});if(!x)throw new oi("author");const S=l?await Th({fs:e,gitdir:r,author:x,committer:o,commit:_.commit}):await Th({fs:e,gitdir:r,author:x,committer:o});if(!S)throw new oi("committer");return Ma.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async function(E){const k=FP(E.entries).get(".");if(g||(g=await KP({fs:e,gitdir:r,inode:k,dryRun:u})),p?p=await Promise.all(p.map(O=>$t.resolve({fs:e,gitdir:r,ref:O}))):l?p=_.commit.parent:p=b?[b]:[],!a)if(l)a=_.commit.message;else throw new Di("message");let R=Ur.from({tree:g,parent:p,author:x,committer:S,message:a});s&&(R=await Ur.sign(R,n,s));const D=await Fi({fs:e,gitdir:r,type:"commit",object:R.toObject(),dryRun:u});return!d&&!u&&await $t.writeRef({fs:e,gitdir:r,ref:h,value:D}),D})}async function KP({fs:e,gitdir:t,inode:n,dryRun:r}){const a=n.children;for(const l of a)l.type==="tree"&&(l.metadata.mode="040000",l.metadata.oid=await KP({fs:e,gitdir:t,inode:l,dryRun:r}));const i=a.map(l=>({mode:l.metadata.mode,path:l.basename,oid:l.metadata.oid,type:l.type})),o=ji.from(i);return await Fi({fs:e,gitdir:t,type:"tree",object:o.toObject(),dryRun:r})}async function Ag({fs:e,cache:t,gitdir:n,oid:r,filepath:a}){if(a.startsWith("/"))throw new du("leading-slash");if(a.endsWith("/"))throw new du("trailing-slash");const i=r,o=await kh({fs:e,cache:t,gitdir:n,oid:r}),s=o.tree;if(a==="")r=o.oid;else{const l=a.split("/");r=await ZP({fs:e,cache:t,gitdir:n,tree:s,pathArray:l,oid:i,filepath:a})}return r}async function ZP({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o}){const s=a.shift();for(const l of r)if(l.path===s){if(a.length===0)return l.oid;{const{type:u,object:d}=await Hr({fs:e,cache:t,gitdir:n,oid:l.oid});if(u!=="tree")throw new Si(i,u,"tree",o);return r=ji.from(d),ZP({fs:e,cache:t,gitdir:n,tree:r,pathArray:a,oid:i,filepath:o})}}throw new kr(`file or directory found at "${i}:${o}"`)}async function tp({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){a!==void 0&&(r=await Ag({fs:e,cache:t,gitdir:n,oid:r,filepath:a}));const{tree:i,oid:o}=await kh({fs:e,cache:t,gitdir:n,oid:r});return{oid:o,tree:i.entries()}}async function Ng({fs:e,gitdir:t,tree:n}){const r=ji.from(n).toObject();return await Fi({fs:e,gitdir:t,type:"tree",object:r,format:"content"})}async function pre({fs:e,cache:t,onSign:n,gitdir:r,ref:a,oid:i,note:o,force:s,author:l,committer:u,signingKey:d}){let h;try{h=await $t.resolve({gitdir:r,fs:e,ref:a})}catch(x){if(!(x instanceof kr))throw x}let g=(await tp({fs:e,cache:t,gitdir:r,oid:h||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;if(s)g=g.filter(x=>x.path!==i);else for(const x of g)if(x.path===i)throw new as("note",i);typeof o=="string"&&(o=Yt.from(o,"utf8"));const v=await Fi({fs:e,gitdir:r,type:"blob",object:o,format:"content"});g.push({mode:"100644",path:i,oid:v,type:"blob"});const b=await Ng({fs:e,gitdir:r,tree:g});return await t1({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:b,parent:h&&[h],message:`Note added by 'isomorphic-git addNote'
`,author:l,committer:u,signingKey:d})}async function mre({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ref:a="refs/notes/commits",oid:i,note:o,force:s,author:l,committer:u,signingKey:d,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i),Je("note",o),d&&Je("onSign",t);const p=new sn(e),g=await hu({fs:p,gitdir:r,author:l});if(!g)throw new oi("author");const v=await Th({fs:p,gitdir:r,author:g,committer:u});if(!v)throw new oi("committer");return await pre({fs:new sn(p),cache:h,onSign:t,gitdir:r,ref:a,oid:i,note:o,force:s,author:g,committer:v,signingKey:d})}catch(p){throw p.caller="git.addNote",p}}async function YP({fs:e,gitdir:t,remote:n,url:r,force:a}){if(n!==js.clean(n))throw new Jo(n,js.clean(n));const i=await pa.get({fs:e,gitdir:t});if(!a&&(await i.getSubsections("remote")).includes(n)&&r!==await i.get(`remote.${n}.url`))throw new as("remote",n);await i.set(`remote.${n}.url`,r),await i.set(`remote.${n}.fetch`,`+refs/heads/*:refs/remotes/${n}/*`),await pa.save({fs:e,gitdir:t,config:i})}async function gre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),remote:r,url:a,force:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("remote",r),Je("url",a),await YP({fs:new sn(e),gitdir:n,remote:r,url:a,force:i})}catch(o){throw o.caller="git.addRemote",o}}async function yre({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tagger:i,message:o=a,gpgsig:s,object:l,signingKey:u,force:d=!1}){if(a=a.startsWith("refs/tags/")?a:`refs/tags/${a}`,!d&&await $t.exists({fs:e,gitdir:r,ref:a}))throw new as("tag",a);const h=await $t.resolve({fs:e,gitdir:r,ref:l||"HEAD"}),{type:p}=await Hr({fs:e,cache:t,gitdir:r,oid:h});let g=vi.from({object:h,type:p,tag:a.replace("refs/tags/",""),tagger:i,message:o,gpgsig:s});u&&(g=await vi.sign(g,n,u));const v=await Fi({fs:e,gitdir:r,type:"tag",object:g.toObject()});await $t.writeRef({fs:e,gitdir:r,ref:a,value:v})}async function bre({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ref:a,tagger:i,message:o=a,gpgsig:s,object:l,signingKey:u,force:d=!1,cache:h={}}){try{Je("fs",e),Je("gitdir",r),Je("ref",a),u&&Je("onSign",t);const p=new sn(e),g=await hu({fs:p,gitdir:r,author:i});if(!g)throw new oi("tagger");return await yre({fs:p,cache:h,onSign:t,gitdir:r,ref:a,tagger:g,message:o,gpgsig:s,object:l,signingKey:u,force:d})}catch(p){throw p.caller="git.annotatedTag",p}}async function vre({fs:e,gitdir:t,ref:n,object:r,checkout:a=!1,force:i=!1}){if(n!==js.clean(n))throw new Jo(n,js.clean(n));const o=`refs/heads/${n}`;if(!i&&await $t.exists({fs:e,gitdir:t,ref:o}))throw new as("branch",n,!1);let s;try{s=await $t.resolve({fs:e,gitdir:t,ref:r||"HEAD"})}catch{}s&&await $t.writeRef({fs:e,gitdir:t,ref:o,value:s}),a&&await $t.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function wre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,object:a,checkout:i=!1,force:o=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await vre({fs:new sn(e),gitdir:n,ref:r,object:a,checkout:i,force:o})}catch(s){throw s.caller="git.branch",s}}const XP=(e,t)=>e==="."||t==null||t.length===0||t==="."?!0:t.length>=e.length?t.startsWith(e):e.startsWith(t);async function $k({fs:e,cache:t,onProgress:n,onPostCheckout:r,dir:a,gitdir:i,remote:o,ref:s,filepaths:l,noCheckout:u,noUpdateHead:d,dryRun:h,force:p,track:g=!0}){let v;if(r)try{v=await $t.resolve({fs:e,gitdir:i,ref:"HEAD"})}catch{v="0000000000000000000000000000000000000000"}let b;try{b=await $t.resolve({fs:e,gitdir:i,ref:s})}catch(_){if(s==="HEAD")throw _;const x=`${o}/${s}`;if(b=await $t.resolve({fs:e,gitdir:i,ref:x}),g){const S=await pa.get({fs:e,gitdir:i});await S.set(`branch.${s}.remote`,o),await S.set(`branch.${s}.merge`,`refs/heads/${s}`),await pa.save({fs:e,gitdir:i,config:S})}await $t.writeRef({fs:e,gitdir:i,ref:`refs/heads/${s}`,value:b})}if(!u){let _;try{_=await _re({fs:e,cache:t,onProgress:n,dir:a,gitdir:i,ref:s,force:p,filepaths:l})}catch(k){throw k instanceof kr&&k.data.what===b?new gg(s,b):k}const x=_.filter(([k])=>k==="conflict").map(([k,R])=>R);if(x.length>0)throw new mg(x);const S=_.filter(([k])=>k==="error").map(([k,R])=>R);if(S.length>0)throw new In(S.join(", "));if(h){r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"});return}let E=0;const C=_.length;await Ma.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([R])=>R==="delete"||R==="delete-index").map(async function([R,D]){const O=`${a}/${D}`;R==="delete"&&await e.rm(O),k.delete({filepath:D}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}))}),await Ma.acquire({fs:e,gitdir:i,cache:t},async function(k){for(const[R,D]of _)if(R==="rmdir"||R==="rmdir-index"){const O=`${a}/${D}`;try{R==="rmdir-index"&&k.delete({filepath:D}),await e.rmdir(O),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(L){if(L.code==="ENOTEMPTY")console.log(`Did not delete ${D} because directory is not empty`);else throw L}}}),await Promise.all(_.filter(([k])=>k==="mkdir"||k==="mkdir-index").map(async function([k,R]){const D=`${a}/${R}`;await e.mkdir(D),n&&await n({phase:"Updating workdir",loaded:++E,total:C})})),await Ma.acquire({fs:e,gitdir:i,cache:t},async function(k){await Promise.all(_.filter(([R])=>R==="create"||R==="create-index"||R==="update"||R==="mkdir-index").map(async function([R,D,O,L,B]){const Y=`${a}/${D}`;try{if(R!=="create-index"&&R!=="mkdir-index"){const{object:Z}=await Hr({fs:e,cache:t,gitdir:i,oid:O});if(B&&await e.rm(Y),L===33188)await e.write(Y,Z);else if(L===33261)await e.write(Y,Z,{mode:511});else if(L===40960)await e.writelink(Y,Z);else throw new In(`Invalid mode 0o${L.toString(8)} detected in blob ${O}`)}const F=await e.lstat(Y);L===33261&&(F.mode=493),R==="mkdir-index"&&(F.mode=57344),k.insert({filepath:D,stats:F,oid:O}),n&&await n({phase:"Updating workdir",loaded:++E,total:C})}catch(F){console.log(F)}}))}),r&&await r({previousHead:v,newHead:b,type:l!=null&&l.length>0?"file":"branch"})}if(!d){const _=await $t.expand({fs:e,gitdir:i,ref:s});_.startsWith("refs/heads")?await $t.writeSymbolicRef({fs:e,gitdir:i,ref:"HEAD",value:_}):await $t.writeRef({fs:e,gitdir:i,ref:"HEAD",value:b})}}async function _re({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,ref:i,force:o,filepaths:s}){let l=0;return fu({fs:e,cache:t,dir:r,gitdir:a,trees:[xo({ref:i}),Tg(),Zh()],map:async function(u,[d,h,p]){if(u===".")return;if(s&&!s.some(v=>XP(u,v)))return null;switch(n&&await n({phase:"Analyzing workdir",loaded:++l}),[!!p,!!d,!!h].map(Number).join("")){case"000":return;case"001":return o&&s&&s.includes(u)?["delete",u]:void 0;case"010":switch(await d.type()){case"tree":return["mkdir",u];case"blob":return["create",u,await d.oid(),await d.mode()];case"commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`new entry Unhandled type ${await d.type()}`]}case"011":switch(`${await d.type()}-${await h.type()}`){case"tree-tree":return;case"tree-blob":case"blob-tree":return["conflict",u];case"blob-blob":return await d.oid()!==await h.oid()?o?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]:await d.mode()!==await h.mode()?o?["update",u,await d.oid(),await d.mode(),!0]:["conflict",u]:["create-index",u,await d.oid(),await d.mode()];case"commit-tree":return;case"commit-blob":return["conflict",u];default:return["error",`new entry Unhandled type ${d.type}`]}case"100":return["delete-index",u];case"101":switch(await p.type()){case"tree":return["rmdir",u];case"blob":return await p.oid()!==await h.oid()?o?["delete",u]:["conflict",u]:["delete",u];case"commit":return["rmdir-index",u];default:return["error",`delete entry Unhandled type ${await p.type()}`]}case"110":case"111":switch(`${await p.type()}-${await d.type()}`){case"tree-tree":return;case"blob-blob":{if(await p.oid()===await d.oid()&&await p.mode()===await d.mode()&&!o)return;if(h){if(await h.oid()!==await p.oid()&&await h.oid()!==await d.oid())return o?["update",u,await d.oid(),await d.mode(),await d.mode()!==await h.mode()]:["conflict",u]}else if(o)return["update",u,await d.oid(),await d.mode(),await d.mode()!==await p.mode()];return await d.mode()!==await p.mode()?["update",u,await d.oid(),await d.mode(),!0]:await d.oid()!==await p.oid()?["update",u,await d.oid(),await d.mode(),!1]:void 0}case"tree-blob":return["update-dir-to-blob",u,await d.oid()];case"blob-tree":return["update-blob-to-tree",u];case"commit-commit":return["mkdir-index",u,await d.oid(),await d.mode()];default:return["error",`update entry Unhandled type ${await p.type()}-${await d.type()}`]}}},reduce:async function(u,d){return d=HP(d),u?u&&u[0]==="rmdir"?(d.push(u),d):(d.unshift(u),d):d}})}async function JP({fs:e,onProgress:t,onPostCheckout:n,dir:r,gitdir:a=Ot.join(r,".git"),remote:i="origin",ref:o,filepaths:s,noCheckout:l=!1,noUpdateHead:u=o===void 0,dryRun:d=!1,force:h=!1,track:p=!0,cache:g={}}){try{Je("fs",e),Je("dir",r),Je("gitdir",a);const v=o||"HEAD";return await $k({fs:new sn(e),cache:g,onProgress:t,onPostCheckout:n,dir:r,gitdir:a,remote:i,ref:v,filepaths:s,noCheckout:l,noUpdateHead:u,dryRun:d,force:h,track:p})}catch(v){throw v.caller="git.checkout",v}}const xre=new RegExp("^refs/(heads/|tags/|remotes/)?(.*)");function ud(e){const t=xre.exec(e);return t?t[1]==="remotes/"&&e.endsWith("/HEAD")?t[2].slice(0,-5):t[2]:e}async function Cu({fs:e,gitdir:t,fullname:n=!1,test:r=!1}){const a=await $t.resolve({fs:e,gitdir:t,ref:"HEAD",depth:2});if(r)try{await $t.resolve({fs:e,gitdir:t,ref:a})}catch{return}if(a.startsWith("refs/"))return n?a:ud(a)}function Sre(e){return e=e.replace(/^git@([^:]+):/,"https://$1/"),e=e.replace(/^ssh:\/\//,"https://"),e}function QP({username:e="",password:t=""}){return`Basic ${Yt.from(`${e}:${t}`).toString("base64")}`}async function Rg(e,t){const n=BP(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function zv(e){let t=0;const n=[];await Rg(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function eO(e){let t=e.match(/^https?:\/\/([^/]+)@/);if(t==null)return{url:e,auth:{}};t=t[1];const[n,r]=t.split(":");return e=e.replace(`${t}@`,""),{url:e,auth:{username:n,password:r}}}function B2(e,t){const n=t.toString(16);return"0".repeat(e-n.length)+n}class aa{static flush(){return Yt.from("0000","utf8")}static delim(){return Yt.from("0001","utf8")}static encode(t){typeof t=="string"&&(t=Yt.from(t));const n=t.length+4,r=B2(4,n);return Yt.concat([Yt.from(r,"utf8"),t])}static streamReader(t){const n=new zP(t);return async function(){try{let a=await n.read(4);if(a==null)return!0;if(a=parseInt(a.toString("utf8"),16),a===0||a===1)return null;const i=await n.read(a-4);return i??!0}catch(a){return t.error=a,!0}}}}async function tO(e){const t={};let n;for(;n=await e(),n!==!0;){if(n===null)continue;n=n.toString("utf8").replace(/\n$/,"");const r=n.indexOf("=");if(r>-1){const a=n.slice(0,r),i=n.slice(r+1);t[a]=i}else t[n]=!0}return{protocolVersion:2,capabilities2:t}}async function nO(e,{service:t}){const n=new Set,r=new Map,a=new Map,i=aa.streamReader(e);let o=await i();for(;o===null;)o=await i();if(o===!0)throw new yg;if(o.includes("version 2"))return tO(i);if(o.toString("utf8").replace(/\n$/,"")!==`# service=${t}`)throw new $d(`# service=${t}\\n`,o.toString("utf8"));let s=await i();for(;s===null;)s=await i();if(s===!0)return{capabilities:n,refs:r,symrefs:a};if(s=s.toString("utf8"),s.includes("version 2"))return tO(i);const[l,u]=sE(s,"\0","\\x00");if(u.split(" ").map(d=>n.add(d)),l!=="0000000000000000000000000000000000000000 capabilities^{}"){const[d,h]=sE(l," "," ");for(r.set(h,d);;){const p=await i();if(p===!0)break;if(p!==null){const[g,v]=sE(p.toString("utf8")," "," ");r.set(v,g)}}}for(const d of n)if(d.startsWith("symref=")){const h=d.match(/symref=([^:]+):(.*)/);h.length===3&&a.set(h[1],h[2])}return{protocolVersion:1,capabilities:n,refs:r,symrefs:a}}function sE(e,t,n){const r=e.trim().split(t);if(r.length!==2)throw new $d(`Two strings separated by '${n}'`,e.toString("utf8"));return r}const rO=(e,t)=>e.endsWith("?")?`${e}${t}`:`${e}/${t.replace(/^https?:\/\//,"")}`,aO=(e,t)=>{(t.username||t.password)&&(e.Authorization=QP(t)),t.headers&&Object.assign(e,t.headers)},lE=async e=>{try{const t=Yt.from(await zv(e.body)),n=t.toString("utf8");return{preview:n.length<256?n:n.slice(0,256)+"...",response:n,data:t}}catch{return{}}};class Uv{static async capabilities(){return["discover","connect"]}static async discover({http:t,onProgress:n,onAuth:r,onAuthSuccess:a,onAuthFailure:i,corsProxy:o,service:s,url:l,headers:u,protocolVersion:d}){let{url:h,auth:p}=eO(l);const g=o?rO(o,h):h;(p.username||p.password)&&(u.Authorization=QP(p)),d===2&&(u["Git-Protocol"]="version=2");let v,b,_=!1;do if(v=await t.request({onProgress:n,method:"GET",url:`${g}/info/refs?service=${s}`,headers:u}),b=!1,v.statusCode===401||v.statusCode===203){const x=_?i:r;if(x){if(p=await x(h,{...p,headers:{...u}}),p&&p.cancel)throw new Qh;p&&(aO(u,p),_=!0,b=!0)}}else v.statusCode===200&&_&&a&&await a(h,p);while(b);if(v.statusCode!==200){const{response:x}=await lE(v);throw new Eh(v.statusCode,v.statusMessage,x)}if(v.headers["content-type"]===`application/x-${s}-advertisement`){const x=await nO(v.body,{service:s});return x.auth=p,x}else{const{preview:x,response:S,data:E}=await lE(v);try{const C=await nO([E],{service:s});return C.auth=p,C}catch{throw new xg(x,S)}}}static async connect({http:t,onProgress:n,corsProxy:r,service:a,url:i,auth:o,body:s,headers:l}){const u=eO(i);u&&(i=u.url),r&&(i=rO(r,i)),l["content-type"]=`application/x-${a}-request`,l.accept=`application/x-${a}-result`,aO(l,o);const d=await t.request({onProgress:n,method:"POST",url:`${i}/${a}`,body:s,headers:l});if(d.statusCode!==200){const{response:h}=lE(d);throw new Eh(d.statusCode,d.statusMessage,h)}return d}}function Ere({url:e}){if(e.startsWith("git@"))return{transport:"ssh",address:e};const t=e.match(/(\w+)(:\/\/|::)(.*)/);if(t!==null){if(t[2]==="://")return{transport:t[1],address:t[0]};if(t[2]==="::")return{transport:t[1],address:t[3]}}}class n1{static getRemoteHelperFor({url:t}){const n=new Map;n.set("http",Uv),n.set("https",Uv);const r=Ere({url:t});if(!r)throw new Eg(t);if(n.has(r.transport))return n.get(r.transport);throw new Sg(t,r.transport,r.transport==="ssh"?Sre(t):void 0)}}let ad=null;class _0{static async read({fs:t,gitdir:n}){ad===null&&(ad=new v0);const r=Ot.join(n,"shallow"),a=new Set;return await ad.acquire(r,async function(){const i=await t.read(r,{encoding:"utf8"});if(i===null||i.trim()==="")return a;i.trim().split(`
`).map(o=>a.add(o))}),a}static async write({fs:t,gitdir:n,oids:r}){ad===null&&(ad=new v0);const a=Ot.join(n,"shallow");if(r.size>0){const i=[...r].join(`
`)+`
`;await ad.acquire(a,async function(){await t.write(a,i,{encoding:"utf8"})})}else await ad.acquire(a,async function(){await t.rm(a)})}}async function Cre({fs:e,gitdir:t,oid:n}){const r=`objects/${n.slice(0,2)}/${n.slice(2)}`;return e.exists(`${t}/${r}`)}async function kre({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){let i=await e.readdir(Ot.join(n,"objects/pack"));i=i.filter(o=>o.endsWith(".idx"));for(const o of i){const s=`${n}/objects/pack/${o}`,l=await Lk({fs:e,cache:t,filename:s,getExternalRefDelta:a});if(l.error)throw new In(l.error);if(l.offsets.has(r))return!0}return!1}async function iO({fs:e,cache:t,gitdir:n,oid:r,format:a="content"}){const i=s=>Hr({fs:e,cache:t,gitdir:n,oid:s});let o=await Cre({fs:e,gitdir:n,oid:r});return o||(o=await kre({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:i})),o}function Tre(e){const a="5041434b"+"00000002"+"00000000";return e.slice(0,12).toString("hex")===a}function e5(e,t){const n=e.map(r=>r.split("=",1)[0]);return t.filter(r=>{const a=r.split("=",1)[0];return n.includes(a)})}const r1={name:"isomorphic-git",version:"1.30.1",agent:"git/isomorphic-git@1.30.1"};class Vb{constructor(){this._queue=[]}write(t){if(this._ended)throw Error("You cannot write to a FIFO that has already been ended!");if(this._waiting){const n=this._waiting;this._waiting=null,n({value:t})}else this._queue.push(t)}end(){if(this._ended=!0,this._waiting){const t=this._waiting;this._waiting=null,t({done:!0})}}destroy(t){this.error=t,this.end()}async next(){if(this._queue.length>0)return{value:this._queue.shift()};if(this._ended)return{done:!0};if(this._waiting)throw Error("You cannot call read until the previous call to read has returned!");return new Promise(t=>{this._waiting=t})}}function Are(e){const t=e.indexOf("\r"),n=e.indexOf(`
`);return t===-1&&n===-1?-1:t===-1?n+1:n===-1?t+1:n===t+1?n+1:Math.min(t,n)+1}function t5(e){const t=new Vb;let n="";return(async()=>(await Rg(e,r=>{for(r=r.toString("utf8"),n+=r;;){const a=Are(n);if(a===-1)break;t.write(n.slice(0,a)),n=n.slice(a)}}),n.length>0&&t.write(n),t.end()))(),t}class n5{static demux(t){const n=aa.streamReader(t),r=new Vb,a=new Vb,i=new Vb,o=async function(){const s=await n();if(s===null)return o();if(s===!0){r.end(),i.end(),t.error?a.destroy(t.error):a.end();return}switch(s[0]){case 1:{a.write(s.slice(1));break}case 2:{i.write(s.slice(1));break}case 3:{const l=s.slice(1);i.write(l),r.end(),i.end(),a.destroy(new Error(l.toString("utf8")));return}default:r.write(s)}o()};return o(),{packetlines:r,packfile:a,progress:i}}}async function Nre(e){const{packetlines:t,packfile:n,progress:r}=n5.demux(e),a=[],i=[],o=[];let s=!1,l=!1;return new Promise((u,d)=>{Rg(t,h=>{const p=h.toString("utf8").trim();if(p.startsWith("shallow")){const g=p.slice(-41).trim();g.length!==40&&d(new uu(g)),a.push(g)}else if(p.startsWith("unshallow")){const g=p.slice(-41).trim();g.length!==40&&d(new uu(g)),i.push(g)}else if(p.startsWith("ACK")){const[,g,v]=p.split(" ");o.push({oid:g,status:v}),v||(l=!0)}else p.startsWith("NAK")?(s=!0,l=!0):(l=!0,s=!0);l&&(e.error?d(e.error):u({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))}).finally(()=>{l||(e.error?d(e.error):u({shallows:a,unshallows:i,acks:o,nak:s,packfile:n,progress:r}))})})}function Rre({capabilities:e=[],wants:t=[],haves:n=[],shallows:r=[],depth:a=null,since:i=null,exclude:o=[]}){const s=[];t=[...new Set(t)];let l=` ${e.join(" ")}`;for(const u of t)s.push(aa.encode(`want ${u}${l}
`)),l="";for(const u of r)s.push(aa.encode(`shallow ${u}
`));a!==null&&s.push(aa.encode(`deepen ${a}
`)),i!==null&&s.push(aa.encode(`deepen-since ${Math.floor(i.valueOf()/1e3)}
`));for(const u of o)s.push(aa.encode(`deepen-not ${u}
`));s.push(aa.flush());for(const u of n)s.push(aa.encode(`have ${u}
`));return s.push(aa.encode(`done
`)),s}async function Bk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:l,ref:u,remoteRef:d,remote:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:R=!1}){const D=u||await Cu({fs:e,gitdir:l,test:!0}),O=await pa.get({fs:e,gitdir:l}),L=h||D&&await O.get(`branch.${D}.remote`)||"origin",B=p||await O.get(`remote.${L}.url`);if(typeof B>"u")throw new Di("remote OR url");const Y=d||D&&await O.get(`branch.${D}.merge`)||u||"HEAD";g===void 0&&(g=await O.get("http.corsProxy"));const F=n1.getRemoteHelperFor({url:B}),Z=await F.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:g,service:"git-upload-pack",url:B,headers:C,protocolVersion:1}),q=Z.auth,ne=Z.refs;if(ne.size===0)return{defaultBranch:null,fetchHead:null,fetchHeadDescription:null};if(v!==null&&!Z.capabilities.has("shallow"))throw new Vc("shallow","depth");if(b!==null&&!Z.capabilities.has("deepen-since"))throw new Vc("deepen-since","since");if(_.length>0&&!Z.capabilities.has("deepen-not"))throw new Vc("deepen-not","exclude");if(x===!0&&!Z.capabilities.has("deepen-relative"))throw new Vc("deepen-relative","relative");const{oid:ae,fullref:re}=$t.resolveAgainstMap({ref:Y,map:ne});for(const Le of ne.keys())Le===re||Le==="HEAD"||Le.startsWith("refs/heads/")||S&&Le.startsWith("refs/tags/")||ne.delete(Le);const ee=e5([...Z.capabilities],["multi_ack_detailed","no-done","side-band-64k","ofs-delta",`agent=${r1.agent}`]);x&&ee.push("deepen-relative");const ie=E?[ae]:ne.values(),U=E?[D]:await $t.listRefs({fs:e,gitdir:l,filepath:"refs"});let Q=[];for(let Le of U)try{Le=await $t.expand({fs:e,gitdir:l,ref:Le});const Ie=await $t.resolve({fs:e,gitdir:l,ref:Le});await iO({fs:e,cache:t,gitdir:l,oid:Ie})&&Q.push(Ie)}catch{}Q=[...new Set(Q)];const X=await _0.read({fs:e,gitdir:l}),de=Z.capabilities.has("shallow")?[...X]:[],be=Rre({capabilities:ee,wants:ie,haves:Q,shallows:de,depth:v,since:b,exclude:_}),_e=Yt.from(await zv(be)),Pe=await F.connect({http:n,onProgress:r,corsProxy:g,service:"git-upload-pack",url:B,auth:q,body:[_e],headers:C}),Ne=await Nre(Pe.body);Pe.headers&&(Ne.headers=Pe.headers);for(const Le of Ne.shallows)if(!X.has(Le))try{const{object:Ie}=await Hr({fs:e,cache:t,gitdir:l,oid:Le}),V=new Ur(Ie),me=await Promise.all(V.headers().parent.map(le=>iO({fs:e,cache:t,gitdir:l,oid:le})));me.length===0||me.every(le=>le)||X.add(Le)}catch{X.add(Le)}for(const Le of Ne.unshallows)X.delete(Le);if(await _0.write({fs:e,gitdir:l,oids:X}),E){const Le=new Map([[re,ae]]),Ie=new Map;let V=10,me=re;for(;V--;){const oe=Z.symrefs.get(me);if(oe===void 0)break;Ie.set(me,oe),me=oe}const Te=ne.get(me);Te&&Le.set(me,Te);const{pruned:le}=await $t.updateRemoteRefs({fs:e,gitdir:l,remote:L,refs:Le,symrefs:Ie,tags:S,prune:k});k&&(Ne.pruned=le)}else{const{pruned:Le}=await $t.updateRemoteRefs({fs:e,gitdir:l,remote:L,refs:ne,symrefs:Z.symrefs,tags:S,prune:k,pruneTags:R});k&&(Ne.pruned=Le)}if(Ne.HEAD=Z.symrefs.get("HEAD"),Ne.HEAD===void 0){const{oid:Le}=$t.resolveAgainstMap({ref:"HEAD",map:ne});for(const[Ie,V]of ne.entries())if(Ie!=="HEAD"&&V===Le){Ne.HEAD=Ie;break}}const Re=re.startsWith("refs/tags")?"tag":"branch";if(Ne.FETCH_HEAD={oid:ae,description:`${Re} '${ud(re)}' of ${B}`},r||a){const Le=t5(Ne.progress);Rg(Le,async Ie=>{if(a&&await a(Ie),r){const V=Ie.match(/([^:]*).*\((\d+?)\/(\d+?)\)/);V&&await r({phase:V[1].trim(),loaded:parseInt(V[2],10),total:parseInt(V[3],10)})}})}const Ce=Yt.from(await zv(Ne.packfile));if(Pe.body.error)throw Pe.body.error;const Fe=Ce.slice(-20).toString("hex"),Qe={defaultBranch:Ne.HEAD,fetchHead:Ne.FETCH_HEAD.oid,fetchHeadDescription:Ne.FETCH_HEAD.description};if(Ne.headers&&(Qe.headers=Ne.headers),k&&(Qe.pruned=Ne.pruned),Fe!==""&&!Tre(Ce)){Qe.packfile=`objects/pack/pack-${Fe}.pack`;const Le=Ot.join(l,Qe.packfile);await e.write(Le,Ce);const Ie=me=>Hr({fs:e,cache:t,gitdir:l,oid:me}),V=await Sh.fromPack({pack:Ce,getExternalRefDelta:Ie,onProgress:r});await e.write(Le.replace(/\.pack$/,".idx"),await V.toBuffer())}return Qe}async function r5({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Ot.join(n,".git"),defaultBranch:a="master"}){if(await e.exists(r+"/config"))return;let i=["hooks","info","objects/info","objects/pack","refs/heads","refs/tags"];i=i.map(o=>r+"/"+o);for(const o of i)await e.mkdir(o);await e.write(r+"/config",`[core]
	repositoryformatversion = 0
	filemode = false
	bare = ${t}
`+(t?"":`	logallrefupdates = true
`)+`	symlinks = false
	ignorecase = true
`),await e.write(r+"/HEAD",`ref: refs/heads/${a}
`)}async function Ire({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPostCheckout:l,dir:u,gitdir:d,url:h,corsProxy:p,ref:g,remote:v,depth:b,since:_,exclude:x,relative:S,singleBranch:E,noCheckout:C,noTags:k,headers:R}){try{if(await r5({fs:e,gitdir:d}),await YP({fs:e,gitdir:d,remote:v,url:h,force:!1}),p){const L=await pa.get({fs:e,gitdir:d});await L.set("http.corsProxy",p),await pa.save({fs:e,gitdir:d,config:L})}const{defaultBranch:D,fetchHead:O}=await Bk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:d,ref:g,remote:v,corsProxy:p,depth:b,since:_,exclude:x,relative:S,singleBranch:E,headers:R,tags:!k});if(O===null)return;g=g||D,g=g.replace("refs/heads/",""),await $k({fs:e,cache:t,onProgress:r,onPostCheckout:l,dir:u,gitdir:d,ref:g,remote:v,noCheckout:C})}catch(D){throw await e.rmdir(d,{recursive:!0,maxRetries:10}).catch(()=>{}),D}}async function Ore({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:l,gitdir:u=Ot.join(l,".git"),url:d,corsProxy:h=void 0,ref:p=void 0,remote:g="origin",depth:v=void 0,since:b=void 0,exclude:_=[],relative:x=!1,singleBranch:S=!1,noCheckout:E=!1,noTags:C=!1,headers:k={},cache:R={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),E||Je("dir",l),Je("url",d),await Ire({fs:new sn(e),cache:R,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPostCheckout:s,dir:l,gitdir:u,url:d,corsProxy:h,ref:p,remote:g,depth:v,since:b,exclude:_,relative:x,singleBranch:S,noCheckout:E,noTags:C,headers:k})}catch(D){throw D.caller="git.clone",D}}async function Dre({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),message:a,author:i,committer:o,signingKey:s,amend:l=!1,dryRun:u=!1,noUpdateBranch:d=!1,ref:h,parent:p,tree:g,cache:v={}}){try{Je("fs",e),l||Je("message",a),s&&Je("onSign",t);const b=new sn(e);return await t1({fs:b,cache:v,onSign:t,gitdir:r,message:a,author:i,committer:o,signingKey:s,amend:l,dryRun:u,noUpdateBranch:d,ref:h,parent:p,tree:g})}catch(b){throw b.caller="git.commit",b}}async function jre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),fullname:r=!1,test:a=!1}){try{return Je("fs",e),Je("gitdir",n),await Cu({fs:new sn(e),gitdir:n,fullname:r,test:a})}catch(i){throw i.caller="git.currentBranch",i}}async function Mre({fs:e,gitdir:t,ref:n}){if(n=n.startsWith("refs/heads/")?n:`refs/heads/${n}`,!await $t.exists({fs:e,gitdir:t,ref:n}))throw new kr(n);const a=await $t.expand({fs:e,gitdir:t,ref:n}),i=await Cu({fs:e,gitdir:t,fullname:!0});if(a===i){const l=await $t.resolve({fs:e,gitdir:t,ref:a});await $t.writeRef({fs:e,gitdir:t,ref:"HEAD",value:l})}await $t.deleteRef({fs:e,gitdir:t,ref:a});const o=ud(n),s=await pa.get({fs:e,gitdir:t});await s.deleteSection("branch",o),await pa.save({fs:e,gitdir:t,config:s})}async function Pre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Mre({fs:new sn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteBranch",a}}async function Fre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{Je("fs",e),Je("ref",r),await $t.deleteRef({fs:new sn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteRef",a}}async function Lre({fs:e,gitdir:t,remote:n}){const r=await pa.get({fs:e,gitdir:t});await r.deleteSection("remote",n),await pa.save({fs:e,gitdir:t,config:r})}async function $re({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),remote:r}){try{return Je("fs",e),Je("remote",r),await Lre({fs:new sn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.deleteRemote",a}}async function Bre({fs:e,gitdir:t,ref:n}){n=n.startsWith("refs/tags/")?n:`refs/tags/${n}`,await $t.deleteRef({fs:e,gitdir:t,ref:n})}async function zre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{return Je("fs",e),Je("ref",r),await Bre({fs:new sn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.deleteTag",a}}async function Ure({fs:e,gitdir:t,oid:n}){const r=n.slice(0,2);return(await e.readdir(`${t}/objects/${r}`)).map(i=>`${r}${i}`).filter(i=>i.startsWith(n))}async function Hre({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a}){const i=[];let o=await e.readdir(Ot.join(n,"objects/pack"));o=o.filter(s=>s.endsWith(".idx"));for(const s of o){const l=`${n}/objects/pack/${s}`,u=await Lk({fs:e,cache:t,filename:l,getExternalRefDelta:a});if(u.error)throw new In(u.error);for(const d of u.offsets.keys())d.startsWith(r)&&i.push(d)}return i}async function qre({fs:e,cache:t,gitdir:n,oid:r}){const a=s=>Hr({fs:e,cache:t,gitdir:n,oid:s}),i=await Ure({fs:e,gitdir:n,oid:r}),o=await Hre({fs:e,cache:t,gitdir:n,oid:r,getExternalRefDelta:a});for(const s of o)i.indexOf(s)===-1&&i.push(s);if(i.length===1)return i[0];throw i.length>1?new pg("oids",r,i):new kr(`an object matching "${r}"`)}async function Vre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await qre({fs:new sn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.expandOid",i}}async function Gre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await $t.expand({fs:new sn(e),gitdir:n,ref:r})}catch(a){throw a.caller="git.expandRef",a}}async function zk({fs:e,cache:t,gitdir:n,oids:r}){const a={},i=r.length;let o=r.map((s,l)=>({index:l,oid:s}));for(;o.length;){const s=new Set;for(const{oid:u,index:d}of o)a[u]||(a[u]=new Set),a[u].add(d),a[u].size===i&&s.add(u);if(s.size>0)return[...s];const l=new Map;for(const{oid:u,index:d}of o)try{const{object:h}=await Hr({fs:e,cache:t,gitdir:n,oid:u}),p=Ur.from(h),{parent:g}=p.parseHeaders();for(const v of g)(!a[v]||!a[v].has(d))&&l.set(v+":"+d,{oid:v,index:d})}catch{}o=Array.from(l.values())}return[]}const cE=/^.*(\r?\n|$)/gm;function Wre({branches:e,contents:t}){const n=e[1],r=e[2],a=t[0],i=t[1],o=t[2],s=i.match(cE),l=a.match(cE),u=o.match(cE),d=fne(s,l,u),h=7;let p="",g=!0;for(const v of d)v.ok&&(p+=v.ok.join("")),v.conflict&&(g=!1,p+=`${"<".repeat(h)} ${n}
`,p+=v.conflict.a.join(""),p+=`${"=".repeat(h)}
`,p+=v.conflict.b.join(""),p+=`${">".repeat(h)} ${r}
`);return{cleanMerge:g,mergedText:p}}async function Kre({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),index:a,ourOid:i,baseOid:o,theirOid:s,ourName:l="ours",baseName:u="base",theirName:d="theirs",dryRun:h=!1,abortOnConflict:p=!0,mergeDriver:g}){const v=xo({ref:i}),b=xo({ref:o}),_=xo({ref:s}),x=[],S=[],E=[],C=[],k=await fu({fs:e,cache:t,dir:n,gitdir:r,trees:[v,b,_],map:async function(R,[D,O,L]){const B=Pv(R),Y=await Bv(D,O),F=await Bv(L,O);switch(`${Y}-${F}`){case"false-false":return{mode:await O.mode(),path:B,oid:await O.oid(),type:await O.type()};case"false-true":return L?{mode:await L.mode(),path:B,oid:await L.oid(),type:await L.type()}:void 0;case"true-false":return D?{mode:await D.mode(),path:B,oid:await D.oid(),type:await D.type()}:void 0;case"true-true":{if(D&&O&&L&&await D.type()==="blob"&&await O.type()==="blob"&&await L.type()==="blob")return Zre({fs:e,gitdir:r,path:B,ours:D,base:O,theirs:L,ourName:l,baseName:u,theirName:d,mergeDriver:g}).then(async Z=>{if(Z.cleanMerge)p||a.insert({filepath:R,oid:Z.mergeResult.oid,stage:0});else if(x.push(R),S.push(R),!p){const q=await O.oid(),ne=await D.oid(),ae=await L.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:q,stage:1}),a.insert({filepath:R,oid:ne,stage:2}),a.insert({filepath:R,oid:ae,stage:3})}return Z.mergeResult});if(O&&!D&&L&&await O.type()==="blob"&&await L.type()==="blob"){if(x.push(R),E.push(R),!p){const Z=await O.oid(),q=await L.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:Z,stage:1}),a.insert({filepath:R,oid:q,stage:3})}return{mode:await L.mode(),oid:await L.oid(),type:"blob",path:B}}if(O&&D&&!L&&await O.type()==="blob"&&await D.type()==="blob"){if(x.push(R),C.push(R),!p){const Z=await O.oid(),q=await D.oid();a.delete({filepath:R}),a.insert({filepath:R,oid:Z,stage:1}),a.insert({filepath:R,oid:q,stage:2})}return{mode:await D.mode(),oid:await D.oid(),type:"blob",path:B}}if(O&&!D&&!L&&await O.type()==="blob")return;throw new Xh}}},reduce:x.length!==0&&(!n||p)?void 0:async(R,D)=>{const O=D.filter(Boolean);if(R&&!(R&&R.type==="tree"&&O.length===0)){if(O.length>0){const B=new ji(O).toObject(),Y=await Fi({fs:e,gitdir:r,type:"tree",object:B,dryRun:h});R.oid=Y}return R}}});return x.length!==0?(n&&!p&&await fu({fs:e,cache:t,dir:n,gitdir:r,trees:[xo({ref:k.oid})],map:async function(R,[D]){const O=`${n}/${R}`;if(await D.type()==="blob"){const L=await D.mode(),B=new TextDecoder().decode(await D.content());await e.write(O,B,{mode:L})}return!0}}),new Jh(x,S,E,C)):k.oid}async function Zre({fs:e,gitdir:t,path:n,ours:r,base:a,theirs:i,ourName:o,theirName:s,baseName:l,dryRun:u,mergeDriver:d=Wre}){const h="blob",p=await a.mode()===await r.mode()?await i.mode():await r.mode();if(await r.oid()===await i.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};if(await r.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await i.oid(),type:h}};if(await i.oid()===await a.oid())return{cleanMerge:!0,mergeResult:{mode:p,path:n,oid:await r.oid(),type:h}};const g=Yt.from(await r.content()).toString("utf8"),v=Yt.from(await a.content()).toString("utf8"),b=Yt.from(await i.content()).toString("utf8"),{mergedText:_,cleanMerge:x}=await d({branches:[l,o,s],contents:[v,g,b],path:n}),S=await Fi({fs:e,gitdir:t,type:"blob",object:Yt.from(_,"utf8"),dryRun:u});return{cleanMerge:x,mergeResult:{mode:p,path:n,oid:S,type:h}}}async function a5({fs:e,cache:t,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:p,committer:g,signingKey:v,onSign:b,mergeDriver:_}){a===void 0&&(a=await Cu({fs:e,gitdir:r,fullname:!0})),a=await $t.expand({fs:e,gitdir:r,ref:a}),i=await $t.expand({fs:e,gitdir:r,ref:i});const x=await $t.resolve({fs:e,gitdir:r,ref:a}),S=await $t.resolve({fs:e,gitdir:r,ref:i}),E=await zk({fs:e,cache:t,gitdir:r,oids:[x,S]});if(E.length!==1)throw new Xh;const C=E[0];if(C===S)return{oid:x,alreadyMerged:!0};if(o&&C===x)return!l&&!u&&await $t.writeRef({fs:e,gitdir:r,ref:a,value:S}),{oid:S,fastForward:!0};{if(s)throw new bg;const k=await Ma.acquire({fs:e,gitdir:r,cache:t,allowUnmerged:!1},async D=>Kre({fs:e,cache:t,dir:n,gitdir:r,index:D,ourOid:x,theirOid:S,baseOid:C,ourName:ud(a),baseName:"base",theirName:ud(i),dryRun:l,abortOnConflict:d,mergeDriver:_}));if(k instanceof Jh)throw k;return h||(h=`Merge branch '${ud(i)}' into ${ud(a)}`),{oid:await t1({fs:e,cache:t,gitdir:r,message:h,ref:a,tree:k,parent:[x,S],author:p,committer:g,signingKey:v,onSign:b,dryRun:l,noUpdateBranch:u}),tree:k,mergeCommit:!0}}}async function i5({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,dir:l,gitdir:u,ref:d,url:h,remote:p,remoteRef:g,prune:v,pruneTags:b,fastForward:_,fastForwardOnly:x,corsProxy:S,singleBranch:E,headers:C,author:k,committer:R,signingKey:D}){try{if(!d){const B=await Cu({fs:e,gitdir:u});if(!B)throw new Di("ref");d=B}const{fetchHead:O,fetchHeadDescription:L}=await Bk({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,gitdir:u,corsProxy:S,ref:d,url:h,remote:p,remoteRef:g,singleBranch:E,headers:C,prune:v,pruneTags:b});await a5({fs:e,cache:t,gitdir:u,ours:d,theirs:O,fastForward:_,fastForwardOnly:x,message:`Merge ${L}`,author:k,committer:R,signingKey:D,dryRun:!1,noUpdateBranch:!1}),await $k({fs:e,cache:t,onProgress:r,dir:l,gitdir:u,ref:d,remote:p,noCheckout:!1})}catch(O){throw O.caller="git.pull",O}}async function Yre({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l=Ot.join(s,".git"),ref:u,url:d,remote:h,remoteRef:p,corsProxy:g,singleBranch:v,headers:b={},cache:_={}}){try{Je("fs",e),Je("http",t),Je("gitdir",l);const x={name:"",email:"",timestamp:Date.now(),timezoneOffset:0};return await i5({fs:new sn(e),cache:_,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l,ref:u,url:d,remote:h,remoteRef:p,fastForwardOnly:!0,corsProxy:g,singleBranch:v,headers:b,author:x,committer:x})}catch(x){throw x.caller="git.fastForward",x}}async function Xre({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l=Ot.join(s,".git"),ref:u,remote:d,remoteRef:h,url:p,corsProxy:g,depth:v=null,since:b=null,exclude:_=[],relative:x=!1,tags:S=!1,singleBranch:E=!1,headers:C={},prune:k=!1,pruneTags:R=!1,cache:D={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",l),await Bk({fs:new sn(e),cache:D,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,gitdir:l,ref:u,remote:d,remoteRef:h,url:p,corsProxy:g,depth:v,since:b,exclude:_,relative:x,tags:S,singleBranch:E,headers:C,prune:k,pruneTags:R})}catch(O){throw O.caller="git.fetch",O}}async function Jre({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oids:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await zk({fs:new sn(e),cache:a,gitdir:n,oids:r})}catch(i){throw i.caller="git.findMergeBase",i}}async function o5({fs:e,filepath:t}){if(await e.exists(Ot.join(t,".git")))return t;{const n=xh(t);if(n===t)throw new kr(`git root for ${t}`);return o5({fs:e,filepath:n})}}async function Qre({fs:e,filepath:t}){try{return Je("fs",e),Je("filepath",t),await o5({fs:new sn(e),filepath:t})}catch(n){throw n.caller="git.findRoot",n}}async function eae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await w0({fs:new sn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfig",a}}async function tae({fs:e,gitdir:t,path:n}){return(await pa.get({fs:e,gitdir:t})).getall(n)}async function nae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),path:r}){try{return Je("fs",e),Je("gitdir",n),Je("path",r),await tae({fs:new sn(e),gitdir:n,path:r})}catch(a){throw a.caller="git.getConfigAll",a}}async function rae({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1}){try{Je("http",e),Je("url",i);const u=await n1.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:1}),d={capabilities:[...u.capabilities]};for(const[h,p]of u.refs){const g=h.split("/"),v=g.pop();let b=d;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}for(const[h,p]of u.symrefs){const g=h.split("/"),v=g.pop();let b=d;for(const _ of g)b[_]=b[_]||{},b=b[_];b[v]=p}return d}catch(l){throw l.caller="git.getRemoteInfo",l}}function s5(e,t,n,r){const a=[];for(const[i,o]of e.refs){if(t&&!i.startsWith(t))continue;if(i.endsWith("^{}")){if(r){const l=i.replace("^{}",""),u=a[a.length-1],d=u.ref===l?u:a.find(h=>h.ref===l);if(d===void 0)throw new Error("I did not expect this to happen");d.peeled=o}continue}const s={ref:i,oid:o};n&&e.symrefs.has(i)&&(s.target=e.symrefs.get(i)),a.push(s)}return a}async function aae({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:l=2}){try{Je("http",e),Je("url",i);const d=await n1.getRemoteHelperFor({url:i}).discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(d.protocolVersion===2)return{protocolVersion:d.protocolVersion,capabilities:d.capabilities2};const h={};for(const p of d.capabilities){const[g,v]=p.split("=");v?h[g]=v:h[g]=!0}return{protocolVersion:1,capabilities:h,refs:s5(d,void 0,!0,!0)}}catch(u){throw u.caller="git.getRemoteInfo2",u}}async function iae({type:e,object:t,format:n="content",oid:r=void 0}){return n!=="deflated"&&(n!=="wrapped"&&(t=Yh.wrap({type:e,object:t})),r=await Vl(t)),{oid:r,object:t}}async function oae({object:e}){try{Je("object",e),typeof e=="string"?e=Yt.from(e,"utf8"):e=Yt.from(e);const t="blob",{oid:n,object:r}=await iae({type:"blob",format:"content",object:e});return{oid:n,type:t,object:new Uint8Array(r),format:"wrapped"}}catch(t){throw t.caller="git.hashBlob",t}}async function sae({fs:e,cache:t,onProgress:n,dir:r,gitdir:a,filepath:i}){try{i=Ot.join(r,i);const o=await e.read(i),s=u=>Hr({fs:e,cache:t,gitdir:a,oid:u}),l=await Sh.fromPack({pack:o,getExternalRefDelta:s,onProgress:n});return await e.write(i.replace(/\.pack$/,".idx"),await l.toBuffer()),{oids:[...l.hashes]}}catch(o){throw o.caller="git.indexPack",o}}async function lae({fs:e,onProgress:t,dir:n,gitdir:r=Ot.join(n,".git"),filepath:a,cache:i={}}){try{return Je("fs",e),Je("dir",n),Je("gitdir",n),Je("filepath",a),await sae({fs:new sn(e),cache:i,onProgress:t,dir:n,gitdir:r,filepath:a})}catch(o){throw o.caller="git.indexPack",o}}async function cae({fs:e,bare:t=!1,dir:n,gitdir:r=t?n:Ot.join(n,".git"),defaultBranch:a="master"}){try{return Je("fs",e),Je("gitdir",r),t||Je("dir",n),await r5({fs:new sn(e),bare:t,dir:n,gitdir:r,defaultBranch:a})}catch(i){throw i.caller="git.init",i}}async function l5({fs:e,cache:t,gitdir:n,oid:r,ancestor:a,depth:i}){const o=await _0.read({fs:e,gitdir:n});if(!r)throw new Di("oid");if(!a)throw new Di("ancestor");if(r===a)return!1;const s=[r],l=new Set;let u=0;for(;s.length;){if(u++===i)throw new wg(i);const d=s.shift(),{type:h,object:p}=await Hr({fs:e,cache:t,gitdir:n,oid:d});if(h!=="commit")throw new Si(d,h,"commit");const g=Ur.from(p).parse();for(const v of g.parent)if(v===a)return!0;if(!o.has(d))for(const v of g.parent)l.has(v)||(s.push(v),l.add(v))}return!1}async function uae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,ancestor:a,depth:i=-1,cache:o={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),Je("ancestor",a),await l5({fs:new sn(e),cache:o,gitdir:n,oid:r,ancestor:a,depth:i})}catch(s){throw s.caller="git.isDescendent",s}}async function dae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("dir",t),Je("gitdir",n),Je("filepath",r),ep.isIgnored({fs:new sn(e),dir:t,gitdir:n,filepath:r})}catch(a){throw a.caller="git.isIgnored",a}}async function fae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),remote:r}){try{return Je("fs",e),Je("gitdir",n),$t.listBranches({fs:new sn(e),gitdir:n,remote:r})}catch(a){throw a.caller="git.listBranches",a}}async function hae({fs:e,gitdir:t,ref:n,cache:r}){if(n){const a=await $t.resolve({gitdir:t,fs:e,ref:n}),i=[];return await c5({fs:e,cache:r,gitdir:t,oid:a,filenames:i,prefix:""}),i}else return Ma.acquire({fs:e,gitdir:t,cache:r},async function(a){return a.entries.map(i=>i.path)})}async function c5({fs:e,cache:t,gitdir:n,oid:r,filenames:a,prefix:i}){const{tree:o}=await tp({fs:e,cache:t,gitdir:n,oid:r});for(const s of o)s.type==="tree"?await c5({fs:e,cache:t,gitdir:n,oid:s.oid,filenames:a,prefix:Ot.join(i,s.path)}):a.push(Ot.join(i,s.path))}async function pae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),await hae({fs:new sn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listFiles",i}}async function mae({fs:e,cache:t,gitdir:n,ref:r}){let a;try{a=await $t.resolve({gitdir:n,fs:e,ref:r})}catch(s){if(s instanceof kr)return[]}return(await tp({fs:e,cache:t,gitdir:n,oid:a})).tree.map(s=>({target:s.path,note:s.oid}))}async function gae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r="refs/notes/commits",cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await mae({fs:new sn(e),cache:a,gitdir:n,ref:r})}catch(i){throw i.caller="git.listNotes",i}}async function yae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r}){try{return Je("fs",e),Je("gitdir",n),$t.listRefs({fs:new sn(e),gitdir:n,filepath:r})}catch(a){throw a.caller="git.listRefs",a}}async function bae({fs:e,gitdir:t}){const n=await pa.get({fs:e,gitdir:t}),r=await n.getSubsections("remote");return Promise.all(r.map(async i=>{const o=await n.get(`remote.${i}.url`);return{remote:i,url:o}}))}async function vae({fs:e,dir:t,gitdir:n=Ot.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),await bae({fs:new sn(e),gitdir:n})}catch(r){throw r.caller="git.listRemotes",r}}async function wae(e){const t=aa.streamReader(e),n=[];let r;for(;r=await t(),r!==!0;){if(r===null)continue;r=r.toString("utf8").replace(/\n$/,"");const[a,i,...o]=r.split(" "),s={ref:i,oid:a};for(const l of o){const[u,d]=l.split(":");u==="symref-target"?s.target=d:u==="peeled"&&(s.peeled=d)}n.push(s)}return n}async function _ae({prefix:e,symrefs:t,peelTags:n}){const r=[];return r.push(aa.encode(`command=ls-refs
`)),r.push(aa.encode(`agent=${r1.agent}
`)),(n||t||e)&&r.push(aa.delim()),n&&r.push(aa.encode("peel")),t&&r.push(aa.encode("symrefs")),e&&r.push(aa.encode(`ref-prefix ${e}`)),r.push(aa.flush()),r}async function xae({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,url:i,headers:o={},forPush:s=!1,protocolVersion:l=2,prefix:u,symrefs:d,peelTags:h}){try{Je("http",e),Je("url",i);const p=await Uv.discover({http:e,onAuth:t,onAuthSuccess:n,onAuthFailure:r,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,headers:o,protocolVersion:l});if(p.protocolVersion===1)return s5(p,u,d,h);const g=await _ae({prefix:u,symrefs:d,peelTags:h}),v=await Uv.connect({http:e,auth:p.auth,headers:o,corsProxy:a,service:s?"git-receive-pack":"git-upload-pack",url:i,body:g});return wae(v.body)}catch(p){throw p.caller="git.listServerRefs",p}}async function Sae({fs:e,dir:t,gitdir:n=Ot.join(t,".git")}){try{return Je("fs",e),Je("gitdir",n),$t.listTags({fs:new sn(e),gitdir:n})}catch(r){throw r.caller="git.listTags",r}}function Eae(e,t){return e.committer.timestamp-t.committer.timestamp}const Cae="e69de29bb2d1d6434b8b29ae775ad8c2e48c5391";async function oO({fs:e,cache:t,gitdir:n,oid:r,fileId:a}){if(a===Cae)return;const i=r;let o;const s=await kh({fs:e,cache:t,gitdir:n,oid:r}),l=s.tree;return a===s.oid?o=s.path:(o=await u5({fs:e,cache:t,gitdir:n,tree:l,fileId:a,oid:i}),Array.isArray(o)&&(o.length===0?o=void 0:o.length===1&&(o=o[0]))),o}async function u5({fs:e,cache:t,gitdir:n,tree:r,fileId:a,oid:i,filepaths:o=[],parentPath:s=""}){const l=r.entries().map(function(u){let d;return u.oid===a?(d=Ot.join(s,u.path),o.push(d)):u.type==="tree"&&(d=Hr({fs:e,cache:t,gitdir:n,oid:u.oid}).then(function({object:h}){return u5({fs:e,cache:t,gitdir:n,tree:ji.from(h),fileId:a,oid:i,filepaths:o,parentPath:Ot.join(s,u.path)})})),d});return await Promise.all(l),o}async function kae({fs:e,cache:t,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:l}){const u=typeof o>"u"?void 0:Math.floor(o.valueOf()/1e3),d=[],h=await _0.read({fs:e,gitdir:n}),p=await $t.resolve({fs:e,gitdir:n,ref:a}),g=[await Ah({fs:e,cache:t,gitdir:n,oid:p})];let v,b,_;function x(S){_&&r&&d.push(S)}for(;g.length>0;){const S=g.pop();if(u!==void 0&&S.commit.committer.timestamp<=u)break;if(r){let E;try{E=await Ag({fs:e,cache:t,gitdir:n,oid:S.commit.tree,filepath:r}),b&&v!==E&&d.push(b),v=E,b=S,_=!0}catch(C){if(C instanceof kr){let k=l&&v;if(k&&(k=await oO({fs:e,cache:t,gitdir:n,oid:S.commit.tree,fileId:v}),k))if(Array.isArray(k)){if(b){const R=await oO({fs:e,cache:t,gitdir:n,oid:b.commit.tree,fileId:v});if(Array.isArray(R))if(k=k.filter(D=>R.indexOf(D)===-1),k.length===1)k=k[0],r=k,b&&d.push(b);else{k=!1,b&&d.push(b);break}}}else r=k,b&&d.push(b);if(!k){if(_&&v&&(d.push(b),!s))break;if(!s&&!l)throw C}b=S,_=!1}else throw C}}else d.push(S);if(i!==void 0&&d.length===i){x(S);break}if(!h.has(S.oid))for(const E of S.commit.parent){const C=await Ah({fs:e,cache:t,gitdir:n,oid:E});g.map(k=>k.oid).includes(C.oid)||g.push(C)}g.length===0&&x(S),g.sort((E,C)=>Eae(E.commit,C.commit))}return d}async function Tae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,ref:a="HEAD",depth:i,since:o,force:s,follow:l,cache:u={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",a),await kae({fs:new sn(e),cache:u,gitdir:n,filepath:r,ref:a,depth:i,since:o,force:s,follow:l})}catch(d){throw d.caller="git.log",d}}async function Aae({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ours:a,theirs:i,fastForward:o=!0,fastForwardOnly:s=!1,dryRun:l=!1,noUpdateBranch:u=!1,abortOnConflict:d=!0,message:h,author:p,committer:g,signingKey:v,cache:b={},mergeDriver:_}){try{Je("fs",e),v&&Je("onSign",t);const x=new sn(e),S=await hu({fs:x,gitdir:r,author:p});if(!S&&(!s||!o))throw new oi("author");const E=await Th({fs:x,gitdir:r,author:S,committer:g});if(!E&&(!s||!o))throw new oi("committer");return await a5({fs:x,cache:b,dir:n,gitdir:r,ours:a,theirs:i,fastForward:o,fastForwardOnly:s,dryRun:l,noUpdateBranch:u,abortOnConflict:d,message:h,author:S,committer:E,signingKey:v,onSign:t,mergeDriver:_})}catch(x){throw x.caller="git.merge",x}}const Nae={commit:16,tree:32,blob:48,tag:64,ofs_delta:96,ref_delta:112};async function d5({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),oids:a}){const i=new AP,o=[];function s(d,h){const p=Yt.from(d,h);o.push(p),i.update(p)}async function l({stype:d,object:h}){const p=Nae[d];let g=h.length,v=g>15?128:0;const b=g&15;g=g>>>4;let _=(v|p|b).toString(16);for(s(_,"hex");v;)v=g>127?128:0,_=v|g&127,s(B2(2,_),"hex"),g=g>>>7;s(Yt.from(await qP(h)))}s("PACK"),s("00000002","hex"),s(B2(8,a.length),"hex");for(const d of a){const{type:h,object:p}=await Hr({fs:e,cache:t,gitdir:r,oid:d});await l({object:p,stype:h})}const u=i.digest();return o.push(u),o}async function Rae({fs:e,cache:t,gitdir:n,oids:r,write:a}){const i=await d5({fs:e,cache:t,gitdir:n,oids:r}),o=Yt.from(await zv(i)),l=`pack-${o.slice(-20).toString("hex")}.pack`;return a?(await e.write(Ot.join(n,`objects/pack/${l}`),o),{filename:l}):{filename:l,packfile:new Uint8Array(o)}}async function Iae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oids:r,write:a=!1,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oids",r),await Rae({fs:new sn(e),cache:i,gitdir:n,oids:r,write:a})}catch(o){throw o.caller="git.packObjects",o}}async function Oae({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l=Ot.join(s,".git"),ref:u,url:d,remote:h,remoteRef:p,prune:g=!1,pruneTags:v=!1,fastForward:b=!0,fastForwardOnly:_=!1,corsProxy:x,singleBranch:S,headers:E={},author:C,committer:k,signingKey:R,cache:D={}}){try{Je("fs",e),Je("gitdir",l);const O=new sn(e),L=await hu({fs:O,gitdir:l,author:C});if(!L)throw new oi("author");const B=await Th({fs:O,gitdir:l,author:L,committer:k});if(!B)throw new oi("committer");return await i5({fs:O,cache:D,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,dir:s,gitdir:l,ref:u,url:d,remote:h,remoteRef:p,fastForward:b,fastForwardOnly:_,corsProxy:x,singleBranch:S,headers:E,author:L,committer:B,signingKey:R,prune:g,pruneTags:v})}catch(O){throw O.caller="git.pull",O}}async function Dae({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),start:a,finish:i}){const o=await _0.read({fs:e,gitdir:r}),s=new Set,l=new Set;for(const h of a)s.add(await $t.resolve({fs:e,gitdir:r,ref:h}));for(const h of i)try{const p=await $t.resolve({fs:e,gitdir:r,ref:h});l.add(p)}catch{}const u=new Set;async function d(h){u.add(h);const{type:p,object:g}=await Hr({fs:e,cache:t,gitdir:r,oid:h});if(p==="tag"){const b=vi.from(g).headers().object;return d(b)}if(p!=="commit")throw new Si(h,p,"commit");if(!o.has(h)){const b=Ur.from(g).headers().parent;for(h of b)!l.has(h)&&!u.has(h)&&await d(h)}}for(const h of s)await d(h);return u}async function uE({fs:e,cache:t,dir:n,gitdir:r=Ot.join(n,".git"),oids:a}){const i=new Set;async function o(s){if(i.has(s))return;i.add(s);const{type:l,object:u}=await Hr({fs:e,cache:t,gitdir:r,oid:s});if(l==="tag"){const h=vi.from(u).headers().object;await o(h)}else if(l==="commit"){const h=Ur.from(u).headers().tree;await o(h)}else if(l==="tree"){const d=ji.from(u);for(const h of d)h.type==="blob"&&i.add(h.oid),h.type==="tree"&&await o(h.oid)}}for(const s of a)await o(s);return i}async function jae(e){const t={};let n="";const r=aa.streamReader(e);let a=await r();for(;a!==!0;)a!==null&&(n+=a.toString("utf8")+`
`),a=await r();const i=n.toString("utf8").split(`
`);if(a=i.shift(),!a.startsWith("unpack "))throw new $d('unpack ok" or "unpack [error message]',a);t.ok=a==="unpack ok",t.ok||(t.error=a.slice(7)),t.refs={};for(const o of i){if(o.trim()==="")continue;const s=o.slice(0,2),l=o.slice(3);let u=l.indexOf(" ");u===-1&&(u=l.length);const d=l.slice(0,u),h=l.slice(u+1);t.refs[d]={ok:s==="ok",error:h}}return t}async function Mae({capabilities:e=[],triplets:t=[]}){const n=[];let r=`\0 ${e.join(" ")}`;for(const a of t)n.push(aa.encode(`${a.oldoid} ${a.oid} ${a.fullRef}${r}
`)),r="";return n.push(aa.flush()),n}async function Pae({fs:e,cache:t,http:n,onProgress:r,onMessage:a,onAuth:i,onAuthSuccess:o,onAuthFailure:s,onPrePush:l,gitdir:u,ref:d,remoteRef:h,remote:p,url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={}}){const S=d||await Cu({fs:e,gitdir:u});if(typeof S>"u")throw new Di("ref");const E=await pa.get({fs:e,gitdir:u});p=p||await E.get(`branch.${S}.pushRemote`)||await E.get("remote.pushDefault")||await E.get(`branch.${S}.remote`)||"origin";const C=g||await E.get(`remote.${p}.pushurl`)||await E.get(`remote.${p}.url`);if(typeof C>"u")throw new Di("remote OR url");const k=h||await E.get(`branch.${S}.merge`);if(typeof C>"u")throw new Di("remoteRef");_===void 0&&(_=await E.get("http.corsProxy"));const R=await $t.expand({fs:e,gitdir:u,ref:S}),D=b?"0000000000000000000000000000000000000000":await $t.resolve({fs:e,gitdir:u,ref:R}),O=n1.getRemoteHelperFor({url:C}),L=await O.discover({http:n,onAuth:i,onAuthSuccess:o,onAuthFailure:s,corsProxy:_,service:"git-receive-pack",url:C,headers:x,protocolVersion:1}),B=L.auth;let Y;if(!k)Y=R;else try{Y=await $t.expandAgainstMap({ref:k,map:L.refs})}catch(X){if(X instanceof kr)Y=k.startsWith("refs/")?k:`refs/heads/${k}`;else throw X}const F=L.refs.get(Y)||"0000000000000000000000000000000000000000";if(l&&!await l({remote:p,url:C,localRef:{ref:b?"(delete)":R,oid:D},remoteRef:{ref:Y,oid:F}}))throw new Qh;const Z=!L.capabilities.has("no-thin");let q=new Set;if(!b){const X=[...L.refs.values()];let de=new Set;if(F!=="0000000000000000000000000000000000000000"){const be=await zk({fs:e,cache:t,gitdir:u,oids:[D,F]});for(const _e of be)X.push(_e);Z&&(de=await uE({fs:e,cache:t,gitdir:u,oids:be}))}if(!X.includes(D)){const be=await Dae({fs:e,cache:t,gitdir:u,start:[D],finish:X});q=await uE({fs:e,cache:t,gitdir:u,oids:be})}if(Z){try{const be=await $t.resolve({fs:e,gitdir:u,ref:`refs/remotes/${p}/HEAD`,depth:2}),{oid:_e}=await $t.resolveAgainstMap({ref:be.replace(`refs/remotes/${p}/`,""),fullref:be,map:L.refs}),Pe=[_e];for(const Ne of await uE({fs:e,cache:t,gitdir:u,oids:Pe}))de.add(Ne)}catch{}for(const be of de)q.delete(be)}if(D===F&&(v=!0),!v){if(R.startsWith("refs/tags")&&F!=="0000000000000000000000000000000000000000")throw new Ch("tag-exists");if(D!=="0000000000000000000000000000000000000000"&&F!=="0000000000000000000000000000000000000000"&&!await l5({fs:e,cache:t,gitdir:u,oid:D,ancestor:F,depth:-1}))throw new Ch("not-fast-forward")}}const ne=e5([...L.capabilities],["report-status","side-band-64k",`agent=${r1.agent}`]),ae=await Mae({capabilities:ne,triplets:[{oldoid:F,oid:D,fullRef:Y}]}),re=b?[]:await d5({fs:e,cache:t,gitdir:u,oids:[...q]}),ee=await O.connect({http:n,onProgress:r,corsProxy:_,service:"git-receive-pack",url:C,auth:B,headers:x,body:[...ae,...re]}),{packfile:ie,progress:U}=await n5.demux(ee.body);if(a){const X=t5(U);Rg(X,async de=>{await a(de)})}const Q=await jae(ie);if(ee.headers&&(Q.headers=ee.headers),p&&Q.ok&&Q.refs[Y].ok&&!R.startsWith("refs/tags")){const X=`refs/remotes/${p}/${Y.replace("refs/heads","")}`;b?await $t.deleteRef({fs:e,gitdir:u,ref:X}):await $t.writeRef({fs:e,gitdir:u,ref:X,value:D})}if(Q.ok&&Object.values(Q.refs).every(X=>X.ok))return Q;{const X=Object.entries(Q.refs).filter(([de,be])=>!be.ok).map(([de,be])=>`
  - ${de}: ${be.error}`).join("");throw new vg(X,Q)}}async function Fae({fs:e,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,dir:l,gitdir:u=Ot.join(l,".git"),ref:d,remoteRef:h,remote:p="origin",url:g,force:v=!1,delete:b=!1,corsProxy:_,headers:x={},cache:S={}}){try{return Je("fs",e),Je("http",t),Je("gitdir",u),await Pae({fs:new sn(e),cache:S,http:t,onProgress:n,onMessage:r,onAuth:a,onAuthSuccess:i,onAuthFailure:o,onPrePush:s,gitdir:u,ref:d,remoteRef:h,remote:p,url:g,force:v,delete:b,corsProxy:_,headers:x})}catch(E){throw E.caller="git.push",E}}async function f5({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Hr({fs:e,cache:t,gitdir:n,oid:r});if(a==="tag")return r=vi.from(i).parse().object,f5({fs:e,cache:t,gitdir:n,oid:r});if(a!=="blob")throw new Si(r,a,"blob");return{oid:r,blob:new Uint8Array(i)}}async function h5({fs:e,cache:t,gitdir:n,oid:r,filepath:a=void 0}){return a!==void 0&&(r=await Ag({fs:e,cache:t,gitdir:n,oid:r,filepath:a})),await f5({fs:e,cache:t,gitdir:n,oid:r})}async function Lae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,filepath:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await h5({fs:new sn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readBlob",o}}async function p5({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Ah({fs:new sn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readCommit",i}}async function $ae({fs:e,cache:t,gitdir:n,ref:r="refs/notes/commits",oid:a}){const i=await $t.resolve({gitdir:n,fs:e,ref:r}),{blob:o}=await h5({fs:e,cache:t,gitdir:n,oid:i,filepath:a});return o}async function Bae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r="refs/notes/commits",oid:a,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oid",a),await $ae({fs:new sn(e),cache:i,gitdir:n,ref:r,oid:a})}catch(o){throw o.caller="git.readNote",o}}async function zae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,format:a="parsed",filepath:i=void 0,encoding:o=void 0,cache:s={}}){try{Je("fs",e),Je("gitdir",n),Je("oid",r);const l=new sn(e);i!==void 0&&(r=await Ag({fs:l,cache:s,gitdir:n,oid:r,filepath:i}));const d=await Hr({fs:l,cache:s,gitdir:n,oid:r,format:a==="parsed"?"content":a});if(d.oid=r,a==="parsed")switch(d.format="parsed",d.type){case"commit":d.object=Ur.from(d.object).parse();break;case"tree":d.object=ji.from(d.object).entries();break;case"blob":o?d.object=d.object.toString(o):(d.object=new Uint8Array(d.object),d.format="content");break;case"tag":d.object=vi.from(d.object).parse();break;default:throw new Si(d.oid,d.type,"blob|commit|tag|tree")}else(d.format==="deflated"||d.format==="wrapped")&&(d.type=d.format);return d}catch(l){throw l.caller="git.readObject",l}}async function Uae({fs:e,cache:t,gitdir:n,oid:r}){const{type:a,object:i}=await Hr({fs:e,cache:t,gitdir:n,oid:r,format:"content"});if(a!=="tag")throw new Si(r,a,"tag");const o=vi.from(i);return{oid:r,tag:o.parse(),payload:o.payload()}}async function Hae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,cache:a={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await Uae({fs:new sn(e),cache:a,gitdir:n,oid:r})}catch(i){throw i.caller="git.readTag",i}}async function qae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),oid:r,filepath:a=void 0,cache:i={}}){try{return Je("fs",e),Je("gitdir",n),Je("oid",r),await tp({fs:new sn(e),cache:i,gitdir:n,oid:r,filepath:a})}catch(o){throw o.caller="git.readTree",o}}async function Vae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r),await Ma.acquire({fs:new sn(e),gitdir:n,cache:a},async function(i){i.delete({filepath:r})})}catch(i){throw i.caller="git.remove",i}}async function Gae({fs:e,cache:t,onSign:n,gitdir:r,ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:l}){let u;try{u=await $t.resolve({gitdir:r,fs:e,ref:a})}catch(v){if(!(v instanceof kr))throw v}let h=(await tp({fs:e,gitdir:r,oid:u||"4b825dc642cb6eb9a060e54bf8d69288fbee4904"})).tree;h=h.filter(v=>v.path!==i);const p=await Ng({fs:e,gitdir:r,tree:h});return await t1({fs:e,cache:t,onSign:n,gitdir:r,ref:a,tree:p,parent:u&&[u],message:`Note removed by 'isomorphic-git removeNote'
`,author:o,committer:s,signingKey:l})}async function Wae({fs:e,onSign:t,dir:n,gitdir:r=Ot.join(n,".git"),ref:a="refs/notes/commits",oid:i,author:o,committer:s,signingKey:l,cache:u={}}){try{Je("fs",e),Je("gitdir",r),Je("oid",i);const d=new sn(e),h=await hu({fs:d,gitdir:r,author:o});if(!h)throw new oi("author");const p=await Th({fs:d,gitdir:r,author:h,committer:s});if(!p)throw new oi("committer");return await Gae({fs:d,cache:u,onSign:t,gitdir:r,ref:a,oid:i,author:h,committer:p,signingKey:l})}catch(d){throw d.caller="git.removeNote",d}}async function Kae({fs:e,gitdir:t,oldref:n,ref:r,checkout:a=!1}){if(r!==js.clean(r))throw new Jo(r,js.clean(r));if(n!==js.clean(n))throw new Jo(n,js.clean(n));const i=`refs/heads/${n}`,o=`refs/heads/${r}`;if(await $t.exists({fs:e,gitdir:t,ref:o}))throw new as("branch",r,!1);const l=await $t.resolve({fs:e,gitdir:t,ref:i,depth:1});await $t.writeRef({fs:e,gitdir:t,ref:o,value:l}),await $t.deleteRef({fs:e,gitdir:t,ref:i});const d=await Cu({fs:e,gitdir:t,fullname:!0})===i;(a||d)&&await $t.writeSymbolicRef({fs:e,gitdir:t,ref:"HEAD",value:o})}async function Zae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,oldref:a,checkout:i=!1}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),Je("oldref",a),await Kae({fs:new sn(e),gitdir:n,ref:r,oldref:a,checkout:i})}catch(o){throw o.caller="git.renameBranch",o}}async function m5({gitdir:e,type:t,object:n}){return Vl(Yh.wrap({type:t,object:n}))}async function Yae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,ref:a,cache:i={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const o=new sn(e);let s,l;try{s=await $t.resolve({fs:o,gitdir:n,ref:a||"HEAD"})}catch(h){if(a)throw h}if(s)try{s=await Ag({fs:o,cache:i,gitdir:n,oid:s,filepath:r})}catch{s=null}let u={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:0,uid:0,gid:0,size:0};const d=t&&await o.read(Ot.join(t,r));d&&(l=await m5({gitdir:n,type:"blob",object:d}),s===l&&(u=await o.lstat(Ot.join(t,r)))),await Ma.acquire({fs:o,gitdir:n,cache:i},async function(h){h.delete({filepath:r}),s&&h.insert({filepath:r,stats:u,oid:s})})}catch(o){throw o.caller="git.reset",o}}async function Xae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,depth:a}){try{return Je("fs",e),Je("gitdir",n),Je("ref",r),await $t.resolve({fs:new sn(e),gitdir:n,ref:r,depth:a})}catch(i){throw i.caller="git.resolveRef",i}}async function Jae({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),path:r,value:a,append:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("path",r);const o=new sn(e),s=await pa.get({fs:o,gitdir:n});i?await s.append(r,a):await s.set(r,a),await pa.save({fs:o,gitdir:n,config:s})}catch(o){throw o.caller="git.setConfig",o}}async function g5({fs:e,gitdir:t,commit:n}){const r=Ur.from(n).toObject();return await Fi({fs:e,gitdir:t,type:"commit",object:r,format:"content"})}class Hv{static get timezoneOffsetForRefLogEntry(){const t=new Date().getTimezoneOffset(),n=Math.abs(Math.floor(t/60)),r=Math.abs(t%60).toString().padStart(2,"0");return`${t>0?"-":"+"}${n.toString().padStart(2,"0")}${r}`}static createStashReflogEntry(t,n,r){const a=t.name.replace(/\s/g,""),i="0000000000000000000000000000000000000000",o=Math.floor(Date.now()/1e3),s=Hv.timezoneOffsetForRefLogEntry;return`${i} ${n} ${a} ${t.email} ${o} ${s}	${r}
`}static getStashReflogEntry(t,n=!1){return t.split(`
`).filter(i=>i).reverse().map((i,o)=>n?`stash@{${o}}: ${i.split("	")[1]}`:i)}}const Qae={stage:Zh,workdir:Tg};let dE;async function Nh(e,t){return dE===void 0&&(dE=new v0),dE.acquire(e,t)}async function eie(e,t,n,r,a=null){const i=Ot.join(n,r),o=await e.lstat(i);if(!o)throw new kr(i);if(o.isDirectory())throw new In(`${i}: file expected, but found directory`);const s=a?await $P({fs:e,gitdir:t,oid:a}):void 0;let l=s?a:void 0;return s||await Nh({fs:e,gitdir:t,currentFilepath:i},async()=>{const u=o.isSymbolicLink()?await e.readlink(i).then(VP):await e.read(i);if(u===null)throw new kr(i);l=await Fi({fs:e,gitdir:t,type:"blob",object:u})}),l}async function tie({fs:e,dir:t,gitdir:n,entries:r}){async function a(i){if(i.type==="tree"){if(!i.oid){const o=await Promise.all(i.children.map(a));i.oid=await Ng({fs:e,gitdir:n,tree:o}),i.mode=16384}}else i.type==="blob"&&(i.oid=await eie(e,n,t,i.path,i.oid),i.mode=33188);return i.path=i.path.split("/").pop(),i}return Promise.all(r.map(a))}async function sO({fs:e,dir:t,gitdir:n,treePair:r}){const a=r[1]==="stage",i=r.map(g=>typeof g=="string"?Qae[g]():g),o=[],d=await fu({fs:e,cache:{},dir:t,gitdir:n,trees:i,map:async(g,[v,b])=>{if(!(g==="."||await ep.isIgnored({fs:e,dir:t,gitdir:n,filepath:g}))&&b)return(!v||await v.oid()!==await b.oid()&&await b.oid()!==void 0)&&o.push([v,b]),{mode:await b.mode(),path:g,oid:await b.oid(),type:await b.type()}},reduce:async(g,v)=>(v=v.filter(Boolean),g?(g.children=v,g):v.length>0?v:void 0),iterate:async(g,v)=>{const b=[];for(const _ of v){const[x,S]=_;a?S&&(await e.exists(`${t}/${S.toString()}`)?b.push(_):o.push([null,S])):x&&(S?b.push(_):o.push([x,null]))}return b.length?Promise.all(b.map(g)):[]}});if(o.length===0||d.length===0)return null;const p=(await tie({fs:e,dir:t,gitdir:n,entries:d})).filter(Boolean).map(g=>({mode:g.mode,path:g.path,oid:g.oid,type:g.type}));return Ng({fs:e,gitdir:n,tree:p})}async function nie({fs:e,dir:t,gitdir:n,stashCommit:r,parentCommit:a,wasStaged:i}){const o=[],s=[],l=await fu({fs:e,cache:{},dir:t,gitdir:n,trees:[xo({ref:a}),xo({ref:r})],map:async(u,[d,h])=>{if(u==="."||await ep.isIgnored({fs:e,dir:t,gitdir:n,filepath:u}))return;const p=h?await h.type():await d.type();if(p!=="tree"&&p!=="blob")return;if(!h&&d){const v=p==="tree"?"rmdir":"rm";return p==="tree"&&o.push(u),p==="blob"&&i&&s.push({filepath:u,oid:await d.oid()}),{method:v,filepath:u}}const g=await h.oid();if(!d||await d.oid()!==g)return p==="tree"?{method:"mkdir",filepath:u}:(i&&s.push({filepath:u,oid:g,stats:await e.lstat(Ot.join(t,u))}),{method:"write",filepath:u,oid:g})}});await Nh({fs:e,gitdir:n,dirRemoved:o,ops:l},async()=>{for(const u of l){const d=Ot.join(t,u.filepath);switch(u.method){case"rmdir":await e.rmdir(d);break;case"mkdir":await e.mkdir(d);break;case"rm":await e.rm(d);break;case"write":if(!o.some(h=>d.startsWith(h))){const{object:h}=await Hr({fs:e,cache:{},gitdir:n,oid:u.oid});await e.exists(d)&&await e.rm(d),await e.write(d,h)}break}}}),await Ma.acquire({fs:e,gitdir:n,cache:{}},async u=>{s.forEach(({filepath:d,stats:h,oid:p})=>{u.insert({filepath:d,stats:h,oid:p})})})}class Ll{constructor({fs:t,dir:n,gitdir:r=Ot.join(n,".git")}){Object.assign(this,{fs:t,dir:n,gitdir:r,_author:null})}static get refStash(){return"refs/stash"}static get refLogsStash(){return"logs/refs/stash"}get refStashPath(){return Ot.join(this.gitdir,Ll.refStash)}get refLogsStashPath(){return Ot.join(this.gitdir,Ll.refLogsStash)}async getAuthor(){if(!this._author&&(this._author=await hu({fs:this.fs,gitdir:this.gitdir,author:{}}),!this._author))throw new oi("author");return this._author}async getStashSHA(t,n){return await this.fs.exists(this.refStashPath)?(n||await this.readStashReflogs({parsed:!1}))[t].split(" ")[1]:null}async writeStashCommit({message:t,tree:n,parent:r}){return g5({fs:this.fs,gitdir:this.gitdir,commit:{message:t,tree:n,parent:r,author:await this.getAuthor(),committer:await this.getAuthor()}})}async readStashCommit(t){const n=await this.readStashReflogs({parsed:!1});if(t!==0&&(t<0||t>n.length-1))throw new Jo(`stash@${t}`,"number that is in range of [0, num of stash pushed]");const r=await this.getStashSHA(t,n);return r?Ah({fs:this.fs,cache:{},gitdir:this.gitdir,oid:r}):{}}async writeStashRef(t){return $t.writeRef({fs:this.fs,gitdir:this.gitdir,ref:Ll.refStash,value:t})}async writeStashReflogEntry({stashCommit:t,message:n}){const r=await this.getAuthor(),a=Hv.createStashReflogEntry(r,t,n),i=this.refLogsStashPath;await Nh({filepath:i,entry:a},async()=>{const o=await this.fs.exists(i)?await this.fs.read(i,"utf8"):"";await this.fs.write(i,o+a,"utf8")})}async readStashReflogs({parsed:t=!1}){if(!await this.fs.exists(this.refLogsStashPath))return[];const r=(await this.fs.read(this.refLogsStashPath)).toString();return Hv.getStashReflogEntry(r,t)}}async function rie({fs:e,dir:t,gitdir:n,message:r=""}){const a=new Ll({fs:e,dir:t,gitdir:n});await a.getAuthor();const i=await Cu({fs:e,gitdir:n,fullname:!1}),o=await $t.resolve({fs:e,gitdir:n,ref:"HEAD"}),l=(await p5({fs:e,dir:t,gitdir:n,oid:o})).commit.message,u=[o];let d=null,h=xo({ref:"HEAD"});const p=await sO({fs:e,dir:t,gitdir:n,treePair:[xo({ref:"HEAD"}),"stage"]});if(p){const _=await a.writeStashCommit({message:`stash-Index: WIP on ${i} - ${new Date().toISOString()}`,tree:p,parent:u});u.push(_),d=p,h=Zh()}const g=await sO({fs:e,dir:t,gitdir:n,treePair:[h,"workdir"]});if(g){const _=await a.writeStashCommit({message:`stash-WorkDir: WIP on ${i} - ${new Date().toISOString()}`,tree:g,parent:[u[u.length-1]]});u.push(_),d=g}if(!d||!p&&!g)throw new kr("changes, nothing to stash");const v=(r.trim()||`WIP on ${i}`)+`: ${o.substring(0,7)} ${l}`,b=await a.writeStashCommit({message:v,tree:d,parent:u});return await a.writeStashRef(b),await a.writeStashReflogEntry({stashCommit:b,message:v}),await JP({fs:e,dir:t,gitdir:n,ref:i,track:!1,force:!0}),b}async function y5({fs:e,dir:t,gitdir:n,refIdx:r=0}){const i=await new Ll({fs:e,dir:t,gitdir:n}).readStashCommit(r),{parent:o=null}=i.commit?i.commit:{};if(!(!o||!Array.isArray(o)))for(let s=0;s<o.length-1;s++){const u=(await Ah({fs:e,cache:{},gitdir:n,oid:o[s+1]})).commit.message.startsWith("stash-Index");await nie({fs:e,dir:t,gitdir:n,stashCommit:o[s+1],parentCommit:o[s],wasStaged:u})}}async function b5({fs:e,dir:t,gitdir:n,refIdx:r=0}){const a=new Ll({fs:e,dir:t,gitdir:n});if(!(await a.readStashCommit(r)).commit)return;const o=a.refStashPath;await Nh(o,async()=>{await e.exists(o)&&await e.rm(o)});const s=await a.readStashReflogs({parsed:!1});if(!s.length)return;s.splice(r,1);const l=a.refLogsStashPath;await Nh({reflogEntries:s,stashReflogPath:l,stashMgr:a},async()=>{if(s.length){await e.write(l,s.join(`
`),"utf8");const u=s[s.length-1].split(" ")[1];await a.writeStashRef(u)}else await e.rm(l)})}async function aie({fs:e,dir:t,gitdir:n}){return new Ll({fs:e,dir:t,gitdir:n}).readStashReflogs({parsed:!0})}async function iie({fs:e,dir:t,gitdir:n}){const r=new Ll({fs:e,dir:t,gitdir:n}),a=[r.refStashPath,r.refLogsStashPath];await Nh(a,async()=>{await Promise.all(a.map(async i=>{if(await e.exists(i))return e.rm(i)}))})}async function oie({fs:e,dir:t,gitdir:n,refIdx:r=0}){await y5({fs:e,dir:t,gitdir:n,refIdx:r}),await b5({fs:e,dir:t,gitdir:n,refIdx:r})}async function sie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),op:r="push",message:a="",refIdx:i=0}){Je("fs",e),Je("dir",t),Je("gitdir",n),Je("op",r);const o={push:rie,apply:y5,drop:b5,list:aie,clear:iie,pop:oie},s=["apply","drop","pop"];try{const l=new sn(e);["refs","logs","logs/refs"].map(h=>Ot.join(n,h)).forEach(async h=>{await l.exists(h)||await l.mkdir(h)});const d=o[r];if(d){if(s.includes(r)&&i<0)throw new Jo(`stash@${i}`,"number that is in range of [0, num of stash pushed]");return await d({fs:l,dir:t,gitdir:n,message:a,refIdx:i})}throw new Error(`To be implemented: ${r}`)}catch(l){throw l.caller="git.stash",l}}async function lie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),filepath:r,cache:a={}}){try{Je("fs",e),Je("gitdir",n),Je("filepath",r);const i=new sn(e);if(await ep.isIgnored({fs:i,gitdir:n,dir:t,filepath:r}))return"ignored";const s=await cie({fs:i,cache:a,gitdir:n}),l=await v5({fs:i,cache:a,gitdir:n,tree:s,path:r}),u=await Ma.acquire({fs:i,gitdir:n,cache:a},async function(b){for(const _ of b)if(_.path===r)return _;return null}),d=await i.lstat(Ot.join(t,r)),h=l!==null,p=u!==null,g=d!==null,v=async()=>{if(p&&!Mv(u,d))return u.oid;{const b=await i.read(Ot.join(t,r)),_=await m5({gitdir:n,type:"blob",object:b});return p&&u.oid===_&&d.size!==-1&&Ma.acquire({fs:i,gitdir:n,cache:a},async function(x){x.insert({filepath:r,stats:d,oid:_})}),_}};if(!h&&!g&&!p)return"absent";if(!h&&!g&&p)return"*absent";if(!h&&g&&!p)return"*added";if(!h&&g&&p)return await v()===u.oid?"added":"*added";if(h&&!g&&!p)return"deleted";if(h&&!g&&p)return l===u.oid,"*deleted";if(h&&g&&!p)return await v()===l?"*undeleted":"*undeletemodified";if(h&&g&&p){const b=await v();return b===l?b===u.oid?"unmodified":"*unmodified":b===u.oid?"modified":"*modified"}}catch(i){throw i.caller="git.status",i}}async function v5({fs:e,cache:t,gitdir:n,tree:r,path:a}){typeof a=="string"&&(a=a.split("/"));const i=a.shift();for(const o of r)if(o.path===i){if(a.length===0)return o.oid;const{type:s,object:l}=await Hr({fs:e,cache:t,gitdir:n,oid:o.oid});if(s==="tree"){const u=ji.from(l);return v5({fs:e,cache:t,gitdir:n,tree:u,path:a})}if(s==="blob")throw new Si(o.oid,s,"blob",a.join("/"))}return null}async function cie({fs:e,cache:t,gitdir:n}){let r;try{r=await $t.resolve({fs:e,gitdir:n,ref:"HEAD"})}catch(i){if(i instanceof kr)return[]}const{tree:a}=await tp({fs:e,cache:t,gitdir:n,oid:r});return a}async function uie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r="HEAD",filepaths:a=["."],filter:i,cache:o={},ignored:s=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const l=new sn(e);return await fu({fs:l,cache:o,dir:t,gitdir:n,trees:[xo({ref:r}),Tg(),Zh()],map:async function(u,[d,h,p]){if(!d&&!p&&h&&!s&&await ep.isIgnored({fs:l,dir:t,filepath:u})||!a.some(R=>XP(u,R)))return null;if(i&&!i(u))return;const[g,v,b]=await Promise.all([d&&d.type(),h&&h.type(),p&&p.type()]),_=[g,v,b].includes("blob");if((g==="tree"||g==="special")&&!_)return;if(g==="commit")return null;if((v==="tree"||v==="special")&&!_)return;if(b==="commit")return null;if((b==="tree"||b==="special")&&!_)return;const x=g==="blob"?await d.oid():void 0,S=b==="blob"?await p.oid():void 0;let E;g!=="blob"&&v==="blob"&&b!=="blob"?E="42":v==="blob"&&(E=await h.oid());const C=[void 0,x,E,S],k=C.map(R=>C.indexOf(R));return k.shift(),[u,...k]}})}catch(l){throw l.caller="git.statusMatrix",l}}async function die({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,object:a,force:i=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r);const o=new sn(e);if(r===void 0)throw new Di("ref");r=r.startsWith("refs/tags/")?r:`refs/tags/${r}`;const s=await $t.resolve({fs:o,gitdir:n,ref:a||"HEAD"});if(!i&&await $t.exists({fs:o,gitdir:n,ref:r}))throw new as("tag",r);await $t.writeRef({fs:o,gitdir:n,ref:r,value:s})}catch(o){throw o.caller="git.tag",o}}async function fie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),cache:r={},filepath:a,oid:i,mode:o,add:s,remove:l,force:u}){try{Je("fs",e),Je("gitdir",n),Je("filepath",a);const d=new sn(e);if(l)return await Ma.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!u){const g=await d.lstat(Ot.join(t,a));if(g){if(g.isDirectory())throw new du("directory");return}}p.has({filepath:a})&&p.delete({filepath:a})});let h;if(!i){if(h=await d.lstat(Ot.join(t,a)),!h)throw new kr(`file at "${a}" on disk and "remove" not set`);if(h.isDirectory())throw new du("directory")}return await Ma.acquire({fs:d,gitdir:n,cache:r},async function(p){if(!s&&!p.has({filepath:a}))throw new kr(`file at "${a}" in index and "add" not set`);let g;if(i)g={ctime:new Date(0),mtime:new Date(0),dev:0,ino:0,mode:o,uid:0,gid:0,size:0};else{g=h;const v=g.isSymbolicLink()?await d.readlink(Ot.join(t,a)):await d.read(Ot.join(t,a));i=await Fi({fs:d,gitdir:n,type:"blob",format:"content",object:v})}return p.insert({filepath:a,oid:i,stats:g}),i})}catch(d){throw d.caller="git.updateIndex",d}}function hie(){try{return r1.version}catch(e){throw e.caller="git.version",e}}async function pie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),trees:r,map:a,reduce:i,iterate:o,cache:s={}}){try{return Je("fs",e),Je("gitdir",n),Je("trees",r),await fu({fs:new sn(e),cache:s,dir:t,gitdir:n,trees:r,map:a,reduce:i,iterate:o})}catch(l){throw l.caller="git.walk",l}}async function mie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),blob:r}){try{return Je("fs",e),Je("gitdir",n),Je("blob",r),await Fi({fs:new sn(e),gitdir:n,type:"blob",object:r,format:"content"})}catch(a){throw a.caller="git.writeBlob",a}}async function gie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),commit:r}){try{return Je("fs",e),Je("gitdir",n),Je("commit",r),await g5({fs:new sn(e),gitdir:n,commit:r})}catch(a){throw a.caller="git.writeCommit",a}}async function yie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),type:r,object:a,format:i="parsed",oid:o,encoding:s=void 0}){try{const l=new sn(e);if(i==="parsed"){switch(r){case"commit":a=Ur.from(a).toObject();break;case"tree":a=ji.from(a).toObject();break;case"blob":a=Yt.from(a,s);break;case"tag":a=vi.from(a).toObject();break;default:throw new Si(o||"",r,"blob|commit|tag|tree")}i="content"}return o=await Fi({fs:l,gitdir:n,type:r,object:a,oid:o,format:i}),o}catch(l){throw l.caller="git.writeObject",l}}async function bie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),ref:r,value:a,force:i=!1,symbolic:o=!1}){try{Je("fs",e),Je("gitdir",n),Je("ref",r),Je("value",a);const s=new sn(e);if(r!==js.clean(r))throw new Jo(r,js.clean(r));if(!i&&await $t.exists({fs:s,gitdir:n,ref:r}))throw new as("ref",r);o?await $t.writeSymbolicRef({fs:s,gitdir:n,ref:r,value:a}):(a=await $t.resolve({fs:s,gitdir:n,ref:a}),await $t.writeRef({fs:s,gitdir:n,ref:r,value:a}))}catch(s){throw s.caller="git.writeRef",s}}async function vie({fs:e,gitdir:t,tag:n}){const r=vi.from(n).toObject();return await Fi({fs:e,gitdir:t,type:"tag",object:r,format:"content"})}async function wie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),tag:r}){try{return Je("fs",e),Je("gitdir",n),Je("tag",r),await vie({fs:new sn(e),gitdir:n,tag:r})}catch(a){throw a.caller="git.writeTag",a}}async function _ie({fs:e,dir:t,gitdir:n=Ot.join(t,".git"),tree:r}){try{return Je("fs",e),Je("gitdir",n),Je("tree",r),await Ng({fs:new sn(e),gitdir:n,tree:r})}catch(a){throw a.caller="git.writeTree",a}}var wa={Errors:Zne,STAGE:Zh,TREE:xo,WORKDIR:Tg,add:hre,abortMerge:cre,addNote:mre,addRemote:gre,annotatedTag:bre,branch:wre,checkout:JP,clone:Ore,commit:Dre,getConfig:eae,getConfigAll:nae,setConfig:Jae,currentBranch:jre,deleteBranch:Pre,deleteRef:Fre,deleteRemote:$re,deleteTag:zre,expandOid:Vre,expandRef:Gre,fastForward:Yre,fetch:Xre,findMergeBase:Jre,findRoot:Qre,getRemoteInfo:rae,getRemoteInfo2:aae,hashBlob:oae,indexPack:lae,init:cae,isDescendent:uae,isIgnored:dae,listBranches:fae,listFiles:pae,listNotes:gae,listRefs:yae,listRemotes:vae,listServerRefs:xae,listTags:Sae,log:Tae,merge:Aae,packObjects:Iae,pull:Oae,push:Fae,readBlob:Lae,readCommit:p5,readNote:Bae,readObject:zae,readTag:Hae,readTree:qae,remove:Vae,removeNote:Wae,renameBranch:Zae,resetIndex:Yae,updateIndex:fie,resolveRef:Xae,status:lie,statusMatrix:uie,tag:die,version:hie,walk:pie,writeBlob:mie,writeCommit:gie,writeObject:yie,writeRef:bie,writeTag:wie,writeTree:_ie,stash:sie};function xie(e){let t=[e];return{next(){return Promise.resolve({done:t.length===0,value:t.pop()})},return(){return t=[],{}},[Symbol.asyncIterator](){return this}}}function Sie(e){return e[Symbol.asyncIterator]?e[Symbol.asyncIterator]():e[Symbol.iterator]?e[Symbol.iterator]():e.next?e:xie(e)}async function Eie(e,t){const n=Sie(e);for(;;){const{value:r,done:a}=await n.next();if(r&&await t(r),a)break}n.return&&n.return()}async function Cie(e){let t=0;const n=[];await Eie(e,i=>{n.push(i),t+=i.byteLength});const r=new Uint8Array(t);let a=0;for(const i of n)r.set(i,a),a+=i.byteLength;return r}function kie(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{next(){return t.read()},return(){return t.releaseLock(),{}},[Symbol.asyncIterator](){return this}}}async function Tie({onProgress:e,url:t,method:n="GET",headers:r={},body:a}){a&&(a=await Cie(a));const i=await fetch(t,{method:n,headers:r,body:a}),o=i.body&&i.body.getReader?kie(i.body):[new Uint8Array(await i.arrayBuffer())];r={};for(const[s,l]of i.headers.entries())r[s]=l;return{url:i.url,method:i.method,statusCode:i.status,statusMessage:i.statusText,body:o,headers:r}}var x0={request:Tie};const S0="https://cors.isomorphic-git.org",Rh=new Map,w5=async(e,t)=>{const{gitUserName:n,gitUserEmail:r}=Kr.getState();if(!n||!r)return lt.error("Git user name and email must be configured in Settings before committing."),!1;try{const a=await wa.getConfig({fs:t,dir:e,path:"user.name"}).catch(()=>null),i=await wa.getConfig({fs:t,dir:e,path:"user.email"}).catch(()=>null);return a!==n&&await wa.setConfig({fs:t,dir:e,path:"user.name",value:n}),i!==r&&await wa.setConfig({fs:t,dir:e,path:"user.email",value:r}),!0}catch(a){return console.error("[VFS Git Op] Error checking/setting Git config:",a),lt.error(`Failed to configure Git user: ${a instanceof Error?a.message:String(a)}`),!1}},E0=async(e,t)=>{const n=new URL(e).origin;if(console.log(`[VFS Git Op] Auth requested for ${e}`),t!=null&&t.username&&(t!=null&&t.password))return console.log(`[VFS Git Op] Using stored credentials for ${e}`),{username:t.username,password:t.password,authScheme:"Basic"};const r=Rh.get(n);if(r!=null&&r.username&&(r!=null&&r.password))return console.log(`[VFS Git Op] Using session credentials for ${e}`),{username:r.username,password:r.password,authScheme:"Basic"};console.log(`[VFS Git Op] No stored or session credentials found for ${e}. Prompting user.`);const a=window.prompt(`Enter username for ${e}`);if(!a)return lt.error("Authentication cancelled: Username not provided."),null;const i=window.prompt(`Enter password or token for ${a}@${e}`);return i?(Rh.set(n,{username:a,password:i}),console.log(`[VFS Git Op] Stored prompted credentials in session for ${n}`),{username:a,password:i,authScheme:"Basic"}):(lt.error("Authentication cancelled: Password/token not provided."),null)},C0=(e,t)=>{const n=new URL(e).origin;return console.error(`[VFS Git Op] Auth FAILED for ${e}`,t),Rh.has(n)&&(console.log(`[VFS Git Op] Clearing failed session credentials for ${n}`),Rh.delete(n)),null},k0=(e,t)=>{console.log(`[VFS Git Op] Auth SUCCESS for ${e}`,t);const n=new URL(e).origin;!Rh.has(n)&&t.username&&t.password&&(Rh.set(n,{username:t.username,password:t.password}),console.log(`[VFS Git Op] Stored successful prompted credentials in session for ${n}`))},ah=e=>{if(e.name==="HttpError"&&e.data){const{statusCode:t,statusMessage:n,body:r}=e.data;let a="";if(r)try{const i=JSON.parse(r);a=i.message||i.error||JSON.stringify(i)}catch{a=r}return`HTTP ${t} ${n}${a?`: ${a}`:""}`}return e.name==="NotFoundError"?`Not Found: ${e.message}`:e.code==="CheckoutConflictError"?"Checkout conflict: Local changes would be overwritten.":e.code==="MergeConflictError"?"Merge conflict: Resolve conflicts manually.":e instanceof Error?e.message:String(e)},Aie=async(e,t)=>{const n=$a,r=Zn(e),a=Vs(r,".git");try{return(await n.promises.stat(a)).isDirectory()}catch(i){return i instanceof Error&&i.code==="ENOENT"||console.error(`[VFS Git Op] Error checking for .git in ${r}:`,i),!1}},_5=async(e,t,n,r,a)=>{var s;const i=(a==null?void 0:a.fsInstance)??$a,o=Zn(e);console.log(`[VFS Git Op] Attempting to clone ${t} into ${o}`);try{let l=!1;try{await i.promises.stat(Vs(o,".git")),l=!0}catch(p){if(p.code!=="ENOENT")throw p}if(l)throw console.warn(`[VFS Git Op] Clone target ${o} already contains a .git directory.`),new Error(`Repository already cloned at ${o}.`);const u=dg(o);if(u!=="/")try{await i.promises.mkdir(u,{recursive:!0})}catch(p){if(p.code!=="EEXIST")throw p}let d=n;if(!d)try{if(d=(s=(await wa.getRemoteInfo({http:x0,url:t,corsProxy:S0,onAuth:g=>E0(g,r),onAuthFailure:C0,onAuthSuccess:k0})).HEAD)==null?void 0:s.replace("refs/heads/",""),!d)throw new Error("Could not determine default branch from remote.");console.log(`[VFS Git Op] No branch specified, using remote default: ${d}`)}catch(p){throw console.error("[VFS Git Op] Failed to get remote info to determine default branch:",p),new Error(`Failed to determine default branch: ${ah(p)}`)}await wa.clone({fs:i,http:x0,dir:o,corsProxy:S0,url:t,ref:d,singleBranch:!0,depth:10,onAuth:p=>E0(p,r),onAuthFailure:C0,onAuthSuccess:k0,onProgress:p=>{p.phase==="counting objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):p.phase==="receiving objects"&&p.total?console.log(`Clone progress: ${p.phase} ${p.loaded}/${p.total}`):console.log(`Clone progress: ${p.phase}`)}}),await i.promises.stat(Vs(o,".git"));const h=await wa.currentBranch({fs:i,dir:o,fullname:!1}).catch(()=>null);h!==d&&(console.warn(`[VFS Git Op] Cloned repo HEAD is at ${h}, expected ${d}. Checking out...`),await wa.checkout({fs:i,dir:o,ref:d})),lt.success(`Repository cloned successfully into ${o} (branch: ${d}).`),console.log(`[VFS Git Op] Clone successful for ${t}`)}catch(l){console.error(`[VFS Git Op] Git clone failed for ${t}:`,l);const u=ah(l);if(l instanceof Error&&l.message.includes("already cloned")||lt.error(`Git clone failed: ${u}`),!(l instanceof Error&&l.message.includes("already cloned")))try{console.log(`[VFS Git Op] Attempting cleanup of failed clone: ${o}`),await i.promises.rm(o,{recursive:!0,force:!0})}catch(d){console.warn("[VFS Git Op] Failed cleanup after clone error:",d)}throw l}},x5=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??$a,r=Zn(e);try{await wa.init({fs:n,dir:r}),lt.success(`Initialized empty Git repository in "${ha(r)}"`)}catch(a){throw console.error(`[VFS Git Op] Git init failed for ${r}:`,a),lt.error(`Git init failed: ${a instanceof Error?a.message:String(a)}`),a}},Uk=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??$a,a=Zn(e);try{if(!await w5(a,r))throw new Error("Git user configuration is missing or invalid.");if(await wa.add({fs:r,dir:a,filepath:"."}),!(await wa.statusMatrix({fs:r,dir:a})).some(([,,u])=>u!==0)){lt.info("No changes detected to commit.");return}const l=await wa.commit({fs:r,dir:a,message:t,author:{name:Kr.getState().gitUserName,email:Kr.getState().gitUserEmail}});lt.success(`Changes committed: ${l.substring(0,7)}`)}catch(i){throw console.error(`[VFS Git Op] Git commit failed for ${a}:`,i),lt.error(`Git commit failed: ${i instanceof Error?i.message:String(i)}`),i}},a1=async(e,t,n,r)=>{const a=(r==null?void 0:r.fsInstance)??$a,i=Zn(e);try{if(!await w5(i,a))throw new Error("Git user configuration is missing or invalid.");if(!t)throw new Error("Branch name must be provided for pull operation.");console.log(`[VFS Git Op] Pulling branch ${t} for ${i}`);const s=await wa.currentBranch({fs:a,dir:i,fullname:!1}).catch(()=>null);if(s!==t){console.log(`[VFS Git Op] Current branch is ${s}, switching to ${t} before pull...`);try{await wa.checkout({fs:a,dir:i,ref:t})}catch(l){if(l.code==="NotFoundError"){console.log(`[VFS Git Op] Local branch ${t} not found. Attempting to fetch and create...`);try{await wa.fetch({fs:a,http:x0,dir:i,corsProxy:S0,remote:"origin",ref:t,depth:1,singleBranch:!0,tags:!1,onAuth:u=>E0(u,n),onAuthFailure:C0,onAuthSuccess:k0}),await wa.branch({fs:a,dir:i,ref:t,checkout:!0}),console.log(`[VFS Git Op] Successfully created and checked out local branch ${t}.`)}catch(u){throw console.error(`[VFS Git Op] Failed to create local branch ${t} from remote:`,u),new Error(`Failed to switch to or create local branch "${t}": ${ah(u)}`)}}else throw console.error(`[VFS Git Op] Failed to checkout branch ${t}:`,l),new Error(`Failed to checkout branch "${t}": ${ah(l)}`)}}await wa.pull({fs:a,http:x0,dir:i,ref:t,singleBranch:!0,author:{name:Kr.getState().gitUserName,email:Kr.getState().gitUserEmail},corsProxy:S0,onAuth:l=>E0(l,n),onAuthFailure:C0,onAuthSuccess:k0}),lt.success(`Pulled changes successfully for "${ha(i)}"`),console.log(`[VFS Git Op] Pull successful for ${i}`)}catch(o){if(console.error(`[VFS Git Op] Git pull failed for ${i}:`,o),o instanceof Error&&o.message.toLowerCase().includes("already up-to-date")?lt.info(`Branch "${t}" is already up-to-date.`):lt.error(`Git pull failed: ${ah(o)}`),!(o instanceof Error&&o.message.toLowerCase().includes("already up-to-date")))throw o}},Hk=async(e,t,n,r)=>{var o,s;const a=(r==null?void 0:r.fsInstance)??$a,i=Zn(e);try{if(!t)throw new Error("Branch name must be provided for push operation.");console.log(`[VFS Git Op] Pushing local branch ${t} for ${i}`);const l=await wa.push({fs:a,http:x0,dir:i,corsProxy:S0,ref:t,remote:"origin",remoteRef:`refs/heads/${t}`,force:!1,onAuth:u=>E0(u,n),onAuthFailure:C0,onAuthSuccess:k0});if(l!=null&&l.ok)lt.success(`Pushed changes successfully for "${ha(i)}"`);else if((o=l==null?void 0:l.error)!=null&&o.includes("up-to-date"))lt.info(`Branch "${t}" already up-to-date on remote.`);else throw(s=l==null?void 0:l.error)!=null&&s.includes("rejected")?(lt.error(`Push rejected for "${ha(i)}". Pull changes first.`),new Error(l.error)):new Error((l==null?void 0:l.error)||"Push rejected by remote")}catch(l){throw console.error(`[VFS Git Op] Git push failed for ${i}:`,l),l instanceof Error&&l.message.includes("rejected")||lt.error(`Git push failed: ${ah(l)}`),l}},S5=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??$a,r=Zn(e);console.log(`[VFS Git Op] Git Status on ${r}`);try{const a=await wa.statusMatrix({fs:n,dir:r});console.log("Git Status Matrix:",a);const i=a.map(([o,s,l,u])=>{let d="";return u===2&&(d+="INDEX_Modified "),u===3&&(d+="INDEX_Added "),s===0&&l===2?d+="WT_New":s===1&&l===2?d+="WT_Modified":s===1&&l===0?d+="WT_Deleted":s===1&&l===1&&u===0&&(d="Unmodified"),(!d||d==="INDEX_Unmodified ")&&(d=`h:${s} w:${l} s:${u}`),`${o}: ${d.trim()}`}).filter(o=>!o.endsWith("Unmodified")).join(`
`);lt.info(`Git Status for "${ha(r)}":
${i||"No changes"}`,{duration:15e3})}catch(a){throw console.error(`[VFS Git Op] Git status failed for ${r}:`,a),lt.error(`Git status failed: ${a instanceof Error?a.message:String(a)}`),a}},wd=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??$a,r=Zn(e);if(r!=="/")try{await n.promises.mkdir(r,{recursive:!0})}catch(a){if(a instanceof Error&&a.code==="EEXIST"){console.warn(`[VFS Op] Directory already exists or created concurrently: ${r}`);return}throw console.error(`[VFS Op] Failed to create directory ${r}:`,a),lt.error(`Error creating directory "${ha(r)}": ${a instanceof Error?a.message:String(a)}`),a}},Nie=async e=>{try{const t={backend:Ote,name:`litechat_vfs_${e}`};return await Ete(t),$a}catch(t){return console.error(`[VFS Op] Failed to initialize VFS for key "${e}":`,t),lt.error(`Failed to initialize filesystem "${e}": ${t instanceof Error?t.message:String(t)}`),null}},qk=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??$a,r=Zn(e);try{try{await n.promises.stat(r)}catch(l){if(l.code==="ENOENT")return console.warn(`[VFS Op] Directory not found for listing, attempting creation: ${r}`),await wd(r,{fsInstance:n}),[];throw l}const i=(await n.promises.readdir(r)).map(async l=>{const u=Vs(r,l);try{const d=await n.promises.stat(u);return{name:l,path:u,isDirectory:d.isDirectory(),size:d.size,lastModified:d.mtime}}catch(d){return console.error(`[VFS Op] Failed to stat ${u}:`,d),null}});return(await Promise.all(i)).filter(l=>l!==null)}catch(a){throw console.error(`[VFS Op] Failed to list directory ${r}:`,a),lt.error(`Error listing files: ${a instanceof Error?a.message:String(a)}`),a}},Bd=async(e,t)=>{const n=(t==null?void 0:t.fsInstance)??$a,r=Zn(e);try{const a=await n.promises.readFile(r);return Ct.emit(xt.VFS_FILE_READ,{path:r}),a}catch(a){throw console.error(`[VFS Op] Failed to read file ${r}:`,a),lt.error(`Error reading file "${ha(r)}": ${a instanceof Error?a.message:String(a)}`),a}},i1=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??$a,a=Zn(e),i=dg(a);try{i!=="/"&&await wd(i,{fsInstance:r}),await r.promises.writeFile(a,t),Ct.emit(xt.VFS_FILE_WRITTEN,{path:a})}catch(o){throw o instanceof Error&&o.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to write file ${a}:`,o),lt.error(`Error writing file "${ha(a)}": ${o instanceof Error?o.message:String(o)}`)),o}},Vk=async(e,t=!1,n)=>{const r=(n==null?void 0:n.fsInstance)??$a,a=Zn(e);if(a==="/")throw lt.error("Cannot delete the root directory."),new Error("Cannot delete the root directory.");try{(await r.promises.stat(a)).isDirectory()?(await r.promises.rm(a,{recursive:t}),Ct.emit(xt.VFS_FILE_DELETED,{path:a})):(await r.promises.unlink(a),Ct.emit(xt.VFS_FILE_DELETED,{path:a})),lt.success(`"${ha(a)}" deleted.`)}catch(i){if(i instanceof Error&&i.code==="ENOENT"){console.warn(`[VFS Op] Item not found for deletion: ${a}`);return}throw console.error(`[VFS Op] Failed to delete ${a}:`,i),lt.error(`Error deleting "${ha(a)}": ${i instanceof Error?i.message:String(i)}`),i}},E5=async(e,t)=>{await wd(e,t)},Rie=async(e,t,n)=>{try{const r=await Bd(e,n),a=new Blob([r]),i=URL.createObjectURL(a),o=document.createElement("a");o.href=i;const s=Zn(e);o.download=t||ha(s),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}catch(r){console.error(`[VFS Op] Failed to initiate download for ${e}:`,r),r instanceof Error&&r.message.includes("Error reading file")||lt.error(`Download failed: ${r instanceof Error?r.message:String(r)}`)}},C5=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??$a,a=Zn(t);let i=0,o=0;const s=Array.from(e);try{await wd(a,{fsInstance:r});for(const l of s){const u=Vs(a,l.name);try{const d=await l.arrayBuffer();await i1(u,new Uint8Array(d),{fsInstance:r}),i++}catch(d){o++,console.error(`[VFS Op] Failed to upload ${l.name}:`,d)}}}catch(l){o=s.length,console.error(`[VFS Op] Failed to prepare target directory ${a} for upload:`,l)}finally{o>0&&i>0?lt.warning(`Upload complete with issues. ${i} succeeded, ${o} failed.`):o===0&&i>0&&lt.success(`Successfully uploaded ${i} file(s) to ${a==="/"?"root":ha(a)}.`)}},Iie=async(e,t,n)=>{const r=$a;if(!e.name.toLowerCase().endsWith(".zip")){lt.error("Please select a valid ZIP file.");return}const a=Zn(t);let i;try{await wd(a,{fsInstance:r}),i=await TP.loadAsync(e);const o=Object.values(i.files),s=await Promise.allSettled(o.map(async h=>{const p=Vs(a,h.name);if(h.dir)await wd(p,{fsInstance:r});else{const g=await h.async("uint8array");await i1(p,g,{fsInstance:r})}return{name:h.name,isDir:h.dir}}));let l=0,u=0,d=0;s.forEach(h=>{h.status==="fulfilled"&&h.value?h.value.isDir?u++:l++:h.status==="rejected"&&(d++,console.error("[VFS Op] ZIP Extraction item failed:",h.reason))}),d>0?lt.warning(`Finished extracting "${e.name}". ${l+u} items succeeded, ${d} failed.`):lt.success(`Successfully extracted ${l} files and ${u} folders from "${e.name}" to ${a==="/"?"root":ha(a)}.`)}catch(o){o instanceof Error&&o.message.includes("Error creating directory")||(console.error(`[VFS Op] Failed to extract zip ${e.name}:`,o),lt.error(`ZIP extraction failed: ${o instanceof Error?o.message:String(o)}`))}},lO=async(e,t="/",n)=>{const r=$a,a=new TP,i=Zn(t),o=ha(i)||"root";try{try{if(!(await r.promises.stat(i)).isDirectory()){lt.error(`Cannot export: "${o}" is not a directory.`);return}}catch(p){p instanceof Error&&p.code==="ENOENT"?lt.error(`Cannot export: Path "${o}" not found.`):lt.error(`Cannot export: Error accessing path "${o}". ${p instanceof Error?p.message:String(p)}`);return}const s=async(p,g)=>{const v=await qk(p,{fsInstance:r});for(const b of v)if(b.isDirectory){if(b.name===".git")continue;const _=g.folder(b.name);if(_)await s(b.path,_);else throw new Error(`Failed to create subfolder ${b.name} in zip.`)}else{const _=await Bd(b.path,{fsInstance:r});g.file(b.name,_)}};await s(i,a);const l=await a.generateAsync({type:"blob"}),u=URL.createObjectURL(l),d=document.createElement("a");d.href=u;const h=`vfs_${o}_export.zip`;d.download=e||h,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(u),lt.success(`"${o}" exported as ${d.download}.`)}catch(s){console.error("[VFS Op] Failed to download all as zip:",s),s instanceof Error&&(s.message.includes("Error listing files")||s.message.includes("Error reading file")||s.message.includes("Cannot export"))||lt.error(`ZIP export failed: ${s instanceof Error?s.message:String(s)}`)}},k5=async(e,t,n)=>{const r=(n==null?void 0:n.fsInstance)??$a,a=Zn(e),i=Zn(t);if(a==="/"||i==="/")throw lt.error("Cannot rename the root directory."),new Error("Cannot rename the root directory.");if(a!==i)try{const o=dg(i);o!=="/"&&await wd(o,{fsInstance:r}),await r.promises.rename(a,i),lt.success(`Renamed "${ha(a)}" to "${ha(i)}"`)}catch(o){throw o instanceof Error&&o.code==="ENOENT"?o.message.includes("Error creating directory")||lt.error(`Rename failed: Original item "${ha(a)}" not found.`):o instanceof Error&&o.code==="EEXIST"?lt.error(`Rename failed: An item named "${ha(i)}" already exists.`):o instanceof Error&&o.message.includes("Error creating directory")||lt.error(`Rename failed: ${o instanceof Error?o.message:String(o)}`),console.error(`[VFS Op] Failed to rename ${a} to ${i}:`,o),o}},Oie=1024*5,Die=(e,t)=>{try{const n=atob(e),r=new Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);const a=new Uint8Array(r),i=new Blob([a],{type:t});return URL.createObjectURL(i)}catch(n){return console.error("Error creating blob URL from base64:",n),null}},cO=e=>{let t=null;if(e.contentText!==void 0)t=new Blob([e.contentText],{type:e.type});else if(e.contentBase64!==void 0)try{const n=atob(e.contentBase64),r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);const a=new Uint8Array(r);t=new Blob([a],{type:e.type})}catch(n){return console.error("Failed to reconstruct file from base64:",n),null}return t?new File([t],e.name,{type:e.type}):(console.error(`Failed to reconstruct file "${e.name}": No content found in metadata.`),null)},T5=({fileMeta:e,onRemove:t,isReadOnly:n=!1})=>{const[r,a]=N.useState(null),[i,o]=N.useState(null),[s,l]=N.useState(!1),[u,d]=N.useState(!1),[h,p]=N.useState(!0),g=e.type||"application/octet-stream",v=TC(e.name,g),b=g.startsWith("image/"),_=g.startsWith("audio/"),x=g.startsWith("video/"),S=e.source==="vfs";N.useEffect(()=>{let L=null;return o(null),e.source==="direct"&&!v&&e.contentBase64?(L=Die(e.contentBase64,g),L||o("Failed to decode file content for preview."),a(L)):a(null),e.source==="direct"&&v&&e.contentText&&e.contentText.length>Oie?o(`Text file too large for preview (${(e.size/1024).toFixed(1)} KB).`):e.source==="direct"&&v&&e.contentText===void 0&&o("Text content missing from metadata."),()=>{L&&(URL.revokeObjectURL(L),a(null))}},[e.id,e.size,e.source,e.contentBase64,e.contentText,g,v]);const E=async()=>{if(e.source==="vfs"){lt.info("File is already in VFS.");return}const L=cO(e);if(!L){lt.error("Cannot add to VFS: Failed to reconstruct file data.");return}l(!0);try{await C5([L],"/"),lt.success(`"${e.name}" added to VFS root.`)}catch(B){console.error("Failed to add file to VFS:",B),lt.error(`Failed to add "${e.name}" to VFS.`)}finally{l(!1)}},C=async()=>{d(!0);try{let L;if(e.source==="vfs"&&e.path){const F=await Bd(e.path);L=new Blob([F],{type:g})}else{const F=cO(e);if(!F)throw new Error("Could not reconstruct file data.");L=F}const B=URL.createObjectURL(L),Y=document.createElement("a");Y.href=B,Y.download=e.name,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),URL.revokeObjectURL(B)}catch(L){console.error("Failed to download file:",L),lt.error(`Download failed: ${L instanceof Error?L.message:String(L)}`)}finally{d(!1)}},k=()=>p(L=>!L),R=()=>S?y.jsx(aD,{className:"h-5 w-5 text-cyan-500"}):v?y.jsx(YU,{className:"h-5 w-5 text-blue-500"}):b?y.jsx(yH,{className:"h-5 w-5 text-purple-500"}):_?y.jsx(CH,{className:"h-5 w-5 text-green-500"}):x?y.jsx(rq,{className:"h-5 w-5 text-orange-500"}):y.jsx(KU,{className:"h-5 w-5 text-muted-foreground"}),D=()=>S?y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"VFS file attached. Content will be loaded when sent."}):i?y.jsxs("div",{className:"p-2 text-xs text-destructive flex items-center gap-1",children:[y.jsx(lh,{className:"h-4 w-4"}),y.jsx("span",{children:i})]}):v&&e.contentText!==void 0?y.jsx(rg,{lang:g==="text/markdown"?"markdown":"text",code:e.contentText}):b&&r?y.jsx("img",{src:r,alt:e.name,className:"max-w-full max-h-64 object-contain rounded"}):_&&r?y.jsx("audio",{controls:!0,src:r,className:"w-full",children:"Your browser does not support the audio element."}):x&&r?y.jsx("video",{controls:!0,src:r,className:"max-w-full max-h-64 rounded",children:"Your browser does not support the video tag."}):y.jsx("p",{className:"p-2 text-xs text-muted-foreground italic",children:"Preview not available for this file type or content missing."}),O=N.useMemo(()=>{let L="File";return S?L="VFS File":v?L="Text":b?L="Image":_?L="Audio":x&&(L="Video"),`${L} (${jv(e.size)})`},[S,v,b,_,x,e.size]);return y.jsxs("div",{className:"border rounded-md overflow-hidden bg-card shadow-sm my-1",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 border-b bg-muted/30",children:[y.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[R(),y.jsx("span",{className:"text-sm font-medium truncate",title:e.name,children:e.name}),y.jsxs("span",{className:"text-xs text-muted-foreground flex-shrink-0",children:["(",jv(e.size),")"]}),S&&e.path&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsxs("span",{className:"text-xs text-cyan-400 truncate max-w-[100px]",children:["(VFS: ",e.path,")"]})}),y.jsx(ar,{children:y.jsxs("p",{children:["From VFS: ",e.path]})})]})})]}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,disabled:u,"aria-label":"Download file",children:u?y.jsx(Vn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(Um,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{children:"Download File"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:k,"aria-label":h?"Unfold preview":"Fold preview",children:y.jsx(wC,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{side:"top",children:h?"Unfold":"Fold"})]})}),!n&&t&&y.jsxs(y.Fragment,{children:[e.source==="direct"&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:E,disabled:s,"aria-label":"Add to VFS",children:s?y.jsx(Vn,{className:"h-3.5 w-3.5 animate-spin"}):y.jsx(nD,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{children:"Add to VFS"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-destructive hover:text-destructive/80",onClick:()=>t(e.id),"aria-label":"Remove file",children:y.jsx(gu,{className:"h-3.5 w-3.5"})})}),y.jsx(ar,{children:"Remove from Prompt"})]})})]})]})]}),h?y.jsx("div",{className:"p-2 text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20",onClick:k,children:O}):y.jsx("div",{className:Rt("p-2 max-h-80 overflow-y-auto"),children:D()})]})},A5=6048e5,jie=864e5,kb=43200,uO=1440,dO=Symbol.for("constructDateFrom");function Gl(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&dO in e?e[dO](t):e instanceof Date?new e.constructor(t):new Date(t)}function Fa(e,t){return Gl(t||e,e)}let Mie={};function Ig(){return Mie}function T0(e,t){var s,l,u,d;const n=Ig(),r=(t==null?void 0:t.weekStartsOn)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,a=Fa(e,t==null?void 0:t.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function qv(e,t){return T0(e,{...t,weekStartsOn:1})}function N5(e,t){const n=Fa(e,t==null?void 0:t.in),r=n.getFullYear(),a=Gl(n,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=qv(a),o=Gl(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const s=qv(o);return n.getTime()>=i.getTime()?r+1:n.getTime()>=s.getTime()?r:r-1}function Vv(e){const t=Fa(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function o1(e,...t){const n=Gl.bind(null,e||t.find(r=>typeof r=="object"));return t.map(n)}function fO(e,t){const n=Fa(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function Pie(e,t,n){const[r,a]=o1(n==null?void 0:n.in,e,t),i=fO(r),o=fO(a),s=+i-Vv(i),l=+o-Vv(o);return Math.round((s-l)/jie)}function Fie(e,t){const n=N5(e,t),r=Gl(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),qv(r)}function Gb(e,t){const n=+Fa(e)-+Fa(t);return n<0?-1:n>0?1:n}function Lie(e){return Gl(e,Date.now())}function $ie(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Bie(e){return!(!$ie(e)&&typeof e!="number"||isNaN(+Fa(e)))}function zie(e,t,n){const[r,a]=o1(n==null?void 0:n.in,e,t),i=r.getFullYear()-a.getFullYear(),o=r.getMonth()-a.getMonth();return i*12+o}function Uie(e){return t=>{const r=(e?Math[e]:Math.trunc)(t);return r===0?0:r}}function Hie(e,t){return+Fa(e)-+Fa(t)}function qie(e,t){const n=Fa(e,t==null?void 0:t.in);return n.setHours(23,59,59,999),n}function Vie(e,t){const n=Fa(e,t==null?void 0:t.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Gie(e,t){const n=Fa(e,t==null?void 0:t.in);return+qie(n,t)==+Vie(n,t)}function Wie(e,t,n){const[r,a,i]=o1(n==null?void 0:n.in,e,e,t),o=Gb(a,i),s=Math.abs(zie(a,i));if(s<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*s);let l=Gb(a,i)===-o;Gie(r)&&s===1&&Gb(r,i)===1&&(l=!1);const u=o*(s-+l);return u===0?0:u}function Kie(e,t,n){const r=Hie(e,t)/1e3;return Uie(n==null?void 0:n.roundingMethod)(r)}function Zie(e,t){const n=Fa(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Yie={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Xie=(e,t,n)=>{let r;const a=Yie[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function fE(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Jie={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qie={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},eoe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},toe={date:fE({formats:Jie,defaultWidth:"full"}),time:fE({formats:Qie,defaultWidth:"full"}),dateTime:fE({formats:eoe,defaultWidth:"full"})},noe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},roe=(e,t,n,r)=>noe[e];function Cm(e){return(t,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,s=n!=null&&n.width?String(n.width):o;a=e.formattingValues[s]||e.formattingValues[o]}else{const o=e.defaultWidth,s=n!=null&&n.width?String(n.width):e.defaultWidth;a=e.values[s]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const aoe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ioe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},ooe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},soe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},loe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},coe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},uoe=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},doe={ordinalNumber:uoe,era:Cm({values:aoe,defaultWidth:"wide"}),quarter:Cm({values:ioe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Cm({values:ooe,defaultWidth:"wide"}),day:Cm({values:soe,defaultWidth:"wide"}),dayPeriod:Cm({values:loe,defaultWidth:"wide",formattingValues:coe,defaultFormattingWidth:"wide"})};function km(e){return(t,n={})=>{const r=n.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],s=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(s)?hoe(s,h=>h.test(o)):foe(s,h=>h.test(o));let u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function foe(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function hoe(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function poe(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const a=r[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;const s=t.slice(a.length);return{value:o,rest:s}}}const moe=/^(\d+)(th|st|nd|rd)?/i,goe=/\d+/i,yoe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},boe={any:[/^b/i,/^(a|c)/i]},voe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},woe={any:[/1/i,/2/i,/3/i,/4/i]},_oe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},xoe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Soe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Eoe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Coe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},koe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Toe={ordinalNumber:poe({matchPattern:moe,parsePattern:goe,valueCallback:e=>parseInt(e,10)}),era:km({matchPatterns:yoe,defaultMatchWidth:"wide",parsePatterns:boe,defaultParseWidth:"any"}),quarter:km({matchPatterns:voe,defaultMatchWidth:"wide",parsePatterns:woe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:km({matchPatterns:_oe,defaultMatchWidth:"wide",parsePatterns:xoe,defaultParseWidth:"any"}),day:km({matchPatterns:Soe,defaultMatchWidth:"wide",parsePatterns:Eoe,defaultParseWidth:"any"}),dayPeriod:km({matchPatterns:Coe,defaultMatchWidth:"any",parsePatterns:koe,defaultParseWidth:"any"})},R5={code:"en-US",formatDistance:Xie,formatLong:toe,formatRelative:roe,localize:doe,match:Toe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Aoe(e,t){const n=Fa(e,t==null?void 0:t.in);return Pie(n,Zie(n))+1}function Noe(e,t){const n=Fa(e,t==null?void 0:t.in),r=+qv(n)-+Fie(n);return Math.round(r/A5)+1}function I5(e,t){var d,h,p,g;const n=Fa(e,t==null?void 0:t.in),r=n.getFullYear(),a=Ig(),i=(t==null?void 0:t.firstWeekContainsDate)??((h=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??a.firstWeekContainsDate??((g=(p=a.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,o=Gl((t==null?void 0:t.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const s=T0(o,t),l=Gl((t==null?void 0:t.in)||e,0);l.setFullYear(r,0,i),l.setHours(0,0,0,0);const u=T0(l,t);return+n>=+s?r+1:+n>=+u?r:r-1}function Roe(e,t){var s,l,u,d;const n=Ig(),r=(t==null?void 0:t.firstWeekContainsDate)??((l=(s=t==null?void 0:t.locale)==null?void 0:s.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,a=I5(e,t),i=Gl((t==null?void 0:t.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),T0(i,t)}function Ioe(e,t){const n=Fa(e,t==null?void 0:t.in),r=+T0(n,t)-+Roe(n,t);return Math.round(r/A5)+1}function gr(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Fc={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return gr(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):gr(n+1,2)},d(e,t){return gr(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return gr(e.getHours()%12||12,t.length)},H(e,t){return gr(e.getHours(),t.length)},m(e,t){return gr(e.getMinutes(),t.length)},s(e,t){return gr(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,n-3));return gr(a,t.length)}},Uf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hO={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return Fc.y(e,t)},Y:function(e,t,n,r){const a=I5(e,r),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return gr(o,2)}return t==="Yo"?n.ordinalNumber(i,{unit:"year"}):gr(i,t.length)},R:function(e,t){const n=N5(e);return gr(n,t.length)},u:function(e,t){const n=e.getFullYear();return gr(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return gr(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return gr(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Fc.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return gr(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const a=Ioe(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):gr(a,t.length)},I:function(e,t,n){const r=Noe(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):gr(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Fc.d(e,t)},D:function(e,t,n){const r=Aoe(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):gr(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return gr(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return gr(i,t.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return gr(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let a;switch(r===12?a=Uf.noon:r===0?a=Uf.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let a;switch(r>=17?a=Uf.evening:r>=12?a=Uf.afternoon:r>=4?a=Uf.morning:a=Uf.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Fc.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Fc.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):gr(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):gr(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Fc.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Fc.s(e,t)},S:function(e,t){return Fc.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return mO(r);case"XXXX":case"XX":return id(r);case"XXXXX":case"XXX":default:return id(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return mO(r);case"xxxx":case"xx":return id(r);case"xxxxx":case"xxx":default:return id(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+pO(r,":");case"OOOO":default:return"GMT"+id(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+pO(r,":");case"zzzz":default:return"GMT"+id(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return gr(r,t.length)},T:function(e,t,n){return gr(+e,t.length)}};function pO(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?n+String(a):n+String(a)+t+gr(i,2)}function mO(e,t){return e%60===0?(e>0?"-":"+")+gr(Math.abs(e)/60,2):id(e,t)}function id(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),a=gr(Math.trunc(r/60),2),i=gr(r%60,2);return n+a+t+i}const gO=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},O5=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Ooe=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return gO(e,t);let i;switch(r){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",gO(r,t)).replace("{{time}}",O5(a,t))},Doe={p:O5,P:Ooe},joe=/^D+$/,Moe=/^Y+$/,Poe=["D","DD","YY","YYYY"];function Foe(e){return joe.test(e)}function Loe(e){return Moe.test(e)}function $oe(e,t,n){const r=Boe(e,t,n);if(console.warn(r),Poe.includes(e))throw new RangeError(r)}function Boe(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const zoe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Uoe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Hoe=/^'([^]*?)'?$/,qoe=/''/g,Voe=/[a-zA-Z]/;function yO(e,t,n){var d,h,p,g;const r=Ig(),a=r.locale??R5,i=r.firstWeekContainsDate??((h=(d=r.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,o=r.weekStartsOn??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.weekStartsOn)??0,s=Fa(e,n==null?void 0:n.in);if(!Bie(s))throw new RangeError("Invalid time value");let l=t.match(Uoe).map(v=>{const b=v[0];if(b==="p"||b==="P"){const _=Doe[b];return _(v,a.formatLong)}return v}).join("").match(zoe).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:Goe(v)};if(hO[b])return{isToken:!0,value:v};if(b.match(Voe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});a.localize.preprocessor&&(l=a.localize.preprocessor(s,l));const u={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return l.map(v=>{if(!v.isToken)return v.value;const b=v.value;(Loe(b)||Foe(b))&&$oe(b,t,String(e));const _=hO[b[0]];return _(s,b,a.localize,u)}).join("")}function Goe(e){const t=e.match(Hoe);return t?t[1].replace(qoe,"'"):e}function Woe(e,t,n){const r=Ig(),a=(n==null?void 0:n.locale)??r.locale??R5,i=2520,o=Gb(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const s=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:o}),[l,u]=o1(n==null?void 0:n.in,...o>0?[t,e]:[e,t]),d=Kie(u,l),h=(Vv(u)-Vv(l))/1e3,p=Math.round((d-h)/60);let g;if(p<2)return n!=null&&n.includeSeconds?d<5?a.formatDistance("lessThanXSeconds",5,s):d<10?a.formatDistance("lessThanXSeconds",10,s):d<20?a.formatDistance("lessThanXSeconds",20,s):d<40?a.formatDistance("halfAMinute",0,s):d<60?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",1,s):p===0?a.formatDistance("lessThanXMinutes",1,s):a.formatDistance("xMinutes",p,s);if(p<45)return a.formatDistance("xMinutes",p,s);if(p<90)return a.formatDistance("aboutXHours",1,s);if(p<uO){const v=Math.round(p/60);return a.formatDistance("aboutXHours",v,s)}else{if(p<i)return a.formatDistance("xDays",1,s);if(p<kb){const v=Math.round(p/uO);return a.formatDistance("xDays",v,s)}else if(p<kb*2)return g=Math.round(p/kb),a.formatDistance("aboutXMonths",g,s)}if(g=Wie(u,l),g<12){const v=Math.round(p/kb);return a.formatDistance("xMonths",v,s)}else{const v=g%12,b=Math.trunc(g/12);return v<3?a.formatDistance("aboutXYears",b,s):v<9?a.formatDistance("overXYears",b,s):a.formatDistance("almostXYears",b+1,s)}}function D5(e,t){return Woe(e,Lie(e),t)}const sr=({tooltipText:e,icon:t,iconClassName:n,tooltipSide:r="top",onClick:a,disabled:i,variant:o="ghost",size:s="icon",className:l,"aria-label":u,...d})=>{const h=typeof t=="function";return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:o,size:s,onClick:a,disabled:i,className:Rt("h-6 w-6",l),"aria-label":u,...d,children:h?y.jsx(t,{className:Rt("h-3.5 w-3.5",n)}):t})}),y.jsx(ar,{side:r,children:y.jsx("p",{children:e})})]})})},Gk=yt.memo(({turnData:e,timestamp:t,className:n})=>{var p,g,v;const[r,a]=N.useState(!1),[i,o]=N.useState(!1),s=t?D5(new Date(t),{addSuffix:!0}):"Sending...",l=((p=e.metadata)==null?void 0:p.attachedFiles)&&e.metadata.attachedFiles.length>0,u=e.content&&e.content.trim().length>0,d=N.useCallback(()=>a(b=>!b),[]),h=N.useCallback(async()=>{if(e.content)try{await navigator.clipboard.writeText(e.content),o(!0),lt.success("User prompt copied!"),setTimeout(()=>o(!1),1500)}catch(b){lt.error("Failed to copy prompt."),console.error("Clipboard copy failed:",b)}},[e.content]);return y.jsxs("div",{className:Rt("user-prompt relative group/user",n),children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(eq,{className:"h-4 w-4 text-primary"}),y.jsx("span",{className:"text-xs font-semibold text-primary",children:"User"})]}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:s}),u&&y.jsx(sr,{tooltipText:"Copy Prompt",onClick:h,"aria-label":"Copy user prompt",icon:i?y.jsx(Ws,{className:"text-green-500"}):y.jsx(_C,{}),className:"h-5 w-5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity"}),(u||l)&&y.jsx(sr,{tooltipText:r?"Unfold":"Fold",onClick:d,"aria-label":r?"Unfold prompt":"Fold prompt",icon:r?y.jsx(Kl,{}):y.jsx(Cd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5 opacity-0 group-hover/user:opacity-100 focus-within:opacity-100 transition-opacity"})]})]}),!r&&y.jsxs(y.Fragment,{children:[l&&y.jsx("div",{className:"mb-2 space-y-1",children:(g=e.metadata.attachedFiles)==null?void 0:g.map(b=>y.jsx(T5,{fileMeta:b,isReadOnly:!0},b.id))}),u&&y.jsx("p",{className:"whitespace-pre-wrap text-sm text-foreground",children:e.content})]}),r&&y.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:d,children:[u?`"${e.content.substring(0,50)}${e.content.length>50?"...":""}"`:"",u&&l?" + ":"",l?`${(v=e.metadata.attachedFiles)==null?void 0:v.length} file(s)`:""]})]})});Gk.displayName="UserPromptDisplay";const Koe=({displayModelName:e,timeAgo:t,responseContent:n,isFolded:r,toggleFold:a,canFold:i})=>{const[o,s]=N.useState(!1),l=N.useCallback(async()=>{if(!n||typeof n!="string"){lt.info("No text response to copy.");return}try{await navigator.clipboard.writeText(n),s(!0),lt.success("Assistant response copied!"),setTimeout(()=>s(!1),1500)}catch(u){lt.error("Failed to copy response."),console.error("Clipboard copy failed:",u)}},[n]);return y.jsxs("div",{className:"flex justify-between items-center mb-2 sticky top-0 bg-card/80 backdrop-blur-sm z-10 p-1 -m-1 rounded-t",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(wU,{className:"h-4 w-4 text-secondary"}),y.jsxs("span",{className:"text-xs font-semibold text-secondary",children:["Assistant (",e,")"]})]}),y.jsxs("div",{className:"flex items-center gap-0.5",children:[y.jsx("span",{className:"text-xs text-muted-foreground mr-2",children:t}),n&&typeof n=="string"&&y.jsx(sr,{tooltipText:"Copy Response",onClick:l,"aria-label":"Copy assistant response",icon:o?y.jsx(Ws,{className:"text-green-500"}):y.jsx(_C,{}),className:"h-5 w-5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity"}),i&&y.jsx(sr,{tooltipText:r?"Unfold":"Fold",onClick:a,"aria-label":r?"Unfold response":"Fold response",icon:r?y.jsx(Kl,{}):y.jsx(Cd,{}),iconClassName:"h-3.5 w-3.5",className:"h-5 w-5 opacity-0 group-hover/assistant:opacity-100 focus-within:opacity-100 transition-opacity"})]})]})},Zoe=({interactionId:e,onRegenerate:t,onDelete:n,onEdit:r})=>{const a=()=>{n&&window.confirm("Are you sure you want to delete this interaction?")&&n(e)},i=()=>{t&&t(e)},o=()=>{r&&r(e)};return y.jsxs("div",{className:`absolute bottom-2 right-2 flex items-center space-x-1 opacity-0 group-hover/card:opacity-100 transition-opacity duration-200
                 bg-card/80 backdrop-blur-sm p-1 rounded-md shadow-md z-20`,children:[r&&y.jsx(sr,{tooltipText:"Edit",onClick:o,"aria-label":"Edit User Prompt",icon:y.jsx(XE,{}),className:"h-6 w-6"}),t&&y.jsx(sr,{tooltipText:"Regenerate",onClick:i,"aria-label":"Regenerate Response",icon:y.jsx(fw,{}),className:"h-6 w-6"}),n&&y.jsx(sr,{tooltipText:"Delete",onClick:a,"aria-label":"Delete Interaction",icon:y.jsx($s,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})},bO={};function Yoe(e){let t=bO[e];if(t)return t;t=bO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function Ih(e,t){typeof t!="string"&&(t=Ih.defaultChars);const n=Yoe(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let a="";for(let i=0,o=r.length;i<o;i+=3){const s=parseInt(r.slice(i+1,i+3),16);if(s<128){a+=n[s];continue}if((s&224)===192&&i+3<o){const l=parseInt(r.slice(i+4,i+6),16);if((l&192)===128){const u=s<<6&1984|l&63;u<128?a+="":a+=String.fromCharCode(u),i+=3;continue}}if((s&240)===224&&i+6<o){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16);if((l&192)===128&&(u&192)===128){const d=s<<12&61440|l<<6&4032|u&63;d<2048||d>=55296&&d<=57343?a+="":a+=String.fromCharCode(d),i+=6;continue}}if((s&248)===240&&i+9<o){const l=parseInt(r.slice(i+4,i+6),16),u=parseInt(r.slice(i+7,i+9),16),d=parseInt(r.slice(i+10,i+12),16);if((l&192)===128&&(u&192)===128&&(d&192)===128){let h=s<<18&1835008|l<<12&258048|u<<6&4032|d&63;h<65536||h>1114111?a+="":(h-=65536,a+=String.fromCharCode(55296+(h>>10),56320+(h&1023))),i+=9;continue}}a+=""}return a})}Ih.defaultChars=";/?:@&=+$,#";Ih.componentChars="";const vO={};function Xoe(e){let t=vO[e];if(t)return t;t=vO[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Og(e,t,n){typeof t!="string"&&(n=t,t=Og.defaultChars),typeof n>"u"&&(n=!0);const r=Xoe(t);let a="";for(let i=0,o=e.length;i<o;i++){const s=e.charCodeAt(i);if(n&&s===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){a+=e.slice(i,i+3),i+=2;continue}if(s<128){a+=r[s];continue}if(s>=55296&&s<=57343){if(s>=55296&&s<=56319&&i+1<o){const l=e.charCodeAt(i+1);if(l>=56320&&l<=57343){a+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}a+="%EF%BF%BD";continue}a+=encodeURIComponent(e[i])}return a}Og.defaultChars=";/?:@&=+$,-_.!~*'()#";Og.componentChars="-_.!~*'()";function Wk(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Gv(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const Joe=/^([a-z0-9.+-]+:)/i,Qoe=/:[0-9]*$/,ese=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,tse=["<",">",'"',"`"," ","\r",`
`,"	"],nse=["{","}","|","\\","^","`"].concat(tse),rse=["'"].concat(nse),wO=["%","/","?",";","#"].concat(rse),_O=["/","?","#"],ase=255,xO=/^[+a-z0-9A-Z_-]{0,63}$/,ise=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,SO={javascript:!0,"javascript:":!0},EO={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function Kk(e,t){if(e&&e instanceof Gv)return e;const n=new Gv;return n.parse(e,t),n}Gv.prototype.parse=function(e,t){let n,r,a,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const u=ese.exec(i);if(u)return this.pathname=u[1],u[2]&&(this.search=u[2]),this}let o=Joe.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(a=i.substr(0,2)==="//",a&&!(o&&SO[o])&&(i=i.substr(2),this.slashes=!0)),!SO[o]&&(a||o&&!EO[o])){let u=-1;for(let v=0;v<_O.length;v++)r=i.indexOf(_O[v]),r!==-1&&(u===-1||r<u)&&(u=r);let d,h;u===-1?h=i.lastIndexOf("@"):h=i.lastIndexOf("@",u),h!==-1&&(d=i.slice(0,h),i=i.slice(h+1),this.auth=d),u=-1;for(let v=0;v<wO.length;v++)r=i.indexOf(wO[v]),r!==-1&&(u===-1||r<u)&&(u=r);u===-1&&(u=i.length),i[u-1]===":"&&u--;const p=i.slice(0,u);i=i.slice(u),this.parseHost(p),this.hostname=this.hostname||"";const g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g){const v=this.hostname.split(/\./);for(let b=0,_=v.length;b<_;b++){const x=v[b];if(x&&!x.match(xO)){let S="";for(let E=0,C=x.length;E<C;E++)x.charCodeAt(E)>127?S+="x":S+=x[E];if(!S.match(xO)){const E=v.slice(0,b),C=v.slice(b+1),k=x.match(ise);k&&(E.push(k[1]),C.unshift(k[2])),C.length&&(i=C.join(".")+i),this.hostname=E.join(".");break}}}}this.hostname.length>ase&&(this.hostname=""),g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const s=i.indexOf("#");s!==-1&&(this.hash=i.substr(s),i=i.slice(0,s));const l=i.indexOf("?");return l!==-1&&(this.search=i.substr(l),i=i.slice(0,l)),i&&(this.pathname=i),EO[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Gv.prototype.parseHost=function(e){let t=Qoe.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const ose=Object.freeze(Object.defineProperty({__proto__:null,decode:Ih,encode:Og,format:Wk,parse:Kk},Symbol.toStringTag,{value:"Module"})),j5=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,M5=/[\0-\x1F\x7F-\x9F]/,sse=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,Zk=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,P5=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,F5=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,lse=Object.freeze(Object.defineProperty({__proto__:null,Any:j5,Cc:M5,Cf:sse,P:Zk,S:P5,Z:F5},Symbol.toStringTag,{value:"Module"})),cse=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),use=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var hE;const dse=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),fse=(hE=String.fromCodePoint)!==null&&hE!==void 0?hE:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function hse(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=dse.get(e))!==null&&t!==void 0?t:e}var ja;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ja||(ja={}));const pse=32;var Gc;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Gc||(Gc={}));function z2(e){return e>=ja.ZERO&&e<=ja.NINE}function mse(e){return e>=ja.UPPER_A&&e<=ja.UPPER_F||e>=ja.LOWER_A&&e<=ja.LOWER_F}function gse(e){return e>=ja.UPPER_A&&e<=ja.UPPER_Z||e>=ja.LOWER_A&&e<=ja.LOWER_Z||z2(e)}function yse(e){return e===ja.EQUALS||gse(e)}var Ra;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ra||(Ra={}));var zc;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(zc||(zc={}));class bse{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ra.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=zc.Strict}startEntity(t){this.decodeMode=t,this.state=Ra.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ra.EntityStart:return t.charCodeAt(n)===ja.NUM?(this.state=Ra.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ra.NamedEntity,this.stateNamedEntity(t,n));case Ra.NumericStart:return this.stateNumericStart(t,n);case Ra.NumericDecimal:return this.stateNumericDecimal(t,n);case Ra.NumericHex:return this.stateNumericHex(t,n);case Ra.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|pse)===ja.LOWER_X?(this.state=Ra.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ra.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,a){if(n!==r){const i=r-n;this.result=this.result*Math.pow(a,i)+parseInt(t.substr(n,i),a),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(z2(a)||mse(a))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(a,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const a=t.charCodeAt(n);if(z2(a))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(a,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ja.SEMI)this.consumed+=1;else if(this.decodeMode===zc.Strict)return 0;return this.emitCodePoint(hse(this.result),this.consumed),this.errors&&(t!==ja.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let a=r[this.treeIndex],i=(a&Gc.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=vse(r,a,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===zc.Attribute&&(i===0||yse(o))?0:this.emitNotTerminatedNamedEntity();if(a=r[this.treeIndex],i=(a&Gc.VALUE_LENGTH)>>14,i!==0){if(o===ja.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==zc.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,a=(r[n]&Gc.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,a,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:a}=this;return this.emitCodePoint(n===1?a[t]&~Gc.VALUE_LENGTH:a[t+1],r),n===3&&this.emitCodePoint(a[t+2],r),r}end(){var t;switch(this.state){case Ra.NamedEntity:return this.result!==0&&(this.decodeMode!==zc.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ra.NumericDecimal:return this.emitNumericEntity(0,2);case Ra.NumericHex:return this.emitNumericEntity(0,3);case Ra.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ra.EntityStart:return 0}}}function L5(e){let t="";const n=new bse(e,r=>t+=fse(r));return function(a,i){let o=0,s=0;for(;(s=a.indexOf("&",s))>=0;){t+=a.slice(o,s),n.startEntity(i);const u=n.write(a,s+1);if(u<0){o=s+n.end();break}o=s+u,s=u===0?o+1:o}const l=t+a.slice(o);return t="",l}}function vse(e,t,n,r){const a=(t&Gc.BRANCH_LENGTH)>>7,i=t&Gc.JUMP_TABLE;if(a===0)return i!==0&&r===i?n:-1;if(i){const l=r-i;return l<0||l>=a?-1:e[n+l]-1}let o=n,s=o+a-1;for(;o<=s;){const l=o+s>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)s=l-1;else return e[l+a]}return-1}const wse=L5(cse);L5(use);function $5(e,t=zc.Legacy){return wse(e,t)}function _se(e){return Object.prototype.toString.call(e)}function Yk(e){return _se(e)==="[object String]"}const xse=Object.prototype.hasOwnProperty;function Sse(e,t){return xse.call(e,t)}function s1(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function B5(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function Xk(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Wv(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const z5=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,Ese=/&([a-z#][a-z0-9]{1,31});/gi,Cse=new RegExp(z5.source+"|"+Ese.source,"gi"),kse=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function Tse(e,t){if(t.charCodeAt(0)===35&&kse.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return Xk(r)?Wv(r):e}const n=$5(e);return n!==e?n:e}function Ase(e){return e.indexOf("\\")<0?e:e.replace(z5,"$1")}function Oh(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(Cse,function(t,n,r){return n||Tse(t,r)})}const Nse=/[&<>"]/,Rse=/[&<>"]/g,Ise={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Ose(e){return Ise[e]}function pu(e){return Nse.test(e)?e.replace(Rse,Ose):e}const Dse=/[.?*+^$[\]\\(){}|-]/g;function jse(e){return e.replace(Dse,"\\$&")}function jr(e){switch(e){case 9:case 32:return!0}return!1}function A0(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function N0(e){return Zk.test(e)||P5.test(e)}function R0(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function l1(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Mse={mdurl:ose,ucmicro:lse},Pse=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:B5,assign:s1,escapeHtml:pu,escapeRE:jse,fromCodePoint:Wv,has:Sse,isMdAsciiPunct:R0,isPunctChar:N0,isSpace:jr,isString:Yk,isValidEntityCode:Xk,isWhiteSpace:A0,lib:Mse,normalizeReference:l1,unescapeAll:Oh,unescapeMd:Ase},Symbol.toStringTag,{value:"Module"}));function Fse(e,t,n){let r,a,i,o;const s=e.posMax,l=e.pos;for(e.pos=t+1,r=1;e.pos<s;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){a=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=l,-1}}let u=-1;return a&&(u=e.pos),e.pos=l,u}function Lse(e,t,n){let r,a=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(a)===60){for(a++;a<n;){if(r=e.charCodeAt(a),r===10||r===60)return i;if(r===62)return i.pos=a+1,i.str=Oh(e.slice(t+1,a)),i.ok=!0,i;if(r===92&&a+1<n){a+=2;continue}a++}return i}let o=0;for(;a<n&&(r=e.charCodeAt(a),!(r===32||r<32||r===127));){if(r===92&&a+1<n){if(e.charCodeAt(a+1)===32)break;a+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}a++}return t===a||o!==0||(i.str=Oh(e.slice(t,a)),i.pos=a,i.ok=!0),i}function $se(e,t,n,r){let a,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let s=e.charCodeAt(i);if(s!==34&&s!==39&&s!==40)return o;t++,i++,s===40&&(s=41),o.marker=s}for(;i<n;){if(a=e.charCodeAt(i),a===o.marker)return o.pos=i+1,o.str+=Oh(e.slice(t,i)),o.ok=!0,o;if(a===40&&o.marker===41)return o;a===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=Oh(e.slice(t,i)),o}const Bse=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Lse,parseLinkLabel:Fse,parseLinkTitle:$se},Symbol.toStringTag,{value:"Module"})),Zs={};Zs.code_inline=function(e,t,n,r,a){const i=e[t];return"<code"+a.renderAttrs(i)+">"+pu(i.content)+"</code>"};Zs.code_block=function(e,t,n,r,a){const i=e[t];return"<pre"+a.renderAttrs(i)+"><code>"+pu(e[t].content)+`</code></pre>
`};Zs.fence=function(e,t,n,r,a){const i=e[t],o=i.info?Oh(i.info).trim():"";let s="",l="";if(o){const d=o.split(/(\s+)/g);s=d[0],l=d.slice(2).join("")}let u;if(n.highlight?u=n.highlight(i.content,s,l)||pu(i.content):u=pu(i.content),u.indexOf("<pre")===0)return u+`
`;if(o){const d=i.attrIndex("class"),h=i.attrs?i.attrs.slice():[];d<0?h.push(["class",n.langPrefix+s]):(h[d]=h[d].slice(),h[d][1]+=" "+n.langPrefix+s);const p={attrs:h};return`<pre><code${a.renderAttrs(p)}>${u}</code></pre>
`}return`<pre><code${a.renderAttrs(i)}>${u}</code></pre>
`};Zs.image=function(e,t,n,r,a){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=a.renderInlineAsText(i.children,n,r),a.renderToken(e,t,n)};Zs.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Zs.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Zs.text=function(e,t){return pu(e[t].content)};Zs.html_block=function(e,t){return e[t].content};Zs.html_inline=function(e,t){return e[t].content};function np(){this.rules=s1({},Zs)}np.prototype.renderAttrs=function(t){let n,r,a;if(!t.attrs)return"";for(a="",n=0,r=t.attrs.length;n<r;n++)a+=" "+pu(t.attrs[n][0])+'="'+pu(t.attrs[n][1])+'"';return a};np.prototype.renderToken=function(t,n,r){const a=t[n];let i="";if(a.hidden)return"";a.block&&a.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(a.nesting===-1?"</":"<")+a.tag,i+=this.renderAttrs(a),a.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(a.block&&(o=!0,a.nesting===1&&n+1<t.length)){const s=t[n+1];(s.type==="inline"||s.hidden||s.nesting===-1&&s.tag===a.tag)&&(o=!1)}return i+=o?`>
`:">",i};np.prototype.renderInline=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};np.prototype.renderInlineAsText=function(e,t,n){let r="";for(let a=0,i=e.length;a<i;a++)switch(e[a].type){case"text":r+=e[a].content;break;case"image":r+=this.renderInlineAsText(e[a].children,t,n);break;case"html_inline":case"html_block":r+=e[a].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};np.prototype.render=function(e,t,n){let r="";const a=this.rules;for(let i=0,o=e.length;i<o;i++){const s=e[i].type;s==="inline"?r+=this.renderInline(e[i].children,t,n):typeof a[s]<"u"?r+=a[s](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function Mi(){this.__rules__=[],this.__cache__=null}Mi.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};Mi.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};Mi.prototype.at=function(e,t,n){const r=this.__find__(e),a=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=a.alt||[],this.__cache__=null};Mi.prototype.before=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Mi.prototype.after=function(e,t,n,r){const a=this.__find__(e),i=r||{};if(a===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(a+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};Mi.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};Mi.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!0,n.push(r)},this),this.__cache__=null,n};Mi.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};Mi.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const a=this.__find__(r);if(a<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[a].enabled=!1,n.push(r)},this),this.__cache__=null,n};Mi.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function is(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}is.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,a=n.length;r<a;r++)if(n[r][0]===t)return r;return-1};is.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};is.prototype.attrSet=function(t,n){const r=this.attrIndex(t),a=[t,n];r<0?this.attrPush(a):this.attrs[r]=a};is.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};is.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function U5(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}U5.prototype.Token=is;const zse=/\r\n?|\n/g,Use=/\0/g;function Hse(e){let t;t=e.src.replace(zse,`
`),t=t.replace(Use,""),e.src=t}function qse(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Vse(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const a=t[n];a.type==="inline"&&e.md.inline.parse(a.content,e.md,e.env,a.children)}}function Gse(e){return/^<a[>\s]/i.test(e)}function Wse(e){return/^<\/a\s*>/i.test(e)}function Kse(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let a=t[n].children,i=0;for(let o=a.length-1;o>=0;o--){const s=a[o];if(s.type==="link_close"){for(o--;a[o].level!==s.level&&a[o].type!=="link_open";)o--;continue}if(s.type==="html_inline"&&(Gse(s.content)&&i>0&&i--,Wse(s.content)&&i++),!(i>0)&&s.type==="text"&&e.md.linkify.test(s.content)){const l=s.content;let u=e.md.linkify.match(l);const d=[];let h=s.level,p=0;u.length>0&&u[0].index===0&&o>0&&a[o-1].type==="text_special"&&(u=u.slice(1));for(let g=0;g<u.length;g++){const v=u[g].url,b=e.md.normalizeLink(v);if(!e.md.validateLink(b))continue;let _=u[g].text;u[g].schema?u[g].schema==="mailto:"&&!/^mailto:/i.test(_)?_=e.md.normalizeLinkText("mailto:"+_).replace(/^mailto:/,""):_=e.md.normalizeLinkText(_):_=e.md.normalizeLinkText("http://"+_).replace(/^http:\/\//,"");const x=u[g].index;if(x>p){const k=new e.Token("text","",0);k.content=l.slice(p,x),k.level=h,d.push(k)}const S=new e.Token("link_open","a",1);S.attrs=[["href",b]],S.level=h++,S.markup="linkify",S.info="auto",d.push(S);const E=new e.Token("text","",0);E.content=_,E.level=h,d.push(E);const C=new e.Token("link_close","a",-1);C.level=--h,C.markup="linkify",C.info="auto",d.push(C),p=u[g].lastIndex}if(p<l.length){const g=new e.Token("text","",0);g.content=l.slice(p),g.level=h,d.push(g)}t[n].children=a=B5(a,o,d)}}}}const H5=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Zse=/\((c|tm|r)\)/i,Yse=/\((c|tm|r)\)/ig,Xse={c:"",r:"",tm:""};function Jse(e,t){return Xse[t.toLowerCase()]}function Qse(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace(Yse,Jse)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function ele(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&H5.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function tle(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Zse.test(e.tokens[t].content)&&Qse(e.tokens[t].children),H5.test(e.tokens[t].content)&&ele(e.tokens[t].children))}const nle=/['"]/,CO=/['"]/g,kO="";function Tb(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function rle(e,t){let n;const r=[];for(let a=0;a<e.length;a++){const i=e[a],o=e[a].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let s=i.content,l=0,u=s.length;e:for(;l<u;){CO.lastIndex=l;const d=CO.exec(s);if(!d)break;let h=!0,p=!0;l=d.index+1;const g=d[0]==="'";let v=32;if(d.index-1>=0)v=s.charCodeAt(d.index-1);else for(n=a-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){v=e[n].content.charCodeAt(e[n].content.length-1);break}let b=32;if(l<u)b=s.charCodeAt(l);else for(n=a+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){b=e[n].content.charCodeAt(0);break}const _=R0(v)||N0(String.fromCharCode(v)),x=R0(b)||N0(String.fromCharCode(b)),S=A0(v),E=A0(b);if(E?h=!1:x&&(S||_||(h=!1)),S?p=!1:_&&(E||x||(p=!1)),b===34&&d[0]==='"'&&v>=48&&v<=57&&(p=h=!1),h&&p&&(h=_,p=x),!h&&!p){g&&(i.content=Tb(i.content,d.index,kO));continue}if(p)for(n=r.length-1;n>=0;n--){let C=r[n];if(r[n].level<o)break;if(C.single===g&&r[n].level===o){C=r[n];let k,R;g?(k=t.md.options.quotes[2],R=t.md.options.quotes[3]):(k=t.md.options.quotes[0],R=t.md.options.quotes[1]),i.content=Tb(i.content,d.index,R),e[C.token].content=Tb(e[C.token].content,C.pos,k),l+=R.length-1,C.token===a&&(l+=k.length-1),s=i.content,u=s.length,r.length=n;continue e}}h?r.push({token:a,pos:d.index,single:g,level:o}):p&&g&&(i.content=Tb(i.content,d.index,kO))}}}function ale(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!nle.test(e.tokens[t].content)||rle(e.tokens[t].children,e)}function ile(e){let t,n;const r=e.tokens,a=r.length;for(let i=0;i<a;i++){if(r[i].type!=="inline")continue;const o=r[i].children,s=o.length;for(t=0;t<s;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<s;t++)o[t].type==="text"&&t+1<s&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const pE=[["normalize",Hse],["block",qse],["inline",Vse],["linkify",Kse],["replacements",tle],["smartquotes",ale],["text_join",ile]];function Jk(){this.ruler=new Mi;for(let e=0;e<pE.length;e++)this.ruler.push(pE[e][0],pE[e][1])}Jk.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};Jk.prototype.State=U5;function Ys(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const a=this.src;for(let i=0,o=0,s=0,l=0,u=a.length,d=!1;o<u;o++){const h=a.charCodeAt(o);if(!d)if(jr(h)){s++,h===9?l+=4-l%4:l++;continue}else d=!0;(h===10||o===u-1)&&(h!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(s),this.sCount.push(l),this.bsCount.push(0),d=!1,s=0,l=0,i=o+1)}this.bMarks.push(a.length),this.eMarks.push(a.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Ys.prototype.push=function(e,t,n){const r=new is(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Ys.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Ys.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Ys.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!jr(r))break}return t};Ys.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!jr(this.src.charCodeAt(--t)))return t+1;return t};Ys.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Ys.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Ys.prototype.getLines=function(t,n,r,a){if(t>=n)return"";const i=new Array(n-t);for(let o=0,s=t;s<n;s++,o++){let l=0;const u=this.bMarks[s];let d=u,h;for(s+1<n||a?h=this.eMarks[s]+1:h=this.eMarks[s];d<h&&l<r;){const p=this.src.charCodeAt(d);if(jr(p))p===9?l+=4-(l+this.bsCount[s])%4:l++;else if(d-u<this.tShift[s])l++;else break;d++}l>r?i[o]=new Array(l-r+1).join(" ")+this.src.slice(d,h):i[o]=this.src.slice(d,h)}return i.join("")};Ys.prototype.Token=is;const ole=65536;function mE(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function TO(e){const t=[],n=e.length;let r=0,a=e.charCodeAt(r),i=!1,o=0,s="";for(;r<n;)a===124&&(i?(s+=e.substring(o,r-1),o=r):(t.push(s+e.substring(o,r)),s="",o=r+1)),i=a===92,r++,a=e.charCodeAt(r);return t.push(s+e.substring(o)),t}function sle(e,t,n,r){if(t+2>n)return!1;let a=t+1;if(e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)return!1;let i=e.bMarks[a]+e.tShift[a];if(i>=e.eMarks[a])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[a])return!1;const s=e.src.charCodeAt(i++);if(s!==124&&s!==45&&s!==58&&!jr(s)||o===45&&jr(s))return!1;for(;i<e.eMarks[a];){const C=e.src.charCodeAt(i);if(C!==124&&C!==45&&C!==58&&!jr(C))return!1;i++}let l=mE(e,t+1),u=l.split("|");const d=[];for(let C=0;C<u.length;C++){const k=u[C].trim();if(!k){if(C===0||C===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(k))return!1;k.charCodeAt(k.length-1)===58?d.push(k.charCodeAt(0)===58?"center":"right"):k.charCodeAt(0)===58?d.push("left"):d.push("")}if(l=mE(e,t).trim(),l.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;u=TO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop();const h=u.length;if(h===0||h!==d.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const g=e.md.block.ruler.getRules("blockquote"),v=e.push("table_open","table",1),b=[t,0];v.map=b;const _=e.push("thead_open","thead",1);_.map=[t,t+1];const x=e.push("tr_open","tr",1);x.map=[t,t+1];for(let C=0;C<u.length;C++){const k=e.push("th_open","th",1);d[C]&&(k.attrs=[["style","text-align:"+d[C]]]);const R=e.push("inline","",0);R.content=u[C].trim(),R.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let S,E=0;for(a=t+2;a<n&&!(e.sCount[a]<e.blkIndent);a++){let C=!1;for(let R=0,D=g.length;R<D;R++)if(g[R](e,a,n,!0)){C=!0;break}if(C||(l=mE(e,a).trim(),!l)||e.sCount[a]-e.blkIndent>=4||(u=TO(l),u.length&&u[0]===""&&u.shift(),u.length&&u[u.length-1]===""&&u.pop(),E+=h-u.length,E>ole))break;if(a===t+2){const R=e.push("tbody_open","tbody",1);R.map=S=[t+2,0]}const k=e.push("tr_open","tr",1);k.map=[a,a+1];for(let R=0;R<h;R++){const D=e.push("td_open","td",1);d[R]&&(D.attrs=[["style","text-align:"+d[R]]]);const O=e.push("inline","",0);O.content=u[R]?u[R].trim():"",O.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return S&&(e.push("tbody_close","tbody",-1),S[1]=a),e.push("table_close","table",-1),b[1]=a,e.parentType=p,e.line=a,!0}function lle(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,a=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,a=r;continue}break}e.line=a;const i=e.push("code_block","code",0);return i.content=e.getLines(t,a,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function cle(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||a+3>i)return!1;const o=e.src.charCodeAt(a);if(o!==126&&o!==96)return!1;let s=a;a=e.skipChars(a,o);let l=a-s;if(l<3)return!1;const u=e.src.slice(s,a),d=e.src.slice(a,i);if(o===96&&d.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let h=t,p=!1;for(;h++,!(h>=n||(a=s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],a<i&&e.sCount[h]<e.blkIndent));)if(e.src.charCodeAt(a)===o&&!(e.sCount[h]-e.blkIndent>=4)&&(a=e.skipChars(a,o),!(a-s<l)&&(a=e.skipSpaces(a),!(a<i)))){p=!0;break}l=e.sCount[t],e.line=h+(p?1:0);const g=e.push("fence","code",0);return g.info=d,g.content=e.getLines(t+1,h,l,!0),g.markup=u,g.map=[t,e.line],!0}function ule(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==62)return!1;if(r)return!0;const s=[],l=[],u=[],d=[],h=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let g=!1,v;for(v=t;v<n;v++){const E=e.sCount[v]<e.blkIndent;if(a=e.bMarks[v]+e.tShift[v],i=e.eMarks[v],a>=i)break;if(e.src.charCodeAt(a++)===62&&!E){let k=e.sCount[v]+1,R,D;e.src.charCodeAt(a)===32?(a++,k++,D=!1,R=!0):e.src.charCodeAt(a)===9?(R=!0,(e.bsCount[v]+k)%4===3?(a++,k++,D=!1):D=!0):R=!1;let O=k;for(s.push(e.bMarks[v]),e.bMarks[v]=a;a<i;){const L=e.src.charCodeAt(a);if(jr(L))L===9?O+=4-(O+e.bsCount[v]+(D?1:0))%4:O++;else break;a++}g=a>=i,l.push(e.bsCount[v]),e.bsCount[v]=e.sCount[v]+1+(R?1:0),u.push(e.sCount[v]),e.sCount[v]=O-k,d.push(e.tShift[v]),e.tShift[v]=a-e.bMarks[v];continue}if(g)break;let C=!1;for(let k=0,R=h.length;k<R;k++)if(h[k](e,v,n,!0)){C=!0;break}if(C){e.lineMax=v,e.blkIndent!==0&&(s.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]-=e.blkIndent);break}s.push(e.bMarks[v]),l.push(e.bsCount[v]),d.push(e.tShift[v]),u.push(e.sCount[v]),e.sCount[v]=-1}const b=e.blkIndent;e.blkIndent=0;const _=e.push("blockquote_open","blockquote",1);_.markup=">";const x=[t,0];_.map=x,e.md.block.tokenize(e,t,v);const S=e.push("blockquote_close","blockquote",-1);S.markup=">",e.lineMax=o,e.parentType=p,x[1]=e.line;for(let E=0;E<d.length;E++)e.bMarks[E+t]=s[E],e.tShift[E+t]=d[E],e.sCount[E+t]=u[E],e.bsCount[E+t]=l[E];return e.blkIndent=b,!0}function dle(e,t,n,r){const a=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let s=1;for(;i<a;){const u=e.src.charCodeAt(i++);if(u!==o&&!jr(u))return!1;u===o&&s++}if(s<3)return!1;if(r)return!0;e.line=t+1;const l=e.push("hr","hr",0);return l.map=[t,e.line],l.markup=Array(s+1).join(String.fromCharCode(o)),!0}function AO(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const a=e.src.charCodeAt(r++);if(a!==42&&a!==45&&a!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!jr(i))return-1}return r}function NO(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let a=n;if(a+1>=r)return-1;let i=e.src.charCodeAt(a++);if(i<48||i>57)return-1;for(;;){if(a>=r)return-1;if(i=e.src.charCodeAt(a++),i>=48&&i<=57){if(a-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return a<r&&(i=e.src.charCodeAt(a),!jr(i))?-1:a}function fle(e,t){const n=e.level+2;for(let r=t+2,a=e.tokens.length-2;r<a;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function hle(e,t,n,r){let a,i,o,s,l=t,u=!0;if(e.sCount[l]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[l]-e.listIndent>=4&&e.sCount[l]<e.blkIndent)return!1;let d=!1;r&&e.parentType==="paragraph"&&e.sCount[l]>=e.blkIndent&&(d=!0);let h,p,g;if((g=NO(e,l))>=0){if(h=!0,o=e.bMarks[l]+e.tShift[l],p=Number(e.src.slice(o,g-1)),d&&p!==1)return!1}else if((g=AO(e,l))>=0)h=!1;else return!1;if(d&&e.skipSpaces(g)>=e.eMarks[l])return!1;if(r)return!0;const v=e.src.charCodeAt(g-1),b=e.tokens.length;h?(s=e.push("ordered_list_open","ol",1),p!==1&&(s.attrs=[["start",p]])):s=e.push("bullet_list_open","ul",1);const _=[l,0];s.map=_,s.markup=String.fromCharCode(v);let x=!1;const S=e.md.block.ruler.getRules("list"),E=e.parentType;for(e.parentType="list";l<n;){i=g,a=e.eMarks[l];const C=e.sCount[l]+g-(e.bMarks[l]+e.tShift[l]);let k=C;for(;i<a;){const ne=e.src.charCodeAt(i);if(ne===9)k+=4-(k+e.bsCount[l])%4;else if(ne===32)k++;else break;i++}const R=i;let D;R>=a?D=1:D=k-C,D>4&&(D=1);const O=C+D;s=e.push("list_item_open","li",1),s.markup=String.fromCharCode(v);const L=[l,0];s.map=L,h&&(s.info=e.src.slice(o,g-1));const B=e.tight,Y=e.tShift[l],F=e.sCount[l],Z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=O,e.tight=!0,e.tShift[l]=R-e.bMarks[l],e.sCount[l]=k,R>=a&&e.isEmpty(l+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,l,n,!0),(!e.tight||x)&&(u=!1),x=e.line-l>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=Z,e.tShift[l]=Y,e.sCount[l]=F,e.tight=B,s=e.push("list_item_close","li",-1),s.markup=String.fromCharCode(v),l=e.line,L[1]=l,l>=n||e.sCount[l]<e.blkIndent||e.sCount[l]-e.blkIndent>=4)break;let q=!1;for(let ne=0,ae=S.length;ne<ae;ne++)if(S[ne](e,l,n,!0)){q=!0;break}if(q)break;if(h){if(g=NO(e,l),g<0)break;o=e.bMarks[l]+e.tShift[l]}else if(g=AO(e,l),g<0)break;if(v!==e.src.charCodeAt(g-1))break}return h?s=e.push("ordered_list_close","ol",-1):s=e.push("bullet_list_close","ul",-1),s.markup=String.fromCharCode(v),_[1]=l,e.line=l,e.parentType=E,u&&fle(e,b),!0}function ple(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(a)!==91)return!1;function s(S){const E=e.lineMax;if(S>=E||e.isEmpty(S))return null;let C=!1;if(e.sCount[S]-e.blkIndent>3&&(C=!0),e.sCount[S]<0&&(C=!0),!C){const D=e.md.block.ruler.getRules("reference"),O=e.parentType;e.parentType="reference";let L=!1;for(let B=0,Y=D.length;B<Y;B++)if(D[B](e,S,E,!0)){L=!0;break}if(e.parentType=O,L)return null}const k=e.bMarks[S]+e.tShift[S],R=e.eMarks[S];return e.src.slice(k,R+1)}let l=e.src.slice(a,i+1);i=l.length;let u=-1;for(a=1;a<i;a++){const S=l.charCodeAt(a);if(S===91)return!1;if(S===93){u=a;break}else if(S===10){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}else if(S===92&&(a++,a<i&&l.charCodeAt(a)===10)){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}}if(u<0||l.charCodeAt(u+1)!==58)return!1;for(a=u+2;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}else if(!jr(S))break}const d=e.md.helpers.parseLinkDestination(l,a,i);if(!d.ok)return!1;const h=e.md.normalizeLink(d.str);if(!e.md.validateLink(h))return!1;a=d.pos;const p=a,g=o,v=a;for(;a<i;a++){const S=l.charCodeAt(a);if(S===10){const E=s(o);E!==null&&(l+=E,i=l.length,o++)}else if(!jr(S))break}let b=e.md.helpers.parseLinkTitle(l,a,i);for(;b.can_continue;){const S=s(o);if(S===null)break;l+=S,a=i,i=l.length,o++,b=e.md.helpers.parseLinkTitle(l,a,i,b)}let _;for(a<i&&v!==a&&b.ok?(_=b.str,a=b.pos):(_="",a=p,o=g);a<i;){const S=l.charCodeAt(a);if(!jr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10&&_)for(_="",a=p,o=g;a<i;){const S=l.charCodeAt(a);if(!jr(S))break;a++}if(a<i&&l.charCodeAt(a)!==10)return!1;const x=l1(l.slice(1,u));return x?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[x]>"u"&&(e.env.references[x]={title:_,href:h}),e.line=o),!0):!1}const mle=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],gle="[a-zA-Z_:][a-zA-Z0-9:._-]*",yle="[^\"'=<>`\\x00-\\x20]+",ble="'[^']*'",vle='"[^"]*"',wle="(?:"+yle+"|"+ble+"|"+vle+")",_le="(?:\\s+"+gle+"(?:\\s*=\\s*"+wle+")?)",q5="<[A-Za-z][A-Za-z0-9\\-]*"+_le+"*\\s*\\/?>",V5="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",xle="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",Sle="<[?][\\s\\S]*?[?]>",Ele="<![A-Za-z][^>]*>",Cle="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",kle=new RegExp("^(?:"+q5+"|"+V5+"|"+xle+"|"+Sle+"|"+Ele+"|"+Cle+")"),Tle=new RegExp("^(?:"+q5+"|"+V5+")"),Hf=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+mle.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(Tle.source+"\\s*$"),/^$/,!1]];function Ale(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(a)!==60)return!1;let o=e.src.slice(a,i),s=0;for(;s<Hf.length&&!Hf[s][0].test(o);s++);if(s===Hf.length)return!1;if(r)return Hf[s][2];let l=t+1;if(!Hf[s][1].test(o)){for(;l<n&&!(e.sCount[l]<e.blkIndent);l++)if(a=e.bMarks[l]+e.tShift[l],i=e.eMarks[l],o=e.src.slice(a,i),Hf[s][1].test(o)){o.length!==0&&l++;break}}e.line=l;const u=e.push("html_block","",0);return u.map=[t,l],u.content=e.getLines(t,l,e.blkIndent,!0),!0}function Nle(e,t,n,r){let a=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(a);if(o!==35||a>=i)return!1;let s=1;for(o=e.src.charCodeAt(++a);o===35&&a<i&&s<=6;)s++,o=e.src.charCodeAt(++a);if(s>6||a<i&&!jr(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,a);const l=e.skipCharsBack(i,35,a);l>a&&jr(e.src.charCodeAt(l-1))&&(i=l),e.line=t+1;const u=e.push("heading_open","h"+String(s),1);u.markup="########".slice(0,s),u.map=[t,e.line];const d=e.push("inline","",0);d.content=e.src.slice(a,i).trim(),d.map=[t,e.line],d.children=[];const h=e.push("heading_close","h"+String(s),-1);return h.markup="########".slice(0,s),!0}function Rle(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const a=e.parentType;e.parentType="paragraph";let i=0,o,s=t+1;for(;s<n&&!e.isEmpty(s);s++){if(e.sCount[s]-e.blkIndent>3)continue;if(e.sCount[s]>=e.blkIndent){let g=e.bMarks[s]+e.tShift[s];const v=e.eMarks[s];if(g<v&&(o=e.src.charCodeAt(g),(o===45||o===61)&&(g=e.skipChars(g,o),g=e.skipSpaces(g),g>=v))){i=o===61?1:2;break}}if(e.sCount[s]<0)continue;let p=!1;for(let g=0,v=r.length;g<v;g++)if(r[g](e,s,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const l=e.getLines(t,s,e.blkIndent,!1).trim();e.line=s+1;const u=e.push("heading_open","h"+String(i),1);u.markup=String.fromCharCode(o),u.map=[t,e.line];const d=e.push("inline","",0);d.content=l,d.map=[t,e.line-1],d.children=[];const h=e.push("heading_close","h"+String(i),-1);return h.markup=String.fromCharCode(o),e.parentType=a,!0}function Ile(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),a=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let u=!1;for(let d=0,h=r.length;d<h;d++)if(r[d](e,i,n,!0)){u=!0;break}if(u)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const s=e.push("paragraph_open","p",1);s.map=[t,e.line];const l=e.push("inline","",0);return l.content=o,l.map=[t,e.line],l.children=[],e.push("paragraph_close","p",-1),e.parentType=a,!0}const Ab=[["table",sle,["paragraph","reference"]],["code",lle],["fence",cle,["paragraph","reference","blockquote","list"]],["blockquote",ule,["paragraph","reference","blockquote","list"]],["hr",dle,["paragraph","reference","blockquote","list"]],["list",hle,["paragraph","reference","blockquote"]],["reference",ple],["html_block",Ale,["paragraph","reference","blockquote"]],["heading",Nle,["paragraph","reference","blockquote"]],["lheading",Rle],["paragraph",Ile]];function c1(){this.ruler=new Mi;for(let e=0;e<Ab.length;e++)this.ruler.push(Ab[e][0],Ab[e][1],{alt:(Ab[e][2]||[]).slice()})}c1.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),a=r.length,i=e.md.options.maxNesting;let o=t,s=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const l=e.line;let u=!1;for(let d=0;d<a;d++)if(u=r[d](e,o,n,!1),u){if(l>=e.line)throw new Error("block rule didn't increment state.line");break}if(!u)throw new Error("none of the block rules matched");e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),o=e.line,o<n&&e.isEmpty(o)&&(s=!0,o++,e.line=o)}};c1.prototype.parse=function(e,t,n,r){if(!e)return;const a=new this.State(e,t,n,r);this.tokenize(a,a.line,a.lineMax)};c1.prototype.State=Ys;function Dg(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Dg.prototype.pushPending=function(){const e=new is("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Dg.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new is(e,t,n);let a=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],a={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(a),r};Dg.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),a=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,s=i<n?this.src.charCodeAt(i):32,l=R0(a)||N0(String.fromCharCode(a)),u=R0(s)||N0(String.fromCharCode(s)),d=A0(a),h=A0(s),p=!h&&(!u||d||l),g=!d&&(!l||h||u);return{can_open:p&&(t||!g||l),can_close:g&&(t||!p||u),length:o}};Dg.prototype.Token=is;function Ole(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function Dle(e,t){let n=e.pos;for(;n<e.posMax&&!Ole(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const jle=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function Mle(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const a=e.pending.match(jle);if(!a)return!1;const i=a[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let s=o.url;if(s.length<=i.length)return!1;s=s.replace(/\*+$/,"");const l=e.md.normalizeLink(s);if(!e.md.validateLink(l))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const u=e.push("link_open","a",1);u.attrs=[["href",l]],u.markup="linkify",u.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(s);const h=e.push("link_close","a",-1);h.markup="linkify",h.info="auto"}return e.pos+=s.length-i.length,!0}function Ple(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,a=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<a&&jr(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const Qk=[];for(let e=0;e<256;e++)Qk.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){Qk[e.charCodeAt(0)]=1});function Fle(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let a=e.src.charCodeAt(n);if(a===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(a=e.src.charCodeAt(n),!!jr(a));)n++;return e.pos=n,!0}let i=e.src[n];if(a>=55296&&a<=56319&&n+1<r){const s=e.src.charCodeAt(n+1);s>=56320&&s<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const s=e.push("text_special","",0);a<256&&Qk[a]!==0?s.content=i:s.content=o,s.markup=o,s.info="escape"}return e.pos=n+1,!0}function Lle(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const a=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(a,n),s=o.length;if(e.backticksScanned&&(e.backticks[s]||0)<=a)return t||(e.pending+=o),e.pos+=s,!0;let l=n,u;for(;(u=e.src.indexOf("`",l))!==-1;){for(l=u+1;l<i&&e.src.charCodeAt(l)===96;)l++;const d=l-u;if(d===s){if(!t){const h=e.push("code_inline","code",0);h.markup=o,h.content=e.src.slice(n,u).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=l,!0}e.backticks[d]=u}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=s,!0}function $le(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const a=e.scanDelims(e.pos,!0);let i=a.length;const o=String.fromCharCode(r);if(i<2)return!1;let s;i%2&&(s=e.push("text","",0),s.content=o,i--);for(let l=0;l<i;l+=2)s=e.push("text","",0),s.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close});return e.pos+=a.length,!0}function RO(e,t){let n;const r=[],a=t.length;for(let i=0;i<a;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const s=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[s.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[s.token-1].type==="text"&&e.tokens[s.token-1].content==="~"&&r.push(s.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function Ble(e){const t=e.tokens_meta,n=e.tokens_meta.length;RO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&RO(e,t[r].delimiters)}const G5={tokenize:$le,postProcess:Ble};function zle(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const a=e.scanDelims(e.pos,r===42);for(let i=0;i<a.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:a.length,token:e.tokens.length-1,end:-1,open:a.can_open,close:a.can_close})}return e.pos+=a.length,!0}function IO(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const a=t[r];if(a.marker!==95&&a.marker!==42||a.end===-1)continue;const i=t[a.end],o=r>0&&t[r-1].end===a.end+1&&t[r-1].marker===a.marker&&t[r-1].token===a.token-1&&t[a.end+1].token===i.token+1,s=String.fromCharCode(a.marker),l=e.tokens[a.token];l.type=o?"strong_open":"em_open",l.tag=o?"strong":"em",l.nesting=1,l.markup=o?s+s:s,l.content="";const u=e.tokens[i.token];u.type=o?"strong_close":"em_close",u.tag=o?"strong":"em",u.nesting=-1,u.markup=o?s+s:s,u.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[a.end+1].token].content="",r--)}}function Ule(e){const t=e.tokens_meta,n=e.tokens_meta.length;IO(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&IO(e,t[r].delimiters)}const W5={tokenize:zle,postProcess:Ule};function Hle(e,t){let n,r,a,i,o="",s="",l=e.pos,u=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const d=e.pos,h=e.posMax,p=e.pos+1,g=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(g<0)return!1;let v=g+1;if(v<h&&e.src.charCodeAt(v)===40){for(u=!1,v++;v<h&&(n=e.src.charCodeAt(v),!(!jr(n)&&n!==10));v++);if(v>=h)return!1;if(l=v,a=e.md.helpers.parseLinkDestination(e.src,v,e.posMax),a.ok){for(o=e.md.normalizeLink(a.str),e.md.validateLink(o)?v=a.pos:o="",l=v;v<h&&(n=e.src.charCodeAt(v),!(!jr(n)&&n!==10));v++);if(a=e.md.helpers.parseLinkTitle(e.src,v,e.posMax),v<h&&l!==v&&a.ok)for(s=a.str,v=a.pos;v<h&&(n=e.src.charCodeAt(v),!(!jr(n)&&n!==10));v++);}(v>=h||e.src.charCodeAt(v)!==41)&&(u=!0),v++}if(u){if(typeof e.env.references>"u")return!1;if(v<h&&e.src.charCodeAt(v)===91?(l=v+1,v=e.md.helpers.parseLinkLabel(e,v),v>=0?r=e.src.slice(l,v++):v=g+1):v=g+1,r||(r=e.src.slice(p,g)),i=e.env.references[l1(r)],!i)return e.pos=d,!1;o=i.href,s=i.title}if(!t){e.pos=p,e.posMax=g;const b=e.push("link_open","a",1),_=[["href",o]];b.attrs=_,s&&_.push(["title",s]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=v,e.posMax=h,!0}function qle(e,t){let n,r,a,i,o,s,l,u,d="";const h=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const g=e.pos+2,v=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(v<0)return!1;if(i=v+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!jr(n)&&n!==10));i++);if(i>=p)return!1;for(u=i,s=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),s.ok&&(d=e.md.normalizeLink(s.str),e.md.validateLink(d)?i=s.pos:d=""),u=i;i<p&&(n=e.src.charCodeAt(i),!(!jr(n)&&n!==10));i++);if(s=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&u!==i&&s.ok)for(l=s.str,i=s.pos;i<p&&(n=e.src.charCodeAt(i),!(!jr(n)&&n!==10));i++);else l="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=h,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(u=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?a=e.src.slice(u,i++):i=v+1):i=v+1,a||(a=e.src.slice(g,v)),o=e.env.references[l1(a)],!o)return e.pos=h,!1;d=o.href,l=o.title}if(!t){r=e.src.slice(g,v);const b=[];e.md.inline.parse(r,e.md,e.env,b);const _=e.push("image","img",0),x=[["src",d],["alt",""]];_.attrs=x,_.children=b,_.content=r,l&&x.push(["title",l])}return e.pos=i,e.posMax=p,!0}const Vle=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,Gle=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function Wle(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,a=e.posMax;for(;;){if(++n>=a)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(Gle.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}if(Vle.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const s=e.push("link_open","a",1);s.attrs=[["href",o]],s.markup="autolink",s.info="auto";const l=e.push("text","",0);l.content=e.md.normalizeLinkText(i);const u=e.push("link_close","a",-1);u.markup="autolink",u.info="auto"}return e.pos+=i.length+2,!0}return!1}function Kle(e){return/^<a[>\s]/i.test(e)}function Zle(e){return/^<\/a\s*>/i.test(e)}function Yle(e){const t=e|32;return t>=97&&t<=122}function Xle(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const a=e.src.charCodeAt(r+1);if(a!==33&&a!==63&&a!==47&&!Yle(a))return!1;const i=e.src.slice(r).match(kle);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],Kle(o.content)&&e.linkLevel++,Zle(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const Jle=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,Qle=/^&([a-z][a-z0-9]{1,31});/i;function ece(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(Jle);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),s=e.push("text_special","",0);s.content=Xk(o)?Wv(o):Wv(65533),s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(Qle);if(i){const o=$5(i[0]);if(o!==i[0]){if(!t){const s=e.push("text_special","",0);s.content=o,s.markup=i[0],s.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function OO(e){const t={},n=e.length;if(!n)return;let r=0,a=-2;const i=[];for(let o=0;o<n;o++){const s=e[o];if(i.push(0),(e[r].marker!==s.marker||a!==s.token-1)&&(r=o),a=s.token,s.length=s.length||0,!s.close)continue;t.hasOwnProperty(s.marker)||(t[s.marker]=[-1,-1,-1,-1,-1,-1]);const l=t[s.marker][(s.open?3:0)+s.length%3];let u=r-i[r]-1,d=u;for(;u>l;u-=i[u]+1){const h=e[u];if(h.marker===s.marker&&h.open&&h.end<0){let p=!1;if((h.close||s.open)&&(h.length+s.length)%3===0&&(h.length%3!==0||s.length%3!==0)&&(p=!0),!p){const g=u>0&&!e[u-1].open?i[u-1]+1:0;i[o]=o-u+g,i[u]=g,s.open=!1,h.end=o,h.close=!1,d=-1,a=-2;break}}}d!==-1&&(t[s.marker][(s.open?3:0)+(s.length||0)%3]=d)}}function tce(e){const t=e.tokens_meta,n=e.tokens_meta.length;OO(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&OO(t[r].delimiters)}function nce(e){let t,n,r=0;const a=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)a[t].nesting<0&&r--,a[t].level=r,a[t].nesting>0&&r++,a[t].type==="text"&&t+1<i&&a[t+1].type==="text"?a[t+1].content=a[t].content+a[t+1].content:(t!==n&&(a[n]=a[t]),n++);t!==n&&(a.length=n)}const gE=[["text",Dle],["linkify",Mle],["newline",Ple],["escape",Fle],["backticks",Lle],["strikethrough",G5.tokenize],["emphasis",W5.tokenize],["link",Hle],["image",qle],["autolink",Wle],["html_inline",Xle],["entity",ece]],yE=[["balance_pairs",tce],["strikethrough",G5.postProcess],["emphasis",W5.postProcess],["fragments_join",nce]];function jg(){this.ruler=new Mi;for(let e=0;e<gE.length;e++)this.ruler.push(gE[e][0],gE[e][1]);this.ruler2=new Mi;for(let e=0;e<yE.length;e++)this.ruler2.push(yE[e][0],yE[e][1])}jg.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,a=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<a){for(let s=0;s<r;s++)if(e.level++,o=n[s](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};jg.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,a=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<a){for(let s=0;s<n;s++)if(o=t[s](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};jg.prototype.parse=function(e,t,n,r){const a=new this.State(e,t,n,r);this.tokenize(a);const i=this.ruler2.getRules(""),o=i.length;for(let s=0;s<o;s++)i[s](a)};jg.prototype.State=Dg;function rce(e){const t={};e=e||{},t.src_Any=j5.source,t.src_Cc=M5.source,t.src_Z=F5.source,t.src_P=Zk.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function U2(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function u1(e){return Object.prototype.toString.call(e)}function ace(e){return u1(e)==="[object String]"}function ice(e){return u1(e)==="[object Object]"}function oce(e){return u1(e)==="[object RegExp]"}function DO(e){return u1(e)==="[object Function]"}function sce(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const K5={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function lce(e){return Object.keys(e||{}).reduce(function(t,n){return t||K5.hasOwnProperty(n)},!1)}const cce={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},uce="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",dce="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function fce(e){e.__index__=-1,e.__text_cache__=""}function hce(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function jO(){return function(e,t){t.normalize(e)}}function Kv(e){const t=e.re=rce(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(uce),n.push(t.src_xn),t.src_tlds=n.join("|");function r(s){return s.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const a=[];e.__compiled__={};function i(s,l){throw new Error('(LinkifyIt) Invalid schema "'+s+'": '+l)}Object.keys(e.__schemas__).forEach(function(s){const l=e.__schemas__[s];if(l===null)return;const u={validate:null,link:null};if(e.__compiled__[s]=u,ice(l)){oce(l.validate)?u.validate=hce(l.validate):DO(l.validate)?u.validate=l.validate:i(s,l),DO(l.normalize)?u.normalize=l.normalize:l.normalize?i(s,l):u.normalize=jO();return}if(ace(l)){a.push(s);return}i(s,l)}),a.forEach(function(s){e.__compiled__[e.__schemas__[s]]&&(e.__compiled__[s].validate=e.__compiled__[e.__schemas__[s]].validate,e.__compiled__[s].normalize=e.__compiled__[e.__schemas__[s]].normalize)}),e.__compiled__[""]={validate:null,normalize:jO()};const o=Object.keys(e.__compiled__).filter(function(s){return s.length>0&&e.__compiled__[s]}).map(sce).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),fce(e)}function pce(e,t){const n=e.__index__,r=e.__last_index__,a=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=a,this.text=a,this.url=a}function H2(e,t){const n=new pce(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function no(e,t){if(!(this instanceof no))return new no(e,t);t||lce(e)&&(t=e,e={}),this.__opts__=U2({},K5,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=U2({},cce,e),this.__compiled__={},this.__tlds__=dce,this.__tlds_replaced__=!1,this.re={},Kv(this)}no.prototype.add=function(t,n){return this.__schemas__[t]=n,Kv(this),this};no.prototype.set=function(t){return this.__opts__=U2(this.__opts__,t),this};no.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,a,i,o,s,l,u,d;if(this.re.schema_test.test(t)){for(l=this.re.schema_search,l.lastIndex=0;(n=l.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],l.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(u=t.search(this.re.host_fuzzy_test),u>=0&&(this.__index__<0||u<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(d=t.indexOf("@"),d>=0&&(a=t.match(this.re.email_fuzzy))!==null&&(o=a.index+a[1].length,s=a.index+a[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&s>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=s))),this.__index__>=0};no.prototype.pretest=function(t){return this.re.pretest.test(t)};no.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};no.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(H2(this,r)),r=this.__last_index__);let a=r?t.slice(r):t;for(;this.test(a);)n.push(H2(this,r)),a=a.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};no.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,H2(this,0)):null};no.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,a,i){return r!==i[a-1]}).reverse(),Kv(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Kv(this),this)};no.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};no.prototype.onCompile=function(){};const ih=2147483647,Ms=36,eT=1,I0=26,mce=38,gce=700,Z5=72,Y5=128,X5="-",yce=/^xn--/,bce=/[^\0-\x7F]/,vce=/[\x2E\u3002\uFF0E\uFF61]/g,wce={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},bE=Ms-eT,Ps=Math.floor,vE=String.fromCharCode;function $c(e){throw new RangeError(wce[e])}function _ce(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function J5(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(vce,".");const a=e.split("."),i=_ce(a,t).join(".");return r+i}function Q5(e){const t=[];let n=0;const r=e.length;for(;n<r;){const a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((a&1023)<<10)+(i&1023)+65536):(t.push(a),n--)}else t.push(a)}return t}const xce=e=>String.fromCodePoint(...e),Sce=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Ms},MO=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},eF=function(e,t,n){let r=0;for(e=n?Ps(e/gce):e>>1,e+=Ps(e/t);e>bE*I0>>1;r+=Ms)e=Ps(e/bE);return Ps(r+(bE+1)*e/(e+mce))},tF=function(e){const t=[],n=e.length;let r=0,a=Y5,i=Z5,o=e.lastIndexOf(X5);o<0&&(o=0);for(let s=0;s<o;++s)e.charCodeAt(s)>=128&&$c("not-basic"),t.push(e.charCodeAt(s));for(let s=o>0?o+1:0;s<n;){const l=r;for(let d=1,h=Ms;;h+=Ms){s>=n&&$c("invalid-input");const p=Sce(e.charCodeAt(s++));p>=Ms&&$c("invalid-input"),p>Ps((ih-r)/d)&&$c("overflow"),r+=p*d;const g=h<=i?eT:h>=i+I0?I0:h-i;if(p<g)break;const v=Ms-g;d>Ps(ih/v)&&$c("overflow"),d*=v}const u=t.length+1;i=eF(r-l,u,l==0),Ps(r/u)>ih-a&&$c("overflow"),a+=Ps(r/u),r%=u,t.splice(r++,0,a)}return String.fromCodePoint(...t)},nF=function(e){const t=[];e=Q5(e);const n=e.length;let r=Y5,a=0,i=Z5;for(const l of e)l<128&&t.push(vE(l));const o=t.length;let s=o;for(o&&t.push(X5);s<n;){let l=ih;for(const d of e)d>=r&&d<l&&(l=d);const u=s+1;l-r>Ps((ih-a)/u)&&$c("overflow"),a+=(l-r)*u,r=l;for(const d of e)if(d<r&&++a>ih&&$c("overflow"),d===r){let h=a;for(let p=Ms;;p+=Ms){const g=p<=i?eT:p>=i+I0?I0:p-i;if(h<g)break;const v=h-g,b=Ms-g;t.push(vE(MO(g+v%b,0))),h=Ps(v/b)}t.push(vE(MO(h,0))),i=eF(a,u,s===o),a=0,++s}++a,++r}return t.join("")},Ece=function(e){return J5(e,function(t){return yce.test(t)?tF(t.slice(4).toLowerCase()):t})},Cce=function(e){return J5(e,function(t){return bce.test(t)?"xn--"+nF(t):t})},rF={version:"2.3.1",ucs2:{decode:Q5,encode:xce},decode:tF,encode:nF,toASCII:Cce,toUnicode:Ece},kce={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},Tce={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},Ace={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},Nce={default:kce,zero:Tce,commonmark:Ace},Rce=/^(vbscript|javascript|file|data):/,Ice=/^data:image\/(gif|png|jpeg|webp);/;function Oce(e){const t=e.trim().toLowerCase();return Rce.test(t)?Ice.test(t):!0}const aF=["http:","https:","mailto:"];function Dce(e){const t=Kk(e,!0);if(t.hostname&&(!t.protocol||aF.indexOf(t.protocol)>=0))try{t.hostname=rF.toASCII(t.hostname)}catch{}return Og(Wk(t))}function jce(e){const t=Kk(e,!0);if(t.hostname&&(!t.protocol||aF.indexOf(t.protocol)>=0))try{t.hostname=rF.toUnicode(t.hostname)}catch{}return Ih(Wk(t),Ih.defaultChars+"%")}function Co(e,t){if(!(this instanceof Co))return new Co(e,t);t||Yk(e)||(t=e||{},e="default"),this.inline=new jg,this.block=new c1,this.core=new Jk,this.renderer=new np,this.linkify=new no,this.validateLink=Oce,this.normalizeLink=Dce,this.normalizeLinkText=jce,this.utils=Pse,this.helpers=s1({},Bse),this.options={},this.configure(e),t&&this.set(t)}Co.prototype.set=function(e){return s1(this.options,e),this};Co.prototype.configure=function(e){const t=this;if(Yk(e)){const n=e;if(e=Nce[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};Co.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};Co.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(a){n=n.concat(this[a].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(a){return n.indexOf(a)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};Co.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};Co.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};Co.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};Co.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};Co.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};const wE=new Co({html:!1,linkify:!0,breaks:!0});function iF(e){return N.useMemo(()=>{var n;if(!e)return[];try{const r=wE.parse(e,{}),a=[];let i="",o=0;for(;o<r.length;){const s=r[o];if(s.type==="fence"){i&&(a.push(i),i="");const l=((n=s.info)==null?void 0:n.split(" ")[0])||void 0;a.push({type:"code",lang:l,code:s.content}),o++}else{const l=[];for(;o<r.length&&r[o].type!=="fence";)l.push(r[o]),o++;l.length>0&&(i+=wE.renderer.render(l,wE.options,{}))}}return i&&a.push(i),a}catch(r){return console.error("Markdown parsing error:",r),[`<pre>${String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}</pre>`]}},[e])}const Mce=({toolCall:e})=>{const[t,n]=N.useState(!0),r=()=>n(i=>!i),a=N.useMemo(()=>{try{return JSON.stringify(e.args,null,2)}catch{return String(e.args)}},[e.args]);return y.jsxs("div",{className:"my-2 p-2 border border-amber-500/30 bg-amber-500/10 rounded-md text-xs",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsxs("span",{className:"font-semibold text-amber-700 dark:text-amber-300",children:["Tool Call: ",y.jsx("code",{className:"font-mono",children:e.toolName})]}),y.jsx(sr,{tooltipText:t?"Show Args":"Hide Args",onClick:r,"aria-label":t?"Show arguments":"Hide arguments",icon:t?y.jsx(Kl,{}):y.jsx(Cd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&y.jsx(rg,{lang:"json",code:a})]})},Pce=({toolResult:e})=>{const[t,n]=N.useState(!0),r=()=>n(o=>!o),a=N.useMemo(()=>{try{return typeof e.result=="object"&&e.result!==null&&e.result._isError===!0?`Error: ${e.result.error}`:JSON.stringify(e.result,null,2)}catch{return String(e.result)}},[e.result]),i=typeof e.result=="object"&&e.result!==null&&e.result._isError===!0;return y.jsxs("div",{className:Rt("my-2 p-2 border rounded-md text-xs",i?"border-destructive/30 bg-destructive/10":"border-green-500/30 bg-green-500/10"),children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsxs("span",{className:Rt("font-semibold",i?"text-destructive":"text-green-700 dark:text-green-300"),children:["Tool Result: ",y.jsx("code",{className:"font-mono",children:e.toolName})]}),y.jsx(sr,{tooltipText:t?"Show Result":"Hide Result",onClick:r,"aria-label":t?"Show result":"Hide result",icon:t?y.jsx(Kl,{}):y.jsx(Cd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!t&&y.jsx(rg,{lang:i?"text":"json",code:a})]})},Fce=({markdownContent:e})=>{const t=iF(e);return e!=null&&e.trim()?y.jsx("div",{children:t.map((n,r)=>{if(typeof n=="string")return y.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:n}},`html-${r}`);if(n.type==="code"){const a=n;return y.jsx(rg,{lang:a.lang,code:a.code},`code-${r}`)}return null})}):null},Lce=({response:e,toolCalls:t,toolResults:n,reasoning:r,isError:a,errorMessage:i,isFolded:o,toggleFold:s})=>{const[l,u]=N.useState(!0),d=N.useCallback(()=>u(b=>!b),[]),h=!!r,p=e&&(typeof e!="string"||e.trim().length>0),g=t&&t.length>0,v=n&&n.length>0;return o?y.jsxs("div",{className:"text-xs text-muted-foreground italic cursor-pointer hover:bg-muted/20 p-1 rounded",onClick:s,children:[h?"[Reasoning] ":"",g?`[${t==null?void 0:t.length} Tool Call(s)] `:"",p&&typeof e=="string"?`"${e.substring(0,80)}${e.length>80?"...":""}"`:g||v||h?"":"[No text response]"]}):y.jsxs(y.Fragment,{children:[a&&i&&y.jsxs("div",{className:"mb-2 rounded border border-destructive bg-destructive/10 p-2 text-xs text-destructive-foreground",children:[y.jsx("p",{className:"font-semibold",children:"Error:"}),y.jsx("p",{children:i})]}),h&&y.jsxs("div",{className:"my-2 p-2 border border-blue-500/30 bg-blue-500/10 rounded-md text-xs",children:[y.jsxs("div",{className:"flex items-center justify-between mb-1",children:[y.jsxs("span",{className:"font-semibold text-blue-700 dark:text-blue-300 flex items-center gap-1",children:[y.jsx(eD,{className:"h-3.5 w-3.5"})," Reasoning"]}),y.jsx(sr,{tooltipText:l?"Show Reasoning":"Hide Reasoning",onClick:d,"aria-label":l?"Show reasoning":"Hide reasoning",icon:l?y.jsx(Kl,{}):y.jsx(Cd,{}),iconClassName:"h-3 w-3",className:"h-5 w-5 text-muted-foreground"})]}),!l&&y.jsx("pre",{className:"whitespace-pre-wrap text-xs font-mono p-2 bg-background/30 rounded mt-1",children:r})]}),t==null?void 0:t.map((b,_)=>{try{const x=JSON.parse(b);return y.jsx(Mce,{toolCall:x},`call-${_}`)}catch(x){return console.error("Failed to parse tool call string:",x),y.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool call]"},`call-err-${_}`)}}),n==null?void 0:n.map((b,_)=>{try{const x=JSON.parse(b);return y.jsx(Pce,{toolResult:x},`res-${_}`)}catch(x){return console.error("Failed to parse tool result string:",x),y.jsx("div",{className:"text-xs text-destructive",children:"[Error displaying tool result]"},`res-err-${_}`)}}),y.jsx(Fce,{markdownContent:e}),!p&&!g&&!v&&!h&&y.jsx("div",{className:"text-muted-foreground italic",children:"No response content."})]})},oF=yt.memo(({interaction:e,onRegenerate:t,onDelete:n,onEdit:r,className:a})=>{var E,C,k,R,D,O,L,B;const[i,o]=N.useState(!1),{dbProviderConfigs:s,getAllAvailableModelDefsForProvider:l}=Bn(Sn(Y=>({dbProviderConfigs:Y.dbProviderConfigs,getAllAvailableModelDefsForProvider:Y.getAllAvailableModelDefsForProvider}))),u=N.useCallback(()=>o(Y=>!Y),[]),d=e.endedAt?D5(new Date(e.endedAt),{addSuffix:!0}):"Processing...",h=N.useMemo(()=>{var ee;const Y=(ee=e.metadata)==null?void 0:ee.modelId;if(!Y)return"Unknown Model";const{providerId:F,modelId:Z}=Zl(Y);if(!F||!Z)return Y;const q=s.find(ie=>ie.id===F),ne=(q==null?void 0:q.name)??F,re=l(F).find(ie=>ie.id===Z);return`${(re==null?void 0:re.name)??Z} (${ne})`},[(E=e.metadata)==null?void 0:E.modelId,s,l]),p=e.status==="COMPLETED"||e.status==="ERROR",g=e.status==="ERROR",v=e.response&&(typeof e.response!="string"||e.response.trim().length>0),b=((C=e.metadata)==null?void 0:C.toolCalls)&&e.metadata.toolCalls.length>0,_=((k=e.metadata)==null?void 0:k.toolResults)&&e.metadata.toolResults.length>0,x=!!((R=e.metadata)!=null&&R.reasoning),S=v||b||_||x;return y.jsxs("div",{className:Rt("group/card relative rounded-lg border bg-card p-4 shadow-sm transition-colors hover:bg-muted/50",g?"border-destructive/50 bg-destructive/5":"border-border",a),children:[e.prompt&&y.jsx(Gk,{turnData:e.prompt,timestamp:e.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50 relative group/assistant",children:[y.jsx(Koe,{displayModelName:h,timeAgo:d,responseContent:typeof e.response=="string"?e.response:null,isFolded:i,toggleFold:u,canFold:S}),y.jsx(Lce,{response:e.response,toolCalls:(D=e.metadata)==null?void 0:D.toolCalls,toolResults:(O=e.metadata)==null?void 0:O.toolResults,reasoning:(L=e.metadata)==null?void 0:L.reasoning,isError:g,errorMessage:(B=e.metadata)==null?void 0:B.error,isFolded:i,toggleFold:u})]}),p&&y.jsx(Zoe,{interactionId:e.id,onEdit:r,onRegenerate:t,onDelete:n})]})});oF.displayName="InteractionCard";const $ce=({markdownContent:e,isStreaming:t=!1,className:n})=>{const{enableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a}=Kr(Sn(s=>({enableStreamingMarkdown:s.enableStreamingMarkdown,enableStreamingCodeBlockParsing:s.enableStreamingCodeBlockParsing}))),i=iF(r?e:null),o=N.useMemo(()=>r?i.map((s,l)=>{if(typeof s=="string")return y.jsx("div",{className:"markdown-content",dangerouslySetInnerHTML:{__html:s}},`html-${l}`);if(s.type==="code"){const u=s,d=u.lang?`language-${u.lang}`:"language-plaintext";return a?y.jsx(rg,{lang:u.lang,code:u.code},`code-${l}`):y.jsxs("pre",{className:"code-block-container my-4 border border-border rounded-lg overflow-x-auto",children:[y.jsx("div",{className:"code-block-header flex items-center justify-between px-3 py-2 border-b border-border bg-muted/50",children:y.jsx("div",{className:"text-sm font-medium",children:u.lang?u.lang.toUpperCase():"CODE"})}),y.jsx("code",{className:Rt(d,"block p-4 font-mono text-sm leading-relaxed"),children:u.code})]},`pre-${l}`)}return null}):y.jsx("pre",{className:Rt("whitespace-pre-wrap text-sm",n),children:e}),[i,r,a,e,n]);return e!=null&&e.trim()?y.jsx("div",{className:Rt(n),children:o}):y.jsx("div",{className:Rt("text-muted-foreground italic",n),children:t?"Generating response...":"No response content."})},Bce=({onStop:e,className:t,size:n="icon",variant:r="ghost","aria-label":a="Stop Generation"})=>y.jsx(sr,{tooltipText:"Stop",onClick:e,"aria-label":a,icon:y.jsx(GH,{}),variant:r,size:n,className:t}),q2=yt.memo(({interactionId:e,onStop:t,className:n})=>{var u;const{interaction:r,bufferedContent:a}=or(Sn(d=>({interaction:d.interactions.find(p=>p.id===e),bufferedContent:d.activeStreamBuffers[e]??""}))),{dbProviderConfigs:i,getAllAvailableModelDefsForProvider:o}=Bn(Sn(d=>({dbProviderConfigs:d.dbProviderConfigs,getAllAvailableModelDefsForProvider:d.getAllAvailableModelDefsForProvider}))),s=N.useMemo(()=>{var x;const d=(x=r==null?void 0:r.metadata)==null?void 0:x.modelId;if(!d)return"Loading Model...";const{providerId:h,modelId:p}=Zl(d);if(!h||!p)return d;const g=i.find(S=>S.id===h),v=(g==null?void 0:g.name)??h,_=o(h).find(S=>S.id===p);return`${(_==null?void 0:_.name)??p} (${v})`},[(u=r==null?void 0:r.metadata)==null?void 0:u.modelId,i,o]);if(!r)return console.warn(`StreamingInteractionCard: Interaction data for ${e} not found yet.`),y.jsxs("div",{className:Rt("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-pulse",n),children:[y.jsx("div",{className:"h-8 bg-muted rounded w-3/4 mb-4"})," ",y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Assistant (Loading...)"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx("div",{className:"h-16 bg-muted rounded w-full"})," "]})]});const l=()=>{t&&t(e)};return y.jsxs("div",{className:Rt("group relative rounded-lg border border-primary/30 bg-card p-4 shadow-sm animate-fadeIn",n),children:[r.prompt&&y.jsx(Gk,{turnData:r.prompt,timestamp:r.startedAt}),y.jsxs("div",{className:"mt-3 pt-3 border-t border-border/50",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["Assistant (",s,")"]}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"Streaming..."})]}),y.jsx($ce,{markdownContent:a,isStreaming:!0})]}),t&&y.jsx("div",{className:"absolute bottom-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:y.jsx(Bce,{onStop:l,"aria-label":"Stop Generation"})})]})});q2.displayName="StreamingInteractionCard";var zce=N.createContext(void 0);function rp(e){const t=N.useContext(zce);return e||t||"ltr"}function O0(e,[t,n]){return Math.min(n,Math.max(t,e))}function Uce(e,t){return N.useReducer((n,r)=>t[n][r]??n,e)}var tT="ScrollArea",[sF,w_e]=Pi(tT),[Hce,No]=sF(tT),lF=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:a,scrollHideDelay:i=600,...o}=e,[s,l]=N.useState(null),[u,d]=N.useState(null),[h,p]=N.useState(null),[g,v]=N.useState(null),[b,_]=N.useState(null),[x,S]=N.useState(0),[E,C]=N.useState(0),[k,R]=N.useState(!1),[D,O]=N.useState(!1),L=kn(t,Y=>l(Y)),B=rp(a);return y.jsx(Hce,{scope:n,type:r,dir:B,scrollHideDelay:i,scrollArea:s,viewport:u,onViewportChange:d,content:h,onContentChange:p,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:k,onScrollbarXEnabledChange:R,scrollbarY:b,onScrollbarYChange:_,scrollbarYEnabled:D,onScrollbarYEnabledChange:O,onCornerWidthChange:S,onCornerHeightChange:C,children:y.jsx(tn.div,{dir:B,...o,ref:L,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":E+"px",...e.style}})})});lF.displayName=tT;var cF="ScrollAreaViewport",uF=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:a,...i}=e,o=No(cF,n),s=N.useRef(null),l=kn(t,s,o.onViewportChange);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),y.jsx(tn.div,{"data-radix-scroll-area-viewport":"",...i,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:y.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});uF.displayName=cF;var Xs="ScrollAreaScrollbar",dF=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=No(Xs,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,s=e.orientation==="horizontal";return N.useEffect(()=>(s?i(!0):o(!0),()=>{s?i(!1):o(!1)}),[s,i,o]),a.type==="hover"?y.jsx(qce,{...r,ref:t,forceMount:n}):a.type==="scroll"?y.jsx(Vce,{...r,ref:t,forceMount:n}):a.type==="auto"?y.jsx(fF,{...r,ref:t,forceMount:n}):a.type==="always"?y.jsx(nT,{...r,ref:t}):null});dF.displayName=Xs;var qce=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=No(Xs,e.__scopeScrollArea),[i,o]=N.useState(!1);return N.useEffect(()=>{const s=a.scrollArea;let l=0;if(s){const u=()=>{window.clearTimeout(l),o(!0)},d=()=>{l=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return s.addEventListener("pointerenter",u),s.addEventListener("pointerleave",d),()=>{window.clearTimeout(l),s.removeEventListener("pointerenter",u),s.removeEventListener("pointerleave",d)}}},[a.scrollArea,a.scrollHideDelay]),y.jsx(La,{present:n||i,children:y.jsx(fF,{"data-state":i?"visible":"hidden",...r,ref:t})})}),Vce=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=No(Xs,e.__scopeScrollArea),i=e.orientation==="horizontal",o=f1(()=>l("SCROLL_END"),100),[s,l]=Uce("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return N.useEffect(()=>{if(s==="idle"){const u=window.setTimeout(()=>l("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(u)}},[s,a.scrollHideDelay,l]),N.useEffect(()=>{const u=a.viewport,d=i?"scrollLeft":"scrollTop";if(u){let h=u[d];const p=()=>{const g=u[d];h!==g&&(l("SCROLL"),o()),h=g};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[a.viewport,i,l,o]),y.jsx(La,{present:n||s!=="hidden",children:y.jsx(nT,{"data-state":s==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:qt(e.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:qt(e.onPointerLeave,()=>l("POINTER_LEAVE"))})})}),fF=N.forwardRef((e,t)=>{const n=No(Xs,e.__scopeScrollArea),{forceMount:r,...a}=e,[i,o]=N.useState(!1),s=e.orientation==="horizontal",l=f1(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;o(s?u:d)}},10);return Dh(n.viewport,l),Dh(n.content,l),y.jsx(La,{present:r||i,children:y.jsx(nT,{"data-state":i?"visible":"hidden",...a,ref:t})})}),nT=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,a=No(Xs,e.__scopeScrollArea),i=N.useRef(null),o=N.useRef(0),[s,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=yF(s.viewport,s.content),d={...r,sizes:s,onSizesChange:l,hasThumb:u>0&&u<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:p=>o.current=p};function h(p,g){return Xce(p,o.current,s,g)}return n==="horizontal"?y.jsx(Gce,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollLeft,g=PO(p,s,a.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollLeft=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollLeft=h(p,a.dir))}}):n==="vertical"?y.jsx(Wce,{...d,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const p=a.viewport.scrollTop,g=PO(p,s);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:p=>{a.viewport&&(a.viewport.scrollTop=p)},onDragScroll:p=>{a.viewport&&(a.viewport.scrollTop=h(p))}}):null}),Gce=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=No(Xs,e.__scopeScrollArea),[o,s]=N.useState(),l=N.useRef(null),u=kn(t,l,i.onScrollbarXChange);return N.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),y.jsx(pF,{"data-orientation":"horizontal",...a,ref:u,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":d1(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollLeft+d.deltaX;e.onWheelScroll(p),vF(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:Yv(o.paddingLeft),paddingEnd:Yv(o.paddingRight)}})}})}),Wce=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...a}=e,i=No(Xs,e.__scopeScrollArea),[o,s]=N.useState(),l=N.useRef(null),u=kn(t,l,i.onScrollbarYChange);return N.useEffect(()=>{l.current&&s(getComputedStyle(l.current))},[l]),y.jsx(pF,{"data-orientation":"vertical",...a,ref:u,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":d1(n)+"px",...e.style},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(i.viewport){const p=i.viewport.scrollTop+d.deltaY;e.onWheelScroll(p),vF(p,h)&&d.preventDefault()}},onResize:()=>{l.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:Yv(o.paddingTop),paddingEnd:Yv(o.paddingBottom)}})}})}),[Kce,hF]=sF(Xs),pF=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:s,onThumbPositionChange:l,onDragScroll:u,onWheelScroll:d,onResize:h,...p}=e,g=No(Xs,n),[v,b]=N.useState(null),_=kn(t,L=>b(L)),x=N.useRef(null),S=N.useRef(""),E=g.viewport,C=r.content-r.viewport,k=Da(d),R=Da(l),D=f1(h,10);function O(L){if(x.current){const B=L.clientX-x.current.left,Y=L.clientY-x.current.top;u({x:B,y:Y})}}return N.useEffect(()=>{const L=B=>{const Y=B.target;(v==null?void 0:v.contains(Y))&&k(B,C)};return document.addEventListener("wheel",L,{passive:!1}),()=>document.removeEventListener("wheel",L,{passive:!1})},[E,v,C,k]),N.useEffect(R,[r,R]),Dh(v,D),Dh(g.content,D),y.jsx(Kce,{scope:n,scrollbar:v,hasThumb:a,onThumbChange:Da(i),onThumbPointerUp:Da(o),onThumbPositionChange:R,onThumbPointerDown:Da(s),children:y.jsx(tn.div,{...p,ref:_,style:{position:"absolute",...p.style},onPointerDown:qt(e.onPointerDown,L=>{L.button===0&&(L.target.setPointerCapture(L.pointerId),x.current=v.getBoundingClientRect(),S.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),O(L))}),onPointerMove:qt(e.onPointerMove,O),onPointerUp:qt(e.onPointerUp,L=>{const B=L.target;B.hasPointerCapture(L.pointerId)&&B.releasePointerCapture(L.pointerId),document.body.style.webkitUserSelect=S.current,g.viewport&&(g.viewport.style.scrollBehavior=""),x.current=null})})})}),Zv="ScrollAreaThumb",mF=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,a=hF(Zv,e.__scopeScrollArea);return y.jsx(La,{present:n||a.hasThumb,children:y.jsx(Zce,{ref:t,...r})})}),Zce=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...a}=e,i=No(Zv,n),o=hF(Zv,n),{onThumbPositionChange:s}=o,l=kn(t,h=>o.onThumbChange(h)),u=N.useRef(void 0),d=f1(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const h=i.viewport;if(h){const p=()=>{if(d(),!u.current){const g=Jce(h,s);u.current=g,s()}};return s(),h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[i.viewport,d,s]),y.jsx(tn.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:qt(e.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),v=h.clientX-g.left,b=h.clientY-g.top;o.onThumbPointerDown({x:v,y:b})}),onPointerUp:qt(e.onPointerUp,o.onThumbPointerUp)})});mF.displayName=Zv;var rT="ScrollAreaCorner",gF=N.forwardRef((e,t)=>{const n=No(rT,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?y.jsx(Yce,{...e,ref:t}):null});gF.displayName=rT;var Yce=N.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,a=No(rT,n),[i,o]=N.useState(0),[s,l]=N.useState(0),u=!!(i&&s);return Dh(a.scrollbarX,()=>{var h;const d=((h=a.scrollbarX)==null?void 0:h.offsetHeight)||0;a.onCornerHeightChange(d),l(d)}),Dh(a.scrollbarY,()=>{var h;const d=((h=a.scrollbarY)==null?void 0:h.offsetWidth)||0;a.onCornerWidthChange(d),o(d)}),u?y.jsx(tn.div,{...r,ref:t,style:{width:i,height:s,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Yv(e){return e?parseInt(e,10):0}function yF(e,t){const n=e/t;return isNaN(n)?0:n}function d1(e){const t=yF(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Xce(e,t,n,r="ltr"){const a=d1(n),i=a/2,o=t||i,s=a-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-s,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return bF([l,u],h)(e)}function PO(e,t,n="ltr"){const r=d1(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,s=i-r,l=n==="ltr"?[0,o]:[o*-1,0],u=O0(e,l);return bF([0,o],[0,s])(u)}function bF(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function vF(e,t){return e>0&&e<t}var Jce=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=n.left!==i.left,s=n.top!==i.top;(o||s)&&t(),n=i,r=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(r)};function f1(e,t){const n=Da(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function Dh(e,t){const n=Da(t);Wa(()=>{let r=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return a.observe(e),()=>{window.cancelAnimationFrame(r),a.unobserve(e)}}},[e,n])}var Qce=lF,eue=uF,tue=gF;function zd({className:e,children:t,...n}){return y.jsxs(Qce,{"data-slot":"scroll-area",className:Rt("relative",e),...n,children:[y.jsx(eue,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),y.jsx(nue,{}),y.jsx(tue,{})]})}function nue({className:e,orientation:t="vertical",...n}){return y.jsx(dF,{"data-slot":"scroll-area-scrollbar",orientation:t,className:Rt("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:y.jsx(mF,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function Qr({className:e,...t}){return y.jsx("div",{"data-slot":"skeleton",className:Rt("bg-accent animate-pulse rounded-md",e),...t})}const rue=({conversationId:e,interactions:t,status:n,className:r,onRegenerateInteraction:a,onEditInteraction:i,onStopInteraction:o})=>{const s=N.useRef(null),l=N.useRef(null),[u,d]=N.useState(!1),h=or(b=>b.streamingInteractionIds),p=N.useMemo(()=>{const b=[],_=new Set;return[...t].sort((S,E)=>S.index-E.index).forEach(S=>{if(_.has(S.id))return;const E=[S];_.add(S.id),b.push(E)}),b},[t]),g=(b="smooth")=>{l.current&&l.current.scrollTo({top:l.current.scrollHeight,behavior:b})};N.useEffect(()=>{if(l.current){const{scrollHeight:b,clientHeight:_,scrollTop:x}=l.current,S=b-_<=x+150,E=n==="streaming"&&h.length>0;(S||E)&&g(E?"smooth":"auto")}},[t,n,h]),N.useEffect(()=>{const b=l.current;if(!b)return;const _=()=>{const{scrollHeight:x,clientHeight:S,scrollTop:E}=b,C=E<x-S-S*.5;d(C)};return b.addEventListener("scroll",_,{passive:!0}),_(),()=>{b.removeEventListener("scroll",_)}},[]),N.useEffect(()=>{s.current&&(l.current=s.current.querySelector("[data-radix-scroll-area-viewport]"))},[]);const v=()=>n==="loading"?y.jsxs("div",{className:"space-y-4 p-4",children:[y.jsx(Qr,{className:"h-24 w-full"}),y.jsx(Qr,{className:"h-32 w-full"}),y.jsx(Qr,{className:"h-20 w-full"})]}):e?t.length===0&&n!=="streaming"?y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"No messages yet."})}):y.jsxs("div",{className:"space-y-4 p-4",children:[p.map(b=>{const _=b[0];return h.includes(_.id)?y.jsx(q2,{interactionId:_.id,onStop:o},`${_.id}-streaming`):y.jsx(oF,{interaction:_,onEdit:i,onRegenerate:a,onDelete:void 0},_.id)}),n==="streaming"&&h.filter(b=>!t.some(_=>_.id===b)).map(b=>y.jsx(q2,{interactionId:b,onStop:o},`${b}-streaming-new`))]}):y.jsx("div",{className:"flex h-full items-center justify-center",children:y.jsx("p",{className:"text-muted-foreground",children:"Select a conversation or start a new one."})});return y.jsxs("div",{className:Rt("flex-grow relative",r),children:[y.jsx(zd,{className:"h-full w-full",ref:s,children:v()}),u&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"outline",size:"icon",className:"absolute bottom-4 right-4 z-20 h-8 w-8 rounded-full shadow-md bg-background/80 backdrop-blur-sm hover:bg-muted",onClick:()=>g(),"aria-label":"Scroll to bottom",children:y.jsx(bU,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"left",children:"Scroll to Bottom"})]})})]})},Tm=({controls:e,panelId:t,renderMode:n="full",className:r})=>{const a=e.filter(i=>(i.panel??"main")===t&&(i.show?i.show():!0));return a.length===0?null:y.jsx("div",{className:Rt(r),children:a.map(i=>{const o=n==="icon"?i.iconRenderer:i.renderer;return y.jsx(yt.Fragment,{children:o?o():null},i.id)})})},aue=".litechat/conversations",wF="/synced_repos";async function iue(e,t,n){n(t.id,"syncing");const r=Zn(`${wF}/${t.id}`),a={username:t.username,password:t.password},i=t.branch||"main";try{let o=!1;try{await e.promises.stat(Vs(r,".git")),o=!0}catch(s){if(s.code==="ENOENT")o=!1;else throw s}o?(lt.info(`Pulling latest changes for "${t.name}"...`),await a1(r,i,a,{fsInstance:e}),lt.success(`Repository "${t.name}" synced successfully.`),n(t.id,"idle")):(lt.info(`Cloning repository "${t.name}"...`),await _5(r,t.remoteUrl,i,a,{fsInstance:e}),lt.success(`Repository "${t.name}" cloned successfully.`),n(t.id,"idle"))}catch(o){console.error(`Failed to initialize/sync repository ${t.name}:`,o),n(t.id,"error")}}async function oue(e,t,n,r,a,i,o){var h,p;r(t.id,"syncing");const s=Zn(`${wF}/${n.id}`),l=Vs(s,aue,`${t.id}.json`),u={username:n.username,password:n.password},d=n.branch||"main";try{try{await e.promises.stat(Vs(s,".git"))}catch(x){if(x.code==="ENOENT"){lt.error(`Repository "${n.name}" not found locally. Please clone/sync it from Settings first.`),r(t.id,"error","Repo not cloned");return}throw x}lt.info(`Pulling latest changes for "${n.name}"...`),await a1(s,d,u,{fsInstance:e});let g=null,v=null;try{const x=await Bd(l,{fsInstance:e}),S=new TextDecoder().decode(x);g=JSON.parse(S),v=(h=g==null?void 0:g.conversation)!=null&&h.updatedAt?new Date(g.conversation.updatedAt).getTime():null,isNaN(v??NaN)&&(v=null)}catch(x){x.code==="ENOENT"?console.log(`Conversation file ${l} not found in repo. Will push local version.`):(console.error(`Failed to read or parse remote conversation file: ${x.message}`),lt.warning(`Could not read remote version of conversation: ${x.message}`))}const b=t.updatedAt.getTime(),_=((p=t.lastSyncedAt)==null?void 0:p.getTime())??0;if(!g||b>(v??0)||b>_&&b>=(v??0)){lt.info("Local changes detected. Pushing to remote...");const x=await Wt.loadInteractionsForConversation(t.id),{lastSyncedAt:S,...E}=t,C=JSON.stringify({conversation:E,interactions:x},null,2);await i1(l,C,{fsInstance:e}),await Uk(s,`Sync conversation: ${t.title} (${t.id})`,{fsInstance:e}),await Hk(s,d,u,{fsInstance:e}),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle"),lt.success("Conversation synced successfully (pushed).")}else if(v&&v>b){lt.info("Remote changes detected. Updating local conversation...");const x={...g.conversation,createdAt:new Date(g.conversation.createdAt),updatedAt:new Date(g.conversation.updatedAt),lastSyncedAt:new Date};await Wt.saveConversation(x),await Wt.deleteInteractionsForConversation(t.id);const S=g.interactions.map(E=>Wt.saveInteraction({...E,conversationId:t.id,startedAt:E.startedAt?new Date(E.startedAt):null,endedAt:E.endedAt?new Date(E.endedAt):null}));await Promise.all(S),i()===t.id&&o()==="conversation"&&await or.getState().loadInteractions(t.id),r(t.id,"idle"),lt.success("Conversation synced successfully (pulled).")}else lt.info("Conversation already up-to-date."),await a(t.id,{lastSyncedAt:new Date}),r(t.id,"idle")}catch(g){console.error(`Sync failed for conversation ${t.id}:`,g),r(t.id,"error",g.message)}}const Go=es(ts((e,t)=>({nodes:{},childrenMap:{"":[]},rootId:null,currentParentId:null,selectedFileIds:new Set,loading:!1,operationLoading:!1,error:null,fs:null,enableVfs:!0,vfsKey:null,configuredVfsKey:null,initializingKey:null,_setLoading:n=>{e(r=>{r.loading=n,n&&(r.error=null)})},_setOperationLoading:n=>{e(r=>{r.operationLoading=n})},_setError:n=>{e(r=>{r.error=n,r.loading=!1,r.operationLoading=!1,r.initializingKey=null,n&&lt.error(`VFS Error: ${n}`)})},_addNodes:n=>{e(r=>{const a={};n.forEach(i=>{r.nodes[i.id]=i;const o=i.parentId??r.rootId??"";a[o]||(a[o]=r.childrenMap[o]?[...r.childrenMap[o]]:[]),a[o].includes(i.id)||a[o].push(i.id)});for(const i in a)(!r.childrenMap[i]||JSON.stringify(r.childrenMap[i].sort())!==JSON.stringify(a[i].sort()))&&(r.childrenMap[i]=a[i])})},_updateNode:(n,r)=>{e(a=>{a.nodes[n]&&Object.assign(a.nodes[n],r)})},_removeNodes:n=>{e(r=>{n.forEach(a=>{const i=r.nodes[a];if(i){const o=i.parentId??r.rootId??"";if(r.childrenMap[o]&&(r.childrenMap[o]=r.childrenMap[o].filter(s=>s!==a)),delete r.nodes[a],r.selectedFileIds.delete(a),i.type==="folder"){const s=Object.values(r.nodes).filter(l=>l.parentId===a).map(l=>l.id);s.length>0&&t()._removeNodes(s),delete r.childrenMap[a]}}})})},_setFsInstance:n=>{e({fs:n})},_setEnableVfs:n=>{console.log(`[VfsStore] Setting global enableVfs to: ${n}`),e({enableVfs:n}),n?!t().vfsKey&&!t().configuredVfsKey&&console.log("[VfsStore] VFS globally enabled, waiting for vfsKey to be set."):(e({fs:null,configuredVfsKey:null,vfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,initializingKey:null}),Ct.emit(xt.VFS_CONTEXT_CHANGED,{vfsKey:null}))},_setConfiguredVfsKey:n=>{e({configuredVfsKey:n}),Ct.emit(xt.VFS_CONTEXT_CHANGED,{vfsKey:n})},setVfsKey:n=>{const r=t().vfsKey,a=t().configuredVfsKey;if(n===r){console.log(`[VfsStore] setVfsKey: Key ${n} is already desired.`),n&&n!==a&&!t().initializingKey&&(console.log(`[VfsStore] setVfsKey: Re-triggering initialization for desired key ${n} as it's not configured.`),t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during re-initialization trigger for ${n}:`,i)}));return}console.log(`[VfsStore] setVfsKey: Changing desired key from ${r} to ${n}. Configured: ${a}`),e({vfsKey:n}),e({fs:null,configuredVfsKey:null,rootId:null,currentParentId:null,nodes:{},childrenMap:{"":[]},error:null,loading:!1,operationLoading:!1,selectedFileIds:new Set,initializingKey:null}),Ct.emit(xt.VFS_CONTEXT_CHANGED,{vfsKey:null}),n!==null?t().initializeVFS(n).catch(i=>{console.error(`[VfsStore] Error during initialization trigger for ${n}:`,i)}):console.log("[VfsStore] setVfsKey: Desired key is null. State cleared.")},initializeVFS:async(n,r)=>{if(!n)throw console.warn("[VfsStore] initializeVFS called without a valid vfsKey."),new Error("VFS key cannot be empty.");const a=(r==null?void 0:r.force)===!0;if(!a){if(t().vfsKey!==n){const d=`UI Initialization aborted for "${n}". Desired key is now "${t().vfsKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().initializingKey!==null){const d=`UI Initialization skipped for "${n}". Already initializing key "${t().initializingKey}".`;throw console.warn(`[VfsStore] ${d}`),new Error(d)}if(t().configuredVfsKey===n&&t().fs)return console.log(`[VfsStore] UI Initialization skipped for key "${n}" (already configured).`),e({loading:!1}),t().fs}const{_setLoading:i,_setError:o,_addNodes:s,_setFsInstance:l,_setConfiguredVfsKey:u}=t();console.log(`[VfsStore] Initializing VFS with key: ${n} (Forced: ${a})`),e({initializingKey:n}),a||(i(!0),o(null));try{const d=await Nie(n);if(!d)throw new Error("Filesystem backend initialization failed.");if(!a&&t().vfsKey!==n){const g=`UI Initialization for key "${n}" completed, but desired key changed to "${t().vfsKey}". Discarding result.`;throw console.warn(`[VfsStore] ${g}`),e({initializingKey:null,loading:!1}),new Error(g)}if(a)return console.log(`[VfsStore] Forced initialization complete for key: ${n}. Returning instance.`),e({initializingKey:null}),d;l(d),u(n),console.log(`[VfsStore] UI VFS instance configured for key: ${n}`);const h="vfs-root";let p=t().nodes[h];try{await d.promises.stat("/"),console.log("[VfsStore] Root directory '/' exists.")}catch(g){if(g.code==="ENOENT")console.log("[VfsStore] Root directory '/' not found, will be created implicitly.");else throw g}if(!p||p.path!=="/"){const g=Date.now();p={id:h,parentId:null,name:"",path:"/",type:"folder",createdAt:g,lastModified:g},s([p]),console.log("[VfsStore] Root node added/updated in state.")}return e(g=>{g.rootId=p.id,g.currentParentId=p.id}),console.log(`[VfsStore] Set rootId and currentParentId to: ${p.id}`),await t().fetchNodes(p.id),d}catch(d){const h=`Failed to initialize VFS (${n}): ${d instanceof Error?d.message:String(d)}`;throw console.error(`[VfsStore] ${h}`,d),t().initializingKey===n&&(o(h),a||(l(null),u(null))),new Error(h)}finally{t().initializingKey===n&&(e({initializingKey:null}),a||e({loading:!1}))}},fetchNodes:async(n=null)=>{const{_setLoading:r,_setError:a,_addNodes:i,fs:o,nodes:s,rootId:l,configuredVfsKey:u,vfsKey:d,initializingKey:h}=t();if(!o||u!==d||h){console.warn(`[VfsStore] fetchNodes skipped. Ready: ${!!o}, Match: ${u===d}, Init: ${h}`);return}r(!0);try{const p=n?s[n]:s[l||""],g=p?p.path:"/";console.log(`[VfsStore] Fetching nodes for path: ${g} (Key: ${u})`);const v=await qk(g,{fsInstance:o});console.log(`[VfsStore] Fetched ${v.length} entries for ${g}`);const b=n??l??"",_=new Set(v.map(k=>k.path)),E=(t().childrenMap[b]||[]).map(k=>t().nodes[k]).filter(Boolean).filter(k=>!_.has(k.path)).map(k=>k.id);E.length>0&&(console.log(`[VfsStore] Removing ${E.length} nodes.`),t()._removeNodes(E));const C=v.map(k=>{const R=Object.values(t().nodes).find(O=>O.path===k.path),D=Date.now();return{id:(R==null?void 0:R.id)||Eo(),parentId:n,name:k.name,path:k.path,type:k.isDirectory?"folder":"file",size:k.size,createdAt:(R==null?void 0:R.createdAt)??D,lastModified:k.lastModified.getTime(),mimeType:k.isDirectory?void 0:k.mimeType}});C.length>0&&(console.log(`[VfsStore] Adding/Updating ${C.length} nodes.`),i(C)),e(k=>{const R=C.map(D=>D.id);(!k.childrenMap[b]||JSON.stringify(k.childrenMap[b].sort())!==JSON.stringify(R.sort()))&&(k.childrenMap[b]=R,console.log(`[VfsStore] Updated childrenMap for parent: ${b}`))})}catch(p){console.error("Failed to fetch VFS nodes:",p),a("Failed to load directory contents.")}finally{r(!1)}},findNodeByPath:n=>{const r=Zn(n);if(t().vfsKey===t().configuredVfsKey){if(r==="/"){const a=t().rootId;return a?t().nodes[a]:void 0}return Object.values(t().nodes).find(a=>a.path===r)}},setCurrentPath:async n=>{const{findNodeByPath:r,fetchNodes:a,rootId:i,fs:o}=t();if(!o||t().vfsKey!==t().configuredVfsKey)return;const s=Zn(n),l=r(s);l&&l.type==="folder"?(e(u=>{u.currentParentId=l.id}),t().childrenMap[l.id]||await a(l.id)):s==="/"&&i?(e(u=>{u.currentParentId=i}),t().childrenMap[i]||await a(i)):console.warn(`Path not found or not a directory: ${n}`)},createDirectory:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:l,_addNodes:u,configuredVfsKey:d,vfsKey:h}=t();if(!o||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Directory name cannot be empty.");return}a(!0);try{const p=n?s[n]:s[l||""],g=p?p.path:"/",v=b0(g,r.trim());try{throw await o.promises.stat(v),new Error(`"${r.trim()}" already exists.`)}catch(S){if(S.code!=="ENOENT")throw S}await E5(v,{fsInstance:o});const b=Date.now(),x={id:Eo(),parentId:n,name:r.trim(),path:v,type:"folder",createdAt:b,lastModified:b};u([x])}catch(p){console.error("Failed to create directory:",p),i(p.message||"Failed to create directory.")}finally{a(!1)}},uploadFiles:async(n,r)=>{const{_setOperationLoading:a,_setError:i,fs:o,nodes:s,rootId:l,configuredVfsKey:u,vfsKey:d}=t();if(!o||u!==d){i("Filesystem not ready.");return}a(!0);try{const h=n?s[n]:s[l||""],p=h?h.path:"/";await C5(Array.from(r),p,{fsInstance:o}),await t().fetchNodes(n)}catch(h){console.error("Failed to upload files:",h),i("Failed to upload one or more files.")}finally{a(!1)}},deleteNodes:async n=>{const{_setOperationLoading:r,_setError:a,_removeNodes:i,fs:o,configuredVfsKey:s,vfsKey:l}=t();if(!o||s!==l){a("Filesystem not ready.");return}r(!0);try{const u=n.map(d=>t().nodes[d]).filter(Boolean);for(const d of u)await Vk(d.path,d.type==="folder",{fsInstance:o});i(n)}catch(u){console.error("Failed to delete nodes:",u),a("Failed to delete one or more items."),await t().fetchNodes(t().currentParentId)}finally{r(!1)}},renameNode:async(n,r)=>{const{_setOperationLoading:a,_setError:i,_updateNode:o,nodes:s,fs:l,rootId:u,configuredVfsKey:d,vfsKey:h}=t();if(!l||d!==h){i("Filesystem not ready.");return}if(!r.trim()){i("Name cannot be empty.");return}const p=s[n];if(!p){i("Item not found.");return}if(p.name!==r.trim()){a(!0);try{const g=p.parentId?s[p.parentId]:s[u||""],v=g?g.path:"/",b=b0(v,r.trim());try{throw await l.promises.stat(b),new Error(`"${r.trim()}" already exists.`)}catch(x){if(x.code!=="ENOENT")throw x}await k5(p.path,b,{fsInstance:l});const _={name:r.trim(),path:b,lastModified:Date.now()};o(n,_)}catch(g){console.error("Failed to rename item:",g),i(g.message||"Failed to rename item.")}finally{a(!1)}}},downloadFile:async n=>{const{nodes:r,fs:a,_setError:i,configuredVfsKey:o,vfsKey:s}=t();if(!a||o!==s)return i("Filesystem not ready."),null;const l=r[n];if(!l||l.type!=="file")return i("File not found."),null;try{const u=await Bd(l.path,{fsInstance:a}),d=l.mimeType||"application/octet-stream",h=new Blob([u],{type:d});return{name:l.name,blob:h}}catch(u){return console.error("Failed to download file:",u),i("Failed to retrieve file content."),null}},selectFile:n=>{e(r=>{const a=r.nodes[n];a&&a.type==="file"&&r.selectedFileIds.add(n)})},deselectFile:n=>{e(r=>{r.selectedFileIds.delete(n)})},clearSelection:()=>{e(n=>{n.selectedFileIds.clear()})}}))),yi=es(ts((e,t)=>({projects:[],isLoading:!1,error:null,loadProjects:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadProjects();e({projects:n,isLoading:!1})}catch(n){console.error("ProjectStore: Error loading projects",n),e({error:"Failed to load projects",isLoading:!1})}},addProject:async n=>{const r=Eo(),a=new Date,i=n.parentId??null,o=i?t().getProjectById(i):null,s=o?o.path:"/",l=b0(s,n.name),u={id:r,createdAt:a,updatedAt:a,name:n.name,parentId:i,path:l,systemPrompt:n.systemPrompt??null,modelId:n.modelId??null,temperature:n.temperature??null,maxTokens:n.maxTokens??null,topP:n.topP??null,topK:n.topK??null,presencePenalty:n.presencePenalty??null,frequencyPenalty:n.frequencyPenalty??null,metadata:n.metadata??{}};e(d=>{d.projects.push(u),d.projects.sort((h,p)=>p.updatedAt.getTime()-h.updatedAt.getTime())});try{const d=t().getProjectById(r);if(d)await Wt.saveProject(d),await Go.getState().initializeVFS(r);else throw new Error("Failed to retrieve newly added project state");return r}catch(d){throw console.error("ProjectStore: Error adding project",d),e(h=>({error:"Failed to save new project",projects:h.projects.filter(p=>p.id!==r)})),d}},updateProject:async(n,r)=>{const a=t().getProjectById(n);if(!a){console.warn(`ProjectStore: Project ${n} not found for update.`);return}let i=a.path;if(r.name&&r.name!==a.name){const s=dg(a.path);i=b0(s,r.name)}const o={...a,...r,path:i,updatedAt:new Date};e(s=>{const l=s.projects.findIndex(u=>u.id===n);l!==-1&&(s.projects[l]=o,s.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()))});try{await Wt.saveProject(o)}catch(s){throw console.error("ProjectStore: Error updating project",s),e(l=>{const u=l.projects.findIndex(d=>d.id===n);u!==-1&&(l.projects[u]=a,l.projects.sort((d,h)=>h.updatedAt.getTime()-d.updatedAt.getTime())),l.error="Failed to save project update"}),s}},deleteProject:async n=>{const r=t().getProjectById(n);if(!r)return;const a=t().projects.filter(o=>o.parentId===n).map(o=>o.id),i=[n,...a];e(o=>({projects:o.projects.filter(s=>!i.includes(s.id))})),vn.getState()._unlinkConversationsFromProjects(i);try{await Wt.deleteProject(n),lt.success(`Project "${r.name}" deleted.`)}catch(o){throw console.error("ProjectStore: Error deleting project",o),e(s=>{const l=t().projects.filter(u=>i.includes(u.id)).concat(r);s.projects.push(...l),s.projects.sort((u,d)=>d.updatedAt.getTime()-u.updatedAt.getTime()),s.error="Failed to delete project"}),o}},getProjectById:n=>{if(n)return t().projects.find(r=>r.id===n)},getProjectHierarchy:n=>{const r=[];let a=n;for(;a;){const i=t().getProjectById(a);if(i)r.unshift({id:i.id,name:i.name}),a=i.parentId;else break}return r},getEffectiveProjectSettings:n=>{const r=Kr.getState(),a=Bn.getState().selectedModelId;let i=n,o={systemPrompt:null,modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null};for(;i;){const s=t().getProjectById(i);if(s)o.systemPrompt===null&&s.systemPrompt!==null&&s.systemPrompt!==void 0&&(o.systemPrompt=s.systemPrompt),o.modelId===null&&s.modelId!==null&&s.modelId!==void 0&&(o.modelId=s.modelId),o.temperature===null&&s.temperature!==null&&s.temperature!==void 0&&(o.temperature=s.temperature),o.maxTokens===null&&s.maxTokens!==null&&s.maxTokens!==void 0&&(o.maxTokens=s.maxTokens),o.topP===null&&s.topP!==null&&s.topP!==void 0&&(o.topP=s.topP),o.topK===null&&s.topK!==null&&s.topK!==void 0&&(o.topK=s.topK),o.presencePenalty===null&&s.presencePenalty!==null&&s.presencePenalty!==void 0&&(o.presencePenalty=s.presencePenalty),o.frequencyPenalty===null&&s.frequencyPenalty!==null&&s.frequencyPenalty!==void 0&&(o.frequencyPenalty=s.frequencyPenalty),i=s.parentId;else break}return o.systemPrompt===null&&(o.systemPrompt=r.globalSystemPrompt),o.modelId===null&&(o.modelId=a),o.temperature===null&&(o.temperature=r.temperature),o.maxTokens===null&&(o.maxTokens=r.maxTokens),o.topP===null&&(o.topP=r.topP),o.topK===null&&(o.topK=r.topK),o.presencePenalty===null&&(o.presencePenalty=r.presencePenalty),o.frequencyPenalty===null&&(o.frequencyPenalty=r.frequencyPenalty),o}}))),_E=(e,t)=>{const n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)},sue=(e,t)=>{let n=`# ${e.title}

`;return n+=`*Conversation ID: ${e.id}*
`,n+=`*Created: ${yO(e.createdAt,"yyyy-MM-dd HH:mm:ss")}*
`,n+=`*Last Updated: ${yO(e.updatedAt,"yyyy-MM-dd HH:mm:ss")}*
`,e.projectId&&(n+=`*Project ID: ${e.projectId}*
`),n+=`
---

`,t.filter(r=>r.type==="message.user_assistant").sort((r,a)=>r.index-a.index).forEach(r=>{var a,i,o,s,l,u,d,h;((a=r.prompt)!=null&&a.content||(s=(o=(i=r.prompt)==null?void 0:i.metadata)==null?void 0:o.attachedFiles)!=null&&s.length)&&(n+=`## User (Index: ${r.index})

`,(l=r.prompt.metadata)!=null&&l.attachedFiles&&r.prompt.metadata.attachedFiles.length>0&&(n+=`**Attached Files:**
`,r.prompt.metadata.attachedFiles.forEach(p=>{n+=`- ${p.name} (${p.type}, ${jv(p.size)}) ${p.source==="vfs"?`(VFS: ${p.path})`:"(Direct Upload)"}
`}),n+=`
`),r.prompt.content&&(n+=`${r.prompt.content}

`)),r.response&&(n+=`## Assistant (Index: ${r.index})

`,(u=r.metadata)!=null&&u.modelId&&(n+=`*Model: ${r.metadata.modelId}*

`),typeof r.response=="string"?n+=`${r.response}

`:(n+="```json\n",n+=`${JSON.stringify(r.response,null,2)}
`,n+="```\n\n"),((d=r.metadata)!=null&&d.promptTokens||(h=r.metadata)!=null&&h.completionTokens)&&(n+=`*Tokens: ${r.metadata.promptTokens??"?"} (prompt) / ${r.metadata.completionTokens??"?"} (completion)*

`)),n+=`---

`}),n};class Nb{static async importConversation(t,n,r){try{const a=await t.text(),i=JSON.parse(a);if(!i||typeof i!="object"||!i.conversation||!Array.isArray(i.interactions))throw new Error("Invalid import file format. Expected { conversation: {}, interactions: [] }.");const o=i.conversation,s=i.interactions;if(!o.id||!o.title||!o.createdAt||!o.updatedAt)throw new Error("Invalid conversation data in import file.");const l=await n({title:o.title||"Imported Chat",metadata:o.metadata,projectId:null,syncRepoId:null,lastSyncedAt:null}),u=s.map(d=>Wt.saveInteraction({...d,conversationId:l,id:Eo()}));await Promise.all(u),await r(l,"conversation"),lt.success("Conversation imported successfully.")}catch(a){throw console.error("ImportExportService: Error importing conversation",a),lt.error(`Import failed: ${a instanceof Error?a.message:String(a)}`),a}}static async exportConversation(t,n){try{const r=vn.getState().getConversationById(t);if(!r)throw new Error("Conversation not found.");const a=await Wt.loadInteractionsForConversation(t);let i,o;const s=r.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"conversation";if(n==="json"){const u=JSON.stringify({conversation:r,interactions:a},null,2);i=new Blob([u],{type:"application/json"}),o=`litechat_conversation_${s}_${t.substring(0,6)}.json`}else if(n==="md"){const l=sue(r,a);i=new Blob([l],{type:"text/markdown"}),o=`litechat_conversation_${s}_${t.substring(0,6)}.md`}else throw new Error("Invalid export format specified.");_E(i,o),lt.success(`Conversation exported as ${n.toUpperCase()}.`)}catch(r){throw console.error("ImportExportService: Error exporting conversation",r),lt.error(`Export failed: ${r instanceof Error?r.message:String(r)}`),r}}static async exportProject(t){try{const{projects:n,getProjectById:r}=yi.getState(),{conversations:a}=vn.getState(),i=r(t);if(!i)throw new Error("Project not found.");const o=async p=>{const g=n.find(x=>x.id===p);if(!g)throw new Error(`Project ${p} not found in state.`);const v=n.filter(x=>x.parentId===p),b=a.filter(x=>x.projectId===p),_=[];for(const x of v)_.push(await o(x.id));for(const x of b){const S=await Wt.loadInteractionsForConversation(x.id);_.push({conversation:x,interactions:S})}return{project:g,children:_}},s=await o(t),l=JSON.stringify(s,null,2),u=new Blob([l],{type:"application/json"}),h=`litechat_project_${i.name.replace(/[^a-z0-9]/gi,"_").toLowerCase()||"project"}_${t.substring(0,6)}.json`;_E(u,h),lt.success(`Project "${i.name}" exported.`)}catch(n){throw console.error("ImportExportService: Error exporting project",n),lt.error(`Project export failed: ${n instanceof Error?n.message:String(n)}`),n}}static async exportAllConversations(){try{const t=vn.getState().conversations,n=[];for(const o of t){const s=await Wt.loadInteractionsForConversation(o.id);n.push({conversation:o,interactions:s})}const r=JSON.stringify(n,null,2),a=new Blob([r],{type:"application/json"}),i=`litechat_all_conversations_export_${new Date().toISOString().split("T")[0]}.json`;_E(a,i),lt.success("All conversations exported.")}catch(t){throw console.error("ImportExportService: Error exporting conversations",t),lt.error(`Export failed: ${t instanceof Error?t.message:String(t)}`),t}}}const FO="sync_repos",lue="/synced_repos",vn=es(ts((e,t)=>({conversations:[],selectedItemId:null,selectedItemType:null,syncRepos:[],conversationSyncStatus:{},repoInitializationStatus:{},isLoading:!1,error:null,_ensureSyncVfsReady:async()=>{console.log("[ConversationStore] Ensuring Sync VFS is ready...");try{const n=await Go.getState().initializeVFS(FO,{force:!0});return console.log(`[ConversationStore] Sync VFS ready for key ${FO}.`),n}catch(n){throw console.error("[ConversationStore] Failed to ensure Sync VFS:",n),lt.error(`Filesystem error for sync: ${n instanceof Error?n.message:String(n)}`),n}},loadSidebarItems:async()=>{e({isLoading:!0,error:null});try{await yi.getState().loadProjects();const[n,r]=await Promise.all([Wt.loadConversations(),Wt.loadSyncRepos()]),a={};n.forEach(i=>{if(i.syncRepoId){const o=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,s=i.updatedAt instanceof Date?i.updatedAt.getTime():null;o?s&&s>o?a[i.id]="needs-sync":a[i.id]="idle":a[i.id]="needs-sync"}else a[i.id]="idle"}),e({conversations:n,syncRepos:r,conversationSyncStatus:a,repoInitializationStatus:{},isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sidebar items",n),e({error:"Failed load sidebar items",isLoading:!1})}},addConversation:async n=>{const r=Eo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,title:n.title,projectId:n.projectId??null,metadata:{...n.metadata??{},enabledTools:[],toolMaxStepsOverride:null},syncRepoId:n.syncRepoId??null,lastSyncedAt:n.lastSyncedAt??null};e(o=>{o.conversations.some(s=>s.id===i.id)||(o.conversations.unshift(i),o.conversationSyncStatus[r]=i.syncRepoId?"needs-sync":"idle")});try{const o=t().getConversationById(r);if(o)await Wt.saveConversation(o),Ct.emit(xt.CONVERSATION_ADDED,{conversation:o});else throw new Error("Failed to retrieve newly added conversation state");return r}catch(o){throw console.error("ConversationStore: Error adding conversation",o),e(s=>({error:"Failed to save new conversation",conversations:s.conversations.filter(l=>l.id!==r),conversationSyncStatus:Object.fromEntries(Object.entries(s.conversationSyncStatus).filter(([l])=>l!==r))})),o}},updateConversation:async(n,r)=>{const a=t().getConversationById(n);if(!a){console.warn(`ConversationStore: Conversation ${n} not found for update.`);return}e(o=>{const s=o.conversations.findIndex(l=>l.id===n);if(s!==-1){const l=o.conversations[s].metadata??{},u=r.metadata??{},d={...l,...u};Object.assign(o.conversations[s],{...r,metadata:d,updatedAt:new Date});const h=["title","metadata","projectId"].some(v=>v in r),p=o.conversations[s].lastSyncedAt instanceof Date?o.conversations[s].lastSyncedAt.getTime():null,g=o.conversations[s].updatedAt.getTime();"syncRepoId"in r?o.conversationSyncStatus[n]=r.syncRepoId?"needs-sync":"idle":h&&o.conversations[s].syncRepoId&&o.conversationSyncStatus[n]==="idle"&&(!p||g>p)&&(o.conversationSyncStatus[n]="needs-sync")}});const i=t().getConversationById(n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveConversation(o),Ct.emit(xt.CONVERSATION_UPDATED,{conversationId:n,updates:r})}catch(o){throw console.error("ConversationStore: Error updating conversation",o),e(s=>{const l=s.conversations.findIndex(u=>u.id===n);if(l!==-1){s.conversations[l]=a;const u=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,d=a.updatedAt.getTime();s.conversationSyncStatus[n]=a.syncRepoId&&u&&d<=u?"idle":a.syncRepoId?"needs-sync":"idle"}s.error="Failed to save conversation update"}),o}else console.error("ConversationStore: Failed to retrieve updated conversation state after update."),e(o=>{const s=o.conversations.findIndex(l=>l.id===n);if(s!==-1){o.conversations[s]=a;const l=a.lastSyncedAt instanceof Date?a.lastSyncedAt.getTime():null,u=a.updatedAt.getTime();o.conversationSyncStatus[n]=a.syncRepoId&&l&&u<=l?"idle":a.syncRepoId?"needs-sync":"idle"}o.error="Failed to save conversation update (state error)"})},deleteConversation:async n=>{const r=t().selectedItemId,a=t().selectedItemType,i=t().conversations.find(o=>o.id===n);if(i){e(o=>({conversations:o.conversations.filter(s=>s.id!==n),selectedItemId:r===n&&a==="conversation"?null:r,selectedItemType:r===n&&a==="conversation"?null:a,conversationSyncStatus:Object.fromEntries(Object.entries(o.conversationSyncStatus).filter(([s])=>s!==n))}));try{await Wt.deleteConversation(n),await Wt.deleteInteractionsForConversation(n),Ct.emit(xt.CONVERSATION_DELETED,{conversationId:n}),r===n&&a==="conversation"&&(await or.getState().setCurrentConversationId(null),Ct.emit(xt.CONTEXT_CHANGED,{selectedItemId:null,selectedItemType:null}))}catch(o){throw console.error("ConversationStore: Error deleting conversation",o),e(s=>{if(i){s.conversations.push(i);const l=i.lastSyncedAt instanceof Date?i.lastSyncedAt.getTime():null,u=i.updatedAt.getTime();s.conversationSyncStatus[n]=i.syncRepoId&&l&&u<=l?"idle":i.syncRepoId?"needs-sync":"idle"}r===n&&a==="conversation"&&(s.selectedItemId=n,s.selectedItemType="conversation"),s.error="Failed to delete conversation"}),o}}},selectItem:async(n,r)=>{t().selectedItemId!==n||t().selectedItemType!==r?(e({selectedItemId:n,selectedItemType:r}),await or.getState().setCurrentConversationId(r==="conversation"?n:null),Ct.emit(xt.CONTEXT_CHANGED,{selectedItemId:n,selectedItemType:r}),r==="conversation"?Ct.emit(xt.CONVERSATION_SELECTED,{conversationId:n}):r==="project"?Ct.emit(xt.PROJECT_SELECTED,{projectId:n}):(Ct.emit(xt.CONVERSATION_SELECTED,{conversationId:null}),Ct.emit(xt.PROJECT_SELECTED,{projectId:null}))):console.log(`Item ${n} (${r}) already selected.`)},importConversation:async n=>{await Nb.importConversation(n,t().addConversation,t().selectItem)},exportConversation:async(n,r)=>{await Nb.exportConversation(n,r)},exportProject:async n=>{await Nb.exportProject(n)},exportAllConversations:async()=>{await Nb.exportAllConversations()},loadSyncRepos:async()=>{if(!t().isLoading){e({isLoading:!0,error:null});try{const n=await Wt.loadSyncRepos();e({syncRepos:n,isLoading:!1})}catch(n){console.error("ConversationStore: Error loading sync repos",n),e({error:"Failed load sync repositories",isLoading:!1})}}},addSyncRepo:async n=>{const r=Eo(),a=new Date,i={id:r,createdAt:a,updatedAt:a,name:n.name,remoteUrl:n.remoteUrl,branch:n.branch||"main",username:n.username??null,password:n.password??null};e(o=>{o.syncRepos.push(i)});try{const o=t().syncRepos.find(s=>s.id===r);if(o){const s=JSON.parse(JSON.stringify(o));await Wt.saveSyncRepo(s),Ct.emit(xt.SYNC_REPO_CHANGED,{repoId:r,action:"added"})}else throw new Error("Failed to retrieve newly added sync repo state");return lt.success(`Sync repository "${i.name}" added.`),r}catch(o){throw console.error("ConversationStore: Error adding sync repo",o),e(s=>({error:"Failed to save sync repository",syncRepos:s.syncRepos.filter(l=>l.id!==r)})),o}},updateSyncRepo:async(n,r)=>{const a=t().syncRepos.find(o=>o.id===n);if(!a){console.warn(`ConversationStore: SyncRepo ${n} not found.`);return}e(o=>{const s=o.syncRepos.findIndex(l=>l.id===n);s!==-1&&Object.assign(o.syncRepos[s],{...r,branch:r.branch||o.syncRepos[s].branch||"main",updatedAt:new Date})});const i=t().syncRepos.find(o=>o.id===n);if(i)try{const o=JSON.parse(JSON.stringify(i));await Wt.saveSyncRepo(o),Ct.emit(xt.SYNC_REPO_CHANGED,{repoId:n,action:"updated"}),lt.success(`Sync repository "${i.name}" updated.`)}catch(o){throw console.error("ConversationStore: Error updating sync repo",o),e(s=>{const l=s.syncRepos.findIndex(u=>u.id===n);l!==-1&&(s.syncRepos[l]=a),s.error="Failed to save sync repository update"}),o}else console.error("ConversationStore: Failed to retrieve updated sync repo state after update."),e(o=>{const s=o.syncRepos.findIndex(l=>l.id===n);s!==-1&&(o.syncRepos[s]=a),o.error="Failed to save sync repository update (state error)"})},deleteSyncRepo:async n=>{const r=t().syncRepos.find(o=>o.id===n);if(!r)return;const a=Zn(`${lue}/${n}`);let i;try{i=await t()._ensureSyncVfsReady()}catch{return}e(o=>({syncRepos:o.syncRepos.filter(s=>s.id!==n),repoInitializationStatus:Object.fromEntries(Object.entries(o.repoInitializationStatus).filter(([s])=>s!==n))}));try{await Wt.deleteSyncRepo(n),Ct.emit(xt.SYNC_REPO_CHANGED,{repoId:n,action:"deleted"}),lt.success(`Sync repository "${r.name}" deleted.`);try{console.log(`[ConversationStore] Deleting VFS directory: ${a}`),await Vk(a,!0,{fsInstance:i}),lt.info(`Removed local sync folder for "${r.name}".`)}catch(o){console.error(`[ConversationStore] Failed to delete VFS directory ${a}:`,o),o.code!=="ENOENT"&&lt.warning(`Failed to remove local sync folder: ${o.message}`)}}catch(o){throw console.error("ConversationStore: Error deleting sync repo",o),e(s=>{r&&s.syncRepos.push(r),s.error="Failed to delete sync repository"}),o}},linkConversationToRepo:async(n,r)=>{await t().updateConversation(n,{syncRepoId:r,lastSyncedAt:null}),t()._setConversationSyncStatus(n,r?"needs-sync":"idle"),lt.info(`Conversation ${r?"linked to":"unlinked from"} sync repository.`)},_setConversationSyncStatus:(n,r,a=null)=>{e(i=>{i.conversationSyncStatus[n]=r,r==="error"&&a&&console.error(`Sync error for ${n}: ${a}`)}),Ct.emit(xt.CONVERSATION_SYNC_STATUS_CHANGED,{conversationId:n,status:r})},_setRepoInitializationStatus:(n,r)=>{e(a=>{a.repoInitializationStatus[n]=r}),Ct.emit(xt.REPO_INIT_STATUS_CHANGED,{repoId:n,status:r})},initializeOrSyncRepo:async n=>{const r=t().syncRepos.find(i=>i.id===n);if(!r){lt.error("Sync repsitory configuration not found.");return}let a;try{a=await t()._ensureSyncVfsReady()}catch{t()._setRepoInitializationStatus(n,"error");return}await iue(a,r,t()._setRepoInitializationStatus)},syncConversation:async n=>{const r=t().getConversationById(n);if(!r){lt.error("Conversation not found for syncing.");return}if(!r.syncRepoId){lt.info("Conversation not linked to a sync repository.");return}const a=t().syncRepos.find(s=>s.id===r.syncRepoId);if(!a){lt.error("Sync repository configuration not found."),t()._setConversationSyncStatus(n,"error","Repo not found");return}let i;try{i=await t()._ensureSyncVfsReady()}catch{t()._setConversationSyncStatus(n,"error","Filesystem not ready");return}await oue(i,r,a,t()._setConversationSyncStatus,t().updateConversation,()=>t().selectedItemId,()=>t().selectedItemType);const o=t().getConversationById(n);o&&e(s=>{const l=s.conversations.findIndex(u=>u.id===n);l!==-1&&(s.conversations[l]=o)})},getConversationById:n=>{if(n)return t().conversations.find(r=>r.id===n)},updateCurrentConversationToolSettings:async n=>{const{selectedItemId:r,selectedItemType:a,updateConversation:i}=t();if(a!=="conversation"||!r){console.warn("Cannot update tool settings: No conversation selected.");return}const o=t().getConversationById(r);if(!o){console.warn("Cannot update tool settings: Selected conversation not found.");return}const s=o.metadata??{},l={...s};n.enabledTools!==void 0&&(l.enabledTools=n.enabledTools),n.toolMaxStepsOverride!==void 0&&(l.toolMaxStepsOverride=n.toolMaxStepsOverride),(JSON.stringify(l)!==JSON.stringify(s)||!o.metadata)&&await i(r,{metadata:l})},_unlinkConversationsFromProjects:n=>{const r=new Set(n);e(a=>{a.conversations=a.conversations.map(i=>i.projectId&&r.has(i.projectId)?{...i,projectId:null}:i)})}}))),cue=Symbol("Let zodToJsonSchema decide on which parser to use"),LO={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},uue=e=>typeof e=="string"?{...LO,name:e}:{...LO,...e},due=e=>{const t=uue(e),n=t.name!==void 0?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:n,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([r,a])=>[a._def,{def:a._def,path:[...t.basePath,t.definitionPath,r],jsonSchema:void 0}]))}};function _F(e,t,n,r){r!=null&&r.errorMessages&&n&&(e.errorMessage={...e.errorMessage,[t]:n})}function br(e,t,n,r,a){e[t]=n,_F(e,t,r,a)}function fue(){return{}}function hue(e,t){var r,a,i;const n={type:"array"};return(r=e.type)!=null&&r._def&&((i=(a=e.type)==null?void 0:a._def)==null?void 0:i.typeName)!==zt.ZodAny&&(n.items=cr(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&br(n,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&br(n,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(br(n,"minItems",e.exactLength.value,e.exactLength.message,t),br(n,"maxItems",e.exactLength.value,e.exactLength.message,t)),n}function pue(e,t){const n={type:"integer",format:"int64"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"min":t.target==="jsonSchema7"?r.inclusive?br(n,"minimum",r.value,r.message,t):br(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),br(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?br(n,"maximum",r.value,r.message,t):br(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),br(n,"maximum",r.value,r.message,t));break;case"multipleOf":br(n,"multipleOf",r.value,r.message,t);break}return n}function mue(){return{type:"boolean"}}function xF(e,t){return cr(e.type._def,t)}const gue=(e,t)=>cr(e.innerType._def,t);function SF(e,t,n){const r=n??t.dateStrategy;if(Array.isArray(r))return{anyOf:r.map((a,i)=>SF(e,t,a))};switch(r){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return yue(e,t)}}const yue=(e,t)=>{const n={type:"integer",format:"unix-time"};if(t.target==="openApi3")return n;for(const r of e.checks)switch(r.kind){case"min":br(n,"minimum",r.value,r.message,t);break;case"max":br(n,"maximum",r.value,r.message,t);break}return n};function bue(e,t){return{...cr(e.innerType._def,t),default:e.defaultValue()}}function vue(e,t){return t.effectStrategy==="input"?cr(e.schema._def,t):{}}function wue(e){return{type:"string",enum:Array.from(e.values)}}const _ue=e=>"type"in e&&e.type==="string"?!1:"allOf"in e;function xue(e,t){const n=[cr(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),cr(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(i=>!!i);let r=t.target==="jsonSchema2019-09"?{unevaluatedProperties:!1}:void 0;const a=[];return n.forEach(i=>{if(_ue(i))a.push(...i.allOf),i.unevaluatedProperties===void 0&&(r=void 0);else{let o=i;if("additionalProperties"in i&&i.additionalProperties===!1){const{additionalProperties:s,...l}=i;o=l}else r=void 0;a.push(o)}}),a.length?{allOf:a,...r}:void 0}function Sue(e,t){const n=typeof e.value;return n!=="bigint"&&n!=="number"&&n!=="boolean"&&n!=="string"?{type:Array.isArray(e.value)?"array":"object"}:t.target==="openApi3"?{type:n==="bigint"?"integer":n,enum:[e.value]}:{type:n==="bigint"?"integer":n,const:e.value}}let xE;const Po={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(xE===void 0&&(xE=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),xE),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function EF(e,t){const n={type:"string"};if(e.checks)for(const r of e.checks)switch(r.kind){case"min":br(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t);break;case"max":br(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"email":switch(t.emailStrategy){case"format:email":Fo(n,"email",r.message,t);break;case"format:idn-email":Fo(n,"idn-email",r.message,t);break;case"pattern:zod":gi(n,Po.email,r.message,t);break}break;case"url":Fo(n,"uri",r.message,t);break;case"uuid":Fo(n,"uuid",r.message,t);break;case"regex":gi(n,r.regex,r.message,t);break;case"cuid":gi(n,Po.cuid,r.message,t);break;case"cuid2":gi(n,Po.cuid2,r.message,t);break;case"startsWith":gi(n,RegExp(`^${SE(r.value,t)}`),r.message,t);break;case"endsWith":gi(n,RegExp(`${SE(r.value,t)}$`),r.message,t);break;case"datetime":Fo(n,"date-time",r.message,t);break;case"date":Fo(n,"date",r.message,t);break;case"time":Fo(n,"time",r.message,t);break;case"duration":Fo(n,"duration",r.message,t);break;case"length":br(n,"minLength",typeof n.minLength=="number"?Math.max(n.minLength,r.value):r.value,r.message,t),br(n,"maxLength",typeof n.maxLength=="number"?Math.min(n.maxLength,r.value):r.value,r.message,t);break;case"includes":{gi(n,RegExp(SE(r.value,t)),r.message,t);break}case"ip":{r.version!=="v6"&&Fo(n,"ipv4",r.message,t),r.version!=="v4"&&Fo(n,"ipv6",r.message,t);break}case"base64url":gi(n,Po.base64url,r.message,t);break;case"jwt":gi(n,Po.jwt,r.message,t);break;case"cidr":{r.version!=="v6"&&gi(n,Po.ipv4Cidr,r.message,t),r.version!=="v4"&&gi(n,Po.ipv6Cidr,r.message,t);break}case"emoji":gi(n,Po.emoji(),r.message,t);break;case"ulid":{gi(n,Po.ulid,r.message,t);break}case"base64":{switch(t.base64Strategy){case"format:binary":{Fo(n,"binary",r.message,t);break}case"contentEncoding:base64":{br(n,"contentEncoding","base64",r.message,t);break}case"pattern:zod":{gi(n,Po.base64,r.message,t);break}}break}case"nanoid":gi(n,Po.nanoid,r.message,t)}return n}function SE(e,t){return t.patternStrategy==="escape"?Cue(e):e}const Eue=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function Cue(e){let t="";for(let n=0;n<e.length;n++)Eue.has(e[n])||(t+="\\"),t+=e[n];return t}function Fo(e,t,n,r){var a;e.format||(a=e.anyOf)!=null&&a.some(i=>i.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&r.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.anyOf.push({format:t,...n&&r.errorMessages&&{errorMessage:{format:n}}})):br(e,"format",t,n,r)}function gi(e,t,n,r){var a;e.pattern||(a=e.allOf)!=null&&a.some(i=>i.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&r.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,Object.keys(e.errorMessage).length===0&&delete e.errorMessage)),e.allOf.push({pattern:$O(t,r),...n&&r.errorMessages&&{errorMessage:{pattern:n}}})):br(e,"pattern",$O(t,r),n,r)}function $O(e,t){var l;if(!t.applyRegexFlags||!e.flags)return e.source;const n={i:e.flags.includes("i"),m:e.flags.includes("m"),s:e.flags.includes("s")},r=n.i?e.source.toLowerCase():e.source;let a="",i=!1,o=!1,s=!1;for(let u=0;u<r.length;u++){if(i){a+=r[u],i=!1;continue}if(n.i){if(o){if(r[u].match(/[a-z]/)){s?(a+=r[u],a+=`${r[u-2]}-${r[u]}`.toUpperCase(),s=!1):r[u+1]==="-"&&((l=r[u+2])!=null&&l.match(/[a-z]/))?(a+=r[u],s=!0):a+=`${r[u]}${r[u].toUpperCase()}`;continue}}else if(r[u].match(/[a-z]/)){a+=`[${r[u]}${r[u].toUpperCase()}]`;continue}}if(n.m){if(r[u]==="^"){a+=`(^|(?<=[\r
]))`;continue}else if(r[u]==="$"){a+=`($|(?=[\r
]))`;continue}}if(n.s&&r[u]==="."){a+=o?`${r[u]}\r
`:`[${r[u]}\r
]`;continue}a+=r[u],r[u]==="\\"?i=!0:o&&r[u]==="]"?o=!1:!o&&r[u]==="["&&(o=!0)}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return a}function CF(e,t){var r,a,i,o,s,l;if(t.target==="openAi"&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),t.target==="openApi3"&&((r=e.keyType)==null?void 0:r._def.typeName)===zt.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((u,d)=>({...u,[d]:cr(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",d]})??{}}),{}),additionalProperties:t.rejectedAdditionalProperties};const n={type:"object",additionalProperties:cr(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if(t.target==="openApi3")return n;if(((a=e.keyType)==null?void 0:a._def.typeName)===zt.ZodString&&((i=e.keyType._def.checks)!=null&&i.length)){const{type:u,...d}=EF(e.keyType._def,t);return{...n,propertyNames:d}}else{if(((o=e.keyType)==null?void 0:o._def.typeName)===zt.ZodEnum)return{...n,propertyNames:{enum:e.keyType._def.values}};if(((s=e.keyType)==null?void 0:s._def.typeName)===zt.ZodBranded&&e.keyType._def.type._def.typeName===zt.ZodString&&((l=e.keyType._def.type._def.checks)!=null&&l.length)){const{type:u,...d}=xF(e.keyType._def,t);return{...n,propertyNames:d}}}return n}function kue(e,t){if(t.mapStrategy==="record")return CF(e,t);const n=cr(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},r=cr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{};return{type:"array",maxItems:125,items:{type:"array",items:[n,r],minItems:2,maxItems:2}}}function Tue(e){const t=e.values,r=Object.keys(e.values).filter(i=>typeof t[t[i]]!="number").map(i=>t[i]),a=Array.from(new Set(r.map(i=>typeof i)));return{type:a.length===1?a[0]==="string"?"string":"number":["string","number"],enum:r}}function Aue(){return{not:{}}}function Nue(e){return e.target==="openApi3"?{enum:["null"],nullable:!0}:{type:"null"}}const Xv={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function Rue(e,t){if(t.target==="openApi3")return BO(e,t);const n=e.options instanceof Map?Array.from(e.options.values()):e.options;if(n.every(r=>r._def.typeName in Xv&&(!r._def.checks||!r._def.checks.length))){const r=n.reduce((a,i)=>{const o=Xv[i._def.typeName];return o&&!a.includes(o)?[...a,o]:a},[]);return{type:r.length>1?r:r[0]}}else if(n.every(r=>r._def.typeName==="ZodLiteral"&&!r.description)){const r=n.reduce((a,i)=>{const o=typeof i._def.value;switch(o){case"string":case"number":case"boolean":return[...a,o];case"bigint":return[...a,"integer"];case"object":if(i._def.value===null)return[...a,"null"];case"symbol":case"undefined":case"function":default:return a}},[]);if(r.length===n.length){const a=r.filter((i,o,s)=>s.indexOf(i)===o);return{type:a.length>1?a:a[0],enum:n.reduce((i,o)=>i.includes(o._def.value)?i:[...i,o._def.value],[])}}}else if(n.every(r=>r._def.typeName==="ZodEnum"))return{type:"string",enum:n.reduce((r,a)=>[...r,...a._def.values.filter(i=>!r.includes(i))],[])};return BO(e,t)}const BO=(e,t)=>{const n=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((r,a)=>cr(r._def,{...t,currentPath:[...t.currentPath,"anyOf",`${a}`]})).filter(r=>!!r&&(!t.strictUnions||typeof r=="object"&&Object.keys(r).length>0));return n.length?{anyOf:n}:void 0};function Iue(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return t.target==="openApi3"?{type:Xv[e.innerType._def.typeName],nullable:!0}:{type:[Xv[e.innerType._def.typeName],"null"]};if(t.target==="openApi3"){const r=cr(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const n=cr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return n&&{anyOf:[n,{type:"null"}]}}function Oue(e,t){const n={type:"number"};if(!e.checks)return n;for(const r of e.checks)switch(r.kind){case"int":n.type="integer",_F(n,"type",r.message,t);break;case"min":t.target==="jsonSchema7"?r.inclusive?br(n,"minimum",r.value,r.message,t):br(n,"exclusiveMinimum",r.value,r.message,t):(r.inclusive||(n.exclusiveMinimum=!0),br(n,"minimum",r.value,r.message,t));break;case"max":t.target==="jsonSchema7"?r.inclusive?br(n,"maximum",r.value,r.message,t):br(n,"exclusiveMaximum",r.value,r.message,t):(r.inclusive||(n.exclusiveMaximum=!0),br(n,"maximum",r.value,r.message,t));break;case"multipleOf":br(n,"multipleOf",r.value,r.message,t);break}return n}function Due(e,t){const n=t.target==="openAi",r={type:"object",properties:{}},a=[],i=e.shape();for(const s in i){let l=i[s];if(l===void 0||l._def===void 0)continue;let u=Mue(l);u&&n&&(l instanceof Ho&&(l=l._def.innerType),l.isNullable()||(l=l.nullable()),u=!1);const d=cr(l._def,{...t,currentPath:[...t.currentPath,"properties",s],propertyPath:[...t.currentPath,"properties",s]});d!==void 0&&(r.properties[s]=d,u||a.push(s))}a.length&&(r.required=a);const o=jue(e,t);return o!==void 0&&(r.additionalProperties=o),r}function jue(e,t){if(e.catchall._def.typeName!=="ZodNever")return cr(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return t.removeAdditionalStrategy==="strict"?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function Mue(e){try{return e.isOptional()}catch{return!0}}const Pue=(e,t)=>{var r;if(t.currentPath.toString()===((r=t.propertyPath)==null?void 0:r.toString()))return cr(e.innerType._def,t);const n=cr(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return n?{anyOf:[{not:{}},n]}:{}},Fue=(e,t)=>{if(t.pipeStrategy==="input")return cr(e.in._def,t);if(t.pipeStrategy==="output")return cr(e.out._def,t);const n=cr(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),r=cr(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",n?"1":"0"]});return{allOf:[n,r].filter(a=>a!==void 0)}};function Lue(e,t){return cr(e.type._def,t)}function $ue(e,t){const r={type:"array",uniqueItems:!0,items:cr(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&br(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&br(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function Bue(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((n,r)=>cr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[]),additionalItems:cr(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((n,r)=>cr(n._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((n,r)=>r===void 0?n:[...n,r],[])}}function zue(){return{not:{}}}function Uue(){return{}}const Hue=(e,t)=>cr(e.innerType._def,t),que=(e,t,n)=>{switch(t){case zt.ZodString:return EF(e,n);case zt.ZodNumber:return Oue(e,n);case zt.ZodObject:return Due(e,n);case zt.ZodBigInt:return pue(e,n);case zt.ZodBoolean:return mue();case zt.ZodDate:return SF(e,n);case zt.ZodUndefined:return zue();case zt.ZodNull:return Nue(n);case zt.ZodArray:return hue(e,n);case zt.ZodUnion:case zt.ZodDiscriminatedUnion:return Rue(e,n);case zt.ZodIntersection:return xue(e,n);case zt.ZodTuple:return Bue(e,n);case zt.ZodRecord:return CF(e,n);case zt.ZodLiteral:return Sue(e,n);case zt.ZodEnum:return wue(e);case zt.ZodNativeEnum:return Tue(e);case zt.ZodNullable:return Iue(e,n);case zt.ZodOptional:return Pue(e,n);case zt.ZodMap:return kue(e,n);case zt.ZodSet:return $ue(e,n);case zt.ZodLazy:return()=>e.getter()._def;case zt.ZodPromise:return Lue(e,n);case zt.ZodNaN:case zt.ZodNever:return Aue();case zt.ZodEffects:return vue(e,n);case zt.ZodAny:return fue();case zt.ZodUnknown:return Uue();case zt.ZodDefault:return bue(e,n);case zt.ZodBranded:return xF(e,n);case zt.ZodReadonly:return Hue(e,n);case zt.ZodCatch:return gue(e,n);case zt.ZodPipeline:return Fue(e,n);case zt.ZodFunction:case zt.ZodVoid:case zt.ZodSymbol:return;default:return(r=>{})()}};function cr(e,t,n=!1){var s;const r=t.seen.get(e);if(t.override){const l=(s=t.override)==null?void 0:s.call(t,e,t,r,n);if(l!==cue)return l}if(r&&!n){const l=Vue(r,t);if(l!==void 0)return l}const a={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,a);const i=que(e,e.typeName,t),o=typeof i=="function"?cr(i(),t):i;if(o&&Wue(e,t,o),t.postProcess){const l=t.postProcess(o,e,t);return a.jsonSchema=o,l}return a.jsonSchema=o,o}const Vue=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:Gue(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((n,r)=>t.currentPath[r]===n)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):t.$refStrategy==="seen"?{}:void 0}},Gue=(e,t)=>{let n=0;for(;n<e.length&&n<t.length&&e[n]===t[n];n++);return[(e.length-n).toString(),...t.slice(n)].join("/")},Wue=(e,t,n)=>(e.description&&(n.description=e.description,t.markdownDescription&&(n.markdownDescription=e.description)),n),Kue=(e,t)=>{const n=due(t),r=typeof t=="object"&&t.definitions?Object.entries(t.definitions).reduce((l,[u,d])=>({...l,[u]:cr(d._def,{...n,currentPath:[...n.basePath,n.definitionPath,u]},!0)??{}}),{}):void 0,a=typeof t=="string"?t:(t==null?void 0:t.nameStrategy)==="title"||t==null?void 0:t.name,i=cr(e._def,a===void 0?n:{...n,currentPath:[...n.basePath,n.definitionPath,a]},!1)??{},o=typeof t=="object"&&t.name!==void 0&&t.nameStrategy==="title"?t.name:void 0;o!==void 0&&(i.title=o);const s=a===void 0?r?{...i,[n.definitionPath]:r}:i:{$ref:[...n.$refStrategy==="relative"?[]:n.basePath,n.definitionPath,a].join("/"),[n.definitionPath]:{...r,[a]:i}};return n.target==="jsonSchema7"?s.$schema="http://json-schema.org/draft-07/schema#":(n.target==="jsonSchema2019-09"||n.target==="openAi")&&(s.$schema="https://json-schema.org/draft/2019-09/schema#"),n.target==="openAi"&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};var D0={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},j0={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},M0={code:"4",name:"assistant_message",parse:e=>{if(e==null||typeof e!="object"||!("id"in e)||!("role"in e)||!("content"in e)||typeof e.id!="string"||typeof e.role!="string"||e.role!=="assistant"||!Array.isArray(e.content)||!e.content.every(t=>t!=null&&typeof t=="object"&&"type"in t&&t.type==="text"&&"text"in t&&t.text!=null&&typeof t.text=="object"&&"value"in t.text&&typeof t.text.value=="string"))throw new Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},P0={code:"5",name:"assistant_control_data",parse:e=>{if(e==null||typeof e!="object"||!("threadId"in e)||!("messageId"in e)||typeof e.threadId!="string"||typeof e.messageId!="string")throw new Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},F0={code:"6",name:"data_message",parse:e=>{if(e==null||typeof e!="object"||!("role"in e)||!("data"in e)||typeof e.role!="string"||e.role!=="data")throw new Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},Zue=[D0,j0,M0,P0,F0];D0.code+"",j0.code+"",M0.code+"",P0.code+"",F0.code+"";D0.name+"",D0.code,j0.name+"",j0.code,M0.name+"",M0.code,P0.name+"",P0.code,F0.name+"",F0.code;Zue.map(e=>e.code);function Yue(e){const t=["ROOT"];let n=-1,r=null;function a(l,u,d){switch(l){case'"':{n=u,t.pop(),t.push(d),t.push("INSIDE_STRING");break}case"f":case"t":case"n":{n=u,r=u,t.pop(),t.push(d),t.push("INSIDE_LITERAL");break}case"-":{t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=u,t.pop(),t.push(d),t.push("INSIDE_NUMBER");break}case"{":{n=u,t.pop(),t.push(d),t.push("INSIDE_OBJECT_START");break}case"[":{n=u,t.pop(),t.push(d),t.push("INSIDE_ARRAY_START");break}}}function i(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_OBJECT_AFTER_COMMA");break}case"}":{n=u,t.pop();break}}}function o(l,u){switch(l){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=u,t.pop();break}}}for(let l=0;l<e.length;l++){const u=e[l];switch(t[t.length-1]){case"ROOT":a(u,l,"FINISH");break;case"INSIDE_OBJECT_START":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}case"}":{n=l,t.pop();break}}break}case"INSIDE_OBJECT_AFTER_COMMA":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_KEY");break}}break}case"INSIDE_OBJECT_KEY":{switch(u){case'"':{t.pop(),t.push("INSIDE_OBJECT_AFTER_KEY");break}}break}case"INSIDE_OBJECT_AFTER_KEY":{switch(u){case":":{t.pop(),t.push("INSIDE_OBJECT_BEFORE_VALUE");break}}break}case"INSIDE_OBJECT_BEFORE_VALUE":{a(u,l,"INSIDE_OBJECT_AFTER_VALUE");break}case"INSIDE_OBJECT_AFTER_VALUE":{i(u,l);break}case"INSIDE_STRING":{switch(u){case'"':{t.pop(),n=l;break}case"\\":{t.push("INSIDE_STRING_ESCAPE");break}default:n=l}break}case"INSIDE_ARRAY_START":{switch(u){case"]":{n=l,t.pop();break}default:{n=l,a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}}break}case"INSIDE_ARRAY_AFTER_VALUE":{switch(u){case",":{t.pop(),t.push("INSIDE_ARRAY_AFTER_COMMA");break}case"]":{n=l,t.pop();break}default:{n=l;break}}break}case"INSIDE_ARRAY_AFTER_COMMA":{a(u,l,"INSIDE_ARRAY_AFTER_VALUE");break}case"INSIDE_STRING_ESCAPE":{t.pop(),n=l;break}case"INSIDE_NUMBER":{switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{n=l;break}case"e":case"E":case"-":case".":break;case",":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"}":{t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"&&i(u,l);break}case"]":{t.pop(),t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l);break}default:{t.pop();break}}break}case"INSIDE_LITERAL":{const h=e.substring(r,l+1);!"false".startsWith(h)&&!"true".startsWith(h)&&!"null".startsWith(h)?(t.pop(),t[t.length-1]==="INSIDE_OBJECT_AFTER_VALUE"?i(u,l):t[t.length-1]==="INSIDE_ARRAY_AFTER_VALUE"&&o(u,l)):n=l;break}}}let s=e.slice(0,n+1);for(let l=t.length-1;l>=0;l--)switch(t[l]){case"INSIDE_STRING":{s+='"';break}case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":{s+="}";break}case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":{s+="]";break}case"INSIDE_LITERAL":{const d=e.substring(r,e.length);"true".startsWith(d)?s+="true".slice(d.length):"false".startsWith(d)?s+="false".slice(d.length):"null".startsWith(d)&&(s+="null".slice(d.length))}}return s}function Xue(e){if(e===void 0)return{value:void 0,state:"undefined-input"};let t=pd({text:e});return t.success?{value:t.value,state:"successful-parse"}:(t=pd({text:Yue(e)}),t.success?{value:t.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}var Jue={code:"0",name:"text",parse:e=>{if(typeof e!="string")throw new Error('"text" parts expect a string value.');return{type:"text",value:e}}},Que={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw new Error('"data" parts expect an array value.');return{type:"data",value:e}}},ede={code:"3",name:"error",parse:e=>{if(typeof e!="string")throw new Error('"error" parts expect a string value.');return{type:"error",value:e}}},tde={code:"8",name:"message_annotations",parse:e=>{if(!Array.isArray(e))throw new Error('"message_annotations" parts expect an array value.');return{type:"message_annotations",value:e}}},nde={code:"9",name:"tool_call",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string"||!("args"in e)||typeof e.args!="object")throw new Error('"tool_call" parts expect an object with a "toolCallId", "toolName", and "args" property.');return{type:"tool_call",value:e}}},rde={code:"a",name:"tool_result",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("result"in e))throw new Error('"tool_result" parts expect an object with a "toolCallId" and a "result" property.');return{type:"tool_result",value:e}}},ade={code:"b",name:"tool_call_streaming_start",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("toolName"in e)||typeof e.toolName!="string")throw new Error('"tool_call_streaming_start" parts expect an object with a "toolCallId" and "toolName" property.');return{type:"tool_call_streaming_start",value:e}}},ide={code:"c",name:"tool_call_delta",parse:e=>{if(e==null||typeof e!="object"||!("toolCallId"in e)||typeof e.toolCallId!="string"||!("argsTextDelta"in e)||typeof e.argsTextDelta!="string")throw new Error('"tool_call_delta" parts expect an object with a "toolCallId" and "argsTextDelta" property.');return{type:"tool_call_delta",value:e}}},ode={code:"d",name:"finish_message",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_message" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),{type:"finish_message",value:t}}},sde={code:"e",name:"finish_step",parse:e=>{if(e==null||typeof e!="object"||!("finishReason"in e)||typeof e.finishReason!="string")throw new Error('"finish_step" parts expect an object with a "finishReason" property.');const t={finishReason:e.finishReason,isContinued:!1};return"usage"in e&&e.usage!=null&&typeof e.usage=="object"&&"promptTokens"in e.usage&&"completionTokens"in e.usage&&(t.usage={promptTokens:typeof e.usage.promptTokens=="number"?e.usage.promptTokens:Number.NaN,completionTokens:typeof e.usage.completionTokens=="number"?e.usage.completionTokens:Number.NaN}),"isContinued"in e&&typeof e.isContinued=="boolean"&&(t.isContinued=e.isContinued),{type:"finish_step",value:t}}},lde={code:"f",name:"start_step",parse:e=>{if(e==null||typeof e!="object"||!("messageId"in e)||typeof e.messageId!="string")throw new Error('"start_step" parts expect an object with an "id" property.');return{type:"start_step",value:{messageId:e.messageId}}}},cde={code:"g",name:"reasoning",parse:e=>{if(typeof e!="string")throw new Error('"reasoning" parts expect a string value.');return{type:"reasoning",value:e}}},ude={code:"h",name:"source",parse:e=>{if(e==null||typeof e!="object")throw new Error('"source" parts expect a Source object.');return{type:"source",value:e}}},dde={code:"i",name:"redacted_reasoning",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string")throw new Error('"redacted_reasoning" parts expect an object with a "data" property.');return{type:"redacted_reasoning",value:{data:e.data}}}},fde={code:"j",name:"reasoning_signature",parse:e=>{if(e==null||typeof e!="object"||!("signature"in e)||typeof e.signature!="string")throw new Error('"reasoning_signature" parts expect an object with a "signature" property.');return{type:"reasoning_signature",value:{signature:e.signature}}}},hde={code:"k",name:"file",parse:e=>{if(e==null||typeof e!="object"||!("data"in e)||typeof e.data!="string"||!("mimeType"in e)||typeof e.mimeType!="string")throw new Error('"file" parts expect an object with a "data" and "mimeType" property.');return{type:"file",value:e}}},h1=[Jue,Que,ede,tde,nde,rde,ade,ide,ode,sde,lde,cde,ude,dde,fde,hde];Object.fromEntries(h1.map(e=>[e.code,e]));Object.fromEntries(h1.map(e=>[e.name,e.code]));h1.map(e=>e.code);function Qa(e,t){const n=h1.find(r=>r.name===e);if(!n)throw new Error(`Invalid stream part type: ${e}`);return`${n.code}:${JSON.stringify(t)}
`}function pde(e,t){var n;const r=(n=void 0)!=null?n:!1;return mde(Kue(e,{$refStrategy:r?"root":"none",target:"jsonSchema7"}),{validate:a=>{const i=e.safeParse(a);return i.success?{success:!0,value:i.data}:{success:!1,error:i.error}}})}var V2=Symbol.for("vercel.ai.schema");function mde(e,{validate:t}={}){return{[V2]:!0,_type:void 0,[tv]:!0,jsonSchema:e,validate:t}}function gde(e){return typeof e=="object"&&e!==null&&V2 in e&&e[V2]===!0&&"jsonSchema"in e&&"validate"in e}function p1(e){return gde(e)?e:pde(e)}const zO=globalThis||void 0||self;var yde=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof zO=="object"?zO:{},dd="1.9.0",UO=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function bde(e){var t=new Set([e]),n=new Set,r=e.match(UO);if(!r)return function(){return!1};var a={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(a.prerelease!=null)return function(l){return l===e};function i(s){return n.add(s),!1}function o(s){return t.add(s),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(UO);if(!u)return i(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||a.major!==d.major?i(l):a.major===0?a.minor===d.minor&&a.patch<=d.patch?o(l):i(l):a.minor<=d.minor?o(l):i(l)}}var vde=bde(dd),wde=dd.split(".")[0],L0=Symbol.for("opentelemetry.js.api."+wde),$0=yde;function aT(e,t,n,r){var a;r===void 0&&(r=!1);var i=$0[L0]=(a=$0[L0])!==null&&a!==void 0?a:{version:dd};if(!r&&i[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(i.version!==dd){var o=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+e+" does not match previously registered API v"+dd);return n.error(o.stack||o.message),!1}return i[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+dd+"."),!0}function B0(e){var t,n,r=(t=$0[L0])===null||t===void 0?void 0:t.version;if(!(!r||!vde(r)))return(n=$0[L0])===null||n===void 0?void 0:n[e]}function iT(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+dd+".");var n=$0[L0];n&&delete n[e]}var _de=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},xde=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Sde=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Am("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Am("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Am("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Am("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Am("verbose",this._namespace,t)},e}();function Am(e,t,n){var r=B0("diag");if(r)return n.unshift(t),r[e].apply(r,xde([],_de(n),!1))}var Zi;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Zi||(Zi={}));function Ede(e,t){e<Zi.NONE?e=Zi.NONE:e>Zi.ALL&&(e=Zi.ALL),t=t||{};function n(r,a){var i=t[r];return typeof i=="function"&&e>=a?i.bind(t):function(){}}return{error:n("error",Zi.ERROR),warn:n("warn",Zi.WARN),info:n("info",Zi.INFO),debug:n("debug",Zi.DEBUG),verbose:n("verbose",Zi.VERBOSE)}}var Cde=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},kde=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Tde="diag",Jv=function(){function e(){function t(a){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=B0("diag");if(s)return s[a].apply(s,kde([],Cde(i),!1))}}var n=this,r=function(a,i){var o,s,l;if(i===void 0&&(i={logLevel:Zi.INFO}),a===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=u.stack)!==null&&o!==void 0?o:u.message),!1}typeof i=="number"&&(i={logLevel:i});var d=B0("diag"),h=Ede((s=i.logLevel)!==null&&s!==void 0?s:Zi.INFO,a);if(d&&!i.suppressOverrideMessage){var p=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+p),h.warn("Current logger will overwrite one already registered from "+p)}return aT("diag",h,n,!0)};n.setLogger=r,n.disable=function(){iT(Tde,n)},n.createComponentLogger=function(a){return new Sde(a)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();function Ade(e){return Symbol.for(e)}var Nde=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,a){var i=new e(n._currentContext);return i._currentContext.set(r,a),i},n.deleteValue=function(r){var a=new e(n._currentContext);return a._currentContext.delete(r),a}}return e}(),Rde=new Nde,Ide=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Ode=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Dde=function(){function e(){}return e.prototype.active=function(){return Rde},e.prototype.with=function(t,n,r){for(var a=[],i=3;i<arguments.length;i++)a[i-3]=arguments[i];return n.call.apply(n,Ode([r],Ide(a),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),jde=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Mde=function(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},EE="context",Pde=new Dde,kF=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return aT(EE,t,Jv.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var a,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return(a=this._getContextManager()).with.apply(a,Mde([t,n,r],jde(i),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return B0(EE)||Pde},e.prototype.disable=function(){this._getContextManager().disable(),iT(EE,Jv.instance())},e}(),G2;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(G2||(G2={}));var TF="0000000000000000",AF="00000000000000000000000000000000",Fde={traceId:AF,spanId:TF,traceFlags:G2.NONE},Lm=function(){function e(t){t===void 0&&(t=Fde),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.addLink=function(t){return this},e.prototype.addLinks=function(t){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),oT=Ade("OpenTelemetry Context Key SPAN");function sT(e){return e.getValue(oT)||void 0}function Lde(){return sT(kF.getInstance().active())}function lT(e,t){return e.setValue(oT,t)}function $de(e){return e.deleteValue(oT)}function Bde(e,t){return lT(e,new Lm(t))}function NF(e){var t;return(t=sT(e))===null||t===void 0?void 0:t.spanContext()}var zde=/^([0-9a-f]{32})$/i,Ude=/^[0-9a-f]{16}$/i;function Hde(e){return zde.test(e)&&e!==AF}function qde(e){return Ude.test(e)&&e!==TF}function RF(e){return Hde(e.traceId)&&qde(e.spanId)}function Vde(e){return new Lm(e)}var CE=kF.getInstance(),IF=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=CE.active());var a=!!(n!=null&&n.root);if(a)return new Lm;var i=r&&NF(r);return Gde(i)&&RF(i)?new Lm(i):new Lm},e.prototype.startActiveSpan=function(t,n,r,a){var i,o,s;if(!(arguments.length<2)){arguments.length===2?s=n:arguments.length===3?(i=n,s=r):(i=n,o=r,s=a);var l=o??CE.active(),u=this.startSpan(t,i,l),d=lT(l,u);return CE.with(d,s,void 0,u)}},e}();function Gde(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var Wde=new IF,Kde=function(){function e(t,n,r,a){this._provider=t,this.name=n,this.version=r,this.options=a}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,a){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):Wde},e}(),Zde=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new IF},e}(),Yde=new Zde,HO=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var a;return(a=this.getDelegateTracer(t,n,r))!==null&&a!==void 0?a:new Kde(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Yde},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var a;return(a=this._delegate)===null||a===void 0?void 0:a.getTracer(t,n,r)},e}(),Qv;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Qv||(Qv={}));var kE="trace",Xde=function(){function e(){this._proxyTracerProvider=new HO,this.wrapSpanContext=Vde,this.isSpanContextValid=RF,this.deleteSpan=$de,this.getSpan=sT,this.getActiveSpan=Lde,this.getSpanContext=NF,this.setSpan=lT,this.setSpanContext=Bde}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=aT(kE,this._proxyTracerProvider,Jv.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return B0(kE)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){iT(kE,Jv.instance()),this._proxyTracerProvider=new HO},e}(),Jde=Xde.getInstance(),Qde=Object.defineProperty,cT=(e,t)=>{for(var n in t)Qde(e,n,{get:t[n],enumerable:!0})};function ew(e,{contentType:t,dataStreamVersion:n}){const r=new Headers(e??{});return r.has("Content-Type")||r.set("Content-Type",t),n!==void 0&&r.set("X-Vercel-AI-Data-Stream",n),r}function qO(e,{contentType:t,dataStreamVersion:n}){const r={};if(e!=null)for(const[a,i]of Object.entries(e))r[a]=i;return r["Content-Type"]==null&&(r["Content-Type"]=t),n!==void 0&&(r["X-Vercel-AI-Data-Stream"]=n),r}function VO({response:e,status:t,statusText:n,headers:r,stream:a}){e.writeHead(t??200,n,r);const i=a.getReader();(async()=>{try{for(;;){const{done:s,value:l}=await i.read();if(s)break;e.write(l)}}catch(s){throw s}finally{e.end()}})()}var OF="AI_InvalidArgumentError",DF=`vercel.ai.error.${OF}`,efe=Symbol.for(DF),jF,$o=class extends Tn{constructor({parameter:e,value:t,message:n}){super({name:OF,message:`Invalid argument for parameter ${e}: ${n}`}),this[jF]=!0,this.parameter=e,this.value=t}static isInstance(e){return Tn.hasMarker(e,DF)}};jF=efe;var MF="AI_RetryError",PF=`vercel.ai.error.${MF}`,tfe=Symbol.for(PF),FF,GO=class extends Tn{constructor({message:e,reason:t,errors:n}){super({name:MF,message:e}),this[FF]=!0,this.reason=t,this.errors=n,this.lastError=n[n.length-1]}static isInstance(e){return Tn.hasMarker(e,PF)}};FF=tfe;var nfe=({maxRetries:e=2,initialDelayInMs:t=2e3,backoffFactor:n=2}={})=>async r=>LF(r,{maxRetries:e,delayInMs:t,backoffFactor:n});async function LF(e,{maxRetries:t,delayInMs:n,backoffFactor:r},a=[]){try{return await e()}catch(i){if(Bb(i)||t===0)throw i;const o=aV(i),s=[...a,i],l=s.length;if(l>t)throw new GO({message:`Failed after ${l} attempts. Last error: ${o}`,reason:"maxRetriesExceeded",errors:s});if(i instanceof Error&&va.isInstance(i)&&i.isRetryable===!0&&l<=t)return await tV(n),LF(e,{maxRetries:t,delayInMs:r*n,backoffFactor:r},s);throw l===1?i:new GO({message:`Failed after ${l} attempts with non-retryable error: '${o}'`,reason:"errorNotRetryable",errors:s})}}function rfe({maxRetries:e}){if(e!=null){if(!Number.isInteger(e))throw new $o({parameter:"maxRetries",value:e,message:"maxRetries must be an integer"});if(e<0)throw new $o({parameter:"maxRetries",value:e,message:"maxRetries must be >= 0"})}const t=e??2;return{maxRetries:t,retry:nfe({maxRetries:t})}}function W2({operationId:e,telemetry:t}){return{"operation.name":`${e}${(t==null?void 0:t.functionId)!=null?` ${t.functionId}`:""}`,"resource.name":t==null?void 0:t.functionId,"ai.operationId":e,"ai.telemetry.functionId":t==null?void 0:t.functionId}}function afe({model:e,settings:t,telemetry:n,headers:r}){var a;return{"ai.model.provider":e.provider,"ai.model.id":e.modelId,...Object.entries(t).reduce((i,[o,s])=>(i[`ai.settings.${o}`]=s,i),{}),...Object.entries((a=n==null?void 0:n.metadata)!=null?a:{}).reduce((i,[o,s])=>(i[`ai.telemetry.metadata.${o}`]=s,i),{}),...Object.entries(r??{}).reduce((i,[o,s])=>(s!==void 0&&(i[`ai.request.headers.${o}`]=s),i),{})}}var ife={startSpan(){return Rb},startActiveSpan(e,t,n,r){if(typeof t=="function")return t(Rb);if(typeof n=="function")return n(Rb);if(typeof r=="function")return r(Rb)}},Rb={spanContext(){return ofe},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},addLink(){return this},addLinks(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this}},ofe={traceId:"",spanId:"",traceFlags:0};function sfe({isEnabled:e=!1,tracer:t}={}){return e?t||Jde.getTracer("ai"):ife}function K2({name:e,tracer:t,attributes:n,fn:r,endWhenDone:a=!0}){return t.startActiveSpan(e,{attributes:n},async i=>{try{const o=await r(i);return a&&i.end(),o}catch(o){try{o instanceof Error?(i.recordException({name:o.name,message:o.message,stack:o.stack}),i.setStatus({code:Qv.ERROR,message:o.message})):i.setStatus({code:Qv.ERROR})}finally{i.end()}throw o}})}function Qf({telemetry:e,attributes:t}){return(e==null?void 0:e.isEnabled)!==!0?{}:Object.entries(t).reduce((n,[r,a])=>{if(a===void 0)return n;if(typeof a=="object"&&"input"in a&&typeof a.input=="function"){if((e==null?void 0:e.recordInputs)===!1)return n;const i=a.input();return i===void 0?n:{...n,[r]:i}}if(typeof a=="object"&&"output"in a&&typeof a.output=="function"){if((e==null?void 0:e.recordOutputs)===!1)return n;const i=a.output();return i===void 0?n:{...n,[r]:i}}return{...n,[r]:a}},{})}var lfe=class{constructor({data:e,mimeType:t}){const n=e instanceof Uint8Array;this.base64Data=n?void 0:e,this.uint8ArrayData=n?e:void 0,this.mimeType=t}get base64(){return this.base64Data==null&&(this.base64Data=dh(this.uint8ArrayData)),this.base64Data}get uint8Array(){return this.uint8ArrayData==null&&(this.uint8ArrayData=KD(this.base64Data)),this.uint8ArrayData}},cfe=class extends lfe{constructor(e){super(e),this.type="file"}},ufe=[{mimeType:"image/gif",bytesPrefix:[71,73,70],base64Prefix:"R0lG"},{mimeType:"image/png",bytesPrefix:[137,80,78,71],base64Prefix:"iVBORw"},{mimeType:"image/jpeg",bytesPrefix:[255,216],base64Prefix:"/9j/"},{mimeType:"image/webp",bytesPrefix:[82,73,70,70],base64Prefix:"UklGRg"},{mimeType:"image/bmp",bytesPrefix:[66,77],base64Prefix:"Qk"},{mimeType:"image/tiff",bytesPrefix:[73,73,42,0],base64Prefix:"SUkqAA"},{mimeType:"image/tiff",bytesPrefix:[77,77,0,42],base64Prefix:"TU0AKg"},{mimeType:"image/avif",bytesPrefix:[0,0,0,32,102,116,121,112,97,118,105,102],base64Prefix:"AAAAIGZ0eXBhdmlm"},{mimeType:"image/heic",bytesPrefix:[0,0,0,32,102,116,121,112,104,101,105,99],base64Prefix:"AAAAIGZ0eXBoZWlj"}];function dfe(e){for(const t of ufe)if(typeof e=="string"?e.startsWith(t.base64Prefix):e.length>=t.bytesPrefix.length&&t.bytesPrefix.every((n,r)=>e[r]===n))return t.mimeType}var $F="AI_NoObjectGeneratedError",BF=`vercel.ai.error.${$F}`,ffe=Symbol.for(BF),zF,WO=class extends Tn{constructor({message:e="No object generated.",cause:t,text:n,response:r,usage:a}){super({name:$F,message:e,cause:t}),this[zF]=!0,this.text=n,this.response=r,this.usage=a}static isInstance(e){return Tn.hasMarker(e,BF)}};zF=ffe;var UF="AI_DownloadError",HF=`vercel.ai.error.${UF}`,hfe=Symbol.for(HF),qF,TE=class extends Tn{constructor({url:e,statusCode:t,statusText:n,cause:r,message:a=r==null?`Failed to download ${e}: ${t} ${n}`:`Failed to download ${e}: ${r}`}){super({name:UF,message:a,cause:r}),this[qF]=!0,this.url=e,this.statusCode=t,this.statusText=n}static isInstance(e){return Tn.hasMarker(e,HF)}};qF=hfe;async function pfe({url:e,fetchImplementation:t=fetch}){var n;const r=e.toString();try{const a=await t(r);if(!a.ok)throw new TE({url:r,statusCode:a.status,statusText:a.statusText});return{data:new Uint8Array(await a.arrayBuffer()),mimeType:(n=a.headers.get("content-type"))!=null?n:void 0}}catch(a){throw TE.isInstance(a)?a:new TE({url:r,cause:a})}}var VF="AI_InvalidDataContentError",GF=`vercel.ai.error.${VF}`,mfe=Symbol.for(GF),WF,KO=class extends Tn{constructor({content:e,cause:t,message:n=`Invalid data content. Expected a base64 string, Uint8Array, ArrayBuffer, or Buffer, but got ${typeof e}.`}){super({name:VF,message:n,cause:t}),this[WF]=!0,this.content=e}static isInstance(e){return Tn.hasMarker(e,GF)}};WF=mfe;var KF=$.union([$.string(),$.instanceof(Uint8Array),$.instanceof(ArrayBuffer),$.custom(e=>{var t,n;return(n=(t=globalThis.Buffer)==null?void 0:t.isBuffer(e))!=null?n:!1},{message:"Must be a Buffer"})]);function ZF(e){return typeof e=="string"?e:e instanceof ArrayBuffer?dh(new Uint8Array(e)):dh(e)}function tw(e){if(e instanceof Uint8Array)return e;if(typeof e=="string")try{return KD(e)}catch(t){throw new KO({message:"Invalid data content. Content string is not a base64-encoded media.",content:e,cause:t})}if(e instanceof ArrayBuffer)return new Uint8Array(e);throw new KO({content:e})}function gfe(e){try{return new TextDecoder().decode(e)}catch{throw new Error("Error decoding Uint8Array to text")}}var YF="AI_InvalidMessageRoleError",XF=`vercel.ai.error.${YF}`,yfe=Symbol.for(XF),JF,bfe=class extends Tn{constructor({role:e,message:t=`Invalid message role: '${e}'. Must be one of: "system", "user", "assistant", "tool".`}){super({name:YF,message:t}),this[JF]=!0,this.role=e}static isInstance(e){return Tn.hasMarker(e,XF)}};JF=yfe;function vfe(e){try{const[t,n]=e.split(",");return{mimeType:t.split(";")[0].split(":")[1],base64Content:n}}catch{return{mimeType:void 0,base64Content:void 0}}}async function wfe({prompt:e,modelSupportsImageUrls:t=!0,modelSupportsUrl:n=()=>!1,downloadImplementation:r=pfe}){const a=await xfe(e.messages,r,t,n);return[...e.system!=null?[{role:"system",content:e.system}]:[],...e.messages.map(i=>_fe(i,a))]}function _fe(e,t){var n,r,a,i,o,s;const l=e.role;switch(l){case"system":return{role:"system",content:e.content,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};case"user":return typeof e.content=="string"?{role:"user",content:[{type:"text",text:e.content}],providerMetadata:(r=e.providerOptions)!=null?r:e.experimental_providerMetadata}:{role:"user",content:e.content.map(u=>Sfe(u,t)).filter(u=>u.type!=="text"||u.text!==""),providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"assistant":return typeof e.content=="string"?{role:"assistant",content:[{type:"text",text:e.content}],providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}:{role:"assistant",content:e.content.filter(u=>u.type!=="text"||u.text!=="").map(u=>{var d;const h=(d=u.providerOptions)!=null?d:u.experimental_providerMetadata;switch(u.type){case"file":return{type:"file",data:u.data instanceof URL?u.data:ZF(u.data),filename:u.filename,mimeType:u.mimeType,providerMetadata:h};case"reasoning":return{type:"reasoning",text:u.text,signature:u.signature,providerMetadata:h};case"redacted-reasoning":return{type:"redacted-reasoning",data:u.data,providerMetadata:h};case"text":return{type:"text",text:u.text,providerMetadata:h};case"tool-call":return{type:"tool-call",toolCallId:u.toolCallId,toolName:u.toolName,args:u.args,providerMetadata:h}}}),providerMetadata:(o=e.providerOptions)!=null?o:e.experimental_providerMetadata};case"tool":return{role:"tool",content:e.content.map(u=>{var d;return{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result,content:u.experimental_content,isError:u.isError,providerMetadata:(d=u.providerOptions)!=null?d:u.experimental_providerMetadata}}),providerMetadata:(s=e.providerOptions)!=null?s:e.experimental_providerMetadata};default:{const u=l;throw new bfe({role:u})}}}async function xfe(e,t,n,r){const a=e.filter(o=>o.role==="user").map(o=>o.content).filter(o=>Array.isArray(o)).flat().filter(o=>o.type==="image"||o.type==="file").filter(o=>!(o.type==="image"&&n===!0)).map(o=>o.type==="image"?o.image:o.data).map(o=>typeof o=="string"&&(o.startsWith("http:")||o.startsWith("https:"))?new URL(o):o).filter(o=>o instanceof URL).filter(o=>!r(o)),i=await Promise.all(a.map(async o=>({url:o,data:await t({url:o})})));return Object.fromEntries(i.map(({url:o,data:s})=>[o.toString(),s]))}function Sfe(e,t){var n,r,a,i;if(e.type==="text")return{type:"text",text:e.text,providerMetadata:(n=e.providerOptions)!=null?n:e.experimental_providerMetadata};let o=e.mimeType,s,l,u;const d=e.type;switch(d){case"image":s=e.image;break;case"file":s=e.data;break;default:throw new Error(`Unsupported part type: ${d}`)}try{l=typeof s=="string"?new URL(s):s}catch{l=s}if(l instanceof URL)if(l.protocol==="data:"){const{mimeType:h,base64Content:p}=vfe(l.toString());if(h==null||p==null)throw new Error(`Invalid data URL format in part ${d}`);o=h,u=tw(p)}else{const h=t[l.toString()];h?(u=h.data,o??(o=h.mimeType)):u=l}else u=tw(l);switch(d){case"image":return u instanceof Uint8Array&&(o=(r=dfe(u))!=null?r:o),{type:"image",image:u,mimeType:o,providerMetadata:(a=e.providerOptions)!=null?a:e.experimental_providerMetadata};case"file":{if(o==null)throw new Error("Mime type is missing for file part");return{type:"file",data:u instanceof Uint8Array?ZF(u):u,filename:e.filename,mimeType:o,providerMetadata:(i=e.providerOptions)!=null?i:e.experimental_providerMetadata}}}}function Efe({maxTokens:e,temperature:t,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o,seed:s}){if(e!=null){if(!Number.isInteger(e))throw new $o({parameter:"maxTokens",value:e,message:"maxTokens must be an integer"});if(e<1)throw new $o({parameter:"maxTokens",value:e,message:"maxTokens must be >= 1"})}if(t!=null&&typeof t!="number")throw new $o({parameter:"temperature",value:t,message:"temperature must be a number"});if(n!=null&&typeof n!="number")throw new $o({parameter:"topP",value:n,message:"topP must be a number"});if(r!=null&&typeof r!="number")throw new $o({parameter:"topK",value:r,message:"topK must be a number"});if(a!=null&&typeof a!="number")throw new $o({parameter:"presencePenalty",value:a,message:"presencePenalty must be a number"});if(i!=null&&typeof i!="number")throw new $o({parameter:"frequencyPenalty",value:i,message:"frequencyPenalty must be a number"});if(s!=null&&!Number.isInteger(s))throw new $o({parameter:"seed",value:s,message:"seed must be an integer"});return{maxTokens:e,temperature:t??0,topP:n,topK:r,presencePenalty:a,frequencyPenalty:i,stopSequences:o!=null&&o.length>0?o:void 0,seed:s}}function ZO(e){var t,n,r;const a=[];for(const i of e){let o;try{o=new URL(i.url)}catch{throw new Error(`Invalid URL: ${i.url}`)}switch(o.protocol){case"http:":case"https:":{if((t=i.contentType)!=null&&t.startsWith("image/"))a.push({type:"image",image:o});else{if(!i.contentType)throw new Error("If the attachment is not an image, it must specify a content type");a.push({type:"file",data:o,mimeType:i.contentType})}break}case"data:":{let s,l,u;try{[s,l]=i.url.split(","),u=s.split(";")[0].split(":")[1]}catch{throw new Error(`Error processing data URL: ${i.url}`)}if(u==null||l==null)throw new Error(`Invalid data URL format: ${i.url}`);if((n=i.contentType)!=null&&n.startsWith("image/"))a.push({type:"image",image:tw(l)});else if((r=i.contentType)!=null&&r.startsWith("text/"))a.push({type:"text",text:gfe(tw(l))});else{if(!i.contentType)throw new Error("If the attachment is not an image or text, it must specify a content type");a.push({type:"file",data:l,mimeType:i.contentType})}break}default:throw new Error(`Unsupported URL protocol: ${o.protocol}`)}}return a}var QF="AI_MessageConversionError",eL=`vercel.ai.error.${QF}`,Cfe=Symbol.for(eL),tL,AE=class extends Tn{constructor({originalMessage:e,message:t}){super({name:QF,message:t}),this[tL]=!0,this.originalMessage=e}static isInstance(e){return Tn.hasMarker(e,eL)}};tL=Cfe;function kfe(e,t){var n,r;const a=(n=t==null?void 0:t.tools)!=null?n:{},i=[];for(let o=0;o<e.length;o++){const s=e[o],l=o===e.length-1,{role:u,content:d,experimental_attachments:h}=s;switch(u){case"system":{i.push({role:"system",content:d});break}case"user":{if(s.parts==null)i.push({role:"user",content:h?[{type:"text",text:d},...ZO(h)]:d});else{const p=s.parts.filter(g=>g.type==="text").map(g=>({type:"text",text:g.text}));i.push({role:"user",content:h?[...p,...ZO(h)]:p})}break}case"assistant":{if(s.parts!=null){let v=function(){const S=[];for(const C of x)switch(C.type){case"file":case"text":{S.push(C);break}case"reasoning":{for(const k of C.details)switch(k.type){case"text":S.push({type:"reasoning",text:k.text,signature:k.signature});break;case"redacted":S.push({type:"redacted-reasoning",data:k.data});break}break}case"tool-invocation":S.push({type:"tool-call",toolCallId:C.toolInvocation.toolCallId,toolName:C.toolInvocation.toolName,args:C.toolInvocation.args});break;default:{const k=C;throw new Error(`Unsupported part: ${k}`)}}i.push({role:"assistant",content:S});const E=x.filter(C=>C.type==="tool-invocation").map(C=>C.toolInvocation);E.length>0&&i.push({role:"tool",content:E.map(C=>{if(!("result"in C))throw new AE({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(C)});const{toolCallId:k,toolName:R,result:D}=C,O=a[R];return(O==null?void 0:O.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:k,toolName:R,result:O.experimental_toToolResultContent(D),experimental_content:O.experimental_toToolResultContent(D)}:{type:"tool-result",toolCallId:k,toolName:R,result:D}})}),x=[],_=!1,b++},b=0,_=!1,x=[];for(const S of s.parts)switch(S.type){case"text":{_&&v(),x.push(S);break}case"file":case"reasoning":{x.push(S);break}case"tool-invocation":{((r=S.toolInvocation.step)!=null?r:0)!==b&&v(),x.push(S),_=!0;break}}v();break}const p=s.toolInvocations;if(p==null||p.length===0){i.push({role:"assistant",content:d});break}const g=p.reduce((v,b)=>{var _;return Math.max(v,(_=b.step)!=null?_:0)},0);for(let v=0;v<=g;v++){const b=p.filter(_=>{var x;return((x=_.step)!=null?x:0)===v});b.length!==0&&(i.push({role:"assistant",content:[...l&&d&&v===0?[{type:"text",text:d}]:[],...b.map(({toolCallId:_,toolName:x,args:S})=>({type:"tool-call",toolCallId:_,toolName:x,args:S}))]}),i.push({role:"tool",content:b.map(_=>{if(!("result"in _))throw new AE({originalMessage:s,message:"ToolInvocation must have a result: "+JSON.stringify(_)});const{toolCallId:x,toolName:S,result:E}=_,C=a[S];return(C==null?void 0:C.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:x,toolName:S,result:C.experimental_toToolResultContent(E),experimental_content:C.experimental_toToolResultContent(E)}:{type:"tool-result",toolCallId:x,toolName:S,result:E}})}))}d&&!l&&i.push({role:"assistant",content:d});break}case"data":break;default:{const p=u;throw new AE({originalMessage:s,message:`Unsupported role: ${p}`})}}}return i}function Tfe(e){if(!Array.isArray(e))return"other";if(e.length===0)return"messages";const t=e.map(Afe);return t.some(n=>n==="has-ui-specific-parts")?"ui-messages":t.every(n=>n==="has-core-specific-parts"||n==="message")?"messages":"other"}function Afe(e){return typeof e=="object"&&e!==null&&(e.role==="function"||e.role==="data"||"toolInvocations"in e||"parts"in e||"experimental_attachments"in e)?"has-ui-specific-parts":typeof e=="object"&&e!==null&&"content"in e&&(Array.isArray(e.content)||"experimental_providerMetadata"in e||"providerOptions"in e)?"has-core-specific-parts":typeof e=="object"&&e!==null&&"role"in e&&"content"in e&&typeof e.content=="string"&&["system","user","assistant","tool"].includes(e.role)?"message":"other"}var Z2=$.lazy(()=>$.union([$.null(),$.string(),$.number(),$.boolean(),$.record($.string(),Z2),$.array(Z2)])),ea=$.record($.string(),$.record($.string(),Z2)),Nfe=$.array($.union([$.object({type:$.literal("text"),text:$.string()}),$.object({type:$.literal("image"),data:$.string(),mimeType:$.string().optional()})])),nL=$.object({type:$.literal("text"),text:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Rfe=$.object({type:$.literal("image"),image:$.union([KF,$.instanceof(URL)]),mimeType:$.string().optional(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),rL=$.object({type:$.literal("file"),data:$.union([KF,$.instanceof(URL)]),filename:$.string().optional(),mimeType:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Ife=$.object({type:$.literal("reasoning"),text:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Ofe=$.object({type:$.literal("redacted-reasoning"),data:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Dfe=$.object({type:$.literal("tool-call"),toolCallId:$.string(),toolName:$.string(),args:$.unknown(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),jfe=$.object({type:$.literal("tool-result"),toolCallId:$.string(),toolName:$.string(),result:$.unknown(),content:Nfe.optional(),isError:$.boolean().optional(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Mfe=$.object({role:$.literal("system"),content:$.string(),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Pfe=$.object({role:$.literal("user"),content:$.union([$.string(),$.array($.union([nL,Rfe,rL]))]),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Ffe=$.object({role:$.literal("assistant"),content:$.union([$.string(),$.array($.union([nL,rL,Ife,Ofe,Dfe]))]),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),Lfe=$.object({role:$.literal("tool"),content:$.array(jfe),providerOptions:ea.optional(),experimental_providerMetadata:ea.optional()}),$fe=$.union([Mfe,Pfe,Ffe,Lfe]);function Bfe({prompt:e,tools:t}){if(e.prompt==null&&e.messages==null)throw new kl({prompt:e,message:"prompt or messages must be defined"});if(e.prompt!=null&&e.messages!=null)throw new kl({prompt:e,message:"prompt and messages cannot be defined at the same time"});if(e.system!=null&&typeof e.system!="string")throw new kl({prompt:e,message:"system must be a string"});if(e.prompt!=null){if(typeof e.prompt!="string")throw new kl({prompt:e,message:"prompt must be a string"});return{type:"prompt",system:e.system,messages:[{role:"user",content:e.prompt}]}}if(e.messages!=null){const n=Tfe(e.messages);if(n==="other")throw new kl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage"});const r=n==="ui-messages"?kfe(e.messages,{tools:t}):e.messages;if(r.length===0)throw new kl({prompt:e,message:"messages must not be empty"});const a=Lh({value:r,schema:$.array($fe)});if(!a.success)throw new kl({prompt:e,message:"messages must be an array of CoreMessage or UIMessage",cause:a.error});return{type:"messages",messages:r,system:e.system}}throw new Error("unreachable")}function zfe({promptTokens:e,completionTokens:t}){return{promptTokens:e,completionTokens:t,totalTokens:e+t}}function Ufe(e,t){return{promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}}var Hfe="JSON schema:",qfe="You MUST answer with a JSON object that matches the JSON schema above.",Vfe="You MUST answer with JSON.";function Gfe({prompt:e,schema:t,schemaPrefix:n=t!=null?Hfe:void 0,schemaSuffix:r=t!=null?qfe:Vfe}){return[e!=null&&e.length>0?e:void 0,e!=null&&e.length>0?"":void 0,n,t!=null?JSON.stringify(t):void 0,r].filter(a=>a!=null).join(`
`)}function NE(e){const t=e.pipeThrough(new TransformStream);return t[Symbol.asyncIterator]=()=>{const n=t.getReader();return{async next(){const{done:r,value:a}=await n.read();return r?{done:!0,value:void 0}:{done:!1,value:a}}}},t}kd({prefix:"aiobj",size:24});var Ai=class{constructor(){this.status={type:"pending"},this._resolve=void 0,this._reject=void 0}get value(){return this.promise?this.promise:(this.promise=new Promise((e,t)=>{this.status.type==="resolved"?e(this.status.value):this.status.type==="rejected"&&t(this.status.error),this._resolve=e,this._reject=t}),this.promise)}resolve(e){var t;this.status={type:"resolved",value:e},this.promise&&((t=this._resolve)==null||t.call(this,e))}reject(e){var t;this.status={type:"rejected",error:e},this.promise&&((t=this._reject)==null||t.call(this,e))}};function YO(){let e,t;return{promise:new Promise((r,a)=>{e=r,t=a}),resolve:e,reject:t}}function Wfe(){let e=[],t=null,n=!1,r=YO();const a=async()=>{if(n&&e.length===0){t==null||t.close();return}if(e.length===0)return r=YO(),await r.promise,a();try{const{value:i,done:o}=await e[0].read();o?(e.shift(),e.length>0?await a():n&&(t==null||t.close())):t==null||t.enqueue(i)}catch(i){t==null||t.error(i),e.shift(),n&&e.length===0&&(t==null||t.close())}};return{stream:new ReadableStream({start(i){t=i},pull:a,async cancel(){for(const i of e)await i.cancel();e=[],n=!0}}),addStream:i=>{if(n)throw new Error("Cannot add inner stream: outer stream is closed");e.push(i.getReader()),r.resolve()},close:()=>{n=!0,r.resolve(),e.length===0&&(t==null||t.close())},terminate:()=>{n=!0,r.resolve(),e.forEach(i=>i.cancel()),e=[],t==null||t.close()}}}function Kfe(){var e,t;return(t=(e=globalThis==null?void 0:globalThis.performance)==null?void 0:e.now())!=null?t:Date.now()}kd({prefix:"aiobj",size:24});var aL="AI_NoOutputSpecifiedError",iL=`vercel.ai.error.${aL}`,Zfe=Symbol.for(iL),oL,Yfe=class extends Tn{constructor({message:e="No output specified."}={}){super({name:aL,message:e}),this[oL]=!0}static isInstance(e){return Tn.hasMarker(e,iL)}};oL=Zfe;var sL="AI_ToolExecutionError",lL=`vercel.ai.error.${sL}`,Xfe=Symbol.for(lL),cL,Jfe=class extends Tn{constructor({toolArgs:e,toolName:t,toolCallId:n,cause:r,message:a=`Error executing tool ${t}: ${X0(r)}`}){super({name:sL,message:a,cause:r}),this[cL]=!0,this.toolArgs=e,this.toolName=t,this.toolCallId=n}static isInstance(e){return Tn.hasMarker(e,lL)}};cL=Xfe;function Qfe(e){return e!=null&&Object.keys(e).length>0}function ehe({tools:e,toolChoice:t,activeTools:n}){return Qfe(e)?{tools:(n!=null?Object.entries(e).filter(([a])=>n.includes(a)):Object.entries(e)).map(([a,i])=>{const o=i.type;switch(o){case void 0:case"function":return{type:"function",name:a,description:i.description,parameters:p1(i.parameters).jsonSchema};case"provider-defined":return{type:"provider-defined",name:a,id:i.id,args:i.args};default:{const s=o;throw new Error(`Unsupported tool type: ${s}`)}}}),toolChoice:t==null?{type:"auto"}:typeof t=="string"?{type:t}:{type:"tool",toolName:t.toolName}}:{tools:void 0,toolChoice:void 0}}var the=/^([\s\S]*?)(\s+)(\S*)$/;function nhe(e){const t=e.match(the);return t?{prefix:t[1],whitespace:t[2],suffix:t[3]}:void 0}var uL="AI_InvalidToolArgumentsError",dL=`vercel.ai.error.${uL}`,rhe=Symbol.for(dL),fL,hL=class extends Tn{constructor({toolArgs:e,toolName:t,cause:n,message:r=`Invalid arguments for tool ${t}: ${X0(n)}`}){super({name:uL,message:r,cause:n}),this[fL]=!0,this.toolArgs=e,this.toolName=t}static isInstance(e){return Tn.hasMarker(e,dL)}};fL=rhe;var pL="AI_NoSuchToolError",mL=`vercel.ai.error.${pL}`,ahe=Symbol.for(mL),gL,Y2=class extends Tn{constructor({toolName:e,availableTools:t=void 0,message:n=`Model tried to call unavailable tool '${e}'. ${t===void 0?"No tools are available.":`Available tools: ${t.join(", ")}.`}`}){super({name:pL,message:n}),this[gL]=!0,this.toolName=e,this.availableTools=t}static isInstance(e){return Tn.hasMarker(e,mL)}};gL=ahe;var yL="AI_ToolCallRepairError",bL=`vercel.ai.error.${yL}`,ihe=Symbol.for(bL),vL,ohe=class extends Tn{constructor({cause:e,originalError:t,message:n=`Error repairing tool call: ${X0(e)}`}){super({name:yL,message:n,cause:e}),this[vL]=!0,this.originalError=t}static isInstance(e){return Tn.hasMarker(e,bL)}};vL=ihe;async function she({toolCall:e,tools:t,repairToolCall:n,system:r,messages:a}){if(t==null)throw new Y2({toolName:e.toolName});try{return await XO({toolCall:e,tools:t})}catch(i){if(n==null||!(Y2.isInstance(i)||hL.isInstance(i)))throw i;let o=null;try{o=await n({toolCall:e,tools:t,parameterSchema:({toolName:s})=>p1(t[s].parameters).jsonSchema,system:r,messages:a,error:i})}catch(s){throw new ohe({cause:s,originalError:i})}if(o==null)throw i;return await XO({toolCall:o,tools:t})}}async function XO({toolCall:e,tools:t}){const n=e.toolName,r=t[n];if(r==null)throw new Y2({toolName:e.toolName,availableTools:Object.keys(t)});const a=p1(r.parameters),i=e.args.trim()===""?Lh({value:{},schema:a}):pd({text:e.args,schema:a});if(i.success===!1)throw new hL({toolName:n,toolArgs:e.args,cause:i.error});return{type:"tool-call",toolCallId:e.toolCallId,toolName:n,args:i.value}}function lhe(e){const t=e.filter(n=>n.type==="text").map(n=>n.text).join("");return t.length>0?t:void 0}function JO({text:e="",files:t,reasoning:n,tools:r,toolCalls:a,toolResults:i,messageId:o,generateMessageId:s}){const l=[];return l.push({role:"assistant",content:[...n.map(u=>u.type==="text"?{...u,type:"reasoning"}:{...u,type:"redacted-reasoning"}),...t.map(u=>({type:"file",data:u.base64,mimeType:u.mimeType})),{type:"text",text:e},...a],id:o}),i.length>0&&l.push({role:"tool",id:s(),content:i.map(u=>{const d=r[u.toolName];return(d==null?void 0:d.experimental_toToolResultContent)!=null?{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:d.experimental_toToolResultContent(u.result),experimental_content:d.experimental_toToolResultContent(u.result)}:{type:"tool-result",toolCallId:u.toolCallId,toolName:u.toolName,result:u.result}})}),l}kd({prefix:"aitxt",size:24});kd({prefix:"msg",size:24});var che={};cT(che,{object:()=>hhe,text:()=>fhe});var wL="AI_InvalidStreamPartError",_L=`vercel.ai.error.${wL}`,uhe=Symbol.for(_L),xL,dhe=class extends Tn{constructor({chunk:e,message:t}){super({name:wL,message:t}),this[xL]=!0,this.chunk=e}static isInstance(e){return Tn.hasMarker(e,_L)}};xL=uhe;var fhe=()=>({type:"text",responseFormat:()=>({type:"text"}),injectIntoSystemPrompt({system:e}){return e},parsePartial({text:e}){return{partial:e}},parseOutput({text:e}){return e}}),hhe=({schema:e})=>{const t=p1(e);return{type:"object",responseFormat:({model:n})=>({type:"json",schema:n.supportsStructuredOutputs?t.jsonSchema:void 0}),injectIntoSystemPrompt({system:n,model:r}){return r.supportsStructuredOutputs?n:Gfe({prompt:n,schema:t.jsonSchema})},parsePartial({text:n}){const r=Xue(n);switch(r.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:r.value};default:{const a=r.state;throw new Error(`Unsupported parse state: ${a}`)}}},parseOutput({text:n},r){const a=pd({text:n});if(!a.success)throw new WO({message:"No object generated: could not parse the response.",cause:a.error,text:n,response:r.response,usage:r.usage});const i=Lh({value:a.value,schema:t});if(!i.success)throw new WO({message:"No object generated: response did not match schema.",cause:i.error,text:n,response:r.response,usage:r.usage});return i.value}}};function SL(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function uT(e,t){const n=e.getReader(),r=t.getReader();let a,i,o=!1,s=!1;async function l(d){try{a==null&&(a=n.read());const h=await a;a=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}async function u(d){try{i==null&&(i=r.read());const h=await i;i=void 0,h.done?d.close():d.enqueue(h.value)}catch(h){d.error(h)}}return new ReadableStream({async pull(d){try{if(o){await u(d);return}if(s){await l(d);return}a==null&&(a=n.read()),i==null&&(i=r.read());const{result:h,reader:p}=await Promise.race([a.then(g=>({result:g,reader:n})),i.then(g=>({result:g,reader:r}))]);h.done||d.enqueue(h.value),p===n?(a=void 0,h.done&&(await u(d),o=!0)):(i=void 0,h.done&&(s=!0,await l(d)))}catch(h){d.error(h)}},cancel(){n.cancel(),r.cancel()}})}function phe({tools:e,generatorStream:t,toolCallStreaming:n,tracer:r,telemetry:a,system:i,messages:o,abortSignal:s,repairToolCall:l}){let u=null;const d=new ReadableStream({start(x){u=x}}),h={},p=new Set;let g=!1,v;function b(){g&&p.size===0&&(v!=null&&u.enqueue(v),u.close())}const _=new TransformStream({async transform(x,S){const E=x.type;switch(E){case"text-delta":case"reasoning":case"reasoning-signature":case"redacted-reasoning":case"source":case"response-metadata":case"error":{S.enqueue(x);break}case"file":{S.enqueue(new cfe({data:x.data,mimeType:x.mimeType}));break}case"tool-call-delta":{n&&(h[x.toolCallId]||(S.enqueue({type:"tool-call-streaming-start",toolCallId:x.toolCallId,toolName:x.toolName}),h[x.toolCallId]=!0),S.enqueue({type:"tool-call-delta",toolCallId:x.toolCallId,toolName:x.toolName,argsTextDelta:x.argsTextDelta}));break}case"tool-call":{try{const C=await she({toolCall:x,tools:e,repairToolCall:l,system:i,messages:o});S.enqueue(C);const k=e[C.toolName];if(k.execute!=null){const R=Rs();p.add(R),K2({name:"ai.toolCall",attributes:Qf({telemetry:a,attributes:{...W2({operationId:"ai.toolCall",telemetry:a}),"ai.toolCall.name":C.toolName,"ai.toolCall.id":C.toolCallId,"ai.toolCall.args":{output:()=>JSON.stringify(C.args)}}}),tracer:r,fn:async D=>k.execute(C.args,{toolCallId:C.toolCallId,messages:o,abortSignal:s}).then(O=>{u.enqueue({...C,type:"tool-result",result:O}),p.delete(R),b();try{D.setAttributes(Qf({telemetry:a,attributes:{"ai.toolCall.result":{output:()=>JSON.stringify(O)}}}))}catch{}},O=>{u.enqueue({type:"error",error:new Jfe({toolCallId:C.toolCallId,toolName:C.toolName,toolArgs:C.args,cause:O})}),p.delete(R),b()})})}}catch(C){u.enqueue({type:"error",error:C})}break}case"finish":{v={type:"finish",finishReason:x.finishReason,logprobs:x.logprobs,usage:zfe(x.usage),experimental_providerMetadata:x.providerMetadata};break}default:{const C=E;throw new Error(`Unhandled chunk type: ${C}`)}}},flush(){g=!0,b()}});return new ReadableStream({async start(x){return Promise.all([t.pipeThrough(_).pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){}})),d.pipeTo(new WritableStream({write(S){x.enqueue(S)},close(){x.close()}}))])}})}var mhe=kd({prefix:"aitxt",size:24}),ghe=kd({prefix:"msg",size:24});function yhe({model:e,tools:t,toolChoice:n,system:r,prompt:a,messages:i,maxRetries:o,abortSignal:s,headers:l,maxSteps:u=1,experimental_generateMessageId:d=ghe,experimental_output:h,experimental_continueSteps:p=!1,experimental_telemetry:g,experimental_providerMetadata:v,providerOptions:b=v,experimental_toolCallStreaming:_=!1,toolCallStreaming:x=_,experimental_activeTools:S,experimental_repairToolCall:E,experimental_transform:C,onChunk:k,onError:R,onFinish:D,onStepFinish:O,_internal:{now:L=Kfe,generateId:B=mhe,currentDate:Y=()=>new Date}={},...F}){return new vhe({model:e,telemetry:g,headers:l,settings:F,maxRetries:o,abortSignal:s,system:r,prompt:a,messages:i,tools:t,toolChoice:n,toolCallStreaming:x,transforms:SL(C),activeTools:S,repairToolCall:E,maxSteps:u,output:h,continueSteps:p,providerOptions:b,onChunk:k,onError:R,onFinish:D,onStepFinish:O,now:L,currentDate:Y,generateId:B,generateMessageId:d})}function bhe(e){if(!e)return new TransformStream({transform(i,o){o.enqueue({part:i,partialOutput:void 0})}});let t="",n="",r="";function a({controller:i,partialOutput:o=void 0}){i.enqueue({part:{type:"text-delta",textDelta:n},partialOutput:o}),n=""}return new TransformStream({transform(i,o){if(i.type==="step-finish"&&a({controller:o}),i.type!=="text-delta"){o.enqueue({part:i,partialOutput:void 0});return}t+=i.textDelta,n+=i.textDelta;const s=e.parsePartial({text:t});if(s!=null){const l=JSON.stringify(s.partial);l!==r&&(a({controller:o,partialOutput:s.partial}),r=l)}},flush(i){n.length>0&&a({controller:i})}})}var vhe=class{constructor({model:e,telemetry:t,headers:n,settings:r,maxRetries:a,abortSignal:i,system:o,prompt:s,messages:l,tools:u,toolChoice:d,toolCallStreaming:h,transforms:p,activeTools:g,repairToolCall:v,maxSteps:b,output:_,continueSteps:x,providerOptions:S,now:E,currentDate:C,generateId:k,generateMessageId:R,onChunk:D,onError:O,onFinish:L,onStepFinish:B}){this.warningsPromise=new Ai,this.usagePromise=new Ai,this.finishReasonPromise=new Ai,this.providerMetadataPromise=new Ai,this.textPromise=new Ai,this.reasoningPromise=new Ai,this.reasoningDetailsPromise=new Ai,this.sourcesPromise=new Ai,this.filesPromise=new Ai,this.toolCallsPromise=new Ai,this.toolResultsPromise=new Ai,this.requestPromise=new Ai,this.responsePromise=new Ai,this.stepsPromise=new Ai;var Y;if(b<1)throw new $o({parameter:"maxSteps",value:b,message:"maxSteps must be at least 1"});this.output=_;let F="",Z="",q="",ne=[],ae=[],re,ee=[];const ie=[],U={id:k(),timestamp:C(),modelId:e.modelId,messages:[]};let Q=[],X=[],de,be,_e="initial";const Pe=[];let Ne;const Re=new TransformStream({async transform(le,oe){oe.enqueue(le);const{part:J}=le;if((J.type==="text-delta"||J.type==="reasoning"||J.type==="source"||J.type==="tool-call"||J.type==="tool-result"||J.type==="tool-call-streaming-start"||J.type==="tool-call-delta")&&await(D==null?void 0:D({chunk:J})),J.type==="error"&&await(O==null?void 0:O({error:J.error})),J.type==="text-delta"&&(F+=J.textDelta,Z+=J.textDelta,q+=J.textDelta),J.type==="reasoning"&&(re==null?(re={type:"text",text:J.textDelta},ne.push(re)):re.text+=J.textDelta),J.type==="reasoning-signature"){if(re==null)throw new Tn({name:"InvalidStreamPart",message:"reasoning-signature without reasoning"});re.signature=J.signature,re=void 0}if(J.type==="redacted-reasoning"&&ne.push({type:"redacted",data:J.data}),J.type==="file"&&ae.push(J),J.type==="source"&&(ie.push(J.source),ee.push(J.source)),J.type==="tool-call"&&Q.push(J),J.type==="tool-result"&&X.push(J),J.type==="step-finish"){const xe=JO({text:Z,files:ae,reasoning:ne,tools:u??{},toolCalls:Q,toolResults:X,messageId:J.messageId,generateMessageId:R}),Me=Pe.length;let Ee="done";Me+1<b&&(x&&J.finishReason==="length"&&Q.length===0?Ee="continue":Q.length>0&&X.length===Q.length&&(Ee="tool-result"));const We={stepType:_e,text:F,reasoning:lhe(ne),reasoningDetails:ne,files:ae,sources:ee,toolCalls:Q,toolResults:X,finishReason:J.finishReason,usage:J.usage,warnings:J.warnings,logprobs:J.logprobs,request:J.request,response:{...J.response,messages:[...U.messages,...xe]},providerMetadata:J.experimental_providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,isContinued:J.isContinued};await(B==null?void 0:B(We)),Pe.push(We),Q=[],X=[],F="",ee=[],ne=[],ae=[],re=void 0,Ee!=="done"&&(_e=Ee),Ee!=="continue"&&(U.messages.push(...xe),Z="")}J.type==="finish"&&(U.id=J.response.id,U.timestamp=J.response.timestamp,U.modelId=J.response.modelId,U.headers=J.response.headers,be=J.usage,de=J.finishReason)},async flush(le){var oe;try{if(Pe.length===0)return;const J=Pe[Pe.length-1];Te.warningsPromise.resolve(J.warnings),Te.requestPromise.resolve(J.request),Te.responsePromise.resolve(J.response),Te.toolCallsPromise.resolve(J.toolCalls),Te.toolResultsPromise.resolve(J.toolResults),Te.providerMetadataPromise.resolve(J.experimental_providerMetadata),Te.reasoningPromise.resolve(J.reasoning),Te.reasoningDetailsPromise.resolve(J.reasoningDetails);const xe=de??"unknown",Me=be??{completionTokens:NaN,promptTokens:NaN,totalTokens:NaN};Te.finishReasonPromise.resolve(xe),Te.usagePromise.resolve(Me),Te.textPromise.resolve(q),Te.sourcesPromise.resolve(ie),Te.filesPromise.resolve(J.files),Te.stepsPromise.resolve(Pe),await(L==null?void 0:L({finishReason:xe,logprobs:void 0,usage:Me,text:q,reasoning:J.reasoning,reasoningDetails:J.reasoningDetails,files:J.files,sources:J.sources,toolCalls:J.toolCalls,toolResults:J.toolResults,request:(oe=J.request)!=null?oe:{},response:J.response,warnings:J.warnings,providerMetadata:J.providerMetadata,experimental_providerMetadata:J.experimental_providerMetadata,steps:Pe})),Ne.setAttributes(Qf({telemetry:t,attributes:{"ai.response.finishReason":xe,"ai.response.text":{output:()=>q},"ai.response.toolCalls":{output:()=>{var Ee;return(Ee=J.toolCalls)!=null&&Ee.length?JSON.stringify(J.toolCalls):void 0}},"ai.usage.promptTokens":Me.promptTokens,"ai.usage.completionTokens":Me.completionTokens}}))}catch(J){le.error(J)}finally{Ne.end()}}}),Ce=Wfe();this.addStream=Ce.addStream,this.closeStream=Ce.close;let Fe=Ce.stream;for(const le of p)Fe=Fe.pipeThrough(le({tools:u,stopStream(){Ce.terminate()}}));this.baseStream=Fe.pipeThrough(bhe(_)).pipeThrough(Re);const{maxRetries:Qe,retry:Le}=rfe({maxRetries:a}),Ie=sfe(t),V=afe({model:e,telemetry:t,headers:n,settings:{...r,maxRetries:Qe}}),me=Bfe({prompt:{system:(Y=_==null?void 0:_.injectIntoSystemPrompt({system:o,model:e}))!=null?Y:o,prompt:s,messages:l},tools:u}),Te=this;K2({name:"ai.streamText",attributes:Qf({telemetry:t,attributes:{...W2({operationId:"ai.streamText",telemetry:t}),...V,"ai.prompt":{input:()=>JSON.stringify({system:o,prompt:s,messages:l})},"ai.settings.maxSteps":b}}),tracer:Ie,endWhenDone:!1,fn:async le=>{Ne=le;async function oe({currentStep:J,responseMessages:xe,usage:Me,stepType:Ee,previousStepText:We,hasLeadingWhitespace:kt,messageId:at}){var _t;const jt=xe.length===0?me.type:"messages",Dt=[...me.messages,...xe],Gt=await wfe({prompt:{type:jt,system:me.system,messages:Dt},modelSupportsImageUrls:e.supportsImageUrls,modelSupportsUrl:(_t=e.supportsUrl)==null?void 0:_t.bind(e)}),ye={type:"regular",...ehe({tools:u,toolChoice:d,activeTools:g})},{result:{stream:I,warnings:G,rawResponse:fe,request:Oe},doStreamSpan:ve,startTimestampMs:ke}=await Le(()=>K2({name:"ai.streamText.doStream",attributes:Qf({telemetry:t,attributes:{...W2({operationId:"ai.streamText.doStream",telemetry:t}),...V,"ai.prompt.format":{input:()=>jt},"ai.prompt.messages":{input:()=>JSON.stringify(Gt)},"ai.prompt.tools":{input:()=>{var Tt;return(Tt=ye.tools)==null?void 0:Tt.map(Mt=>JSON.stringify(Mt))}},"ai.prompt.toolChoice":{input:()=>ye.toolChoice!=null?JSON.stringify(ye.toolChoice):void 0},"gen_ai.system":e.provider,"gen_ai.request.model":e.modelId,"gen_ai.request.frequency_penalty":r.frequencyPenalty,"gen_ai.request.max_tokens":r.maxTokens,"gen_ai.request.presence_penalty":r.presencePenalty,"gen_ai.request.stop_sequences":r.stopSequences,"gen_ai.request.temperature":r.temperature,"gen_ai.request.top_k":r.topK,"gen_ai.request.top_p":r.topP}}),tracer:Ie,endWhenDone:!1,fn:async Tt=>({startTimestampMs:E(),doStreamSpan:Tt,result:await e.doStream({mode:ye,...Efe(r),inputFormat:jt,responseFormat:_==null?void 0:_.responseFormat({model:e}),prompt:Gt,providerMetadata:S,abortSignal:i,headers:n})})})),ce=phe({tools:u,generatorStream:I,toolCallStreaming:h,tracer:Ie,telemetry:t,system:o,messages:Dt,repairToolCall:v,abortSignal:i}),ft=Oe??{},vt=[],M=[],Be=[],tt=[];let ge,De="unknown",Ke={promptTokens:0,completionTokens:0,totalTokens:0},Nt,pe=!0,H="",z=Ee==="continue"?We:"",W,he={id:k(),timestamp:C(),modelId:e.modelId},Ae="",He=!1,pt=!0,Vt=!1;async function ut({controller:Tt,chunk:Mt}){Tt.enqueue(Mt),H+=Mt.textDelta,z+=Mt.textDelta,He=!0,Vt=Mt.textDelta.trimEnd()!==Mt.textDelta}Te.addStream(ce.pipeThrough(new TransformStream({async transform(Tt,Mt){var Xt,An,zn;if(pe){const wr=E()-ke;pe=!1,ve.addEvent("ai.stream.firstChunk",{"ai.response.msToFirstChunk":wr}),ve.setAttributes({"ai.response.msToFirstChunk":wr}),Mt.enqueue({type:"step-start",messageId:at,request:ft,warnings:G??[]})}if(Tt.type==="text-delta"&&Tt.textDelta.length===0)return;const vr=Tt.type;switch(vr){case"text-delta":{if(x){const wr=pt&&kt?Tt.textDelta.trimStart():Tt.textDelta;if(wr.length===0)break;pt=!1,Ae+=wr;const jn=nhe(Ae);jn!=null&&(Ae=jn.suffix,await ut({controller:Mt,chunk:{type:"text-delta",textDelta:jn.prefix+jn.whitespace}}))}else await ut({controller:Mt,chunk:Tt});break}case"reasoning":{Mt.enqueue(Tt),ge==null?(ge={type:"text",text:Tt.textDelta},Be.push(ge)):ge.text+=Tt.textDelta;break}case"reasoning-signature":{if(Mt.enqueue(Tt),ge==null)throw new dhe({chunk:Tt,message:"reasoning-signature without reasoning"});ge.signature=Tt.signature,ge=void 0;break}case"redacted-reasoning":{Mt.enqueue(Tt),Be.push({type:"redacted",data:Tt.data});break}case"tool-call":{Mt.enqueue(Tt),vt.push(Tt);break}case"tool-result":{Mt.enqueue(Tt),M.push(Tt);break}case"response-metadata":{he={id:(Xt=Tt.id)!=null?Xt:he.id,timestamp:(An=Tt.timestamp)!=null?An:he.timestamp,modelId:(zn=Tt.modelId)!=null?zn:he.modelId};break}case"finish":{Ke=Tt.usage,De=Tt.finishReason,Nt=Tt.experimental_providerMetadata,W=Tt.logprobs;const wr=E()-ke;ve.addEvent("ai.stream.finish"),ve.setAttributes({"ai.response.msToFinish":wr,"ai.response.avgCompletionTokensPerSecond":1e3*Ke.completionTokens/wr});break}case"file":{tt.push(Tt),Mt.enqueue(Tt);break}case"source":case"tool-call-streaming-start":case"tool-call-delta":{Mt.enqueue(Tt);break}case"error":{Mt.enqueue(Tt),De="error";break}default:{const wr=vr;throw new Error(`Unknown chunk type: ${wr}`)}}},async flush(Tt){const Mt=vt.length>0?JSON.stringify(vt):void 0;let Xt="done";J+1<b&&(x&&De==="length"&&vt.length===0?Xt="continue":vt.length>0&&M.length===vt.length&&(Xt="tool-result")),x&&Ae.length>0&&(Xt!=="continue"||Ee==="continue"&&!He)&&(await ut({controller:Tt,chunk:{type:"text-delta",textDelta:Ae}}),Ae="");try{ve.setAttributes(Qf({telemetry:t,attributes:{"ai.response.finishReason":De,"ai.response.text":{output:()=>H},"ai.response.toolCalls":{output:()=>Mt},"ai.response.id":he.id,"ai.response.model":he.modelId,"ai.response.timestamp":he.timestamp.toISOString(),"ai.usage.promptTokens":Ke.promptTokens,"ai.usage.completionTokens":Ke.completionTokens,"gen_ai.response.finish_reasons":[De],"gen_ai.response.id":he.id,"gen_ai.response.model":he.modelId,"gen_ai.usage.input_tokens":Ke.promptTokens,"gen_ai.usage.output_tokens":Ke.completionTokens}}))}catch{}finally{ve.end()}Tt.enqueue({type:"step-finish",finishReason:De,usage:Ke,providerMetadata:Nt,experimental_providerMetadata:Nt,logprobs:W,request:ft,response:{...he,headers:fe==null?void 0:fe.headers},warnings:G,isContinued:Xt==="continue",messageId:at});const An=Ufe(Me,Ke);if(Xt==="done")Tt.enqueue({type:"finish",finishReason:De,usage:An,providerMetadata:Nt,experimental_providerMetadata:Nt,logprobs:W,response:{...he,headers:fe==null?void 0:fe.headers}}),Te.closeStream();else{if(Ee==="continue"){const zn=xe[xe.length-1];typeof zn.content=="string"?zn.content+=H:zn.content.push({text:H,type:"text"})}else xe.push(...JO({text:H,files:tt,reasoning:Be,tools:u??{},toolCalls:vt,toolResults:M,messageId:at,generateMessageId:R}));await oe({currentStep:J+1,responseMessages:xe,usage:An,stepType:Xt,previousStepText:z,hasLeadingWhitespace:Vt,messageId:Xt==="continue"?at:R()})}}})))}await oe({currentStep:0,responseMessages:[],usage:{promptTokens:0,completionTokens:0,totalTokens:0},previousStepText:"",stepType:"initial",hasLeadingWhitespace:!1,messageId:R()})}}).catch(le=>{Te.addStream(new ReadableStream({start(oe){oe.enqueue({type:"error",error:le}),oe.close()}})),Te.closeStream()})}get warnings(){return this.warningsPromise.value}get usage(){return this.usagePromise.value}get finishReason(){return this.finishReasonPromise.value}get experimental_providerMetadata(){return this.providerMetadataPromise.value}get providerMetadata(){return this.providerMetadataPromise.value}get text(){return this.textPromise.value}get reasoning(){return this.reasoningPromise.value}get reasoningDetails(){return this.reasoningDetailsPromise.value}get sources(){return this.sourcesPromise.value}get files(){return this.filesPromise.value}get toolCalls(){return this.toolCallsPromise.value}get toolResults(){return this.toolResultsPromise.value}get request(){return this.requestPromise.value}get response(){return this.responsePromise.value}get steps(){return this.stepsPromise.value}teeStream(){const[e,t]=this.baseStream.tee();return this.baseStream=t,e}get textStream(){return NE(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){e.type==="text-delta"&&t.enqueue(e.textDelta)}})))}get fullStream(){return NE(this.teeStream().pipeThrough(new TransformStream({transform({part:e},t){t.enqueue(e)}})))}async consumeStream(){const e=this.fullStream;for await(const t of e);}get experimental_partialOutputStream(){if(this.output==null)throw new Yfe;return NE(this.teeStream().pipeThrough(new TransformStream({transform({partialOutput:e},t){e!=null&&t.enqueue(e)}})))}toDataStreamInternal({getErrorMessage:e=()=>"An error occurred.",sendUsage:t=!0,sendReasoning:n=!1,sendSources:r=!1,experimental_sendFinish:a=!0}){return this.fullStream.pipeThrough(new TransformStream({transform:async(i,o)=>{const s=i.type;switch(s){case"text-delta":{o.enqueue(Qa("text",i.textDelta));break}case"reasoning":{n&&o.enqueue(Qa("reasoning",i.textDelta));break}case"redacted-reasoning":{n&&o.enqueue(Qa("redacted_reasoning",{data:i.data}));break}case"reasoning-signature":{n&&o.enqueue(Qa("reasoning_signature",{signature:i.signature}));break}case"file":{o.enqueue(Qa("file",{mimeType:i.mimeType,data:i.base64}));break}case"source":{r&&o.enqueue(Qa("source",i.source));break}case"tool-call-streaming-start":{o.enqueue(Qa("tool_call_streaming_start",{toolCallId:i.toolCallId,toolName:i.toolName}));break}case"tool-call-delta":{o.enqueue(Qa("tool_call_delta",{toolCallId:i.toolCallId,argsTextDelta:i.argsTextDelta}));break}case"tool-call":{o.enqueue(Qa("tool_call",{toolCallId:i.toolCallId,toolName:i.toolName,args:i.args}));break}case"tool-result":{o.enqueue(Qa("tool_result",{toolCallId:i.toolCallId,result:i.result}));break}case"error":{o.enqueue(Qa("error",e(i.error)));break}case"step-start":{o.enqueue(Qa("start_step",{messageId:i.messageId}));break}case"step-finish":{o.enqueue(Qa("finish_step",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0,isContinued:i.isContinued}));break}case"finish":{a&&o.enqueue(Qa("finish_message",{finishReason:i.finishReason,usage:t?{promptTokens:i.usage.promptTokens,completionTokens:i.usage.completionTokens}:void 0}));break}default:{const l=s;throw new Error(`Unknown chunk type: ${l}`)}}}}))}pipeDataStreamToResponse(e,{status:t,statusText:n,headers:r,data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:l,experimental_sendFinish:u}={}){VO({response:e,status:t,statusText:n,headers:qO(r,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"}),stream:this.toDataStream({data:a,getErrorMessage:i,sendUsage:o,sendReasoning:s,sendSources:l,experimental_sendFinish:u})})}pipeTextStreamToResponse(e,t){VO({response:e,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText,headers:qO(t==null?void 0:t.headers,{contentType:"text/plain; charset=utf-8"}),stream:this.textStream.pipeThrough(new TextEncoderStream)})}toDataStream(e){const t=this.toDataStreamInternal({getErrorMessage:e==null?void 0:e.getErrorMessage,sendUsage:e==null?void 0:e.sendUsage,sendReasoning:e==null?void 0:e.sendReasoning,sendSources:e==null?void 0:e.sendSources,experimental_sendFinish:e==null?void 0:e.experimental_sendFinish}).pipeThrough(new TextEncoderStream);return e!=null&&e.data?uT(e==null?void 0:e.data.stream,t):t}mergeIntoDataStream(e,t){e.merge(this.toDataStreamInternal({getErrorMessage:e.onError,sendUsage:t==null?void 0:t.sendUsage,sendReasoning:t==null?void 0:t.sendReasoning,sendSources:t==null?void 0:t.sendSources,experimental_sendFinish:t==null?void 0:t.experimental_sendFinish}))}toDataStreamResponse({headers:e,status:t,statusText:n,data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:l}={}){return new Response(this.toDataStream({data:r,getErrorMessage:a,sendUsage:i,sendReasoning:o,sendSources:s,experimental_sendFinish:l}),{status:t,statusText:n,headers:ew(e,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}toTextStreamResponse(e){var t;return new Response(this.textStream.pipeThrough(new TextEncoderStream),{status:(t=e==null?void 0:e.status)!=null?t:200,headers:ew(e==null?void 0:e.headers,{contentType:"text/plain; charset=utf-8"})})}};function whe(e,t){if(t.length===0)return null;const n=e.indexOf(t);if(n!==-1)return n;for(let r=e.length-1;r>=0;r--){const a=e.substring(r);if(t.startsWith(a))return r}return null}function _he({tagName:e,separator:t=`
`,startWithReasoning:n=!1}){const r=`<${e}>`,a=`</${e}>`;return{middlewareVersion:"v1",wrapGenerate:async({doGenerate:i})=>{const{text:o,...s}=await i();if(o==null)return{text:o,...s};const l=n?r+o:o,u=new RegExp(`${r}(.*?)${a}`,"gs"),d=Array.from(l.matchAll(u));if(!d.length)return{text:l,...s};const h=d.map(g=>g[1]).join(t);let p=l;for(let g=d.length-1;g>=0;g--){const v=d[g],b=p.slice(0,v.index),_=p.slice(v.index+v[0].length);p=b+(b.length>0&&_.length>0?t:"")+_}return{...s,text:p,reasoning:h}},wrapStream:async({doStream:i})=>{const{stream:o,...s}=await i();let l=!0,u=!0,d=!1,h=n,p="";return{stream:o.pipeThrough(new TransformStream({transform:(g,v)=>{if(g.type!=="text-delta"){v.enqueue(g);return}p+=g.textDelta;function b(_){if(_.length>0){const x=d&&(h?!l:!u)?t:"";v.enqueue({type:h?"reasoning":"text-delta",textDelta:x+_}),d=!1,h?l=!1:u=!1}}do{const _=h?a:r,x=whe(p,_);if(x==null){b(p),p="";break}if(b(p.slice(0,x)),x+_.length<=p.length)p=p.slice(x+_.length),h=!h,d=!0;else{p=p.slice(x);break}}while(!0)}})),...s}}}}var xhe=({model:e,middleware:t,modelId:n,providerId:r})=>SL(t).reverse().reduce((a,i)=>She({model:a,middleware:i,modelId:n,providerId:r}),e),She=({model:e,middleware:{transformParams:t,wrapGenerate:n,wrapStream:r},modelId:a,providerId:i})=>{var o;async function s({params:l,type:u}){return t?await t({params:l,type:u}):l}return{specificationVersion:"v1",provider:i??e.provider,modelId:a??e.modelId,defaultObjectGenerationMode:e.defaultObjectGenerationMode,supportsImageUrls:e.supportsImageUrls,supportsUrl:(o=e.supportsUrl)==null?void 0:o.bind(e),supportsStructuredOutputs:e.supportsStructuredOutputs,async doGenerate(l){const u=await s({params:l,type:"generate"}),d=async()=>e.doGenerate(u);return n?n({doGenerate:d,doStream:async()=>e.doStream(u),params:u,model:e}):d()},async doStream(l){const u=await s({params:l,type:"stream"}),d=async()=>e.doGenerate(u),h=async()=>e.doStream(u);return r?r({doGenerate:d,doStream:h,params:u,model:e}):h()}}},Ehe=$.object({name:$.string(),version:$.string()}).passthrough(),dT=$.object({_meta:$.optional($.object({}).passthrough())}).passthrough(),z0=dT,Che=$.object({method:$.string(),params:$.optional(dT)}),khe=$.object({experimental:$.optional($.object({}).passthrough()),logging:$.optional($.object({}).passthrough()),prompts:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough()),resources:$.optional($.object({subscribe:$.optional($.boolean()),listChanged:$.optional($.boolean())}).passthrough()),tools:$.optional($.object({listChanged:$.optional($.boolean())}).passthrough())}).passthrough();z0.extend({protocolVersion:$.string(),capabilities:khe,serverInfo:Ehe,instructions:$.optional($.string())});var The=z0.extend({nextCursor:$.optional($.string())}),Ahe=$.object({name:$.string(),description:$.optional($.string()),inputSchema:$.object({type:$.literal("object"),properties:$.optional($.object({}).passthrough())}).passthrough()}).passthrough();The.extend({tools:$.array(Ahe)});var Nhe=$.object({type:$.literal("text"),text:$.string()}).passthrough(),Rhe=$.object({type:$.literal("image"),data:$.string().base64(),mimeType:$.string()}).passthrough(),EL=$.object({uri:$.string(),mimeType:$.optional($.string())}).passthrough(),Ihe=EL.extend({text:$.string()}),Ohe=EL.extend({blob:$.string().base64()}),Dhe=$.object({type:$.literal("resource"),resource:$.union([Ihe,Ohe])}).passthrough();z0.extend({content:$.array($.union([Nhe,Rhe,Dhe])),isError:$.boolean().default(!1).optional()}).or(z0.extend({toolResult:$.unknown()}));var m1="2.0",jhe=$.object({jsonrpc:$.literal(m1),id:$.union([$.string(),$.number().int()])}).merge(Che).strict(),Mhe=$.object({jsonrpc:$.literal(m1),id:$.union([$.string(),$.number().int()]),result:z0}).strict(),Phe=$.object({jsonrpc:$.literal(m1),id:$.union([$.string(),$.number().int()]),error:$.object({code:$.number().int(),message:$.string(),data:$.optional($.unknown())})}).strict(),Fhe=$.object({jsonrpc:$.literal(m1)}).merge($.object({method:$.string(),params:$.optional(dT)})).strict();$.union([jhe,Fhe,Mhe,Phe]);var Lhe={};cT(Lhe,{mergeIntoDataStream:()=>zhe,toDataStream:()=>$he,toDataStreamResponse:()=>Bhe});function CL(e={}){const t=new TextEncoder;let n="";return new TransformStream({async start(){e.onStart&&await e.onStart()},async transform(r,a){a.enqueue(t.encode(r)),n+=r,e.onToken&&await e.onToken(r),e.onText&&typeof r=="string"&&await e.onText(r)},async flush(){e.onCompletion&&await e.onCompletion(n),e.onFinal&&await e.onFinal(n)}})}function fT(e,t){return e.pipeThrough(new TransformStream({transform:async(n,r)=>{var a;if(typeof n=="string"){r.enqueue(n);return}if("event"in n){n.event==="on_chat_model_stream"&&QO((a=n.data)==null?void 0:a.chunk,r);return}QO(n,r)}})).pipeThrough(CL(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(n,r)=>{r.enqueue(Qa("text",n))}}))}function $he(e,t){return fT(e,t).pipeThrough(new TextEncoderStream)}function Bhe(e,t){var n;const r=fT(e,t==null?void 0:t.callbacks).pipeThrough(new TextEncoderStream),a=t==null?void 0:t.data,i=t==null?void 0:t.init,o=a?uT(a.stream,r):r;return new Response(o,{status:(n=i==null?void 0:i.status)!=null?n:200,statusText:i==null?void 0:i.statusText,headers:ew(i==null?void 0:i.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function zhe(e,t){t.dataStream.merge(fT(e,t.callbacks))}function QO(e,t){if(typeof e.content=="string")t.enqueue(e.content);else{const n=e.content;for(const r of n)r.type==="text"&&t.enqueue(r.text)}}var Uhe={};cT(Uhe,{mergeIntoDataStream:()=>Vhe,toDataStream:()=>Hhe,toDataStreamResponse:()=>qhe});function hT(e,t){const n=Ghe();return eV(e[Symbol.asyncIterator]()).pipeThrough(new TransformStream({async transform(r,a){a.enqueue(n(r.delta))}})).pipeThrough(CL(t)).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform:async(r,a)=>{a.enqueue(Qa("text",r))}}))}function Hhe(e,t){return hT(e,t).pipeThrough(new TextEncoderStream)}function qhe(e,t={}){var n;const{init:r,data:a,callbacks:i}=t,o=hT(e,i).pipeThrough(new TextEncoderStream),s=a?uT(a.stream,o):o;return new Response(s,{status:(n=r==null?void 0:r.status)!=null?n:200,statusText:r==null?void 0:r.statusText,headers:ew(r==null?void 0:r.headers,{contentType:"text/plain; charset=utf-8",dataStreamVersion:"v1"})})}function Vhe(e,t){t.dataStream.merge(hT(e,t.callbacks))}function Ghe(){let e=!0;return t=>(e&&(t=t.trimStart(),t&&(e=!1)),t)}class Whe{static async executeInteraction(t,n,r){let a,i=!1;try{a=await yhe(n);for await(const o of a.fullStream){if(n.abortSignal.aborted){console.log(`[AIService] Stream ${t} aborted by signal.`);break}switch(o.type){case"text-delta":r.onChunk(o.textDelta);break;case"tool-call":r.onToolCall(o);break;case"tool-result":r.onToolResult(o);break;case"finish":i=!0,r.onFinish({finishReason:o.finishReason,usage:o.usage,providerMetadata:o.providerMetadata});break;case"error":r.onError(new Error(`AI Stream Error Part: ${o.error instanceof Error?o.error.message:o.error}`));return;default:break}}!n.abortSignal.aborted&&!i&&(console.warn(`[AIService] Stream ${t} ended without a 'finish' part.`),r.onError(new Error("Stream ended unexpectedly without a finish signal.")))}catch(o){console.error(`[AIService] Error during streamText call for ${t}:`,o),o instanceof Error&&o.name==="AbortError"||r.onError(o instanceof Error?o:new Error(String(o)))}finally{console.log(`[AIService] Stream processing loop finished for ${t}.`)}}}const X2={_activeControllers:new Map,_streamingToolData:new Map,async startInteraction(e,t,n){var Y,F,Z,q,ne,ae,re,ee,ie;console.log("[InteractionService] startInteraction called",e,t,n);const r=await _2(ev.INTERACTION_BEFORE_START,{prompt:e,conversationId:t});if(r===!1)return console.log("[InteractionService] Interaction start cancelled by middleware."),null;const a=r&&typeof r=="object"?r.prompt:e,i=Eo(),o=new AbortController;this._activeControllers.set(i,o),this._streamingToolData.set(i,{calls:[],results:[]});const s=or.getState(),u=s.interactions.filter(U=>U.conversationId===t),d=u.reduce((U,Q)=>Math.max(U,Q.index),-1)+1,h=u.length>0?u[u.length-1].id:null,p={id:i,conversationId:t,type:"message.user_assistant",prompt:{...n},response:null,status:"STREAMING",startedAt:new Date,endedAt:null,metadata:{...a.metadata||{},toolCalls:[],toolResults:[],reasoning:void 0},index:d,parentId:h};s._addInteractionToState(p),s._addStreamingId(i),Wt.saveInteraction({...p}).catch(U=>{console.error(`[InteractionService] Failed initial persistence for ${i}`,U)}),Ct.emit(xt.INTERACTION_STARTED,{interactionId:i,conversationId:t,type:p.type});const g=(Y=a.metadata)==null?void 0:Y.modelId;if(!g)return this._finalizeInteraction(i,"ERROR",new Error("No model ID specified in prompt metadata.")),null;const{providerId:v,modelId:b}=Zl(g);if(!v||!b)return this._finalizeInteraction(i,"ERROR",new Error(`Invalid combined model ID format: ${g}`)),null;const _=Bn.getState().dbProviderConfigs.find(U=>U.id===v);if(!_)return this._finalizeInteraction(i,"ERROR",new Error(`Provider configuration not found for ID: ${v}`)),null;const x=Bn.getState().getApiKeyForProvider(v),S=MM(_,b,x);if(!S)return this._finalizeInteraction(i,"ERROR",new Error(`Failed to instantiate model instance for ${g} from provider ${_.name}`)),null;console.log(`[InteractionService] Using model instance for ${g}`);const E=Mr.getState().getRegisteredTools(),k=(((F=a.metadata)==null?void 0:F.enabledTools)??[]).reduce((U,Q)=>{const X=E[Q];if(X!=null&&X.implementation){const de={...X.definition};de.execute=async be=>{const _e=or.getState().currentConversationId,Pe=_e?vn.getState().getConversationById(_e):null,Ne=(Pe==null?void 0:Pe.projectId)??"orphan";let Re;try{console.log(`[InteractionService Tool Execute] Ensuring VFS ready for key "${Ne}"...`),Re=await Go.getState().initializeVFS(Ne,{force:!0}),console.log(`[InteractionService Tool Execute] VFS ready for key "${Ne}".`)}catch(Ce){return console.error(`[InteractionService Tool Execute] VFS initialization error for key "${Ne}":`,Ce),{_isError:!0,error:`Filesystem error: ${Ce.message}`}}try{const Ce=vY(),Fe=X.definition.parameters.parse(be),Qe=X.implementation,Le={...Ce,fsInstance:Re};return await Qe(Fe,Le)}catch(Ce){const Fe=Ce instanceof Error?Ce.message:String(Ce);return Ce instanceof $.ZodError?{_isError:!0,error:`Invalid arguments: ${Ce.errors.map(Qe=>`${Qe.path.join(".")} (${Qe.message})`).join(", ")}`}:{_isError:!0,error:Fe}}},U[Q]=de}return U},{}),R=((Z=a.parameters)==null?void 0:Z.maxSteps)??Kr.getState().toolMaxSteps,D=_he({tagName:"reasoning"}),L={model:xhe({model:S,middleware:D}),messages:a.messages,abortSignal:o.signal,system:a.system,temperature:(q=a.parameters)==null?void 0:q.temperature,maxTokens:(ne=a.parameters)==null?void 0:ne.max_tokens,topP:(ae=a.parameters)==null?void 0:ae.top_p,topK:(re=a.parameters)==null?void 0:re.top_k,presencePenalty:(ee=a.parameters)==null?void 0:ee.presence_penalty,frequencyPenalty:(ie=a.parameters)==null?void 0:ie.frequency_penalty,maxSteps:R,...Object.keys(k).length>0&&{tools:k},toolChoice:a.toolChoice??(Object.keys(k).length>0?"auto":"none")},B={onChunk:U=>this._handleChunk(i,U),onToolCall:U=>this._handleToolCall(i,U),onToolResult:U=>this._handleToolResult(i,U),onFinish:U=>this._handleFinish(i,U),onError:U=>this._handleError(i,U)};return console.log(`[InteractionService] Calling AIService.executeInteraction for ${i}`),Whe.executeInteraction(i,L,B).catch(U=>{console.error(`[InteractionService] Error calling AIService.executeInteraction for ${i}:`,U),this._handleError(i,U instanceof Error?U:new Error("Failed to start AI execution"))}),i},abortInteraction(e){console.log(`[InteractionService] Aborting interaction ${e}`);const t=this._activeControllers.get(e);t&&!t.signal.aborted?(t.abort(),lt.info("Interaction cancelled.")):(console.warn(`[InteractionService] No active controller found or already aborted for ${e}.`),or.getState().streamingInteractionIds.includes(e)&&(console.warn(`[InteractionService] Forcing cleanup for potentially stuck interaction ${e}`),this._finalizeInteraction(e,"CANCELLED",new Error("Interaction aborted manually (controller missing)"))))},async _handleChunk(e,t){const n={interactionId:e,chunk:t},r=await _2(ev.INTERACTION_PROCESS_CHUNK,n);if(r!==!1){const a=r&&typeof r=="object"&&"chunk"in r?r.chunk:t;or.getState().appendInteractionResponseChunk(e,a),Ct.emit(xt.INTERACTION_STREAM_CHUNK,{interactionId:e,chunk:a})}},_handleToolCall(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.calls.push(n),this._streamingToolData.set(e,r),or.getState()._updateInteractionInState(e,{metadata:{toolCalls:[...r.calls]}})}catch(n){console.error(`[InteractionService] Failed to process tool call for ${e}:`,n)}},_handleToolResult(e,t){try{const n=JSON.stringify(t),r=this._streamingToolData.get(e)||{calls:[],results:[]};r.results.push(n),this._streamingToolData.set(e,r),or.getState()._updateInteractionInState(e,{metadata:{toolResults:[...r.results]}})}catch(n){console.error(`[InteractionService] Failed to process tool result for ${e}:`,n)}},_handleFinish(e,t){console.log(`[InteractionService] Finishing interaction ${e}. Reason: ${t.finishReason}`),this._finalizeInteraction(e,"COMPLETED",void 0,t)},_handleError(e,t){console.error(`[InteractionService] Handling error for interaction ${e}:`,t);const n=t.name==="AbortError";this._finalizeInteraction(e,n?"CANCELLED":"ERROR",n?void 0:t)},_finalizeInteraction(e,t,n,r){var v;const a=or.getState(),i=a.interactions.find(b=>b.id===e);if(!i||i.status!=="STREAMING"){console.warn(`[InteractionService] Interaction ${e} already finalized or not found. Skipping finalization with status ${t}.`),this._activeControllers.delete(e),this._streamingToolData.delete(e);return}const o=a.activeStreamBuffers[e]??"",s=this._streamingToolData.get(e)||{calls:[],results:[]},l=i.metadata||{};console.log(`[InteractionService] Finalizing ${e}. Buffered Content Length: ${o.length}`);const u=r==null?void 0:r.reasoning,d={status:t,endedAt:new Date,response:o||null,metadata:{...l,...(r==null?void 0:r.usage)&&{promptTokens:r.usage.promptTokens,completionTokens:r.usage.completionTokens,totalTokens:r.usage.totalTokens},...(r==null?void 0:r.providerMetadata)&&{providerMetadata:r.providerMetadata},toolCalls:s.calls,toolResults:s.results,reasoning:u,...(t==="ERROR"||t==="WARNING"||t==="CANCELLED")&&{error:(n==null?void 0:n.message)??"Interaction ended unexpectedly."}}};a._updateInteractionInState(e,d),a._removeStreamingId(e);const h=or.getState().interactions.find(b=>b.id===e);h?(console.log(`[InteractionService] Persisting final state for ${e}. Response length: ${((v=h.response)==null?void 0:v.length)??0}`),Wt.saveInteraction({...h}).catch(b=>{console.error(`[InteractionService] Failed final persistence for ${e}`,b)})):console.error(`[InteractionService] CRITICAL - Could not find final state for interaction ${e} to persist.`);let p=[],g=[];try{p=s.calls.map(b=>JSON.parse(b)),g=s.results.map(b=>JSON.parse(b))}catch(b){console.error("[InteractionService] Failed to parse tool strings for event emitter:",b)}Ct.emit(xt.INTERACTION_COMPLETED,{interactionId:e,status:t,error:n==null?void 0:n.message,toolCalls:p,toolResults:g}),this._activeControllers.delete(e),this._streamingToolData.delete(e),console.log(`[InteractionService] Finalized interaction ${e} with status ${t}.`)}},Cs=(e,t)=>{Ct.emit(xt.PROMPT_PARAMS_CHANGED,{params:{[e]:t}})},Sa=es(ts((e,t)=>({modelId:null,temperature:null,maxTokens:null,topP:null,topK:null,presencePenalty:null,frequencyPenalty:null,reasoningEnabled:null,webSearchEnabled:null,structuredOutputJson:null,setModelId:n=>{t().modelId!==n&&(e({modelId:n}),Cs("modelId",n))},setTemperature:n=>{t().temperature!==n&&(e({temperature:n}),Cs("temperature",n))},setMaxTokens:n=>{t().maxTokens!==n&&(e({maxTokens:n}),Cs("maxTokens",n))},setTopP:n=>{t().topP!==n&&(e({topP:n}),Cs("topP",n))},setTopK:n=>{t().topK!==n&&(e({topK:n}),Cs("topK",n))},setPresencePenalty:n=>{t().presencePenalty!==n&&(e({presencePenalty:n}),Cs("presencePenalty",n))},setFrequencyPenalty:n=>{t().frequencyPenalty!==n&&(e({frequencyPenalty:n}),Cs("frequencyPenalty",n))},setReasoningEnabled:n=>{t().reasoningEnabled!==n&&(e({reasoningEnabled:n}),Cs("reasoningEnabled",n))},setWebSearchEnabled:n=>{t().webSearchEnabled!==n&&(e({webSearchEnabled:n}),Cs("webSearchEnabled",n))},setStructuredOutputJson:n=>{t().structuredOutputJson!==n&&(e({structuredOutputJson:n}),Cs("structuredOutputJson",n))},initializePromptState:n=>{console.log("[PromptStateStore] Initializing with:",n);const r=t(),a={};let i=!1;r.modelId!==n.modelId&&(a.modelId=n.modelId,i=!0),r.temperature!==n.temperature&&(a.temperature=n.temperature,i=!0),r.maxTokens!==n.maxTokens&&(a.maxTokens=n.maxTokens,i=!0),r.topP!==n.topP&&(a.topP=n.topP,i=!0),r.topK!==n.topK&&(a.topK=n.topK,i=!0),r.presencePenalty!==n.presencePenalty&&(a.presencePenalty=n.presencePenalty,i=!0),r.frequencyPenalty!==n.frequencyPenalty&&(a.frequencyPenalty=n.frequencyPenalty,i=!0),i&&(e(a),Ct.emit(xt.PROMPT_PARAMS_CHANGED,{params:a}))},resetTransientParameters:()=>{console.log("[PromptStateStore] Resetting transient parameters.");const n=t(),r={};let a=!1;n.temperature!==null&&(r.temperature=null,a=!0),n.maxTokens!==null&&(r.maxTokens=null,a=!0),n.topP!==null&&(r.topP=null,a=!0),n.topK!==null&&(r.topK=null,a=!0),n.presencePenalty!==null&&(r.presencePenalty=null,a=!0),n.frequencyPenalty!==null&&(r.frequencyPenalty=null,a=!0),n.reasoningEnabled!==null&&(r.reasoningEnabled=null,a=!0),n.webSearchEnabled!==null&&(r.webSearchEnabled=null,a=!0),n.structuredOutputJson!==null&&(r.structuredOutputJson=null,a=!0),a&&(e(r),Ct.emit(xt.PROMPT_PARAMS_CHANGED,{params:r}))}}))),e6={async submitPrompt(e){var S,E,C;console.log("[ConversationService] submitPrompt called",e);const t=or.getState(),n=yi.getState(),r=Sa.getState(),a=vn.getState(),i=t.currentConversationId;if(!i){lt.error("Cannot submit prompt: No active conversation."),console.error("[ConversationService] submitPrompt failed: No conversationId.");return}const o=a.getConversationById(i),s=(o==null?void 0:o.projectId)??null,u=t.interactions.filter(k=>k.status==="COMPLETED"&&k.type==="message.user_assistant"),d=J3(u),h=[];e.content&&h.push({type:"text",text:e.content});const p=((S=e.metadata)==null?void 0:S.attachedFiles)??[];if(p.length>0){const k=await this._processFilesForPrompt(p,i);h.unshift(...k)}h.length>0?d.push({role:"user",content:h}):console.warn("[ConversationService] No user text or file content found in turnData. Submitting without user message.");const g=(E=e.metadata)==null?void 0:E.turnSystemPrompt,v=n.getEffectiveProjectSettings(s),b=g??v.systemPrompt??void 0,_={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...e.parameters??{}};Object.keys(_).forEach(k=>{(_[k]===null||_[k]===void 0)&&delete _[k]});const x={system:b,messages:d,parameters:_,metadata:{...(({turnSystemPrompt:k,...R})=>R)(e.metadata??{}),modelId:r.modelId,attachedFiles:(C=e.metadata.attachedFiles)==null?void 0:C.map(({contentBase64:k,contentText:R,...D})=>D)}};try{await X2.startInteraction(x,i,e)}catch(k){throw console.error("[ConversationService] Error starting interaction:",k),lt.error(`Failed to start interaction: ${k instanceof Error?k.message:String(k)}`),k}},async regenerateInteraction(e){var C,k;console.log("[ConversationService] regenerateInteraction called",e);const t=or.getState(),n=yi.getState(),r=Sa.getState(),a=vn.getState(),i=t.interactions.find(R=>R.id===e);if(!i||!i.prompt){lt.error("Cannot regenerate: Original interaction data missing.");return}const o=i.prompt,s=i.conversationId,l=a.getConversationById(s),u=(l==null?void 0:l.projectId)??null,d=i.index,h=t.interactions.filter(R=>R.conversationId===s&&R.index<d&&R.status==="COMPLETED"&&R.type==="message.user_assistant").sort((R,D)=>R.index-D.index),p=J3(h),g=[];o.content&&g.push({type:"text",text:o.content});const v=((C=o.metadata)==null?void 0:C.attachedFiles)??[];if(v.length>0){const R=await this._processFilesForPrompt(v,s);g.unshift(...R)}g.length>0?p.push({role:"user",content:g}):console.warn("[ConversationService] No user text or file content found in original turnData for regeneration.");const b=(k=o.metadata)==null?void 0:k.turnSystemPrompt,_=n.getEffectiveProjectSettings(u),x=b??_.systemPrompt??void 0,S={temperature:r.temperature,max_tokens:r.maxTokens,top_p:r.topP,top_k:r.topK,presence_penalty:r.presencePenalty,frequency_penalty:r.frequencyPenalty,...o.parameters??{}};Object.keys(S).forEach(R=>{(S[R]===null||S[R]===void 0)&&delete S[R]});const E={system:x,messages:p,parameters:S,metadata:{...(({turnSystemPrompt:R,...D})=>D)(o.metadata??{}),modelId:r.modelId,regeneratedFromId:e,attachedFiles:v.map(({contentBase64:R,contentText:D,...O})=>O)}};try{await X2.startInteraction(E,s,o)}catch(R){throw console.error("[ConversationService] Error starting regeneration interaction:",R),lt.error(`Failed to start regeneration: ${R instanceof Error?R.message:String(R)}`),R}},async _processFilesForPrompt(e,t){const n=[],r=e.filter(i=>i.source==="vfs");let a;if(r.length>0){const i=vn.getState().getConversationById(t),o=(i==null?void 0:i.projectId)??"orphan";try{a=await this._ensureVfsReady(o)}catch{lt.error(`Filesystem unavailable for key ${o}. VFS files cannot be processed.`),r.forEach(l=>{n.push({type:"text",text:`[Skipped VFS file: ${l.name} - Filesystem unavailable]`})}),a=void 0}}for(const i of e){let o=null;try{if(i.source==="direct")o=X3(i);else if(i.source==="vfs"&&a&&i.path){console.log(`[ConversationService] Fetching VFS file: ${i.path}`);const s=await Bd(i.path,{fsInstance:a});o=X3({...i,contentBytes:s})}else if(i.source==="vfs"&&!a)continue;o&&n.push(o)}catch(s){console.error(`[ConversationService] Error processing file ${i.name}:`,s),n.push({type:"text",text:`[Error processing file: ${i.name}]`})}}return n},async _ensureVfsReady(e){console.log(`[ConversationService] Ensuring VFS ready for key "${e}"...`);try{const t=await Go.getState().initializeVFS(e,{force:!0});return console.log(`[ConversationService] VFS ready for key "${e}".`),t}catch(t){throw console.error(`[ConversationService] Failed to ensure VFS ready for key ${e}:`,t),t}}},U0=es(ts((e,t)=>({dbMods:[],loadedMods:[],modSettingsTabs:[],isLoading:!1,error:null,loadDbMods:async()=>{e({isLoading:!0,error:null});try{const n=await Wt.loadMods();e({dbMods:n,isLoading:!1})}catch(n){const r="Failed to load mods";console.error("ModStore: Error loading mods",n),e({error:r,isLoading:!1}),lt.error(r)}},addDbMod:async n=>{const r=Eo(),a={id:r,createdAt:new Date,...n,loadOrder:n.loadOrder??Date.now()};e(i=>{i.dbMods.push(a),i.dbMods.sort((o,s)=>o.loadOrder-s.loadOrder)});try{return await Wt.saveMod(a),lt.success(`Mod "${a.name}" added.`),r}catch(i){const o="Failed to save new mod";throw console.error("ModStore: Error adding mod",i),e(s=>{s.dbMods=s.dbMods.filter(l=>l.id!==r),s.error=o}),lt.error(o),i}},updateDbMod:async(n,r)=>{let a,i=-1;e(s=>{i=s.dbMods.findIndex(l=>l.id===n),i!==-1?(a={...s.dbMods[i]},s.dbMods[i]={...s.dbMods[i],...r},r.loadOrder!==void 0&&s.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder)):console.warn(`ModStore: Mod ${n} not found for update.`)});const o=i!==-1?t().dbMods[i]:void 0;if(o)try{await Wt.saveMod(o),lt.success(`Mod "${o.name}" updated.`)}catch(s){const l="Failed to save mod update";throw console.error("ModStore: Error updating mod",s),e(u=>{const d=u.dbMods.findIndex(h=>h.id===n);d!==-1&&a&&(u.dbMods[d]=a,u.dbMods.sort((h,p)=>h.loadOrder-p.loadOrder)),u.error=l}),lt.error(l),s}},deleteDbMod:async n=>{const r=t().dbMods.find(i=>i.id===n);if(!r){console.warn(`ModStore: Mod ${n} not found for deletion.`);return}const a=r.name;e(i=>({dbMods:i.dbMods.filter(o=>o.id!==n)}));try{await Wt.deleteMod(n),lt.success(`Mod "${a}" deleted.`)}catch(i){const o="Failed to delete mod";throw console.error("ModStore: Error deleting mod",i),e(s=>{s.dbMods.push(r),s.dbMods.sort((l,u)=>l.loadOrder-u.loadOrder),s.error=o}),lt.error(o),i}},setLoadedMods:n=>{e({loadedMods:n})},_addSettingsTab:n=>{e(r=>{r.modSettingsTabs.some(a=>a.id===n.id)||(r.modSettingsTabs.push(n),r.modSettingsTabs.sort((a,i)=>(a.order??999)-(i.order??999)))})},_removeSettingsTab:n=>{e(r=>{r.modSettingsTabs=r.modSettingsTabs.filter(a=>a.id!==n)})}})));function t6(e){const t=e.id,n=e.name,r=Mr.getState(),a=U0.getState();return{modId:t,modName:n,registerPromptControl:o=>r.registerPromptControl(o),registerChatControl:o=>{const s={...o,status:o.status??(()=>"ready")};return r.registerChatControl(s)},registerTool:(o,s,l)=>(console.log(`[${n}] Registering tool: ${o}`),r.registerTool(t,o,s,l)),on:(o,s)=>(Ct.on(o,s),()=>Ct.off(o,s)),addMiddleware:(o,s)=>r.registerMiddleware(o,t,s),registerSettingsTab:o=>(a._addSettingsTab(o),()=>a._removeSettingsTab(o.id)),getContextSnapshot:()=>{const o=or.getState(),s=vn.getState(),l=Kr.getState(),u=Bn.getState(),{providerId:d}=Zl(u.selectedModelId),h=s.selectedItemType==="conversation"?s.selectedItemId:null;return Object.freeze({selectedConversationId:h,interactions:Object.freeze(o.currentConversationId===h?o.interactions.map(p=>Object.freeze({...p})):[]),isStreaming:o.status==="streaming",selectedProviderId:d,selectedModelId:u.selectedModelId,activeSystemPrompt:l.globalSystemPrompt,temperature:l.temperature,maxTokens:l.maxTokens,theme:l.theme})},showToast:(o,s)=>{lt[o](`[${n}] ${s}`)},log:(o,...s)=>{console[o](`[Mod: ${n}]`,...s)}}}async function Khe(e){const t=e.filter(r=>r.enabled),n=await Promise.all(t.map(async r=>{let a=r.scriptContent,i=null,o=null;try{if(i=t6(r),r.sourceUrl){console.log(`[ModLoader] Fetching script for ${r.name} from ${r.sourceUrl}`);try{const u=await fetch(r.sourceUrl);if(!u.ok)throw new Error(`Failed to fetch mod script: ${u.status} ${u.statusText}`);a=await u.text(),console.log(`[ModLoader] Successfully fetched script for ${r.name}`)}catch(u){throw console.error(`[ModLoader] Error fetching script from ${r.sourceUrl}:`,u),u}}if(!a)throw new Error("Mod script content is empty.");new Function("modApi",a)(i),console.log(`[ModLoader] Successfully executed script for ${r.name}`)}catch(l){o=l instanceof Error?l:String(l),console.error(`[ModLoader] Error loading mod "${r.name}":`,l),lt.error(`Error loading mod "${r.name}": ${o instanceof Error?o.message:o}`)}i||(i=t6(r));const s={id:r.id,name:r.name,api:i,error:o??void 0};return Ct.emit(s.error?xt.MOD_ERROR:xt.MOD_LOADED,{id:r.id,name:r.name,error:s.error}),s}));return Ct.emit(xt.APP_LOADED,void 0),console.log(`[ModLoader] Finished processing ${n.length} mods.`),n}var Zhe=(e,t,n,r,a,i,o,s)=>{let l=document.documentElement,u=["light","dark"];function d(g){(Array.isArray(e)?e:[e]).forEach(v=>{let b=v==="class",_=b&&i?a.map(x=>i[x]||x):a;b?(l.classList.remove(..._),l.classList.add(i&&i[g]?i[g]:g)):l.setAttribute(v,g)}),h(g)}function h(g){s&&u.includes(g)&&(l.style.colorScheme=g)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)d(r);else try{let g=localStorage.getItem(t)||n,v=o&&g==="system"?p():g;d(v)}catch{}},Yhe=N.createContext(void 0),Xhe={setTheme:e=>{},themes:[]},Jhe=()=>{var e;return(e=N.useContext(Yhe))!=null?e:Xhe};N.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:s,nonce:l,scriptProps:u})=>{let d=JSON.stringify([n,t,i,e,s,o,r,a]).slice(1,-1);return N.createElement("script",{...u,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${Zhe.toString()})(${d})`}})});const Qhe=({...e})=>{const{theme:t="system"}=Jhe();return y.jsx(mY,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})};function ap({className:e,...t}){return y.jsx("textarea",{"data-slot":"textarea",className:Rt("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}const kL=N.memo(N.forwardRef(({initialValue:e="",onSubmit:t,disabled:n,placeholder:r="Type message... (Shift+Enter for new line)",className:a,onValueChange:i,...o},s)=>{const l=N.useRef(null),[u,d]=N.useState(e);N.useImperativeHandle(s,()=>({getValue:()=>u,focus:()=>{var b;return(b=l.current)==null?void 0:b.focus()}}));const{focusInputOnNextRender:h,setFocusInputFlag:p}=Va(Sn(b=>({focusInputOnNextRender:b.focusInputOnNextRender,setFocusInputFlag:b.setFocusInputFlag})));N.useEffect(()=>{h&&l.current&&(p(!1),requestAnimationFrame(()=>{var b;(b=l.current)==null||b.focus()}))},[h,p]);const g=b=>{if(b.key==="Enter"&&!b.shiftKey&&!n){b.preventDefault();const _=Xc.getState().attachedFilesMetadata.length>0;(u.trim().length>0||_)&&(t(),d(""),i&&i(""))}},v=b=>{const _=b.target.value;d(_),i&&i(_)};return N.useEffect(()=>{const b=l.current;if(b){b.style.height="auto";const _=b.scrollHeight,x=250;b.style.height=`${Math.min(_,x)}px`,b.style.overflowY=_>x?"auto":"hidden"}},[u]),N.useEffect(()=>{d(e),i&&i(e)},[e,i]),y.jsx(ap,{ref:l,value:u,onChange:v,onKeyDown:g,disabled:n,placeholder:r,rows:1,className:Rt("w-full p-3 border rounded bg-input text-foreground resize-none focus:ring-2 focus:ring-primary outline-none disabled:opacity-50 overflow-y-auto","min-h-[40px] max-h-[250px]",a),"aria-label":"Chat input",...o})}));kL.displayName="InputArea";function Jn({className:e,type:t,...n}){return y.jsx("input",{type:t,"data-slot":"input",className:Rt("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}const TL=(e,t)=>{if(!t)return null;let n=Hm,r="text-muted-foreground/70",a=`Linked to ${t}`;switch(e){case"syncing":n=Vn,r="animate-spin text-blue-500",a=`Syncing with ${t}...`;break;case"error":n=lh,r="text-destructive",a=`Sync error with ${t}`;break;case"needs-sync":n=EC,r="text-orange-500",a=`Needs sync with ${t}`;break;case"idle":n=tD,r="text-green-500",a=`Synced with ${t}`;break;default:n=Hm,r="text-muted-foreground/70",a=`Linked to ${t} (Status: ${e??"Unknown"})`;break}return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(n,{className:Rt("h-3 w-3 ml-1 flex-shrink-0",r)})}),y.jsx(ar,{side:"right",children:a})]})})},nw=N.memo(({item:e,level:t,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:R,editInputRef:D})=>{const O=e.id===n,L=e.itemType==="project",B=e.id===v&&e.itemType===b,Y=L&&d.has(e.id),{projects:F,conversations:Z}=L?p(e.id,g):{projects:[],conversations:[]},q=F.length>0||Z.length>0,ne=!L&&e.syncRepoId?r[e.id]:void 0,ae=!L&&e.syncRepoId?a.get(e.syncRepoId):void 0,re=!L&&ae?TL(ne,ae):null,ee=Va(Ne=>Ne.openProjectSettingsModal),ie=()=>{B||(L&&q&&h(e.id),i(e.id,e.itemType))},U=Ne=>{Ne.stopPropagation(),L?window.confirm(`Delete project "${e.name}" and ALL its contents (sub-projects and conversations)? This cannot be undone.`)&&s(e.id,Ne):o(e.id,Ne)},Q=Ne=>{Ne.stopPropagation(),E(e)},X=Ne=>{Ne.stopPropagation(),L&&ee(e.id)},de=Ne=>{Ne.key==="Enter"?(Ne.preventDefault(),C()):Ne.key==="Escape"&&k()},be=L?e.name:e.title,_e=R?Vn:Ws,Pe=R?"h-3 w-3 animate-spin":"h-3 w-3";return y.jsxs(y.Fragment,{children:[y.jsxs("li",{className:Rt("flex justify-between items-center group p-1.5 text-xs rounded","border border-transparent",!B&&"hover:bg-muted/50 hover:text-primary/80",O&&!B?"bg-primary/10 text-primary font-medium border-primary dark:bg-primary/20 dark:border-primary/70":"",B&&"bg-muted ring-1 ring-primary",!B&&"cursor-pointer"),style:{paddingLeft:`${.375+t*.75}rem`},onClick:ie,children:[y.jsxs("div",{className:"flex items-center min-w-0 gap-1 flex-grow mr-1",children:[L&&q&&y.jsx("span",{className:"flex-shrink-0 w-3 cursor-pointer p-0.5 -ml-0.5",onClick:Ne=>{Ne.stopPropagation(),h(e.id)},children:Y?y.jsx(Kl,{className:"h-3 w-3 text-muted-foreground"}):y.jsx(CU,{className:"h-3 w-3 text-muted-foreground"})}),L&&!q&&y.jsx("span",{className:"w-3 flex-shrink-0"}),L?y.jsx(Z0,{className:"h-3.5 w-3.5 text-yellow-500 flex-shrink-0"}):y.jsx(SH,{className:"h-3.5 w-3.5 text-blue-400 flex-shrink-0"}),B?y.jsx(Jn,{ref:D,value:x,onChange:Ne=>S(Ne.target.value),onKeyDown:de,className:"h-6 px-1 py-0 text-xs flex-grow min-w-0",onClick:Ne=>Ne.stopPropagation(),disabled:R}):y.jsx("span",{className:"truncate pr-1",children:be}),re]}),y.jsx("div",{className:"flex items-center flex-shrink-0",children:B?y.jsxs(y.Fragment,{children:[y.jsx(sr,{tooltipText:"Save (Enter)",onClick:Ne=>{Ne.stopPropagation(),C()},disabled:R||!x.trim(),"aria-label":"Save changes",icon:y.jsx(_e,{}),iconClassName:Pe,className:"h-5 w-5 text-green-500 hover:text-green-600"}),y.jsx(sr,{tooltipText:"Cancel (Esc)",onClick:Ne=>{Ne.stopPropagation(),k()},disabled:R,"aria-label":"Cancel edit",icon:y.jsx(gu,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"})]}):y.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[L&&y.jsx(sr,{tooltipText:"Project Settings",onClick:X,"aria-label":`Settings for ${be}`,icon:y.jsx(FU,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),y.jsx(sr,{tooltipText:"Edit",onClick:Q,"aria-label":`Edit ${be}`,icon:y.jsx(SC,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}),L?y.jsx(sr,{tooltipText:"Export Project (JSON)",onClick:Ne=>u(e.id,Ne),"aria-label":`Export project ${be}`,icon:y.jsx(GU,{}),className:"h-5 w-5 text-muted-foreground hover:text-foreground"}):y.jsxs("div",{className:"relative group/export",children:[y.jsx(sr,{tooltipText:"Export Conversation","aria-label":`Export ${be}`,icon:y.jsx(Um,{}),className:"h-5 w-5 text-muted-foreground group-hover/export:text-foreground"}),y.jsxs("div",{className:`absolute right-0 top-full mt-1 hidden group-hover/export:flex
                                   bg-popover border border-border rounded-md shadow-lg p-0.5 z-10 gap-0.5`,onClick:Ne=>Ne.stopPropagation(),children:[y.jsx(Ht,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ne=>l(e.id,"json",Ne),children:"JSON"}),y.jsx(Ht,{variant:"ghost",size:"sm",className:"h-5 px-1.5 text-xs",onClick:Ne=>l(e.id,"md",Ne),children:"MD"})]})]}),y.jsx(sr,{tooltipText:"Delete",onClick:U,"aria-label":`Delete ${be}`,icon:y.jsx($s,{}),className:"h-5 w-5 text-destructive hover:text-destructive/80"})]})})]},e.id),L&&Y&&y.jsxs(y.Fragment,{children:[F.sort((Ne,Re)=>Re.updatedAt.getTime()-Ne.updatedAt.getTime()).map(Ne=>y.jsx(nw,{item:{...Ne,itemType:"project"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:R,editInputRef:D},Ne.id)),Z.sort((Ne,Re)=>Re.updatedAt.getTime()-Ne.updatedAt.getTime()).map(Ne=>y.jsx(nw,{item:{...Ne,itemType:"conversation"},level:t+1,selectedItemId:n,conversationSyncStatus:r,repoNameMap:a,onSelectItem:i,onDeleteConversation:o,onDeleteProject:s,onExportConversation:l,onExportProject:u,expandedProjects:d,toggleProjectExpansion:h,getChildren:p,filterText:g,editingItemId:v,editingItemType:b,originalName:_,localEditingName:x,setLocalEditingName:S,handleStartEditing:E,handleSaveEdit:C,handleCancelEdit:k,isSavingEdit:R,editInputRef:D},Ne.id))]})]})});nw.displayName="ConversationItemRenderer";function epe({updateProject:e,updateConversation:t,deleteProject:n}){const[r,a]=N.useState(null),[i,o]=N.useState(null),[s,l]=N.useState(""),[u,d]=N.useState(""),[h,p]=N.useState(!1),g=N.useRef(null),v=N.useCallback(x=>{a(x.id),o(x.itemType);const S=x.itemType==="project"?x.name:x.title;l(S),d(S),p(!1)},[]),b=N.useCallback(x=>{const S=r,E=x??(i==="project"&&s==="New Project");a(null),o(null),l(""),d(""),p(!1),E&&S&&(console.log(`Cancelling edit for new project ${S}, deleting...`),n(S).catch(C=>{console.error("Failed to delete new project on cancel:",C),lt.error("Failed to clean up cancelled new project.")}))},[r,i,s,n]),_=N.useCallback(async()=>{var E;if(!r||!i||h)return;const x=u.trim(),S=i==="project"&&s==="New Project";if(!x){lt.error("Name cannot be empty."),(E=g.current)==null||E.focus();return}if(x===s&&!S){b();return}p(!0);try{i==="project"?await e(r,{name:x}):await t(r,{title:x}),lt.success("Item renamed successfully."),a(null),o(null),l(""),d("")}catch(C){console.error("Failed to save item name:",C),lt.error(`Failed to rename item: ${C instanceof Error?C.message:String(C)}`)}finally{p(!1)}},[r,i,u,s,h,e,t,b]);return N.useEffect(()=>{r&&g.current&&(g.current.focus(),g.current.select())},[r]),{editingItemId:r,editingItemType:i,originalName:s,localEditingName:u,setLocalEditingName:d,isSavingEdit:h,editInputRef:g,handleStartEditing:v,handleSaveEdit:_,handleCancelEdit:b}}const J2=(e,t,n,r,a,i,o,s,l)=>{if(!n)return!0;const u=`${t}-${e}`;if(l[u]!==void 0)return l[u];let d=!1;{const h=i.get(e);if(h)if(h.name.toLowerCase().includes(n))d=!0;else{const p=s.get(e)||[],g=o.get(e)||[];for(const v of g)if(v.title.toLowerCase().includes(n)){d=!0;break}if(!d){for(const v of p)if(J2(v.id,"project",n,r,a,i,o,s,l)){d=!0;break}}}}return l[u]=d,d},tpe=()=>{const e=vn(me=>me.selectedItemId),t=vn(me=>me.selectedItemType),n=vn(me=>me.isLoading),r=yi(me=>me.isLoading),a=Va(me=>me.setFocusInputFlag),{conversations:i,syncRepos:o,conversationSyncStatus:s}=vn(Sn(me=>({conversations:me.conversations,syncRepos:me.syncRepos,conversationSyncStatus:me.conversationSyncStatus}))),l=yi(me=>me.projects),u=vn(me=>me.selectItem),d=vn(me=>me.addConversation),h=vn(me=>me.updateConversation),p=vn(me=>me.deleteConversation),g=vn(me=>me.exportConversation),v=vn(me=>me.exportProject),b=vn(me=>me.getConversationById),_=yi(me=>me.addProject),x=yi(me=>me.updateProject),S=yi(me=>me.deleteProject),E=yi(me=>me.getProjectById),[C,k]=yt.useState(new Set),[R,D]=N.useState(""),O=n||r,L=epe({updateProject:x,updateConversation:h,deleteProject:S,getProjectById:E,getConversationById:b}),{editingItemId:B,editingItemType:Y,originalName:F,localEditingName:Z,setLocalEditingName:q,isSavingEdit:ne,editInputRef:ae,handleStartEditing:re,handleSaveEdit:ee,handleCancelEdit:ie}=L,U=N.useCallback(me=>{k(Te=>{const le=new Set(Te);return le.has(me)?le.delete(me):le.add(me),le})},[]),Q=N.useCallback(()=>{if(t==="project")return e;if(t==="conversation"&&e){const me=b(e);return(me==null?void 0:me.projectId)??null}return null},[e,t,b]),X=N.useCallback(async()=>{if(!B)try{const me=Q(),Te=await d({title:"New Chat",projectId:me});u(Te,"conversation"),setTimeout(()=>a(!0),0)}catch(me){console.error("Failed to create new chat:",me),lt.error("Failed to create new chat.")}},[B,Q,d,u,a]),de=N.useCallback(async()=>{if(!B)try{const me=Q(),Te=await _({name:"New Project",parentId:me});u(Te,"project"),me&&k(le=>new Set(le).add(me)),setTimeout(()=>{const le=E(Te);le?re({...le,itemType:"project"}):console.warn("New project data not found, cannot start edit.")},50)}catch(me){console.error("Failed to create new project:",me)}},[B,Q,_,u,E,re]),be=N.useCallback((me,Te)=>{me!==B&&(B&&me!==B&&(Z.trim()&&Z.trim()!==F?ee():ie()),(me!==e||Te!==t)&&(u(me,Te),Te==="conversation"&&setTimeout(()=>a(!0),0)))},[B,Z,F,e,t,ee,ie,u,a]),_e=N.useCallback((me,Te)=>{Te.stopPropagation(),window.confirm("Delete this conversation? This cannot be undone.")&&p(me).catch(le=>{console.error("Failed to delete conversation:",le),lt.error("Failed to delete conversation.")})},[p]),Pe=N.useCallback((me,Te)=>{Te.stopPropagation(),S(me).catch(le=>{console.error("Failed to delete project:",le),lt.error("Failed to delete project.")})},[S]),Ne=N.useCallback(async(me,Te,le)=>{le.stopPropagation();try{await g(me,Te)}catch(oe){console.error(`Failed to export conversation as ${Te}:`,oe)}},[g]),Re=N.useCallback(async(me,Te)=>{Te.stopPropagation();try{await v(me)}catch(le){console.error("Failed to export project:",le)}},[v]),Ce=N.useMemo(()=>new Map((o||[]).map(me=>[me.id,me.name])),[o]),{projectsById:Fe,conversationsByProjectId:Qe,projectsByParentId:Le}=N.useMemo(()=>{const me=new Map(l.map(oe=>[oe.id,oe])),Te=new Map;i.forEach(oe=>{const J=oe.projectId??null;Te.has(J)||Te.set(J,[]),Te.get(J).push(oe)});const le=new Map;return l.forEach(oe=>{const J=oe.parentId??null;le.has(J)||le.set(J,[]),le.get(J).push(oe)}),{projectsById:me,conversationsByProjectId:Te,projectsByParentId:le}},[l,i]),Ie=N.useCallback((me,Te)=>{const le=Te.toLowerCase(),oe={},J=(Le.get(me)||[]).filter(Me=>J2(Me.id,"project",le,l,i,Fe,Qe,Le,oe)),xe=(Qe.get(me)||[]).filter(Me=>Me.title.toLowerCase().includes(le));return J.sort((Me,Ee)=>Ee.updatedAt.getTime()-Me.updatedAt.getTime()),xe.sort((Me,Ee)=>Ee.updatedAt.getTime()-Me.updatedAt.getTime()),{projects:J,conversations:xe}},[l,i,Fe,Qe,Le]),V=N.useMemo(()=>{const me=R.toLowerCase(),Te={},le=(Le.get(null)||[]).filter(xe=>J2(xe.id,"project",me,l,i,Fe,Qe,Le,Te)),oe=(Qe.get(null)||[]).filter(xe=>xe.title.toLowerCase().includes(me)),J=[...le.map(xe=>({...xe,itemType:"project"})),...oe.map(xe=>({...xe,itemType:"conversation"}))];return J.sort((xe,Me)=>Me.updatedAt.getTime()-xe.updatedAt.getTime()),J},[l,i,R,Fe,Qe,Le]);return y.jsxs("div",{className:"p-2 border-r border-[--border] bg-card text-card-foreground h-full flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-2 flex-shrink-0 px-1",children:[y.jsx("h3",{className:"text-sm font-semibold",children:"Workspace"}),y.jsxs("div",{className:"flex items-center",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{size:"sm",variant:"ghost",onClick:de,"aria-label":"New Project",disabled:O||!!B,className:"h-7 w-7 p-0",children:y.jsx(xC,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"bottom",children:"New Project"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{size:"sm",variant:"ghost",onClick:X,"aria-label":"New Chat",disabled:O||!!B,className:"h-7 w-7 p-0",children:y.jsx(dw,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"bottom",children:"New Chat"})]})})]})]}),y.jsxs("div",{className:"relative mb-2 px-1 flex-shrink-0",children:[y.jsx(Y0,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),y.jsx(Jn,{type:"search",placeholder:"Filter...",value:R,onChange:me=>D(me.target.value),className:"h-8 text-xs pl-8",disabled:O})]}),y.jsx(zd,{className:"flex-grow",children:O?y.jsxs("div",{className:"space-y-1 p-1",children:[y.jsx(Qr,{className:"h-8 w-full"}),y.jsx(Qr,{className:"h-8 w-full"}),y.jsx(Qr,{className:"h-8 w-full"})]}):V.length===0?y.jsx("p",{className:"text-xs text-muted-foreground p-2 text-center",children:R.trim()!==""?"No items match your filter.":"Workspace is empty."}):y.jsx("ul",{className:"space-y-0.5 p-1",children:V.map(me=>y.jsx(nw,{item:me,level:0,selectedItemId:e,conversationSyncStatus:s,repoNameMap:Ce,onSelectItem:be,onDeleteConversation:_e,onDeleteProject:Pe,onExportConversation:Ne,onExportProject:Re,expandedProjects:C,toggleProjectExpansion:U,getChildren:Ie,filterText:R,editingItemId:B,editingItemType:Y,originalName:F,localEditingName:Z,setLocalEditingName:q,handleStartEditing:re,handleSaveEdit:ee,handleCancelEdit:ie,isSavingEdit:ne,editInputRef:ae},me.id))})})]})},npe=()=>{const{addConversation:e,selectItem:t,selectedItemId:n,selectedItemType:r}=vn(Sn(u=>({addConversation:u.addConversation,selectItem:u.selectItem,selectedItemId:u.selectedItemId,selectedItemType:u.selectedItemType,getConversationById:u.getConversationById}))),{addProject:a}=yi(Sn(u=>({addProject:u.addProject,getProjectById:u.getProjectById}))),i=Va(u=>u.setFocusInputFlag),o=()=>{if(r==="project")return n;if(r==="conversation"&&n){const u=vn.getState().getConversationById(n);return(u==null?void 0:u.projectId)??null}return null},s=async()=>{try{const u=o(),d=await e({title:"New Chat",projectId:u});t(d,"conversation"),setTimeout(()=>i(!0),0)}catch(u){console.error("Failed to create new chat:",u)}},l=async()=>{try{const u=o(),d=await a({name:"New Project",parentId:u});t(d,"project")}catch(u){console.error("Failed to create new project:",u)}};return y.jsxs("div",{className:"flex flex-col items-center gap-2",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:l,className:"h-8 w-8","aria-label":"New Project",children:y.jsx(xC,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"right",children:"New Project"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:s,className:"h-8 w-8","aria-label":"New Chat",children:y.jsx(dw,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"right",children:"New Chat"})]})})]})};function rpe(){const e=Mr.getState().registerChatControl,t=vn.getState().isLoading;e({id:"core-conversation-list",panel:"sidebar",status:()=>t?"loading":"ready",renderer:()=>yt.createElement(tpe),iconRenderer:()=>yt.createElement(npe),show:()=>!0}),console.log("[Function] Registered Core Conversation List Control")}var RE="focusScope.autoFocusOnMount",IE="focusScope.autoFocusOnUnmount",n6={bubbles:!1,cancelable:!0},ape="FocusScope",Mg=N.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[s,l]=N.useState(null),u=Da(a),d=Da(i),h=N.useRef(null),p=kn(t,b=>l(b)),g=N.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;N.useEffect(()=>{if(r){let b=function(E){if(g.paused||!s)return;const C=E.target;s.contains(C)?h.current=C:Lc(h.current,{select:!0})},_=function(E){if(g.paused||!s)return;const C=E.relatedTarget;C!==null&&(s.contains(C)||Lc(h.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const k of E)k.removedNodes.length>0&&Lc(s)};document.addEventListener("focusin",b),document.addEventListener("focusout",_);const S=new MutationObserver(x);return s&&S.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",_),S.disconnect()}}},[r,s,g.paused]),N.useEffect(()=>{if(s){a6.add(g);const b=document.activeElement;if(!s.contains(b)){const x=new CustomEvent(RE,n6);s.addEventListener(RE,u),s.dispatchEvent(x),x.defaultPrevented||(ipe(upe(AL(s)),{select:!0}),document.activeElement===b&&Lc(s))}return()=>{s.removeEventListener(RE,u),setTimeout(()=>{const x=new CustomEvent(IE,n6);s.addEventListener(IE,d),s.dispatchEvent(x),x.defaultPrevented||Lc(b??document.body,{select:!0}),s.removeEventListener(IE,d),a6.remove(g)},0)}}},[s,u,d,g]);const v=N.useCallback(b=>{if(!n&&!r||g.paused)return;const _=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,x=document.activeElement;if(_&&x){const S=b.currentTarget,[E,C]=ope(S);E&&C?!b.shiftKey&&x===C?(b.preventDefault(),n&&Lc(E,{select:!0})):b.shiftKey&&x===E&&(b.preventDefault(),n&&Lc(C,{select:!0})):x===S&&b.preventDefault()}},[n,r,g.paused]);return y.jsx(tn.div,{tabIndex:-1,...o,ref:p,onKeyDown:v})});Mg.displayName=ape;function ipe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(Lc(r,{select:t}),document.activeElement!==n)return}function ope(e){const t=AL(e),n=r6(t,e),r=r6(t.reverse(),e);return[n,r]}function AL(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const a=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||a?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function r6(e,t){for(const n of e)if(!spe(n,{upTo:t}))return n}function spe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function lpe(e){return e instanceof HTMLInputElement&&"select"in e}function Lc(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&lpe(e)&&t&&e.select()}}var a6=cpe();function cpe(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=i6(e,t),e.unshift(t)},remove(t){var n;e=i6(e,t),(n=e[0])==null||n.resume()}}}function i6(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function upe(e){return e.filter(t=>t.tagName!=="A")}var OE=0;function g1(){N.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??o6()),document.body.insertAdjacentElement("beforeend",e[1]??o6()),OE++,()=>{OE===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),OE--}},[])}function o6(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Os=function(){return Os=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Os.apply(this,arguments)};function NL(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function dpe(e,t,n){if(n||arguments.length===2)for(var r=0,a=t.length,i;r<a;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}var Wb="right-scroll-bar-position",Kb="width-before-scroll-bar",fpe="with-scroll-bars-hidden",hpe="--removed-body-scroll-bar-size";function DE(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function ppe(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var a=n.value;a!==r&&(n.value=r,n.callback(r,a))}}}})[0];return n.callback=t,n.facade}var mpe=typeof window<"u"?N.useLayoutEffect:N.useEffect,s6=new WeakMap;function gpe(e,t){var n=ppe(null,function(r){return e.forEach(function(a){return DE(a,r)})});return mpe(function(){var r=s6.get(n);if(r){var a=new Set(r),i=new Set(e),o=n.current;a.forEach(function(s){i.has(s)||DE(s,null)}),i.forEach(function(s){a.has(s)||DE(s,o)})}s6.set(n,e)},[e]),n}function ype(e){return e}function bpe(e,t){t===void 0&&(t=ype);var n=[],r=!1,a={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(i){var o=t(i,r);return n.push(o),function(){n=n.filter(function(s){return s!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(s){return i(s)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var s=n;n=[],s.forEach(i),o=n}var l=function(){var d=o;o=[],d.forEach(i)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){o.push(d),u()},filter:function(d){return o=o.filter(d),n}}}};return a}function vpe(e){e===void 0&&(e={});var t=bpe(null);return t.options=Os({async:!0,ssr:!1},e),t}var RL=function(e){var t=e.sideCar,n=NL(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Os({},n))};RL.isSideCarExport=!0;function wpe(e,t){return e.useMedium(t),RL}var IL=vpe(),jE=function(){},y1=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:jE,onWheelCapture:jE,onTouchMoveCapture:jE}),a=r[0],i=r[1],o=e.forwardProps,s=e.children,l=e.className,u=e.removeScrollBar,d=e.enabled,h=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,b=e.allowPinchZoom,_=e.as,x=_===void 0?"div":_,S=e.gapMode,E=NL(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),C=p,k=gpe([n,t]),R=Os(Os({},E),a);return N.createElement(N.Fragment,null,d&&N.createElement(C,{sideCar:IL,removeScrollBar:u,shards:h,noIsolation:g,inert:v,setCallbacks:i,allowPinchZoom:!!b,lockRef:n,gapMode:S}),o?N.cloneElement(N.Children.only(s),Os(Os({},R),{ref:k})):N.createElement(x,Os({},R,{className:l,ref:k}),s))});y1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};y1.classNames={fullWidth:Kb,zeroRight:Wb};var _pe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xpe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=_pe();return t&&e.setAttribute("nonce",t),e}function Spe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Epe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var Cpe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=xpe())&&(Spe(t,n),Epe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},kpe=function(){var e=Cpe();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},OL=function(){var e=kpe(),t=function(n){var r=n.styles,a=n.dynamic;return e(r,a),null};return t},Tpe={left:0,top:0,right:0,gap:0},ME=function(e){return parseInt(e||"",10)||0},Ape=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[ME(n),ME(r),ME(a)]},Npe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Tpe;var t=Ape(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Rpe=OL(),oh="data-scroll-locked",Ipe=function(e,t,n,r){var a=e.left,i=e.top,o=e.right,s=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(fpe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(s,"px ").concat(r,`;
  }
  body[`).concat(oh,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Wb,` {
    right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Kb,` {
    margin-right: `).concat(s,"px ").concat(r,`;
  }
  
  .`).concat(Wb," .").concat(Wb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Kb," .").concat(Kb,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(oh,`] {
    `).concat(hpe,": ").concat(s,`px;
  }
`)},l6=function(){var e=parseInt(document.body.getAttribute(oh)||"0",10);return isFinite(e)?e:0},Ope=function(){N.useEffect(function(){return document.body.setAttribute(oh,(l6()+1).toString()),function(){var e=l6()-1;e<=0?document.body.removeAttribute(oh):document.body.setAttribute(oh,e.toString())}},[])},Dpe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=r===void 0?"margin":r;Ope();var i=N.useMemo(function(){return Npe(a)},[a]);return N.createElement(Rpe,{styles:Ipe(i,!t,a,n?"":"!important")})},Q2=!1;if(typeof window<"u")try{var Ib=Object.defineProperty({},"passive",{get:function(){return Q2=!0,!0}});window.addEventListener("test",Ib,Ib),window.removeEventListener("test",Ib,Ib)}catch{Q2=!1}var qf=Q2?{passive:!1}:!1,jpe=function(e){return e.tagName==="TEXTAREA"},DL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!jpe(e)&&n[t]==="visible")},Mpe=function(e){return DL(e,"overflowY")},Ppe=function(e){return DL(e,"overflowX")},c6=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var a=jL(e,r);if(a){var i=ML(e,r),o=i[1],s=i[2];if(o>s)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Fpe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Lpe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},jL=function(e,t){return e==="v"?Mpe(t):Ppe(t)},ML=function(e,t){return e==="v"?Fpe(t):Lpe(t)},$pe=function(e,t){return e==="h"&&t==="rtl"?-1:1},Bpe=function(e,t,n,r,a){var i=$pe(e,window.getComputedStyle(t).direction),o=i*r,s=n.target,l=t.contains(s),u=!1,d=o>0,h=0,p=0;do{var g=ML(e,s),v=g[0],b=g[1],_=g[2],x=b-_-i*v;(v||x)&&jL(e,s)&&(h+=x,p+=v),s instanceof ShadowRoot?s=s.host:s=s.parentNode}while(!l&&s!==document.body||l&&(t.contains(s)||t===s));return(d&&Math.abs(h)<1||!d&&Math.abs(p)<1)&&(u=!0),u},Ob=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},u6=function(e){return[e.deltaX,e.deltaY]},d6=function(e){return e&&"current"in e?e.current:e},zpe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Upe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Hpe=0,Vf=[];function qpe(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),a=N.useState(Hpe++)[0],i=N.useState(OL)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var b=dpe([e.lockRef.current],(e.shards||[]).map(d6),!0).filter(Boolean);return b.forEach(function(_){return _.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),b.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var s=N.useCallback(function(b,_){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!o.current.allowPinchZoom;var x=Ob(b),S=n.current,E="deltaX"in b?b.deltaX:S[0]-x[0],C="deltaY"in b?b.deltaY:S[1]-x[1],k,R=b.target,D=Math.abs(E)>Math.abs(C)?"h":"v";if("touches"in b&&D==="h"&&R.type==="range")return!1;var O=c6(D,R);if(!O)return!0;if(O?k=D:(k=D==="v"?"h":"v",O=c6(D,R)),!O)return!1;if(!r.current&&"changedTouches"in b&&(E||C)&&(r.current=k),!k)return!0;var L=r.current||k;return Bpe(L,_,b,L==="h"?E:C)},[]),l=N.useCallback(function(b){var _=b;if(!(!Vf.length||Vf[Vf.length-1]!==i)){var x="deltaY"in _?u6(_):Ob(_),S=t.current.filter(function(k){return k.name===_.type&&(k.target===_.target||_.target===k.shadowParent)&&zpe(k.delta,x)})[0];if(S&&S.should){_.cancelable&&_.preventDefault();return}if(!S){var E=(o.current.shards||[]).map(d6).filter(Boolean).filter(function(k){return k.contains(_.target)}),C=E.length>0?s(_,E[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),u=N.useCallback(function(b,_,x,S){var E={name:b,delta:_,target:x,should:S,shadowParent:Vpe(x)};t.current.push(E),setTimeout(function(){t.current=t.current.filter(function(C){return C!==E})},1)},[]),d=N.useCallback(function(b){n.current=Ob(b),r.current=void 0},[]),h=N.useCallback(function(b){u(b.type,u6(b),b.target,s(b,e.lockRef.current))},[]),p=N.useCallback(function(b){u(b.type,Ob(b),b.target,s(b,e.lockRef.current))},[]);N.useEffect(function(){return Vf.push(i),e.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:p}),document.addEventListener("wheel",l,qf),document.addEventListener("touchmove",l,qf),document.addEventListener("touchstart",d,qf),function(){Vf=Vf.filter(function(b){return b!==i}),document.removeEventListener("wheel",l,qf),document.removeEventListener("touchmove",l,qf),document.removeEventListener("touchstart",d,qf)}},[]);var g=e.removeScrollBar,v=e.inert;return N.createElement(N.Fragment,null,v?N.createElement(i,{styles:Upe(a)}):null,g?N.createElement(Dpe,{gapMode:e.gapMode}):null)}function Vpe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Gpe=wpe(IL,qpe);var Pg=N.forwardRef(function(e,t){return N.createElement(y1,Os({},e,{ref:t,sideCar:Gpe}))});Pg.classNames=y1.classNames;var Wpe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Gf=new WeakMap,Db=new WeakMap,jb={},PE=0,PL=function(e){return e&&(e.host||PL(e.parentNode))},Kpe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=PL(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Zpe=function(e,t,n,r){var a=Kpe(t,Array.isArray(e)?e:[e]);jb[n]||(jb[n]=new WeakMap);var i=jb[n],o=[],s=new Set,l=new Set(a),u=function(h){!h||s.has(h)||(s.add(h),u(h.parentNode))};a.forEach(u);var d=function(h){!h||l.has(h)||Array.prototype.forEach.call(h.children,function(p){if(s.has(p))d(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",b=(Gf.get(p)||0)+1,_=(i.get(p)||0)+1;Gf.set(p,b),i.set(p,_),o.push(p),b===1&&v&&Db.set(p,!0),_===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",p,x)}})};return d(t),s.clear(),PE++,function(){o.forEach(function(h){var p=Gf.get(h)-1,g=i.get(h)-1;Gf.set(h,p),i.set(h,g),p||(Db.has(h)||h.removeAttribute(r),Db.delete(h)),g||h.removeAttribute(n)}),PE--,PE||(Gf=new WeakMap,Gf=new WeakMap,Db=new WeakMap,jb={})}},b1=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=Wpe(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live]"))),Zpe(r,a,n,"aria-hidden")):function(){return null}},v1="Dialog",[FL,__e]=Pi(v1),[Ype,os]=FL(v1),LL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,s=N.useRef(null),l=N.useRef(null),[u,d]=qs({prop:r,defaultProp:a??!1,onChange:i,caller:v1});return y.jsx(Ype,{scope:t,triggerRef:s,contentRef:l,contentId:ni(),titleId:ni(),descriptionId:ni(),open:u,onOpenChange:d,onOpenToggle:N.useCallback(()=>d(h=>!h),[d]),modal:o,children:n})};LL.displayName=v1;var $L="DialogTrigger",Xpe=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=os($L,n),i=kn(t,a.triggerRef);return y.jsx(tn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":gT(a.open),...r,ref:i,onClick:qt(e.onClick,a.onOpenToggle)})});Xpe.displayName=$L;var pT="DialogPortal",[Jpe,BL]=FL(pT,{forceMount:void 0}),zL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,i=os(pT,t);return y.jsx(Jpe,{scope:t,forceMount:n,children:N.Children.map(r,o=>y.jsx(La,{present:n||i.open,children:y.jsx(Uh,{asChild:!0,container:a,children:o})}))})};zL.displayName=pT;var rw="DialogOverlay",UL=N.forwardRef((e,t)=>{const n=BL(rw,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=os(rw,e.__scopeDialog);return i.modal?y.jsx(La,{present:r||i.open,children:y.jsx(eme,{...a,ref:t})}):null});UL.displayName=rw;var Qpe=Yc("DialogOverlay.RemoveScroll"),eme=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=os(rw,n);return y.jsx(Pg,{as:Qpe,allowPinchZoom:!0,shards:[a.contentRef],children:y.jsx(tn.div,{"data-state":gT(a.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),_d="DialogContent",HL=N.forwardRef((e,t)=>{const n=BL(_d,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,i=os(_d,e.__scopeDialog);return y.jsx(La,{present:r||i.open,children:i.modal?y.jsx(tme,{...a,ref:t}):y.jsx(nme,{...a,ref:t})})});HL.displayName=_d;var tme=N.forwardRef((e,t)=>{const n=os(_d,e.__scopeDialog),r=N.useRef(null),a=kn(t,n.contentRef,r);return N.useEffect(()=>{const i=r.current;if(i)return b1(i)},[]),y.jsx(qL,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,s=o.button===0&&o.ctrlKey===!0;(o.button===2||s)&&i.preventDefault()}),onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault())})}),nme=N.forwardRef((e,t)=>{const n=os(_d,e.__scopeDialog),r=N.useRef(!1),a=N.useRef(!1);return y.jsx(qL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),qL=N.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,s=os(_d,n),l=N.useRef(null),u=kn(t,l);return g1(),y.jsxs(y.Fragment,{children:[y.jsx(Mg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx($h,{role:"dialog",id:s.contentId,"aria-describedby":s.descriptionId,"aria-labelledby":s.titleId,"data-state":gT(s.open),...o,ref:u,onDismiss:()=>s.onOpenChange(!1)})}),y.jsxs(y.Fragment,{children:[y.jsx(rme,{titleId:s.titleId}),y.jsx(ime,{contentRef:l,descriptionId:s.descriptionId})]})]})}),mT="DialogTitle",VL=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=os(mT,n);return y.jsx(tn.h2,{id:a.titleId,...r,ref:t})});VL.displayName=mT;var GL="DialogDescription",WL=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=os(GL,n);return y.jsx(tn.p,{id:a.descriptionId,...r,ref:t})});WL.displayName=GL;var KL="DialogClose",ZL=N.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=os(KL,n);return y.jsx(tn.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});ZL.displayName=KL;function gT(e){return e?"open":"closed"}var YL="DialogTitleWarning",[x_e,XL]=EY(YL,{contentName:_d,titleName:mT,docsSlug:"dialog"}),rme=({titleId:e})=>{const t=XL(YL),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return N.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},ame="DialogDescriptionWarning",ime=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${XL(ame).contentName}}.`;return N.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},JL=LL,QL=zL,e$=UL,t$=HL,ome=VL,sme=WL,n$=ZL;function yT({...e}){return y.jsx(JL,{"data-slot":"dialog",...e})}function lme({...e}){return y.jsx(QL,{"data-slot":"dialog-portal",...e})}function cme({...e}){return y.jsx(n$,{"data-slot":"dialog-close",...e})}function ume({className:e,...t}){return y.jsx(e$,{"data-slot":"dialog-overlay",className:Rt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function bT({className:e,children:t,...n}){return y.jsxs(lme,{"data-slot":"dialog-portal",children:[y.jsx(ume,{}),y.jsxs(t$,{"data-slot":"dialog-content",className:Rt("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,y.jsxs(n$,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[y.jsx(gu,{}),y.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function vT({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-header",className:Rt("flex flex-col gap-2 text-center sm:text-left",e),...t})}function wT({className:e,...t}){return y.jsx("div",{"data-slot":"dialog-footer",className:Rt("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function _T({className:e,...t}){return y.jsx(ome,{"data-slot":"dialog-title",className:Rt("text-lg leading-none font-semibold",e),...t})}function xT({className:e,...t}){return y.jsx(sme,{"data-slot":"dialog-description",className:Rt("text-muted-foreground text-sm",e),...t})}var dme="Label",r$=N.forwardRef((e,t)=>y.jsx(tn.label,{...e,ref:t,onMouseDown:n=>{var a;n.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));r$.displayName=dme;var fme=r$;function cn({className:e,...t}){return y.jsx(fme,{"data-slot":"label",className:Rt("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function w1(e){const t=N.useRef({value:e,previous:e});return N.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var _1="Switch",[hme,S_e]=Pi(_1),[pme,mme]=hme(_1),a$=N.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:l="on",onCheckedChange:u,form:d,...h}=e,[p,g]=N.useState(null),v=kn(t,E=>g(E)),b=N.useRef(!1),_=p?d||!!p.closest("form"):!0,[x,S]=qs({prop:a,defaultProp:i??!1,onChange:u,caller:_1});return y.jsxs(pme,{scope:n,checked:x,disabled:s,children:[y.jsx(tn.button,{type:"button",role:"switch","aria-checked":x,"aria-required":o,"data-state":l$(x),"data-disabled":s?"":void 0,disabled:s,value:l,...h,ref:v,onClick:qt(e.onClick,E=>{S(C=>!C),_&&(b.current=E.isPropagationStopped(),b.current||E.stopPropagation())})}),_&&y.jsx(s$,{control:p,bubbles:!b.current,name:r,value:l,checked:x,required:o,disabled:s,form:d,style:{transform:"translateX(-100%)"}})]})});a$.displayName=_1;var i$="SwitchThumb",o$=N.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,a=mme(i$,n);return y.jsx(tn.span,{"data-state":l$(a.checked),"data-disabled":a.disabled?"":void 0,...r,ref:t})});o$.displayName=i$;var gme="SwitchBubbleInput",s$=N.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...a},i)=>{const o=N.useRef(null),s=kn(o,i),l=w1(n),u=Nw(t);return N.useEffect(()=>{const d=o.current;if(!d)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(l!==n&&g){const v=new Event("click",{bubbles:r});g.call(d,n),d.dispatchEvent(v)}},[l,n,r]),y.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...a,tabIndex:-1,ref:s,style:{...a.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});s$.displayName=gme;function l$(e){return e?"checked":"unchecked"}var yme=a$,bme=o$;function Ls({className:e,...t}){return y.jsx(yme,{"data-slot":"switch",className:Rt("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(bme,{"data-slot":"switch-thumb",className:Rt("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}function x1(e){const t=e+"CollectionProvider",[n,r]=Pi(t),[a,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),o=b=>{const{scope:_,children:x}=b,S=yt.useRef(null),E=yt.useRef(new Map).current;return y.jsx(a,{scope:_,itemMap:E,collectionRef:S,children:x})};o.displayName=t;const s=e+"CollectionSlot",l=Yc(s),u=yt.forwardRef((b,_)=>{const{scope:x,children:S}=b,E=i(s,x),C=kn(_,E.collectionRef);return y.jsx(l,{ref:C,children:S})});u.displayName=s;const d=e+"CollectionItemSlot",h="data-radix-collection-item",p=Yc(d),g=yt.forwardRef((b,_)=>{const{scope:x,children:S,...E}=b,C=yt.useRef(null),k=kn(_,C),R=i(d,x);return yt.useEffect(()=>(R.itemMap.set(C,{ref:C,...E}),()=>void R.itemMap.delete(C))),y.jsx(p,{[h]:"",ref:k,children:S})});g.displayName=d;function v(b){const _=i(e+"CollectionConsumer",b);return yt.useCallback(()=>{const S=_.collectionRef.current;if(!S)return[];const E=Array.from(S.querySelectorAll(`[${h}]`));return Array.from(_.itemMap.values()).sort((R,D)=>E.indexOf(R.ref.current)-E.indexOf(D.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:u,ItemSlot:g},v,r]}var vme=[" ","Enter","ArrowUp","ArrowDown"],wme=[" ","Enter"],xd="Select",[S1,E1,_me]=x1(xd),[ip,E_e]=Pi(xd,[_me,yu]),C1=yu(),[xme,ku]=ip(xd),[Sme,Eme]=ip(xd),c$=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:a,onOpenChange:i,value:o,defaultValue:s,onValueChange:l,dir:u,name:d,autoComplete:h,disabled:p,required:g,form:v}=e,b=C1(t),[_,x]=N.useState(null),[S,E]=N.useState(null),[C,k]=N.useState(!1),R=rp(u),[D,O]=qs({prop:r,defaultProp:a??!1,onChange:i,caller:xd}),[L,B]=qs({prop:o,defaultProp:s,onChange:l,caller:xd}),Y=N.useRef(null),F=_?v||!!_.closest("form"):!0,[Z,q]=N.useState(new Set),ne=Array.from(Z).map(ae=>ae.props.value).join(";");return y.jsx(Rw,{...b,children:y.jsxs(xme,{required:g,scope:t,trigger:_,onTriggerChange:x,valueNode:S,onValueNodeChange:E,valueNodeHasChildren:C,onValueNodeHasChildrenChange:k,contentId:ni(),value:L,onValueChange:B,open:D,onOpenChange:O,dir:R,triggerPointerDownPosRef:Y,disabled:p,children:[y.jsx(S1.Provider,{scope:t,children:y.jsx(Sme,{scope:e.__scopeSelect,onNativeOptionAdd:N.useCallback(ae=>{q(re=>new Set(re).add(ae))},[]),onNativeOptionRemove:N.useCallback(ae=>{q(re=>{const ee=new Set(re);return ee.delete(ae),ee})},[]),children:n})}),F?y.jsxs(I$,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:L,onChange:ae=>B(ae.target.value),disabled:p,form:v,children:[L===void 0?y.jsx("option",{value:""}):null,Array.from(Z)]},ne):null]})})};c$.displayName=xd;var u$="SelectTrigger",d$=N.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...a}=e,i=C1(n),o=ku(u$,n),s=o.disabled||r,l=kn(t,o.onTriggerChange),u=E1(n),d=N.useRef("touch"),[h,p,g]=D$(b=>{const _=u().filter(E=>!E.disabled),x=_.find(E=>E.value===o.value),S=j$(_,b,x);S!==void 0&&o.onValueChange(S.value)}),v=b=>{s||(o.onOpenChange(!0),g()),b&&(o.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return y.jsx(tg,{asChild:!0,...i,children:y.jsx(tn.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":O$(o.value)?"":void 0,...a,ref:l,onClick:qt(a.onClick,b=>{b.currentTarget.focus(),d.current!=="mouse"&&v(b)}),onPointerDown:qt(a.onPointerDown,b=>{d.current=b.pointerType;const _=b.target;_.hasPointerCapture(b.pointerId)&&_.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:qt(a.onKeyDown,b=>{const _=h.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&p(b.key),!(_&&b.key===" ")&&vme.includes(b.key)&&(v(),b.preventDefault())})})})});d$.displayName=u$;var f$="SelectValue",h$=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,children:i,placeholder:o="",...s}=e,l=ku(f$,n),{onValueNodeHasChildrenChange:u}=l,d=i!==void 0,h=kn(t,l.onValueNodeChange);return Wa(()=>{u(d)},[u,d]),y.jsx(tn.span,{...s,ref:h,style:{pointerEvents:"none"},children:O$(l.value)?y.jsx(y.Fragment,{children:o}):i})});h$.displayName=f$;var Cme="SelectIcon",p$=N.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...a}=e;return y.jsx(tn.span,{"aria-hidden":!0,...a,ref:t,children:r||""})});p$.displayName=Cme;var kme="SelectPortal",m$=e=>y.jsx(Uh,{asChild:!0,...e});m$.displayName=kme;var Sd="SelectContent",g$=N.forwardRef((e,t)=>{const n=ku(Sd,e.__scopeSelect),[r,a]=N.useState();if(Wa(()=>{a(new DocumentFragment)},[]),!n.open){const i=r;return i?Ds.createPortal(y.jsx(y$,{scope:e.__scopeSelect,children:y.jsx(S1.Slot,{scope:e.__scopeSelect,children:y.jsx("div",{children:e.children})})}),i):null}return y.jsx(b$,{...e,ref:t})});g$.displayName=Sd;var Lo=10,[y$,Tu]=ip(Sd),Tme="SelectContentImpl",Ame=Yc("SelectContent.RemoveScroll"),b$=N.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_,...x}=e,S=ku(Sd,n),[E,C]=N.useState(null),[k,R]=N.useState(null),D=kn(t,Ne=>C(Ne)),[O,L]=N.useState(null),[B,Y]=N.useState(null),F=E1(n),[Z,q]=N.useState(!1),ne=N.useRef(!1);N.useEffect(()=>{if(E)return b1(E)},[E]),g1();const ae=N.useCallback(Ne=>{const[Re,...Ce]=F().map(Le=>Le.ref.current),[Fe]=Ce.slice(-1),Qe=document.activeElement;for(const Le of Ne)if(Le===Qe||(Le==null||Le.scrollIntoView({block:"nearest"}),Le===Re&&k&&(k.scrollTop=0),Le===Fe&&k&&(k.scrollTop=k.scrollHeight),Le==null||Le.focus(),document.activeElement!==Qe))return},[F,k]),re=N.useCallback(()=>ae([O,E]),[ae,O,E]);N.useEffect(()=>{Z&&re()},[Z,re]);const{onOpenChange:ee,triggerPointerDownPosRef:ie}=S;N.useEffect(()=>{if(E){let Ne={x:0,y:0};const Re=Fe=>{var Qe,Le;Ne={x:Math.abs(Math.round(Fe.pageX)-(((Qe=ie.current)==null?void 0:Qe.x)??0)),y:Math.abs(Math.round(Fe.pageY)-(((Le=ie.current)==null?void 0:Le.y)??0))}},Ce=Fe=>{Ne.x<=10&&Ne.y<=10?Fe.preventDefault():E.contains(Fe.target)||ee(!1),document.removeEventListener("pointermove",Re),ie.current=null};return ie.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",Ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",Ce,{capture:!0})}}},[E,ee,ie]),N.useEffect(()=>{const Ne=()=>ee(!1);return window.addEventListener("blur",Ne),window.addEventListener("resize",Ne),()=>{window.removeEventListener("blur",Ne),window.removeEventListener("resize",Ne)}},[ee]);const[U,Q]=D$(Ne=>{const Re=F().filter(Qe=>!Qe.disabled),Ce=Re.find(Qe=>Qe.ref.current===document.activeElement),Fe=j$(Re,Ne,Ce);Fe&&setTimeout(()=>Fe.ref.current.focus())}),X=N.useCallback((Ne,Re,Ce)=>{const Fe=!ne.current&&!Ce;(S.value!==void 0&&S.value===Re||Fe)&&(L(Ne),Fe&&(ne.current=!0))},[S.value]),de=N.useCallback(()=>E==null?void 0:E.focus(),[E]),be=N.useCallback((Ne,Re,Ce)=>{const Fe=!ne.current&&!Ce;(S.value!==void 0&&S.value===Re||Fe)&&Y(Ne)},[S.value]),_e=r==="popper"?eC:v$,Pe=_e===eC?{side:s,sideOffset:l,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:p,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:_}:{};return y.jsx(y$,{scope:n,content:E,viewport:k,onViewportChange:R,itemRefCallback:X,selectedItem:O,onItemLeave:de,itemTextRefCallback:be,focusSelectedItem:re,selectedItemText:B,position:r,isPositioned:Z,searchRef:U,children:y.jsx(Pg,{as:Ame,allowPinchZoom:!0,children:y.jsx(Mg,{asChild:!0,trapped:S.open,onMountAutoFocus:Ne=>{Ne.preventDefault()},onUnmountAutoFocus:qt(a,Ne=>{var Re;(Re=S.trigger)==null||Re.focus({preventScroll:!0}),Ne.preventDefault()}),children:y.jsx($h,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:Ne=>Ne.preventDefault(),onDismiss:()=>S.onOpenChange(!1),children:y.jsx(_e,{role:"listbox",id:S.contentId,"data-state":S.open?"open":"closed",dir:S.dir,onContextMenu:Ne=>Ne.preventDefault(),...x,...Pe,onPlaced:()=>q(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:qt(x.onKeyDown,Ne=>{const Re=Ne.ctrlKey||Ne.altKey||Ne.metaKey;if(Ne.key==="Tab"&&Ne.preventDefault(),!Re&&Ne.key.length===1&&Q(Ne.key),["ArrowUp","ArrowDown","Home","End"].includes(Ne.key)){let Fe=F().filter(Qe=>!Qe.disabled).map(Qe=>Qe.ref.current);if(["ArrowUp","End"].includes(Ne.key)&&(Fe=Fe.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ne.key)){const Qe=Ne.target,Le=Fe.indexOf(Qe);Fe=Fe.slice(Le+1)}setTimeout(()=>ae(Fe)),Ne.preventDefault()}})})})})})})});b$.displayName=Tme;var Nme="SelectItemAlignedPosition",v$=N.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...a}=e,i=ku(Sd,n),o=Tu(Sd,n),[s,l]=N.useState(null),[u,d]=N.useState(null),h=kn(t,D=>d(D)),p=E1(n),g=N.useRef(!1),v=N.useRef(!0),{viewport:b,selectedItem:_,selectedItemText:x,focusSelectedItem:S}=o,E=N.useCallback(()=>{if(i.trigger&&i.valueNode&&s&&u&&b&&_&&x){const D=i.trigger.getBoundingClientRect(),O=u.getBoundingClientRect(),L=i.valueNode.getBoundingClientRect(),B=x.getBoundingClientRect();if(i.dir!=="rtl"){const Qe=B.left-O.left,Le=L.left-Qe,Ie=D.left-Le,V=D.width+Ie,me=Math.max(V,O.width),Te=window.innerWidth-Lo,le=O0(Le,[Lo,Math.max(Lo,Te-me)]);s.style.minWidth=V+"px",s.style.left=le+"px"}else{const Qe=O.right-B.right,Le=window.innerWidth-L.right-Qe,Ie=window.innerWidth-D.right-Le,V=D.width+Ie,me=Math.max(V,O.width),Te=window.innerWidth-Lo,le=O0(Le,[Lo,Math.max(Lo,Te-me)]);s.style.minWidth=V+"px",s.style.right=le+"px"}const Y=p(),F=window.innerHeight-Lo*2,Z=b.scrollHeight,q=window.getComputedStyle(u),ne=parseInt(q.borderTopWidth,10),ae=parseInt(q.paddingTop,10),re=parseInt(q.borderBottomWidth,10),ee=parseInt(q.paddingBottom,10),ie=ne+ae+Z+ee+re,U=Math.min(_.offsetHeight*5,ie),Q=window.getComputedStyle(b),X=parseInt(Q.paddingTop,10),de=parseInt(Q.paddingBottom,10),be=D.top+D.height/2-Lo,_e=F-be,Pe=_.offsetHeight/2,Ne=_.offsetTop+Pe,Re=ne+ae+Ne,Ce=ie-Re;if(Re<=be){const Qe=Y.length>0&&_===Y[Y.length-1].ref.current;s.style.bottom="0px";const Le=u.clientHeight-b.offsetTop-b.offsetHeight,Ie=Math.max(_e,Pe+(Qe?de:0)+Le+re),V=Re+Ie;s.style.height=V+"px"}else{const Qe=Y.length>0&&_===Y[0].ref.current;s.style.top="0px";const Ie=Math.max(be,ne+b.offsetTop+(Qe?X:0)+Pe)+Ce;s.style.height=Ie+"px",b.scrollTop=Re-be+b.offsetTop}s.style.margin=`${Lo}px 0`,s.style.minHeight=U+"px",s.style.maxHeight=F+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[p,i.trigger,i.valueNode,s,u,b,_,x,i.dir,r]);Wa(()=>E(),[E]);const[C,k]=N.useState();Wa(()=>{u&&k(window.getComputedStyle(u).zIndex)},[u]);const R=N.useCallback(D=>{D&&v.current===!0&&(E(),S==null||S(),v.current=!1)},[E,S]);return y.jsx(Ime,{scope:n,contentWrapper:s,shouldExpandOnScrollRef:g,onScrollButtonChange:R,children:y.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:y.jsx(tn.div,{...a,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});v$.displayName=Nme;var Rme="SelectPopperPosition",eC=N.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:a=Lo,...i}=e,o=C1(n);return y.jsx(Iw,{...o,...i,ref:t,align:r,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});eC.displayName=Rme;var[Ime,ST]=ip(Sd,{}),tC="SelectViewport",w$=N.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...a}=e,i=Tu(tC,n),o=ST(tC,n),s=kn(t,i.onViewportChange),l=N.useRef(0);return y.jsxs(y.Fragment,{children:[y.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),y.jsx(S1.Slot,{scope:n,children:y.jsx(tn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:qt(a.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:p}=o;if(p!=null&&p.current&&h){const g=Math.abs(l.current-d.scrollTop);if(g>0){const v=window.innerHeight-Lo*2,b=parseFloat(h.style.minHeight),_=parseFloat(h.style.height),x=Math.max(b,_);if(x<v){const S=x+g,E=Math.min(v,S),C=S-E;h.style.height=E+"px",h.style.bottom==="0px"&&(d.scrollTop=C>0?C:0,h.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});w$.displayName=tC;var _$="SelectGroup",[Ome,Dme]=ip(_$),jme=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=ni();return y.jsx(Ome,{scope:n,id:a,children:y.jsx(tn.div,{role:"group","aria-labelledby":a,...r,ref:t})})});jme.displayName=_$;var x$="SelectLabel",Mme=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=Dme(x$,n);return y.jsx(tn.div,{id:a.id,...r,ref:t})});Mme.displayName=x$;var aw="SelectItem",[Pme,S$]=ip(aw),E$=N.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:a=!1,textValue:i,...o}=e,s=ku(aw,n),l=Tu(aw,n),u=s.value===r,[d,h]=N.useState(i??""),[p,g]=N.useState(!1),v=kn(t,S=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,S,r,a)}),b=ni(),_=N.useRef("touch"),x=()=>{a||(s.onValueChange(r),s.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return y.jsx(Pme,{scope:n,value:r,disabled:a,textId:b,isSelected:u,onItemTextChange:N.useCallback(S=>{h(E=>E||((S==null?void 0:S.textContent)??"").trim())},[]),children:y.jsx(S1.ItemSlot,{scope:n,value:r,disabled:a,textValue:d,children:y.jsx(tn.div,{role:"option","aria-labelledby":b,"data-highlighted":p?"":void 0,"aria-selected":u&&p,"data-state":u?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:v,onFocus:qt(o.onFocus,()=>g(!0)),onBlur:qt(o.onBlur,()=>g(!1)),onClick:qt(o.onClick,()=>{_.current!=="mouse"&&x()}),onPointerUp:qt(o.onPointerUp,()=>{_.current==="mouse"&&x()}),onPointerDown:qt(o.onPointerDown,S=>{_.current=S.pointerType}),onPointerMove:qt(o.onPointerMove,S=>{var E;_.current=S.pointerType,a?(E=l.onItemLeave)==null||E.call(l):_.current==="mouse"&&S.currentTarget.focus({preventScroll:!0})}),onPointerLeave:qt(o.onPointerLeave,S=>{var E;S.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:qt(o.onKeyDown,S=>{var C;((C=l.searchRef)==null?void 0:C.current)!==""&&S.key===" "||(wme.includes(S.key)&&x(),S.key===" "&&S.preventDefault())})})})})});E$.displayName=aw;var Om="SelectItemText",C$=N.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:a,...i}=e,o=ku(Om,n),s=Tu(Om,n),l=S$(Om,n),u=Eme(Om,n),[d,h]=N.useState(null),p=kn(t,x=>h(x),l.onItemTextChange,x=>{var S;return(S=s.itemTextRefCallback)==null?void 0:S.call(s,x,l.value,l.disabled)}),g=d==null?void 0:d.textContent,v=N.useMemo(()=>y.jsx("option",{value:l.value,disabled:l.disabled,children:g},l.value),[l.disabled,l.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:_}=u;return Wa(()=>(b(v),()=>_(v)),[b,_,v]),y.jsxs(y.Fragment,{children:[y.jsx(tn.span,{id:l.textId,...i,ref:p}),l.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Ds.createPortal(i.children,o.valueNode):null]})});C$.displayName=Om;var k$="SelectItemIndicator",T$=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return S$(k$,n).isSelected?y.jsx(tn.span,{"aria-hidden":!0,...r,ref:t}):null});T$.displayName=k$;var nC="SelectScrollUpButton",A$=N.forwardRef((e,t)=>{const n=Tu(nC,e.__scopeSelect),r=ST(nC,e.__scopeSelect),[a,i]=N.useState(!1),o=kn(t,r.onScrollButtonChange);return Wa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const u=l.scrollTop>0;i(u)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(R$,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop-l.offsetHeight)}}):null});A$.displayName=nC;var rC="SelectScrollDownButton",N$=N.forwardRef((e,t)=>{const n=Tu(rC,e.__scopeSelect),r=ST(rC,e.__scopeSelect),[a,i]=N.useState(!1),o=kn(t,r.onScrollButtonChange);return Wa(()=>{if(n.viewport&&n.isPositioned){let s=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;i(d)};const l=n.viewport;return s(),l.addEventListener("scroll",s),()=>l.removeEventListener("scroll",s)}},[n.viewport,n.isPositioned]),a?y.jsx(R$,{...e,ref:o,onAutoScroll:()=>{const{viewport:s,selectedItem:l}=n;s&&l&&(s.scrollTop=s.scrollTop+l.offsetHeight)}}):null});N$.displayName=rC;var R$=N.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...a}=e,i=Tu("SelectScrollButton",n),o=N.useRef(null),s=E1(n),l=N.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return N.useEffect(()=>()=>l(),[l]),Wa(()=>{var d;const u=s().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[s]),y.jsx(tn.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:qt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:qt(a.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:qt(a.onPointerLeave,()=>{l()})})}),Fme="SelectSeparator",Lme=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return y.jsx(tn.div,{"aria-hidden":!0,...r,ref:t})});Lme.displayName=Fme;var aC="SelectArrow",$me=N.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,a=C1(n),i=ku(aC,n),o=Tu(aC,n);return i.open&&o.position==="popper"?y.jsx(Ow,{...a,...r,ref:t}):null});$me.displayName=aC;var Bme="SelectBubbleInput",I$=N.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const a=N.useRef(null),i=kn(r,a),o=w1(t);return N.useEffect(()=>{const s=a.current;if(!s)return;const l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const h=new Event("change",{bubbles:!0});d.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(tn.select,{...n,style:{...s8,...n.style},ref:i,defaultValue:t})});I$.displayName=Bme;function O$(e){return e===""||e===void 0}function D$(e){const t=Da(e),n=N.useRef(""),r=N.useRef(0),a=N.useCallback(o=>{const s=n.current+o;t(s),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(s)},[t]),i=N.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,a,i]}function j$(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=zme(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.textValue.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function zme(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Ume=c$,Hme=d$,qme=h$,Vme=p$,Gme=m$,Wme=g$,Kme=w$,Zme=E$,Yme=C$,Xme=T$,Jme=A$,Qme=N$;function Ud({...e}){return y.jsx(Ume,{"data-slot":"select",...e})}function Hd({...e}){return y.jsx(qme,{"data-slot":"select-value",...e})}function qd({className:e,size:t="default",children:n,...r}){return y.jsxs(Hme,{"data-slot":"select-trigger","data-size":t,className:Rt("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,y.jsx(Vme,{asChild:!0,children:y.jsx(Kl,{className:"size-4 opacity-50"})})]})}function Vd({className:e,children:t,position:n="popper",...r}){return y.jsx(Gme,{children:y.jsxs(Wme,{"data-slot":"select-content",className:Rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[y.jsx(e0e,{}),y.jsx(Kme,{className:Rt("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),y.jsx(t0e,{})]})})}function bi({className:e,children:t,...n}){return y.jsxs(Zme,{"data-slot":"select-item",className:Rt("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[y.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:y.jsx(Xme,{children:y.jsx(Ws,{className:"size-4"})})}),y.jsx(Yme,{children:t})]})}function e0e({className:e,...t}){return y.jsx(Jme,{"data-slot":"select-scroll-up-button",className:Rt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(Cd,{className:"size-4"})})}function t0e({className:e,...t}){return y.jsx(Qme,{"data-slot":"select-scroll-down-button",className:Rt("flex cursor-default items-center justify-center py-1",e),...t,children:y.jsx(Kl,{className:"size-4"})})}var M$=["PageUp","PageDown"],P$=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],F$={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},op="Slider",[iC,n0e,r0e]=x1(op),[L$,C_e]=Pi(op,[r0e]),[a0e,k1]=L$(op),$$=N.forwardRef((e,t)=>{const{name:n,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:s=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...b}=e,_=N.useRef(new Set),x=N.useRef(0),E=o==="horizontal"?i0e:o0e,[C=[],k]=qs({prop:d,defaultProp:u,onChange:Y=>{var Z;(Z=[..._.current][x.current])==null||Z.focus(),h(Y)}}),R=N.useRef(C);function D(Y){const F=d0e(C,Y);B(Y,F)}function O(Y){B(Y,x.current)}function L(){const Y=R.current[x.current];C[x.current]!==Y&&p(C)}function B(Y,F,{commit:Z}={commit:!1}){const q=m0e(i),ne=g0e(Math.round((Y-r)/i)*i+r,q),ae=O0(ne,[r,a]);k((re=[])=>{const ee=c0e(re,ae,F);if(p0e(ee,l*i)){x.current=ee.indexOf(ae);const ie=String(ee)!==String(re);return ie&&Z&&p(ee),ie?ee:re}else return re})}return y.jsx(a0e,{scope:e.__scopeSlider,name:n,disabled:s,min:r,max:a,valueIndexToChangeRef:x,thumbs:_.current,values:C,orientation:o,form:v,children:y.jsx(iC.Provider,{scope:e.__scopeSlider,children:y.jsx(iC.Slot,{scope:e.__scopeSlider,children:y.jsx(E,{"aria-disabled":s,"data-disabled":s?"":void 0,...b,ref:t,onPointerDown:qt(b.onPointerDown,()=>{s||(R.current=C)}),min:r,max:a,inverted:g,onSlideStart:s?void 0:D,onSlideMove:s?void 0:O,onSlideEnd:s?void 0:L,onHomeKeyDown:()=>!s&&B(r,0,{commit:!0}),onEndKeyDown:()=>!s&&B(a,C.length-1,{commit:!0}),onStepKeyDown:({event:Y,direction:F})=>{if(!s){const ne=M$.includes(Y.key)||Y.shiftKey&&P$.includes(Y.key)?10:1,ae=x.current,re=C[ae],ee=i*ne*F;B(re+ee,ae,{commit:!0})}}})})})})});$$.displayName=op;var[B$,z$]=L$(op,{startEdge:"left",endEdge:"right",size:"width",direction:1}),i0e=N.forwardRef((e,t)=>{const{min:n,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:l,onStepKeyDown:u,...d}=e,[h,p]=N.useState(null),g=kn(t,E=>p(E)),v=N.useRef(void 0),b=rp(a),_=b==="ltr",x=_&&!i||!_&&i;function S(E){const C=v.current||h.getBoundingClientRect(),k=[0,C.width],D=ET(k,x?[n,r]:[r,n]);return v.current=C,D(E-C.left)}return y.jsx(B$,{scope:e.__scopeSlider,startEdge:x?"left":"right",endEdge:x?"right":"left",direction:x?1:-1,size:"width",children:y.jsx(U$,{dir:b,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:E=>{const C=S(E.clientX);o==null||o(C)},onSlideMove:E=>{const C=S(E.clientX);s==null||s(C)},onSlideEnd:()=>{v.current=void 0,l==null||l()},onStepKeyDown:E=>{const k=F$[x?"from-left":"from-right"].includes(E.key);u==null||u({event:E,direction:k?-1:1})}})})}),o0e=N.forwardRef((e,t)=>{const{min:n,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:s,onStepKeyDown:l,...u}=e,d=N.useRef(null),h=kn(t,d),p=N.useRef(void 0),g=!a;function v(b){const _=p.current||d.current.getBoundingClientRect(),x=[0,_.height],E=ET(x,g?[r,n]:[n,r]);return p.current=_,E(b-_.top)}return y.jsx(B$,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:y.jsx(U$,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const _=v(b.clientY);i==null||i(_)},onSlideMove:b=>{const _=v(b.clientY);o==null||o(_)},onSlideEnd:()=>{p.current=void 0,s==null||s()},onStepKeyDown:b=>{const x=F$[g?"from-bottom":"from-top"].includes(b.key);l==null||l({event:b,direction:x?-1:1})}})})}),U$=N.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:s,onStepKeyDown:l,...u}=e,d=k1(op,n);return y.jsx(tn.span,{...u,ref:t,onKeyDown:qt(e.onKeyDown,h=>{h.key==="Home"?(o(h),h.preventDefault()):h.key==="End"?(s(h),h.preventDefault()):M$.concat(P$).includes(h.key)&&(l(h),h.preventDefault())}),onPointerDown:qt(e.onPointerDown,h=>{const p=h.target;p.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(p)?p.focus():r(h)}),onPointerMove:qt(e.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&a(h)}),onPointerUp:qt(e.onPointerUp,h=>{const p=h.target;p.hasPointerCapture(h.pointerId)&&(p.releasePointerCapture(h.pointerId),i(h))})})}),H$="SliderTrack",q$=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=k1(H$,n);return y.jsx(tn.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:t})});q$.displayName=H$;var oC="SliderRange",V$=N.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,a=k1(oC,n),i=z$(oC,n),o=N.useRef(null),s=kn(t,o),l=a.values.length,u=a.values.map(p=>K$(p,a.min,a.max)),d=l>1?Math.min(...u):0,h=100-Math.max(...u);return y.jsx(tn.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:s,style:{...e.style,[i.startEdge]:d+"%",[i.endEdge]:h+"%"}})});V$.displayName=oC;var sC="SliderThumb",G$=N.forwardRef((e,t)=>{const n=n0e(e.__scopeSlider),[r,a]=N.useState(null),i=kn(t,s=>a(s)),o=N.useMemo(()=>r?n().findIndex(s=>s.ref.current===r):-1,[n,r]);return y.jsx(s0e,{...e,ref:i,index:o})}),s0e=N.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:a,...i}=e,o=k1(sC,n),s=z$(sC,n),[l,u]=N.useState(null),d=kn(t,S=>u(S)),h=l?o.form||!!l.closest("form"):!0,p=Nw(l),g=o.values[r],v=g===void 0?0:K$(g,o.min,o.max),b=u0e(r,o.values.length),_=p==null?void 0:p[s.size],x=_?f0e(_,v,s.direction):0;return N.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),y.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${v}% + ${x}px)`},children:[y.jsx(iC.ItemSlot,{scope:e.__scopeSlider,children:y.jsx(tn.span,{role:"slider","aria-label":e["aria-label"]||b,"aria-valuemin":o.min,"aria-valuenow":g,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:d,style:g===void 0?{display:"none"}:e.style,onFocus:qt(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),h&&y.jsx(W$,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:g},r)]})});G$.displayName=sC;var l0e="RadioBubbleInput",W$=N.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const a=N.useRef(null),i=kn(a,r),o=w1(t);return N.useEffect(()=>{const s=a.current;if(!s)return;const l=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==t&&d){const h=new Event("input",{bubbles:!0});d.call(s,t),s.dispatchEvent(h)}},[o,t]),y.jsx(tn.input,{style:{display:"none"},...n,ref:i,defaultValue:t})});W$.displayName=l0e;function c0e(e=[],t,n){const r=[...e];return r[n]=t,r.sort((a,i)=>a-i)}function K$(e,t,n){const i=100/(n-t)*(e-t);return O0(i,[0,100])}function u0e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function d0e(e,t){if(e.length===1)return 0;const n=e.map(a=>Math.abs(a-t)),r=Math.min(...n);return n.indexOf(r)}function f0e(e,t,n){const r=e/2,i=ET([0,50],[0,r]);return(r-i(t)*n)*n}function h0e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function p0e(e,t){if(t>0){const n=h0e(e);return Math.min(...n)>=t}return!0}function ET(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function m0e(e){return(String(e).split(".")[1]||"").length}function g0e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var y0e=$$,b0e=q$,v0e=V$,w0e=G$;function jl({className:e,defaultValue:t,value:n,min:r=0,max:a=100,...i}){const o=N.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,a],[n,t,r,a]);return y.jsxs(y0e,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:a,className:Rt("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...i,children:[y.jsx(b0e,{"data-slot":"slider-track",className:Rt("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:y.jsx(v0e,{"data-slot":"slider-range",className:Rt("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:o.length},(s,l)=>y.jsx(w0e,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},l))]})}var _0e="Separator",f6="horizontal",x0e=["horizontal","vertical"],Z$=N.forwardRef((e,t)=>{const{decorative:n,orientation:r=f6,...a}=e,i=S0e(r)?r:f6,s=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return y.jsx(tn.div,{"data-orientation":i,...s,...a,ref:t})});Z$.displayName=_0e;function S0e(e){return x0e.includes(e)}var E0e=Z$;function jh({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return y.jsx(E0e,{"data-slot":"separator-root",decorative:n,orientation:t,className:Rt("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}const C0e=()=>{const{theme:e,setTheme:t,enableStreamingMarkdown:n,setEnableStreamingMarkdown:r,enableStreamingCodeBlockParsing:a,setEnableStreamingCodeBlockParsing:i,foldStreamingCodeBlocks:o,setFoldStreamingCodeBlocks:s,streamingRenderFPS:l,setStreamingRenderFPS:u,prismThemeUrl:d,setPrismThemeUrl:h,resetGeneralSettings:p}=Kr(Sn(E=>({theme:E.theme,setTheme:E.setTheme,enableStreamingMarkdown:E.enableStreamingMarkdown,setEnableStreamingMarkdown:E.setEnableStreamingMarkdown,enableStreamingCodeBlockParsing:E.enableStreamingCodeBlockParsing,setEnableStreamingCodeBlockParsing:E.setEnableStreamingCodeBlockParsing,foldStreamingCodeBlocks:E.foldStreamingCodeBlocks,setFoldStreamingCodeBlocks:E.setFoldStreamingCodeBlocks,streamingRenderFPS:E.streamingRenderFPS,setStreamingRenderFPS:E.setStreamingRenderFPS,prismThemeUrl:E.prismThemeUrl,setPrismThemeUrl:E.setPrismThemeUrl,resetGeneralSettings:E.resetGeneralSettings}))),[g,v]=N.useState(l),b=N.useCallback(E=>{v(E[0])},[]),_=N.useCallback(E=>{u(E[0])},[u]),x=N.useCallback(E=>{const C=E.target.value,k=C===""?15:parseInt(C.replace(/[^0-9]/g,""),10);if(!isNaN(k)){const R=Math.max(3,Math.min(60,k));u(R),v(R)}},[u]);N.useEffect(()=>{v(l)},[l]);const S=()=>{window.confirm("Are you sure you want to reset Appearance and Streaming settings to their defaults?")&&p()};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Appearance"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsx(cn,{htmlFor:"theme-select",className:"font-medium",children:"Theme"}),y.jsxs(Ud,{value:e??"system",onValueChange:E=>t(E),children:[y.jsx(qd,{id:"theme-select",className:"w-[180px]",children:y.jsx(Hd,{placeholder:"Select theme"})}),y.jsxs(Vd,{children:[y.jsx(bi,{value:"light",children:"Light"}),y.jsx(bi,{value:"dark",children:"Dark"}),y.jsx(bi,{value:"system",children:"System"})]})]})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-1.5",children:[y.jsx(cn,{htmlFor:"prism-theme-url",className:"font-medium",children:"Code Block Theme URL (Optional)"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the URL of a PrismJS CSS theme file (e.g., from cdnjs). Leave blank to use the default themes."}),y.jsx(Jn,{id:"prism-theme-url",type:"url",placeholder:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css",value:d??"",onChange:E=>h(E.target.value)})]})]}),y.jsx(jh,{}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Streaming"}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"streaming-markdown-switch",className:"font-medium",children:"Parse Markdown While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Render Markdown formatting as the response arrives (may impact performance slightly)."})]}),y.jsx(Ls,{id:"streaming-markdown-switch",checked:n??!0,onCheckedChange:r})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"streaming-codeblock-switch",className:"font-medium",children:"Use Full Code Blocks While Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Use the syntax-highlighting component for code blocks during streaming. Disable for potentially smoother streaming on complex code, using a basic block instead."})]}),y.jsx(Ls,{id:"streaming-codeblock-switch",checked:a??!1,onCheckedChange:i})]}),y.jsxs("div",{className:"flex items-center justify-between rounded-lg border p-3 shadow-sm",children:[y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"fold-codeblock-switch",className:"font-medium",children:"Fold Code Blocks by Default During Streaming"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically collapse code blocks as they stream in. Useful for long code outputs."})]}),y.jsx(Ls,{id:"fold-codeblock-switch",checked:o??!1,onCheckedChange:s})]}),y.jsxs("div",{className:"rounded-lg border p-3 shadow-sm space-y-2",children:[y.jsxs("div",{children:[y.jsxs(cn,{htmlFor:"streaming-fps-slider",className:"font-medium",children:["Streaming Update Rate (",g," FPS)"]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Controls how frequently the UI updates during streaming (3-60 FPS). Lower values may feel less smooth but reduce CPU usage. (Default: 15)"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx(jl,{id:"streaming-fps-slider",min:3,max:60,step:1,value:[g],onValueChange:b,onValueCommit:_,className:"flex-grow"}),y.jsx(Jn,{type:"number",min:3,max:60,step:1,value:g,onChange:x,className:"w-20 h-8 text-xs"}),y.jsx("span",{className:"text-xs text-muted-foreground",children:"FPS"})]})]})]}),y.jsx(jh,{}),y.jsx("div",{className:"flex justify-end pt-4",children:y.jsxs(Ht,{variant:"outline",size:"sm",onClick:S,children:[y.jsx(MH,{className:"mr-2 h-4 w-4"}),"Reset General Settings"]})})]})},k0e=yt.memo(C0e),Y$=({temperature:e,setTemperature:t,topP:n,setTopP:r,maxTokens:a,setMaxTokens:i,topK:o,setTopK:s,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,defaultTemperature:p=.7,defaultTopP:g=null,defaultMaxTokens:v=null,defaultTopK:b=null,defaultPresencePenalty:_=0,defaultFrequencyPenalty:x=0,className:S})=>{const{selectedModelId:E,dbProviderConfigs:C,dbApiKeys:k}=Bn(Sn(U=>({selectedModelId:U.selectedModelId,dbProviderConfigs:U.dbProviderConfigs,dbApiKeys:U.dbApiKeys}))),R=N.useMemo(()=>{if(!E)return;const{providerId:U,modelId:Q}=Zl(E);if(!U||!Q)return;const X=C.find(be=>be.id===U);if(!X)return;const de=k.find(be=>be.id===X.apiKeyId);return BC(X,Q,de==null?void 0:de.value)},[E,C,k]),D=N.useMemo(()=>{var U;return new Set(((U=R==null?void 0:R.metadata)==null?void 0:U.supported_parameters)??[])},[R]),[O,L]=N.useState(e??p),[B,Y]=N.useState(n??g??1),[F,Z]=N.useState(l??_??0),[q,ne]=N.useState(d??x??0);N.useEffect(()=>{L(e??p)},[e,p]),N.useEffect(()=>{Y(n??g??1)},[n,g]),N.useEffect(()=>{Z(l??_??0)},[l,_]),N.useEffect(()=>{ne(d??x??0)},[d,x]);const ae=N.useCallback((U,Q)=>{const X=Q.target.value,de=X===""?null:parseInt(X,10);(X===""||!isNaN(de)&&de!==null)&&U(de)},[]),re=N.useCallback((U,Q)=>{U(Q[0])},[]),ee=N.useCallback(U=>{U(null)},[]),ie=p!==void 0||g!==void 0||v!==void 0||b!==void 0||_!==void 0||x!==void 0;return y.jsxs("div",{className:Rt("space-y-4 p-4",S),children:[D.has("temperature")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"param-temperature",className:"text-xs",children:["Temperature (",O.toFixed(2),")"]}),y.jsx(jl,{id:"param-temperature",min:0,max:1,step:.01,value:[O],onValueChange:U=>L(U[0]),onValueCommit:U=>re(t,U)}),ie&&y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>ee(t),disabled:e===null,children:["Use Default (",(p==null?void 0:p.toFixed(2))??"N/A",")"]})]}),D.has("top_p")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"param-top-p",className:"text-xs",children:["Top P (",(B??0).toFixed(2),")"]}),y.jsx(jl,{id:"param-top-p",min:0,max:1,step:.01,value:[B??1],onValueChange:U=>Y(U[0]),onValueCommit:U=>re(r,U)}),ie&&y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>ee(r),disabled:n===null,children:["Use Default (",(g==null?void 0:g.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[D.has("max_tokens")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(cn,{htmlFor:"param-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(Jn,{id:"param-max-tokens",type:"number",placeholder:`Default: ${v??"None"}`,value:a??"",onChange:U=>ae(i,U),min:"1",className:"h-8 text-xs"}),ie&&y.jsx(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>ee(i),disabled:a===null,children:"Use Default"})]}),D.has("top_k")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(cn,{htmlFor:"param-top-k",className:"text-xs",children:"Top K"}),y.jsx(Jn,{id:"param-top-k",type:"number",placeholder:`Default: ${b??"None"}`,value:o??"",onChange:U=>ae(s,U),min:"1",className:"h-8 text-xs"}),ie&&y.jsx(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>ee(s),disabled:o===null,children:"Use Default"})]})]}),D.has("presence_penalty")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"param-presence-penalty",className:"text-xs",children:["Presence Penalty (",(F??0).toFixed(2),")"]}),y.jsx(jl,{id:"param-presence-penalty",min:-2,max:2,step:.01,value:[F??0],onValueChange:U=>Z(U[0]),onValueCommit:U=>re(u,U)}),ie&&y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>ee(u),disabled:l===null,children:["Use Default (",(_==null?void 0:_.toFixed(2))??"N/A",")"]})]}),D.has("frequency_penalty")&&y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"param-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",(q??0).toFixed(2),")"]}),y.jsx(jl,{id:"param-frequency-penalty",min:-2,max:2,step:.01,value:[q??0],onValueChange:U=>ne(U[0]),onValueCommit:U=>re(h,U)}),ie&&y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>ee(h),disabled:d===null,children:["Use Default (",(x==null?void 0:x.toFixed(2))??"N/A",")"]})]})]})},T0e=()=>{const{globalSystemPrompt:e,setGlobalSystemPrompt:t,toolMaxSteps:n,setToolMaxSteps:r,temperature:a,setTemperature:i,topP:o,setTopP:s,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:g,frequencyPenalty:v,setFrequencyPenalty:b}=Kr(Sn(k=>({globalSystemPrompt:k.globalSystemPrompt,setGlobalSystemPrompt:k.setGlobalSystemPrompt,toolMaxSteps:k.toolMaxSteps,setToolMaxSteps:k.setToolMaxSteps,temperature:k.temperature,setTemperature:k.setTemperature,topP:k.topP,setTopP:k.setTopP,maxTokens:k.maxTokens,setMaxTokens:k.setMaxTokens,topK:k.topK,setTopK:k.setTopK,presencePenalty:k.presencePenalty,setPresencePenalty:k.setPresencePenalty,frequencyPenalty:k.frequencyPenalty,setFrequencyPenalty:k.setFrequencyPenalty}))),_=k=>{const R=k.target.value,D=R===""?5:parseInt(R,10);isNaN(D)||r(D)},x=k=>{k!==null&&i(k)},S=k=>{k!==null&&s(k)},E=k=>{k!==null&&g(k)},C=k=>{k!==null&&b(k)};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Prompt Configuration"}),y.jsx(cn,{htmlFor:"assistant-global-system-prompt",className:"text-sm mb-1 block",children:"Global System Prompt"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Default instructions for the assistant. Can be overridden per-project."}),y.jsx(ap,{id:"assistant-global-system-prompt",placeholder:"Enter default system instructions for the assistant...",value:e??"",onChange:k=>t(k.target.value),rows:4})]}),y.jsx(jh,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Default Parameters"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Set the default global values for AI parameters. These can be overridden per-project or per-prompt turn."}),y.jsx(Y$,{temperature:a,setTemperature:x,topP:o,setTopP:S,maxTokens:l,setMaxTokens:u,topK:d,setTopK:h,presencePenalty:p,setPresencePenalty:E,frequencyPenalty:v,setFrequencyPenalty:C,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},className:"p-0 w-full"})]}),y.jsx(jh,{}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Tool Usage"}),y.jsx(cn,{htmlFor:"tool-max-steps",className:"text-sm mb-1 block",children:"Maximum Tool Steps per Turn"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Limits the number of sequential tool calls the AI can make before generating a final response (1-20). Higher values allow more complex tasks but increase latency and cost. (Default: 5)"}),y.jsx(Jn,{id:"tool-max-steps",type:"number",min:"1",max:"20",step:"1",value:n,onChange:_,className:"w-24"})]})]})},A0e=yt.memo(T0e),N0e=()=>{const{importConversation:e,exportAllConversations:t}=vn(Sn(g=>({importConversation:g.importConversation,exportAllConversations:g.exportAllConversations}))),n=N.useRef(null),[r,a]=N.useState(!1),[i,o]=N.useState(!1),[s,l]=N.useState(!1),u=()=>{var g;(g=n.current)==null||g.click()},d=N.useCallback(async g=>{var b;const v=(b=g.target.files)==null?void 0:b[0];if(v){a(!0);try{await e(v)}catch(_){console.error("Import failed (from component):",_)}finally{n.current&&(n.current.value=""),a(!1)}}},[e]),h=N.useCallback(async()=>{o(!0);try{await t()}catch(g){console.error("Export all failed (from component):",g)}finally{o(!1)}},[t]),p=N.useCallback(async()=>{if(window.confirm(` ARE YOU ABSOLUTELY SURE? 

This will permanently delete ALL conversations, messages, mods, settings, providers, and stored API keys from your browser. This action cannot be undone.`)&&window.confirm(`SECOND CONFIRMATION:

Really delete everything? Consider exporting first.`)){l(!0);try{await Wt.clearAllData(),lt.success("All local data cleared. Reloading the application..."),setTimeout(()=>window.location.reload(),1500)}catch(g){const v="Failed to clear all data";console.error(v,g),lt.error(`${v}: ${g instanceof Error?g.message:String(g)}`),l(!1)}}},[]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Import Conversation"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Import a previously exported conversation (.json file). It will be added as a new chat."}),y.jsx("input",{type:"file",ref:n,onChange:d,accept:".json",className:"hidden",id:"import-file-input",disabled:r}),y.jsxs(Ht,{onClick:u,variant:"outline",disabled:r,children:[r?y.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(JH,{className:"mr-2 h-4 w-4"}),r?"Importing...":"Select Import File..."]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Export Data"}),y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Export all your conversations and messages into a single JSON file."}),y.jsxs(Ht,{onClick:h,variant:"outline",disabled:i,children:[i?y.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx(Um,{className:"mr-2 h-4 w-4"}),i?"Exporting...":"Export All Chats"]})]}),y.jsxs("div",{className:"border-t pt-6 border-destructive/50",children:[y.jsx("h3",{className:"text-lg font-medium text-destructive mb-2",children:"Danger Zone"}),y.jsx("p",{className:"text-sm text-destructive/90 mb-3",children:"Be very careful with these actions. Data loss may be permanent."}),y.jsxs(Ht,{onClick:p,variant:"destructive",disabled:s,children:[s?y.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}):y.jsx($s,{className:"mr-2 h-4 w-4"}),s?"Clearing Data...":"Clear All Local Data (Conversations, Keys, Settings, etc.)"]})]})]})},R0e=yt.memo(N0e),I0e=bC("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function X$({className:e,variant:t,...n}){return y.jsx("div",{"data-slot":"alert",role:"alert",className:Rt(I0e({variant:t}),e),...n})}function J$({className:e,...t}){return y.jsx("div",{"data-slot":"alert-title",className:Rt("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",e),...t})}function Q$({className:e,...t}){return y.jsx("div",{"data-slot":"alert-description",className:Rt("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function T1({className:e,...t}){return y.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:y.jsx("table",{"data-slot":"table",className:Rt("w-full caption-bottom text-sm",e),...t})})}function A1({className:e,...t}){return y.jsx("thead",{"data-slot":"table-header",className:Rt("[&_tr]:border-b",e),...t})}function N1({className:e,...t}){return y.jsx("tbody",{"data-slot":"table-body",className:Rt("[&_tr:last-child]:border-0",e),...t})}function Ji({className:e,...t}){return y.jsx("tr",{"data-slot":"table-row",className:Rt("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function ia({className:e,...t}){return y.jsx("th",{"data-slot":"table-head",className:Rt("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function yr({className:e,...t}){return y.jsx("td",{"data-slot":"table-cell",className:Rt("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const O0e=()=>{const{loadedMods:e,addDbMod:t,updateDbMod:n,deleteDbMod:r,dbMods:a,isLoading:i}=U0(Sn(R=>({loadedMods:R.loadedMods,addDbMod:R.addDbMod,updateDbMod:R.updateDbMod,deleteDbMod:R.deleteDbMod,dbMods:R.dbMods,isLoading:R.isLoading}))),[o,s]=N.useState(""),[l,u]=N.useState(""),[d,h]=N.useState(""),[p,g]=N.useState(!1),[v,b]=N.useState({}),[_,x]=N.useState({}),S=N.useCallback(async()=>{if(!o.trim()){lt.error("Mod name cannot be empty.");return}if(!l.trim()&&!d.trim()){lt.error("Either Mod URL or Script Content must be provided.");return}if(l.trim()&&d.trim()){lt.error("Provide either a Mod URL or Script Content, not both.");return}g(!0);try{const R={name:o.trim(),sourceUrl:l.trim()||null,scriptContent:d.trim()||null,enabled:!0,loadOrder:((a==null?void 0:a.length)??1)*10};await t(R),s(""),u(""),h(""),lt.info("Mod added. Reload required for changes to take effect.")}catch(R){console.error("Failed to add mod (from component):",R)}finally{g(!1)}},[o,l,d,t,a==null?void 0:a.length]),E=N.useCallback(async R=>{b(D=>({...D,[R.id]:!0}));try{await n(R.id,{enabled:!R.enabled}),lt.info(`Mod "${R.name}" ${R.enabled?"disabled":"enabled"}. Reload required for changes to take effect.`)}catch(D){console.error("Failed to update mod (from component):",D)}finally{b(D=>({...D,[R.id]:!1}))}},[n]),C=N.useCallback(async R=>{if(window.confirm(`Are you sure you want to delete the mod "${R.name}"? This cannot be undone.`)){x(D=>({...D,[R.id]:!0}));try{await r(R.id),lt.info("Mod deleted. Reload required for changes to take effect.")}catch(D){console.error("Failed to delete mod (from component):",D)}finally{x(D=>({...D,[R.id]:!1}))}}},[r]),k=N.useCallback(R=>{const D=e.find(L=>L.id===R);if(D)if(D.error){const L=D.error instanceof Error?D.error.message:String(D.error);return{status:"Error",error:D.error,tooltip:L}}else return{status:"Loaded"};const O=(a||[]).find(L=>L.id===R);return O?O.enabled?{status:"Load Pending (Reload Required)"}:{status:"Disabled"}:{status:"Unknown"}},[e,a]);return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs(X$,{variant:"destructive",className:"border-destructive/50",children:[y.jsx(EC,{className:"h-4 w-4"}),y.jsx(J$,{children:"Security Warning"}),y.jsx(Q$,{children:"Running mods from untrusted sources can compromise your security and privacy. Mods execute arbitrary JavaScript code within LiteChat and can potentially access sensitive data like API keys stored in the browser or interact with external services. Only install mods you trust. LiteChat is not responsible for any damage caused by mods."})]}),y.jsxs("div",{className:"space-y-4 rounded-md border p-4",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Add New Mod"}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(cn,{htmlFor:"mod-name",children:"Mod Name"}),y.jsx(Jn,{id:"mod-name",value:o,onChange:R=>s(R.target.value),placeholder:"My Awesome Mod",disabled:p})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(cn,{htmlFor:"mod-url",children:"Source URL (Optional)"}),y.jsx(Jn,{id:"mod-url",type:"url",value:l,onChange:R=>u(R.target.value),placeholder:"https://example.com/my-mod.js",disabled:p||!!d.trim()})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx(cn,{htmlFor:"mod-script",children:"Script Content (Optional)"}),y.jsx(ap,{id:"mod-script",value:d,onChange:R=>h(R.target.value),placeholder:`/* Paste your mod script here */
// Example: modApi.log('log', 'My Mod Loaded!');`,className:"min-h-[100px] font-mono text-xs",disabled:p||!!l.trim()})]}),y.jsxs(Ht,{onClick:S,disabled:p,children:[p&&y.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Mod"]})]}),y.jsxs("div",{className:"space-y-2",children:[y.jsx("h3",{className:"text-lg font-medium",children:"Installed Mods"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Enable or disable mods below. A page reload is required for changes to fully take effect."}),y.jsx("div",{className:"rounded-md border",children:y.jsx(er,{delayDuration:100,children:y.jsxs(T1,{children:[y.jsx(A1,{children:y.jsxs(Ji,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Source"}),y.jsx(ia,{children:"Status"}),y.jsx(ia,{className:"text-center",children:"Enabled"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(N1,{children:i?y.jsxs(y.Fragment,{children:[y.jsx(Ji,{children:y.jsx(yr,{colSpan:5,children:y.jsx(Qr,{className:"h-10 w-full"})})}),y.jsx(Ji,{children:y.jsx(yr,{colSpan:5,children:y.jsx(Qr,{className:"h-10 w-full"})})})]}):(a||[]).length===0?y.jsx(Ji,{children:y.jsx(yr,{colSpan:5,className:"h-24 text-center",children:"No mods installed yet."})}):(a||[]).map(R=>{const{status:D,error:O,tooltip:L}=k(R.id),B=R.sourceUrl?new URL(R.sourceUrl).hostname:"Direct Script",Y=v[R.id],F=_[R.id],Z=Y||F,q=D==="Error";return y.jsxs(Ji,{children:[y.jsx(yr,{className:"font-medium",children:R.name}),y.jsx(yr,{className:"text-muted-foreground",children:B}),y.jsxs(yr,{children:[y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx("span",{className:q?"text-destructive font-semibold cursor-help":"",children:D})}),L&&y.jsx(ar,{className:"max-w-xs break-words",children:y.jsx("p",{children:L})})]}),q&&O&&y.jsx("p",{className:"text-xs text-destructive truncate",children:O instanceof Error?O.message:String(O)})]}),y.jsxs(yr,{className:"text-center",children:[y.jsx(Ls,{checked:R.enabled??!1,onCheckedChange:()=>E(R),disabled:Z,"aria-label":`Enable ${R.name}`}),Y&&y.jsx(Vn,{className:"h-4 w-4 animate-spin inline-block ml-2"})]}),y.jsx(yr,{className:"text-right",children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>C(R),disabled:Z,"aria-label":`Delete ${R.name}`,className:"text-destructive hover:text-destructive/80",children:F?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx($s,{className:"h-4 w-4"})})})]},R.id)})})]})})})]})]})},D0e=yt.memo(O0e),e9=({providerId:e,allAvailableModels:t,enabledModelIds:n,onToggleModel:r,isLoading:a=!1,disabled:i=!1,listHeightClass:o="h-48",onModelClick:s})=>{const[l,u]=N.useState(""),d=N.useMemo(()=>{if(!l)return t;const h=l.toLowerCase();return t.filter(p=>p.name.toLowerCase().includes(h)||p.id.toLowerCase().includes(h))},[t,l]);return a?y.jsxs("div",{className:`space-y-2 ${o}`,children:[y.jsx(Qr,{className:"h-8 w-full"}),y.jsx(Qr,{className:"h-8 w-full"}),y.jsx(Qr,{className:"h-8 w-full"})]}):t.length===0?y.jsx("p",{className:"text-sm text-muted-foreground italic pt-2",children:"No models available for this provider. Try fetching models."}):y.jsxs("div",{className:"space-y-2",children:[y.jsx(Jn,{value:l,onChange:h=>u(h.target.value),placeholder:"Search models...",className:"h-9 w-full text-xs",type:"text"}),y.jsx(zd,{className:`${o} w-full rounded-md border border-border p-3 bg-background/50`,children:y.jsx("div",{className:"space-y-2",children:d.map(h=>y.jsxs("div",{className:"flex items-center justify-between space-x-2 p-1.5 rounded hover:bg-muted/50",children:[y.jsx(cn,{htmlFor:`enable-model-${e}-${h.id}`,className:"text-sm font-normal text-card-foreground flex-grow cursor-pointer truncate",title:h.name||h.id,onClick:s?()=>s(h.id):void 0,children:h.name||h.id}),y.jsx("div",{className:"flex items-center flex-shrink-0 gap-1",children:y.jsx(Ls,{id:`enable-model-${e}-${h.id}`,checked:n.has(h.id),onCheckedChange:p=>r(h.id,p),disabled:i,"aria-label":`Enable model ${h.name||h.id}`,onClick:p=>p.stopPropagation()})})]},h.id))})})]})},j0e=({provider:e,apiKeys:t,onEdit:n,onDelete:r,onFetchModels:a,onUpdate:i,fetchStatus:o,isDeleting:s,onSelectModelForDetails:l})=>{var Y,F;const[u,d]=N.useState(!0),h=LC(e.type),p=$C(e.type),g=Pm(e.type),v=o==="fetching"||s,b=s||o==="fetching",_=s||o==="fetching",S=Bn(Z=>Z.getAllAvailableModelDefsForProvider)(e.id),E=N.useMemo(()=>new Set(e.enabledModels??[]),[e.enabledModels]),C=e.apiKeyId?t.some(Z=>Z.id===e.apiKeyId):!1,k=h&&!C,R=N.useCallback(async(Z,q)=>{const ne=new Set(e.enabledModels??[]);q?ne.add(Z):ne.delete(Z);const ae=Array.from(ne);try{await i(e.id,{enabledModels:ae})}catch(re){lt.error("Failed to update model status."),console.error("Failed to save model toggle:",re)}},[e.enabledModels,e.id,i]),D=()=>d(Z=>!Z),O=((Y=e.enabledModels)==null?void 0:Y.length)??0,L=S.length,B=Z=>{const q=Hc(e.id,Z);l(q)};return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-3 min-w-0",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{children:y.jsx("span",{className:Rt("h-2.5 w-2.5 rounded-full flex-shrink-0 block",o==="error"?"bg-destructive animate-pulse":e.isEnabled?"bg-green-500":"bg-muted-foreground")})}),y.jsx(ar,{side:"top",children:o==="error"?"Error fetching models":e.isEnabled?"Enabled":"Disabled"})]})}),y.jsx("h3",{className:"font-semibold text-lg text-card-foreground truncate",children:e.name}),y.jsxs("span",{className:"text-sm text-muted-foreground flex-shrink-0",children:["(",e.type,")"]}),k&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{children:y.jsx(lh,{className:"h-4 w-4 text-amber-500 flex-shrink-0"})}),y.jsx(ar,{side:"top",children:y.jsx("p",{children:"API Key required but none linked/found."})})]})})]}),y.jsxs("div",{className:"flex items-center space-x-1 flex-shrink-0",children:[y.jsx(sr,{tooltipText:"Edit",onClick:n,disabled:b,"aria-label":"Edit provider",icon:y.jsx(SC,{}),className:"h-8 w-8"}),y.jsx(sr,{tooltipText:"Delete",onClick:r,disabled:_,className:"text-destructive hover:text-destructive/80 h-8 w-8","aria-label":"Delete provider",icon:s?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx($s,{})})]})]}),y.jsxs("div",{className:"text-sm text-muted-foreground mt-1 space-y-1 pl-5",children:[h&&y.jsxs("div",{children:["API Key:"," ",e.apiKeyId?C?y.jsx("span",{className:"text-green-400",children:((F=t.find(Z=>Z.id===e.apiKeyId))==null?void 0:F.name)||"Linked (Unnamed Key)"}):y.jsx("span",{className:"text-destructive",children:"Linked Key Missing!"}):y.jsx("span",{className:"text-amber-400",children:"Not Linked"})]}),p&&y.jsxs("div",{children:["Base URL: ",e.baseURL||"Not Set"]}),y.jsxs("div",{children:["Auto-fetch Models:"," ",e.autoFetchModels?y.jsx("span",{className:"text-green-400",children:"Enabled"}):y.jsx("span",{className:"text-muted-foreground/80",children:"Disabled"}),e.fetchedModels&&y.jsxs("span",{className:"text-xs text-muted-foreground/80 ml-2",children:["(Last fetched:"," ",e.modelsLastFetchedAt?new Date(e.modelsLastFetchedAt).toLocaleString():"Never",")"]})]}),g&&y.jsx("div",{className:"pt-1",children:y.jsxs(Ht,{variant:"outline",size:"sm",onClick:a,disabled:v,className:"text-xs h-7 px-2",children:[o==="fetching"&&y.jsx(Vn,{className:"h-3 w-3 mr-1 animate-spin"}),o==="success"&&y.jsx(Ws,{className:"h-3 w-3 mr-1 text-green-500"}),o==="error"&&y.jsx(lh,{className:"h-3 w-3 mr-1 text-destructive"}),o==="idle"&&y.jsx(fw,{className:"h-3 w-3 mr-1"}),o==="fetching"?"Fetching...":o==="error"?"Fetch Failed":"Fetch Models Now"]})})]}),y.jsxs("div",{className:"space-y-1 pt-2",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("span",{className:"font-medium text-card-foreground text-sm",children:["Model Enablement (",O," / ",L," enabled)"]}),y.jsx(sr,{tooltipText:u?"Show Models":"Hide Models",onClick:D,"aria-label":u?"Show model list":"Hide model list",icon:u?y.jsx(Kl,{}):y.jsx(Cd,{}),className:"h-6 w-6"})]}),!u&&y.jsx(e9,{providerId:e.id,allAvailableModels:S.map(Z=>({id:Z.id,name:Z.name})),enabledModelIds:E,onToggleModel:R,isLoading:o==="fetching",disabled:s,listHeightClass:"h-64",onModelClick:B})]})]})},M0e=yt.memo(j0e),t9=({className:e,label:t,selectedKeyId:n,onKeySelected:r,apiKeys:a,disabled:i=!1})=>{var u;const o=d=>{r(d==="none"?null:d)},s=(u=a.find(d=>d.id===n))==null?void 0:u.name,l=n?s||`Key ID: ${n.substring(0,6)}...`:"None";return y.jsxs(Ud,{value:n??"none",onValueChange:o,disabled:i||a.length===0,children:[y.jsx(qd,{className:Rt("w-full h-9 text-sm bg-background border-border text-foreground",e),"aria-label":t||"Select API Key",children:y.jsx(Hd,{asChild:!0,children:y.jsxs("div",{className:"flex items-center overflow-hidden",children:[y.jsx(wH,{className:"h-3 w-3 mr-1.5 text-muted-foreground flex-shrink-0"}),y.jsxs("span",{className:"truncate flex-grow text-left",children:[t&&y.jsxs("span",{className:"mr-1",children:[t,":"]}),a.length===0?y.jsx("span",{className:"text-muted-foreground",children:"No keys available"}):l]})]})})}),y.jsxs(Vd,{className:"bg-popover border-border text-popover-foreground",children:[y.jsx(bi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),a.map(d=>y.jsx(bi,{value:d.id,children:d.name||`Key ID: ${d.id.substring(0,6)}...`},d.id))]})]})},P0e=({providerId:e,editData:t,apiKeys:n,allAvailableModels:r,isSaving:a,onCancel:i,onSave:o,onChange:s})=>{const l=LC(t.type??null),u=$C(t.type??null),d=Pm(t.type??null),h=t.isEnabled??!1,p=t.autoFetchModels??!1,g=N.useMemo(()=>new Set(t.enabledModels??[]),[t.enabledModels]),v=N.useCallback((b,_)=>{const x=new Set(t.enabledModels??[]);_?x.add(b):x.delete(b);const S=Array.from(x);s("enabledModels",S)},[t.enabledModels,s]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground mb-2",children:"Basic Configuration"}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(cn,{htmlFor:`edit-name-${e}`,children:"Provider Name"}),y.jsx(Jn,{id:`edit-name-${e}`,value:t.name||"",onChange:b=>s("name",b.target.value),placeholder:"Provider Name",disabled:a})]}),y.jsxs("div",{className:"space-y-1",children:[y.jsx(cn,{htmlFor:`edit-type-${e}`,children:"Provider Type"}),y.jsxs(Ud,{value:t.type??"",onValueChange:b=>s("type",b),disabled:a,children:[y.jsx(qd,{id:`edit-type-${e}`,children:y.jsx(Hd,{placeholder:"Select Type"})}),y.jsx(Vd,{children:DM.map(b=>y.jsx(bi,{value:b.value,children:b.label},b.value))})]})]}),l&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(cn,{children:"API Key"}),y.jsx(t9,{selectedKeyId:t.apiKeyId??null,onKeySelected:b=>s("apiKeyId",b),apiKeys:n,disabled:a})]}),u&&y.jsxs("div",{className:"space-y-1",children:[y.jsx(cn,{htmlFor:`edit-baseurl-${e}`,children:"Base URL"}),y.jsx(Jn,{id:`edit-baseurl-${e}`,value:t.baseURL||"",onChange:b=>s("baseURL",b.target.value),placeholder:"e.g., http://localhost:11434",disabled:a})]}),y.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[y.jsx(Ls,{id:`edit-enabled-${e}`,checked:h,onCheckedChange:b=>s("isEnabled",b),disabled:a,"aria-labelledby":`edit-enabled-label-${e}`}),y.jsx(cn,{id:`edit-enabled-label-${e}`,htmlFor:`edit-enabled-${e}`,children:"Provider Enabled"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ls,{id:`edit-autofetch-${e}`,checked:p,onCheckedChange:b=>s("autoFetchModels",b),disabled:!d||a,"aria-labelledby":`edit-autofetch-label-${e}`}),y.jsxs(cn,{id:`edit-autofetch-label-${e}`,htmlFor:`edit-autofetch-${e}`,className:d?"":"text-muted-foreground",children:["Auto-fetch models ",d?"":"(Not Supported)"]})]})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h4",{className:"text-md font-semibold text-card-foreground",children:"Model Enablement"}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle models on/off for global use. Changes will be saved with the form."}),y.jsx(e9,{providerId:e,allAvailableModels:r,enabledModelIds:g,onToggleModel:v,disabled:a,listHeightClass:"h-[calc(100%-8rem)]"})]})]}),y.jsx(jh,{className:"my-4"}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Ht,{variant:"ghost",size:"sm",onClick:i,disabled:a,type:"button",children:[y.jsx(gu,{className:"h-4 w-4 mr-1"})," Cancel Edit"]}),y.jsxs(Ht,{variant:"secondary",size:"sm",onClick:o,disabled:a,type:"button",children:[a&&y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(hw,{className:"h-4 w-4 mr-1"})," ",a?"Saving...":"Save Changes"]})]})]})},F0e=yt.memo(P0e),L0e=({provider:e,apiKeys:t,onUpdate:n,onDelete:r,onFetchModels:a,fetchStatus:i,onSelectModelForDetails:o})=>{const[s,l]=N.useState(!1),[u,d]=N.useState(!1),[h,p]=N.useState(!1),[g,v]=N.useState({}),b=Bn(L=>L.getAllAvailableModelDefsForProvider),[_,x]=N.useState([]),S=N.useMemo(()=>[..._].sort((L,B)=>(L.name||L.id).localeCompare(B.name||B.id)),[_]);N.useEffect(()=>{if(s){const L=b(e.id);x(L.map(B=>({id:B.id,name:B.name}))),v({name:e.name,type:e.type,isEnabled:e.isEnabled,apiKeyId:e.apiKeyId,baseURL:e.baseURL,enabledModels:e.enabledModels??[],autoFetchModels:e.autoFetchModels})}else x([])},[s,e.id,e.name,e.type,e.isEnabled,e.apiKeyId,e.baseURL,e.enabledModels,e.autoFetchModels,b]);const E=()=>l(!0),C=()=>{l(!1),v({}),d(!1)},k=N.useCallback(async()=>{d(!0);try{const L=g.enabledModels&&g.enabledModels.length>0?g.enabledModels:null,B={name:g.name,type:g.type,isEnabled:g.isEnabled,apiKeyId:g.apiKeyId,baseURL:g.baseURL,autoFetchModels:g.autoFetchModels,enabledModels:L};Object.keys(B).forEach(Y=>{B[Y]===void 0&&delete B[Y]}),await n(e.id,B),l(!1),v({}),lt.success(`Provider "${B.name||e.name}" updated.`)}catch(L){console.error("Failed to save provider update:",L),lt.error("Failed to save provider configuration.")}finally{d(!1)}},[g,n,e.id,e.name]),R=N.useCallback((L,B)=>{v(Y=>({...Y,[L]:B}))},[]),D=N.useCallback(async()=>{if(window.confirm(`Delete provider "${e.name}"?`)){p(!0);try{await r(e.id)}catch(L){console.error("Failed to delete provider:",L),p(!1)}}},[r,e.id,e.name]),O=N.useCallback(async()=>{if(await a(e.id),s){const L=b(e.id);x(L.map(B=>({id:B.id,name:B.name})))}},[a,e.id,s,b]);return y.jsx("div",{className:"border border-border p-4 space-y-3 bg-card rounded-md shadow-sm",children:s?y.jsx(F0e,{providerId:e.id,editData:g,apiKeys:t,allAvailableModels:S,isSaving:u,onCancel:C,onSave:k,onChange:R,onUpdate:n}):y.jsx(M0e,{provider:e,apiKeys:t,onEdit:E,onDelete:D,onFetchModels:O,onUpdate:n,fetchStatus:i,isDeleting:h,onSelectModelForDetails:o})})},$0e=yt.memo(L0e),B0e=({apiKeys:e,onAddProvider:t,onCancel:n})=>{const[r,a]=N.useState(!1),[i,o]=N.useState({name:"",type:"openai",isEnabled:!0,apiKeyId:null,baseURL:null,enabledModels:null,autoFetchModels:!1,fetchedModels:null,modelsLastFetchedAt:null}),s=N.useCallback((p,g)=>{o(v=>{const b={...v,[p]:g};if(p==="type"){const _=g;b.apiKeyId=null,b.baseURL=null,b.autoFetchModels=Pm(_),b.enabledModels=null}return(p==="isEnabled"||p==="autoFetchModels")&&(b[p]=!!g),b})},[]),l=N.useCallback(async()=>{if(!i.name||!i.type){lt.error("Provider Name and Type are required.");return}a(!0);try{const p=i.type,g=i.autoFetchModels??Pm(p),v={name:i.name,type:p,isEnabled:i.isEnabled??!0,apiKeyId:i.apiKeyId??null,baseURL:i.baseURL??null,enabledModels:null,autoFetchModels:g,fetchedModels:null,modelsLastFetchedAt:null};await t(v),n()}catch(p){console.error("Failed to add provider (from form component):",p)}finally{a(!1)}},[i,t,n]),u=LC(i.type??null),d=$C(i.type??null),h=Pm(i.type??null);return y.jsxs("div",{className:"border border-primary rounded-md p-4 space-y-3 bg-card shadow-lg flex-shrink-0",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:"Add New Provider"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Jn,{value:i.name||"",onChange:p=>s("name",p.target.value),placeholder:"Provider Name (e.g., My Ollama)",className:"flex-grow",disabled:r,"aria-label":"Provider Name"}),y.jsxs(Ud,{value:i.type??"openai",onValueChange:p=>s("type",p),disabled:r,children:[y.jsx(qd,{className:"w-[200px]","aria-label":"Provider Type",children:y.jsx(Hd,{placeholder:"Select Type"})}),y.jsx(Vd,{children:DM.map(p=>y.jsx(bi,{value:p.value,children:p.label},p.value))})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ls,{id:"new-enabled",checked:i.isEnabled??!0,onCheckedChange:p=>s("isEnabled",p),disabled:r,"aria-labelledby":"new-enabled-label"}),y.jsx(cn,{id:"new-enabled-label",htmlFor:"new-enabled",children:"Enabled"})]})]}),(u||d)&&y.jsxs("div",{className:"flex items-center space-x-2",children:[u&&y.jsx(t9,{label:"API Key:",selectedKeyId:i.apiKeyId??null,onKeySelected:p=>s("apiKeyId",p),apiKeys:e||[],className:"flex-grow",disabled:r}),d&&y.jsx(Jn,{value:i.baseURL||"",onChange:p=>s("baseURL",p.target.value),placeholder:"Base URL (e.g., http://localhost:11434)",className:"flex-grow",disabled:r,"aria-label":"Base URL"})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(Ls,{id:"new-autofetch",checked:i.autoFetchModels??!1,onCheckedChange:p=>s("autoFetchModels",p),disabled:!h||r,"aria-labelledby":"new-autofetch-label"}),y.jsxs(cn,{id:"new-autofetch-label",htmlFor:"new-autofetch",className:h?"":"text-muted-foreground",children:["Auto-fetch models ",h?"":"(Not Supported)"]})]}),y.jsx("p",{className:"text-xs text-muted-foreground",children:"Models fetched will appear in the global organizer above after fetching."}),y.jsxs("div",{className:"flex justify-end space-x-2",children:[y.jsxs(Ht,{variant:"ghost",size:"sm",onClick:n,disabled:r,type:"button",children:[y.jsx(gu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Ht,{variant:"secondary",size:"sm",onClick:l,disabled:r||!i.name||!i.type,type:"button",children:[r&&y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(hw,{className:"h-4 w-4 mr-1"})," ",r?"Adding...":"Add Provider"]})]})]})};var FE="rovingFocusGroup.onEntryFocus",z0e={bubbles:!1,cancelable:!0},Fg="RovingFocusGroup",[lC,n9,U0e]=x1(Fg),[H0e,R1]=Pi(Fg,[U0e]),[q0e,V0e]=H0e(Fg),r9=N.forwardRef((e,t)=>y.jsx(lC.Provider,{scope:e.__scopeRovingFocusGroup,children:y.jsx(lC.Slot,{scope:e.__scopeRovingFocusGroup,children:y.jsx(G0e,{...e,ref:t})})}));r9.displayName=Fg;var G0e=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:s,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=e,p=N.useRef(null),g=kn(t,p),v=rp(i),[b,_]=qs({prop:o,defaultProp:s??null,onChange:l,caller:Fg}),[x,S]=N.useState(!1),E=Da(u),C=n9(n),k=N.useRef(!1),[R,D]=N.useState(0);return N.useEffect(()=>{const O=p.current;if(O)return O.addEventListener(FE,E),()=>O.removeEventListener(FE,E)},[E]),y.jsx(q0e,{scope:n,orientation:r,dir:v,loop:a,currentTabStopId:b,onItemFocus:N.useCallback(O=>_(O),[_]),onItemShiftTab:N.useCallback(()=>S(!0),[]),onFocusableItemAdd:N.useCallback(()=>D(O=>O+1),[]),onFocusableItemRemove:N.useCallback(()=>D(O=>O-1),[]),children:y.jsx(tn.div,{tabIndex:x||R===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...e.style},onMouseDown:qt(e.onMouseDown,()=>{k.current=!0}),onFocus:qt(e.onFocus,O=>{const L=!k.current;if(O.target===O.currentTarget&&L&&!x){const B=new CustomEvent(FE,z0e);if(O.currentTarget.dispatchEvent(B),!B.defaultPrevented){const Y=C().filter(ae=>ae.focusable),F=Y.find(ae=>ae.active),Z=Y.find(ae=>ae.id===b),ne=[F,Z,...Y].filter(Boolean).map(ae=>ae.ref.current);o9(ne,d)}}k.current=!1}),onBlur:qt(e.onBlur,()=>S(!1))})})}),a9="RovingFocusGroupItem",i9=N.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:a=!1,tabStopId:i,children:o,...s}=e,l=ni(),u=i||l,d=V0e(a9,n),h=d.currentTabStopId===u,p=n9(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:b}=d;return N.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),y.jsx(lC.ItemSlot,{scope:n,id:u,focusable:r,active:a,children:y.jsx(tn.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...s,ref:t,onMouseDown:qt(e.onMouseDown,_=>{r?d.onItemFocus(u):_.preventDefault()}),onFocus:qt(e.onFocus,()=>d.onItemFocus(u)),onKeyDown:qt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){d.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const x=Z0e(_,d.orientation,d.dir);if(x!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let E=p().filter(C=>C.focusable).map(C=>C.ref.current);if(x==="last")E.reverse();else if(x==="prev"||x==="next"){x==="prev"&&E.reverse();const C=E.indexOf(_.currentTarget);E=d.loop?Y0e(E,C+1):E.slice(C+1)}setTimeout(()=>o9(E))}}),children:typeof o=="function"?o({isCurrentTabStop:h,hasTabStop:b!=null}):o})})});i9.displayName=a9;var W0e={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function K0e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Z0e(e,t,n){const r=K0e(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return W0e[r]}function o9(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Y0e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var s9=r9,l9=i9,I1="Tabs",[X0e,k_e]=Pi(I1,[R1]),c9=R1(),[J0e,CT]=X0e(I1),u9=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:s,activationMode:l="automatic",...u}=e,d=rp(s),[h,p]=qs({prop:r,onChange:a,defaultProp:i??"",caller:I1});return y.jsx(J0e,{scope:n,baseId:ni(),value:h,onValueChange:p,orientation:o,dir:d,activationMode:l,children:y.jsx(tn.div,{dir:d,"data-orientation":o,...u,ref:t})})});u9.displayName=I1;var d9="TabsList",f9=N.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...a}=e,i=CT(d9,n),o=c9(n);return y.jsx(s9,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:y.jsx(tn.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});f9.displayName=d9;var h9="TabsTrigger",p9=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:a=!1,...i}=e,o=CT(h9,n),s=c9(n),l=y9(o.baseId,r),u=b9(o.baseId,r),d=r===o.value;return y.jsx(l9,{asChild:!0,...s,focusable:!a,active:d,children:y.jsx(tn.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:l,...i,ref:t,onMouseDown:qt(e.onMouseDown,h=>{!a&&h.button===0&&h.ctrlKey===!1?o.onValueChange(r):h.preventDefault()}),onKeyDown:qt(e.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&o.onValueChange(r)}),onFocus:qt(e.onFocus,()=>{const h=o.activationMode!=="manual";!d&&!a&&h&&o.onValueChange(r)})})})});p9.displayName=h9;var m9="TabsContent",g9=N.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:a,children:i,...o}=e,s=CT(m9,n),l=y9(s.baseId,r),u=b9(s.baseId,r),d=r===s.value,h=N.useRef(d);return N.useEffect(()=>{const p=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(p)},[]),y.jsx(La,{present:a||d,children:({present:p})=>y.jsx(tn.div,{"data-state":d?"active":"inactive","data-orientation":s.orientation,role:"tabpanel","aria-labelledby":l,hidden:!p,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:h.current?"0s":void 0},children:p&&i})})});g9.displayName=m9;function y9(e,t){return`${e}-trigger-${t}`}function b9(e,t){return`${e}-content-${t}`}var Q0e=u9,ege=f9,tge=p9,nge=g9;function rge({className:e,...t}){return y.jsx(Q0e,{"data-slot":"tabs",className:Rt("flex flex-col gap-2",e),...t})}function age({className:e,...t}){return y.jsx(ege,{"data-slot":"tabs-list",className:Rt("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...t})}function ige({className:e,...t}){return y.jsx(tge,{"data-slot":"tabs-trigger",className:Rt("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function oge({className:e,...t}){return y.jsx(nge,{"data-slot":"tabs-content",className:Rt("flex-1 outline-none",e),...t})}const sp=({tabs:e,defaultValue:t,initialValue:n,onValueChange:r,className:a,listClassName:i,contentContainerClassName:o,scrollable:s})=>{var g;const[l,u]=N.useState(n??t??((g=e[0])==null?void 0:g.value));N.useEffect(()=>{n!==void 0&&n!==l&&u(n)},[n,l]);const d=v=>{u(v),r&&r(v)},h=Rt("px-3 py-1.5 text-sm font-medium rounded-md","text-muted-foreground","border border-transparent","focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","data-[state=active]:bg-primary/10 data-[state=active]:text-primary","data-[state=active]:border-primary","dark:data-[state=active]:bg-primary/20 dark:data-[state=active]:text-primary","dark:data-[state=active]:border-primary/70","hover:bg-muted/50 hover:text-primary/80"),p=({children:v})=>{const b=Rt("flex-grow overflow-y-auto pb-6 pr-2 -mr-2",o);return s?y.jsx(zd,{className:b,children:v}):y.jsx("div",{className:b,children:v})};return y.jsxs(rge,{value:l,onValueChange:d,defaultValue:t,className:Rt("flex flex-col h-full",a),children:[y.jsx(age,{className:Rt("flex-shrink-0 sticky top-0 bg-background z-10 mb-4 flex-wrap h-auto justify-start border-b gap-1 p-1 -mx-6 px-6",i),children:e.map(v=>y.jsx(ige,{value:v.value,disabled:v.disabled,className:h,children:v.label},v.value))}),y.jsx(p,{children:e.map(v=>y.jsx(oge,{value:v.value,className:"data-[state=inactive]:hidden h-full",children:v.content},v.value))})]})};function sge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>r=>{t.forEach(a=>a(r))},t)}const O1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lp(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function kT(e){return"nodeType"in e}function Li(e){var t,n;return e?lp(e)?e:kT(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function TT(e){const{Document:t}=Li(e);return e instanceof t}function Lg(e){return lp(e)?!1:e instanceof Li(e).HTMLElement}function v9(e){return e instanceof Li(e).SVGElement}function cp(e){return e?lp(e)?e.document:kT(e)?TT(e)?e:Lg(e)||v9(e)?e.ownerDocument:document:document:document}const Gs=O1?N.useLayoutEffect:N.useEffect;function AT(e){const t=N.useRef(e);return Gs(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.current==null?void 0:t.current(...r)},[])}function lge(){const e=N.useRef(null),t=N.useCallback((r,a)=>{e.current=setInterval(r,a)},[]),n=N.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function H0(e,t){t===void 0&&(t=[e]);const n=N.useRef(e);return Gs(()=>{n.current!==e&&(n.current=e)},t),n}function $g(e,t){const n=N.useRef();return N.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function iw(e){const t=AT(e),n=N.useRef(null),r=N.useCallback(a=>{a!==n.current&&(t==null||t(a,n.current)),n.current=a},[]);return[n,r]}function cC(e){const t=N.useRef();return N.useEffect(()=>{t.current=e},[e]),t.current}let LE={};function Bg(e,t){return N.useMemo(()=>{if(t)return t;const n=LE[e]==null?0:LE[e]+1;return LE[e]=n,e+"-"+n},[e,t])}function w9(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((i,o)=>{const s=Object.entries(o);for(const[l,u]of s){const d=i[l];d!=null&&(i[l]=d+e*u)}return i},{...t})}}const sh=w9(1),q0=w9(-1);function cge(e){return"clientX"in e&&"clientY"in e}function NT(e){if(!e)return!1;const{KeyboardEvent:t}=Li(e.target);return t&&e instanceof t}function uge(e){if(!e)return!1;const{TouchEvent:t}=Li(e.target);return t&&e instanceof t}function uC(e){if(uge(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return cge(e)?{x:e.clientX,y:e.clientY}:null}const V0=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[V0.Translate.toString(e),V0.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),h6="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function dge(e){return e.matches(h6)?e:e.querySelector(h6)}const fge={display:"none"};function hge(e){let{id:t,value:n}=e;return yt.createElement("div",{id:t,style:fge},n)}function pge(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return yt.createElement("div",{id:t,style:a,role:"status","aria-live":r,"aria-atomic":!0},n)}function mge(){const[e,t]=N.useState("");return{announce:N.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const _9=N.createContext(null);function gge(e){const t=N.useContext(_9);N.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yge(){const[e]=N.useState(()=>new Set),t=N.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[N.useCallback(r=>{let{type:a,event:i}=r;e.forEach(o=>{var s;return(s=o[a])==null?void 0:s.call(o,i)})},[e]),t]}const bge={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},vge={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function wge(e){let{announcements:t=vge,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=bge}=e;const{announce:i,announcement:o}=mge(),s=Bg("DndLiveRegion"),[l,u]=N.useState(!1);if(N.useEffect(()=>{u(!0)},[]),gge(N.useMemo(()=>({onDragStart(h){let{active:p}=h;i(t.onDragStart({active:p}))},onDragMove(h){let{active:p,over:g}=h;t.onDragMove&&i(t.onDragMove({active:p,over:g}))},onDragOver(h){let{active:p,over:g}=h;i(t.onDragOver({active:p,over:g}))},onDragEnd(h){let{active:p,over:g}=h;i(t.onDragEnd({active:p,over:g}))},onDragCancel(h){let{active:p,over:g}=h;i(t.onDragCancel({active:p,over:g}))}}),[i,t])),!l)return null;const d=yt.createElement(yt.Fragment,null,yt.createElement(hge,{id:r,value:a.draggable}),yt.createElement(pge,{id:s,announcement:o}));return n?Ds.createPortal(d,n):d}var ba;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(ba||(ba={}));function ow(){}function p6(e,t){return N.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function _ge(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return N.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const Qo=Object.freeze({x:0,y:0});function x9(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function S9(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function xge(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function m6(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function E9(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function g6(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Sge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=g6(t,t.left,t.top),i=[];for(const o of r){const{id:s}=o,l=n.get(s);if(l){const u=x9(g6(l),a);i.push({id:s,data:{droppableContainer:o,value:u}})}}return i.sort(S9)},Ege=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=m6(t),i=[];for(const o of r){const{id:s}=o,l=n.get(s);if(l){const u=m6(l),d=a.reduce((p,g,v)=>p+x9(u[v],g),0),h=Number((d/4).toFixed(4));i.push({id:s,data:{droppableContainer:o,value:h}})}}return i.sort(S9)};function Cge(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-r,s=i-n;if(r<a&&n<i){const l=t.width*t.height,u=e.width*e.height,d=o*s,h=d/(l+u-d);return Number(h.toFixed(4))}return 0}const kge=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const i of r){const{id:o}=i,s=n.get(o);if(s){const l=Cge(s,t);l>0&&a.push({id:o,data:{droppableContainer:i,value:l}})}}return a.sort(xge)};function Tge(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function C9(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Qo}function Age(e){return function(n){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return a.reduce((o,s)=>({...o,top:o.top+e*s.y,bottom:o.bottom+e*s.y,left:o.left+e*s.x,right:o.right+e*s.x}),{...n})}}const Nge=Age(1);function Rge(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Ige(e,t,n){const r=Rge(t);if(!r)return e;const{scaleX:a,scaleY:i,x:o,y:s}=r,l=e.left-o-(1-a)*parseFloat(n),u=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),d=a?e.width/a:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:l+d,bottom:u+h,left:l}}const Oge={ignoreTransform:!1};function up(e,t){t===void 0&&(t=Oge);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Li(e).getComputedStyle(e);u&&(n=Ige(n,u,d))}const{top:r,left:a,width:i,height:o,bottom:s,right:l}=n;return{top:r,left:a,width:i,height:o,bottom:s,right:l}}function y6(e){return up(e,{ignoreTransform:!0})}function Dge(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function jge(e,t){return t===void 0&&(t=Li(e).getComputedStyle(e)),t.position==="fixed"}function Mge(e,t){t===void 0&&(t=Li(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?n.test(i):!1})}function D1(e,t){const n=[];function r(a){if(t!=null&&n.length>=t||!a)return n;if(TT(a)&&a.scrollingElement!=null&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Lg(a)||v9(a)||n.includes(a))return n;const i=Li(e).getComputedStyle(a);return a!==e&&Mge(a,i)&&n.push(a),jge(a,i)?n:r(a.parentNode)}return e?r(e):n}function k9(e){const[t]=D1(e,1);return t??null}function $E(e){return!O1||!e?null:lp(e)?e:kT(e)?TT(e)||e===cp(e).scrollingElement?window:Lg(e)?e:null:null}function T9(e){return lp(e)?e.scrollX:e.scrollLeft}function A9(e){return lp(e)?e.scrollY:e.scrollTop}function dC(e){return{x:T9(e),y:A9(e)}}var Oa;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Oa||(Oa={}));function N9(e){return!O1||!e?!1:e===document.scrollingElement}function R9(e){const t={x:0,y:0},n=N9(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=r.y,s=e.scrollLeft>=r.x;return{isTop:a,isLeft:i,isBottom:o,isRight:s,maxScroll:r,minScroll:t}}const Pge={x:.2,y:.2};function Fge(e,t,n,r,a){let{top:i,left:o,right:s,bottom:l}=n;r===void 0&&(r=10),a===void 0&&(a=Pge);const{isTop:u,isBottom:d,isLeft:h,isRight:p}=R9(e),g={x:0,y:0},v={x:0,y:0},b={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+b.height?(g.y=Oa.Backward,v.y=r*Math.abs((t.top+b.height-i)/b.height)):!d&&l>=t.bottom-b.height&&(g.y=Oa.Forward,v.y=r*Math.abs((t.bottom-b.height-l)/b.height)),!p&&s>=t.right-b.width?(g.x=Oa.Forward,v.x=r*Math.abs((t.right-b.width-s)/b.width)):!h&&o<=t.left+b.width&&(g.x=Oa.Backward,v.x=r*Math.abs((t.left+b.width-o)/b.width)),{direction:g,speed:v}}function Lge(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function I9(e){return e.reduce((t,n)=>sh(t,dC(n)),Qo)}function $ge(e){return e.reduce((t,n)=>t+T9(n),0)}function Bge(e){return e.reduce((t,n)=>t+A9(n),0)}function zge(e,t){if(t===void 0&&(t=up),!e)return;const{top:n,left:r,bottom:a,right:i}=t(e);k9(e)&&(a<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Uge=[["x",["left","right"],$ge],["y",["top","bottom"],Bge]];class RT{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=D1(n),a=I9(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,s]of Uge)for(const l of o)Object.defineProperty(this,l,{get:()=>{const u=s(r),d=a[i]-u;return this.rect[l]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class $m{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var a;(a=this.target)==null||a.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function Hge(e){const{EventTarget:t}=Li(e);return e instanceof t?e:cp(e)}function BE(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var vo;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(vo||(vo={}));function b6(e){e.preventDefault()}function qge(e){e.stopPropagation()}var Gn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Gn||(Gn={}));const O9={start:[Gn.Space,Gn.Enter],cancel:[Gn.Esc],end:[Gn.Space,Gn.Enter,Gn.Tab]},Vge=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Gn.Right:return{...n,x:n.x+25};case Gn.Left:return{...n,x:n.x-25};case Gn.Down:return{...n,y:n.y+25};case Gn.Up:return{...n,y:n.y-25}}};class IT{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new $m(cp(n)),this.windowListeners=new $m(Li(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(vo.Resize,this.handleCancel),this.windowListeners.add(vo.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(vo.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&zge(r),n(Qo)}handleKeyDown(t){if(NT(t)){const{active:n,context:r,options:a}=this.props,{keyboardCodes:i=O9,coordinateGetter:o=Vge,scrollBehavior:s="smooth"}=a,{code:l}=t;if(i.end.includes(l)){this.handleEnd(t);return}if(i.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:u}=r.current,d=u?{x:u.left,y:u.top}:Qo;this.referenceCoordinates||(this.referenceCoordinates=d);const h=o(t,{active:n,context:r.current,currentCoordinates:d});if(h){const p=q0(h,d),g={x:0,y:0},{scrollableAncestors:v}=r.current;for(const b of v){const _=t.code,{isTop:x,isRight:S,isLeft:E,isBottom:C,maxScroll:k,minScroll:R}=R9(b),D=Lge(b),O={x:Math.min(_===Gn.Right?D.right-D.width/2:D.right,Math.max(_===Gn.Right?D.left:D.left+D.width/2,h.x)),y:Math.min(_===Gn.Down?D.bottom-D.height/2:D.bottom,Math.max(_===Gn.Down?D.top:D.top+D.height/2,h.y))},L=_===Gn.Right&&!S||_===Gn.Left&&!E,B=_===Gn.Down&&!C||_===Gn.Up&&!x;if(L&&O.x!==h.x){const Y=b.scrollLeft+p.x,F=_===Gn.Right&&Y<=k.x||_===Gn.Left&&Y>=R.x;if(F&&!p.y){b.scrollTo({left:Y,behavior:s});return}F?g.x=b.scrollLeft-Y:g.x=_===Gn.Right?b.scrollLeft-k.x:b.scrollLeft-R.x,g.x&&b.scrollBy({left:-g.x,behavior:s});break}else if(B&&O.y!==h.y){const Y=b.scrollTop+p.y,F=_===Gn.Down&&Y<=k.y||_===Gn.Up&&Y>=R.y;if(F&&!p.x){b.scrollTo({top:Y,behavior:s});return}F?g.y=b.scrollTop-Y:g.y=_===Gn.Down?b.scrollTop-k.y:b.scrollTop-R.y,g.y&&b.scrollBy({top:-g.y,behavior:s});break}}this.handleMove(t,sh(q0(h,this.referenceCoordinates),g))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}IT.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=O9,onActivation:a}=t,{active:i}=n;const{code:o}=e.nativeEvent;if(r.start.includes(o)){const s=i.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function v6(e){return!!(e&&"distance"in e)}function w6(e){return!!(e&&"delay"in e)}class OT{constructor(t,n,r){var a;r===void 0&&(r=Hge(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:i}=t,{target:o}=i;this.props=t,this.events=n,this.document=cp(o),this.documentListeners=new $m(this.document),this.listeners=new $m(r),this.windowListeners=new $m(Li(o)),this.initialCoordinates=(a=uC(i))!=null?a:Qo,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(vo.Resize,this.handleCancel),this.windowListeners.add(vo.DragStart,b6),this.windowListeners.add(vo.VisibilityChange,this.handleCancel),this.windowListeners.add(vo.ContextMenu,b6),this.documentListeners.add(vo.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(w6(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(v6(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:a}=this.props;a(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(vo.Click,qge,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(vo.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:s}}=i;if(!a)return;const l=(n=uC(t))!=null?n:Qo,u=q0(a,l);if(!r&&s){if(v6(s)){if(s.tolerance!=null&&BE(u,s.tolerance))return this.handleCancel();if(BE(u,s.distance))return this.handleStart()}if(w6(s)&&BE(u,s.tolerance))return this.handleCancel();this.handlePending(s,u);return}t.cancelable&&t.preventDefault(),o(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===Gn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Gge={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class DT extends OT{constructor(t){const{event:n}=t,r=cp(n.target);super(t,Gge,r)}}DT.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Wge={move:{name:"mousemove"},end:{name:"mouseup"}};var fC;(function(e){e[e.RightClick=2]="RightClick"})(fC||(fC={}));class Kge extends OT{constructor(t){super(t,Wge,cp(t.event.target))}}Kge.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===fC.RightClick?!1:(r==null||r({event:n}),!0)}}];const zE={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Zge extends OT{constructor(t){super(t,zE)}static setup(){return window.addEventListener(zE.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(zE.move.name,t)};function t(){}}}Zge.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return a.length>1?!1:(r==null||r({event:n}),!0)}}];var Bm;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Bm||(Bm={}));var sw;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(sw||(sw={}));function Yge(e){let{acceleration:t,activator:n=Bm.Pointer,canScroll:r,draggingRect:a,enabled:i,interval:o=5,order:s=sw.TreeOrder,pointerCoordinates:l,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:p}=e;const g=Jge({delta:h,disabled:!i}),[v,b]=lge(),_=N.useRef({x:0,y:0}),x=N.useRef({x:0,y:0}),S=N.useMemo(()=>{switch(n){case Bm.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Bm.DraggableRect:return a}},[n,a,l]),E=N.useRef(null),C=N.useCallback(()=>{const R=E.current;if(!R)return;const D=_.current.x*x.current.x,O=_.current.y*x.current.y;R.scrollBy(D,O)},[]),k=N.useMemo(()=>s===sw.TreeOrder?[...u].reverse():u,[s,u]);N.useEffect(()=>{if(!i||!u.length||!S){b();return}for(const R of k){if((r==null?void 0:r(R))===!1)continue;const D=u.indexOf(R),O=d[D];if(!O)continue;const{direction:L,speed:B}=Fge(R,O,S,t,p);for(const Y of["x","y"])g[Y][L[Y]]||(B[Y]=0,L[Y]=0);if(B.x>0||B.y>0){b(),E.current=R,v(C,o),_.current=B,x.current=L;return}}_.current={x:0,y:0},x.current={x:0,y:0},b()},[t,C,r,b,i,o,JSON.stringify(S),JSON.stringify(g),v,u,k,d,JSON.stringify(p)])}const Xge={x:{[Oa.Backward]:!1,[Oa.Forward]:!1},y:{[Oa.Backward]:!1,[Oa.Forward]:!1}};function Jge(e){let{delta:t,disabled:n}=e;const r=cC(t);return $g(a=>{if(n||!r||!a)return Xge;const i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[Oa.Backward]:a.x[Oa.Backward]||i.x===-1,[Oa.Forward]:a.x[Oa.Forward]||i.x===1},y:{[Oa.Backward]:a.y[Oa.Backward]||i.y===-1,[Oa.Forward]:a.y[Oa.Forward]||i.y===1}}},[n,t,r])}function Qge(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return $g(a=>{var i;return t==null?null:(i=r??a)!=null?i:null},[r,t])}function eye(e,t){return N.useMemo(()=>e.reduce((n,r)=>{const{sensor:a}=r,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,r)}));return[...n,...i]},[]),[e,t])}var G0;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(G0||(G0={}));var hC;(function(e){e.Optimized="optimized"})(hC||(hC={}));const _6=new Map;function tye(e,t){let{dragging:n,dependencies:r,config:a}=t;const[i,o]=N.useState(null),{frequency:s,measure:l,strategy:u}=a,d=N.useRef(e),h=_(),p=H0(h),g=N.useCallback(function(x){x===void 0&&(x=[]),!p.current&&o(S=>S===null?x:S.concat(x.filter(E=>!S.includes(E))))},[p]),v=N.useRef(null),b=$g(x=>{if(h&&!n)return _6;if(!x||x===_6||d.current!==e||i!=null){const S=new Map;for(let E of e){if(!E)continue;if(i&&i.length>0&&!i.includes(E.id)&&E.rect.current){S.set(E.id,E.rect.current);continue}const C=E.node.current,k=C?new RT(l(C),C):null;E.rect.current=k,k&&S.set(E.id,k)}return S}return x},[e,i,n,h,l]);return N.useEffect(()=>{d.current=e},[e]),N.useEffect(()=>{h||g()},[n,h]),N.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),N.useEffect(()=>{h||typeof s!="number"||v.current!==null||(v.current=setTimeout(()=>{g(),v.current=null},s))},[s,h,g,...r]),{droppableRects:b,measureDroppableContainers:g,measuringScheduled:i!=null};function _(){switch(u){case G0.Always:return!1;case G0.BeforeDragging:return n;default:return!n}}}function D9(e,t){return $g(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function nye(e,t){return D9(e,t)}function rye(e){let{callback:t,disabled:n}=e;const r=AT(t),a=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,n]);return N.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function j1(e){let{callback:t,disabled:n}=e;const r=AT(t),a=N.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[n]);return N.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function aye(e){return new RT(up(e),e)}function x6(e,t,n){t===void 0&&(t=aye);const[r,a]=N.useState(null);function i(){a(l=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=l??n)!=null?u:null}const d=t(e);return JSON.stringify(l)===JSON.stringify(d)?l:d})}const o=rye({callback(l){if(e)for(const u of l){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),s=j1({callback:i});return Gs(()=>{i(),e?(s==null||s.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),o==null||o.disconnect())},[e]),r}function iye(e){const t=D9(e);return C9(e,t)}const S6=[];function oye(e){const t=N.useRef(e),n=$g(r=>e?r&&r!==S6&&e&&t.current&&e.parentNode===t.current.parentNode?r:D1(e):S6,[e]);return N.useEffect(()=>{t.current=e},[e]),n}function sye(e){const[t,n]=N.useState(null),r=N.useRef(e),a=N.useCallback(i=>{const o=$E(i.target);o&&n(s=>s?(s.set(o,dC(o)),new Map(s)):null)},[]);return N.useEffect(()=>{const i=r.current;if(e!==i){o(i);const s=e.map(l=>{const u=$E(l);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,dC(u)]):null}).filter(l=>l!=null);n(s.length?new Map(s):null),r.current=e}return()=>{o(e),o(i)};function o(s){s.forEach(l=>{const u=$E(l);u==null||u.removeEventListener("scroll",a)})}},[a,e]),N.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>sh(i,o),Qo):I9(e):Qo,[e,t])}function E6(e,t){t===void 0&&(t=[]);const n=N.useRef(null);return N.useEffect(()=>{n.current=null},t),N.useEffect(()=>{const r=e!==Qo;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?q0(e,n.current):Qo}function lye(e){N.useEffect(()=>{if(!O1)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function cye(e,t){return N.useMemo(()=>e.reduce((n,r)=>{let{eventName:a,handler:i}=r;return n[a]=o=>{i(o,t)},n},{}),[e,t])}function j9(e){return N.useMemo(()=>e?Dge(e):null,[e])}const C6=[];function uye(e,t){t===void 0&&(t=up);const[n]=e,r=j9(n?Li(n):null),[a,i]=N.useState(C6);function o(){i(()=>e.length?e.map(l=>N9(l)?r:new RT(t(l),l)):C6)}const s=j1({callback:o});return Gs(()=>{s==null||s.disconnect(),o(),e.forEach(l=>s==null?void 0:s.observe(l))},[e]),a}function dye(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Lg(t)?t:e}function fye(e){let{measure:t}=e;const[n,r]=N.useState(null),a=N.useCallback(u=>{for(const{target:d}of u)if(Lg(d)){r(h=>{const p=t(d);return h?{...h,width:p.width,height:p.height}:p});break}},[t]),i=j1({callback:a}),o=N.useCallback(u=>{const d=dye(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),r(d?t(d):null)},[t,i]),[s,l]=iw(o);return N.useMemo(()=>({nodeRef:s,rect:n,setRef:l}),[n,s,l])}const hye=[{sensor:DT,options:{}},{sensor:IT,options:{}}],pye={current:{}},Zb={draggable:{measure:y6},droppable:{measure:y6,strategy:G0.WhileDragging,frequency:hC.Optimized},dragOverlay:{measure:up}};class zm extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const mye={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new zm,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ow},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zb,measureDroppableContainers:ow,windowRect:null,measuringScheduled:!1},gye={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ow,draggableNodes:new Map,over:null,measureDroppableContainers:ow},M1=N.createContext(gye),M9=N.createContext(mye);function yye(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new zm}}}function bye(e,t){switch(t.type){case ba.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case ba.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case ba.DragEnd:case ba.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case ba.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new zm(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case ba.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new zm(e.droppable.containers);return o.set(n,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case ba.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new zm(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function vye(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=N.useContext(M1),i=cC(r),o=cC(n==null?void 0:n.id);return N.useEffect(()=>{if(!t&&!r&&i&&o!=null){if(!NT(i)||document.activeElement===i.target)return;const s=a.get(o);if(!s)return;const{activatorNode:l,node:u}=s;if(!l.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[l.current,u.current]){if(!d)continue;const h=dge(d);if(h){h.focus();break}}})}},[r,t,a,o,i]),null}function wye(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...r}),n):n}function _ye(e){return N.useMemo(()=>({draggable:{...Zb.draggable,...e==null?void 0:e.draggable},droppable:{...Zb.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Zb.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function xye(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const i=N.useRef(!1),{x:o,y:s}=typeof a=="boolean"?{x:a,y:a}:a;Gs(()=>{if(!o&&!s||!t){i.current=!1;return}if(i.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=n(u),h=C9(d,r);if(o||(h.x=0),s||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const p=k9(u);p&&p.scrollBy({top:h.y,left:h.x})}},[t,o,s,r,n])}const P9=N.createContext({...Qo,scaleX:1,scaleY:1});var Bc;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Bc||(Bc={}));const Sye=N.memo(function(t){var n,r,a,i;let{id:o,accessibility:s,autoScroll:l=!0,children:u,sensors:d=hye,collisionDetection:h=kge,measuring:p,modifiers:g,...v}=t;const b=N.useReducer(bye,void 0,yye),[_,x]=b,[S,E]=yge(),[C,k]=N.useState(Bc.Uninitialized),R=C===Bc.Initialized,{draggable:{active:D,nodes:O,translate:L},droppable:{containers:B}}=_,Y=D!=null?O.get(D):null,F=N.useRef({initial:null,translated:null}),Z=N.useMemo(()=>{var tt;return D!=null?{id:D,data:(tt=Y==null?void 0:Y.data)!=null?tt:pye,rect:F}:null},[D,Y]),q=N.useRef(null),[ne,ae]=N.useState(null),[re,ee]=N.useState(null),ie=H0(v,Object.values(v)),U=Bg("DndDescribedBy",o),Q=N.useMemo(()=>B.getEnabled(),[B]),X=_ye(p),{droppableRects:de,measureDroppableContainers:be,measuringScheduled:_e}=tye(Q,{dragging:R,dependencies:[L.x,L.y],config:X.droppable}),Pe=Qge(O,D),Ne=N.useMemo(()=>re?uC(re):null,[re]),Re=Be(),Ce=nye(Pe,X.draggable.measure);xye({activeNode:D!=null?O.get(D):null,config:Re.layoutShiftCompensation,initialRect:Ce,measure:X.draggable.measure});const Fe=x6(Pe,X.draggable.measure,Ce),Qe=x6(Pe?Pe.parentElement:null),Le=N.useRef({activatorEvent:null,active:null,activeNode:Pe,collisionRect:null,collisions:null,droppableRects:de,draggableNodes:O,draggingNode:null,draggingNodeRect:null,droppableContainers:B,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ie=B.getNodeFor((n=Le.current.over)==null?void 0:n.id),V=fye({measure:X.dragOverlay.measure}),me=(r=V.nodeRef.current)!=null?r:Pe,Te=R?(a=V.rect)!=null?a:Fe:null,le=!!(V.nodeRef.current&&V.rect),oe=iye(le?null:Fe),J=j9(me?Li(me):null),xe=oye(R?Ie??Pe:null),Me=uye(xe),Ee=wye(g,{transform:{x:L.x-oe.x,y:L.y-oe.y,scaleX:1,scaleY:1},activatorEvent:re,active:Z,activeNodeRect:Fe,containerNodeRect:Qe,draggingNodeRect:Te,over:Le.current.over,overlayNodeRect:V.rect,scrollableAncestors:xe,scrollableAncestorRects:Me,windowRect:J}),We=Ne?sh(Ne,L):null,kt=sye(xe),at=E6(kt),_t=E6(kt,[Fe]),jt=sh(Ee,at),Dt=Te?Nge(Te,Ee):null,Gt=Z&&Dt?h({active:Z,collisionRect:Dt,droppableRects:de,droppableContainers:Q,pointerCoordinates:We}):null,ye=E9(Gt,"id"),[I,G]=N.useState(null),fe=le?Ee:sh(Ee,_t),Oe=Tge(fe,(i=I==null?void 0:I.rect)!=null?i:null,Fe),ve=N.useRef(null),ke=N.useCallback((tt,ge)=>{let{sensor:De,options:Ke}=ge;if(q.current==null)return;const Nt=O.get(q.current);if(!Nt)return;const pe=tt.nativeEvent,H=new De({active:q.current,activeNode:Nt,event:pe,options:Ke,context:Le,onAbort(W){if(!O.get(W))return;const{onDragAbort:Ae}=ie.current,He={id:W};Ae==null||Ae(He),S({type:"onDragAbort",event:He})},onPending(W,he,Ae,He){if(!O.get(W))return;const{onDragPending:Vt}=ie.current,ut={id:W,constraint:he,initialCoordinates:Ae,offset:He};Vt==null||Vt(ut),S({type:"onDragPending",event:ut})},onStart(W){const he=q.current;if(he==null)return;const Ae=O.get(he);if(!Ae)return;const{onDragStart:He}=ie.current,pt={activatorEvent:pe,active:{id:he,data:Ae.data,rect:F}};Ds.unstable_batchedUpdates(()=>{He==null||He(pt),k(Bc.Initializing),x({type:ba.DragStart,initialCoordinates:W,active:he}),S({type:"onDragStart",event:pt}),ae(ve.current),ee(pe)})},onMove(W){x({type:ba.DragMove,coordinates:W})},onEnd:z(ba.DragEnd),onCancel:z(ba.DragCancel)});ve.current=H;function z(W){return async function(){const{active:Ae,collisions:He,over:pt,scrollAdjustedTranslate:Vt}=Le.current;let ut=null;if(Ae&&Vt){const{cancelDrop:Tt}=ie.current;ut={activatorEvent:pe,active:Ae,collisions:He,delta:Vt,over:pt},W===ba.DragEnd&&typeof Tt=="function"&&await Promise.resolve(Tt(ut))&&(W=ba.DragCancel)}q.current=null,Ds.unstable_batchedUpdates(()=>{x({type:W}),k(Bc.Uninitialized),G(null),ae(null),ee(null),ve.current=null;const Tt=W===ba.DragEnd?"onDragEnd":"onDragCancel";if(ut){const Mt=ie.current[Tt];Mt==null||Mt(ut),S({type:Tt,event:ut})}})}}},[O]),ce=N.useCallback((tt,ge)=>(De,Ke)=>{const Nt=De.nativeEvent,pe=O.get(Ke);if(q.current!==null||!pe||Nt.dndKit||Nt.defaultPrevented)return;const H={active:pe};tt(De,ge.options,H)===!0&&(Nt.dndKit={capturedBy:ge.sensor},q.current=Ke,ke(De,ge))},[O,ke]),ft=eye(d,ce);lye(d),Gs(()=>{Fe&&C===Bc.Initializing&&k(Bc.Initialized)},[Fe,C]),N.useEffect(()=>{const{onDragMove:tt}=ie.current,{active:ge,activatorEvent:De,collisions:Ke,over:Nt}=Le.current;if(!ge||!De)return;const pe={active:ge,activatorEvent:De,collisions:Ke,delta:{x:jt.x,y:jt.y},over:Nt};Ds.unstable_batchedUpdates(()=>{tt==null||tt(pe),S({type:"onDragMove",event:pe})})},[jt.x,jt.y]),N.useEffect(()=>{const{active:tt,activatorEvent:ge,collisions:De,droppableContainers:Ke,scrollAdjustedTranslate:Nt}=Le.current;if(!tt||q.current==null||!ge||!Nt)return;const{onDragOver:pe}=ie.current,H=Ke.get(ye),z=H&&H.rect.current?{id:H.id,rect:H.rect.current,data:H.data,disabled:H.disabled}:null,W={active:tt,activatorEvent:ge,collisions:De,delta:{x:Nt.x,y:Nt.y},over:z};Ds.unstable_batchedUpdates(()=>{G(z),pe==null||pe(W),S({type:"onDragOver",event:W})})},[ye]),Gs(()=>{Le.current={activatorEvent:re,active:Z,activeNode:Pe,collisionRect:Dt,collisions:Gt,droppableRects:de,draggableNodes:O,draggingNode:me,draggingNodeRect:Te,droppableContainers:B,over:I,scrollableAncestors:xe,scrollAdjustedTranslate:jt},F.current={initial:Te,translated:Dt}},[Z,Pe,Gt,Dt,O,me,Te,de,B,I,xe,jt]),Yge({...Re,delta:L,draggingRect:Dt,pointerCoordinates:We,scrollableAncestors:xe,scrollableAncestorRects:Me});const vt=N.useMemo(()=>({active:Z,activeNode:Pe,activeNodeRect:Fe,activatorEvent:re,collisions:Gt,containerNodeRect:Qe,dragOverlay:V,draggableNodes:O,droppableContainers:B,droppableRects:de,over:I,measureDroppableContainers:be,scrollableAncestors:xe,scrollableAncestorRects:Me,measuringConfiguration:X,measuringScheduled:_e,windowRect:J}),[Z,Pe,Fe,re,Gt,Qe,V,O,B,de,I,be,xe,Me,X,_e,J]),M=N.useMemo(()=>({activatorEvent:re,activators:ft,active:Z,activeNodeRect:Fe,ariaDescribedById:{draggable:U},dispatch:x,draggableNodes:O,over:I,measureDroppableContainers:be}),[re,ft,Z,Fe,x,U,O,I,be]);return yt.createElement(_9.Provider,{value:E},yt.createElement(M1.Provider,{value:M},yt.createElement(M9.Provider,{value:vt},yt.createElement(P9.Provider,{value:Oe},u)),yt.createElement(vye,{disabled:(s==null?void 0:s.restoreFocus)===!1})),yt.createElement(wge,{...s,hiddenTextDescribedById:U}));function Be(){const tt=(ne==null?void 0:ne.autoScrollEnabled)===!1,ge=typeof l=="object"?l.enabled===!1:l===!1,De=R&&!tt&&!ge;return typeof l=="object"?{...l,enabled:De}:{enabled:De}}}),Eye=N.createContext(null),k6="button",Cye="Draggable";function kye(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const i=Bg(Cye),{activators:o,activatorEvent:s,active:l,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:p}=N.useContext(M1),{role:g=k6,roleDescription:v="draggable",tabIndex:b=0}=a??{},_=(l==null?void 0:l.id)===t,x=N.useContext(_?P9:Eye),[S,E]=iw(),[C,k]=iw(),R=cye(o,t),D=H0(n);Gs(()=>(h.set(t,{id:t,key:i,node:S,activatorNode:C,data:D}),()=>{const L=h.get(t);L&&L.key===i&&h.delete(t)}),[h,t]);const O=N.useMemo(()=>({role:g,tabIndex:b,"aria-disabled":r,"aria-pressed":_&&g===k6?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[r,g,b,_,v,d.draggable]);return{active:l,activatorEvent:s,activeNodeRect:u,attributes:O,isDragging:_,listeners:r?void 0:R,node:S,over:p,setNodeRef:E,setActivatorNodeRef:k,transform:x}}function Tye(){return N.useContext(M9)}const Aye="Droppable",Nye={timeout:25};function Rye(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const i=Bg(Aye),{active:o,dispatch:s,over:l,measureDroppableContainers:u}=N.useContext(M1),d=N.useRef({disabled:n}),h=N.useRef(!1),p=N.useRef(null),g=N.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:_}={...Nye,...a},x=H0(b??r),S=N.useCallback(()=>{if(!h.current){h.current=!0;return}g.current!=null&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),g.current=null},_)},[_]),E=j1({callback:S,disabled:v||!o}),C=N.useCallback((O,L)=>{E&&(L&&(E.unobserve(L),h.current=!1),O&&E.observe(O))},[E]),[k,R]=iw(C),D=H0(t);return N.useEffect(()=>{!E||!k.current||(E.disconnect(),h.current=!1,E.observe(k.current))},[k,E]),N.useEffect(()=>(s({type:ba.RegisterDroppable,element:{id:r,key:i,disabled:n,node:k,rect:p,data:D}}),()=>s({type:ba.UnregisterDroppable,key:i,id:r})),[r]),N.useEffect(()=>{n!==d.current.disabled&&(s({type:ba.SetDroppableDisabled,id:r,key:i,disabled:n}),d.current.disabled=n)},[r,i,n,s]),{active:o,rect:p,isOver:(l==null?void 0:l.id)===r,node:k,over:l,setNodeRef:R}}function jT(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Iye(e,t){return e.reduce((n,r,a)=>{const i=t.get(r);return i&&(n[a]=i),n},Array(e.length))}function Mb(e){return e!==null&&e>=0}function Oye(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Dye(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const F9=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const i=jT(t,r,n),o=t[a],s=i[a];return!s||!o?null:{x:s.left-o.left,y:s.top-o.top,scaleX:s.width/o.width,scaleY:s.height/o.height}},Pb={scaleX:1,scaleY:1},jye=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:i,overIndex:o}=e;const s=(t=i[n])!=null?t:r;if(!s)return null;if(a===n){const u=i[o];return u?{x:0,y:n<o?u.top+u.height-(s.top+s.height):u.top-s.top,...Pb}:null}const l=Mye(i,a,n);return a>n&&a<=o?{x:0,y:-s.height-l,...Pb}:a<n&&a>=o?{x:0,y:s.height+l,...Pb}:{x:0,y:0,...Pb}};function Mye(e,t,n){const r=e[t],a=e[t-1],i=e[t+1];return r?n<t?a?r.top-(a.top+a.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}const L9="Sortable",$9=yt.createContext({activeIndex:-1,containerId:L9,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:F9,disabled:{draggable:!1,droppable:!1}});function Pye(e){let{children:t,id:n,items:r,strategy:a=F9,disabled:i=!1}=e;const{active:o,dragOverlay:s,droppableRects:l,over:u,measureDroppableContainers:d}=Tye(),h=Bg(L9,n),p=s.rect!==null,g=N.useMemo(()=>r.map(R=>typeof R=="object"&&"id"in R?R.id:R),[r]),v=o!=null,b=o?g.indexOf(o.id):-1,_=u?g.indexOf(u.id):-1,x=N.useRef(g),S=!Oye(g,x.current),E=_!==-1&&b===-1||S,C=Dye(i);Gs(()=>{S&&v&&d(g)},[S,g,v,d]),N.useEffect(()=>{x.current=g},[g]);const k=N.useMemo(()=>({activeIndex:b,containerId:h,disabled:C,disableTransforms:E,items:g,overIndex:_,useDragOverlay:p,sortedRects:Iye(g,l),strategy:a}),[b,h,C.draggable,C.droppable,E,g,_,l,p,a]);return yt.createElement($9.Provider,{value:k},t)}const Fye=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return jT(n,r,a).indexOf(t)},Lye=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:i,newIndex:o,previousItems:s,previousContainerId:l,transition:u}=e;return!u||!r||s!==i&&a===o?!1:n?!0:o!==a&&t===l},$ye={duration:200,easing:"ease"},B9="transform",Bye=V0.Transition.toString({property:B9,duration:0,easing:"linear"}),zye={roleDescription:"sortable"};function Uye(e){let{disabled:t,index:n,node:r,rect:a}=e;const[i,o]=N.useState(null),s=N.useRef(n);return Gs(()=>{if(!t&&n!==s.current&&r.current){const l=a.current;if(l){const u=up(r.current,{ignoreTransform:!0}),d={x:l.left-u.left,y:l.top-u.top,scaleX:l.width/u.width,scaleY:l.height/u.height};(d.x||d.y)&&o(d)}}n!==s.current&&(s.current=n)},[t,n,r,a]),N.useEffect(()=>{i&&o(null)},[i]),i}function Hye(e){let{animateLayoutChanges:t=Lye,attributes:n,disabled:r,data:a,getNewIndex:i=Fye,id:o,strategy:s,resizeObserverConfig:l,transition:u=$ye}=e;const{items:d,containerId:h,activeIndex:p,disabled:g,disableTransforms:v,sortedRects:b,overIndex:_,useDragOverlay:x,strategy:S}=N.useContext($9),E=qye(r,g),C=d.indexOf(o),k=N.useMemo(()=>({sortable:{containerId:h,index:C,items:d},...a}),[h,a,C,d]),R=N.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:D,node:O,isOver:L,setNodeRef:B}=Rye({id:o,data:k,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:R,...l}}),{active:Y,activatorEvent:F,activeNodeRect:Z,attributes:q,setNodeRef:ne,listeners:ae,isDragging:re,over:ee,setActivatorNodeRef:ie,transform:U}=kye({id:o,data:k,attributes:{...zye,...n},disabled:E.draggable}),Q=sge(B,ne),X=!!Y,de=X&&!v&&Mb(p)&&Mb(_),be=!x&&re,_e=be&&de?U:null,Ne=de?_e??(s??S)({rects:b,activeNodeRect:Z,activeIndex:p,overIndex:_,index:C}):null,Re=Mb(p)&&Mb(_)?i({id:o,items:d,activeIndex:p,overIndex:_}):C,Ce=Y==null?void 0:Y.id,Fe=N.useRef({activeId:Ce,items:d,newIndex:Re,containerId:h}),Qe=d!==Fe.current.items,Le=t({active:Y,containerId:h,isDragging:re,isSorting:X,id:o,index:C,items:d,newIndex:Fe.current.newIndex,previousItems:Fe.current.items,previousContainerId:Fe.current.containerId,transition:u,wasDragging:Fe.current.activeId!=null}),Ie=Uye({disabled:!Le,index:C,node:O,rect:D});return N.useEffect(()=>{X&&Fe.current.newIndex!==Re&&(Fe.current.newIndex=Re),h!==Fe.current.containerId&&(Fe.current.containerId=h),d!==Fe.current.items&&(Fe.current.items=d)},[X,Re,h,d]),N.useEffect(()=>{if(Ce===Fe.current.activeId)return;if(Ce!=null&&Fe.current.activeId==null){Fe.current.activeId=Ce;return}const me=setTimeout(()=>{Fe.current.activeId=Ce},50);return()=>clearTimeout(me)},[Ce]),{active:Y,activeIndex:p,attributes:q,data:k,rect:D,index:C,newIndex:Re,items:d,isOver:L,isSorting:X,isDragging:re,listeners:ae,node:O,overIndex:_,over:ee,setNodeRef:Q,setActivatorNodeRef:ie,setDroppableNodeRef:B,setDraggableNodeRef:ne,transform:Ie??Ne,transition:V()};function V(){if(Ie||Qe&&Fe.current.newIndex===C)return Bye;if(!(be&&!NT(F)||!u)&&(X||Le))return V0.Transition.toString({...u,property:B9})}}function qye(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function lw(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Vye=[Gn.Down,Gn.Right,Gn.Up,Gn.Left],Gye=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:s}}=t;if(Vye.includes(e.code)){if(e.preventDefault(),!n||!r)return;const l=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const p=a.get(h.id);if(p)switch(e.code){case Gn.Down:r.top<p.top&&l.push(h);break;case Gn.Up:r.top>p.top&&l.push(h);break;case Gn.Left:r.left>p.left&&l.push(h);break;case Gn.Right:r.left<p.left&&l.push(h);break}});const u=Ege({collisionRect:r,droppableRects:a,droppableContainers:l});let d=E9(u,"id");if(d===(o==null?void 0:o.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(n.id),p=i.get(d),g=p?a.get(p.id):null,v=p==null?void 0:p.node.current;if(v&&g&&h&&p){const _=D1(v).some((R,D)=>s[D]!==R),x=z9(h,p),S=Wye(h,p),E=_||!x?{x:0,y:0}:{x:S?r.width-g.width:0,y:S?r.height-g.height:0},C={x:g.left,y:g.top};return E.x&&E.y?C:q0(C,E)}}}};function z9(e,t){return!lw(e)||!lw(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Wye(e,t){return!lw(e)||!lw(t)||!z9(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const Kye=({id:e,name:t,disabled:n})=>{const{attributes:r,listeners:a,setNodeRef:i,transform:o,transition:s,isDragging:l}=Hye({id:e,disabled:n}),u={transform:V0.Transform.toString(o),transition:s,zIndex:l?10:void 0,opacity:n?.5:1};return y.jsxs("div",{ref:i,style:u,...r,...a,className:Rt("flex items-center space-x-2 p-2 rounded border border-transparent bg-muted/50 hover:bg-muted mb-1",l&&"shadow-lg border-primary bg-card",!n&&"cursor-grab active:cursor-grabbing",n&&"cursor-not-allowed opacity-50"),"aria-label":`Drag to reorder model ${t}`,children:[y.jsx(fH,{className:Rt("h-5 w-5 text-muted-foreground flex-shrink-0",!n&&"hover:text-foreground")}),y.jsx(cn,{className:Rt("text-sm font-normal text-foreground flex-grow truncate pointer-events-none"),children:t||e})]})},Zye=()=>{const{setGlobalModelSortOrder:e,dbProviderConfigs:t,globalModelSortOrder:n,isLoading:r,getAllAvailableModelDefsForProvider:a}=Bn(Sn(p=>({setGlobalModelSortOrder:p.setGlobalModelSortOrder,dbProviderConfigs:p.dbProviderConfigs,globalModelSortOrder:p.globalModelSortOrder,isLoading:p.isLoading,getAllAvailableModelDefsForProvider:p.getAllAvailableModelDefsForProvider}))),[i,o]=N.useState(""),s=N.useMemo(()=>{const p=new Map,g=new Set;t.forEach(x=>{if(!x.isEnabled||!x.enabledModels)return;const S=a(x.id),E=new Map(S.map(C=>[C.id,C]));x.enabledModels.forEach(C=>{const k=Hc(x.id,C),R=E.get(C);R&&(g.add(k),p.set(k,{id:k,name:R.name||C,providerId:x.id,providerName:x.name,metadata:R}))})});const v=[],b=new Set;n.forEach(x=>{if(g.has(x)){const S=p.get(x);S&&!b.has(x)&&(v.push(S),b.add(x))}});const _=Array.from(g).filter(x=>!b.has(x)).map(x=>p.get(x)).filter(x=>!!x).sort((x,S)=>x.name.localeCompare(S.name));return[...v,..._]},[t,n,a]),l=N.useMemo(()=>{if(!i.trim())return s;const p=i.toLowerCase();return s.filter(g=>g.name.toLowerCase().includes(p)||g.providerName.toLowerCase().includes(p)||g.id.toLowerCase().includes(p))},[s,i]),u=N.useMemo(()=>l.map(p=>p.id),[l]),d=N.useCallback(p=>{const{active:g,over:v}=p;if(v&&g.id!==v.id){const b=s.map(C=>C.id),_=g.id,x=v.id,S=b.indexOf(_),E=b.indexOf(x);if(S!==-1&&E!==-1){const C=jT(b,S,E);e(C)}else console.error("Failed to find dragged items in the full model order. Cannot reorder.")}},[s,e]),h=_ge(p6(DT),p6(IT,{coordinateGetter:Gye}));return r?y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx(Qr,{className:"h-8 w-1/3"}),y.jsx(Qr,{className:"h-6 w-1/2"}),y.jsx(Qr,{className:"h-64 w-full"})]}):y.jsxs("div",{className:"space-y-4 border border-border rounded-lg p-4 bg-card shadow-sm",children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Global Model Order"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Drag and drop the globally enabled models (set per provider below) to define their display order in the chat input selector. Filtering only affects the view below, not the actual order saved."}),y.jsx(jh,{}),y.jsxs("div",{className:"space-y-3",children:[y.jsx(cn,{className:"text-base font-medium text-card-foreground",children:"Enabled & Ordered Models"}),y.jsxs("div",{className:"relative",children:[y.jsx(Y0,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(Jn,{type:"search",placeholder:"Filter models by name or provider...",value:i,onChange:p=>o(p.target.value),className:"pl-8 w-full",disabled:r})]}),y.jsx(zd,{className:"h-80 w-full rounded-md border border-border p-3 bg-background/50",children:l.length>0?y.jsx(Sye,{sensors:h,collisionDetection:Sge,onDragEnd:d,children:y.jsx(Pye,{items:u,strategy:jye,children:l.map(p=>y.jsx(Kye,{id:p.id,name:`${p.name} (${p.providerName})`},p.id))})}):y.jsx("div",{className:"flex items-center justify-center h-full text-sm text-muted-foreground",children:i.trim()?"No models match your filter.":"No models enabled globally. Enable models within provider configurations below."})})]})]})},Yye=bC("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Xye({className:e,variant:t,asChild:n=!1,...r}){const a=n?$6:"span";return y.jsx(a,{"data-slot":"badge",className:Rt(Yye({variant:t}),e),...r})}const Jye=({modelId:e})=>{var o,s,l,u,d,h,p,g,v,b,_,x,S;const{getProviderById:t,getAllAvailableModelDefsForProvider:n}=Bn(E=>({getProviderById:C=>E.dbProviderConfigs.find(k=>k.id===C),getAllAvailableModelDefsForProvider:E.getAllAvailableModelDefsForProvider})),r=N.useMemo(()=>{if(!e)return null;const{providerId:E,modelId:C}=Zl(e);if(!E||!C)return null;const k=t(E);if(!k)return null;const D=n(E).find(O=>O.id===C);return D?{...D,providerName:k.name}:null},[e,t,n]);if(!r)return y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Select a model from a provider's list to view its details."});const a=E=>{if(!E)return"N/A";const C=parseFloat(E);return isNaN(C)||C===0?"Free":`$${C.toFixed(4)} / 1M tokens`},i=E=>E?`${E.toLocaleString()} tokens`:"Unknown";return y.jsx(zd,{className:"h-full p-1",children:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("h3",{className:"text-xl font-semibold",children:[r.name," ",y.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",r.providerName,")"]})]}),y.jsx("p",{className:"text-sm text-muted-foreground",children:r.id}),r.description&&y.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:y.jsx("p",{children:r.description})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Context & Limits"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Context Length:"})," ",i(((o=r.top_provider)==null?void 0:o.context_length)??r.context_length)]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Max Completion Tokens:"})," ",(s=r.top_provider)!=null&&s.max_completion_tokens?r.top_provider.max_completion_tokens.toLocaleString():"Default"]}),r.per_request_limits&&y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Request Limits:"})," ",y.jsx("pre",{className:"text-xs whitespace-pre-wrap",children:JSON.stringify(r.per_request_limits,null,2)})]})]}),y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Pricing (per 1M tokens)"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Prompt:"})," ",a((l=r.pricing)==null?void 0:l.prompt)]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Completion:"})," ",a((u=r.pricing)==null?void 0:u.completion)]}),((d=r.pricing)==null?void 0:d.request)&&parseFloat(r.pricing.request)>0&&y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Request:"})," $",parseFloat(r.pricing.request).toFixed(6)]}),((h=r.pricing)==null?void 0:h.image)&&parseFloat(r.pricing.image)>0&&y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Image:"})," $",parseFloat(r.pricing.image).toFixed(6)]})]}),y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Architecture"}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Modality:"})," ",((p=r.architecture)==null?void 0:p.modality)??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Input Modalities:"})," ",((v=(g=r.architecture)==null?void 0:g.input_modalities)==null?void 0:v.join(", "))??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Output Modalities:"})," ",((_=(b=r.architecture)==null?void 0:b.output_modalities)==null?void 0:_.join(", "))??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Tokenizer:"})," ",((x=r.architecture)==null?void 0:x.tokenizer)??"Unknown"]}),y.jsxs("p",{children:[y.jsx("span",{className:"font-semibold",children:"Instruct Type:"})," ",((S=r.architecture)==null?void 0:S.instruct_type)??"N/A"]})]}),y.jsxs("div",{className:"space-y-1 border p-3 rounded-md bg-muted/30 md:col-span-2",children:[y.jsx("h4",{className:"font-medium mb-1",children:"Supported Parameters"}),y.jsx("div",{className:"flex flex-wrap gap-1",children:r.supported_parameters&&r.supported_parameters.length>0?r.supported_parameters.map(E=>y.jsx(Xye,{variant:"secondary",children:E},E)):y.jsx("span",{className:"text-muted-foreground italic",children:"None specified"})})]})]})]})})},Qye=()=>y.jsxs("div",{className:"flex items-center justify-center p-4 text-muted-foreground",children:[y.jsx(Vn,{className:"h-5 w-5 animate-spin mr-2"})," Loading..."]}),ebe=({error:e})=>y.jsxs("div",{className:"p-4 text-destructive text-center",children:["Error: ",e]}),tbe=()=>y.jsx("div",{className:"p-4 text-muted-foreground text-center",children:"No items found."}),nbe=({isLoading:e,error:t,data:n,loadingComponent:r,errorComponent:a,emptyComponent:i,children:o,className:s,loadingClassName:l,errorClassName:u,emptyClassName:d})=>e?y.jsx("div",{className:Rt(l),children:r??y.jsx(Qye,{})}):t?y.jsx("div",{className:Rt(u),children:a??y.jsx(ebe,{error:t})}):n==null||Array.isArray(n)&&n.length===0||typeof n=="object"&&Object.keys(n).length===0?y.jsx("div",{className:Rt(d),children:i??y.jsx(tbe,{})}):y.jsx("div",{className:Rt(s),children:o}),rbe=({count:e=3})=>y.jsx("div",{className:"space-y-2 p-2",children:Array.from({length:e}).map((t,n)=>y.jsx(Qr,{className:"h-10 w-full"},n))}),abe=()=>{const{addApiKey:e,deleteApiKey:t,enableApiKeyManagement:n,dbApiKeys:r,dbProviderConfigs:a,isLoading:i}=Bn(Sn(O=>({addApiKey:O.addApiKey,deleteApiKey:O.deleteApiKey,enableApiKeyManagement:O.enableApiKeyManagement,dbApiKeys:O.dbApiKeys,dbProviderConfigs:O.dbProviderConfigs,isLoading:O.isLoading}))),[o,s]=N.useState(""),[l,u]=N.useState(""),[d,h]=N.useState(""),[p,g]=N.useState(!1),[v,b]=N.useState({}),[_,x]=N.useState({}),S=N.useCallback(async O=>{if(O.preventDefault(),!o.trim()||!l.trim()||!d){lt.error("Please fill in all fields for the API key.");return}g(!0);try{await e(o.trim(),d,l.trim()),s(""),u(""),h("")}catch(L){console.error("Failed to add API key (from component):",L)}finally{g(!1)}},[e,o,l,d]),E=N.useCallback(async(O,L)=>{if(window.confirm(`Are you sure you want to delete the API key "${L}"? This will also unlink it from any providers using it. This action cannot be undone.`)){b(B=>({...B,[O]:!0}));try{await t(O),x(B=>{const Y={...B};return delete Y[O],Y})}catch(B){console.error("Failed to delete API key (from component):",B)}finally{b(B=>({...B,[O]:!1}))}}},[t]),C=N.useMemo(()=>{const O=new Map;return(r||[]).forEach(L=>{const B=(a||[]).filter(Y=>Y.apiKeyId===L.id);O.set(L.id,B.length===0?"Not linked":B.map(Y=>Y.name).join(", "))}),O},[r,a]);if(!n)return y.jsxs("div",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400 flex items-center justify-center gap-2 bg-gray-800/30 rounded-md border border-dashed border-gray-700 min-h-[200px]",children:[y.jsx(iD,{className:"h-5 w-5"}),"API Key Management is disabled in the configuration."]});const k=O=>{x(L=>({...L,[O]:!L[O]}))},R=O=>({openai:"OpenAI",google:"Google",openrouter:"OpenRouter","openai-compatible":"OpenAI-Compatible"})[O]||"Unknown/Custom",D=y.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 p-4 text-center",children:"No API keys stored yet. Add one above. Link keys to providers in the 'Providers' tab."});return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("form",{onSubmit:S,className:"space-y-4",children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Add New API Key"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"new-key-name",children:"Name"}),y.jsx(Jn,{id:"new-key-name",value:o,onChange:O=>s(O.target.value),placeholder:"e.g., My Personal Key",required:!0,className:"mt-1",disabled:p})]}),y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"new-key-provider-type",children:"Intended Provider Type"}),y.jsxs(Ud,{value:d,onValueChange:h,required:!0,disabled:p,children:[y.jsx(qd,{id:"new-key-provider-type",className:"mt-1",children:y.jsx(Hd,{placeholder:"Select Type..."})}),y.jsxs(Vd,{children:[y.jsx(bi,{value:"openai",children:"OpenAI"}),y.jsx(bi,{value:"google",children:"Google"}),y.jsx(bi,{value:"openrouter",children:"OpenRouter"}),y.jsx(bi,{value:"openai-compatible",children:"OpenAI-Compatible"})]})]})]}),y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"new-key-value",children:"API Key Value"}),y.jsx(Jn,{id:"new-key-value",type:"password",value:l,onChange:O=>u(O.target.value),placeholder:"Paste your API key here",required:!0,className:"mt-1",disabled:p})]})]}),y.jsxs(Ht,{type:"submit",disabled:p,children:[p&&y.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),p?"Adding...":"Add Key"]})]}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium mb-2",children:"Stored API Keys"}),y.jsx(nbe,{isLoading:i,data:r,loadingComponent:y.jsx(rbe,{count:2}),emptyComponent:D,children:y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(T1,{children:[y.jsx(A1,{children:y.jsxs(Ji,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Type"}),y.jsx(ia,{children:"Linked To"}),y.jsx(ia,{children:"Key Value"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(N1,{children:(r||[]).map(O=>{const L=v[O.id];return y.jsxs(Ji,{children:[y.jsx(yr,{className:"font-medium",children:O.name}),y.jsx(yr,{children:R(O.providerId)}),y.jsx(yr,{className:"text-xs text-muted-foreground",children:C.get(O.id)??"Not linked"}),y.jsx(yr,{children:y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"font-mono text-xs",children:_[O.id]?O.value:""}),y.jsx(sr,{tooltipText:_[O.id]?"Hide key":"Show key",onClick:()=>k(O.id),"aria-label":_[O.id]?"Hide key":"Show key",icon:_[O.id]?y.jsx(BU,{}):y.jsx(UU,{}),disabled:L,className:"h-6 w-6"})]})}),y.jsx(yr,{className:"text-right",children:y.jsx(sr,{tooltipText:"Delete",onClick:()=>E(O.id,O.name),"aria-label":`Delete key ${O.name}`,icon:L?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx($s,{}),disabled:L,className:"text-red-600 hover:text-red-700 h-8 w-8"})})]},O.id)})})]})})})]})]})},ibe=yt.memo(abe),obe=({onSelectModelForDetails:e})=>{const{addDbProviderConfig:t,updateDbProviderConfig:n,deleteDbProviderConfig:r,fetchModels:a,providerFetchStatus:i,dbProviderConfigs:o,apiKeys:s,isLoading:l}=Bn(Sn(b=>({addDbProviderConfig:b.addProviderConfig,updateDbProviderConfig:b.updateProviderConfig,deleteDbProviderConfig:b.deleteProviderConfig,fetchModels:b.fetchModels,providerFetchStatus:b.providerFetchStatus,dbProviderConfigs:b.dbProviderConfigs,apiKeys:b.dbApiKeys,isLoading:b.isLoading}))),[u,d]=N.useState(!1),h=()=>d(!0),p=N.useCallback(()=>d(!1),[]),g=N.useCallback(async b=>{await a(b)},[a]),v=N.useMemo(()=>o||[],[o]);return y.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-card-foreground",children:"Provider Configuration"}),y.jsx("p",{className:"text-sm text-muted-foreground",children:"Add, remove, or configure connections to AI providers. Enable models within each provider's edit section. Click a model name to view its details."})]}),y.jsx("div",{className:"flex-shrink-0",children:u?y.jsx(B0e,{apiKeys:s||[],onAddProvider:t,onCancel:p}):y.jsxs(Ht,{onClick:h,variant:"outline",className:"w-full",disabled:l,children:[y.jsx(dw,{className:"h-4 w-4 mr-1"})," Add Provider Configuration"]})}),y.jsx("div",{className:"flex-grow border-t border-border pt-4 mt-4 overflow-y-auto",children:y.jsxs("div",{className:"space-y-2",children:[l&&!u?y.jsx(y.Fragment,{children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[y.jsx(Qr,{className:"h-24 w-full"}),y.jsx(Qr,{className:"h-24 w-full"}),y.jsx(Qr,{className:"h-24 w-full"})]})}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.map(b=>y.jsx($0e,{provider:b,apiKeys:s||[],onUpdate:n,onDelete:r,onFetchModels:g,fetchStatus:i[b.id]||"idle",onSelectModelForDetails:e},b.id))}),!l&&v.length===0&&!u&&y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:'No providers configured yet. Click "Add Provider Configuration" above.'})]})})]})},sbe=()=>{const{selectedModelForDetails:e,setSelectedModelForDetails:t}=Bn(Sn(o=>({selectedModelForDetails:o._selectedModelForDetails,setSelectedModelForDetails:o.setSelectedModelForDetails}))),[n,r]=N.useState("providers-config"),a=N.useCallback(o=>{t(o),o&&r("providers-details")},[t]),i=N.useMemo(()=>[{value:"providers-config",label:"Configuration",content:y.jsx(obe,{onSelectModelForDetails:a})},{value:"providers-order",label:"Model Order",content:y.jsx(Zye,{})},{value:"api-keys",label:"API Keys",content:y.jsx(ibe,{})},{value:"providers-details",label:"Model Details",content:y.jsx(Jye,{modelId:e})}],[e,a]);return y.jsx(sp,{tabs:i,initialValue:n,onValueChange:r,className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},lbe=yt.memo(sbe),cbe=({title:e,description:t,children:n,className:r,titleClassName:a,descriptionClassName:i,contentClassName:o})=>y.jsxs("div",{className:Rt("space-y-3",r),children:[y.jsxs("div",{children:[y.jsx("h3",{className:Rt("text-lg font-medium",a),children:e}),t&&y.jsx("p",{className:Rt("text-sm text-muted-foreground",i),children:t})]}),y.jsx("div",{className:Rt(o),children:n})]}),ube=()=>{const{gitUserName:e,setGitUserName:t,gitUserEmail:n,setGitUserEmail:r}=Kr(Sn(a=>({gitUserName:a.gitUserName,setGitUserName:a.setGitUserName,gitUserEmail:a.gitUserEmail,setGitUserEmail:a.setGitUserEmail})));return y.jsx("div",{className:"space-y-6 p-1",children:y.jsx(cbe,{title:"Git User Configuration",description:"Set your user name and email for Git commits made within the VFS. This is required for committing changes.",contentClassName:"rounded-lg border p-4 shadow-sm bg-card",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(cn,{htmlFor:"git-user-name",children:"Git User Name"}),y.jsx(Jn,{id:"git-user-name",value:e??"",onChange:a=>t(a.target.value),placeholder:"Your Name"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(cn,{htmlFor:"git-user-email",children:"Git User Email"}),y.jsx(Jn,{id:"git-user-email",type:"email",value:n??"",onChange:a=>r(a.target.value),placeholder:"your.email@example.com"})]})]})})})},dbe=yt.memo(ube),fbe=()=>{const{syncRepos:e,addSyncRepo:t,updateSyncRepo:n,deleteSyncRepo:r,initializeOrSyncRepo:a,repoInitializationStatus:i,isLoading:o}=vn(Sn(O=>({syncRepos:O.syncRepos,addSyncRepo:O.addSyncRepo,updateSyncRepo:O.updateSyncRepo,deleteSyncRepo:O.deleteSyncRepo,initializeOrSyncRepo:O.initializeOrSyncRepo,repoInitializationStatus:O.repoInitializationStatus,isLoading:O.isLoading}))),[s,l]=N.useState(!1),[u,d]=N.useState(null),[h,p]=N.useState({name:"",remoteUrl:"",branch:"main",username:"",password:""}),[g,v]=N.useState(!1),[b,_]=N.useState({}),x=N.useCallback(()=>{p({name:"",remoteUrl:"",branch:"main",username:"",password:""}),l(!1),d(null),v(!1)},[]),S=N.useCallback((O,L)=>{p(B=>({...B,[O]:L}))},[]),E=N.useCallback(async()=>{var O,L,B,Y;if(!((O=h.name)!=null&&O.trim())||!((L=h.remoteUrl)!=null&&L.trim())){lt.error("Repository Name and Remote URL are required.");return}v(!0);try{const F={name:h.name.trim(),remoteUrl:h.remoteUrl.trim(),branch:((B=h.branch)==null?void 0:B.trim())||"main",username:((Y=h.username)==null?void 0:Y.trim())||null,password:h.password||null};u?await n(u,F):await t(F),x()}catch(F){console.error("Failed to save sync repo:",F)}finally{v(!1)}},[h,u,t,n,x]),C=O=>{d(O.id),p({name:O.name,remoteUrl:O.remoteUrl,branch:O.branch||"main",username:O.username??"",password:O.password??""}),l(!1)},k=N.useCallback(async(O,L)=>{if(window.confirm(`Are you sure you want to delete the sync repository "${L}"? This will unlink it from any conversations and remove the local copy.`)){_(B=>({...B,[O]:!0}));try{await r(O),u===O&&x()}catch(B){console.error("Failed to delete sync repo:",B)}finally{_(B=>({...B,[O]:!1}))}}},[r,u,x]),R=N.useCallback(async O=>{await a(O)},[a]),D=()=>{var O,L;return y.jsxs("div",{className:"border rounded-md p-4 space-y-3 bg-card shadow-md mb-4",children:[y.jsx("h4",{className:"font-semibold text-card-foreground",children:u?"Edit Sync Repository":"Add New Sync Repository"}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"repo-name",children:"Name"}),y.jsx(Jn,{id:"repo-name",value:h.name||"",onChange:B=>S("name",B.target.value),placeholder:"e.g., My Conversation Backup",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"repo-url",children:"Remote URL (HTTPS)"}),y.jsx(Jn,{id:"repo-url",type:"url",value:h.remoteUrl||"",onChange:B=>S("remoteUrl",B.target.value),placeholder:"https://github.com/user/repo.git",required:!0,className:"mt-1",disabled:g})]}),y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"repo-branch",children:"Branch"}),y.jsx(Jn,{id:"repo-branch",value:h.branch||"",onChange:B=>S("branch",B.target.value),placeholder:"main",className:"mt-1",disabled:g})]})]}),y.jsxs("div",{className:"pt-2",children:[y.jsx(cn,{className:"text-sm font-medium",children:"Authentication (Optional - Basic Auth/Token)"}),y.jsxs(X$,{variant:"destructive",className:"mt-2 mb-3",children:[y.jsx(EC,{className:"h-4 w-4"}),y.jsx(J$,{children:"Security Warning"}),y.jsx(Q$,{className:"text-xs",children:"Storing credentials directly is insecure. Use a Personal Access Token (PAT) as the password if possible. Credentials are required only for private repositories."})]}),y.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"repo-username",children:"Username"}),y.jsx(Jn,{id:"repo-username",value:h.username||"",onChange:B=>S("username",B.target.value),placeholder:"Git Username (Optional)",className:"mt-1",disabled:g,autoComplete:"off"})]}),y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"repo-password",children:"Password / Token"}),y.jsx(Jn,{id:"repo-password",type:"password",value:h.password||"",onChange:B=>S("password",B.target.value),placeholder:"Password or PAT (Optional)",className:"mt-1",disabled:g,autoComplete:"new-password"})]})]})]}),y.jsxs("div",{className:"flex justify-end space-x-2 pt-2",children:[y.jsxs(Ht,{variant:"ghost",size:"sm",onClick:x,disabled:g,type:"button",children:[y.jsx(gu,{className:"h-4 w-4 mr-1"})," Cancel"]}),y.jsxs(Ht,{variant:"secondary",size:"sm",onClick:E,disabled:g||!((O=h.name)!=null&&O.trim())||!((L=h.remoteUrl)!=null&&L.trim()),type:"button",children:[g&&y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}),y.jsx(hw,{className:"h-4 w-4 mr-1"})," ",g?"Saving...":"Save Repository"]})]})]})};return y.jsxs("div",{className:"space-y-6 p-1",children:[y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-medium",children:"Sync Repositories"}),y.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Configure remote Git repositories to synchronize conversations. Link conversations to a repo using the sync control in the chat input area. Use the 'Sync/Clone' button to initialize the local copy or pull updates."})]}),!s&&!u&&y.jsxs(Ht,{onClick:()=>l(!0),variant:"outline",className:"w-full mb-4",disabled:o,children:[y.jsx(dw,{className:"h-4 w-4 mr-1"})," Add Sync Repository"]}),(s||u)&&D(),y.jsxs("div",{children:[y.jsx("h4",{className:"text-md font-medium mb-2",children:"Configured Repositories"}),o&&!s&&!u?y.jsxs("div",{className:"space-y-2",children:[y.jsx(Qr,{className:"h-10 w-full"}),y.jsx(Qr,{className:"h-10 w-full"}),y.jsx(Qr,{className:"h-10 w-full"})]}):e.length===0&&!s&&!u?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No sync repositories configured yet."}):y.jsx("div",{className:"border rounded-md overflow-hidden",children:y.jsxs(T1,{children:[y.jsx(A1,{children:y.jsxs(Ji,{children:[y.jsx(ia,{children:"Name"}),y.jsx(ia,{children:"Remote URL"}),y.jsx(ia,{children:"Branch"}),y.jsx(ia,{children:"Auth"}),y.jsx(ia,{className:"text-right",children:"Actions"})]})}),y.jsx(N1,{children:e.map(O=>{const L=b[O.id],B=u===O.id,Y=!!O.username||!!O.password,F=i[O.id]||"idle",q=L||g||!!u||F==="syncing";let ne=null,ae="Initialize/Sync Repository";return F==="syncing"?(ne=y.jsx(Vn,{className:"h-4 w-4 animate-spin mr-1"}),ae="Initializing/Syncing..."):F==="idle"?(ne=y.jsx(tD,{className:"h-4 w-4 text-green-500 mr-1"}),ae="Sync Successful / Ready"):F==="error"?(ne=y.jsx(lh,{className:"h-4 w-4 text-destructive mr-1"}),ae="Sync Failed"):ne=y.jsx(fw,{className:"h-4 w-4 mr-1"}),y.jsxs(Ji,{className:Rt(B?"bg-muted/50":"",q&&!B?"opacity-70":""),children:[y.jsx(yr,{className:"font-medium",children:O.name}),y.jsx(yr,{className:"text-xs truncate max-w-xs",children:O.remoteUrl}),y.jsx(yr,{children:O.branch||"main"}),y.jsx(yr,{className:"text-xs",children:Y?"Configured":"None"}),y.jsxs(yr,{className:"text-right space-x-1",children:[y.jsx(sr,{tooltipText:ae,onClick:()=>R(O.id),"aria-label":`Initialize or Sync repo ${O.name}`,disabled:q,icon:ne,variant:"outline",className:"h-8 w-8"}),y.jsx(sr,{tooltipText:"Edit",onClick:()=>C(O),"aria-label":`Edit repo ${O.name}`,disabled:q,icon:y.jsx(SC,{}),className:"h-8 w-8"}),y.jsx(sr,{tooltipText:"Delete",onClick:()=>k(O.id,O.name),"aria-label":`Delete repo ${O.name}`,disabled:q,icon:L?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx($s,{}),className:"text-destructive hover:text-destructive/80 h-8 w-8"})]})]},O.id)})})]})})]})]})},hbe=yt.memo(fbe),pbe=()=>{const e=N.useMemo(()=>[{value:"config",label:"User Config",content:y.jsx(dbe,{})},{value:"sync",label:"Sync Repositories",content:y.jsx(hbe,{})}],[]);return y.jsx(sp,{tabs:e,defaultValue:"config",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-4"})},mbe=yt.memo(pbe),U9=N.memo(({isOpen:e,onClose:t})=>{const{enableAdvancedSettings:n}=Kr(Sn(h=>({enableAdvancedSettings:h.enableAdvancedSettings}))),{customSettingsTabs:r}=U0(Sn(h=>({customSettingsTabs:h.modSettingsTabs||[]}))),{initialSettingsTab:a,clearInitialSettingsTabs:i}=Va(Sn(h=>({initialSettingsTab:h.initialSettingsTab,clearInitialSettingsTabs:h.clearInitialSettingsTabs}))),[o,s]=N.useState(a||"general");N.useEffect(()=>{e&&s(a||"general")},[e,a]);const l=h=>{h||(t(),i())},u=h=>{s(h)},d=N.useMemo(()=>{const h=[{value:"general",label:"General",content:y.jsx(k0e,{})},{value:"providers",label:"Providers & Models",content:y.jsx(lbe,{})},...n?[{value:"assistant",label:"Assistant",content:y.jsx(A0e,{})}]:[],{value:"git",label:"Git",content:y.jsx(mbe,{})},{value:"data",label:"Data",content:y.jsx(R0e,{})},{value:"mods",label:"Mods",content:y.jsx(D0e,{})}],p=r.map(g=>({value:g.id,label:g.title,content:yt.isValidElement(g.component)?g.component:typeof g.component=="function"?y.jsx(g.component,{}):null}));return[...h,...p]},[n,r]);return y.jsx(yT,{open:e,onOpenChange:l,children:y.jsxs(bT,{className:"sm:max-w-[1200px] w-[90vw] h-[80vh] min-h-[550px] max-h-[90vh] flex flex-col p-0",children:[y.jsxs(vT,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsx(_T,{children:"Settings"}),y.jsx(xT,{children:"Manage application settings, AI behavior, API keys, providers, and data."})]}),y.jsx(sp,{tabs:d,initialValue:o,onValueChange:u,className:"flex-grow overflow-hidden px-6",listClassName:"-mx-6 px-6",contentContainerClassName:"flex-grow overflow-y-auto pb-6 pr-2 -mr-2",scrollable:!0}),y.jsx(wT,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:y.jsx(Ht,{variant:"outline",onClick:()=>l(!1),children:"Close"})})]})})});U9.displayName="SettingsModalComponent";const gbe=U9;function ybe(){const e=Mr.getState().registerChatControl,t=Va.getState().toggleChatControlPanel,n=Va.getState().setInitialSettingsTabs,r=()=>{const i=(o,s)=>{n(null,null),t("settingsModal",!0)};return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>i(),className:"h-8 w-8","aria-label":"Open Settings",children:y.jsx(zH,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Settings"})]})})},a=()=>{const i=Va.getState().isChatControlPanelOpen.settingsModal??!1,o=()=>t("settingsModal",!1);return y.jsx(gbe,{isOpen:i,onClose:o})};e({id:"core-settings-trigger",panel:"sidebar-footer",status:()=>"ready",renderer:()=>yt.createElement(r),iconRenderer:()=>yt.createElement(r),settingsRenderer:()=>yt.createElement(a),show:()=>!0}),console.log("[Function] Registered Core Settings Control")}function bbe(){const e=Mr.getState().registerChatControl,t=()=>{const{isSidebarCollapsed:n,toggleSidebar:r}=Va.getState();return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",onClick:()=>r(),className:"h-8 w-8","aria-label":n?"Expand Sidebar":"Collapse Sidebar",children:n?y.jsx(NH,{className:"h-4 w-4"}):y.jsx(TH,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:n?"Expand Sidebar":"Collapse Sidebar"})]})})};e({id:"core-sidebar-toggle",panel:"sidebar-footer",status:()=>"ready",renderer:()=>yt.createElement(t),iconRenderer:()=>yt.createElement(t),show:()=>!0}),console.log("[Function] Registered Core Sidebar Toggle Control")}var P1="Popover",[H9,T_e]=Pi(P1,[yu]),zg=yu(),[vbe,Au]=H9(P1),q9=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,s=zg(t),l=N.useRef(null),[u,d]=N.useState(!1),[h,p]=qs({prop:r,defaultProp:a??!1,onChange:i,caller:P1});return y.jsx(Rw,{...s,children:y.jsx(vbe,{scope:t,contentId:ni(),triggerRef:l,open:h,onOpenChange:p,onOpenToggle:N.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:u,onCustomAnchorAdd:N.useCallback(()=>d(!0),[]),onCustomAnchorRemove:N.useCallback(()=>d(!1),[]),modal:o,children:n})})};q9.displayName=P1;var V9="PopoverAnchor",wbe=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Au(V9,n),i=zg(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:s}=a;return N.useEffect(()=>(o(),()=>s()),[o,s]),y.jsx(tg,{...i,...r,ref:t})});wbe.displayName=V9;var G9="PopoverTrigger",W9=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Au(G9,n),i=zg(n),o=kn(t,a.triggerRef),s=y.jsx(tn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":J9(a.open),...r,ref:o,onClick:qt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?s:y.jsx(tg,{asChild:!0,...i,children:s})});W9.displayName=G9;var MT="PopoverPortal",[_be,xbe]=H9(MT,{forceMount:void 0}),K9=e=>{const{__scopePopover:t,forceMount:n,children:r,container:a}=e,i=Au(MT,t);return y.jsx(_be,{scope:t,forceMount:n,children:y.jsx(La,{present:n||i.open,children:y.jsx(Uh,{asChild:!0,container:a,children:r})})})};K9.displayName=MT;var Mh="PopoverContent",Z9=N.forwardRef((e,t)=>{const n=xbe(Mh,e.__scopePopover),{forceMount:r=n.forceMount,...a}=e,i=Au(Mh,e.__scopePopover);return y.jsx(La,{present:r||i.open,children:i.modal?y.jsx(Ebe,{...a,ref:t}):y.jsx(Cbe,{...a,ref:t})})});Z9.displayName=Mh;var Sbe=Yc("PopoverContent.RemoveScroll"),Ebe=N.forwardRef((e,t)=>{const n=Au(Mh,e.__scopePopover),r=N.useRef(null),a=kn(t,r),i=N.useRef(!1);return N.useEffect(()=>{const o=r.current;if(o)return b1(o)},[]),y.jsx(Pg,{as:Sbe,allowPinchZoom:!0,children:y.jsx(Y9,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:qt(e.onCloseAutoFocus,o=>{var s;o.preventDefault(),i.current||(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:qt(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,l=s.button===0&&s.ctrlKey===!0,u=s.button===2||l;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:qt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),Cbe=N.forwardRef((e,t)=>{const n=Au(Mh,e.__scopePopover),r=N.useRef(!1),a=N.useRef(!1);return y.jsx(Y9,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,s;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(r.current||(s=n.triggerRef.current)==null||s.focus(),i.preventDefault()),r.current=!1,a.current=!1},onInteractOutside:i=>{var l,u;(l=e.onInteractOutside)==null||l.call(e,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((u=n.triggerRef.current)==null?void 0:u.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),Y9=N.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...h}=e,p=Au(Mh,n),g=zg(n);return g1(),y.jsx(Mg,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:i,children:y.jsx($h,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:s,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:y.jsx(Iw,{"data-state":J9(p.open),role:"dialog",id:p.contentId,...g,...h,ref:t,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),X9="PopoverClose",kbe=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=Au(X9,n);return y.jsx(tn.button,{type:"button",...r,ref:t,onClick:qt(e.onClick,()=>a.onOpenChange(!1))})});kbe.displayName=X9;var Tbe="PopoverArrow",Abe=N.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,a=zg(n);return y.jsx(Ow,{...a,...r,ref:t})});Abe.displayName=Tbe;function J9(e){return e?"open":"closed"}var Nbe=q9,Rbe=W9,Ibe=K9,Obe=Z9;function dp({...e}){return y.jsx(Nbe,{"data-slot":"popover",...e})}function fp({...e}){return y.jsx(Rbe,{"data-slot":"popover-trigger",...e})}function hp({className:e,align:t="center",sideOffset:n=4,...r}){return y.jsx(Ibe,{children:y.jsx(Obe,{"data-slot":"popover-content",align:t,sideOffset:n,className:Rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}const Dbe=()=>{const{setTemperature:e,setTopP:t,setMaxTokens:n,setTopK:r,setPresencePenalty:a,setFrequencyPenalty:i}=Sa(Sn(d=>({setTemperature:d.setTemperature,setTopP:d.setTopP,setMaxTokens:d.setMaxTokens,setTopK:d.setTopK,setPresencePenalty:d.setPresencePenalty,setFrequencyPenalty:d.setFrequencyPenalty}))),o=Kr.getState(),[s,l]=N.useState(()=>Sa.getState());N.useEffect(()=>{const d=h=>{l(p=>({...p,...h.params}))};return Ct.on(xt.PROMPT_PARAMS_CHANGED,d),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,d)}},[]);const u={temperature:s.temperature??null,setTemperature:e,topP:s.topP??null,setTopP:t,maxTokens:s.maxTokens??null,setMaxTokens:n,topK:s.topK??null,setTopK:r,presencePenalty:s.presencePenalty??null,setPresencePenalty:a,frequencyPenalty:s.frequencyPenalty??null,setFrequencyPenalty:i,reasoningEnabled:null,setReasoningEnabled:()=>{},webSearchEnabled:null,setWebSearchEnabled:()=>{},defaultTemperature:o.temperature,defaultTopP:o.topP,defaultMaxTokens:o.maxTokens,defaultTopK:o.topK,defaultPresencePenalty:o.presencePenalty,defaultFrequencyPenalty:o.frequencyPenalty};return y.jsx(Y$,{...u})},jbe=()=>{const[e,t]=N.useState(!1),[n,r]=N.useState(()=>or.getState().status==="streaming"),[a,i]=N.useState(!0);return N.useEffect(()=>{const o=d=>{const h={...Sa.getState(),...d.params},p=h.temperature!==null||h.topP!==null||h.maxTokens!==null||h.topK!==null||h.presencePenalty!==null||h.frequencyPenalty!==null;t(p)},s=d=>{r(d.status==="streaming")},l=d=>{var _;if(!d.modelId){i(!1);return}const{getSelectedModel:h}=Bn.getState(),p=h(),g=((_=p==null?void 0:p.metadata)==null?void 0:_.supported_parameters)??[],v=["temperature","top_p","max_tokens","top_k","presence_penalty","frequency_penalty"],b=Kr.getState().enableAdvancedSettings;i(b&&g.some(x=>v.includes(x)))},u=d=>{d.key==="enableAdvancedSettings"&&l({modelId:Bn.getState().selectedModelId})};return o({params:{}}),l({modelId:Bn.getState().selectedModelId}),Ct.on(xt.PROMPT_PARAMS_CHANGED,o),Ct.on(xt.INTERACTION_STATUS_CHANGED,s),Ct.on(xt.MODEL_SELECTION_CHANGED,l),Ct.on(xt.SETTINGS_CHANGED,u),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,o),Ct.off(xt.INTERACTION_STATUS_CHANGED,s),Ct.off(xt.MODEL_SELECTION_CHANGED,l),Ct.off(xt.SETTINGS_CHANGED,u)}},[]),a?y.jsxs(dp,{children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(fp,{asChild:!0,children:y.jsx(Ht,{variant:e?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:n,"aria-label":"Adjust Advanced Parameters",children:y.jsx(HH,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:"Advanced Parameters"})]})}),y.jsx(hp,{className:"w-auto p-0",align:"start",children:y.jsx(Dbe,{})})]}):null};function Mbe(){const e=Mr.getState().registerPromptControl;e({id:"core-parameters",status:()=>"ready",triggerRenderer:()=>yt.createElement(jbe),getParameters:()=>{const{temperature:t,topP:n,maxTokens:r,topK:a,presencePenalty:i,frequencyPenalty:o}=Sa.getState(),s=(u,d,h)=>{h!==null&&(u[d]=h)},l={};return s(l,"temperature",t),s(l,"top_p",n),s(l,"max_tokens",r),s(l,"top_k",a),s(l,"presence_penalty",i),s(l,"frequency_penalty",o),Object.keys(l).length>0?l:void 0}}),console.log("[Function] Registered Core Parameter Control")}const Q9=20,Pbe=Q9*1024*1024,Fbe=()=>{const e=N.useRef(null),t=Xc.getState().addAttachedFile,[n,r]=N.useState(()=>or.getState().status==="streaming"),[a,i]=N.useState(!0);N.useEffect(()=>{const u=h=>{r(h.status==="streaming")},d=h=>{var b,_;if(!h.modelId){i(!0);return}const{getSelectedModel:p}=Bn.getState(),g=p(),v=(_=(b=g==null?void 0:g.metadata)==null?void 0:b.architecture)==null?void 0:_.input_modalities;i(!v||v.some(x=>x!=="text"))};return d({modelId:Bn.getState().selectedModelId}),Ct.on(xt.INTERACTION_STATUS_CHANGED,u),Ct.on(xt.MODEL_SELECTION_CHANGED,d),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,u),Ct.off(xt.MODEL_SELECTION_CHANGED,d)}},[]);const o=N.useCallback(async u=>{const d=u.target.files;if(d){for(const h of Array.from(d)){if(h.size>Pbe){lt.error(`File "${h.name}" exceeds the ${Q9}MB limit.`);continue}try{let p={};const g=TC(h.name,h.type),v=h.type.startsWith("image/");if(g)p.contentText=await h.text();else if(v){const b=new FileReader,_=new Promise((S,E)=>{b.onload=()=>S(b.result),b.onerror=C=>E(C)});b.readAsDataURL(h);const x=await _;x&&x.includes(",")?p.contentBase64=x.split(",")[1]:console.warn(`Could not extract base64 from data URL for ${h.name}`)}else console.log(`File type ${h.type} (Name: ${h.name}) not directly processed for content storage in InputStore.`);t({source:"direct",name:h.name,type:h.type||"application/octet-stream",size:h.size,...p})}catch(p){console.error(`Error processing file ${h.name}:`,p),lt.error(`Failed to process file "${h.name}": ${p instanceof Error?p.message:String(p)}`)}}u.target&&(u.target.value="")}},[t]),s=()=>{var u;(u=e.current)==null||u.click()},l=a?"Attach Files":"File input not supported by this model";return y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:e,onChange:o,multiple:!0,className:"hidden",disabled:n||!a}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{type:"button",variant:"ghost",size:"icon",onClick:s,disabled:n||!a,className:"h-8 w-8","aria-label":l,children:y.jsx(oD,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:l})]})})]})},Lbe=()=>{const e=Xc.getState().removeAttachedFile,[t,n]=N.useState(()=>Xc.getState().attachedFilesMetadata),[r,a]=N.useState(()=>or.getState().status==="streaming");return N.useEffect(()=>{const i=s=>{n(s.files)},o=s=>{a(s.status==="streaming")};return Ct.on(xt.ATTACHED_FILES_CHANGED,i),Ct.on(xt.INTERACTION_STATUS_CHANGED,o),()=>{Ct.off(xt.ATTACHED_FILES_CHANGED,i),Ct.off(xt.INTERACTION_STATUS_CHANGED,o)}},[]),t.length===0?null:y.jsx("div",{className:"max-h-40 overflow-y-auto space-y-1 pr-1",children:t.map(i=>y.jsx(T5,{fileMeta:i,onRemove:e,isReadOnly:r},i.id))})};function $be(){const e=Mr.getState().registerPromptControl;e({id:"core-file-attachment",triggerRenderer:()=>yt.createElement(Fbe),renderer:()=>yt.createElement(Lbe)}),console.log("[Function] Registered Core File Attachment Control")}const Bbe=({newFolderName:e,setNewFolderName:t,handleCreateFolder:n,cancelCreatingFolder:r,newFolderInputRef:a,isOperationLoading:i})=>{const o=s=>{s.key==="Enter"?n():s.key==="Escape"&&r()};return y.jsxs(Ji,{className:"bg-muted/30",children:[y.jsx(yr,{className:"px-2 py-1"}),y.jsx(yr,{className:"px-2 py-1",children:y.jsx(Z0,{className:"h-5 w-5 text-yellow-400"})}),y.jsx(yr,{className:"py-1 px-2",colSpan:3,children:y.jsx(Jn,{ref:a,value:e,onChange:s=>t(s.target.value),onBlur:n,onKeyDown:o,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",placeholder:"New folder name",disabled:i})}),y.jsx(yr,{className:"text-right pr-4 py-1",children:y.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-green-500 hover:text-green-400",onClick:n,"aria-label":"Create folder",disabled:i||!e.trim(),children:i?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ws,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Create (Enter)"})]})}),y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:"h-6 w-6 text-muted-foreground hover:text-foreground",onClick:r,"aria-label":"Cancel create folder",disabled:i,children:y.jsx(gu,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Cancel (Esc)"})]})})]})})]})};var F1="Checkbox",[zbe,A_e]=Pi(F1),[Ube,Hbe]=zbe(F1),eB=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:a,defaultChecked:i,required:o,disabled:s,value:l="on",onCheckedChange:u,form:d,...h}=e,[p,g]=N.useState(null),v=kn(t,C=>g(C)),b=N.useRef(!1),_=p?d||!!p.closest("form"):!0,[x,S]=qs({prop:a,defaultProp:i??!1,onChange:u,caller:F1}),E=N.useRef(x);return N.useEffect(()=>{const C=p==null?void 0:p.form;if(C){const k=()=>S(E.current);return C.addEventListener("reset",k),()=>C.removeEventListener("reset",k)}},[p,S]),y.jsxs(Ube,{scope:n,state:x,disabled:s,children:[y.jsx(tn.button,{type:"button",role:"checkbox","aria-checked":Kc(x)?"mixed":x,"aria-required":o,"data-state":aB(x),"data-disabled":s?"":void 0,disabled:s,value:l,...h,ref:v,onKeyDown:qt(e.onKeyDown,C=>{C.key==="Enter"&&C.preventDefault()}),onClick:qt(e.onClick,C=>{S(k=>Kc(k)?!0:!k),_&&(b.current=C.isPropagationStopped(),b.current||C.stopPropagation())})}),_&&y.jsx(rB,{control:p,bubbles:!b.current,name:r,value:l,checked:x,required:o,disabled:s,form:d,style:{transform:"translateX(-100%)"},defaultChecked:Kc(i)?!1:i})]})});eB.displayName=F1;var tB="CheckboxIndicator",nB=N.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...a}=e,i=Hbe(tB,n);return y.jsx(La,{present:r||Kc(i.state)||i.state===!0,children:y.jsx(tn.span,{"data-state":aB(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});nB.displayName=tB;var qbe="CheckboxBubbleInput",rB=N.forwardRef(({__scopeCheckbox:e,control:t,checked:n,bubbles:r=!0,defaultChecked:a,...i},o)=>{const s=N.useRef(null),l=kn(s,o),u=w1(n),d=Nw(t);N.useEffect(()=>{const p=s.current;if(!p)return;const g=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(g,"checked").set;if(u!==n&&b){const _=new Event("click",{bubbles:r});p.indeterminate=Kc(n),b.call(p,Kc(n)?!1:n),p.dispatchEvent(_)}},[u,n,r]);const h=N.useRef(Kc(n)?!1:n);return y.jsx(tn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??h.current,...i,tabIndex:-1,ref:l,style:{...i.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rB.displayName=qbe;function Kc(e){return e==="indeterminate"}function aB(e){return Kc(e)?"indeterminate":e?"checked":"unchecked"}var Vbe=eB,Gbe=nB;function Wbe({className:e,...t}){return y.jsx(Vbe,{"data-slot":"checkbox",className:Rt("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:y.jsx(Gbe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:y.jsx(Ws,{className:"size-3.5"})})})}var pC=["Enter"," "],Kbe=["ArrowDown","PageUp","Home"],iB=["ArrowUp","PageDown","End"],Zbe=[...Kbe,...iB],Ybe={ltr:[...pC,"ArrowRight"],rtl:[...pC,"ArrowLeft"]},Xbe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ug="Menu",[W0,Jbe,Qbe]=x1(Ug),[Gd,oB]=Pi(Ug,[Qbe,yu,R1]),L1=yu(),sB=R1(),[eve,Wd]=Gd(Ug),[tve,Hg]=Gd(Ug),lB=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:a,onOpenChange:i,modal:o=!0}=e,s=L1(t),[l,u]=N.useState(null),d=N.useRef(!1),h=Da(i),p=rp(a);return N.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),y.jsx(Rw,{...s,children:y.jsx(eve,{scope:t,open:n,onOpenChange:h,content:l,onContentChange:u,children:y.jsx(tve,{scope:t,onClose:N.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:p,modal:o,children:r})})})};lB.displayName=Ug;var nve="MenuAnchor",PT=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=L1(n);return y.jsx(tg,{...a,...r,ref:t})});PT.displayName=nve;var FT="MenuPortal",[rve,cB]=Gd(FT,{forceMount:void 0}),uB=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:a}=e,i=Wd(FT,t);return y.jsx(rve,{scope:t,forceMount:n,children:y.jsx(La,{present:n||i.open,children:y.jsx(Uh,{asChild:!0,container:a,children:r})})})};uB.displayName=FT;var So="MenuContent",[ave,LT]=Gd(So),dB=N.forwardRef((e,t)=>{const n=cB(So,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Wd(So,e.__scopeMenu),o=Hg(So,e.__scopeMenu);return y.jsx(W0.Provider,{scope:e.__scopeMenu,children:y.jsx(La,{present:r||i.open,children:y.jsx(W0.Slot,{scope:e.__scopeMenu,children:o.modal?y.jsx(ive,{...a,ref:t}):y.jsx(ove,{...a,ref:t})})})})}),ive=N.forwardRef((e,t)=>{const n=Wd(So,e.__scopeMenu),r=N.useRef(null),a=kn(t,r);return N.useEffect(()=>{const i=r.current;if(i)return b1(i)},[]),y.jsx($T,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:qt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ove=N.forwardRef((e,t)=>{const n=Wd(So,e.__scopeMenu);return y.jsx($T,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),sve=Yc("MenuContent.ScrollLock"),$T=N.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:s,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...b}=e,_=Wd(So,n),x=Hg(So,n),S=L1(n),E=sB(n),C=Jbe(n),[k,R]=N.useState(null),D=N.useRef(null),O=kn(t,D,_.onContentChange),L=N.useRef(0),B=N.useRef(""),Y=N.useRef(0),F=N.useRef(null),Z=N.useRef("right"),q=N.useRef(0),ne=v?Pg:N.Fragment,ae=v?{as:sve,allowPinchZoom:!0}:void 0,re=ie=>{var Ne,Re;const U=B.current+ie,Q=C().filter(Ce=>!Ce.disabled),X=document.activeElement,de=(Ne=Q.find(Ce=>Ce.ref.current===X))==null?void 0:Ne.textValue,be=Q.map(Ce=>Ce.textValue),_e=vve(be,U,de),Pe=(Re=Q.find(Ce=>Ce.textValue===_e))==null?void 0:Re.ref.current;(function Ce(Fe){B.current=Fe,window.clearTimeout(L.current),Fe!==""&&(L.current=window.setTimeout(()=>Ce(""),1e3))})(U),Pe&&setTimeout(()=>Pe.focus())};N.useEffect(()=>()=>window.clearTimeout(L.current),[]),g1();const ee=N.useCallback(ie=>{var Q,X;return Z.current===((Q=F.current)==null?void 0:Q.side)&&_ve(ie,(X=F.current)==null?void 0:X.area)},[]);return y.jsx(ave,{scope:n,searchRef:B,onItemEnter:N.useCallback(ie=>{ee(ie)&&ie.preventDefault()},[ee]),onItemLeave:N.useCallback(ie=>{var U;ee(ie)||((U=D.current)==null||U.focus(),R(null))},[ee]),onTriggerLeave:N.useCallback(ie=>{ee(ie)&&ie.preventDefault()},[ee]),pointerGraceTimerRef:Y,onPointerGraceIntentChange:N.useCallback(ie=>{F.current=ie},[]),children:y.jsx(ne,{...ae,children:y.jsx(Mg,{asChild:!0,trapped:a,onMountAutoFocus:qt(i,ie=>{var U;ie.preventDefault(),(U=D.current)==null||U.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:y.jsx($h,{asChild:!0,disableOutsidePointerEvents:s,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:p,onDismiss:g,children:y.jsx(s9,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:R,onEntryFocus:qt(l,ie=>{x.isUsingKeyboardRef.current||ie.preventDefault()}),preventScrollOnEntryFocus:!0,children:y.jsx(Iw,{role:"menu","aria-orientation":"vertical","data-state":TB(_.open),"data-radix-menu-content":"",dir:x.dir,...S,...b,ref:O,style:{outline:"none",...b.style},onKeyDown:qt(b.onKeyDown,ie=>{const Q=ie.target.closest("[data-radix-menu-content]")===ie.currentTarget,X=ie.ctrlKey||ie.altKey||ie.metaKey,de=ie.key.length===1;Q&&(ie.key==="Tab"&&ie.preventDefault(),!X&&de&&re(ie.key));const be=D.current;if(ie.target!==be||!Zbe.includes(ie.key))return;ie.preventDefault();const Pe=C().filter(Ne=>!Ne.disabled).map(Ne=>Ne.ref.current);iB.includes(ie.key)&&Pe.reverse(),yve(Pe)}),onBlur:qt(e.onBlur,ie=>{ie.currentTarget.contains(ie.target)||(window.clearTimeout(L.current),B.current="")}),onPointerMove:qt(e.onPointerMove,K0(ie=>{const U=ie.target,Q=q.current!==ie.clientX;if(ie.currentTarget.contains(U)&&Q){const X=ie.clientX>q.current?"right":"left";Z.current=X,q.current=ie.clientX}}))})})})})})})});dB.displayName=So;var lve="MenuGroup",BT=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(tn.div,{role:"group",...r,ref:t})});BT.displayName=lve;var cve="MenuLabel",fB=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(tn.div,{...r,ref:t})});fB.displayName=cve;var cw="MenuItem",T6="menu.itemSelect",$1=N.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...a}=e,i=N.useRef(null),o=Hg(cw,e.__scopeMenu),s=LT(cw,e.__scopeMenu),l=kn(t,i),u=N.useRef(!1),d=()=>{const h=i.current;if(!n&&h){const p=new CustomEvent(T6,{bubbles:!0,cancelable:!0});h.addEventListener(T6,g=>r==null?void 0:r(g),{once:!0}),LM(h,p),p.defaultPrevented?u.current=!1:o.onClose()}};return y.jsx(hB,{...a,ref:l,disabled:n,onClick:qt(e.onClick,d),onPointerDown:h=>{var p;(p=e.onPointerDown)==null||p.call(e,h),u.current=!0},onPointerUp:qt(e.onPointerUp,h=>{var p;u.current||(p=h.currentTarget)==null||p.click()}),onKeyDown:qt(e.onKeyDown,h=>{const p=s.searchRef.current!=="";n||p&&h.key===" "||pC.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});$1.displayName=cw;var hB=N.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:a,...i}=e,o=LT(cw,n),s=sB(n),l=N.useRef(null),u=kn(t,l),[d,h]=N.useState(!1),[p,g]=N.useState("");return N.useEffect(()=>{const v=l.current;v&&g((v.textContent??"").trim())},[i.children]),y.jsx(W0.ItemSlot,{scope:n,disabled:r,textValue:a??p,children:y.jsx(l9,{asChild:!0,...s,focusable:!r,children:y.jsx(tn.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:u,onPointerMove:qt(e.onPointerMove,K0(v=>{r?o.onItemLeave(v):(o.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:qt(e.onPointerLeave,K0(v=>o.onItemLeave(v))),onFocus:qt(e.onFocus,()=>h(!0)),onBlur:qt(e.onBlur,()=>h(!1))})})})}),uve="MenuCheckboxItem",pB=N.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...a}=e;return y.jsx(vB,{scope:e.__scopeMenu,checked:n,children:y.jsx($1,{role:"menuitemcheckbox","aria-checked":uw(n)?"mixed":n,...a,ref:t,"data-state":UT(n),onSelect:qt(a.onSelect,()=>r==null?void 0:r(uw(n)?!0:!n),{checkForDefaultPrevented:!1})})})});pB.displayName=uve;var mB="MenuRadioGroup",[dve,fve]=Gd(mB,{value:void 0,onValueChange:()=>{}}),gB=N.forwardRef((e,t)=>{const{value:n,onValueChange:r,...a}=e,i=Da(r);return y.jsx(dve,{scope:e.__scopeMenu,value:n,onValueChange:i,children:y.jsx(BT,{...a,ref:t})})});gB.displayName=mB;var yB="MenuRadioItem",bB=N.forwardRef((e,t)=>{const{value:n,...r}=e,a=fve(yB,e.__scopeMenu),i=n===a.value;return y.jsx(vB,{scope:e.__scopeMenu,checked:i,children:y.jsx($1,{role:"menuitemradio","aria-checked":i,...r,ref:t,"data-state":UT(i),onSelect:qt(r.onSelect,()=>{var o;return(o=a.onValueChange)==null?void 0:o.call(a,n)},{checkForDefaultPrevented:!1})})})});bB.displayName=yB;var zT="MenuItemIndicator",[vB,hve]=Gd(zT,{checked:!1}),wB=N.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...a}=e,i=hve(zT,n);return y.jsx(La,{present:r||uw(i.checked)||i.checked===!0,children:y.jsx(tn.span,{...a,ref:t,"data-state":UT(i.checked)})})});wB.displayName=zT;var pve="MenuSeparator",_B=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return y.jsx(tn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});_B.displayName=pve;var mve="MenuArrow",xB=N.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,a=L1(n);return y.jsx(Ow,{...a,...r,ref:t})});xB.displayName=mve;var gve="MenuSub",[N_e,SB]=Gd(gve),Dm="MenuSubTrigger",EB=N.forwardRef((e,t)=>{const n=Wd(Dm,e.__scopeMenu),r=Hg(Dm,e.__scopeMenu),a=SB(Dm,e.__scopeMenu),i=LT(Dm,e.__scopeMenu),o=N.useRef(null),{pointerGraceTimerRef:s,onPointerGraceIntentChange:l}=i,u={__scopeMenu:e.__scopeMenu},d=N.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return N.useEffect(()=>d,[d]),N.useEffect(()=>{const h=s.current;return()=>{window.clearTimeout(h),l(null)}},[s,l]),y.jsx(PT,{asChild:!0,...u,children:y.jsx(hB,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":a.contentId,"data-state":TB(n.open),...e,ref:Zc(t,a.onTriggerChange),onClick:h=>{var p;(p=e.onClick)==null||p.call(e,h),!(e.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:qt(e.onPointerMove,K0(h=>{i.onItemEnter(h),!h.defaultPrevented&&!e.disabled&&!n.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:qt(e.onPointerLeave,K0(h=>{var g,v;d();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const b=(v=n.content)==null?void 0:v.dataset.side,_=b==="right",x=_?-5:5,S=p[_?"left":"right"],E=p[_?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+x,y:h.clientY},{x:S,y:p.top},{x:E,y:p.top},{x:E,y:p.bottom},{x:S,y:p.bottom}],side:b}),window.clearTimeout(s.current),s.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:qt(e.onKeyDown,h=>{var g;const p=i.searchRef.current!=="";e.disabled||p&&h.key===" "||Ybe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});EB.displayName=Dm;var CB="MenuSubContent",kB=N.forwardRef((e,t)=>{const n=cB(So,e.__scopeMenu),{forceMount:r=n.forceMount,...a}=e,i=Wd(So,e.__scopeMenu),o=Hg(So,e.__scopeMenu),s=SB(CB,e.__scopeMenu),l=N.useRef(null),u=kn(t,l);return y.jsx(W0.Provider,{scope:e.__scopeMenu,children:y.jsx(La,{present:r||i.open,children:y.jsx(W0.Slot,{scope:e.__scopeMenu,children:y.jsx($T,{id:s.contentId,"aria-labelledby":s.triggerId,...a,ref:u,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;o.isUsingKeyboardRef.current&&((h=l.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:qt(e.onFocusOutside,d=>{d.target!==s.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:qt(e.onEscapeKeyDown,d=>{o.onClose(),d.preventDefault()}),onKeyDown:qt(e.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),p=Xbe[o.dir].includes(d.key);h&&p&&(i.onOpenChange(!1),(g=s.trigger)==null||g.focus(),d.preventDefault())})})})})})});kB.displayName=CB;function TB(e){return e?"open":"closed"}function uw(e){return e==="indeterminate"}function UT(e){return uw(e)?"indeterminate":e?"checked":"unchecked"}function yve(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function bve(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function vve(e,t,n){const a=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,i=n?e.indexOf(n):-1;let o=bve(e,Math.max(i,0));a.length===1&&(o=o.filter(u=>u!==n));const l=o.find(u=>u.toLowerCase().startsWith(a.toLowerCase()));return l!==n?l:void 0}function wve(e,t){const{x:n,y:r}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const s=t[i],l=t[o],u=s.x,d=s.y,h=l.x,p=l.y;d>r!=p>r&&n<(h-u)*(r-d)/(p-d)+u&&(a=!a)}return a}function _ve(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return wve(n,t)}function K0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var xve=lB,Sve=PT,Eve=uB,Cve=dB,kve=BT,Tve=fB,Ave=$1,Nve=pB,Rve=gB,Ive=bB,Ove=wB,Dve=_B,jve=xB,Mve=EB,Pve=kB,HT="ContextMenu",[Fve,R_e]=Pi(HT,[oB]),Ei=oB(),[Lve,AB]=Fve(HT),NB=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:a,modal:i=!0}=e,[o,s]=N.useState(!1),l=Ei(t),u=Da(r),d=N.useCallback(h=>{s(h),u(h)},[u]);return y.jsx(Lve,{scope:t,open:o,onOpenChange:d,modal:i,children:y.jsx(xve,{...l,dir:a,open:o,onOpenChange:d,modal:i,children:n})})};NB.displayName=HT;var RB="ContextMenuTrigger",IB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...a}=e,i=AB(RB,n),o=Ei(n),s=N.useRef({x:0,y:0}),l=N.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...s.current})}),u=N.useRef(0),d=N.useCallback(()=>window.clearTimeout(u.current),[]),h=p=>{s.current={x:p.clientX,y:p.clientY},i.onOpenChange(!0)};return N.useEffect(()=>d,[d]),N.useEffect(()=>void(r&&d()),[r,d]),y.jsxs(y.Fragment,{children:[y.jsx(Sve,{...o,virtualRef:l}),y.jsx(tn.span,{"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,...a,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:qt(e.onContextMenu,p=>{d(),h(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:qt(e.onPointerDown,Fb(p=>{d(),u.current=window.setTimeout(()=>h(p),700)})),onPointerMove:r?e.onPointerMove:qt(e.onPointerMove,Fb(d)),onPointerCancel:r?e.onPointerCancel:qt(e.onPointerCancel,Fb(d)),onPointerUp:r?e.onPointerUp:qt(e.onPointerUp,Fb(d))})]})});IB.displayName=RB;var $ve="ContextMenuPortal",OB=e=>{const{__scopeContextMenu:t,...n}=e,r=Ei(t);return y.jsx(Eve,{...r,...n})};OB.displayName=$ve;var DB="ContextMenuContent",jB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=AB(DB,n),i=Ei(n),o=N.useRef(!1);return y.jsx(Cve,{...i,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:s=>{var l;(l=e.onCloseAutoFocus)==null||l.call(e,s),!s.defaultPrevented&&o.current&&s.preventDefault(),o.current=!1},onInteractOutside:s=>{var l;(l=e.onInteractOutside)==null||l.call(e,s),!s.defaultPrevented&&!a.modal&&(o.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jB.displayName=DB;var Bve="ContextMenuGroup",zve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(kve,{...a,...r,ref:t})});zve.displayName=Bve;var Uve="ContextMenuLabel",Hve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Tve,{...a,...r,ref:t})});Hve.displayName=Uve;var qve="ContextMenuItem",MB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Ave,{...a,...r,ref:t})});MB.displayName=qve;var Vve="ContextMenuCheckboxItem",Gve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Nve,{...a,...r,ref:t})});Gve.displayName=Vve;var Wve="ContextMenuRadioGroup",Kve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Rve,{...a,...r,ref:t})});Kve.displayName=Wve;var Zve="ContextMenuRadioItem",Yve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Ive,{...a,...r,ref:t})});Yve.displayName=Zve;var Xve="ContextMenuItemIndicator",Jve=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Ove,{...a,...r,ref:t})});Jve.displayName=Xve;var Qve="ContextMenuSeparator",PB=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Dve,{...a,...r,ref:t})});PB.displayName=Qve;var ewe="ContextMenuArrow",twe=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(jve,{...a,...r,ref:t})});twe.displayName=ewe;var nwe="ContextMenuSubTrigger",rwe=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Mve,{...a,...r,ref:t})});rwe.displayName=nwe;var awe="ContextMenuSubContent",iwe=N.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,a=Ei(n);return y.jsx(Pve,{...a,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});iwe.displayName=awe;function Fb(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var owe=NB,swe=IB,lwe=OB,cwe=jB,uwe=MB,dwe=PB;function fwe({...e}){return y.jsx(owe,{"data-slot":"context-menu",...e})}function hwe({...e}){return y.jsx(swe,{"data-slot":"context-menu-trigger",...e})}function pwe({className:e,...t}){return y.jsx(lwe,{children:y.jsx(cwe,{"data-slot":"context-menu-content",className:Rt("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-context-menu-content-available-height) min-w-[8rem] origin-(--radix-context-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...t})})}function El({className:e,inset:t,variant:n="default",...r}){return y.jsx(uwe,{"data-slot":"context-menu-item","data-inset":t,"data-variant":n,className:Rt("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function A6({className:e,...t}){return y.jsx(dwe,{"data-slot":"context-menu-separator",className:Rt("bg-border -mx-1 my-1 h-px",e),...t})}const mwe=({entry:e,isEditingThis:t,isChecked:n,isGitRepo:r,newName:a,isOperationLoading:i,creatingFolder:o,handleNavigate:s,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:p,handleDelete:g,setNewName:v,renameInputRef:b,handleGitInit:_,handleGitPull:x,handleGitCommit:S,handleGitPush:E,handleGitStatus:C})=>{const k=Y=>{Y.target.closest('input[type="checkbox"], button, input[type="text"], [data-radix-context-menu-trigger]')||!t&&!i&&s(e)},R=Y=>{Y.key==="Enter"?h():Y.key==="Escape"&&d()},D=e.type==="folder",O=D?r?eH:Z0:JU,L=D?r?"text-green-400":"text-yellow-400":"text-blue-400",B=y.jsxs(Ji,{className:Rt("group hover:bg-muted/50",t&&"bg-muted ring-1 ring-primary",i&&"opacity-70 cursor-not-allowed"),onClick:k,onDoubleClick:()=>!i&&!t&&s(e),children:[y.jsx(yr,{className:"px-2 py-1",children:y.jsx(Wbe,{checked:n,onCheckedChange:Y=>l(!!Y,e.id),"aria-label":`Select ${e.name}`,className:"border-border data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",disabled:i||D})}),y.jsx(yr,{className:"px-2 py-1",children:y.jsx(O,{className:Rt("h-5 w-5",L)})}),y.jsx(yr,{className:"py-1 px-2",children:t?y.jsx(Jn,{ref:b,value:a,onChange:Y=>v(Y.target.value),onBlur:h,onKeyDown:R,className:"h-7 px-2 py-1 text-sm bg-input border-border focus:ring-1 focus:ring-primary w-full",onClick:Y=>Y.stopPropagation(),disabled:i}):y.jsx("span",{className:Rt("truncate",D&&"cursor-pointer hover:underline"),title:e.name,onClick:Y=>{D&&(Y.stopPropagation(),s(e))},children:e.name})}),y.jsx(yr,{className:"text-right py-1 px-2 text-xs text-muted-foreground",children:e.type==="file"&&e.size!==void 0?jv(e.size):""}),y.jsx(yr,{className:"text-right text-xs text-muted-foreground py-1 px-2",children:new Date(e.lastModified).toLocaleString()}),y.jsx(yr,{className:"text-right pr-4 py-1",children:y.jsx("div",{className:Rt("flex items-center justify-end gap-0.5 opacity-0 group-hover:opacity-100 focus-within:opacity-100 transition-opacity",t&&"opacity-100",i&&"opacity-30"),children:t?y.jsxs(y.Fragment,{children:[y.jsx(sr,{tooltipText:"Save (Enter)",onClick:Y=>{Y.stopPropagation(),h()},"aria-label":"Save name",disabled:i||!a.trim(),icon:i?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx(Ws,{}),className:"h-6 w-6 text-green-500 hover:text-green-400"}),y.jsx(sr,{tooltipText:"Cancel (Esc)",onClick:Y=>{Y.stopPropagation(),d()},"aria-label":"Cancel edit",disabled:i,icon:y.jsx(gu,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"})]}):y.jsxs(y.Fragment,{children:[y.jsx(sr,{tooltipText:"Rename",onClick:Y=>{Y.stopPropagation(),u(e)},"aria-label":"Rename",disabled:i||o,icon:y.jsx(XE,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),y.jsx(sr,{tooltipText:D?"Download folder (.zip)":"Download file",onClick:Y=>{Y.stopPropagation(),p(e)},"aria-label":D?"Download folder as ZIP":"Download file",disabled:i,icon:y.jsx(Um,{}),className:"h-6 w-6 text-muted-foreground hover:text-foreground"}),y.jsx(sr,{tooltipText:"Delete",onClick:Y=>{Y.stopPropagation(),g(e)},"aria-label":`Delete ${D?"folder":"file"}`,disabled:i,icon:y.jsx($s,{}),className:"h-6 w-6 text-destructive hover:text-destructive/80"})]})})})]},e.id);return D?y.jsxs(fwe,{children:[y.jsx(hwe,{disabled:t||i,asChild:!0,children:B}),y.jsxs(pwe,{children:[y.jsx(El,{onSelect:()=>s(e),disabled:t||i,children:"Open Folder"}),y.jsx(A6,{}),r?y.jsxs(y.Fragment,{children:[y.jsxs(El,{onSelect:()=>x(e.path),disabled:i,children:[y.jsx(cH,{className:"mr-2 h-4 w-4"}),"Git Pull"]}),y.jsxs(El,{onSelect:()=>S(e.path),disabled:i,children:[y.jsx(sH,{className:"mr-2 h-4 w-4"}),"Git Commit..."]}),y.jsxs(El,{onSelect:()=>E(e.path),disabled:i,children:[y.jsx(rD,{className:"mr-2 h-4 w-4"}),"Git Push"]}),y.jsxs(El,{onSelect:()=>C(e.path),disabled:i,children:[y.jsx(iD,{className:"mr-2 h-4 w-4"}),"Git Status"]})]}):y.jsxs(El,{onSelect:()=>_(e.path),disabled:i,children:[y.jsx(Hm,{className:"mr-2 h-4 w-4"}),"Initialize Git Repository"]}),y.jsx(A6,{}),y.jsxs(El,{onSelect:()=>u(e),disabled:i,children:[y.jsx(XE,{className:"mr-2 h-4 w-4"}),"Rename"]}),y.jsxs(El,{onSelect:()=>p(e),disabled:i,children:[y.jsx(Um,{className:"mr-2 h-4 w-4"}),"Download as ZIP"]}),y.jsxs(El,{className:"text-red-600 focus:text-red-600 focus:bg-red-100 dark:focus:bg-red-900/20",onSelect:()=>g(e),disabled:i,children:[y.jsx($s,{className:"mr-2 h-4 w-4"}),"Delete Folder"]})]})]},e.id):B},gwe=({entries:e,editingPath:t,newName:n,creatingFolder:r,newFolderName:a,selectedFileIds:i,isOperationLoading:o,handleNavigate:s,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,cancelCreatingFolder:p,handleCreateFolder:g,handleDownload:v,handleDelete:b,setNewName:_,setNewFolderName:x,renameInputRef:S,newFolderInputRef:E,gitRepoStatus:C,handleGitInit:k,handleGitPull:R,handleGitCommit:D,handleGitPush:O,handleGitStatus:L})=>{const B=N.useMemo(()=>e,[e]);return o&&e.length===0&&!r?y.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground",children:"Loading..."}):y.jsx("div",{className:"relative h-full",children:y.jsxs(T1,{className:"w-full text-sm",children:[y.jsx(A1,{className:"sticky top-0 bg-card z-10",children:y.jsxs(Ji,{className:"hover:bg-card",children:[y.jsx(ia,{className:"w-[40px] px-2"}),y.jsx(ia,{className:"w-[40px] px-2"}),y.jsx(ia,{children:"Name"}),y.jsx(ia,{className:"w-[100px] text-right",children:"Size"}),y.jsx(ia,{className:"w-[150px] text-right",children:"Modified"}),y.jsx(ia,{className:"w-[100px] text-right pr-4",children:"Actions"})]})}),y.jsxs(N1,{children:[r&&y.jsx(Bbe,{newFolderName:a,setNewFolderName:x,handleCreateFolder:g,cancelCreatingFolder:p,newFolderInputRef:E,isOperationLoading:o}),B.map(Y=>{const F=t===Y.path,Z=i.has(Y.id),q=C[Y.path]??!1;return y.jsx(mwe,{entry:Y,isEditingThis:F,isChecked:Z,isGitRepo:q,newName:F?n:"",isOperationLoading:o,creatingFolder:r,handleNavigate:s,handleCheckboxChange:l,startEditing:u,cancelEditing:d,handleRename:h,handleDownload:v,handleDelete:b,setNewName:_,renameInputRef:S,handleGitInit:k,handleGitPull:R,handleGitCommit:D,handleGitPush:O,handleGitStatus:L},Y.id)}),e.length===0&&!r&&!o&&y.jsx(Ji,{children:y.jsx(yr,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:"Folder is empty"})})]})]})})},ywe=({currentPath:e,isAnyLoading:t,isOperationLoading:n,entries:r,editingPath:a,creatingFolder:i,handleNavigateHome:o,handleNavigateUp:s,handleRefresh:l,startCreatingFolder:u,handleUploadClick:d,handleFolderUploadClick:h,handleArchiveUploadClick:p,handleDownloadAll:g,handleCloneClick:v,fileInputRef:b,folderInputRef:_,archiveInputRef:x,handleFileChange:S,handleArchiveChange:E})=>y.jsxs(y.Fragment,{children:[y.jsx("input",{type:"file",ref:b,onChange:S,className:"hidden",multiple:!0,disabled:t}),y.jsx("input",{type:"file",ref:_,onChange:S,className:"hidden",webkitdirectory:"true",mozdirectory:"true",directory:"true",disabled:t}),y.jsx("input",{type:"file",ref:x,onChange:E,className:"hidden",accept:".zip",disabled:t}),y.jsxs("div",{className:"flex items-center gap-1 p-2 border-b border-border flex-shrink-0 flex-wrap",children:[y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[y.jsx(Ht,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),o()},disabled:e==="/"||t,title:"Go to root directory",className:"h-8 w-8",type:"button",children:y.jsx(mH,{className:"h-4 w-4"})}),y.jsx(Ht,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),s()},disabled:e==="/"||t,title:"Go up one level",className:"h-8 w-8",type:"button",children:y.jsx(rH,{className:"h-4 w-4"})}),y.jsx("span",{className:"text-sm font-mono text-muted-foreground truncate flex-shrink min-w-0 px-2 py-1 rounded bg-muted/50 max-w-[200px] sm:max-w-xs md:max-w-sm lg:max-w-md",title:e,children:e})]}),y.jsx("div",{className:"flex-grow"}),y.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0 flex-wrap",children:[y.jsx(Ht,{variant:"ghost",size:"icon",onClick:C=>{C.preventDefault(),C.stopPropagation(),l()},disabled:t,title:"Refresh current directory",className:"h-8 w-8",type:"button",children:n?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx(fw,{className:"h-4 w-4"})}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),u()},disabled:t||i||!!a,className:"h-8",title:"Create New Folder",type:"button",children:[n&&i?y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(xC,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),d()},disabled:t,className:"h-8",title:"Upload Files",type:"button",children:[n?y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(nD,{className:"h-4 w-4 mr-1"}),"Files"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),h()},disabled:t,className:"h-8",title:"Upload Folder",type:"button",children:[n?y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Z0,{className:"h-4 w-4 mr-1"}),"Folder"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),p()},disabled:t,className:"h-8",title:"Upload & Extract ZIP",type:"button",children:[n?y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(qU,{className:"h-4 w-4 mr-1"}),"ZIP"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),v()},disabled:t,className:"h-8",title:"Clone Git Repository",type:"button",children:[n?y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(Hm,{className:"h-4 w-4 mr-1"}),"Clone"]}),y.jsxs(Ht,{variant:"outline",size:"sm",onClick:C=>{C.preventDefault(),C.stopPropagation(),g()},disabled:t||r.length===0,className:"h-8",title:"Download Current Directory as ZIP",type:"button",children:[n?y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(gU,{className:"h-4 w-4 mr-1"}),"Export"]})]})]})]}),FB=({isOpen:e,onOpenChange:t,title:n,description:r,children:a,submitLabel:i="Submit",onSubmit:o,isSubmitting:s,submitDisabled:l=!1,className:u,contentClassName:d})=>{const h=async p=>{p==null||p.preventDefault(),!(s||l)&&await o()};return y.jsx(yT,{open:e,onOpenChange:t,children:y.jsxs(bT,{className:Rt(u),children:[y.jsxs(vT,{children:[y.jsx(_T,{children:n}),r&&y.jsx(xT,{children:r})]}),y.jsx("div",{className:Rt("py-4",d),children:a}),y.jsxs(wT,{children:[y.jsx(cme,{asChild:!0,children:y.jsx(Ht,{variant:"outline",disabled:s,children:"Cancel"})}),y.jsxs(Ht,{onClick:h,disabled:s||l,children:[s&&y.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),s?"Submitting...":i]})]})]})})},bwe=({isOpen:e,onOpenChange:t,cloneRepoUrl:n,setCloneRepoUrl:r,cloneBranch:a,setCloneBranch:i,isCloning:o,onSubmitClone:s,currentPath:l})=>y.jsx(FB,{isOpen:e,onOpenChange:t,title:"Clone Git Repository",description:y.jsxs(y.Fragment,{children:["Enter the repository URL. It will be cloned into a new folder named after the repository within ",y.jsx("code",{children:l}),"."]}),submitLabel:"Clone",onSubmit:s,isSubmitting:o,submitDisabled:!n.trim(),children:y.jsxs("div",{className:"grid gap-4",children:[y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(cn,{htmlFor:"clone-url",className:"text-right",children:"URL"}),y.jsx(Jn,{id:"clone-url",value:n,onChange:u=>r(u.target.value),className:"col-span-3",placeholder:"https://github.com/user/repo.git",disabled:o})]}),y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(cn,{htmlFor:"clone-branch",className:"text-right",children:"Branch"}),y.jsx(Jn,{id:"clone-branch",value:a,onChange:u=>i(u.target.value),className:"col-span-3",placeholder:"main (default)",disabled:o})]})]})}),vwe=({isOpen:e,onOpenChange:t,commitPath:n,commitMessage:r,setCommitMessage:a,isCommitting:i,onSubmitCommit:o})=>y.jsx(FB,{isOpen:e,onOpenChange:t,title:"Commit Changes",description:y.jsxs(y.Fragment,{children:["Enter a commit message for the changes in ",y.jsx("code",{children:n}),". All current changes in this directory will be staged and committed."]}),submitLabel:"Commit",onSubmit:o,isSubmitting:i,submitDisabled:!r.trim(),children:y.jsx("div",{className:"grid gap-4",children:y.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[y.jsx(cn,{htmlFor:"commit-msg",className:"text-right",children:"Message"}),y.jsx(Jn,{id:"commit-msg",value:r,onChange:s=>a(s.target.value),className:"col-span-3",placeholder:"e.g., Add feature X",disabled:i})]})})}),qT=N.memo(()=>{const{nodes:e,childrenMap:t,currentParentId:n,loading:r,operationLoading:a,error:i,fetchNodes:o,createDirectory:s,uploadFiles:l,deleteNodes:u,renameNode:d,setCurrentPath:h,rootId:p,selectFile:g,deselectFile:v,selectedFileIds:b,vfsKey:_,configuredVfsKey:x,initializingKey:S,_setError:E,_setOperationLoading:C,findNodeByPath:k,initializeVFS:R}=Go(Sn(ut=>({nodes:ut.nodes,childrenMap:ut.childrenMap,currentParentId:ut.currentParentId,selectedFileIds:ut.selectedFileIds,loading:ut.loading,operationLoading:ut.operationLoading,error:ut.error,fetchNodes:ut.fetchNodes,createDirectory:ut.createDirectory,uploadFiles:ut.uploadFiles,deleteNodes:ut.deleteNodes,renameNode:ut.renameNode,selectFile:ut.selectFile,deselectFile:ut.deselectFile,setCurrentPath:ut.setCurrentPath,rootId:ut.rootId,vfsKey:ut.vfsKey,configuredVfsKey:ut.configuredVfsKey,initializingKey:ut.initializingKey,_setError:ut._setError,_setOperationLoading:ut._setOperationLoading,findNodeByPath:ut.findNodeByPath,initializeVFS:ut.initializeVFS}))),[D,O]=N.useState(""),[L,B]=N.useState(null),[Y,F]=N.useState(!1),[Z,q]=N.useState(""),[ne,ae]=N.useState({}),[re,ee]=N.useState(!1),[ie,U]=N.useState(""),[Q,X]=N.useState(""),[de,be]=N.useState(!1),[_e,Pe]=N.useState(!1),[Ne,Re]=N.useState(null),[Ce,Fe]=N.useState(""),[Qe,Le]=N.useState(!1),[Ie,V]=N.useState({}),me=N.useRef(null),Te=N.useRef(null),le=N.useRef(null),oe=N.useRef(null),J=N.useRef(null),xe=n?e[n]:null,Me=xe?xe.path:"/",We=(t[n||p||""]||[]).map(ut=>e[ut]).filter(ut=>!!ut).sort((ut,Tt)=>ut.type==="folder"&&Tt.type==="file"?-1:ut.type==="file"&&Tt.type==="folder"?1:ut.name.localeCompare(Tt.name)),kt=N.useMemo(()=>We.filter(ut=>ut.type==="folder").map(ut=>ut.path),[We]),at=r||S!==null||_!==x,_t=a||de||Qe||Object.values(Ie).some(Boolean);N.useEffect(()=>{n!==null&&!t[n]&&!at&&x===_?o(n):n===null&&p&&!t[p]&&!at&&x===_&&o(p)},[n,t,p,at,o,x,_]),N.useEffect(()=>{var ut,Tt;L&&((ut=oe.current)==null||ut.focus(),(Tt=oe.current)==null||Tt.select())},[L]),N.useEffect(()=>{var ut;Y&&((ut=J.current)==null||ut.focus())},[Y]),N.useEffect(()=>{(async()=>{if(at||kt.length===0)return;const Tt={};let Mt=!1;for(const Xt of kt)try{const An=await Aie(Xt);ne[Xt]!==An&&(Tt[Xt]=An,Mt=!0)}catch(An){console.error(`Error checking git status for ${Xt}:`,An),ne[Xt]!==!1&&(Tt[Xt]=!1,Mt=!0)}Mt&&ae(Xt=>({...Xt,...Tt}))})()},[kt,at,ne]);const jt=N.useCallback(async(ut,Tt)=>{if(!(_t||at)){Tt!==!1&&C(!0),E(null);try{await ut()}catch(Mt){console.error("[FileManager Operation Error]:",Mt)}finally{Tt!==!1&&C(!1)}}},[_t,at,E,C]),Dt=N.useCallback(ut=>{_t||at||L||ut.type==="folder"&&jt(()=>h(ut.path),!1)},[_t,at,L,h,jt]),Gt=N.useCallback(()=>{if(_t||at||Me==="/")return;const ut=dg(Me);jt(()=>h(ut),!1)},[_t,at,Me,h,jt]),ye=N.useCallback(()=>{_t||at||Me==="/"||jt(()=>h("/"),!1)},[_t,at,Me,h,jt]),I=N.useCallback(()=>{at||jt(()=>o(n),!1)},[jt,o,n,at]),G=N.useCallback((ut,Tt)=>{const Mt=e[Tt];Mt&&Mt.type==="file"?ut?g(Tt):v(Tt):Mt&&Mt.type==="folder"&&lt.info("Folders cannot be attached to the prompt.")},[g,v,e]),fe=N.useCallback(ut=>{_t||at||Y||(B(ut.path),O(ut.name),F(!1))},[_t,at,Y]),Oe=N.useCallback(()=>{B(null),O("")},[]),ve=N.useCallback(async()=>{if(!L||!D.trim()){Oe();return}const ut=k(L);ut&&ut.name!==D.trim()&&await jt(()=>d(ut.id,D.trim())),Oe()},[L,D,d,Oe,k,jt]),ke=N.useCallback(()=>{_t||at||L||(F(!0),q(""),B(null))},[_t,at,L]),ce=N.useCallback(()=>{F(!1),q("")},[]),ft=N.useCallback(async()=>{if(!Z.trim()){ce();return}await jt(()=>s(n,Z.trim())),ce()},[Z,s,n,ce,jt]),vt=()=>{var ut;return(ut=me.current)==null?void 0:ut.click()},M=()=>{var ut;return(ut=Te.current)==null?void 0:ut.click()},Be=()=>{var ut;return(ut=le.current)==null?void 0:ut.click()},tt=N.useCallback(async ut=>{const Tt=ut.target.files;Tt&&Tt.length>0&&(await jt(()=>l(n,Tt)),ut.target&&(ut.target.value=""))},[l,n,jt]),ge=N.useCallback(async ut=>{var Mt;const Tt=(Mt=ut.target.files)==null?void 0:Mt[0];Tt&&(await jt(async()=>{await Iie(Tt,Me),await o(n)}),ut.target&&(ut.target.value=""))},[Me,o,n,jt]),De=N.useCallback(async ut=>{window.confirm(`Delete ${ut.type} "${ut.name}"?${ut.type==="folder"?`

WARNING: This will delete all contents inside`:""}`)&&await jt(()=>u([ut.id]))},[u,jt]),Ke=N.useCallback(async ut=>{await jt(async()=>{ut.type==="file"?await Rie(ut.path):await lO(`${ut.name}.zip`,ut.path)})},[jt]),Nt=N.useCallback(async()=>{We.length!==0&&await jt(async()=>{const ut=ha(Me)||"root";await lO(`${ut}_export.zip`,Me)})},[Me,We.length,jt]),pe=N.useCallback(async(ut,Tt)=>{if(!(Ie[ut]||at||a)){V(Mt=>({...Mt,[ut]:!0})),E(null);try{await Tt()}catch(Mt){console.error(`[FileManager Git Op Error @ ${ut}]:`,Mt)}finally{V(Mt=>({...Mt,[ut]:!1}))}}},[E,Ie,at,a]),H=N.useCallback(ut=>{pe(ut,async()=>{await x5(ut),ae(Tt=>({...Tt,[ut]:!0}))})},[pe]),z=N.useCallback(ut=>{lt.info("Pulling default branch (auth not implemented yet)..."),pe(ut,()=>a1(ut,"main"))},[pe]),W=N.useCallback(ut=>{Re(ut),Fe(""),Pe(!0)},[]),he=N.useCallback(ut=>{lt.info("Pushing default branch (auth not implemented yet)..."),pe(ut,()=>Hk(ut,"main"))},[pe]),Ae=N.useCallback(ut=>{pe(ut,()=>S5(ut))},[pe]),He=N.useCallback(()=>{U(""),X(""),ee(!0)},[]),pt=N.useCallback(async()=>{if(!ie.trim()){lt.error("Repository URL cannot be empty.");return}be(!0),E(null);try{const ut=ha(ie.trim().replace(/\.git$/,""))||"cloned_repo",Tt=b0(Me,ut);await _5(Tt,ie.trim(),Q.trim()||void 0),ee(!1),await I()}catch{}finally{be(!1)}},[ie,Q,Me,E,I]),Vt=N.useCallback(async()=>{if(!Ne||!Ce.trim()){lt.error("Commit message cannot be empty.");return}Le(!0),E(null);try{await Uk(Ne,Ce.trim()),Pe(!1)}catch{}finally{Le(!1)}},[Ne,Ce,E]);return at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-muted-foreground p-4",children:[y.jsx(Vn,{className:"h-8 w-8 animate-spin mb-2"}),y.jsx("p",{children:S?`Initializing filesystem: ${S}`:"Loading filesystem..."}),i&&y.jsxs("p",{className:"text-destructive mt-2",children:["Error: ",i]})]}):i&&!at?y.jsxs("div",{className:"flex h-full flex-col items-center justify-center bg-card text-destructive p-4",children:[y.jsxs("p",{children:["Error loading filesystem: ",i]}),y.jsx(Ht,{variant:"outline",size:"sm",onClick:()=>R(_||"default_fallback_key"),className:"mt-2",children:"Retry"})]}):y.jsxs("div",{className:Rt("flex h-full flex-col bg-card text-card-foreground"),children:[y.jsx(ywe,{currentPath:Me,isAnyLoading:_t||at,isOperationLoading:a,entries:We,editingPath:L,creatingFolder:Y,handleNavigateHome:ye,handleNavigateUp:Gt,handleRefresh:I,startCreatingFolder:ke,handleUploadClick:vt,handleFolderUploadClick:M,handleArchiveUploadClick:Be,handleDownloadAll:Nt,handleCloneClick:He,fileInputRef:me,folderInputRef:Te,archiveInputRef:le,handleFileChange:tt,handleArchiveChange:ge}),y.jsx("div",{className:"flex-grow overflow-auto",children:y.jsx(gwe,{entries:We,editingPath:L,newName:D,creatingFolder:Y,newFolderName:Z,selectedFileIds:b,isOperationLoading:_t,handleNavigate:Dt,handleCheckboxChange:G,startEditing:fe,cancelEditing:Oe,handleRename:ve,cancelCreatingFolder:ce,handleCreateFolder:ft,handleDownload:Ke,handleDelete:De,setNewName:O,setNewFolderName:q,renameInputRef:oe,newFolderInputRef:J,gitRepoStatus:ne,handleGitInit:H,handleGitPull:z,handleGitCommit:W,handleGitPush:he,handleGitStatus:Ae})}),y.jsx(bwe,{isOpen:re,onOpenChange:ee,cloneRepoUrl:ie,setCloneRepoUrl:U,cloneBranch:Q,setCloneBranch:X,isCloning:de,onSubmitClone:pt,currentPath:Me}),y.jsx(vwe,{isOpen:_e,onOpenChange:Pe,commitPath:Ne,commitMessage:Ce,setCommitMessage:Fe,isCommitting:Qe,onSubmitCommit:Vt})]})});qT.displayName="FileManager";const wwe=({vfsKey:e,selectedItemType:t})=>e==="orphan"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(r3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Shared VFS:"})," All chats ",y.jsx("i",{children:"not"})," in a project share this filesystem."]})]}):e&&t==="conversation"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(r3,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project-shared VFS:"})," All chats in this project share this filesystem."]})]}):e&&t==="project"?y.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300 bg-blue-900/40 px-2 py-1 rounded mb-1",children:[y.jsx(Z0,{className:"h-4 w-4"}),y.jsxs("span",{children:[y.jsx("b",{children:"Project VFS:"})," Filesystem for this project and all its chats."]})]}):null;function _we(){const e=Mr.getState().registerPromptControl,t=Mr.getState().registerChatControl,n=Xc.getState().addAttachedFile,r=()=>{const{toggleChatControlPanel:i,isChatControlPanelOpen:o}=Va(Sn(g=>({toggleChatControlPanel:g.toggleChatControlPanel,isChatControlPanelOpen:g.isChatControlPanelOpen}))),{enableVfs:s,selectedFileIds:l,nodes:u,clearSelection:d}=Go(Sn(g=>({enableVfs:g.enableVfs,selectedFileIds:g.selectedFileIds,nodes:g.nodes,clearSelection:g.clearSelection}))),h=o.vfs??!1,p=()=>{if(l.size===0){lt.info("No files selected in VFS to attach.");return}let g=0;l.forEach(v=>{const b=u[v];b&&b.type==="file"&&(n({source:"vfs",name:b.name,type:b.mimeType||"application/octet-stream",size:b.size,path:b.path}),g++)}),g>0&&(lt.success(`Attached ${g} file(s) from VFS to the next prompt.`),d())};return s?y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:"ghost",size:"icon",className:Rt("h-8 w-8",h&&"bg-muted text-primary"),onClick:()=>i("vfs"),"aria-label":"Toggle Virtual File System",children:y.jsx(aD,{className:"h-4 w-4"})})}),y.jsx(ar,{side:"top",children:"Virtual Filesystem"})]})}),l.size>0&&y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsxs(Ht,{variant:"secondary",size:"sm",className:"h-8 animate-fadeIn px-2",onClick:p,"aria-label":`Attach ${l.size} selected VFS file(s)`,children:[y.jsx(oD,{className:"h-4 w-4 mr-1"}),"Attach (",l.size,")"]})}),y.jsx(ar,{side:"top",children:"Attach selected VFS files to prompt"})]})})]}):null},a=()=>{const i=Go(s=>s.vfsKey),o=vn(s=>s.selectedItemType);return y.jsxs("div",{className:"flex flex-col h-full w-[450px] border-l border-border bg-card",children:[y.jsx(wwe,{vfsKey:i,selectedItemType:o}),y.jsx("div",{className:"flex-grow overflow-hidden",children:y.jsx(qT,{})})]})};e({id:"core-vfs-prompt-trigger",show:()=>Go.getState().enableVfs,triggerRenderer:()=>yt.createElement(r),getParameters:void 0,getMetadata:void 0,clearOnSubmit:void 0}),t({id:"core-vfs-panel-trigger",panel:"drawer_right",show:()=>Va.getState().isChatControlPanelOpen.vfs??!1,renderer:()=>yt.createElement(a),status:()=>"ready"}),console.log("[Function] Registered Core VFS Control")}const xwe=()=>{const{linkConversationToRepo:e,syncConversation:t}=vn(Sn(B=>({linkConversationToRepo:B.linkConversationToRepo,syncConversation:B.syncConversation}))),[n,r]=N.useState(()=>vn.getState().selectedItemId),[a,i]=N.useState(()=>vn.getState().selectedItemType),[o,s]=N.useState(()=>vn.getState().syncRepos),[l,u]=N.useState(()=>vn.getState().conversationSyncStatus),[d,h]=N.useState(()=>or.getState().status==="streaming"),[p,g]=N.useState(null),[v,b]=N.useState("idle"),[_,x]=N.useState(!1),[S,E]=N.useState(!1);N.useEffect(()=>{const B=ae=>{r(ae.selectedItemId),i(ae.selectedItemType)},Y=()=>{s(vn.getState().syncRepos)},F=ae=>{u(re=>({...re,[ae.conversationId]:ae.status}))},Z=ae=>{h(ae.status==="streaming")},q=ae=>{ae.conversationId===n&&ae.updates.syncRepoId!==void 0&&g(ae.updates.syncRepoId)},ne=vn.getState();return r(ne.selectedItemId),i(ne.selectedItemType),s(ne.syncRepos),u(ne.conversationSyncStatus),Ct.on(xt.CONTEXT_CHANGED,B),Ct.on(xt.SYNC_REPO_CHANGED,Y),Ct.on(xt.CONVERSATION_SYNC_STATUS_CHANGED,F),Ct.on(xt.INTERACTION_STATUS_CHANGED,Z),Ct.on(xt.CONVERSATION_UPDATED,q),()=>{Ct.off(xt.CONTEXT_CHANGED,B),Ct.off(xt.SYNC_REPO_CHANGED,Y),Ct.off(xt.CONVERSATION_SYNC_STATUS_CHANGED,F),Ct.off(xt.INTERACTION_STATUS_CHANGED,Z),Ct.off(xt.CONVERSATION_UPDATED,q)}},[n]),N.useEffect(()=>{if(a==="conversation"&&n){const B=vn.getState().getConversationById(n);g((B==null?void 0:B.syncRepoId)??null),b(l[n]??"idle")}else g(null),b("idle")},[n,a,l]);const C=yt.useMemo(()=>new Map(o.map(B=>[B.id,B.name])),[o]),k=p?C.get(p):void 0,R=N.useCallback(async B=>{if(!n||a!=="conversation")return;x(!0),await e(n,B==="none"?null:B),x(!1)},[n,a,e]),D=N.useCallback(async()=>{!n||!p||(E(!0),await t(n),E(!1))},[n,p,t]),O=TL(v,k),L=!p||S||_||d||v==="syncing";return a!=="conversation"||o.length===0?null:y.jsxs(dp,{children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(fp,{asChild:!0,children:y.jsx(Ht,{variant:p?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:d||_||S,"aria-label":"Configure Git Sync",children:v==="syncing"||S||_?y.jsx(Vn,{className:"h-4 w-4 animate-spin"}):y.jsx(Hm,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:p?`Sync Status: ${v}`:"Link to Sync Repo"})]})}),y.jsxs(hp,{className:"w-64 p-4 space-y-3",align:"start",children:[y.jsx(cn,{htmlFor:"sync-repo-select",className:"text-sm font-medium",children:"Link to Repository"}),y.jsxs(Ud,{value:p??"none",onValueChange:R,disabled:_||S||d,children:[y.jsx(qd,{id:"sync-repo-select",className:"w-full h-9",children:y.jsx(Hd,{placeholder:"Select repository..."})}),y.jsxs(Vd,{children:[y.jsx(bi,{value:"none",children:y.jsx("span",{className:"text-muted-foreground",children:"None"})}),o.map(B=>y.jsx(bi,{value:B.id,children:B.name},B.id))]})]}),y.jsxs("div",{className:"flex items-center justify-between pt-2",children:[y.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:["Status: ",O||"Not Linked"]}),y.jsxs(Ht,{size:"sm",variant:"outline",onClick:D,disabled:L,className:"h-8",children:[S||v==="syncing"?y.jsx(Vn,{className:"h-4 w-4 mr-1 animate-spin"}):y.jsx(rD,{className:"h-4 w-4 mr-1"}),"Sync Now"]})]})]})]})};function Swe(){const e=Mr.getState().registerPromptControl;e({id:"core-git-sync",triggerRenderer:()=>yt.createElement(xwe)}),console.log("[Function] Registered Core Git Sync Control")}const Ewe=$.object({path:$.string().optional().describe("The directory path to list within the VFS. Defaults to the current directory if omitted.")}),Cwe=$.object({path:$.string().describe("The path of the file to read within the VFS."),encoding:$.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding for reading the file (utf-8 or base64).")}),kwe=$.object({path:$.string().describe("The path where the file should be written."),content:$.string().describe("The content to write to the file."),encoding:$.enum(["utf-8","base64"]).optional().default("utf-8").describe("Encoding of the provided content (utf-8 or base64).")}),Twe=$.object({path:$.string().describe("The path of the file or directory to delete."),recursive:$.boolean().optional().default(!1).describe("Whether to delete directories recursively.")}),Awe=$.object({path:$.string().describe("The path of the directory to create (including parents).")}),Nwe=$.object({oldPath:$.string().describe("The current path of the item to rename."),newName:$.string().describe("The new name for the item.")});function Rwe(){const e=Mr.getState().registerTool;console.log("[Function] Registering Core VFS Tools..."),e("core","vfsListFiles",{description:"List files and directories in a specified VFS path, or the current path if none is given.",parameters:Ewe},async({path:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Zn(s||"/");try{const h=await qk(d,{fsInstance:u});return{success:!0,path:d,entries:h.map(p=>({name:p.name,type:p.isDirectory?"folder":"file",size:p.size,lastModified:p.lastModified.toISOString()}))}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsReadFile",{description:"Read the content of a file from the VFS.",parameters:Cwe},async({path:s,encoding:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Zn(s);try{const p=await Bd(h,{fsInstance:d});let g;return l==="base64"?g=btoa(String.fromCharCode(...p)):g=new TextDecoder().decode(p),{success:!0,path:h,content:g,encoding:l}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsWriteFile",{description:"Write content to a file in the VFS.",parameters:kwe},async({path:s,content:l,encoding:u},d)=>{const h=d==null?void 0:d.fsInstance;if(!h)return{success:!1,error:"Filesystem instance not available in context."};const p=Zn(s);try{let g;if(u==="base64"){const v=atob(l),b=v.length,_=new Uint8Array(b);for(let x=0;x<b;x++)_[x]=v.charCodeAt(x);g=_}else g=l;return await i1(p,g,{fsInstance:h}),{success:!0,path:p}}catch(g){return{success:!1,path:p,error:g.message}}}),e("core","vfsDelete",{description:"Delete a file or directory from the VFS.",parameters:Twe},async({path:s,recursive:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Zn(s);try{return await Vk(h,l,{fsInstance:d}),{success:!0,path:h}}catch(p){return{success:!1,path:h,error:p.message}}}),e("core","vfsCreateDirectory",{description:"Create a directory (including parents) in the VFS.",parameters:Awe},async({path:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Zn(s);try{return await E5(d,{fsInstance:u}),{success:!0,path:d}}catch(h){return{success:!1,path:d,error:h.message}}}),e("core","vfsRename",{description:"Rename a file or directory in the VFS.",parameters:Nwe},async({oldPath:s,newName:l},u)=>{const d=u==null?void 0:u.fsInstance;if(!d)return{success:!1,error:"Filesystem instance not available in context."};const h=Zn(s),p=Zn(h.substring(0,h.lastIndexOf("/"))||"/"),g=Vs(p,l);try{return await k5(h,g,{fsInstance:d}),{success:!0,oldPath:h,newPath:g}}catch(v){return{success:!1,oldPath:h,newName:l,error:v.message}}}),console.log("[Function] Core VFS Tools Registered.")}const Iwe=$.object({path:$.string().describe("The directory path within the VFS to initialize as a Git repository.")}),Owe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to commit."),message:$.string().describe("The commit message.")}),Dwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to pull from."),branch:$.string().optional().describe("The branch name to pull.")}),jwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to push."),branch:$.string().optional().describe("The branch name to push.")}),Mwe=$.object({path:$.string().describe("The directory path of the Git repository within the VFS to check status.")});function Pwe(){const e=Mr.getState().registerTool;console.log("[Function] Registering Core Git Tools..."),e("core","gitInit",{description:"Initialize an empty Git repository in a VFS directory.",parameters:Iwe},async({path:o},s)=>{const l=s==null?void 0:s.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await x5(o,{fsInstance:l}),{success:!0,message:`Repository initialized at ${o}`}}catch(u){return{success:!1,error:u.message}}}),e("core","gitCommit",{description:"Stage all changes and commit them in a VFS Git repository.",parameters:Owe},async({path:o,message:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};const d=Kr.getState();if(!d.gitUserName||!d.gitUserEmail)return{success:!1,error:"Git user name and email not configured in settings. Cannot commit."};try{return await Uk(o,s,{fsInstance:u}),{success:!0,message:`Changes committed in ${o}`}}catch(h){return{success:!1,error:h.message}}}),e("core","gitPull",{description:"Pull changes from the remote repository for the specified branch.",parameters:Dwe},async({path:o,branch:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await a1(o,s||"main",void 0,{fsInstance:u}),{success:!0,message:`Pulled changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitPush",{description:"Push committed changes from the local branch to the remote repository.",parameters:jwe},async({path:o,branch:s},l)=>{const u=l==null?void 0:l.fsInstance;if(!u)return{success:!1,error:"Filesystem instance not available in context."};try{return await Hk(o,s||"main",void 0,{fsInstance:u}),{success:!0,message:`Pushed changes for ${o}`}}catch(d){return{success:!1,error:d.message}}}),e("core","gitStatus",{description:"Get the Git status for a VFS repository.",parameters:Mwe},async({path:o},s)=>{const l=s==null?void 0:s.fsInstance;if(!l)return{success:!1,error:"Filesystem instance not available in context."};try{return await S5(o,{fsInstance:l}),{success:!0,message:`Status checked for ${o}`}}catch(u){return{success:!1,error:u.message}}}),console.log("[Function] Core Git Tools Registered.")}const Fwe=({className:e,enabledTools:t,setEnabledTools:n,localMaxSteps:r,setLocalMaxSteps:a,conversationId:i,conversationType:o})=>{const s=Mr(S=>S.tools),l=Kr(S=>S.toolMaxSteps),[u,d]=N.useState(""),h=N.useMemo(()=>Object.entries(s).map(([S,{definition:E,modId:C}])=>({name:S,description:E.description??"No description provided.",modId:C})).sort((S,E)=>S.name.localeCompare(E.name)),[s]),p=N.useMemo(()=>{const S=u.trim().toLowerCase();return S?h.filter(E=>E.name.toLowerCase().includes(S)||E.description.toLowerCase().includes(S)||E.modId.toLowerCase().includes(S)):h},[h,u]),g=N.useCallback((S,E)=>{n(C=>{const k=new Set(C);return E?k.add(S):k.delete(S),k})},[n]),v=N.useCallback(S=>{n(()=>S?new Set(h.map(E=>E.name)):new Set)},[h,n]),b=S=>{const E=S.target.value;if(E===""){a(null);return}const C=parseInt(E,10);if(isNaN(C))a(null);else{const k=Math.max(1,Math.min(20,C));a(k)}},_=r===null?"":String(r),x=o!=="conversation"||!i;return y.jsxs("div",{className:Rt("p-4 h-[28rem] max-w-2xl space-y-3",e),children:[y.jsx("h4",{className:"text-sm font-medium",children:"Available Tools"}),y.jsxs("div",{className:"relative",children:[y.jsx(Y0,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),y.jsx(Jn,{type:"search",placeholder:"Filter tools...",value:u,onChange:S=>d(S.target.value),className:"pl-8 h-9",disabled:x})]}),y.jsxs("div",{className:"flex justify-between items-center",children:[y.jsxs(cn,{className:"text-xs text-muted-foreground",children:[p.length," tools shown (",t.size," enabled)"]}),y.jsxs("div",{className:"space-x-2",children:[y.jsx(Ht,{variant:"outline",size:"sm",onClick:()=>v(!0),disabled:x||h.length===0,children:"Enable All"}),y.jsx(Ht,{variant:"outline",size:"sm",onClick:()=>v(!1),disabled:x||h.length===0||t.size===0,children:"Disable All"})]})]}),y.jsx(zd,{className:"h-56 border rounded-md p-2 bg-background/50",children:x?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Select a conversation to manage tools."}):h.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools registered."}):p.length===0?y.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No tools match filter."}):y.jsx("div",{className:"space-y-1",children:p.map(S=>y.jsxs("div",{className:"flex items-center justify-between p-1.5 rounded hover:bg-muted",children:[y.jsx(Ls,{id:`tool-switch-${S.name}`,checked:t.has(S.name),onCheckedChange:E=>g(S.name,E),className:"flex-shrink-0",disabled:x}),y.jsxs(cn,{htmlFor:`tool-switch-${S.name}`,className:Rt("text-sm font-normal flex-grow pl-2 space-y-0.5",x?"cursor-not-allowed":"cursor-pointer"),title:`${S.name} (from ${S.modId})`,children:[y.jsx("span",{className:"block font-medium",children:S.name}),y.jsx("span",{className:"block text-xs text-muted-foreground break-words",children:S.description})]})]},S.name))})}),y.jsxs("div",{className:"pt-2",children:[y.jsx(cn,{htmlFor:"local-max-steps",className:"text-xs font-medium",children:"Max Tool Steps (This Turn)"}),y.jsx(Jn,{id:"local-max-steps",type:"number",min:"1",max:"20",step:"1",value:_,onChange:b,className:"w-20 h-8 text-xs mt-1",placeholder:String(l??5),disabled:x}),y.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Overrides the global setting for the next message only (1-20). Leave blank to use default."})]})]})};let Wc=new Set,Ol=null,jm=()=>{};const Lwe=()=>{const[e,t]=N.useState({enabledTools:Wc,maxStepsOverride:Ol}),[n,r]=N.useState(e.maxStepsOverride),[a,i]=N.useState(!1),[o,s]=N.useState(()=>or.getState().status==="streaming"),[l,u]=N.useState(!0),[d,h]=N.useState(()=>vn.getState().selectedItemType),[p,g]=N.useState(()=>vn.getState().selectedItemId),v=Object.keys(Mr.getState().tools).length;N.useEffect(()=>(jm=E=>{const C=E({enabledTools:Wc,maxStepsOverride:Ol});Wc=C.enabledTools,Ol=C.maxStepsOverride,t(C)},t({enabledTools:Wc,maxStepsOverride:Ol}),()=>{jm=()=>{}}),[]),N.useEffect(()=>{r(e.maxStepsOverride)},[e.maxStepsOverride]),N.useEffect(()=>{const E=R=>{s(R.status==="streaming")},C=R=>{var B,Y;if(!R.modelId){u(!1);return}const{getSelectedModel:D}=Bn.getState(),O=D(),L=Object.keys(Mr.getState().tools).length>0;u(L&&(((Y=(B=O==null?void 0:O.metadata)==null?void 0:B.supported_parameters)==null?void 0:Y.includes("tools"))??!1))},k=R=>{h(R.selectedItemType),g(R.selectedItemId)};return C({modelId:Bn.getState().selectedModelId}),k({selectedItemId:vn.getState().selectedItemId,selectedItemType:vn.getState().selectedItemType}),Ct.on(xt.INTERACTION_STATUS_CHANGED,E),Ct.on(xt.MODEL_SELECTION_CHANGED,C),Ct.on(xt.CONTEXT_CHANGED,k),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,E),Ct.off(xt.MODEL_SELECTION_CHANGED,C),Ct.off(xt.CONTEXT_CHANGED,k)}},[]);const b=E=>{i(E),!E&&n!==e.maxStepsOverride&&jm(C=>({...C,maxStepsOverride:n}))},_=N.useCallback(E=>{jm(C=>({...C,enabledTools:E(C.enabledTools)}))},[]),x=e.enabledTools.size>0||e.maxStepsOverride!==null,S=o||v===0||d!=="conversation";return l?y.jsxs(dp,{open:a,onOpenChange:b,children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(fp,{asChild:!0,children:y.jsx(Ht,{variant:x?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:S,"aria-label":"Configure Tools",children:y.jsx(iq,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:S?"Tools unavailable (select conversation)":`Tools (${e.enabledTools.size} enabled)`})]})}),y.jsx(hp,{className:"w-auto p-0",align:"start",children:y.jsx(Fwe,{enabledTools:e.enabledTools,setEnabledTools:_,localMaxSteps:n,setLocalMaxSteps:r,conversationId:p,conversationType:d})})]}):null};function $we(){const e=Mr.getState().registerPromptControl;Wc=new Set,Ol=null,e({id:"core-tool-selector",triggerRenderer:()=>yt.createElement(Lwe),getMetadata:()=>{if(Wc.size>0||Ol!==null)return{enabledTools:Array.from(Wc),...Ol!==null&&{maxSteps:Ol}}},clearOnSubmit:()=>{Wc=new Set,Ol=null,jm(()=>({enabledTools:new Set,maxStepsOverride:null}))}}),console.log("[Function] Registered Core Tool Selector Control")}var N6=1,Bwe=.9,zwe=.8,Uwe=.17,UE=.1,HE=.999,Hwe=.9999,qwe=.99,Vwe=/[\\\/_+.#"@\[\(\{&]/,Gwe=/[\\\/_+.#"@\[\(\{&]/g,Wwe=/[\s-]/,LB=/[\s-]/g;function mC(e,t,n,r,a,i,o){if(i===t.length)return a===e.length?N6:qwe;var s=`${a},${i}`;if(o[s]!==void 0)return o[s];for(var l=r.charAt(i),u=n.indexOf(l,a),d=0,h,p,g,v;u>=0;)h=mC(e,t,n,r,u+1,i+1,o),h>d&&(u===a?h*=N6:Vwe.test(e.charAt(u-1))?(h*=zwe,g=e.slice(a,u-1).match(Gwe),g&&a>0&&(h*=Math.pow(HE,g.length))):Wwe.test(e.charAt(u-1))?(h*=Bwe,v=e.slice(a,u-1).match(LB),v&&a>0&&(h*=Math.pow(HE,v.length))):(h*=Uwe,a>0&&(h*=Math.pow(HE,u-a))),e.charAt(u)!==t.charAt(i)&&(h*=Hwe)),(h<UE&&n.charAt(u-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&n.charAt(u-1)!==r.charAt(i))&&(p=mC(e,t,n,r,u+1,i+2,o),p*UE>h&&(h=p*UE)),h>d&&(d=h),u=n.indexOf(l,u+1);return o[s]=d,d}function R6(e){return e.toLowerCase().replace(LB," ")}function Kwe(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,mC(e,t,R6(e),R6(t),0,0,{})}var Nm='[cmdk-group=""]',qE='[cmdk-group-items=""]',Zwe='[cmdk-group-heading=""]',$B='[cmdk-item=""]',I6=`${$B}:not([aria-disabled="true"])`,gC="cmdk-item-select",Kf="data-value",Ywe=(e,t,n)=>Kwe(e,t,n),BB=N.createContext(void 0),qg=()=>N.useContext(BB),zB=N.createContext(void 0),VT=()=>N.useContext(zB),UB=N.createContext(void 0),HB=N.forwardRef((e,t)=>{let n=Zf(()=>{var X,de;return{search:"",value:(de=(X=e.value)!=null?X:e.defaultValue)!=null?de:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Zf(()=>new Set),a=Zf(()=>new Map),i=Zf(()=>new Map),o=Zf(()=>new Set),s=qB(e),{label:l,children:u,value:d,onValueChange:h,filter:p,shouldFilter:g,loop:v,disablePointerSelection:b=!1,vimBindings:_=!0,...x}=e,S=ni(),E=ni(),C=ni(),k=N.useRef(null),R=s1e();Ed(()=>{if(d!==void 0){let X=d.trim();n.current.value=X,D.emit()}},[d]),Ed(()=>{R(6,Z)},[]);let D=N.useMemo(()=>({subscribe:X=>(o.current.add(X),()=>o.current.delete(X)),snapshot:()=>n.current,setState:(X,de,be)=>{var _e,Pe,Ne,Re;if(!Object.is(n.current[X],de)){if(n.current[X]=de,X==="search")F(),B(),R(1,Y);else if(X==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Ce=document.getElementById(C);Ce?Ce.focus():(_e=document.getElementById(S))==null||_e.focus()}if(R(7,()=>{var Ce;n.current.selectedItemId=(Ce=q())==null?void 0:Ce.id,D.emit()}),be||R(5,Z),((Pe=s.current)==null?void 0:Pe.value)!==void 0){let Ce=de??"";(Re=(Ne=s.current).onValueChange)==null||Re.call(Ne,Ce);return}}D.emit()}},emit:()=>{o.current.forEach(X=>X())}}),[]),O=N.useMemo(()=>({value:(X,de,be)=>{var _e;de!==((_e=i.current.get(X))==null?void 0:_e.value)&&(i.current.set(X,{value:de,keywords:be}),n.current.filtered.items.set(X,L(de,be)),R(2,()=>{B(),D.emit()}))},item:(X,de)=>(r.current.add(X),de&&(a.current.has(de)?a.current.get(de).add(X):a.current.set(de,new Set([X]))),R(3,()=>{F(),B(),n.current.value||Y(),D.emit()}),()=>{i.current.delete(X),r.current.delete(X),n.current.filtered.items.delete(X);let be=q();R(4,()=>{F(),(be==null?void 0:be.getAttribute("id"))===X&&Y(),D.emit()})}),group:X=>(a.current.has(X)||a.current.set(X,new Set),()=>{i.current.delete(X),a.current.delete(X)}),filter:()=>s.current.shouldFilter,label:l||e["aria-label"],getDisablePointerSelection:()=>s.current.disablePointerSelection,listId:S,inputId:C,labelId:E,listInnerRef:k}),[]);function L(X,de){var be,_e;let Pe=(_e=(be=s.current)==null?void 0:be.filter)!=null?_e:Ywe;return X?Pe(X,n.current.search,de):0}function B(){if(!n.current.search||s.current.shouldFilter===!1)return;let X=n.current.filtered.items,de=[];n.current.filtered.groups.forEach(_e=>{let Pe=a.current.get(_e),Ne=0;Pe.forEach(Re=>{let Ce=X.get(Re);Ne=Math.max(Ce,Ne)}),de.push([_e,Ne])});let be=k.current;ne().sort((_e,Pe)=>{var Ne,Re;let Ce=_e.getAttribute("id"),Fe=Pe.getAttribute("id");return((Ne=X.get(Fe))!=null?Ne:0)-((Re=X.get(Ce))!=null?Re:0)}).forEach(_e=>{let Pe=_e.closest(qE);Pe?Pe.appendChild(_e.parentElement===Pe?_e:_e.closest(`${qE} > *`)):be.appendChild(_e.parentElement===be?_e:_e.closest(`${qE} > *`))}),de.sort((_e,Pe)=>Pe[1]-_e[1]).forEach(_e=>{var Pe;let Ne=(Pe=k.current)==null?void 0:Pe.querySelector(`${Nm}[${Kf}="${encodeURIComponent(_e[0])}"]`);Ne==null||Ne.parentElement.appendChild(Ne)})}function Y(){let X=ne().find(be=>be.getAttribute("aria-disabled")!=="true"),de=X==null?void 0:X.getAttribute(Kf);D.setState("value",de||void 0)}function F(){var X,de,be,_e;if(!n.current.search||s.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let Pe=0;for(let Ne of r.current){let Re=(de=(X=i.current.get(Ne))==null?void 0:X.value)!=null?de:"",Ce=(_e=(be=i.current.get(Ne))==null?void 0:be.keywords)!=null?_e:[],Fe=L(Re,Ce);n.current.filtered.items.set(Ne,Fe),Fe>0&&Pe++}for(let[Ne,Re]of a.current)for(let Ce of Re)if(n.current.filtered.items.get(Ce)>0){n.current.filtered.groups.add(Ne);break}n.current.filtered.count=Pe}function Z(){var X,de,be;let _e=q();_e&&(((X=_e.parentElement)==null?void 0:X.firstChild)===_e&&((be=(de=_e.closest(Nm))==null?void 0:de.querySelector(Zwe))==null||be.scrollIntoView({block:"nearest"})),_e.scrollIntoView({block:"nearest"}))}function q(){var X;return(X=k.current)==null?void 0:X.querySelector(`${$B}[aria-selected="true"]`)}function ne(){var X;return Array.from(((X=k.current)==null?void 0:X.querySelectorAll(I6))||[])}function ae(X){let de=ne()[X];de&&D.setState("value",de.getAttribute(Kf))}function re(X){var de;let be=q(),_e=ne(),Pe=_e.findIndex(Re=>Re===be),Ne=_e[Pe+X];(de=s.current)!=null&&de.loop&&(Ne=Pe+X<0?_e[_e.length-1]:Pe+X===_e.length?_e[0]:_e[Pe+X]),Ne&&D.setState("value",Ne.getAttribute(Kf))}function ee(X){let de=q(),be=de==null?void 0:de.closest(Nm),_e;for(;be&&!_e;)be=X>0?i1e(be,Nm):o1e(be,Nm),_e=be==null?void 0:be.querySelector(I6);_e?D.setState("value",_e.getAttribute(Kf)):re(X)}let ie=()=>ae(ne().length-1),U=X=>{X.preventDefault(),X.metaKey?ie():X.altKey?ee(1):re(1)},Q=X=>{X.preventDefault(),X.metaKey?ae(0):X.altKey?ee(-1):re(-1)};return N.createElement(tn.div,{ref:t,tabIndex:-1,...x,"cmdk-root":"",onKeyDown:X=>{var de;(de=x.onKeyDown)==null||de.call(x,X);let be=X.nativeEvent.isComposing||X.keyCode===229;if(!(X.defaultPrevented||be))switch(X.key){case"n":case"j":{_&&X.ctrlKey&&U(X);break}case"ArrowDown":{U(X);break}case"p":case"k":{_&&X.ctrlKey&&Q(X);break}case"ArrowUp":{Q(X);break}case"Home":{X.preventDefault(),ae(0);break}case"End":{X.preventDefault(),ie();break}case"Enter":{X.preventDefault();let _e=q();if(_e){let Pe=new Event(gC);_e.dispatchEvent(Pe)}}}}},N.createElement("label",{"cmdk-label":"",htmlFor:O.inputId,id:O.labelId,style:c1e},l),B1(e,X=>N.createElement(zB.Provider,{value:D},N.createElement(BB.Provider,{value:O},X))))}),Xwe=N.forwardRef((e,t)=>{var n,r;let a=ni(),i=N.useRef(null),o=N.useContext(UB),s=qg(),l=qB(e),u=(r=(n=l.current)==null?void 0:n.forceMount)!=null?r:o==null?void 0:o.forceMount;Ed(()=>{if(!u)return s.item(a,o==null?void 0:o.id)},[u]);let d=VB(a,i,[e.value,e.children,i],e.keywords),h=VT(),p=mu(R=>R.value&&R.value===d.current),g=mu(R=>u||s.filter()===!1?!0:R.search?R.filtered.items.get(a)>0:!0);N.useEffect(()=>{let R=i.current;if(!(!R||e.disabled))return R.addEventListener(gC,v),()=>R.removeEventListener(gC,v)},[g,e.onSelect,e.disabled]);function v(){var R,D;b(),(D=(R=l.current).onSelect)==null||D.call(R,d.current)}function b(){h.setState("value",d.current,!0)}if(!g)return null;let{disabled:_,value:x,onSelect:S,forceMount:E,keywords:C,...k}=e;return N.createElement(tn.div,{ref:Zc(i,t),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!p,"data-disabled":!!_,"data-selected":!!p,onPointerMove:_||s.getDisablePointerSelection()?void 0:b,onClick:_?void 0:v},e.children)}),Jwe=N.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...i}=e,o=ni(),s=N.useRef(null),l=N.useRef(null),u=ni(),d=qg(),h=mu(g=>a||d.filter()===!1?!0:g.search?g.filtered.groups.has(o):!0);Ed(()=>d.group(o),[]),VB(o,s,[e.value,e.heading,l]);let p=N.useMemo(()=>({id:o,forceMount:a}),[a]);return N.createElement(tn.div,{ref:Zc(s,t),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},n&&N.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),B1(e,g=>N.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},N.createElement(UB.Provider,{value:p},g))))}),Qwe=N.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=N.useRef(null),i=mu(o=>!o.search);return!n&&!i?null:N.createElement(tn.div,{ref:Zc(a,t),...r,"cmdk-separator":"",role:"separator"})}),e1e=N.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=e.value!=null,i=VT(),o=mu(u=>u.search),s=mu(u=>u.selectedItemId),l=qg();return N.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),N.createElement(tn.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":s,id:l.inputId,type:"text",value:a?e.value:o,onChange:u=>{a||i.setState("search",u.target.value),n==null||n(u.target.value)}})}),t1e=N.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,i=N.useRef(null),o=N.useRef(null),s=mu(u=>u.selectedItemId),l=qg();return N.useEffect(()=>{if(o.current&&i.current){let u=o.current,d=i.current,h,p=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=u.offsetHeight;d.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(h),p.unobserve(u)}}},[]),N.createElement(tn.div,{ref:Zc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":s,"aria-label":r,id:l.listId},B1(e,u=>N.createElement("div",{ref:Zc(o,l.listInnerRef),"cmdk-list-sizer":""},u)))}),n1e=N.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:i,container:o,...s}=e;return N.createElement(JL,{open:n,onOpenChange:r},N.createElement(QL,{container:o},N.createElement(e$,{"cmdk-overlay":"",className:a}),N.createElement(t$,{"aria-label":e.label,"cmdk-dialog":"",className:i},N.createElement(HB,{ref:t,...s}))))}),r1e=N.forwardRef((e,t)=>mu(n=>n.filtered.count===0)?N.createElement(tn.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),a1e=N.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...i}=e;return N.createElement(tn.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},B1(e,o=>N.createElement("div",{"aria-hidden":!0},o)))}),pp=Object.assign(HB,{List:t1e,Item:Xwe,Input:e1e,Group:Jwe,Separator:Qwe,Dialog:n1e,Empty:r1e,Loading:a1e});function i1e(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function o1e(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function qB(e){let t=N.useRef(e);return Ed(()=>{t.current=e}),t}var Ed=typeof window>"u"?N.useEffect:N.useLayoutEffect;function Zf(e){let t=N.useRef();return t.current===void 0&&(t.current=e()),t}function mu(e){let t=VT(),n=()=>e(t.snapshot());return N.useSyncExternalStore(t.subscribe,n,n)}function VB(e,t,n,r=[]){let a=N.useRef(),i=qg();return Ed(()=>{var o;let s=(()=>{var u;for(let d of n){if(typeof d=="string")return d.trim();if(typeof d=="object"&&"current"in d)return d.current?(u=d.current.textContent)==null?void 0:u.trim():a.current}})(),l=r.map(u=>u.trim());i.value(e,s,l),(o=t.current)==null||o.setAttribute(Kf,s),a.current=s}),a}var s1e=()=>{let[e,t]=N.useState(),n=Zf(()=>new Map);return Ed(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,a)=>{n.current.set(r,a),t({})}};function l1e(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function B1({asChild:e,children:t},n){return e&&N.isValidElement(t)?N.cloneElement(l1e(t),{ref:t.ref},n(t.props.children)):n(t)}var c1e={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function u1e({className:e,...t}){return y.jsx(pp,{"data-slot":"command",className:Rt("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function d1e({className:e,...t}){return y.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[y.jsx(Y0,{className:"size-4 shrink-0 opacity-50"}),y.jsx(pp.Input,{"data-slot":"command-input",className:Rt("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function f1e({className:e,...t}){return y.jsx(pp.List,{"data-slot":"command-list",className:Rt("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function h1e({...e}){return y.jsx(pp.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function p1e({className:e,...t}){return y.jsx(pp.Group,{"data-slot":"command-group",className:Rt("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function m1e({className:e,...t}){return y.jsx(pp.Item,{"data-slot":"command-item",className:Rt("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}const GT=yt.memo(({value:e,onChange:t,disabled:n=!1,className:r})=>{const[a,i]=N.useState(!1),[o,s]=N.useState(""),{dbProviderConfigs:l,globalModelSortOrder:u,isLoading:d}=Bn(Sn(b=>({dbProviderConfigs:b.dbProviderConfigs,globalModelSortOrder:b.globalModelSortOrder,isLoading:b.isLoading}))),h=N.useMemo(()=>{const b=new Map,_=new Set;l.forEach(E=>{if(!E.isEnabled||!E.enabledModels)return;const C=E.fetchedModels??(E.type?Bn.getState().getAllAvailableModelDefsForProvider(E.id):[]),k=new Map(C.map(R=>[R.id,R]));E.enabledModels.forEach(R=>{const D=Hc(E.id,R),O=k.get(R);O&&(_.add(D),b.set(D,{name:O.name||R,providerName:E.name}))})});const x=[],S=new Set;return u.forEach(E=>{if(_.has(E)){const C=b.get(E);C&&!S.has(E)&&(x.push({id:E,...C}),S.add(E))}}),_.forEach(E=>{if(!S.has(E)){const C=b.get(E);C&&x.push({id:E,...C})}}),x},[l,u]),p=N.useMemo(()=>{if(!o.trim())return h;const b=o.toLowerCase();return h.filter(_=>_.name.toLowerCase().includes(b)||_.providerName.toLowerCase().includes(b)||_.id.toLowerCase().includes(b))},[h,o]),g=N.useMemo(()=>h.find(b=>b.id===e),[h,e]),v=N.useCallback(b=>{t(b===e?null:b),i(!1),s("")},[t,e]);return d?y.jsx(Qr,{className:Rt("h-9 w-[250px]",r)}):y.jsxs(dp,{open:a,onOpenChange:i,children:[y.jsx(fp,{asChild:!0,children:y.jsxs(Ht,{variant:"outline",role:"combobox","aria-expanded":a,disabled:n||h.length===0,className:Rt("w-auto justify-between h-9 text-sm font-normal",r),children:[y.jsx("span",{className:"truncate max-w-[200px] sm:max-w-[300px]",children:g?`${g.name} (${g.providerName})`:"Select Model..."}),y.jsx(wC,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),y.jsx(hp,{className:"w-[--radix-popover-trigger-width] max-h-[--radix-popover-content-available-height] p-0",children:y.jsxs(u1e,{shouldFilter:!1,children:[" ",y.jsx(d1e,{placeholder:"Search model...",value:o,onValueChange:s}),y.jsxs(f1e,{children:[y.jsx(h1e,{children:"No model found."}),y.jsx(p1e,{children:p.map(b=>y.jsxs(m1e,{value:b.id,onSelect:v,children:[y.jsx(Ws,{className:Rt("mr-2 h-4 w-4",e===b.id?"opacity-100":"opacity-0")}),y.jsxs("span",{className:"truncate",children:[b.name," (",b.providerName,")"]})]},b.id))})]})]})})]})});GT.displayName="GlobalModelSelector";const g1e=({systemPrompt:e,setSystemPrompt:t,modelId:n,setModelId:r,effectiveSystemPrompt:a,effectiveModelId:i,isSaving:o})=>y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"project-system-prompt",children:"System Prompt (Overrides Parent/Global)"}),y.jsx(ap,{id:"project-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,100))||"Default"}${a&&a.length>100?"...":""}`,value:e??"",onChange:s=>t(s.target.value||null),rows:6,disabled:o,className:"mt-1"}),y.jsx(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:o||e===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{children:[y.jsx(cn,{children:"Default Model (Overrides Parent/Global)"}),y.jsx(GT,{value:n??i,onChange:r,disabled:o}),y.jsx(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>r(null),disabled:o||n===null,children:"Use Inherited/Default"})]})]}),y1e=({temperature:e,setTemperature:t,maxTokens:n,setMaxTokens:r,topP:a,setTopP:i,topK:o,setTopK:s,presencePenalty:l,setPresencePenalty:u,frequencyPenalty:d,setFrequencyPenalty:h,localTemp:p,setLocalTemp:g,localTopP:v,setLocalTopP:b,localPresence:_,setLocalPresence:x,localFrequency:S,setLocalFrequency:E,effectiveTemperature:C,effectiveMaxTokens:k,effectiveTopP:R,effectiveTopK:D,effectivePresencePenalty:O,effectiveFrequencyPenalty:L,isSaving:B})=>{const Y=N.useCallback((Z,q)=>{const ne=q.target.value,ae=ne===""?null:parseInt(ne,10);(ne===""||!isNaN(ae)&&ae!==null)&&Z(ae)},[]),F=N.useCallback((Z,q)=>{Z(q[0])},[]);return y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"project-temperature",className:"text-xs",children:["Temperature (",p.toFixed(2),")"]}),y.jsx(jl,{id:"project-temperature",min:0,max:1,step:.01,value:[p],onValueChange:Z=>g(Z[0]),onValueCommit:Z=>F(t,Z),disabled:B}),y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>t(null),disabled:B||e===null,children:["Use Inherited/Default (",(C==null?void 0:C.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"project-top-p",className:"text-xs",children:["Top P (",v.toFixed(2),")"]}),y.jsx(jl,{id:"project-top-p",min:0,max:1,step:.01,value:[v],onValueChange:Z=>b(Z[0]),onValueCommit:Z=>F(i,Z),disabled:B}),y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>i(null),disabled:B||a===null,children:["Use Inherited/Default (",(R==null?void 0:R.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-4 items-end",children:[y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(cn,{htmlFor:"project-max-tokens",className:"text-xs",children:"Max Tokens"}),y.jsx(Jn,{id:"project-max-tokens",type:"number",placeholder:`Inherited: ${k??"Default"}`,value:n??"",onChange:Z=>Y(r,Z),min:"1",className:"h-8 text-xs",disabled:B}),y.jsx(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>r(null),disabled:B||n===null,children:"Use Inherited/Default"})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsx(cn,{htmlFor:"project-top-k",className:"text-xs",children:"Top K"}),y.jsx(Jn,{id:"project-top-k",type:"number",placeholder:`Inherited: ${D??"Default"}`,value:o??"",onChange:Z=>Y(s,Z),min:"1",className:"h-8 text-xs",disabled:B}),y.jsx(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>s(null),disabled:B||o===null,children:"Use Inherited/Default"})]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"project-presence-penalty",className:"text-xs",children:["Presence Penalty (",_.toFixed(2),")"]}),y.jsx(jl,{id:"project-presence-penalty",min:-2,max:2,step:.01,value:[_],onValueChange:Z=>x(Z[0]),onValueCommit:Z=>F(u,Z),disabled:B}),y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>u(null),disabled:B||l===null,children:["Use Inherited/Default (",(O==null?void 0:O.toFixed(2))??"N/A",")"]})]}),y.jsxs("div",{className:"space-y-1.5",children:[y.jsxs(cn,{htmlFor:"project-frequency-penalty",className:"text-xs",children:["Frequency Penalty (",S.toFixed(2),")"]}),y.jsx(jl,{id:"project-frequency-penalty",min:-2,max:2,step:.01,value:[S],onValueChange:Z=>E(Z[0]),onValueCommit:Z=>F(h,Z),disabled:B}),y.jsxs(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 text-muted-foreground",onClick:()=>h(null),disabled:B||d===null,children:["Use Inherited/Default (",(L==null?void 0:L.toFixed(2))??"N/A",")"]})]})]})},b1e=({syncRepoId:e,setSyncRepoId:t,effectiveSyncRepoId:n,syncRepos:r,isSaving:a})=>{var o;const i=((o=r.find(s=>s.id===n))==null?void 0:o.name)??"None";return y.jsx("div",{className:"space-y-4",children:y.jsxs("div",{children:[y.jsx(cn,{htmlFor:"project-sync-repo",children:"Sync Repository (Overrides Parent/Global)"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Link this project to a sync repository. All new conversations created within this project will automatically inherit this link."}),y.jsxs(Ud,{value:e??"none",onValueChange:s=>t(s==="none"?null:s),disabled:a||r.length===0,children:[y.jsx(qd,{id:"project-sync-repo",children:y.jsx(Hd,{placeholder:r.length===0?"No sync repos configured":`Inherited: ${i}`})}),y.jsxs(Vd,{children:[y.jsx(bi,{value:"none",children:y.jsxs("span",{className:"text-muted-foreground",children:["Use Inherited/Default (",i,")"]})}),r.map(s=>y.jsx(bi,{value:s.id,children:s.name},s.id))]})]}),y.jsx(Ht,{variant:"link",size:"sm",className:"text-xs h-auto p-0 mt-1 text-muted-foreground",onClick:()=>t(null),disabled:a||e===null,children:"Use Inherited/Default"})]})})},v1e=({projectId:e,projectName:t,isSaving:n})=>{const r=()=>{lt.info(`VFS clearing for project "${t}" is not yet implemented.`)},a=N.useMemo(()=>[{value:"manage",label:"Manage Files",content:y.jsx("div",{className:"flex-grow border rounded-md overflow-hidden h-full",children:e?y.jsx(qT,{}):y.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Invalid Project ID. Cannot load filesystem."})})},{value:"settings",label:"Settings & Danger Zone",content:y.jsxs("div",{className:"space-y-4",children:[y.jsxs("div",{children:[y.jsx(cn,{children:"Project Filesystem Info"}),y.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Each project has its own dedicated Virtual File System (VFS)."}),y.jsx("div",{className:"p-3 border rounded bg-muted/30 text-sm mb-2",children:y.jsxs("p",{children:[y.jsx("span",{className:"font-medium",children:"Project ID (VFS Key):"})," ",y.jsx("code",{className:"text-xs",children:e||"N/A"})]})})]}),y.jsxs("div",{className:"border-t pt-4 border-destructive/50 mt-4 flex-shrink-0",children:[y.jsx(cn,{className:"text-destructive",children:"Danger Zone"}),y.jsx("p",{className:"text-xs text-destructive/90 mb-2",children:"Clearing the VFS will permanently delete all files stored specifically for this project. This cannot be undone."}),y.jsxs(Ht,{variant:"destructive",size:"sm",onClick:r,disabled:n||!e,children:[y.jsx(lh,{className:"h-4 w-4 mr-1"}),"Clear Project VFS (Not Implemented)"]})]})]})}],[e,t,n]);return y.jsx(sp,{tabs:a,defaultValue:"manage",className:"h-full",listClassName:"bg-muted/50 rounded-md",contentContainerClassName:"mt-3 flex-grow flex flex-col"})},w1e=({isOpen:e,onClose:t,projectId:n})=>{const{getProjectById:r,updateProject:a}=yi(Sn(Fe=>({getProjectById:Fe.getProjectById,updateProject:Fe.updateProject}))),i=yi(Fe=>Fe.getEffectiveProjectSettings),o=vn(Fe=>Fe.syncRepos),s=Kr(Sn(Fe=>({globalSystemPrompt:Fe.globalSystemPrompt,temperature:Fe.temperature,maxTokens:Fe.maxTokens,topP:Fe.topP,topK:Fe.topK,presencePenalty:Fe.presencePenalty,frequencyPenalty:Fe.frequencyPenalty}))),l=Bn(Fe=>Fe.selectedModelId),u=Go(Fe=>Fe.setVfsKey),[d,h]=N.useState(null),[p,g]=N.useState(null),[v,b]=N.useState(null),[_,x]=N.useState(null),[S,E]=N.useState(null),[C,k]=N.useState(null),[R,D]=N.useState(null),[O,L]=N.useState(null),[B,Y]=N.useState(null),[F,Z]=N.useState(.7),[q,ne]=N.useState(1),[ae,re]=N.useState(0),[ee,ie]=N.useState(0),[U,Q]=N.useState(!1),[X,de]=N.useState("prompt"),{project:be,effectiveSettings:_e}=N.useMemo(()=>{const Fe=n?r(n):null,Qe=n?i(n):null;return{project:Fe,effectiveSettings:Qe}},[n,r,i]),Pe=N.useCallback(Fe=>{var Le;if(!Fe)return null;const Qe=r(Fe);return Qe?((Le=Qe.metadata)==null?void 0:Le.syncRepoId)!==void 0?Qe.metadata.syncRepoId:Pe(Qe.parentId):null},[r]),Ne=n?Pe(n):null;N.useEffect(()=>{var Fe;e&&n&&be&&_e?(u(n),h(be.systemPrompt??null),g(be.modelId??null),b(be.temperature??null),x(be.maxTokens??null),E(be.topP??null),k(be.topK??null),D(be.presencePenalty??null),L(be.frequencyPenalty??null),Y(((Fe=be.metadata)==null?void 0:Fe.syncRepoId)??null),Z(_e.temperature??s.temperature),ne(_e.topP??s.topP??1),re(_e.presencePenalty??s.presencePenalty??0),ie(_e.frequencyPenalty??s.frequencyPenalty??0),de("prompt")):e||(u(null),h(null),g(null),b(null),x(null),E(null),k(null),D(null),L(null),Y(null))},[e,n,be,_e,s,u]),N.useEffect(()=>Z(v??(_e==null?void 0:_e.temperature)??s.temperature),[v,_e,s.temperature]),N.useEffect(()=>ne(S??(_e==null?void 0:_e.topP)??s.topP??1),[S,_e,s.topP]),N.useEffect(()=>re(R??(_e==null?void 0:_e.presencePenalty)??s.presencePenalty??0),[R,_e,s.presencePenalty]),N.useEffect(()=>ie(O??(_e==null?void 0:_e.frequencyPenalty)??s.frequencyPenalty??0),[O,_e,s.frequencyPenalty]);const Re=async()=>{if(!(!n||!be)){Q(!0);try{const Fe=be.parentId?i(be.parentId):{systemPrompt:s.globalSystemPrompt,modelId:l,temperature:s.temperature,maxTokens:s.maxTokens,topP:s.topP,topK:s.topK,presencePenalty:s.presencePenalty,frequencyPenalty:s.frequencyPenalty},Qe=be.parentId?Pe(be.parentId):null,Le={},Ie={...be.metadata??{}};d!==Fe.systemPrompt?Le.systemPrompt=d:Le.systemPrompt=void 0,p!==Fe.modelId?Le.modelId=p:Le.modelId=void 0,v!==Fe.temperature?Le.temperature=v:Le.temperature=void 0,_!==Fe.maxTokens?Le.maxTokens=_:Le.maxTokens=void 0,S!==Fe.topP?Le.topP=S:Le.topP=void 0,C!==Fe.topK?Le.topK=C:Le.topK=void 0,R!==Fe.presencePenalty?Le.presencePenalty=R:Le.presencePenalty=void 0,O!==Fe.frequencyPenalty?Le.frequencyPenalty=O:Le.frequencyPenalty=void 0,B!==Qe?Ie.syncRepoId=B:delete Ie.syncRepoId,Le.metadata=Ie,await a(n,Le),lt.success(`Project "${be.name}" settings updated.`),t()}catch(Fe){lt.error("Failed to save project settings."),console.error("Failed to save project settings:",Fe)}finally{Q(!1)}}},Ce=N.useMemo(()=>[{value:"prompt",label:"Prompt & Model",content:y.jsx(g1e,{systemPrompt:d,setSystemPrompt:h,modelId:p,setModelId:g,effectiveSystemPrompt:(_e==null?void 0:_e.systemPrompt)??s.globalSystemPrompt,effectiveModelId:(_e==null?void 0:_e.modelId)??l,isSaving:U})},{value:"params",label:"Parameters",content:y.jsx(y1e,{temperature:v,setTemperature:b,maxTokens:_,setMaxTokens:x,topP:S,setTopP:E,topK:C,setTopK:k,presencePenalty:R,setPresencePenalty:D,frequencyPenalty:O,setFrequencyPenalty:L,localTemp:F,setLocalTemp:Z,localTopP:q,setLocalTopP:ne,localPresence:ae,setLocalPresence:re,localFrequency:ee,setLocalFrequency:ie,effectiveTemperature:(_e==null?void 0:_e.temperature)??s.temperature,effectiveMaxTokens:(_e==null?void 0:_e.maxTokens)??s.maxTokens,effectiveTopP:(_e==null?void 0:_e.topP)??s.topP,effectiveTopK:(_e==null?void 0:_e.topK)??s.topK,effectivePresencePenalty:(_e==null?void 0:_e.presencePenalty)??s.presencePenalty,effectiveFrequencyPenalty:(_e==null?void 0:_e.frequencyPenalty)??s.frequencyPenalty,isSaving:U})},{value:"sync",label:"Sync",content:y.jsx(b1e,{syncRepoId:B,setSyncRepoId:Y,effectiveSyncRepoId:Ne,syncRepos:o,isSaving:U})},{value:"vfs",label:"Filesystem",content:y.jsx(v1e,{projectId:n,projectName:(be==null?void 0:be.name)??null,isSaving:U})}],[d,p,v,_,S,C,R,O,B,_e,s,l,U,F,q,ae,ee,Ne,o,n,be==null?void 0:be.name]);return y.jsx(yT,{open:e,onOpenChange:t,children:y.jsxs(bT,{className:"sm:max-w-[800px] w-[90vw] h-[70vh] min-h-[500px] max-h-[80vh] flex flex-col p-0",children:[y.jsxs(vT,{className:"p-6 pb-4 flex-shrink-0",children:[y.jsxs(_T,{children:["Project Settings: ",be==null?void 0:be.name]}),y.jsx(xT,{children:"Configure default settings for this project. Settings inherit from parent projects or global defaults if not set here."})]}),y.jsx(sp,{tabs:Ce,initialValue:X,onValueChange:de,className:"flex-grow overflow-hidden px-6",listClassName:"-mx-6 px-6",contentContainerClassName:"pb-6 pr-2 -mr-2"}),y.jsxs(wT,{className:"flex-shrink-0 border-t p-6 pt-4 mt-auto",children:[y.jsx(Ht,{variant:"outline",onClick:t,disabled:U,children:"Cancel"}),y.jsxs(Ht,{onClick:Re,disabled:U,children:[U&&y.jsx(Vn,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Project Settings"]})]})]})})};function _1e(){const e=Mr.getState().registerChatControl,t=()=>{const{isProjectSettingsModalOpen:n,projectSettingsModalTargetId:r,closeProjectSettingsModal:a}=Va.getState();return y.jsx(w1e,{isOpen:n,onClose:a,projectId:r})};e({id:"core-project-settings-trigger",renderer:void 0,iconRenderer:void 0,panel:void 0,show:()=>!1,settingsRenderer:()=>yt.createElement(t),status:()=>"ready"}),console.log("[Function] Registered Core Project Settings Control")}const x1e=()=>{const{selectedModelId:e,selectModel:t}=Bn(Sn(s=>({selectedModelId:s.selectedModelId,selectModel:s.selectModel}))),[n,r]=N.useState(()=>or.getState().status==="streaming"),[a,i]=N.useState(e);N.useEffect(()=>{const s=u=>{r(u.status==="streaming")},l=u=>{i(u.modelId)};return i(Bn.getState().selectedModelId),Ct.on(xt.INTERACTION_STATUS_CHANGED,s),Ct.on(xt.MODEL_SELECTION_CHANGED,l),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,s),Ct.off(xt.MODEL_SELECTION_CHANGED,l)}},[]);const o=s=>{t(s)};return y.jsx(GT,{value:a,onChange:o,disabled:n})};function S1e(){const e=Mr.getState().registerPromptControl;e({id:"core-global-model-selector",status:()=>Bn.getState().isLoading?"loading":"ready",triggerRenderer:()=>yt.createElement(x1e),getParameters:void 0,getMetadata:void 0}),console.log("[Function] Registered Core Global Model Selector (Prompt)")}let Uc="",Mm=()=>{};const E1e=()=>{const[e,t]=N.useState(Uc),[n,r]=N.useState(!1),[a,i]=N.useState(null),[o,s]=N.useState(()=>or.getState().status==="streaming");N.useEffect(()=>(Mm=p=>{Uc=p,t(p)},t(Uc),()=>{Mm=()=>{}}),[]),N.useEffect(()=>{const p=S=>{s(S.status==="streaming")},g=(S,E)=>{var O;const{getConversationById:C}=vn.getState(),{getEffectiveProjectSettings:k}=yi.getState(),R=Kr.getState().globalSystemPrompt,D=E==="project"?S:E==="conversation"?((O=C(S))==null?void 0:O.projectId)??null:null;i(k(D).systemPrompt??R)},v=S=>{g(S.selectedItemId,S.selectedItemType)},b=S=>{var k;const E=vn.getState();(E.selectedItemType==="project"?E.selectedItemId:E.selectedItemType==="conversation"?((k=E.getConversationById(E.selectedItemId))==null?void 0:k.projectId)??null:null)===S.projectId&&g(E.selectedItemId,E.selectedItemType)},_=S=>{if(S.key==="globalSystemPrompt"){const E=vn.getState();g(E.selectedItemId,E.selectedItemType)}},x=vn.getState();return g(x.selectedItemId,x.selectedItemType),Ct.on(xt.INTERACTION_STATUS_CHANGED,p),Ct.on(xt.CONTEXT_CHANGED,v),Ct.on(xt.PROJECT_UPDATED,b),Ct.on(xt.SETTINGS_CHANGED,_),()=>{Ct.off(xt.INTERACTION_STATUS_CHANGED,p),Ct.off(xt.CONTEXT_CHANGED,v),Ct.off(xt.PROJECT_UPDATED,b),Ct.off(xt.SETTINGS_CHANGED,_)}},[]);const l=N.useCallback(()=>{Mm(e.trim()),r(!1)},[e]),u=N.useCallback(()=>{Mm(""),r(!1)},[]),d=p=>{p&&t(Uc),r(p)},h=Uc.trim().length>0;return y.jsxs(dp,{open:n,onOpenChange:d,children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(fp,{asChild:!0,children:y.jsx(Ht,{variant:h?"secondary":"ghost",size:"icon",className:"h-8 w-8",disabled:o,"aria-label":"Set System Prompt for Next Turn",children:y.jsx(KH,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:h?"System Prompt Override Active":"Set System Prompt (Next Turn)"})]})}),y.jsxs(hp,{className:"w-80 p-4 space-y-3",align:"start",children:[y.jsx(cn,{htmlFor:"turn-system-prompt",children:"System Prompt (Overrides Project/Global for Next Turn)"}),y.jsx(ap,{id:"turn-system-prompt",placeholder:`Inherited: ${(a==null?void 0:a.substring(0,50))||"Default"}${a&&a.length>50?"...":""}`,value:e,onChange:p=>t(p.target.value),rows:5,className:"text-sm"}),y.jsxs("div",{className:"flex justify-between",children:[y.jsx(Ht,{variant:"outline",size:"sm",onClick:u,disabled:!e.trim(),children:"Clear Override"}),y.jsx(Ht,{size:"sm",onClick:l,children:"Set for Next Turn"})]})]})]})};function C1e(){const e=Mr.getState().registerPromptControl;Uc="",e({id:"core-system-prompt",status:()=>"ready",triggerRenderer:()=>yt.createElement(E1e),getMetadata:()=>{const t=Uc.trim();return t?{turnSystemPrompt:t}:void 0},clearOnSubmit:()=>{Uc="",Mm("")}}),console.log("[Function] Registered Core System Prompt Control")}const k1e=()=>{const{structuredOutputJson:e,setStructuredOutputJson:t}=Sa(Sn(x=>({structuredOutputJson:x.structuredOutputJson,setStructuredOutputJson:x.setStructuredOutputJson}))),[n,r]=N.useState(!1),[a,i]=N.useState(e??""),[o,s]=N.useState(""),[l,u]=N.useState([]),d=N.useCallback(()=>{try{JSON.parse(a),t(a.trim()||null),r(!1),lt.success("Structured output applied for next turn.")}catch{lt.error("Invalid JSON format.")}},[a,t]),h=N.useCallback(()=>{i(""),t(null),r(!1),lt.info("Structured output cleared.")},[t]),p=N.useCallback(()=>{if(!o.trim()){lt.error("Please provide a name to save to the library.");return}try{JSON.parse(a);const x={id:Date.now().toString(),name:o.trim(),json:a};u(S=>[...S,x]),s(""),lt.success(`"${x.name}" saved to library.`)}catch{lt.error("Cannot save invalid JSON to library.")}},[a,o]),g=N.useCallback(x=>{i(x.json),t(x.json),r(!1),lt.success(`Loaded "${x.name}" from library.`)},[t]),v=N.useCallback(x=>{u(S=>S.filter(E=>E.id!==x)),lt.info("Item removed from library.")},[]);N.useEffect(()=>{n&&i(e??"")},[n,e]);const b=[{value:"entry",label:"Entry",content:y.jsxs("div",{className:"space-y-3 p-1",children:[y.jsx(cn,{htmlFor:"structured-output-entry",children:"JSON Output Schema"}),y.jsx(ap,{id:"structured-output-entry",placeholder:'e.g., {"type": "object", "properties": {"name": {"type": "string"}}}',value:a,onChange:x=>i(x.target.value),rows:8,className:"font-mono text-xs"}),y.jsxs("div",{className:"flex justify-between items-end gap-2",children:[y.jsxs("div",{className:"flex-grow space-y-1",children:[y.jsx(cn,{htmlFor:"structured-output-name",className:"text-xs",children:"Save to Library (Optional Name)"}),y.jsx(Jn,{id:"structured-output-name",value:o,onChange:x=>s(x.target.value),placeholder:"Schema Name",className:"h-8 text-xs"})]}),y.jsxs(Ht,{size:"sm",variant:"outline",onClick:p,disabled:!o.trim()||!a.trim(),className:"h-8",children:[y.jsx(hw,{className:"h-3.5 w-3.5 mr-1"})," Save"]})]}),y.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[y.jsx(Ht,{variant:"outline",size:"sm",onClick:h,disabled:!e,children:"Clear Applied Schema"}),y.jsx(Ht,{size:"sm",onClick:d,disabled:!a,children:"Apply for Next Turn"})]})]})},{value:"library",label:"Library",content:y.jsx("div",{className:"space-y-2 p-1",children:l.length===0?y.jsx("p",{className:"text-xs text-muted-foreground text-center py-4",children:"No saved schemas yet."}):l.map(x=>y.jsxs("div",{className:"flex items-center justify-between p-2 border rounded hover:bg-muted/50",children:[y.jsx("span",{className:"text-sm font-medium truncate flex-grow mr-2",children:x.name}),y.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[y.jsx(Ht,{size:"sm",variant:"outline",onClick:()=>g(x),className:"h-7 px-2 text-xs",children:"Use"}),y.jsx(Ht,{size:"icon",variant:"ghost",onClick:()=>v(x.id),className:"h-7 w-7 text-destructive",children:y.jsx($s,{className:"h-3.5 w-3.5"})})]})]},x.id))})}],_=!!e;return y.jsxs(dp,{open:n,onOpenChange:r,children:[y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(fp,{asChild:!0,children:y.jsx(Ht,{variant:_?"secondary":"ghost",size:"icon",className:"h-8 w-8","aria-label":"Set Structured Output",children:y.jsx(MU,{className:"h-4 w-4"})})})}),y.jsx(ar,{side:"top",children:_?"Structured Output Active":"Set Structured Output (JSON Schema)"})]})}),y.jsx(hp,{className:"w-[450px] p-0",align:"start",children:y.jsx(sp,{tabs:b,defaultValue:"entry"})})]})},T1e=()=>{const[e,t]=N.useState(!0);return N.useEffect(()=>{console.log("[VisibleStructuredOutputControl] useEffect setup running.");const n=r=>{var l;if(console.log("[VisibleStructuredOutputControl] handleModelChange triggered:",r),!r.modelId){t(!1);return}const{getSelectedModel:a}=Bn.getState(),i=a(),o=(l=i==null?void 0:i.metadata)==null?void 0:l.supported_parameters,s=Array.isArray(o)&&o.includes("structured_output");console.log(`[VisibleStructuredOutputControl] Model ${r.modelId} supports structured_output: ${s}`),t(s)};return n({modelId:Bn.getState().selectedModelId}),console.log(`[VisibleStructuredOutputControl] Subscribing to ${xt.MODEL_SELECTION_CHANGED}`),Ct.on(xt.MODEL_SELECTION_CHANGED,n),()=>{console.log("[VisibleStructuredOutputControl] useEffect cleanup running."),Ct.off(xt.MODEL_SELECTION_CHANGED,n)}},[]),e?y.jsx(k1e,{}):null};function A1e(){const e=Mr.getState().registerPromptControl;e({id:"core-structured-output",status:()=>"ready",triggerRenderer:()=>yt.createElement(T1e),getParameters:()=>{const{structuredOutputJson:t}=Sa.getState();if(t)try{return{structured_output:JSON.parse(t)}}catch(n){console.error("Invalid JSON in structured output state:",n);return}},clearOnSubmit:()=>{Sa.getState().setStructuredOutputJson(null)}}),console.log("[Function] Registered Core Structured Output Control")}const GB=4,VE=e=>{let t=0;return e.forEach(n=>{var r,a,i,o;(r=n.prompt)!=null&&r.content&&(t+=new TextEncoder().encode(n.prompt.content).length),(o=(i=(a=n.prompt)==null?void 0:a.metadata)==null?void 0:i.attachedFiles)==null||o.forEach(s=>{t+=s.size}),n.response&&typeof n.response=="string"&&(t+=new TextEncoder().encode(n.response).length)}),Math.ceil(t/GB)},N1e=()=>{const[e,t]=N.useState(""),[n,r]=N.useState(0),[a,i]=N.useState([]),[o,s]=N.useState(null),[l,u]=N.useState(0);N.useEffect(()=>{const b=Xc.getState(),_=Bn.getState(),x=or.getState();if(i(b.attachedFilesMetadata),s(_.selectedModelId),x.currentConversationId){const D=x.interactions.filter(O=>O.status==="COMPLETED");r(VE(D))}else r(0);const S=D=>{t(D.value)},E=D=>{i(D.files)},C=D=>{console.log(D),s(D.modelId)},k=()=>{const D=or.getState();if(D.currentConversationId){const O=D.interactions.filter(L=>L.status==="COMPLETED");r(VE(O))}},R=()=>{const D=or.getState();if(D.currentConversationId){const O=D.interactions.filter(L=>L.status==="COMPLETED");r(VE(O))}else r(0)};return Ct.on(xt.PROMPT_INPUT_CHANGE,S),Ct.on(xt.ATTACHED_FILES_CHANGED,E),Ct.on(xt.MODEL_SELECTION_CHANGED,C),Ct.on(xt.INTERACTION_COMPLETED,k),Ct.on(xt.CONTEXT_CHANGED,R),()=>{Ct.off(xt.PROMPT_INPUT_CHANGE,S),Ct.off(xt.ATTACHED_FILES_CHANGED,E),Ct.off(xt.MODEL_SELECTION_CHANGED,C),Ct.off(xt.INTERACTION_COMPLETED,k),Ct.off(xt.CONTEXT_CHANGED,R)}},[]),N.useEffect(()=>{var O;if(!o){u(0);return}const{dbProviderConfigs:b,dbApiKeys:_}=Bn.getState(),{providerId:x,modelId:S}=Zl(o);if(!x||!S){u(0);return}const E=b.find(L=>L.id===x);if(!E){u(0);return}const C=_.find(L=>L.id===E.apiKeyId),k=BC(E,S,C==null?void 0:C.value),R=k==null?void 0:k.metadata,D=((O=R==null?void 0:R.top_provider)==null?void 0:O.context_length)??(R==null?void 0:R.context_length)??0;u(D)},[o]);const{estimatedInputTokens:d,totalEstimatedTokens:h,contextPercentage:p}=N.useMemo(()=>{const b=new TextEncoder().encode(e).length,_=a.reduce((C,k)=>C+k.size,0),x=Math.ceil((b+_)/GB),S=n+x,E=l?Math.min(100,Math.round(S/l*100)):0;return{estimatedInputTokens:x,totalEstimatedTokens:S,contextPercentage:E}},[e,a,n,l]),g=N.useMemo(()=>p>85?"text-red-600 dark:text-red-500":p>70?"text-orange-500 dark:text-orange-400":p>40?"text-yellow-500 dark:text-yellow-400":"text-green-600 dark:text-green-500",[p]);if(!o||l===0)return null;const v=`Context: ~${h.toLocaleString()} / ${l.toLocaleString()} tokens (${p}%) [History: ${n}, Input: ${d}]`;return y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx("div",{className:"flex items-center justify-center h-8 w-8 px-2",children:y.jsx(IU,{className:Rt("h-3 w-3 fill-current",g)})})}),y.jsx(ar,{side:"top",children:v})]})})};function R1e(){const e=Mr.getState().registerPromptControl;e({id:"core-usage-display",status:()=>"ready",triggerRenderer:()=>yt.createElement(N1e),renderer:void 0}),console.log("[Function] Registered Core Usage Display Control (Trigger)")}const I1e=()=>{const{setReasoningEnabled:e}=Sa(Sn(u=>({setReasoningEnabled:u.setReasoningEnabled}))),[t,n]=N.useState(()=>Sa.getState().reasoningEnabled),[r,a]=N.useState(()=>or.getState().status==="streaming"),[i,o]=N.useState(!0);N.useEffect(()=>{const u=p=>{p.params.reasoningEnabled!==void 0&&n(p.params.reasoningEnabled)},d=p=>{a(p.status==="streaming")},h=p=>{var b,_;if(!p.modelId){o(!1);return}const{getSelectedModel:g}=Bn.getState(),v=g();o(((_=(b=v==null?void 0:v.metadata)==null?void 0:b.supported_parameters)==null?void 0:_.includes("reasoning"))??!1)};return h({modelId:Bn.getState().selectedModelId}),Ct.on(xt.PROMPT_PARAMS_CHANGED,u),Ct.on(xt.INTERACTION_STATUS_CHANGED,d),Ct.on(xt.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,u),Ct.off(xt.INTERACTION_STATUS_CHANGED,d),Ct.off(xt.MODEL_SELECTION_CHANGED,h)}},[]);const s=t===!0,l=()=>{e(s?null:!0)};return i?y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:l,disabled:r,"aria-label":s?"Disable Reasoning for Next Turn":"Enable Reasoning for Next Turn",children:y.jsx(eD,{className:Rt("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),y.jsx(ar,{side:"top",children:s?"Reasoning Enabled (Click to Disable)":"Reasoning Disabled (Click to Enable)"})]})}):null};function O1e(){const e=Mr.getState().registerPromptControl;e({id:"core-reasoning",status:()=>"ready",triggerRenderer:()=>yt.createElement(I1e),getParameters:()=>{const{reasoningEnabled:t}=Sa.getState();return t===!0?{reasoning:!0}:void 0},clearOnSubmit:()=>{Sa.getState().setReasoningEnabled(null)}}),console.log("[Function] Registered Core Reasoning Control")}const D1e=()=>{const{setWebSearchEnabled:e}=Sa(Sn(u=>({setWebSearchEnabled:u.setWebSearchEnabled}))),[t,n]=N.useState(()=>Sa.getState().webSearchEnabled),[r,a]=N.useState(()=>or.getState().status==="streaming"),[i,o]=N.useState(!0);N.useEffect(()=>{const u=p=>{p.params.webSearchEnabled!==void 0&&n(p.params.webSearchEnabled)},d=p=>{a(p.status==="streaming")},h=p=>{var _;if(!p.modelId){o(!1);return}const{getSelectedModel:g}=Bn.getState(),v=g(),b=((_=v==null?void 0:v.metadata)==null?void 0:_.supported_parameters)??[];o(b.includes("web_search")||b.includes("web_search_options"))};return h({modelId:Bn.getState().selectedModelId}),Ct.on(xt.PROMPT_PARAMS_CHANGED,u),Ct.on(xt.INTERACTION_STATUS_CHANGED,d),Ct.on(xt.MODEL_SELECTION_CHANGED,h),()=>{Ct.off(xt.PROMPT_PARAMS_CHANGED,u),Ct.off(xt.INTERACTION_STATUS_CHANGED,d),Ct.off(xt.MODEL_SELECTION_CHANGED,h)}},[]);const s=t===!0,l=()=>{e(s?null:!0)};return i?y.jsx(er,{delayDuration:100,children:y.jsxs(nr,{children:[y.jsx(rr,{asChild:!0,children:y.jsx(Ht,{variant:s?"secondary":"ghost",size:"icon",className:"h-8 w-8",onClick:l,disabled:r,"aria-label":s?"Disable Web Search for Next Turn":"Enable Web Search for Next Turn",children:y.jsx(Y0,{className:Rt("h-4 w-4",s?"text-primary":"text-muted-foreground")})})}),y.jsx(ar,{side:"top",children:s?"Web Search Enabled (Click to Disable)":"Web Search Disabled (Click to Enable)"})]})}):null};function j1e(){const e=Mr.getState().registerPromptControl;e({id:"core-web-search",status:()=>"ready",triggerRenderer:()=>yt.createElement(D1e),getParameters:()=>{const{webSearchEnabled:t}=Sa.getState();return t===!0?{web_search:!0}:void 0},clearOnSubmit:()=>{Sa.getState().setWebSearchEnabled(null)}}),console.log("[Function] Registered Core Web Search Control")}const M1e=()=>{const[e,t]=N.useState(!0),n=vn(ne=>ne.selectedItemId),r=vn(ne=>ne.selectedItemType),a=vn(ne=>ne.loadSidebarItems),i=vn(ne=>ne.getConversationById),{getEffectiveProjectSettings:o}=yi(Sn(ne=>({projects:ne.projects,getProjectById:ne.getProjectById,getEffectiveProjectSettings:ne.getEffectiveProjectSettings}))),{interactions:s,status:l}=or(Sn(ne=>({interactions:ne.interactions,status:ne.status}))),{globalError:u,isSidebarCollapsed:d,isChatControlPanelOpen:h,isProjectSettingsModalOpen:p}=Va(Sn(ne=>({globalError:ne.globalError,isSidebarCollapsed:ne.isSidebarCollapsed,isChatControlPanelOpen:ne.isChatControlPanelOpen,isProjectSettingsModalOpen:ne.isProjectSettingsModalOpen}))),g=h.vfs??!1,v=Mr(Sn(ne=>Object.values(ne.chatControls))),{loadDbMods:b,setLoadedMods:_}=U0(Sn(ne=>({loadDbMods:ne.loadDbMods,setLoadedMods:ne.setLoadedMods}))),{loadInitialData:x}=Bn(Sn(ne=>({loadInitialData:ne.loadInitialData}))),{loadSettings:S}=Kr(Sn(ne=>({loadSettings:ne.loadSettings}))),{setVfsKey:E}=Go(Sn(ne=>({setVfsKey:ne.setVfsKey}))),{initializePromptState:C}=Sa(Sn(ne=>({initializePromptState:ne.initializePromptState})));N.useEffect(()=>{let ne=!0;return(async()=>{var re;console.log("LiteChat: Starting initialization..."),t(!0);try{if(console.log("LiteChat: Loading core data..."),await S(),!ne||(console.log("LiteChat: Settings loaded."),await x(),!ne)||(console.log("LiteChat: Provider data loaded."),await a(),!ne)||(console.log("LiteChat: Sidebar items loaded."),console.log("LiteChat: Registering core controls and tools..."),rpe(),bbe(),ybe(),_1e(),S1e(),R1e(),C1e(),O1e(),j1e(),$be(),_we(),$we(),Mbe(),A1e(),Swe(),Rwe(),Pwe(),console.log("LiteChat: Core controls and tools registered."),!ne)||(console.log("LiteChat: Loading mods..."),await b(),!ne))return;console.log("LiteChat: DB Mods loaded.");const ee=U0.getState().dbMods;console.log(`LiteChat: Processing ${ee.length} mods...`);const ie=await Khe(ee);if(!ne)return;_(ie),console.log(`LiteChat: ${ie.length} mods processed.`);const U=r==="project"?n:r==="conversation"?((re=i(n))==null?void 0:re.projectId)??null:null,Q=o(U);C(Q),console.log("LiteChat: Initial prompt state initialized.",Q)}catch(ee){console.error("LiteChat: Initialization failed:",ee),lt.error(`Initialization failed: ${ee instanceof Error?ee.message:String(ee)}`),Va.getState().setGlobalError("Initialization failed.")}finally{ne&&(console.log("LiteChat: Initialization complete."),t(!1))}})(),()=>{ne=!1,console.log("LiteChat: Unmounting, initialization cancelled if pending.")}},[]);const k=N.useRef({itemId:null,itemType:null});N.useEffect(()=>{var ae;if(e)return;const ne={itemId:n,itemType:r};if(ne.itemId!==k.current.itemId||ne.itemType!==k.current.itemType){const re=r==="project"?n:r==="conversation"?((ae=i(n))==null?void 0:ae.projectId)??null:null;console.log(`[LiteChat Effect] Context changed (Item: ${n}, Type: ${r}). Calculating effective settings for Project ID: ${re}`);const ee=o(re);C(ee),console.log("[LiteChat Effect] Prompt state updated based on context change.",ee),k.current=ne}},[n,r,i,o,C,e]),N.useEffect(()=>{let ne=null;if(g){if(r==="project")ne=n;else if(r==="conversation"){const ae=vn.getState().getConversationById(n);ne=(ae==null?void 0:ae.projectId)??"orphan"}else ne="orphan";console.log(`[LiteChat Effect] VFS Panel Opened/Context Changed. Setting target key: ${ne}`)}else ne=null,console.log("[LiteChat Effect] VFS Panel Closed. Setting target key: null");Go.getState().vfsKey!==ne&&E(ne)},[g,n,r,E]);const R=N.useCallback(async ne=>{var Q;const ae=vn.getState(),re=Va.getState(),ee=Sa.getState();let ie=ae.selectedItemType==="conversation"?ae.selectedItemId:null;const U=ae.selectedItemType==="project"?ae.selectedItemId:ae.selectedItemType==="conversation"?((Q=ae.getConversationById(ae.selectedItemId))==null?void 0:Q.projectId)??null:null;if(!ie){console.log("LiteChat: No conversation selected, creating new one...");try{const X=await ae.addConversation({title:"New Chat",projectId:U});await ae.selectItem(X,"conversation"),ie=vn.getState().selectedItemId,ie!==X&&console.error("LiteChat: Mismatch between created ID and selected ID after selection!"),console.log(`LiteChat: New conversation created (${ie}), selected.`),setTimeout(()=>re.setFocusInputFlag(!0),0)}catch(X){console.error("LiteChat: Failed to create new conversation",X),lt.error("Failed to start new chat.");return}}console.log("LiteChat: Submitting turn data to ConversationService...");try{const X={...ne,metadata:{...ne.metadata,modelId:ee.modelId}};await e6.submitPrompt(X),console.log("LiteChat: ConversationService processing initiated."),re.setFocusInputFlag(!0)}catch(X){console.error("LiteChat: Error submitting prompt:",X)}},[]),D=N.useCallback(async ne=>{console.log(`LiteChat: Regenerating interaction ${ne}`);try{await e6.regenerateInteraction(ne),console.log(`LiteChat: ConversationService regeneration initiated for ${ne}.`),Va.getState().setFocusInputFlag(!0)}catch(ae){console.error("LiteChat: Error regenerating interaction:",ae)}},[]),O=N.useCallback(ne=>{console.log(`LiteChat: Stopping interaction ${ne}`),X2.abortInteraction(ne)},[]),L=N.useMemo(()=>v.filter(ne=>(ne.panel??"main")==="sidebar"&&(ne.show?ne.show():!0)).map(ne=>ne),[v]),B=N.useMemo(()=>v.filter(ne=>ne.panel==="sidebar-footer"&&(ne.show?ne.show():!0)).map(ne=>ne),[v]),Y=N.useMemo(()=>v.filter(ne=>ne.panel==="header"&&(ne.show?ne.show():!0)).map(ne=>ne),[v]),F=N.useMemo(()=>{var ne;return(ne=v.find(ae=>ae.id==="core-settings-trigger"))==null?void 0:ne.settingsRenderer},[v]),Z=N.useMemo(()=>{var ne;return(ne=v.find(ae=>ae.id==="core-project-settings-trigger"))==null?void 0:ne.settingsRenderer},[v]),q=r==="conversation"?n:null;return e?y.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-background text-foreground",children:y.jsxs("div",{className:"flex flex-col items-center gap-4",children:[y.jsx(Vn,{className:"h-12 w-12 animate-spin text-primary"}),y.jsx("p",{className:"text-lg text-muted-foreground",children:"Initializing LiteChat..."})]})}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:Rt("flex h-full w-full border border-[--border] rounded-lg overflow-hidden bg-background text-foreground"),children:[y.jsxs("div",{className:Rt("hidden md:flex flex-col border-r border-[--border] bg-card","transition-[width] duration-300 ease-in-out","flex-shrink-0 overflow-hidden",d?"w-16":"w-64"),children:[y.jsxs("div",{className:Rt("flex-grow overflow-y-auto overflow-x-hidden"),children:[y.jsx("div",{className:Rt(d?"hidden":"block"),children:y.jsx(Tm,{controls:L,panelId:"sidebar",renderMode:"full",className:"h-full"})}),y.jsx("div",{className:Rt(d?"block":"hidden"),children:y.jsx(Tm,{controls:L,panelId:"sidebar",renderMode:"icon",className:"flex flex-col items-center gap-2 p-2"})})]}),y.jsx("div",{className:Rt("flex-shrink-0 border-t border-[--border] p-2",d?"flex flex-col items-center gap-2":"flex items-center justify-center"),children:y.jsx(Tm,{controls:B,panelId:"sidebar-footer",renderMode:d?"icon":"full",className:Rt("flex",d?"flex-col gap-2 items-center":"items-center gap-1 justify-center")})})]}),y.jsxs("div",{className:"flex flex-col flex-grow min-w-0",children:[y.jsx("div",{className:"flex items-center justify-end p-2 border-b border-[--border] bg-card flex-shrink-0",children:y.jsx(Tm,{controls:Y,panelId:"header",className:"flex items-center justify-end gap-1"})}),y.jsx(rue,{conversationId:q,interactions:s,onRegenerateInteraction:D,onStopInteraction:O,status:l,className:"flex-grow overflow-y-hidden p-4 space-y-4"}),u&&y.jsxs("div",{className:"p-2 bg-destructive text-destructive-foreground text-sm text-center",children:["Error: ",u]}),y.jsx(SY,{InputAreaRenderer:kL,onSubmit:R,className:"border-t border-[--border] bg-card flex-shrink-0"})]}),y.jsx(Tm,{controls:v,panelId:"drawer_right",renderMode:"full"})]}),h.settingsModal&&F&&F(),p&&Z&&Z(),y.jsx(Qhe,{richColors:!0,position:"bottom-right",closeButton:!0})]})};function P1e(){return y.jsx("div",{className:"h-screen bg-background text-foreground flex flex-col",children:y.jsx("main",{className:"flex-grow overflow-hidden",children:y.jsx(M1e,{})})})}wq();function F1e({children:e}){const t=Kr(n=>n.theme);return N.useEffect(()=>{const n=window.document.documentElement;if(n.classList.remove("light","dark"),t==="system"){const r=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";n.classList.add(r)}else n.classList.add(t)},[t]),y.jsx(y.Fragment,{children:e})}E7.createRoot(document.getElementById("root")).render(y.jsx(yt.StrictMode,{children:y.jsx(F1e,{children:y.jsx(P1e,{})})}));
